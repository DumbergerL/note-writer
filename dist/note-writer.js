/******/ (function(modules) { // webpackBootstrap
/******/ 	// The module cache
/******/ 	var installedModules = {};
/******/
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/
/******/ 		// Check if module is in cache
/******/ 		if(installedModules[moduleId]) {
/******/ 			return installedModules[moduleId].exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = installedModules[moduleId] = {
/******/ 			i: moduleId,
/******/ 			l: false,
/******/ 			exports: {}
/******/ 		};
/******/
/******/ 		// Execute the module function
/******/ 		modules[moduleId].call(module.exports, module, module.exports, __webpack_require__);
/******/
/******/ 		// Flag the module as loaded
/******/ 		module.l = true;
/******/
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/
/******/
/******/ 	// expose the modules object (__webpack_modules__)
/******/ 	__webpack_require__.m = modules;
/******/
/******/ 	// expose the module cache
/******/ 	__webpack_require__.c = installedModules;
/******/
/******/ 	// define getter function for harmony exports
/******/ 	__webpack_require__.d = function(exports, name, getter) {
/******/ 		if(!__webpack_require__.o(exports, name)) {
/******/ 			Object.defineProperty(exports, name, { enumerable: true, get: getter });
/******/ 		}
/******/ 	};
/******/
/******/ 	// define __esModule on exports
/******/ 	__webpack_require__.r = function(exports) {
/******/ 		if(typeof Symbol !== 'undefined' && Symbol.toStringTag) {
/******/ 			Object.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });
/******/ 		}
/******/ 		Object.defineProperty(exports, '__esModule', { value: true });
/******/ 	};
/******/
/******/ 	// create a fake namespace object
/******/ 	// mode & 1: value is a module id, require it
/******/ 	// mode & 2: merge all properties of value into the ns
/******/ 	// mode & 4: return value when already ns object
/******/ 	// mode & 8|1: behave like require
/******/ 	__webpack_require__.t = function(value, mode) {
/******/ 		if(mode & 1) value = __webpack_require__(value);
/******/ 		if(mode & 8) return value;
/******/ 		if((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;
/******/ 		var ns = Object.create(null);
/******/ 		__webpack_require__.r(ns);
/******/ 		Object.defineProperty(ns, 'default', { enumerable: true, value: value });
/******/ 		if(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));
/******/ 		return ns;
/******/ 	};
/******/
/******/ 	// getDefaultExport function for compatibility with non-harmony modules
/******/ 	__webpack_require__.n = function(module) {
/******/ 		var getter = module && module.__esModule ?
/******/ 			function getDefault() { return module['default']; } :
/******/ 			function getModuleExports() { return module; };
/******/ 		__webpack_require__.d(getter, 'a', getter);
/******/ 		return getter;
/******/ 	};
/******/
/******/ 	// Object.prototype.hasOwnProperty.call
/******/ 	__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };
/******/
/******/ 	// __webpack_public_path__
/******/ 	__webpack_require__.p = "";
/******/
/******/
/******/ 	// Load entry module and return exports
/******/ 	return __webpack_require__(__webpack_require__.s = "./src/index.js");
/******/ })
/************************************************************************/
/******/ ({

/***/ "./node_modules/base64-js/index.js":
/*!*****************************************!*\
  !*** ./node_modules/base64-js/index.js ***!
  \*****************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


exports.byteLength = byteLength
exports.toByteArray = toByteArray
exports.fromByteArray = fromByteArray

var lookup = []
var revLookup = []
var Arr = typeof Uint8Array !== 'undefined' ? Uint8Array : Array

var code = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/'
for (var i = 0, len = code.length; i < len; ++i) {
  lookup[i] = code[i]
  revLookup[code.charCodeAt(i)] = i
}

// Support decoding URL-safe base64 strings, as Node.js does.
// See: https://en.wikipedia.org/wiki/Base64#URL_applications
revLookup['-'.charCodeAt(0)] = 62
revLookup['_'.charCodeAt(0)] = 63

function getLens (b64) {
  var len = b64.length

  if (len % 4 > 0) {
    throw new Error('Invalid string. Length must be a multiple of 4')
  }

  // Trim off extra bytes after placeholder bytes are found
  // See: https://github.com/beatgammit/base64-js/issues/42
  var validLen = b64.indexOf('=')
  if (validLen === -1) validLen = len

  var placeHoldersLen = validLen === len
    ? 0
    : 4 - (validLen % 4)

  return [validLen, placeHoldersLen]
}

// base64 is 4/3 + up to two characters of the original data
function byteLength (b64) {
  var lens = getLens(b64)
  var validLen = lens[0]
  var placeHoldersLen = lens[1]
  return ((validLen + placeHoldersLen) * 3 / 4) - placeHoldersLen
}

function _byteLength (b64, validLen, placeHoldersLen) {
  return ((validLen + placeHoldersLen) * 3 / 4) - placeHoldersLen
}

function toByteArray (b64) {
  var tmp
  var lens = getLens(b64)
  var validLen = lens[0]
  var placeHoldersLen = lens[1]

  var arr = new Arr(_byteLength(b64, validLen, placeHoldersLen))

  var curByte = 0

  // if there are placeholders, only get up to the last complete 4 chars
  var len = placeHoldersLen > 0
    ? validLen - 4
    : validLen

  var i
  for (i = 0; i < len; i += 4) {
    tmp =
      (revLookup[b64.charCodeAt(i)] << 18) |
      (revLookup[b64.charCodeAt(i + 1)] << 12) |
      (revLookup[b64.charCodeAt(i + 2)] << 6) |
      revLookup[b64.charCodeAt(i + 3)]
    arr[curByte++] = (tmp >> 16) & 0xFF
    arr[curByte++] = (tmp >> 8) & 0xFF
    arr[curByte++] = tmp & 0xFF
  }

  if (placeHoldersLen === 2) {
    tmp =
      (revLookup[b64.charCodeAt(i)] << 2) |
      (revLookup[b64.charCodeAt(i + 1)] >> 4)
    arr[curByte++] = tmp & 0xFF
  }

  if (placeHoldersLen === 1) {
    tmp =
      (revLookup[b64.charCodeAt(i)] << 10) |
      (revLookup[b64.charCodeAt(i + 1)] << 4) |
      (revLookup[b64.charCodeAt(i + 2)] >> 2)
    arr[curByte++] = (tmp >> 8) & 0xFF
    arr[curByte++] = tmp & 0xFF
  }

  return arr
}

function tripletToBase64 (num) {
  return lookup[num >> 18 & 0x3F] +
    lookup[num >> 12 & 0x3F] +
    lookup[num >> 6 & 0x3F] +
    lookup[num & 0x3F]
}

function encodeChunk (uint8, start, end) {
  var tmp
  var output = []
  for (var i = start; i < end; i += 3) {
    tmp =
      ((uint8[i] << 16) & 0xFF0000) +
      ((uint8[i + 1] << 8) & 0xFF00) +
      (uint8[i + 2] & 0xFF)
    output.push(tripletToBase64(tmp))
  }
  return output.join('')
}

function fromByteArray (uint8) {
  var tmp
  var len = uint8.length
  var extraBytes = len % 3 // if we have 1 byte left, pad 2 bytes
  var parts = []
  var maxChunkLength = 16383 // must be multiple of 3

  // go through the array every three bytes, we'll deal with trailing stuff later
  for (var i = 0, len2 = len - extraBytes; i < len2; i += maxChunkLength) {
    parts.push(encodeChunk(
      uint8, i, (i + maxChunkLength) > len2 ? len2 : (i + maxChunkLength)
    ))
  }

  // pad the end with zeros, but make sure to not forget the extra bytes
  if (extraBytes === 1) {
    tmp = uint8[len - 1]
    parts.push(
      lookup[tmp >> 2] +
      lookup[(tmp << 4) & 0x3F] +
      '=='
    )
  } else if (extraBytes === 2) {
    tmp = (uint8[len - 2] << 8) + uint8[len - 1]
    parts.push(
      lookup[tmp >> 10] +
      lookup[(tmp >> 4) & 0x3F] +
      lookup[(tmp << 2) & 0x3F] +
      '='
    )
  }

  return parts.join('')
}


/***/ }),

/***/ "./node_modules/buffer/index.js":
/*!**************************************!*\
  !*** ./node_modules/buffer/index.js ***!
  \**************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
/* WEBPACK VAR INJECTION */(function(global) {/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>
 * @license  MIT
 */
/* eslint-disable no-proto */



var base64 = __webpack_require__(/*! base64-js */ "./node_modules/base64-js/index.js")
var ieee754 = __webpack_require__(/*! ieee754 */ "./node_modules/ieee754/index.js")
var isArray = __webpack_require__(/*! isarray */ "./node_modules/isarray/index.js")

exports.Buffer = Buffer
exports.SlowBuffer = SlowBuffer
exports.INSPECT_MAX_BYTES = 50

/**
 * If `Buffer.TYPED_ARRAY_SUPPORT`:
 *   === true    Use Uint8Array implementation (fastest)
 *   === false   Use Object implementation (most compatible, even IE6)
 *
 * Browsers that support typed arrays are IE 10+, Firefox 4+, Chrome 7+, Safari 5.1+,
 * Opera 11.6+, iOS 4.2+.
 *
 * Due to various browser bugs, sometimes the Object implementation will be used even
 * when the browser supports typed arrays.
 *
 * Note:
 *
 *   - Firefox 4-29 lacks support for adding new properties to `Uint8Array` instances,
 *     See: https://bugzilla.mozilla.org/show_bug.cgi?id=695438.
 *
 *   - Chrome 9-10 is missing the `TypedArray.prototype.subarray` function.
 *
 *   - IE10 has a broken `TypedArray.prototype.subarray` function which returns arrays of
 *     incorrect length in some situations.

 * We detect these buggy browsers and set `Buffer.TYPED_ARRAY_SUPPORT` to `false` so they
 * get the Object implementation, which is slower but behaves correctly.
 */
Buffer.TYPED_ARRAY_SUPPORT = global.TYPED_ARRAY_SUPPORT !== undefined
  ? global.TYPED_ARRAY_SUPPORT
  : typedArraySupport()

/*
 * Export kMaxLength after typed array support is determined.
 */
exports.kMaxLength = kMaxLength()

function typedArraySupport () {
  try {
    var arr = new Uint8Array(1)
    arr.__proto__ = {__proto__: Uint8Array.prototype, foo: function () { return 42 }}
    return arr.foo() === 42 && // typed array instances can be augmented
        typeof arr.subarray === 'function' && // chrome 9-10 lack `subarray`
        arr.subarray(1, 1).byteLength === 0 // ie10 has broken `subarray`
  } catch (e) {
    return false
  }
}

function kMaxLength () {
  return Buffer.TYPED_ARRAY_SUPPORT
    ? 0x7fffffff
    : 0x3fffffff
}

function createBuffer (that, length) {
  if (kMaxLength() < length) {
    throw new RangeError('Invalid typed array length')
  }
  if (Buffer.TYPED_ARRAY_SUPPORT) {
    // Return an augmented `Uint8Array` instance, for best performance
    that = new Uint8Array(length)
    that.__proto__ = Buffer.prototype
  } else {
    // Fallback: Return an object instance of the Buffer class
    if (that === null) {
      that = new Buffer(length)
    }
    that.length = length
  }

  return that
}

/**
 * The Buffer constructor returns instances of `Uint8Array` that have their
 * prototype changed to `Buffer.prototype`. Furthermore, `Buffer` is a subclass of
 * `Uint8Array`, so the returned instances will have all the node `Buffer` methods
 * and the `Uint8Array` methods. Square bracket notation works as expected -- it
 * returns a single octet.
 *
 * The `Uint8Array` prototype remains unmodified.
 */

function Buffer (arg, encodingOrOffset, length) {
  if (!Buffer.TYPED_ARRAY_SUPPORT && !(this instanceof Buffer)) {
    return new Buffer(arg, encodingOrOffset, length)
  }

  // Common case.
  if (typeof arg === 'number') {
    if (typeof encodingOrOffset === 'string') {
      throw new Error(
        'If encoding is specified then the first argument must be a string'
      )
    }
    return allocUnsafe(this, arg)
  }
  return from(this, arg, encodingOrOffset, length)
}

Buffer.poolSize = 8192 // not used by this implementation

// TODO: Legacy, not needed anymore. Remove in next major version.
Buffer._augment = function (arr) {
  arr.__proto__ = Buffer.prototype
  return arr
}

function from (that, value, encodingOrOffset, length) {
  if (typeof value === 'number') {
    throw new TypeError('"value" argument must not be a number')
  }

  if (typeof ArrayBuffer !== 'undefined' && value instanceof ArrayBuffer) {
    return fromArrayBuffer(that, value, encodingOrOffset, length)
  }

  if (typeof value === 'string') {
    return fromString(that, value, encodingOrOffset)
  }

  return fromObject(that, value)
}

/**
 * Functionally equivalent to Buffer(arg, encoding) but throws a TypeError
 * if value is a number.
 * Buffer.from(str[, encoding])
 * Buffer.from(array)
 * Buffer.from(buffer)
 * Buffer.from(arrayBuffer[, byteOffset[, length]])
 **/
Buffer.from = function (value, encodingOrOffset, length) {
  return from(null, value, encodingOrOffset, length)
}

if (Buffer.TYPED_ARRAY_SUPPORT) {
  Buffer.prototype.__proto__ = Uint8Array.prototype
  Buffer.__proto__ = Uint8Array
  if (typeof Symbol !== 'undefined' && Symbol.species &&
      Buffer[Symbol.species] === Buffer) {
    // Fix subarray() in ES2016. See: https://github.com/feross/buffer/pull/97
    Object.defineProperty(Buffer, Symbol.species, {
      value: null,
      configurable: true
    })
  }
}

function assertSize (size) {
  if (typeof size !== 'number') {
    throw new TypeError('"size" argument must be a number')
  } else if (size < 0) {
    throw new RangeError('"size" argument must not be negative')
  }
}

function alloc (that, size, fill, encoding) {
  assertSize(size)
  if (size <= 0) {
    return createBuffer(that, size)
  }
  if (fill !== undefined) {
    // Only pay attention to encoding if it's a string. This
    // prevents accidentally sending in a number that would
    // be interpretted as a start offset.
    return typeof encoding === 'string'
      ? createBuffer(that, size).fill(fill, encoding)
      : createBuffer(that, size).fill(fill)
  }
  return createBuffer(that, size)
}

/**
 * Creates a new filled Buffer instance.
 * alloc(size[, fill[, encoding]])
 **/
Buffer.alloc = function (size, fill, encoding) {
  return alloc(null, size, fill, encoding)
}

function allocUnsafe (that, size) {
  assertSize(size)
  that = createBuffer(that, size < 0 ? 0 : checked(size) | 0)
  if (!Buffer.TYPED_ARRAY_SUPPORT) {
    for (var i = 0; i < size; ++i) {
      that[i] = 0
    }
  }
  return that
}

/**
 * Equivalent to Buffer(num), by default creates a non-zero-filled Buffer instance.
 * */
Buffer.allocUnsafe = function (size) {
  return allocUnsafe(null, size)
}
/**
 * Equivalent to SlowBuffer(num), by default creates a non-zero-filled Buffer instance.
 */
Buffer.allocUnsafeSlow = function (size) {
  return allocUnsafe(null, size)
}

function fromString (that, string, encoding) {
  if (typeof encoding !== 'string' || encoding === '') {
    encoding = 'utf8'
  }

  if (!Buffer.isEncoding(encoding)) {
    throw new TypeError('"encoding" must be a valid string encoding')
  }

  var length = byteLength(string, encoding) | 0
  that = createBuffer(that, length)

  var actual = that.write(string, encoding)

  if (actual !== length) {
    // Writing a hex string, for example, that contains invalid characters will
    // cause everything after the first invalid character to be ignored. (e.g.
    // 'abxxcd' will be treated as 'ab')
    that = that.slice(0, actual)
  }

  return that
}

function fromArrayLike (that, array) {
  var length = array.length < 0 ? 0 : checked(array.length) | 0
  that = createBuffer(that, length)
  for (var i = 0; i < length; i += 1) {
    that[i] = array[i] & 255
  }
  return that
}

function fromArrayBuffer (that, array, byteOffset, length) {
  array.byteLength // this throws if `array` is not a valid ArrayBuffer

  if (byteOffset < 0 || array.byteLength < byteOffset) {
    throw new RangeError('\'offset\' is out of bounds')
  }

  if (array.byteLength < byteOffset + (length || 0)) {
    throw new RangeError('\'length\' is out of bounds')
  }

  if (byteOffset === undefined && length === undefined) {
    array = new Uint8Array(array)
  } else if (length === undefined) {
    array = new Uint8Array(array, byteOffset)
  } else {
    array = new Uint8Array(array, byteOffset, length)
  }

  if (Buffer.TYPED_ARRAY_SUPPORT) {
    // Return an augmented `Uint8Array` instance, for best performance
    that = array
    that.__proto__ = Buffer.prototype
  } else {
    // Fallback: Return an object instance of the Buffer class
    that = fromArrayLike(that, array)
  }
  return that
}

function fromObject (that, obj) {
  if (Buffer.isBuffer(obj)) {
    var len = checked(obj.length) | 0
    that = createBuffer(that, len)

    if (that.length === 0) {
      return that
    }

    obj.copy(that, 0, 0, len)
    return that
  }

  if (obj) {
    if ((typeof ArrayBuffer !== 'undefined' &&
        obj.buffer instanceof ArrayBuffer) || 'length' in obj) {
      if (typeof obj.length !== 'number' || isnan(obj.length)) {
        return createBuffer(that, 0)
      }
      return fromArrayLike(that, obj)
    }

    if (obj.type === 'Buffer' && isArray(obj.data)) {
      return fromArrayLike(that, obj.data)
    }
  }

  throw new TypeError('First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.')
}

function checked (length) {
  // Note: cannot use `length < kMaxLength()` here because that fails when
  // length is NaN (which is otherwise coerced to zero.)
  if (length >= kMaxLength()) {
    throw new RangeError('Attempt to allocate Buffer larger than maximum ' +
                         'size: 0x' + kMaxLength().toString(16) + ' bytes')
  }
  return length | 0
}

function SlowBuffer (length) {
  if (+length != length) { // eslint-disable-line eqeqeq
    length = 0
  }
  return Buffer.alloc(+length)
}

Buffer.isBuffer = function isBuffer (b) {
  return !!(b != null && b._isBuffer)
}

Buffer.compare = function compare (a, b) {
  if (!Buffer.isBuffer(a) || !Buffer.isBuffer(b)) {
    throw new TypeError('Arguments must be Buffers')
  }

  if (a === b) return 0

  var x = a.length
  var y = b.length

  for (var i = 0, len = Math.min(x, y); i < len; ++i) {
    if (a[i] !== b[i]) {
      x = a[i]
      y = b[i]
      break
    }
  }

  if (x < y) return -1
  if (y < x) return 1
  return 0
}

Buffer.isEncoding = function isEncoding (encoding) {
  switch (String(encoding).toLowerCase()) {
    case 'hex':
    case 'utf8':
    case 'utf-8':
    case 'ascii':
    case 'latin1':
    case 'binary':
    case 'base64':
    case 'ucs2':
    case 'ucs-2':
    case 'utf16le':
    case 'utf-16le':
      return true
    default:
      return false
  }
}

Buffer.concat = function concat (list, length) {
  if (!isArray(list)) {
    throw new TypeError('"list" argument must be an Array of Buffers')
  }

  if (list.length === 0) {
    return Buffer.alloc(0)
  }

  var i
  if (length === undefined) {
    length = 0
    for (i = 0; i < list.length; ++i) {
      length += list[i].length
    }
  }

  var buffer = Buffer.allocUnsafe(length)
  var pos = 0
  for (i = 0; i < list.length; ++i) {
    var buf = list[i]
    if (!Buffer.isBuffer(buf)) {
      throw new TypeError('"list" argument must be an Array of Buffers')
    }
    buf.copy(buffer, pos)
    pos += buf.length
  }
  return buffer
}

function byteLength (string, encoding) {
  if (Buffer.isBuffer(string)) {
    return string.length
  }
  if (typeof ArrayBuffer !== 'undefined' && typeof ArrayBuffer.isView === 'function' &&
      (ArrayBuffer.isView(string) || string instanceof ArrayBuffer)) {
    return string.byteLength
  }
  if (typeof string !== 'string') {
    string = '' + string
  }

  var len = string.length
  if (len === 0) return 0

  // Use a for loop to avoid recursion
  var loweredCase = false
  for (;;) {
    switch (encoding) {
      case 'ascii':
      case 'latin1':
      case 'binary':
        return len
      case 'utf8':
      case 'utf-8':
      case undefined:
        return utf8ToBytes(string).length
      case 'ucs2':
      case 'ucs-2':
      case 'utf16le':
      case 'utf-16le':
        return len * 2
      case 'hex':
        return len >>> 1
      case 'base64':
        return base64ToBytes(string).length
      default:
        if (loweredCase) return utf8ToBytes(string).length // assume utf8
        encoding = ('' + encoding).toLowerCase()
        loweredCase = true
    }
  }
}
Buffer.byteLength = byteLength

function slowToString (encoding, start, end) {
  var loweredCase = false

  // No need to verify that "this.length <= MAX_UINT32" since it's a read-only
  // property of a typed array.

  // This behaves neither like String nor Uint8Array in that we set start/end
  // to their upper/lower bounds if the value passed is out of range.
  // undefined is handled specially as per ECMA-262 6th Edition,
  // Section 13.3.3.7 Runtime Semantics: KeyedBindingInitialization.
  if (start === undefined || start < 0) {
    start = 0
  }
  // Return early if start > this.length. Done here to prevent potential uint32
  // coercion fail below.
  if (start > this.length) {
    return ''
  }

  if (end === undefined || end > this.length) {
    end = this.length
  }

  if (end <= 0) {
    return ''
  }

  // Force coersion to uint32. This will also coerce falsey/NaN values to 0.
  end >>>= 0
  start >>>= 0

  if (end <= start) {
    return ''
  }

  if (!encoding) encoding = 'utf8'

  while (true) {
    switch (encoding) {
      case 'hex':
        return hexSlice(this, start, end)

      case 'utf8':
      case 'utf-8':
        return utf8Slice(this, start, end)

      case 'ascii':
        return asciiSlice(this, start, end)

      case 'latin1':
      case 'binary':
        return latin1Slice(this, start, end)

      case 'base64':
        return base64Slice(this, start, end)

      case 'ucs2':
      case 'ucs-2':
      case 'utf16le':
      case 'utf-16le':
        return utf16leSlice(this, start, end)

      default:
        if (loweredCase) throw new TypeError('Unknown encoding: ' + encoding)
        encoding = (encoding + '').toLowerCase()
        loweredCase = true
    }
  }
}

// The property is used by `Buffer.isBuffer` and `is-buffer` (in Safari 5-7) to detect
// Buffer instances.
Buffer.prototype._isBuffer = true

function swap (b, n, m) {
  var i = b[n]
  b[n] = b[m]
  b[m] = i
}

Buffer.prototype.swap16 = function swap16 () {
  var len = this.length
  if (len % 2 !== 0) {
    throw new RangeError('Buffer size must be a multiple of 16-bits')
  }
  for (var i = 0; i < len; i += 2) {
    swap(this, i, i + 1)
  }
  return this
}

Buffer.prototype.swap32 = function swap32 () {
  var len = this.length
  if (len % 4 !== 0) {
    throw new RangeError('Buffer size must be a multiple of 32-bits')
  }
  for (var i = 0; i < len; i += 4) {
    swap(this, i, i + 3)
    swap(this, i + 1, i + 2)
  }
  return this
}

Buffer.prototype.swap64 = function swap64 () {
  var len = this.length
  if (len % 8 !== 0) {
    throw new RangeError('Buffer size must be a multiple of 64-bits')
  }
  for (var i = 0; i < len; i += 8) {
    swap(this, i, i + 7)
    swap(this, i + 1, i + 6)
    swap(this, i + 2, i + 5)
    swap(this, i + 3, i + 4)
  }
  return this
}

Buffer.prototype.toString = function toString () {
  var length = this.length | 0
  if (length === 0) return ''
  if (arguments.length === 0) return utf8Slice(this, 0, length)
  return slowToString.apply(this, arguments)
}

Buffer.prototype.equals = function equals (b) {
  if (!Buffer.isBuffer(b)) throw new TypeError('Argument must be a Buffer')
  if (this === b) return true
  return Buffer.compare(this, b) === 0
}

Buffer.prototype.inspect = function inspect () {
  var str = ''
  var max = exports.INSPECT_MAX_BYTES
  if (this.length > 0) {
    str = this.toString('hex', 0, max).match(/.{2}/g).join(' ')
    if (this.length > max) str += ' ... '
  }
  return '<Buffer ' + str + '>'
}

Buffer.prototype.compare = function compare (target, start, end, thisStart, thisEnd) {
  if (!Buffer.isBuffer(target)) {
    throw new TypeError('Argument must be a Buffer')
  }

  if (start === undefined) {
    start = 0
  }
  if (end === undefined) {
    end = target ? target.length : 0
  }
  if (thisStart === undefined) {
    thisStart = 0
  }
  if (thisEnd === undefined) {
    thisEnd = this.length
  }

  if (start < 0 || end > target.length || thisStart < 0 || thisEnd > this.length) {
    throw new RangeError('out of range index')
  }

  if (thisStart >= thisEnd && start >= end) {
    return 0
  }
  if (thisStart >= thisEnd) {
    return -1
  }
  if (start >= end) {
    return 1
  }

  start >>>= 0
  end >>>= 0
  thisStart >>>= 0
  thisEnd >>>= 0

  if (this === target) return 0

  var x = thisEnd - thisStart
  var y = end - start
  var len = Math.min(x, y)

  var thisCopy = this.slice(thisStart, thisEnd)
  var targetCopy = target.slice(start, end)

  for (var i = 0; i < len; ++i) {
    if (thisCopy[i] !== targetCopy[i]) {
      x = thisCopy[i]
      y = targetCopy[i]
      break
    }
  }

  if (x < y) return -1
  if (y < x) return 1
  return 0
}

// Finds either the first index of `val` in `buffer` at offset >= `byteOffset`,
// OR the last index of `val` in `buffer` at offset <= `byteOffset`.
//
// Arguments:
// - buffer - a Buffer to search
// - val - a string, Buffer, or number
// - byteOffset - an index into `buffer`; will be clamped to an int32
// - encoding - an optional encoding, relevant is val is a string
// - dir - true for indexOf, false for lastIndexOf
function bidirectionalIndexOf (buffer, val, byteOffset, encoding, dir) {
  // Empty buffer means no match
  if (buffer.length === 0) return -1

  // Normalize byteOffset
  if (typeof byteOffset === 'string') {
    encoding = byteOffset
    byteOffset = 0
  } else if (byteOffset > 0x7fffffff) {
    byteOffset = 0x7fffffff
  } else if (byteOffset < -0x80000000) {
    byteOffset = -0x80000000
  }
  byteOffset = +byteOffset  // Coerce to Number.
  if (isNaN(byteOffset)) {
    // byteOffset: it it's undefined, null, NaN, "foo", etc, search whole buffer
    byteOffset = dir ? 0 : (buffer.length - 1)
  }

  // Normalize byteOffset: negative offsets start from the end of the buffer
  if (byteOffset < 0) byteOffset = buffer.length + byteOffset
  if (byteOffset >= buffer.length) {
    if (dir) return -1
    else byteOffset = buffer.length - 1
  } else if (byteOffset < 0) {
    if (dir) byteOffset = 0
    else return -1
  }

  // Normalize val
  if (typeof val === 'string') {
    val = Buffer.from(val, encoding)
  }

  // Finally, search either indexOf (if dir is true) or lastIndexOf
  if (Buffer.isBuffer(val)) {
    // Special case: looking for empty string/buffer always fails
    if (val.length === 0) {
      return -1
    }
    return arrayIndexOf(buffer, val, byteOffset, encoding, dir)
  } else if (typeof val === 'number') {
    val = val & 0xFF // Search for a byte value [0-255]
    if (Buffer.TYPED_ARRAY_SUPPORT &&
        typeof Uint8Array.prototype.indexOf === 'function') {
      if (dir) {
        return Uint8Array.prototype.indexOf.call(buffer, val, byteOffset)
      } else {
        return Uint8Array.prototype.lastIndexOf.call(buffer, val, byteOffset)
      }
    }
    return arrayIndexOf(buffer, [ val ], byteOffset, encoding, dir)
  }

  throw new TypeError('val must be string, number or Buffer')
}

function arrayIndexOf (arr, val, byteOffset, encoding, dir) {
  var indexSize = 1
  var arrLength = arr.length
  var valLength = val.length

  if (encoding !== undefined) {
    encoding = String(encoding).toLowerCase()
    if (encoding === 'ucs2' || encoding === 'ucs-2' ||
        encoding === 'utf16le' || encoding === 'utf-16le') {
      if (arr.length < 2 || val.length < 2) {
        return -1
      }
      indexSize = 2
      arrLength /= 2
      valLength /= 2
      byteOffset /= 2
    }
  }

  function read (buf, i) {
    if (indexSize === 1) {
      return buf[i]
    } else {
      return buf.readUInt16BE(i * indexSize)
    }
  }

  var i
  if (dir) {
    var foundIndex = -1
    for (i = byteOffset; i < arrLength; i++) {
      if (read(arr, i) === read(val, foundIndex === -1 ? 0 : i - foundIndex)) {
        if (foundIndex === -1) foundIndex = i
        if (i - foundIndex + 1 === valLength) return foundIndex * indexSize
      } else {
        if (foundIndex !== -1) i -= i - foundIndex
        foundIndex = -1
      }
    }
  } else {
    if (byteOffset + valLength > arrLength) byteOffset = arrLength - valLength
    for (i = byteOffset; i >= 0; i--) {
      var found = true
      for (var j = 0; j < valLength; j++) {
        if (read(arr, i + j) !== read(val, j)) {
          found = false
          break
        }
      }
      if (found) return i
    }
  }

  return -1
}

Buffer.prototype.includes = function includes (val, byteOffset, encoding) {
  return this.indexOf(val, byteOffset, encoding) !== -1
}

Buffer.prototype.indexOf = function indexOf (val, byteOffset, encoding) {
  return bidirectionalIndexOf(this, val, byteOffset, encoding, true)
}

Buffer.prototype.lastIndexOf = function lastIndexOf (val, byteOffset, encoding) {
  return bidirectionalIndexOf(this, val, byteOffset, encoding, false)
}

function hexWrite (buf, string, offset, length) {
  offset = Number(offset) || 0
  var remaining = buf.length - offset
  if (!length) {
    length = remaining
  } else {
    length = Number(length)
    if (length > remaining) {
      length = remaining
    }
  }

  // must be an even number of digits
  var strLen = string.length
  if (strLen % 2 !== 0) throw new TypeError('Invalid hex string')

  if (length > strLen / 2) {
    length = strLen / 2
  }
  for (var i = 0; i < length; ++i) {
    var parsed = parseInt(string.substr(i * 2, 2), 16)
    if (isNaN(parsed)) return i
    buf[offset + i] = parsed
  }
  return i
}

function utf8Write (buf, string, offset, length) {
  return blitBuffer(utf8ToBytes(string, buf.length - offset), buf, offset, length)
}

function asciiWrite (buf, string, offset, length) {
  return blitBuffer(asciiToBytes(string), buf, offset, length)
}

function latin1Write (buf, string, offset, length) {
  return asciiWrite(buf, string, offset, length)
}

function base64Write (buf, string, offset, length) {
  return blitBuffer(base64ToBytes(string), buf, offset, length)
}

function ucs2Write (buf, string, offset, length) {
  return blitBuffer(utf16leToBytes(string, buf.length - offset), buf, offset, length)
}

Buffer.prototype.write = function write (string, offset, length, encoding) {
  // Buffer#write(string)
  if (offset === undefined) {
    encoding = 'utf8'
    length = this.length
    offset = 0
  // Buffer#write(string, encoding)
  } else if (length === undefined && typeof offset === 'string') {
    encoding = offset
    length = this.length
    offset = 0
  // Buffer#write(string, offset[, length][, encoding])
  } else if (isFinite(offset)) {
    offset = offset | 0
    if (isFinite(length)) {
      length = length | 0
      if (encoding === undefined) encoding = 'utf8'
    } else {
      encoding = length
      length = undefined
    }
  // legacy write(string, encoding, offset, length) - remove in v0.13
  } else {
    throw new Error(
      'Buffer.write(string, encoding, offset[, length]) is no longer supported'
    )
  }

  var remaining = this.length - offset
  if (length === undefined || length > remaining) length = remaining

  if ((string.length > 0 && (length < 0 || offset < 0)) || offset > this.length) {
    throw new RangeError('Attempt to write outside buffer bounds')
  }

  if (!encoding) encoding = 'utf8'

  var loweredCase = false
  for (;;) {
    switch (encoding) {
      case 'hex':
        return hexWrite(this, string, offset, length)

      case 'utf8':
      case 'utf-8':
        return utf8Write(this, string, offset, length)

      case 'ascii':
        return asciiWrite(this, string, offset, length)

      case 'latin1':
      case 'binary':
        return latin1Write(this, string, offset, length)

      case 'base64':
        // Warning: maxLength not taken into account in base64Write
        return base64Write(this, string, offset, length)

      case 'ucs2':
      case 'ucs-2':
      case 'utf16le':
      case 'utf-16le':
        return ucs2Write(this, string, offset, length)

      default:
        if (loweredCase) throw new TypeError('Unknown encoding: ' + encoding)
        encoding = ('' + encoding).toLowerCase()
        loweredCase = true
    }
  }
}

Buffer.prototype.toJSON = function toJSON () {
  return {
    type: 'Buffer',
    data: Array.prototype.slice.call(this._arr || this, 0)
  }
}

function base64Slice (buf, start, end) {
  if (start === 0 && end === buf.length) {
    return base64.fromByteArray(buf)
  } else {
    return base64.fromByteArray(buf.slice(start, end))
  }
}

function utf8Slice (buf, start, end) {
  end = Math.min(buf.length, end)
  var res = []

  var i = start
  while (i < end) {
    var firstByte = buf[i]
    var codePoint = null
    var bytesPerSequence = (firstByte > 0xEF) ? 4
      : (firstByte > 0xDF) ? 3
      : (firstByte > 0xBF) ? 2
      : 1

    if (i + bytesPerSequence <= end) {
      var secondByte, thirdByte, fourthByte, tempCodePoint

      switch (bytesPerSequence) {
        case 1:
          if (firstByte < 0x80) {
            codePoint = firstByte
          }
          break
        case 2:
          secondByte = buf[i + 1]
          if ((secondByte & 0xC0) === 0x80) {
            tempCodePoint = (firstByte & 0x1F) << 0x6 | (secondByte & 0x3F)
            if (tempCodePoint > 0x7F) {
              codePoint = tempCodePoint
            }
          }
          break
        case 3:
          secondByte = buf[i + 1]
          thirdByte = buf[i + 2]
          if ((secondByte & 0xC0) === 0x80 && (thirdByte & 0xC0) === 0x80) {
            tempCodePoint = (firstByte & 0xF) << 0xC | (secondByte & 0x3F) << 0x6 | (thirdByte & 0x3F)
            if (tempCodePoint > 0x7FF && (tempCodePoint < 0xD800 || tempCodePoint > 0xDFFF)) {
              codePoint = tempCodePoint
            }
          }
          break
        case 4:
          secondByte = buf[i + 1]
          thirdByte = buf[i + 2]
          fourthByte = buf[i + 3]
          if ((secondByte & 0xC0) === 0x80 && (thirdByte & 0xC0) === 0x80 && (fourthByte & 0xC0) === 0x80) {
            tempCodePoint = (firstByte & 0xF) << 0x12 | (secondByte & 0x3F) << 0xC | (thirdByte & 0x3F) << 0x6 | (fourthByte & 0x3F)
            if (tempCodePoint > 0xFFFF && tempCodePoint < 0x110000) {
              codePoint = tempCodePoint
            }
          }
      }
    }

    if (codePoint === null) {
      // we did not generate a valid codePoint so insert a
      // replacement char (U+FFFD) and advance only 1 byte
      codePoint = 0xFFFD
      bytesPerSequence = 1
    } else if (codePoint > 0xFFFF) {
      // encode to utf16 (surrogate pair dance)
      codePoint -= 0x10000
      res.push(codePoint >>> 10 & 0x3FF | 0xD800)
      codePoint = 0xDC00 | codePoint & 0x3FF
    }

    res.push(codePoint)
    i += bytesPerSequence
  }

  return decodeCodePointsArray(res)
}

// Based on http://stackoverflow.com/a/22747272/680742, the browser with
// the lowest limit is Chrome, with 0x10000 args.
// We go 1 magnitude less, for safety
var MAX_ARGUMENTS_LENGTH = 0x1000

function decodeCodePointsArray (codePoints) {
  var len = codePoints.length
  if (len <= MAX_ARGUMENTS_LENGTH) {
    return String.fromCharCode.apply(String, codePoints) // avoid extra slice()
  }

  // Decode in chunks to avoid "call stack size exceeded".
  var res = ''
  var i = 0
  while (i < len) {
    res += String.fromCharCode.apply(
      String,
      codePoints.slice(i, i += MAX_ARGUMENTS_LENGTH)
    )
  }
  return res
}

function asciiSlice (buf, start, end) {
  var ret = ''
  end = Math.min(buf.length, end)

  for (var i = start; i < end; ++i) {
    ret += String.fromCharCode(buf[i] & 0x7F)
  }
  return ret
}

function latin1Slice (buf, start, end) {
  var ret = ''
  end = Math.min(buf.length, end)

  for (var i = start; i < end; ++i) {
    ret += String.fromCharCode(buf[i])
  }
  return ret
}

function hexSlice (buf, start, end) {
  var len = buf.length

  if (!start || start < 0) start = 0
  if (!end || end < 0 || end > len) end = len

  var out = ''
  for (var i = start; i < end; ++i) {
    out += toHex(buf[i])
  }
  return out
}

function utf16leSlice (buf, start, end) {
  var bytes = buf.slice(start, end)
  var res = ''
  for (var i = 0; i < bytes.length; i += 2) {
    res += String.fromCharCode(bytes[i] + bytes[i + 1] * 256)
  }
  return res
}

Buffer.prototype.slice = function slice (start, end) {
  var len = this.length
  start = ~~start
  end = end === undefined ? len : ~~end

  if (start < 0) {
    start += len
    if (start < 0) start = 0
  } else if (start > len) {
    start = len
  }

  if (end < 0) {
    end += len
    if (end < 0) end = 0
  } else if (end > len) {
    end = len
  }

  if (end < start) end = start

  var newBuf
  if (Buffer.TYPED_ARRAY_SUPPORT) {
    newBuf = this.subarray(start, end)
    newBuf.__proto__ = Buffer.prototype
  } else {
    var sliceLen = end - start
    newBuf = new Buffer(sliceLen, undefined)
    for (var i = 0; i < sliceLen; ++i) {
      newBuf[i] = this[i + start]
    }
  }

  return newBuf
}

/*
 * Need to make sure that buffer isn't trying to write out of bounds.
 */
function checkOffset (offset, ext, length) {
  if ((offset % 1) !== 0 || offset < 0) throw new RangeError('offset is not uint')
  if (offset + ext > length) throw new RangeError('Trying to access beyond buffer length')
}

Buffer.prototype.readUIntLE = function readUIntLE (offset, byteLength, noAssert) {
  offset = offset | 0
  byteLength = byteLength | 0
  if (!noAssert) checkOffset(offset, byteLength, this.length)

  var val = this[offset]
  var mul = 1
  var i = 0
  while (++i < byteLength && (mul *= 0x100)) {
    val += this[offset + i] * mul
  }

  return val
}

Buffer.prototype.readUIntBE = function readUIntBE (offset, byteLength, noAssert) {
  offset = offset | 0
  byteLength = byteLength | 0
  if (!noAssert) {
    checkOffset(offset, byteLength, this.length)
  }

  var val = this[offset + --byteLength]
  var mul = 1
  while (byteLength > 0 && (mul *= 0x100)) {
    val += this[offset + --byteLength] * mul
  }

  return val
}

Buffer.prototype.readUInt8 = function readUInt8 (offset, noAssert) {
  if (!noAssert) checkOffset(offset, 1, this.length)
  return this[offset]
}

Buffer.prototype.readUInt16LE = function readUInt16LE (offset, noAssert) {
  if (!noAssert) checkOffset(offset, 2, this.length)
  return this[offset] | (this[offset + 1] << 8)
}

Buffer.prototype.readUInt16BE = function readUInt16BE (offset, noAssert) {
  if (!noAssert) checkOffset(offset, 2, this.length)
  return (this[offset] << 8) | this[offset + 1]
}

Buffer.prototype.readUInt32LE = function readUInt32LE (offset, noAssert) {
  if (!noAssert) checkOffset(offset, 4, this.length)

  return ((this[offset]) |
      (this[offset + 1] << 8) |
      (this[offset + 2] << 16)) +
      (this[offset + 3] * 0x1000000)
}

Buffer.prototype.readUInt32BE = function readUInt32BE (offset, noAssert) {
  if (!noAssert) checkOffset(offset, 4, this.length)

  return (this[offset] * 0x1000000) +
    ((this[offset + 1] << 16) |
    (this[offset + 2] << 8) |
    this[offset + 3])
}

Buffer.prototype.readIntLE = function readIntLE (offset, byteLength, noAssert) {
  offset = offset | 0
  byteLength = byteLength | 0
  if (!noAssert) checkOffset(offset, byteLength, this.length)

  var val = this[offset]
  var mul = 1
  var i = 0
  while (++i < byteLength && (mul *= 0x100)) {
    val += this[offset + i] * mul
  }
  mul *= 0x80

  if (val >= mul) val -= Math.pow(2, 8 * byteLength)

  return val
}

Buffer.prototype.readIntBE = function readIntBE (offset, byteLength, noAssert) {
  offset = offset | 0
  byteLength = byteLength | 0
  if (!noAssert) checkOffset(offset, byteLength, this.length)

  var i = byteLength
  var mul = 1
  var val = this[offset + --i]
  while (i > 0 && (mul *= 0x100)) {
    val += this[offset + --i] * mul
  }
  mul *= 0x80

  if (val >= mul) val -= Math.pow(2, 8 * byteLength)

  return val
}

Buffer.prototype.readInt8 = function readInt8 (offset, noAssert) {
  if (!noAssert) checkOffset(offset, 1, this.length)
  if (!(this[offset] & 0x80)) return (this[offset])
  return ((0xff - this[offset] + 1) * -1)
}

Buffer.prototype.readInt16LE = function readInt16LE (offset, noAssert) {
  if (!noAssert) checkOffset(offset, 2, this.length)
  var val = this[offset] | (this[offset + 1] << 8)
  return (val & 0x8000) ? val | 0xFFFF0000 : val
}

Buffer.prototype.readInt16BE = function readInt16BE (offset, noAssert) {
  if (!noAssert) checkOffset(offset, 2, this.length)
  var val = this[offset + 1] | (this[offset] << 8)
  return (val & 0x8000) ? val | 0xFFFF0000 : val
}

Buffer.prototype.readInt32LE = function readInt32LE (offset, noAssert) {
  if (!noAssert) checkOffset(offset, 4, this.length)

  return (this[offset]) |
    (this[offset + 1] << 8) |
    (this[offset + 2] << 16) |
    (this[offset + 3] << 24)
}

Buffer.prototype.readInt32BE = function readInt32BE (offset, noAssert) {
  if (!noAssert) checkOffset(offset, 4, this.length)

  return (this[offset] << 24) |
    (this[offset + 1] << 16) |
    (this[offset + 2] << 8) |
    (this[offset + 3])
}

Buffer.prototype.readFloatLE = function readFloatLE (offset, noAssert) {
  if (!noAssert) checkOffset(offset, 4, this.length)
  return ieee754.read(this, offset, true, 23, 4)
}

Buffer.prototype.readFloatBE = function readFloatBE (offset, noAssert) {
  if (!noAssert) checkOffset(offset, 4, this.length)
  return ieee754.read(this, offset, false, 23, 4)
}

Buffer.prototype.readDoubleLE = function readDoubleLE (offset, noAssert) {
  if (!noAssert) checkOffset(offset, 8, this.length)
  return ieee754.read(this, offset, true, 52, 8)
}

Buffer.prototype.readDoubleBE = function readDoubleBE (offset, noAssert) {
  if (!noAssert) checkOffset(offset, 8, this.length)
  return ieee754.read(this, offset, false, 52, 8)
}

function checkInt (buf, value, offset, ext, max, min) {
  if (!Buffer.isBuffer(buf)) throw new TypeError('"buffer" argument must be a Buffer instance')
  if (value > max || value < min) throw new RangeError('"value" argument is out of bounds')
  if (offset + ext > buf.length) throw new RangeError('Index out of range')
}

Buffer.prototype.writeUIntLE = function writeUIntLE (value, offset, byteLength, noAssert) {
  value = +value
  offset = offset | 0
  byteLength = byteLength | 0
  if (!noAssert) {
    var maxBytes = Math.pow(2, 8 * byteLength) - 1
    checkInt(this, value, offset, byteLength, maxBytes, 0)
  }

  var mul = 1
  var i = 0
  this[offset] = value & 0xFF
  while (++i < byteLength && (mul *= 0x100)) {
    this[offset + i] = (value / mul) & 0xFF
  }

  return offset + byteLength
}

Buffer.prototype.writeUIntBE = function writeUIntBE (value, offset, byteLength, noAssert) {
  value = +value
  offset = offset | 0
  byteLength = byteLength | 0
  if (!noAssert) {
    var maxBytes = Math.pow(2, 8 * byteLength) - 1
    checkInt(this, value, offset, byteLength, maxBytes, 0)
  }

  var i = byteLength - 1
  var mul = 1
  this[offset + i] = value & 0xFF
  while (--i >= 0 && (mul *= 0x100)) {
    this[offset + i] = (value / mul) & 0xFF
  }

  return offset + byteLength
}

Buffer.prototype.writeUInt8 = function writeUInt8 (value, offset, noAssert) {
  value = +value
  offset = offset | 0
  if (!noAssert) checkInt(this, value, offset, 1, 0xff, 0)
  if (!Buffer.TYPED_ARRAY_SUPPORT) value = Math.floor(value)
  this[offset] = (value & 0xff)
  return offset + 1
}

function objectWriteUInt16 (buf, value, offset, littleEndian) {
  if (value < 0) value = 0xffff + value + 1
  for (var i = 0, j = Math.min(buf.length - offset, 2); i < j; ++i) {
    buf[offset + i] = (value & (0xff << (8 * (littleEndian ? i : 1 - i)))) >>>
      (littleEndian ? i : 1 - i) * 8
  }
}

Buffer.prototype.writeUInt16LE = function writeUInt16LE (value, offset, noAssert) {
  value = +value
  offset = offset | 0
  if (!noAssert) checkInt(this, value, offset, 2, 0xffff, 0)
  if (Buffer.TYPED_ARRAY_SUPPORT) {
    this[offset] = (value & 0xff)
    this[offset + 1] = (value >>> 8)
  } else {
    objectWriteUInt16(this, value, offset, true)
  }
  return offset + 2
}

Buffer.prototype.writeUInt16BE = function writeUInt16BE (value, offset, noAssert) {
  value = +value
  offset = offset | 0
  if (!noAssert) checkInt(this, value, offset, 2, 0xffff, 0)
  if (Buffer.TYPED_ARRAY_SUPPORT) {
    this[offset] = (value >>> 8)
    this[offset + 1] = (value & 0xff)
  } else {
    objectWriteUInt16(this, value, offset, false)
  }
  return offset + 2
}

function objectWriteUInt32 (buf, value, offset, littleEndian) {
  if (value < 0) value = 0xffffffff + value + 1
  for (var i = 0, j = Math.min(buf.length - offset, 4); i < j; ++i) {
    buf[offset + i] = (value >>> (littleEndian ? i : 3 - i) * 8) & 0xff
  }
}

Buffer.prototype.writeUInt32LE = function writeUInt32LE (value, offset, noAssert) {
  value = +value
  offset = offset | 0
  if (!noAssert) checkInt(this, value, offset, 4, 0xffffffff, 0)
  if (Buffer.TYPED_ARRAY_SUPPORT) {
    this[offset + 3] = (value >>> 24)
    this[offset + 2] = (value >>> 16)
    this[offset + 1] = (value >>> 8)
    this[offset] = (value & 0xff)
  } else {
    objectWriteUInt32(this, value, offset, true)
  }
  return offset + 4
}

Buffer.prototype.writeUInt32BE = function writeUInt32BE (value, offset, noAssert) {
  value = +value
  offset = offset | 0
  if (!noAssert) checkInt(this, value, offset, 4, 0xffffffff, 0)
  if (Buffer.TYPED_ARRAY_SUPPORT) {
    this[offset] = (value >>> 24)
    this[offset + 1] = (value >>> 16)
    this[offset + 2] = (value >>> 8)
    this[offset + 3] = (value & 0xff)
  } else {
    objectWriteUInt32(this, value, offset, false)
  }
  return offset + 4
}

Buffer.prototype.writeIntLE = function writeIntLE (value, offset, byteLength, noAssert) {
  value = +value
  offset = offset | 0
  if (!noAssert) {
    var limit = Math.pow(2, 8 * byteLength - 1)

    checkInt(this, value, offset, byteLength, limit - 1, -limit)
  }

  var i = 0
  var mul = 1
  var sub = 0
  this[offset] = value & 0xFF
  while (++i < byteLength && (mul *= 0x100)) {
    if (value < 0 && sub === 0 && this[offset + i - 1] !== 0) {
      sub = 1
    }
    this[offset + i] = ((value / mul) >> 0) - sub & 0xFF
  }

  return offset + byteLength
}

Buffer.prototype.writeIntBE = function writeIntBE (value, offset, byteLength, noAssert) {
  value = +value
  offset = offset | 0
  if (!noAssert) {
    var limit = Math.pow(2, 8 * byteLength - 1)

    checkInt(this, value, offset, byteLength, limit - 1, -limit)
  }

  var i = byteLength - 1
  var mul = 1
  var sub = 0
  this[offset + i] = value & 0xFF
  while (--i >= 0 && (mul *= 0x100)) {
    if (value < 0 && sub === 0 && this[offset + i + 1] !== 0) {
      sub = 1
    }
    this[offset + i] = ((value / mul) >> 0) - sub & 0xFF
  }

  return offset + byteLength
}

Buffer.prototype.writeInt8 = function writeInt8 (value, offset, noAssert) {
  value = +value
  offset = offset | 0
  if (!noAssert) checkInt(this, value, offset, 1, 0x7f, -0x80)
  if (!Buffer.TYPED_ARRAY_SUPPORT) value = Math.floor(value)
  if (value < 0) value = 0xff + value + 1
  this[offset] = (value & 0xff)
  return offset + 1
}

Buffer.prototype.writeInt16LE = function writeInt16LE (value, offset, noAssert) {
  value = +value
  offset = offset | 0
  if (!noAssert) checkInt(this, value, offset, 2, 0x7fff, -0x8000)
  if (Buffer.TYPED_ARRAY_SUPPORT) {
    this[offset] = (value & 0xff)
    this[offset + 1] = (value >>> 8)
  } else {
    objectWriteUInt16(this, value, offset, true)
  }
  return offset + 2
}

Buffer.prototype.writeInt16BE = function writeInt16BE (value, offset, noAssert) {
  value = +value
  offset = offset | 0
  if (!noAssert) checkInt(this, value, offset, 2, 0x7fff, -0x8000)
  if (Buffer.TYPED_ARRAY_SUPPORT) {
    this[offset] = (value >>> 8)
    this[offset + 1] = (value & 0xff)
  } else {
    objectWriteUInt16(this, value, offset, false)
  }
  return offset + 2
}

Buffer.prototype.writeInt32LE = function writeInt32LE (value, offset, noAssert) {
  value = +value
  offset = offset | 0
  if (!noAssert) checkInt(this, value, offset, 4, 0x7fffffff, -0x80000000)
  if (Buffer.TYPED_ARRAY_SUPPORT) {
    this[offset] = (value & 0xff)
    this[offset + 1] = (value >>> 8)
    this[offset + 2] = (value >>> 16)
    this[offset + 3] = (value >>> 24)
  } else {
    objectWriteUInt32(this, value, offset, true)
  }
  return offset + 4
}

Buffer.prototype.writeInt32BE = function writeInt32BE (value, offset, noAssert) {
  value = +value
  offset = offset | 0
  if (!noAssert) checkInt(this, value, offset, 4, 0x7fffffff, -0x80000000)
  if (value < 0) value = 0xffffffff + value + 1
  if (Buffer.TYPED_ARRAY_SUPPORT) {
    this[offset] = (value >>> 24)
    this[offset + 1] = (value >>> 16)
    this[offset + 2] = (value >>> 8)
    this[offset + 3] = (value & 0xff)
  } else {
    objectWriteUInt32(this, value, offset, false)
  }
  return offset + 4
}

function checkIEEE754 (buf, value, offset, ext, max, min) {
  if (offset + ext > buf.length) throw new RangeError('Index out of range')
  if (offset < 0) throw new RangeError('Index out of range')
}

function writeFloat (buf, value, offset, littleEndian, noAssert) {
  if (!noAssert) {
    checkIEEE754(buf, value, offset, 4, 3.4028234663852886e+38, -3.4028234663852886e+38)
  }
  ieee754.write(buf, value, offset, littleEndian, 23, 4)
  return offset + 4
}

Buffer.prototype.writeFloatLE = function writeFloatLE (value, offset, noAssert) {
  return writeFloat(this, value, offset, true, noAssert)
}

Buffer.prototype.writeFloatBE = function writeFloatBE (value, offset, noAssert) {
  return writeFloat(this, value, offset, false, noAssert)
}

function writeDouble (buf, value, offset, littleEndian, noAssert) {
  if (!noAssert) {
    checkIEEE754(buf, value, offset, 8, 1.7976931348623157E+308, -1.7976931348623157E+308)
  }
  ieee754.write(buf, value, offset, littleEndian, 52, 8)
  return offset + 8
}

Buffer.prototype.writeDoubleLE = function writeDoubleLE (value, offset, noAssert) {
  return writeDouble(this, value, offset, true, noAssert)
}

Buffer.prototype.writeDoubleBE = function writeDoubleBE (value, offset, noAssert) {
  return writeDouble(this, value, offset, false, noAssert)
}

// copy(targetBuffer, targetStart=0, sourceStart=0, sourceEnd=buffer.length)
Buffer.prototype.copy = function copy (target, targetStart, start, end) {
  if (!start) start = 0
  if (!end && end !== 0) end = this.length
  if (targetStart >= target.length) targetStart = target.length
  if (!targetStart) targetStart = 0
  if (end > 0 && end < start) end = start

  // Copy 0 bytes; we're done
  if (end === start) return 0
  if (target.length === 0 || this.length === 0) return 0

  // Fatal error conditions
  if (targetStart < 0) {
    throw new RangeError('targetStart out of bounds')
  }
  if (start < 0 || start >= this.length) throw new RangeError('sourceStart out of bounds')
  if (end < 0) throw new RangeError('sourceEnd out of bounds')

  // Are we oob?
  if (end > this.length) end = this.length
  if (target.length - targetStart < end - start) {
    end = target.length - targetStart + start
  }

  var len = end - start
  var i

  if (this === target && start < targetStart && targetStart < end) {
    // descending copy from end
    for (i = len - 1; i >= 0; --i) {
      target[i + targetStart] = this[i + start]
    }
  } else if (len < 1000 || !Buffer.TYPED_ARRAY_SUPPORT) {
    // ascending copy from start
    for (i = 0; i < len; ++i) {
      target[i + targetStart] = this[i + start]
    }
  } else {
    Uint8Array.prototype.set.call(
      target,
      this.subarray(start, start + len),
      targetStart
    )
  }

  return len
}

// Usage:
//    buffer.fill(number[, offset[, end]])
//    buffer.fill(buffer[, offset[, end]])
//    buffer.fill(string[, offset[, end]][, encoding])
Buffer.prototype.fill = function fill (val, start, end, encoding) {
  // Handle string cases:
  if (typeof val === 'string') {
    if (typeof start === 'string') {
      encoding = start
      start = 0
      end = this.length
    } else if (typeof end === 'string') {
      encoding = end
      end = this.length
    }
    if (val.length === 1) {
      var code = val.charCodeAt(0)
      if (code < 256) {
        val = code
      }
    }
    if (encoding !== undefined && typeof encoding !== 'string') {
      throw new TypeError('encoding must be a string')
    }
    if (typeof encoding === 'string' && !Buffer.isEncoding(encoding)) {
      throw new TypeError('Unknown encoding: ' + encoding)
    }
  } else if (typeof val === 'number') {
    val = val & 255
  }

  // Invalid ranges are not set to a default, so can range check early.
  if (start < 0 || this.length < start || this.length < end) {
    throw new RangeError('Out of range index')
  }

  if (end <= start) {
    return this
  }

  start = start >>> 0
  end = end === undefined ? this.length : end >>> 0

  if (!val) val = 0

  var i
  if (typeof val === 'number') {
    for (i = start; i < end; ++i) {
      this[i] = val
    }
  } else {
    var bytes = Buffer.isBuffer(val)
      ? val
      : utf8ToBytes(new Buffer(val, encoding).toString())
    var len = bytes.length
    for (i = 0; i < end - start; ++i) {
      this[i + start] = bytes[i % len]
    }
  }

  return this
}

// HELPER FUNCTIONS
// ================

var INVALID_BASE64_RE = /[^+\/0-9A-Za-z-_]/g

function base64clean (str) {
  // Node strips out invalid characters like \n and \t from the string, base64-js does not
  str = stringtrim(str).replace(INVALID_BASE64_RE, '')
  // Node converts strings with length < 2 to ''
  if (str.length < 2) return ''
  // Node allows for non-padded base64 strings (missing trailing ===), base64-js does not
  while (str.length % 4 !== 0) {
    str = str + '='
  }
  return str
}

function stringtrim (str) {
  if (str.trim) return str.trim()
  return str.replace(/^\s+|\s+$/g, '')
}

function toHex (n) {
  if (n < 16) return '0' + n.toString(16)
  return n.toString(16)
}

function utf8ToBytes (string, units) {
  units = units || Infinity
  var codePoint
  var length = string.length
  var leadSurrogate = null
  var bytes = []

  for (var i = 0; i < length; ++i) {
    codePoint = string.charCodeAt(i)

    // is surrogate component
    if (codePoint > 0xD7FF && codePoint < 0xE000) {
      // last char was a lead
      if (!leadSurrogate) {
        // no lead yet
        if (codePoint > 0xDBFF) {
          // unexpected trail
          if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)
          continue
        } else if (i + 1 === length) {
          // unpaired lead
          if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)
          continue
        }

        // valid lead
        leadSurrogate = codePoint

        continue
      }

      // 2 leads in a row
      if (codePoint < 0xDC00) {
        if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)
        leadSurrogate = codePoint
        continue
      }

      // valid surrogate pair
      codePoint = (leadSurrogate - 0xD800 << 10 | codePoint - 0xDC00) + 0x10000
    } else if (leadSurrogate) {
      // valid bmp char, but last char was a lead
      if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)
    }

    leadSurrogate = null

    // encode utf8
    if (codePoint < 0x80) {
      if ((units -= 1) < 0) break
      bytes.push(codePoint)
    } else if (codePoint < 0x800) {
      if ((units -= 2) < 0) break
      bytes.push(
        codePoint >> 0x6 | 0xC0,
        codePoint & 0x3F | 0x80
      )
    } else if (codePoint < 0x10000) {
      if ((units -= 3) < 0) break
      bytes.push(
        codePoint >> 0xC | 0xE0,
        codePoint >> 0x6 & 0x3F | 0x80,
        codePoint & 0x3F | 0x80
      )
    } else if (codePoint < 0x110000) {
      if ((units -= 4) < 0) break
      bytes.push(
        codePoint >> 0x12 | 0xF0,
        codePoint >> 0xC & 0x3F | 0x80,
        codePoint >> 0x6 & 0x3F | 0x80,
        codePoint & 0x3F | 0x80
      )
    } else {
      throw new Error('Invalid code point')
    }
  }

  return bytes
}

function asciiToBytes (str) {
  var byteArray = []
  for (var i = 0; i < str.length; ++i) {
    // Node's code seems to be doing this and not & 0x7F..
    byteArray.push(str.charCodeAt(i) & 0xFF)
  }
  return byteArray
}

function utf16leToBytes (str, units) {
  var c, hi, lo
  var byteArray = []
  for (var i = 0; i < str.length; ++i) {
    if ((units -= 2) < 0) break

    c = str.charCodeAt(i)
    hi = c >> 8
    lo = c % 256
    byteArray.push(lo)
    byteArray.push(hi)
  }

  return byteArray
}

function base64ToBytes (str) {
  return base64.toByteArray(base64clean(str))
}

function blitBuffer (src, dst, offset, length) {
  for (var i = 0; i < length; ++i) {
    if ((i + offset >= dst.length) || (i >= src.length)) break
    dst[i + offset] = src[i]
  }
  return i
}

function isnan (val) {
  return val !== val // eslint-disable-line no-self-compare
}

/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__(/*! ./../webpack/buildin/global.js */ "./node_modules/webpack/buildin/global.js")))

/***/ }),

/***/ "./node_modules/core-util-is/lib/util.js":
/*!***********************************************!*\
  !*** ./node_modules/core-util-is/lib/util.js ***!
  \***********************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

/* WEBPACK VAR INJECTION */(function(Buffer) {// Copyright Joyent, Inc. and other Node contributors.
//
// Permission is hereby granted, free of charge, to any person obtaining a
// copy of this software and associated documentation files (the
// "Software"), to deal in the Software without restriction, including
// without limitation the rights to use, copy, modify, merge, publish,
// distribute, sublicense, and/or sell copies of the Software, and to permit
// persons to whom the Software is furnished to do so, subject to the
// following conditions:
//
// The above copyright notice and this permission notice shall be included
// in all copies or substantial portions of the Software.
//
// THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS
// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN
// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,
// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR
// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE
// USE OR OTHER DEALINGS IN THE SOFTWARE.

// NOTE: These type checking functions intentionally don't use `instanceof`
// because it is fragile and can be easily faked with `Object.create()`.

function isArray(arg) {
  if (Array.isArray) {
    return Array.isArray(arg);
  }
  return objectToString(arg) === '[object Array]';
}
exports.isArray = isArray;

function isBoolean(arg) {
  return typeof arg === 'boolean';
}
exports.isBoolean = isBoolean;

function isNull(arg) {
  return arg === null;
}
exports.isNull = isNull;

function isNullOrUndefined(arg) {
  return arg == null;
}
exports.isNullOrUndefined = isNullOrUndefined;

function isNumber(arg) {
  return typeof arg === 'number';
}
exports.isNumber = isNumber;

function isString(arg) {
  return typeof arg === 'string';
}
exports.isString = isString;

function isSymbol(arg) {
  return typeof arg === 'symbol';
}
exports.isSymbol = isSymbol;

function isUndefined(arg) {
  return arg === void 0;
}
exports.isUndefined = isUndefined;

function isRegExp(re) {
  return objectToString(re) === '[object RegExp]';
}
exports.isRegExp = isRegExp;

function isObject(arg) {
  return typeof arg === 'object' && arg !== null;
}
exports.isObject = isObject;

function isDate(d) {
  return objectToString(d) === '[object Date]';
}
exports.isDate = isDate;

function isError(e) {
  return (objectToString(e) === '[object Error]' || e instanceof Error);
}
exports.isError = isError;

function isFunction(arg) {
  return typeof arg === 'function';
}
exports.isFunction = isFunction;

function isPrimitive(arg) {
  return arg === null ||
         typeof arg === 'boolean' ||
         typeof arg === 'number' ||
         typeof arg === 'string' ||
         typeof arg === 'symbol' ||  // ES6 symbol
         typeof arg === 'undefined';
}
exports.isPrimitive = isPrimitive;

exports.isBuffer = Buffer.isBuffer;

function objectToString(o) {
  return Object.prototype.toString.call(o);
}

/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__(/*! ./../../buffer/index.js */ "./node_modules/buffer/index.js").Buffer))

/***/ }),

/***/ "./node_modules/events/events.js":
/*!***************************************!*\
  !*** ./node_modules/events/events.js ***!
  \***************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
// Copyright Joyent, Inc. and other Node contributors.
//
// Permission is hereby granted, free of charge, to any person obtaining a
// copy of this software and associated documentation files (the
// "Software"), to deal in the Software without restriction, including
// without limitation the rights to use, copy, modify, merge, publish,
// distribute, sublicense, and/or sell copies of the Software, and to permit
// persons to whom the Software is furnished to do so, subject to the
// following conditions:
//
// The above copyright notice and this permission notice shall be included
// in all copies or substantial portions of the Software.
//
// THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS
// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN
// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,
// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR
// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE
// USE OR OTHER DEALINGS IN THE SOFTWARE.



var R = typeof Reflect === 'object' ? Reflect : null
var ReflectApply = R && typeof R.apply === 'function'
  ? R.apply
  : function ReflectApply(target, receiver, args) {
    return Function.prototype.apply.call(target, receiver, args);
  }

var ReflectOwnKeys
if (R && typeof R.ownKeys === 'function') {
  ReflectOwnKeys = R.ownKeys
} else if (Object.getOwnPropertySymbols) {
  ReflectOwnKeys = function ReflectOwnKeys(target) {
    return Object.getOwnPropertyNames(target)
      .concat(Object.getOwnPropertySymbols(target));
  };
} else {
  ReflectOwnKeys = function ReflectOwnKeys(target) {
    return Object.getOwnPropertyNames(target);
  };
}

function ProcessEmitWarning(warning) {
  if (console && console.warn) console.warn(warning);
}

var NumberIsNaN = Number.isNaN || function NumberIsNaN(value) {
  return value !== value;
}

function EventEmitter() {
  EventEmitter.init.call(this);
}
module.exports = EventEmitter;

// Backwards-compat with node 0.10.x
EventEmitter.EventEmitter = EventEmitter;

EventEmitter.prototype._events = undefined;
EventEmitter.prototype._eventsCount = 0;
EventEmitter.prototype._maxListeners = undefined;

// By default EventEmitters will print a warning if more than 10 listeners are
// added to it. This is a useful default which helps finding memory leaks.
var defaultMaxListeners = 10;

Object.defineProperty(EventEmitter, 'defaultMaxListeners', {
  enumerable: true,
  get: function() {
    return defaultMaxListeners;
  },
  set: function(arg) {
    if (typeof arg !== 'number' || arg < 0 || NumberIsNaN(arg)) {
      throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received ' + arg + '.');
    }
    defaultMaxListeners = arg;
  }
});

EventEmitter.init = function() {

  if (this._events === undefined ||
      this._events === Object.getPrototypeOf(this)._events) {
    this._events = Object.create(null);
    this._eventsCount = 0;
  }

  this._maxListeners = this._maxListeners || undefined;
};

// Obviously not all Emitters should be limited to 10. This function allows
// that to be increased. Set to zero for unlimited.
EventEmitter.prototype.setMaxListeners = function setMaxListeners(n) {
  if (typeof n !== 'number' || n < 0 || NumberIsNaN(n)) {
    throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received ' + n + '.');
  }
  this._maxListeners = n;
  return this;
};

function $getMaxListeners(that) {
  if (that._maxListeners === undefined)
    return EventEmitter.defaultMaxListeners;
  return that._maxListeners;
}

EventEmitter.prototype.getMaxListeners = function getMaxListeners() {
  return $getMaxListeners(this);
};

EventEmitter.prototype.emit = function emit(type) {
  var args = [];
  for (var i = 1; i < arguments.length; i++) args.push(arguments[i]);
  var doError = (type === 'error');

  var events = this._events;
  if (events !== undefined)
    doError = (doError && events.error === undefined);
  else if (!doError)
    return false;

  // If there is no 'error' event listener then throw.
  if (doError) {
    var er;
    if (args.length > 0)
      er = args[0];
    if (er instanceof Error) {
      // Note: The comments on the `throw` lines are intentional, they show
      // up in Node's output if this results in an unhandled exception.
      throw er; // Unhandled 'error' event
    }
    // At least give some kind of context to the user
    var err = new Error('Unhandled error.' + (er ? ' (' + er.message + ')' : ''));
    err.context = er;
    throw err; // Unhandled 'error' event
  }

  var handler = events[type];

  if (handler === undefined)
    return false;

  if (typeof handler === 'function') {
    ReflectApply(handler, this, args);
  } else {
    var len = handler.length;
    var listeners = arrayClone(handler, len);
    for (var i = 0; i < len; ++i)
      ReflectApply(listeners[i], this, args);
  }

  return true;
};

function _addListener(target, type, listener, prepend) {
  var m;
  var events;
  var existing;

  if (typeof listener !== 'function') {
    throw new TypeError('The "listener" argument must be of type Function. Received type ' + typeof listener);
  }

  events = target._events;
  if (events === undefined) {
    events = target._events = Object.create(null);
    target._eventsCount = 0;
  } else {
    // To avoid recursion in the case that type === "newListener"! Before
    // adding it to the listeners, first emit "newListener".
    if (events.newListener !== undefined) {
      target.emit('newListener', type,
                  listener.listener ? listener.listener : listener);

      // Re-assign `events` because a newListener handler could have caused the
      // this._events to be assigned to a new object
      events = target._events;
    }
    existing = events[type];
  }

  if (existing === undefined) {
    // Optimize the case of one listener. Don't need the extra array object.
    existing = events[type] = listener;
    ++target._eventsCount;
  } else {
    if (typeof existing === 'function') {
      // Adding the second element, need to change to array.
      existing = events[type] =
        prepend ? [listener, existing] : [existing, listener];
      // If we've already got an array, just append.
    } else if (prepend) {
      existing.unshift(listener);
    } else {
      existing.push(listener);
    }

    // Check for listener leak
    m = $getMaxListeners(target);
    if (m > 0 && existing.length > m && !existing.warned) {
      existing.warned = true;
      // No error code for this since it is a Warning
      // eslint-disable-next-line no-restricted-syntax
      var w = new Error('Possible EventEmitter memory leak detected. ' +
                          existing.length + ' ' + String(type) + ' listeners ' +
                          'added. Use emitter.setMaxListeners() to ' +
                          'increase limit');
      w.name = 'MaxListenersExceededWarning';
      w.emitter = target;
      w.type = type;
      w.count = existing.length;
      ProcessEmitWarning(w);
    }
  }

  return target;
}

EventEmitter.prototype.addListener = function addListener(type, listener) {
  return _addListener(this, type, listener, false);
};

EventEmitter.prototype.on = EventEmitter.prototype.addListener;

EventEmitter.prototype.prependListener =
    function prependListener(type, listener) {
      return _addListener(this, type, listener, true);
    };

function onceWrapper() {
  var args = [];
  for (var i = 0; i < arguments.length; i++) args.push(arguments[i]);
  if (!this.fired) {
    this.target.removeListener(this.type, this.wrapFn);
    this.fired = true;
    ReflectApply(this.listener, this.target, args);
  }
}

function _onceWrap(target, type, listener) {
  var state = { fired: false, wrapFn: undefined, target: target, type: type, listener: listener };
  var wrapped = onceWrapper.bind(state);
  wrapped.listener = listener;
  state.wrapFn = wrapped;
  return wrapped;
}

EventEmitter.prototype.once = function once(type, listener) {
  if (typeof listener !== 'function') {
    throw new TypeError('The "listener" argument must be of type Function. Received type ' + typeof listener);
  }
  this.on(type, _onceWrap(this, type, listener));
  return this;
};

EventEmitter.prototype.prependOnceListener =
    function prependOnceListener(type, listener) {
      if (typeof listener !== 'function') {
        throw new TypeError('The "listener" argument must be of type Function. Received type ' + typeof listener);
      }
      this.prependListener(type, _onceWrap(this, type, listener));
      return this;
    };

// Emits a 'removeListener' event if and only if the listener was removed.
EventEmitter.prototype.removeListener =
    function removeListener(type, listener) {
      var list, events, position, i, originalListener;

      if (typeof listener !== 'function') {
        throw new TypeError('The "listener" argument must be of type Function. Received type ' + typeof listener);
      }

      events = this._events;
      if (events === undefined)
        return this;

      list = events[type];
      if (list === undefined)
        return this;

      if (list === listener || list.listener === listener) {
        if (--this._eventsCount === 0)
          this._events = Object.create(null);
        else {
          delete events[type];
          if (events.removeListener)
            this.emit('removeListener', type, list.listener || listener);
        }
      } else if (typeof list !== 'function') {
        position = -1;

        for (i = list.length - 1; i >= 0; i--) {
          if (list[i] === listener || list[i].listener === listener) {
            originalListener = list[i].listener;
            position = i;
            break;
          }
        }

        if (position < 0)
          return this;

        if (position === 0)
          list.shift();
        else {
          spliceOne(list, position);
        }

        if (list.length === 1)
          events[type] = list[0];

        if (events.removeListener !== undefined)
          this.emit('removeListener', type, originalListener || listener);
      }

      return this;
    };

EventEmitter.prototype.off = EventEmitter.prototype.removeListener;

EventEmitter.prototype.removeAllListeners =
    function removeAllListeners(type) {
      var listeners, events, i;

      events = this._events;
      if (events === undefined)
        return this;

      // not listening for removeListener, no need to emit
      if (events.removeListener === undefined) {
        if (arguments.length === 0) {
          this._events = Object.create(null);
          this._eventsCount = 0;
        } else if (events[type] !== undefined) {
          if (--this._eventsCount === 0)
            this._events = Object.create(null);
          else
            delete events[type];
        }
        return this;
      }

      // emit removeListener for all listeners on all events
      if (arguments.length === 0) {
        var keys = Object.keys(events);
        var key;
        for (i = 0; i < keys.length; ++i) {
          key = keys[i];
          if (key === 'removeListener') continue;
          this.removeAllListeners(key);
        }
        this.removeAllListeners('removeListener');
        this._events = Object.create(null);
        this._eventsCount = 0;
        return this;
      }

      listeners = events[type];

      if (typeof listeners === 'function') {
        this.removeListener(type, listeners);
      } else if (listeners !== undefined) {
        // LIFO order
        for (i = listeners.length - 1; i >= 0; i--) {
          this.removeListener(type, listeners[i]);
        }
      }

      return this;
    };

function _listeners(target, type, unwrap) {
  var events = target._events;

  if (events === undefined)
    return [];

  var evlistener = events[type];
  if (evlistener === undefined)
    return [];

  if (typeof evlistener === 'function')
    return unwrap ? [evlistener.listener || evlistener] : [evlistener];

  return unwrap ?
    unwrapListeners(evlistener) : arrayClone(evlistener, evlistener.length);
}

EventEmitter.prototype.listeners = function listeners(type) {
  return _listeners(this, type, true);
};

EventEmitter.prototype.rawListeners = function rawListeners(type) {
  return _listeners(this, type, false);
};

EventEmitter.listenerCount = function(emitter, type) {
  if (typeof emitter.listenerCount === 'function') {
    return emitter.listenerCount(type);
  } else {
    return listenerCount.call(emitter, type);
  }
};

EventEmitter.prototype.listenerCount = listenerCount;
function listenerCount(type) {
  var events = this._events;

  if (events !== undefined) {
    var evlistener = events[type];

    if (typeof evlistener === 'function') {
      return 1;
    } else if (evlistener !== undefined) {
      return evlistener.length;
    }
  }

  return 0;
}

EventEmitter.prototype.eventNames = function eventNames() {
  return this._eventsCount > 0 ? ReflectOwnKeys(this._events) : [];
};

function arrayClone(arr, n) {
  var copy = new Array(n);
  for (var i = 0; i < n; ++i)
    copy[i] = arr[i];
  return copy;
}

function spliceOne(list, index) {
  for (; index + 1 < list.length; index++)
    list[index] = list[index + 1];
  list.pop();
}

function unwrapListeners(arr) {
  var ret = new Array(arr.length);
  for (var i = 0; i < ret.length; ++i) {
    ret[i] = arr[i].listener || arr[i];
  }
  return ret;
}


/***/ }),

/***/ "./node_modules/ieee754/index.js":
/*!***************************************!*\
  !*** ./node_modules/ieee754/index.js ***!
  \***************************************/
/*! no static exports found */
/***/ (function(module, exports) {

exports.read = function (buffer, offset, isLE, mLen, nBytes) {
  var e, m
  var eLen = (nBytes * 8) - mLen - 1
  var eMax = (1 << eLen) - 1
  var eBias = eMax >> 1
  var nBits = -7
  var i = isLE ? (nBytes - 1) : 0
  var d = isLE ? -1 : 1
  var s = buffer[offset + i]

  i += d

  e = s & ((1 << (-nBits)) - 1)
  s >>= (-nBits)
  nBits += eLen
  for (; nBits > 0; e = (e * 256) + buffer[offset + i], i += d, nBits -= 8) {}

  m = e & ((1 << (-nBits)) - 1)
  e >>= (-nBits)
  nBits += mLen
  for (; nBits > 0; m = (m * 256) + buffer[offset + i], i += d, nBits -= 8) {}

  if (e === 0) {
    e = 1 - eBias
  } else if (e === eMax) {
    return m ? NaN : ((s ? -1 : 1) * Infinity)
  } else {
    m = m + Math.pow(2, mLen)
    e = e - eBias
  }
  return (s ? -1 : 1) * m * Math.pow(2, e - mLen)
}

exports.write = function (buffer, value, offset, isLE, mLen, nBytes) {
  var e, m, c
  var eLen = (nBytes * 8) - mLen - 1
  var eMax = (1 << eLen) - 1
  var eBias = eMax >> 1
  var rt = (mLen === 23 ? Math.pow(2, -24) - Math.pow(2, -77) : 0)
  var i = isLE ? 0 : (nBytes - 1)
  var d = isLE ? 1 : -1
  var s = value < 0 || (value === 0 && 1 / value < 0) ? 1 : 0

  value = Math.abs(value)

  if (isNaN(value) || value === Infinity) {
    m = isNaN(value) ? 1 : 0
    e = eMax
  } else {
    e = Math.floor(Math.log(value) / Math.LN2)
    if (value * (c = Math.pow(2, -e)) < 1) {
      e--
      c *= 2
    }
    if (e + eBias >= 1) {
      value += rt / c
    } else {
      value += rt * Math.pow(2, 1 - eBias)
    }
    if (value * c >= 2) {
      e++
      c /= 2
    }

    if (e + eBias >= eMax) {
      m = 0
      e = eMax
    } else if (e + eBias >= 1) {
      m = ((value * c) - 1) * Math.pow(2, mLen)
      e = e + eBias
    } else {
      m = value * Math.pow(2, eBias - 1) * Math.pow(2, mLen)
      e = 0
    }
  }

  for (; mLen >= 8; buffer[offset + i] = m & 0xff, i += d, m /= 256, mLen -= 8) {}

  e = (e << mLen) | m
  eLen += mLen
  for (; eLen > 0; buffer[offset + i] = e & 0xff, i += d, e /= 256, eLen -= 8) {}

  buffer[offset + i - d] |= s * 128
}


/***/ }),

/***/ "./node_modules/inherits/inherits_browser.js":
/*!***************************************************!*\
  !*** ./node_modules/inherits/inherits_browser.js ***!
  \***************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

if (typeof Object.create === 'function') {
  // implementation from standard node.js 'util' module
  module.exports = function inherits(ctor, superCtor) {
    if (superCtor) {
      ctor.super_ = superCtor
      ctor.prototype = Object.create(superCtor.prototype, {
        constructor: {
          value: ctor,
          enumerable: false,
          writable: true,
          configurable: true
        }
      })
    }
  };
} else {
  // old school shim for old browsers
  module.exports = function inherits(ctor, superCtor) {
    if (superCtor) {
      ctor.super_ = superCtor
      var TempCtor = function () {}
      TempCtor.prototype = superCtor.prototype
      ctor.prototype = new TempCtor()
      ctor.prototype.constructor = ctor
    }
  }
}


/***/ }),

/***/ "./node_modules/isarray/index.js":
/*!***************************************!*\
  !*** ./node_modules/isarray/index.js ***!
  \***************************************/
/*! no static exports found */
/***/ (function(module, exports) {

var toString = {}.toString;

module.exports = Array.isArray || function (arr) {
  return toString.call(arr) == '[object Array]';
};


/***/ }),

/***/ "./node_modules/process-nextick-args/index.js":
/*!****************************************************!*\
  !*** ./node_modules/process-nextick-args/index.js ***!
  \****************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
/* WEBPACK VAR INJECTION */(function(process) {

if (typeof process === 'undefined' ||
    !process.version ||
    process.version.indexOf('v0.') === 0 ||
    process.version.indexOf('v1.') === 0 && process.version.indexOf('v1.8.') !== 0) {
  module.exports = { nextTick: nextTick };
} else {
  module.exports = process
}

function nextTick(fn, arg1, arg2, arg3) {
  if (typeof fn !== 'function') {
    throw new TypeError('"callback" argument must be a function');
  }
  var len = arguments.length;
  var args, i;
  switch (len) {
  case 0:
  case 1:
    return process.nextTick(fn);
  case 2:
    return process.nextTick(function afterTickOne() {
      fn.call(null, arg1);
    });
  case 3:
    return process.nextTick(function afterTickTwo() {
      fn.call(null, arg1, arg2);
    });
  case 4:
    return process.nextTick(function afterTickThree() {
      fn.call(null, arg1, arg2, arg3);
    });
  default:
    args = new Array(len - 1);
    i = 0;
    while (i < args.length) {
      args[i++] = arguments[i];
    }
    return process.nextTick(function afterTick() {
      fn.apply(null, args);
    });
  }
}


/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__(/*! ./../process/browser.js */ "./node_modules/process/browser.js")))

/***/ }),

/***/ "./node_modules/process/browser.js":
/*!*****************************************!*\
  !*** ./node_modules/process/browser.js ***!
  \*****************************************/
/*! no static exports found */
/***/ (function(module, exports) {

// shim for using process in browser
var process = module.exports = {};

// cached from whatever global is present so that test runners that stub it
// don't break things.  But we need to wrap it in a try catch in case it is
// wrapped in strict mode code which doesn't define any globals.  It's inside a
// function because try/catches deoptimize in certain engines.

var cachedSetTimeout;
var cachedClearTimeout;

function defaultSetTimout() {
    throw new Error('setTimeout has not been defined');
}
function defaultClearTimeout () {
    throw new Error('clearTimeout has not been defined');
}
(function () {
    try {
        if (typeof setTimeout === 'function') {
            cachedSetTimeout = setTimeout;
        } else {
            cachedSetTimeout = defaultSetTimout;
        }
    } catch (e) {
        cachedSetTimeout = defaultSetTimout;
    }
    try {
        if (typeof clearTimeout === 'function') {
            cachedClearTimeout = clearTimeout;
        } else {
            cachedClearTimeout = defaultClearTimeout;
        }
    } catch (e) {
        cachedClearTimeout = defaultClearTimeout;
    }
} ())
function runTimeout(fun) {
    if (cachedSetTimeout === setTimeout) {
        //normal enviroments in sane situations
        return setTimeout(fun, 0);
    }
    // if setTimeout wasn't available but was latter defined
    if ((cachedSetTimeout === defaultSetTimout || !cachedSetTimeout) && setTimeout) {
        cachedSetTimeout = setTimeout;
        return setTimeout(fun, 0);
    }
    try {
        // when when somebody has screwed with setTimeout but no I.E. maddness
        return cachedSetTimeout(fun, 0);
    } catch(e){
        try {
            // When we are in I.E. but the script has been evaled so I.E. doesn't trust the global object when called normally
            return cachedSetTimeout.call(null, fun, 0);
        } catch(e){
            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error
            return cachedSetTimeout.call(this, fun, 0);
        }
    }


}
function runClearTimeout(marker) {
    if (cachedClearTimeout === clearTimeout) {
        //normal enviroments in sane situations
        return clearTimeout(marker);
    }
    // if clearTimeout wasn't available but was latter defined
    if ((cachedClearTimeout === defaultClearTimeout || !cachedClearTimeout) && clearTimeout) {
        cachedClearTimeout = clearTimeout;
        return clearTimeout(marker);
    }
    try {
        // when when somebody has screwed with setTimeout but no I.E. maddness
        return cachedClearTimeout(marker);
    } catch (e){
        try {
            // When we are in I.E. but the script has been evaled so I.E. doesn't  trust the global object when called normally
            return cachedClearTimeout.call(null, marker);
        } catch (e){
            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error.
            // Some versions of I.E. have different rules for clearTimeout vs setTimeout
            return cachedClearTimeout.call(this, marker);
        }
    }



}
var queue = [];
var draining = false;
var currentQueue;
var queueIndex = -1;

function cleanUpNextTick() {
    if (!draining || !currentQueue) {
        return;
    }
    draining = false;
    if (currentQueue.length) {
        queue = currentQueue.concat(queue);
    } else {
        queueIndex = -1;
    }
    if (queue.length) {
        drainQueue();
    }
}

function drainQueue() {
    if (draining) {
        return;
    }
    var timeout = runTimeout(cleanUpNextTick);
    draining = true;

    var len = queue.length;
    while(len) {
        currentQueue = queue;
        queue = [];
        while (++queueIndex < len) {
            if (currentQueue) {
                currentQueue[queueIndex].run();
            }
        }
        queueIndex = -1;
        len = queue.length;
    }
    currentQueue = null;
    draining = false;
    runClearTimeout(timeout);
}

process.nextTick = function (fun) {
    var args = new Array(arguments.length - 1);
    if (arguments.length > 1) {
        for (var i = 1; i < arguments.length; i++) {
            args[i - 1] = arguments[i];
        }
    }
    queue.push(new Item(fun, args));
    if (queue.length === 1 && !draining) {
        runTimeout(drainQueue);
    }
};

// v8 likes predictible objects
function Item(fun, array) {
    this.fun = fun;
    this.array = array;
}
Item.prototype.run = function () {
    this.fun.apply(null, this.array);
};
process.title = 'browser';
process.browser = true;
process.env = {};
process.argv = [];
process.version = ''; // empty string to avoid regexp issues
process.versions = {};

function noop() {}

process.on = noop;
process.addListener = noop;
process.once = noop;
process.off = noop;
process.removeListener = noop;
process.removeAllListeners = noop;
process.emit = noop;
process.prependListener = noop;
process.prependOnceListener = noop;

process.listeners = function (name) { return [] }

process.binding = function (name) {
    throw new Error('process.binding is not supported');
};

process.cwd = function () { return '/' };
process.chdir = function (dir) {
    throw new Error('process.chdir is not supported');
};
process.umask = function() { return 0; };


/***/ }),

/***/ "./node_modules/readable-stream/duplex-browser.js":
/*!********************************************************!*\
  !*** ./node_modules/readable-stream/duplex-browser.js ***!
  \********************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

module.exports = __webpack_require__(/*! ./lib/_stream_duplex.js */ "./node_modules/readable-stream/lib/_stream_duplex.js");


/***/ }),

/***/ "./node_modules/readable-stream/lib/_stream_duplex.js":
/*!************************************************************!*\
  !*** ./node_modules/readable-stream/lib/_stream_duplex.js ***!
  \************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
// Copyright Joyent, Inc. and other Node contributors.
//
// Permission is hereby granted, free of charge, to any person obtaining a
// copy of this software and associated documentation files (the
// "Software"), to deal in the Software without restriction, including
// without limitation the rights to use, copy, modify, merge, publish,
// distribute, sublicense, and/or sell copies of the Software, and to permit
// persons to whom the Software is furnished to do so, subject to the
// following conditions:
//
// The above copyright notice and this permission notice shall be included
// in all copies or substantial portions of the Software.
//
// THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS
// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN
// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,
// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR
// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE
// USE OR OTHER DEALINGS IN THE SOFTWARE.

// a duplex stream is just a stream that is both readable and writable.
// Since JS doesn't have multiple prototypal inheritance, this class
// prototypally inherits from Readable, and then parasitically from
// Writable.



/*<replacement>*/

var pna = __webpack_require__(/*! process-nextick-args */ "./node_modules/process-nextick-args/index.js");
/*</replacement>*/

/*<replacement>*/
var objectKeys = Object.keys || function (obj) {
  var keys = [];
  for (var key in obj) {
    keys.push(key);
  }return keys;
};
/*</replacement>*/

module.exports = Duplex;

/*<replacement>*/
var util = __webpack_require__(/*! core-util-is */ "./node_modules/core-util-is/lib/util.js");
util.inherits = __webpack_require__(/*! inherits */ "./node_modules/inherits/inherits_browser.js");
/*</replacement>*/

var Readable = __webpack_require__(/*! ./_stream_readable */ "./node_modules/readable-stream/lib/_stream_readable.js");
var Writable = __webpack_require__(/*! ./_stream_writable */ "./node_modules/readable-stream/lib/_stream_writable.js");

util.inherits(Duplex, Readable);

{
  // avoid scope creep, the keys array can then be collected
  var keys = objectKeys(Writable.prototype);
  for (var v = 0; v < keys.length; v++) {
    var method = keys[v];
    if (!Duplex.prototype[method]) Duplex.prototype[method] = Writable.prototype[method];
  }
}

function Duplex(options) {
  if (!(this instanceof Duplex)) return new Duplex(options);

  Readable.call(this, options);
  Writable.call(this, options);

  if (options && options.readable === false) this.readable = false;

  if (options && options.writable === false) this.writable = false;

  this.allowHalfOpen = true;
  if (options && options.allowHalfOpen === false) this.allowHalfOpen = false;

  this.once('end', onend);
}

Object.defineProperty(Duplex.prototype, 'writableHighWaterMark', {
  // making it explicit this property is not enumerable
  // because otherwise some prototype manipulation in
  // userland will fail
  enumerable: false,
  get: function () {
    return this._writableState.highWaterMark;
  }
});

// the no-half-open enforcer
function onend() {
  // if we allow half-open state, or if the writable side ended,
  // then we're ok.
  if (this.allowHalfOpen || this._writableState.ended) return;

  // no more data can be written.
  // But allow more writes to happen in this tick.
  pna.nextTick(onEndNT, this);
}

function onEndNT(self) {
  self.end();
}

Object.defineProperty(Duplex.prototype, 'destroyed', {
  get: function () {
    if (this._readableState === undefined || this._writableState === undefined) {
      return false;
    }
    return this._readableState.destroyed && this._writableState.destroyed;
  },
  set: function (value) {
    // we ignore the value if the stream
    // has not been initialized yet
    if (this._readableState === undefined || this._writableState === undefined) {
      return;
    }

    // backward compatibility, the user is explicitly
    // managing destroyed
    this._readableState.destroyed = value;
    this._writableState.destroyed = value;
  }
});

Duplex.prototype._destroy = function (err, cb) {
  this.push(null);
  this.end();

  pna.nextTick(cb, err);
};

/***/ }),

/***/ "./node_modules/readable-stream/lib/_stream_passthrough.js":
/*!*****************************************************************!*\
  !*** ./node_modules/readable-stream/lib/_stream_passthrough.js ***!
  \*****************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
// Copyright Joyent, Inc. and other Node contributors.
//
// Permission is hereby granted, free of charge, to any person obtaining a
// copy of this software and associated documentation files (the
// "Software"), to deal in the Software without restriction, including
// without limitation the rights to use, copy, modify, merge, publish,
// distribute, sublicense, and/or sell copies of the Software, and to permit
// persons to whom the Software is furnished to do so, subject to the
// following conditions:
//
// The above copyright notice and this permission notice shall be included
// in all copies or substantial portions of the Software.
//
// THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS
// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN
// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,
// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR
// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE
// USE OR OTHER DEALINGS IN THE SOFTWARE.

// a passthrough stream.
// basically just the most minimal sort of Transform stream.
// Every written chunk gets output as-is.



module.exports = PassThrough;

var Transform = __webpack_require__(/*! ./_stream_transform */ "./node_modules/readable-stream/lib/_stream_transform.js");

/*<replacement>*/
var util = __webpack_require__(/*! core-util-is */ "./node_modules/core-util-is/lib/util.js");
util.inherits = __webpack_require__(/*! inherits */ "./node_modules/inherits/inherits_browser.js");
/*</replacement>*/

util.inherits(PassThrough, Transform);

function PassThrough(options) {
  if (!(this instanceof PassThrough)) return new PassThrough(options);

  Transform.call(this, options);
}

PassThrough.prototype._transform = function (chunk, encoding, cb) {
  cb(null, chunk);
};

/***/ }),

/***/ "./node_modules/readable-stream/lib/_stream_readable.js":
/*!**************************************************************!*\
  !*** ./node_modules/readable-stream/lib/_stream_readable.js ***!
  \**************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
/* WEBPACK VAR INJECTION */(function(global, process) {// Copyright Joyent, Inc. and other Node contributors.
//
// Permission is hereby granted, free of charge, to any person obtaining a
// copy of this software and associated documentation files (the
// "Software"), to deal in the Software without restriction, including
// without limitation the rights to use, copy, modify, merge, publish,
// distribute, sublicense, and/or sell copies of the Software, and to permit
// persons to whom the Software is furnished to do so, subject to the
// following conditions:
//
// The above copyright notice and this permission notice shall be included
// in all copies or substantial portions of the Software.
//
// THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS
// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN
// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,
// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR
// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE
// USE OR OTHER DEALINGS IN THE SOFTWARE.



/*<replacement>*/

var pna = __webpack_require__(/*! process-nextick-args */ "./node_modules/process-nextick-args/index.js");
/*</replacement>*/

module.exports = Readable;

/*<replacement>*/
var isArray = __webpack_require__(/*! isarray */ "./node_modules/isarray/index.js");
/*</replacement>*/

/*<replacement>*/
var Duplex;
/*</replacement>*/

Readable.ReadableState = ReadableState;

/*<replacement>*/
var EE = __webpack_require__(/*! events */ "./node_modules/events/events.js").EventEmitter;

var EElistenerCount = function (emitter, type) {
  return emitter.listeners(type).length;
};
/*</replacement>*/

/*<replacement>*/
var Stream = __webpack_require__(/*! ./internal/streams/stream */ "./node_modules/readable-stream/lib/internal/streams/stream-browser.js");
/*</replacement>*/

/*<replacement>*/

var Buffer = __webpack_require__(/*! safe-buffer */ "./node_modules/safe-buffer/index.js").Buffer;
var OurUint8Array = global.Uint8Array || function () {};
function _uint8ArrayToBuffer(chunk) {
  return Buffer.from(chunk);
}
function _isUint8Array(obj) {
  return Buffer.isBuffer(obj) || obj instanceof OurUint8Array;
}

/*</replacement>*/

/*<replacement>*/
var util = __webpack_require__(/*! core-util-is */ "./node_modules/core-util-is/lib/util.js");
util.inherits = __webpack_require__(/*! inherits */ "./node_modules/inherits/inherits_browser.js");
/*</replacement>*/

/*<replacement>*/
var debugUtil = __webpack_require__(/*! util */ 0);
var debug = void 0;
if (debugUtil && debugUtil.debuglog) {
  debug = debugUtil.debuglog('stream');
} else {
  debug = function () {};
}
/*</replacement>*/

var BufferList = __webpack_require__(/*! ./internal/streams/BufferList */ "./node_modules/readable-stream/lib/internal/streams/BufferList.js");
var destroyImpl = __webpack_require__(/*! ./internal/streams/destroy */ "./node_modules/readable-stream/lib/internal/streams/destroy.js");
var StringDecoder;

util.inherits(Readable, Stream);

var kProxyEvents = ['error', 'close', 'destroy', 'pause', 'resume'];

function prependListener(emitter, event, fn) {
  // Sadly this is not cacheable as some libraries bundle their own
  // event emitter implementation with them.
  if (typeof emitter.prependListener === 'function') return emitter.prependListener(event, fn);

  // This is a hack to make sure that our error handler is attached before any
  // userland ones.  NEVER DO THIS. This is here only because this code needs
  // to continue to work with older versions of Node.js that do not include
  // the prependListener() method. The goal is to eventually remove this hack.
  if (!emitter._events || !emitter._events[event]) emitter.on(event, fn);else if (isArray(emitter._events[event])) emitter._events[event].unshift(fn);else emitter._events[event] = [fn, emitter._events[event]];
}

function ReadableState(options, stream) {
  Duplex = Duplex || __webpack_require__(/*! ./_stream_duplex */ "./node_modules/readable-stream/lib/_stream_duplex.js");

  options = options || {};

  // Duplex streams are both readable and writable, but share
  // the same options object.
  // However, some cases require setting options to different
  // values for the readable and the writable sides of the duplex stream.
  // These options can be provided separately as readableXXX and writableXXX.
  var isDuplex = stream instanceof Duplex;

  // object stream flag. Used to make read(n) ignore n and to
  // make all the buffer merging and length checks go away
  this.objectMode = !!options.objectMode;

  if (isDuplex) this.objectMode = this.objectMode || !!options.readableObjectMode;

  // the point at which it stops calling _read() to fill the buffer
  // Note: 0 is a valid value, means "don't call _read preemptively ever"
  var hwm = options.highWaterMark;
  var readableHwm = options.readableHighWaterMark;
  var defaultHwm = this.objectMode ? 16 : 16 * 1024;

  if (hwm || hwm === 0) this.highWaterMark = hwm;else if (isDuplex && (readableHwm || readableHwm === 0)) this.highWaterMark = readableHwm;else this.highWaterMark = defaultHwm;

  // cast to ints.
  this.highWaterMark = Math.floor(this.highWaterMark);

  // A linked list is used to store data chunks instead of an array because the
  // linked list can remove elements from the beginning faster than
  // array.shift()
  this.buffer = new BufferList();
  this.length = 0;
  this.pipes = null;
  this.pipesCount = 0;
  this.flowing = null;
  this.ended = false;
  this.endEmitted = false;
  this.reading = false;

  // a flag to be able to tell if the event 'readable'/'data' is emitted
  // immediately, or on a later tick.  We set this to true at first, because
  // any actions that shouldn't happen until "later" should generally also
  // not happen before the first read call.
  this.sync = true;

  // whenever we return null, then we set a flag to say
  // that we're awaiting a 'readable' event emission.
  this.needReadable = false;
  this.emittedReadable = false;
  this.readableListening = false;
  this.resumeScheduled = false;

  // has it been destroyed
  this.destroyed = false;

  // Crypto is kind of old and crusty.  Historically, its default string
  // encoding is 'binary' so we have to make this configurable.
  // Everything else in the universe uses 'utf8', though.
  this.defaultEncoding = options.defaultEncoding || 'utf8';

  // the number of writers that are awaiting a drain event in .pipe()s
  this.awaitDrain = 0;

  // if true, a maybeReadMore has been scheduled
  this.readingMore = false;

  this.decoder = null;
  this.encoding = null;
  if (options.encoding) {
    if (!StringDecoder) StringDecoder = __webpack_require__(/*! string_decoder/ */ "./node_modules/string_decoder/lib/string_decoder.js").StringDecoder;
    this.decoder = new StringDecoder(options.encoding);
    this.encoding = options.encoding;
  }
}

function Readable(options) {
  Duplex = Duplex || __webpack_require__(/*! ./_stream_duplex */ "./node_modules/readable-stream/lib/_stream_duplex.js");

  if (!(this instanceof Readable)) return new Readable(options);

  this._readableState = new ReadableState(options, this);

  // legacy
  this.readable = true;

  if (options) {
    if (typeof options.read === 'function') this._read = options.read;

    if (typeof options.destroy === 'function') this._destroy = options.destroy;
  }

  Stream.call(this);
}

Object.defineProperty(Readable.prototype, 'destroyed', {
  get: function () {
    if (this._readableState === undefined) {
      return false;
    }
    return this._readableState.destroyed;
  },
  set: function (value) {
    // we ignore the value if the stream
    // has not been initialized yet
    if (!this._readableState) {
      return;
    }

    // backward compatibility, the user is explicitly
    // managing destroyed
    this._readableState.destroyed = value;
  }
});

Readable.prototype.destroy = destroyImpl.destroy;
Readable.prototype._undestroy = destroyImpl.undestroy;
Readable.prototype._destroy = function (err, cb) {
  this.push(null);
  cb(err);
};

// Manually shove something into the read() buffer.
// This returns true if the highWaterMark has not been hit yet,
// similar to how Writable.write() returns true if you should
// write() some more.
Readable.prototype.push = function (chunk, encoding) {
  var state = this._readableState;
  var skipChunkCheck;

  if (!state.objectMode) {
    if (typeof chunk === 'string') {
      encoding = encoding || state.defaultEncoding;
      if (encoding !== state.encoding) {
        chunk = Buffer.from(chunk, encoding);
        encoding = '';
      }
      skipChunkCheck = true;
    }
  } else {
    skipChunkCheck = true;
  }

  return readableAddChunk(this, chunk, encoding, false, skipChunkCheck);
};

// Unshift should *always* be something directly out of read()
Readable.prototype.unshift = function (chunk) {
  return readableAddChunk(this, chunk, null, true, false);
};

function readableAddChunk(stream, chunk, encoding, addToFront, skipChunkCheck) {
  var state = stream._readableState;
  if (chunk === null) {
    state.reading = false;
    onEofChunk(stream, state);
  } else {
    var er;
    if (!skipChunkCheck) er = chunkInvalid(state, chunk);
    if (er) {
      stream.emit('error', er);
    } else if (state.objectMode || chunk && chunk.length > 0) {
      if (typeof chunk !== 'string' && !state.objectMode && Object.getPrototypeOf(chunk) !== Buffer.prototype) {
        chunk = _uint8ArrayToBuffer(chunk);
      }

      if (addToFront) {
        if (state.endEmitted) stream.emit('error', new Error('stream.unshift() after end event'));else addChunk(stream, state, chunk, true);
      } else if (state.ended) {
        stream.emit('error', new Error('stream.push() after EOF'));
      } else {
        state.reading = false;
        if (state.decoder && !encoding) {
          chunk = state.decoder.write(chunk);
          if (state.objectMode || chunk.length !== 0) addChunk(stream, state, chunk, false);else maybeReadMore(stream, state);
        } else {
          addChunk(stream, state, chunk, false);
        }
      }
    } else if (!addToFront) {
      state.reading = false;
    }
  }

  return needMoreData(state);
}

function addChunk(stream, state, chunk, addToFront) {
  if (state.flowing && state.length === 0 && !state.sync) {
    stream.emit('data', chunk);
    stream.read(0);
  } else {
    // update the buffer info.
    state.length += state.objectMode ? 1 : chunk.length;
    if (addToFront) state.buffer.unshift(chunk);else state.buffer.push(chunk);

    if (state.needReadable) emitReadable(stream);
  }
  maybeReadMore(stream, state);
}

function chunkInvalid(state, chunk) {
  var er;
  if (!_isUint8Array(chunk) && typeof chunk !== 'string' && chunk !== undefined && !state.objectMode) {
    er = new TypeError('Invalid non-string/buffer chunk');
  }
  return er;
}

// if it's past the high water mark, we can push in some more.
// Also, if we have no data yet, we can stand some
// more bytes.  This is to work around cases where hwm=0,
// such as the repl.  Also, if the push() triggered a
// readable event, and the user called read(largeNumber) such that
// needReadable was set, then we ought to push more, so that another
// 'readable' event will be triggered.
function needMoreData(state) {
  return !state.ended && (state.needReadable || state.length < state.highWaterMark || state.length === 0);
}

Readable.prototype.isPaused = function () {
  return this._readableState.flowing === false;
};

// backwards compatibility.
Readable.prototype.setEncoding = function (enc) {
  if (!StringDecoder) StringDecoder = __webpack_require__(/*! string_decoder/ */ "./node_modules/string_decoder/lib/string_decoder.js").StringDecoder;
  this._readableState.decoder = new StringDecoder(enc);
  this._readableState.encoding = enc;
  return this;
};

// Don't raise the hwm > 8MB
var MAX_HWM = 0x800000;
function computeNewHighWaterMark(n) {
  if (n >= MAX_HWM) {
    n = MAX_HWM;
  } else {
    // Get the next highest power of 2 to prevent increasing hwm excessively in
    // tiny amounts
    n--;
    n |= n >>> 1;
    n |= n >>> 2;
    n |= n >>> 4;
    n |= n >>> 8;
    n |= n >>> 16;
    n++;
  }
  return n;
}

// This function is designed to be inlinable, so please take care when making
// changes to the function body.
function howMuchToRead(n, state) {
  if (n <= 0 || state.length === 0 && state.ended) return 0;
  if (state.objectMode) return 1;
  if (n !== n) {
    // Only flow one buffer at a time
    if (state.flowing && state.length) return state.buffer.head.data.length;else return state.length;
  }
  // If we're asking for more than the current hwm, then raise the hwm.
  if (n > state.highWaterMark) state.highWaterMark = computeNewHighWaterMark(n);
  if (n <= state.length) return n;
  // Don't have enough
  if (!state.ended) {
    state.needReadable = true;
    return 0;
  }
  return state.length;
}

// you can override either this method, or the async _read(n) below.
Readable.prototype.read = function (n) {
  debug('read', n);
  n = parseInt(n, 10);
  var state = this._readableState;
  var nOrig = n;

  if (n !== 0) state.emittedReadable = false;

  // if we're doing read(0) to trigger a readable event, but we
  // already have a bunch of data in the buffer, then just trigger
  // the 'readable' event and move on.
  if (n === 0 && state.needReadable && (state.length >= state.highWaterMark || state.ended)) {
    debug('read: emitReadable', state.length, state.ended);
    if (state.length === 0 && state.ended) endReadable(this);else emitReadable(this);
    return null;
  }

  n = howMuchToRead(n, state);

  // if we've ended, and we're now clear, then finish it up.
  if (n === 0 && state.ended) {
    if (state.length === 0) endReadable(this);
    return null;
  }

  // All the actual chunk generation logic needs to be
  // *below* the call to _read.  The reason is that in certain
  // synthetic stream cases, such as passthrough streams, _read
  // may be a completely synchronous operation which may change
  // the state of the read buffer, providing enough data when
  // before there was *not* enough.
  //
  // So, the steps are:
  // 1. Figure out what the state of things will be after we do
  // a read from the buffer.
  //
  // 2. If that resulting state will trigger a _read, then call _read.
  // Note that this may be asynchronous, or synchronous.  Yes, it is
  // deeply ugly to write APIs this way, but that still doesn't mean
  // that the Readable class should behave improperly, as streams are
  // designed to be sync/async agnostic.
  // Take note if the _read call is sync or async (ie, if the read call
  // has returned yet), so that we know whether or not it's safe to emit
  // 'readable' etc.
  //
  // 3. Actually pull the requested chunks out of the buffer and return.

  // if we need a readable event, then we need to do some reading.
  var doRead = state.needReadable;
  debug('need readable', doRead);

  // if we currently have less than the highWaterMark, then also read some
  if (state.length === 0 || state.length - n < state.highWaterMark) {
    doRead = true;
    debug('length less than watermark', doRead);
  }

  // however, if we've ended, then there's no point, and if we're already
  // reading, then it's unnecessary.
  if (state.ended || state.reading) {
    doRead = false;
    debug('reading or ended', doRead);
  } else if (doRead) {
    debug('do read');
    state.reading = true;
    state.sync = true;
    // if the length is currently zero, then we *need* a readable event.
    if (state.length === 0) state.needReadable = true;
    // call internal read method
    this._read(state.highWaterMark);
    state.sync = false;
    // If _read pushed data synchronously, then `reading` will be false,
    // and we need to re-evaluate how much data we can return to the user.
    if (!state.reading) n = howMuchToRead(nOrig, state);
  }

  var ret;
  if (n > 0) ret = fromList(n, state);else ret = null;

  if (ret === null) {
    state.needReadable = true;
    n = 0;
  } else {
    state.length -= n;
  }

  if (state.length === 0) {
    // If we have nothing in the buffer, then we want to know
    // as soon as we *do* get something into the buffer.
    if (!state.ended) state.needReadable = true;

    // If we tried to read() past the EOF, then emit end on the next tick.
    if (nOrig !== n && state.ended) endReadable(this);
  }

  if (ret !== null) this.emit('data', ret);

  return ret;
};

function onEofChunk(stream, state) {
  if (state.ended) return;
  if (state.decoder) {
    var chunk = state.decoder.end();
    if (chunk && chunk.length) {
      state.buffer.push(chunk);
      state.length += state.objectMode ? 1 : chunk.length;
    }
  }
  state.ended = true;

  // emit 'readable' now to make sure it gets picked up.
  emitReadable(stream);
}

// Don't emit readable right away in sync mode, because this can trigger
// another read() call => stack overflow.  This way, it might trigger
// a nextTick recursion warning, but that's not so bad.
function emitReadable(stream) {
  var state = stream._readableState;
  state.needReadable = false;
  if (!state.emittedReadable) {
    debug('emitReadable', state.flowing);
    state.emittedReadable = true;
    if (state.sync) pna.nextTick(emitReadable_, stream);else emitReadable_(stream);
  }
}

function emitReadable_(stream) {
  debug('emit readable');
  stream.emit('readable');
  flow(stream);
}

// at this point, the user has presumably seen the 'readable' event,
// and called read() to consume some data.  that may have triggered
// in turn another _read(n) call, in which case reading = true if
// it's in progress.
// However, if we're not ended, or reading, and the length < hwm,
// then go ahead and try to read some more preemptively.
function maybeReadMore(stream, state) {
  if (!state.readingMore) {
    state.readingMore = true;
    pna.nextTick(maybeReadMore_, stream, state);
  }
}

function maybeReadMore_(stream, state) {
  var len = state.length;
  while (!state.reading && !state.flowing && !state.ended && state.length < state.highWaterMark) {
    debug('maybeReadMore read 0');
    stream.read(0);
    if (len === state.length)
      // didn't get any data, stop spinning.
      break;else len = state.length;
  }
  state.readingMore = false;
}

// abstract method.  to be overridden in specific implementation classes.
// call cb(er, data) where data is <= n in length.
// for virtual (non-string, non-buffer) streams, "length" is somewhat
// arbitrary, and perhaps not very meaningful.
Readable.prototype._read = function (n) {
  this.emit('error', new Error('_read() is not implemented'));
};

Readable.prototype.pipe = function (dest, pipeOpts) {
  var src = this;
  var state = this._readableState;

  switch (state.pipesCount) {
    case 0:
      state.pipes = dest;
      break;
    case 1:
      state.pipes = [state.pipes, dest];
      break;
    default:
      state.pipes.push(dest);
      break;
  }
  state.pipesCount += 1;
  debug('pipe count=%d opts=%j', state.pipesCount, pipeOpts);

  var doEnd = (!pipeOpts || pipeOpts.end !== false) && dest !== process.stdout && dest !== process.stderr;

  var endFn = doEnd ? onend : unpipe;
  if (state.endEmitted) pna.nextTick(endFn);else src.once('end', endFn);

  dest.on('unpipe', onunpipe);
  function onunpipe(readable, unpipeInfo) {
    debug('onunpipe');
    if (readable === src) {
      if (unpipeInfo && unpipeInfo.hasUnpiped === false) {
        unpipeInfo.hasUnpiped = true;
        cleanup();
      }
    }
  }

  function onend() {
    debug('onend');
    dest.end();
  }

  // when the dest drains, it reduces the awaitDrain counter
  // on the source.  This would be more elegant with a .once()
  // handler in flow(), but adding and removing repeatedly is
  // too slow.
  var ondrain = pipeOnDrain(src);
  dest.on('drain', ondrain);

  var cleanedUp = false;
  function cleanup() {
    debug('cleanup');
    // cleanup event handlers once the pipe is broken
    dest.removeListener('close', onclose);
    dest.removeListener('finish', onfinish);
    dest.removeListener('drain', ondrain);
    dest.removeListener('error', onerror);
    dest.removeListener('unpipe', onunpipe);
    src.removeListener('end', onend);
    src.removeListener('end', unpipe);
    src.removeListener('data', ondata);

    cleanedUp = true;

    // if the reader is waiting for a drain event from this
    // specific writer, then it would cause it to never start
    // flowing again.
    // So, if this is awaiting a drain, then we just call it now.
    // If we don't know, then assume that we are waiting for one.
    if (state.awaitDrain && (!dest._writableState || dest._writableState.needDrain)) ondrain();
  }

  // If the user pushes more data while we're writing to dest then we'll end up
  // in ondata again. However, we only want to increase awaitDrain once because
  // dest will only emit one 'drain' event for the multiple writes.
  // => Introduce a guard on increasing awaitDrain.
  var increasedAwaitDrain = false;
  src.on('data', ondata);
  function ondata(chunk) {
    debug('ondata');
    increasedAwaitDrain = false;
    var ret = dest.write(chunk);
    if (false === ret && !increasedAwaitDrain) {
      // If the user unpiped during `dest.write()`, it is possible
      // to get stuck in a permanently paused state if that write
      // also returned false.
      // => Check whether `dest` is still a piping destination.
      if ((state.pipesCount === 1 && state.pipes === dest || state.pipesCount > 1 && indexOf(state.pipes, dest) !== -1) && !cleanedUp) {
        debug('false write response, pause', src._readableState.awaitDrain);
        src._readableState.awaitDrain++;
        increasedAwaitDrain = true;
      }
      src.pause();
    }
  }

  // if the dest has an error, then stop piping into it.
  // however, don't suppress the throwing behavior for this.
  function onerror(er) {
    debug('onerror', er);
    unpipe();
    dest.removeListener('error', onerror);
    if (EElistenerCount(dest, 'error') === 0) dest.emit('error', er);
  }

  // Make sure our error handler is attached before userland ones.
  prependListener(dest, 'error', onerror);

  // Both close and finish should trigger unpipe, but only once.
  function onclose() {
    dest.removeListener('finish', onfinish);
    unpipe();
  }
  dest.once('close', onclose);
  function onfinish() {
    debug('onfinish');
    dest.removeListener('close', onclose);
    unpipe();
  }
  dest.once('finish', onfinish);

  function unpipe() {
    debug('unpipe');
    src.unpipe(dest);
  }

  // tell the dest that it's being piped to
  dest.emit('pipe', src);

  // start the flow if it hasn't been started already.
  if (!state.flowing) {
    debug('pipe resume');
    src.resume();
  }

  return dest;
};

function pipeOnDrain(src) {
  return function () {
    var state = src._readableState;
    debug('pipeOnDrain', state.awaitDrain);
    if (state.awaitDrain) state.awaitDrain--;
    if (state.awaitDrain === 0 && EElistenerCount(src, 'data')) {
      state.flowing = true;
      flow(src);
    }
  };
}

Readable.prototype.unpipe = function (dest) {
  var state = this._readableState;
  var unpipeInfo = { hasUnpiped: false };

  // if we're not piping anywhere, then do nothing.
  if (state.pipesCount === 0) return this;

  // just one destination.  most common case.
  if (state.pipesCount === 1) {
    // passed in one, but it's not the right one.
    if (dest && dest !== state.pipes) return this;

    if (!dest) dest = state.pipes;

    // got a match.
    state.pipes = null;
    state.pipesCount = 0;
    state.flowing = false;
    if (dest) dest.emit('unpipe', this, unpipeInfo);
    return this;
  }

  // slow case. multiple pipe destinations.

  if (!dest) {
    // remove all.
    var dests = state.pipes;
    var len = state.pipesCount;
    state.pipes = null;
    state.pipesCount = 0;
    state.flowing = false;

    for (var i = 0; i < len; i++) {
      dests[i].emit('unpipe', this, unpipeInfo);
    }return this;
  }

  // try to find the right one.
  var index = indexOf(state.pipes, dest);
  if (index === -1) return this;

  state.pipes.splice(index, 1);
  state.pipesCount -= 1;
  if (state.pipesCount === 1) state.pipes = state.pipes[0];

  dest.emit('unpipe', this, unpipeInfo);

  return this;
};

// set up data events if they are asked for
// Ensure readable listeners eventually get something
Readable.prototype.on = function (ev, fn) {
  var res = Stream.prototype.on.call(this, ev, fn);

  if (ev === 'data') {
    // Start flowing on next tick if stream isn't explicitly paused
    if (this._readableState.flowing !== false) this.resume();
  } else if (ev === 'readable') {
    var state = this._readableState;
    if (!state.endEmitted && !state.readableListening) {
      state.readableListening = state.needReadable = true;
      state.emittedReadable = false;
      if (!state.reading) {
        pna.nextTick(nReadingNextTick, this);
      } else if (state.length) {
        emitReadable(this);
      }
    }
  }

  return res;
};
Readable.prototype.addListener = Readable.prototype.on;

function nReadingNextTick(self) {
  debug('readable nexttick read 0');
  self.read(0);
}

// pause() and resume() are remnants of the legacy readable stream API
// If the user uses them, then switch into old mode.
Readable.prototype.resume = function () {
  var state = this._readableState;
  if (!state.flowing) {
    debug('resume');
    state.flowing = true;
    resume(this, state);
  }
  return this;
};

function resume(stream, state) {
  if (!state.resumeScheduled) {
    state.resumeScheduled = true;
    pna.nextTick(resume_, stream, state);
  }
}

function resume_(stream, state) {
  if (!state.reading) {
    debug('resume read 0');
    stream.read(0);
  }

  state.resumeScheduled = false;
  state.awaitDrain = 0;
  stream.emit('resume');
  flow(stream);
  if (state.flowing && !state.reading) stream.read(0);
}

Readable.prototype.pause = function () {
  debug('call pause flowing=%j', this._readableState.flowing);
  if (false !== this._readableState.flowing) {
    debug('pause');
    this._readableState.flowing = false;
    this.emit('pause');
  }
  return this;
};

function flow(stream) {
  var state = stream._readableState;
  debug('flow', state.flowing);
  while (state.flowing && stream.read() !== null) {}
}

// wrap an old-style stream as the async data source.
// This is *not* part of the readable stream interface.
// It is an ugly unfortunate mess of history.
Readable.prototype.wrap = function (stream) {
  var _this = this;

  var state = this._readableState;
  var paused = false;

  stream.on('end', function () {
    debug('wrapped end');
    if (state.decoder && !state.ended) {
      var chunk = state.decoder.end();
      if (chunk && chunk.length) _this.push(chunk);
    }

    _this.push(null);
  });

  stream.on('data', function (chunk) {
    debug('wrapped data');
    if (state.decoder) chunk = state.decoder.write(chunk);

    // don't skip over falsy values in objectMode
    if (state.objectMode && (chunk === null || chunk === undefined)) return;else if (!state.objectMode && (!chunk || !chunk.length)) return;

    var ret = _this.push(chunk);
    if (!ret) {
      paused = true;
      stream.pause();
    }
  });

  // proxy all the other methods.
  // important when wrapping filters and duplexes.
  for (var i in stream) {
    if (this[i] === undefined && typeof stream[i] === 'function') {
      this[i] = function (method) {
        return function () {
          return stream[method].apply(stream, arguments);
        };
      }(i);
    }
  }

  // proxy certain important events.
  for (var n = 0; n < kProxyEvents.length; n++) {
    stream.on(kProxyEvents[n], this.emit.bind(this, kProxyEvents[n]));
  }

  // when we try to consume some more bytes, simply unpause the
  // underlying stream.
  this._read = function (n) {
    debug('wrapped _read', n);
    if (paused) {
      paused = false;
      stream.resume();
    }
  };

  return this;
};

Object.defineProperty(Readable.prototype, 'readableHighWaterMark', {
  // making it explicit this property is not enumerable
  // because otherwise some prototype manipulation in
  // userland will fail
  enumerable: false,
  get: function () {
    return this._readableState.highWaterMark;
  }
});

// exposed for testing purposes only.
Readable._fromList = fromList;

// Pluck off n bytes from an array of buffers.
// Length is the combined lengths of all the buffers in the list.
// This function is designed to be inlinable, so please take care when making
// changes to the function body.
function fromList(n, state) {
  // nothing buffered
  if (state.length === 0) return null;

  var ret;
  if (state.objectMode) ret = state.buffer.shift();else if (!n || n >= state.length) {
    // read it all, truncate the list
    if (state.decoder) ret = state.buffer.join('');else if (state.buffer.length === 1) ret = state.buffer.head.data;else ret = state.buffer.concat(state.length);
    state.buffer.clear();
  } else {
    // read part of list
    ret = fromListPartial(n, state.buffer, state.decoder);
  }

  return ret;
}

// Extracts only enough buffered data to satisfy the amount requested.
// This function is designed to be inlinable, so please take care when making
// changes to the function body.
function fromListPartial(n, list, hasStrings) {
  var ret;
  if (n < list.head.data.length) {
    // slice is the same for buffers and strings
    ret = list.head.data.slice(0, n);
    list.head.data = list.head.data.slice(n);
  } else if (n === list.head.data.length) {
    // first chunk is a perfect match
    ret = list.shift();
  } else {
    // result spans more than one buffer
    ret = hasStrings ? copyFromBufferString(n, list) : copyFromBuffer(n, list);
  }
  return ret;
}

// Copies a specified amount of characters from the list of buffered data
// chunks.
// This function is designed to be inlinable, so please take care when making
// changes to the function body.
function copyFromBufferString(n, list) {
  var p = list.head;
  var c = 1;
  var ret = p.data;
  n -= ret.length;
  while (p = p.next) {
    var str = p.data;
    var nb = n > str.length ? str.length : n;
    if (nb === str.length) ret += str;else ret += str.slice(0, n);
    n -= nb;
    if (n === 0) {
      if (nb === str.length) {
        ++c;
        if (p.next) list.head = p.next;else list.head = list.tail = null;
      } else {
        list.head = p;
        p.data = str.slice(nb);
      }
      break;
    }
    ++c;
  }
  list.length -= c;
  return ret;
}

// Copies a specified amount of bytes from the list of buffered data chunks.
// This function is designed to be inlinable, so please take care when making
// changes to the function body.
function copyFromBuffer(n, list) {
  var ret = Buffer.allocUnsafe(n);
  var p = list.head;
  var c = 1;
  p.data.copy(ret);
  n -= p.data.length;
  while (p = p.next) {
    var buf = p.data;
    var nb = n > buf.length ? buf.length : n;
    buf.copy(ret, ret.length - n, 0, nb);
    n -= nb;
    if (n === 0) {
      if (nb === buf.length) {
        ++c;
        if (p.next) list.head = p.next;else list.head = list.tail = null;
      } else {
        list.head = p;
        p.data = buf.slice(nb);
      }
      break;
    }
    ++c;
  }
  list.length -= c;
  return ret;
}

function endReadable(stream) {
  var state = stream._readableState;

  // If we get here before consuming all the bytes, then that is a
  // bug in node.  Should never happen.
  if (state.length > 0) throw new Error('"endReadable()" called on non-empty stream');

  if (!state.endEmitted) {
    state.ended = true;
    pna.nextTick(endReadableNT, state, stream);
  }
}

function endReadableNT(state, stream) {
  // Check that we didn't get one last unshift.
  if (!state.endEmitted && state.length === 0) {
    state.endEmitted = true;
    stream.readable = false;
    stream.emit('end');
  }
}

function indexOf(xs, x) {
  for (var i = 0, l = xs.length; i < l; i++) {
    if (xs[i] === x) return i;
  }
  return -1;
}
/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__(/*! ./../../webpack/buildin/global.js */ "./node_modules/webpack/buildin/global.js"), __webpack_require__(/*! ./../../process/browser.js */ "./node_modules/process/browser.js")))

/***/ }),

/***/ "./node_modules/readable-stream/lib/_stream_transform.js":
/*!***************************************************************!*\
  !*** ./node_modules/readable-stream/lib/_stream_transform.js ***!
  \***************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
// Copyright Joyent, Inc. and other Node contributors.
//
// Permission is hereby granted, free of charge, to any person obtaining a
// copy of this software and associated documentation files (the
// "Software"), to deal in the Software without restriction, including
// without limitation the rights to use, copy, modify, merge, publish,
// distribute, sublicense, and/or sell copies of the Software, and to permit
// persons to whom the Software is furnished to do so, subject to the
// following conditions:
//
// The above copyright notice and this permission notice shall be included
// in all copies or substantial portions of the Software.
//
// THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS
// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN
// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,
// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR
// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE
// USE OR OTHER DEALINGS IN THE SOFTWARE.

// a transform stream is a readable/writable stream where you do
// something with the data.  Sometimes it's called a "filter",
// but that's not a great name for it, since that implies a thing where
// some bits pass through, and others are simply ignored.  (That would
// be a valid example of a transform, of course.)
//
// While the output is causally related to the input, it's not a
// necessarily symmetric or synchronous transformation.  For example,
// a zlib stream might take multiple plain-text writes(), and then
// emit a single compressed chunk some time in the future.
//
// Here's how this works:
//
// The Transform stream has all the aspects of the readable and writable
// stream classes.  When you write(chunk), that calls _write(chunk,cb)
// internally, and returns false if there's a lot of pending writes
// buffered up.  When you call read(), that calls _read(n) until
// there's enough pending readable data buffered up.
//
// In a transform stream, the written data is placed in a buffer.  When
// _read(n) is called, it transforms the queued up data, calling the
// buffered _write cb's as it consumes chunks.  If consuming a single
// written chunk would result in multiple output chunks, then the first
// outputted bit calls the readcb, and subsequent chunks just go into
// the read buffer, and will cause it to emit 'readable' if necessary.
//
// This way, back-pressure is actually determined by the reading side,
// since _read has to be called to start processing a new chunk.  However,
// a pathological inflate type of transform can cause excessive buffering
// here.  For example, imagine a stream where every byte of input is
// interpreted as an integer from 0-255, and then results in that many
// bytes of output.  Writing the 4 bytes {ff,ff,ff,ff} would result in
// 1kb of data being output.  In this case, you could write a very small
// amount of input, and end up with a very large amount of output.  In
// such a pathological inflating mechanism, there'd be no way to tell
// the system to stop doing the transform.  A single 4MB write could
// cause the system to run out of memory.
//
// However, even in such a pathological case, only a single written chunk
// would be consumed, and then the rest would wait (un-transformed) until
// the results of the previous transformed chunk were consumed.



module.exports = Transform;

var Duplex = __webpack_require__(/*! ./_stream_duplex */ "./node_modules/readable-stream/lib/_stream_duplex.js");

/*<replacement>*/
var util = __webpack_require__(/*! core-util-is */ "./node_modules/core-util-is/lib/util.js");
util.inherits = __webpack_require__(/*! inherits */ "./node_modules/inherits/inherits_browser.js");
/*</replacement>*/

util.inherits(Transform, Duplex);

function afterTransform(er, data) {
  var ts = this._transformState;
  ts.transforming = false;

  var cb = ts.writecb;

  if (!cb) {
    return this.emit('error', new Error('write callback called multiple times'));
  }

  ts.writechunk = null;
  ts.writecb = null;

  if (data != null) // single equals check for both `null` and `undefined`
    this.push(data);

  cb(er);

  var rs = this._readableState;
  rs.reading = false;
  if (rs.needReadable || rs.length < rs.highWaterMark) {
    this._read(rs.highWaterMark);
  }
}

function Transform(options) {
  if (!(this instanceof Transform)) return new Transform(options);

  Duplex.call(this, options);

  this._transformState = {
    afterTransform: afterTransform.bind(this),
    needTransform: false,
    transforming: false,
    writecb: null,
    writechunk: null,
    writeencoding: null
  };

  // start out asking for a readable event once data is transformed.
  this._readableState.needReadable = true;

  // we have implemented the _read method, and done the other things
  // that Readable wants before the first _read call, so unset the
  // sync guard flag.
  this._readableState.sync = false;

  if (options) {
    if (typeof options.transform === 'function') this._transform = options.transform;

    if (typeof options.flush === 'function') this._flush = options.flush;
  }

  // When the writable side finishes, then flush out anything remaining.
  this.on('prefinish', prefinish);
}

function prefinish() {
  var _this = this;

  if (typeof this._flush === 'function') {
    this._flush(function (er, data) {
      done(_this, er, data);
    });
  } else {
    done(this, null, null);
  }
}

Transform.prototype.push = function (chunk, encoding) {
  this._transformState.needTransform = false;
  return Duplex.prototype.push.call(this, chunk, encoding);
};

// This is the part where you do stuff!
// override this function in implementation classes.
// 'chunk' is an input chunk.
//
// Call `push(newChunk)` to pass along transformed output
// to the readable side.  You may call 'push' zero or more times.
//
// Call `cb(err)` when you are done with this chunk.  If you pass
// an error, then that'll put the hurt on the whole operation.  If you
// never call cb(), then you'll never get another chunk.
Transform.prototype._transform = function (chunk, encoding, cb) {
  throw new Error('_transform() is not implemented');
};

Transform.prototype._write = function (chunk, encoding, cb) {
  var ts = this._transformState;
  ts.writecb = cb;
  ts.writechunk = chunk;
  ts.writeencoding = encoding;
  if (!ts.transforming) {
    var rs = this._readableState;
    if (ts.needTransform || rs.needReadable || rs.length < rs.highWaterMark) this._read(rs.highWaterMark);
  }
};

// Doesn't matter what the args are here.
// _transform does all the work.
// That we got here means that the readable side wants more data.
Transform.prototype._read = function (n) {
  var ts = this._transformState;

  if (ts.writechunk !== null && ts.writecb && !ts.transforming) {
    ts.transforming = true;
    this._transform(ts.writechunk, ts.writeencoding, ts.afterTransform);
  } else {
    // mark that we need a transform, so that any data that comes in
    // will get processed, now that we've asked for it.
    ts.needTransform = true;
  }
};

Transform.prototype._destroy = function (err, cb) {
  var _this2 = this;

  Duplex.prototype._destroy.call(this, err, function (err2) {
    cb(err2);
    _this2.emit('close');
  });
};

function done(stream, er, data) {
  if (er) return stream.emit('error', er);

  if (data != null) // single equals check for both `null` and `undefined`
    stream.push(data);

  // if there's nothing in the write buffer, then that means
  // that nothing more will ever be provided
  if (stream._writableState.length) throw new Error('Calling transform done when ws.length != 0');

  if (stream._transformState.transforming) throw new Error('Calling transform done when still transforming');

  return stream.push(null);
}

/***/ }),

/***/ "./node_modules/readable-stream/lib/_stream_writable.js":
/*!**************************************************************!*\
  !*** ./node_modules/readable-stream/lib/_stream_writable.js ***!
  \**************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
/* WEBPACK VAR INJECTION */(function(process, setImmediate, global) {// Copyright Joyent, Inc. and other Node contributors.
//
// Permission is hereby granted, free of charge, to any person obtaining a
// copy of this software and associated documentation files (the
// "Software"), to deal in the Software without restriction, including
// without limitation the rights to use, copy, modify, merge, publish,
// distribute, sublicense, and/or sell copies of the Software, and to permit
// persons to whom the Software is furnished to do so, subject to the
// following conditions:
//
// The above copyright notice and this permission notice shall be included
// in all copies or substantial portions of the Software.
//
// THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS
// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN
// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,
// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR
// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE
// USE OR OTHER DEALINGS IN THE SOFTWARE.

// A bit simpler than readable streams.
// Implement an async ._write(chunk, encoding, cb), and it'll handle all
// the drain event emission and buffering.



/*<replacement>*/

var pna = __webpack_require__(/*! process-nextick-args */ "./node_modules/process-nextick-args/index.js");
/*</replacement>*/

module.exports = Writable;

/* <replacement> */
function WriteReq(chunk, encoding, cb) {
  this.chunk = chunk;
  this.encoding = encoding;
  this.callback = cb;
  this.next = null;
}

// It seems a linked list but it is not
// there will be only 2 of these for each stream
function CorkedRequest(state) {
  var _this = this;

  this.next = null;
  this.entry = null;
  this.finish = function () {
    onCorkedFinish(_this, state);
  };
}
/* </replacement> */

/*<replacement>*/
var asyncWrite = !process.browser && ['v0.10', 'v0.9.'].indexOf(process.version.slice(0, 5)) > -1 ? setImmediate : pna.nextTick;
/*</replacement>*/

/*<replacement>*/
var Duplex;
/*</replacement>*/

Writable.WritableState = WritableState;

/*<replacement>*/
var util = __webpack_require__(/*! core-util-is */ "./node_modules/core-util-is/lib/util.js");
util.inherits = __webpack_require__(/*! inherits */ "./node_modules/inherits/inherits_browser.js");
/*</replacement>*/

/*<replacement>*/
var internalUtil = {
  deprecate: __webpack_require__(/*! util-deprecate */ "./node_modules/util-deprecate/browser.js")
};
/*</replacement>*/

/*<replacement>*/
var Stream = __webpack_require__(/*! ./internal/streams/stream */ "./node_modules/readable-stream/lib/internal/streams/stream-browser.js");
/*</replacement>*/

/*<replacement>*/

var Buffer = __webpack_require__(/*! safe-buffer */ "./node_modules/safe-buffer/index.js").Buffer;
var OurUint8Array = global.Uint8Array || function () {};
function _uint8ArrayToBuffer(chunk) {
  return Buffer.from(chunk);
}
function _isUint8Array(obj) {
  return Buffer.isBuffer(obj) || obj instanceof OurUint8Array;
}

/*</replacement>*/

var destroyImpl = __webpack_require__(/*! ./internal/streams/destroy */ "./node_modules/readable-stream/lib/internal/streams/destroy.js");

util.inherits(Writable, Stream);

function nop() {}

function WritableState(options, stream) {
  Duplex = Duplex || __webpack_require__(/*! ./_stream_duplex */ "./node_modules/readable-stream/lib/_stream_duplex.js");

  options = options || {};

  // Duplex streams are both readable and writable, but share
  // the same options object.
  // However, some cases require setting options to different
  // values for the readable and the writable sides of the duplex stream.
  // These options can be provided separately as readableXXX and writableXXX.
  var isDuplex = stream instanceof Duplex;

  // object stream flag to indicate whether or not this stream
  // contains buffers or objects.
  this.objectMode = !!options.objectMode;

  if (isDuplex) this.objectMode = this.objectMode || !!options.writableObjectMode;

  // the point at which write() starts returning false
  // Note: 0 is a valid value, means that we always return false if
  // the entire buffer is not flushed immediately on write()
  var hwm = options.highWaterMark;
  var writableHwm = options.writableHighWaterMark;
  var defaultHwm = this.objectMode ? 16 : 16 * 1024;

  if (hwm || hwm === 0) this.highWaterMark = hwm;else if (isDuplex && (writableHwm || writableHwm === 0)) this.highWaterMark = writableHwm;else this.highWaterMark = defaultHwm;

  // cast to ints.
  this.highWaterMark = Math.floor(this.highWaterMark);

  // if _final has been called
  this.finalCalled = false;

  // drain event flag.
  this.needDrain = false;
  // at the start of calling end()
  this.ending = false;
  // when end() has been called, and returned
  this.ended = false;
  // when 'finish' is emitted
  this.finished = false;

  // has it been destroyed
  this.destroyed = false;

  // should we decode strings into buffers before passing to _write?
  // this is here so that some node-core streams can optimize string
  // handling at a lower level.
  var noDecode = options.decodeStrings === false;
  this.decodeStrings = !noDecode;

  // Crypto is kind of old and crusty.  Historically, its default string
  // encoding is 'binary' so we have to make this configurable.
  // Everything else in the universe uses 'utf8', though.
  this.defaultEncoding = options.defaultEncoding || 'utf8';

  // not an actual buffer we keep track of, but a measurement
  // of how much we're waiting to get pushed to some underlying
  // socket or file.
  this.length = 0;

  // a flag to see when we're in the middle of a write.
  this.writing = false;

  // when true all writes will be buffered until .uncork() call
  this.corked = 0;

  // a flag to be able to tell if the onwrite cb is called immediately,
  // or on a later tick.  We set this to true at first, because any
  // actions that shouldn't happen until "later" should generally also
  // not happen before the first write call.
  this.sync = true;

  // a flag to know if we're processing previously buffered items, which
  // may call the _write() callback in the same tick, so that we don't
  // end up in an overlapped onwrite situation.
  this.bufferProcessing = false;

  // the callback that's passed to _write(chunk,cb)
  this.onwrite = function (er) {
    onwrite(stream, er);
  };

  // the callback that the user supplies to write(chunk,encoding,cb)
  this.writecb = null;

  // the amount that is being written when _write is called.
  this.writelen = 0;

  this.bufferedRequest = null;
  this.lastBufferedRequest = null;

  // number of pending user-supplied write callbacks
  // this must be 0 before 'finish' can be emitted
  this.pendingcb = 0;

  // emit prefinish if the only thing we're waiting for is _write cbs
  // This is relevant for synchronous Transform streams
  this.prefinished = false;

  // True if the error was already emitted and should not be thrown again
  this.errorEmitted = false;

  // count buffered requests
  this.bufferedRequestCount = 0;

  // allocate the first CorkedRequest, there is always
  // one allocated and free to use, and we maintain at most two
  this.corkedRequestsFree = new CorkedRequest(this);
}

WritableState.prototype.getBuffer = function getBuffer() {
  var current = this.bufferedRequest;
  var out = [];
  while (current) {
    out.push(current);
    current = current.next;
  }
  return out;
};

(function () {
  try {
    Object.defineProperty(WritableState.prototype, 'buffer', {
      get: internalUtil.deprecate(function () {
        return this.getBuffer();
      }, '_writableState.buffer is deprecated. Use _writableState.getBuffer ' + 'instead.', 'DEP0003')
    });
  } catch (_) {}
})();

// Test _writableState for inheritance to account for Duplex streams,
// whose prototype chain only points to Readable.
var realHasInstance;
if (typeof Symbol === 'function' && Symbol.hasInstance && typeof Function.prototype[Symbol.hasInstance] === 'function') {
  realHasInstance = Function.prototype[Symbol.hasInstance];
  Object.defineProperty(Writable, Symbol.hasInstance, {
    value: function (object) {
      if (realHasInstance.call(this, object)) return true;
      if (this !== Writable) return false;

      return object && object._writableState instanceof WritableState;
    }
  });
} else {
  realHasInstance = function (object) {
    return object instanceof this;
  };
}

function Writable(options) {
  Duplex = Duplex || __webpack_require__(/*! ./_stream_duplex */ "./node_modules/readable-stream/lib/_stream_duplex.js");

  // Writable ctor is applied to Duplexes, too.
  // `realHasInstance` is necessary because using plain `instanceof`
  // would return false, as no `_writableState` property is attached.

  // Trying to use the custom `instanceof` for Writable here will also break the
  // Node.js LazyTransform implementation, which has a non-trivial getter for
  // `_writableState` that would lead to infinite recursion.
  if (!realHasInstance.call(Writable, this) && !(this instanceof Duplex)) {
    return new Writable(options);
  }

  this._writableState = new WritableState(options, this);

  // legacy.
  this.writable = true;

  if (options) {
    if (typeof options.write === 'function') this._write = options.write;

    if (typeof options.writev === 'function') this._writev = options.writev;

    if (typeof options.destroy === 'function') this._destroy = options.destroy;

    if (typeof options.final === 'function') this._final = options.final;
  }

  Stream.call(this);
}

// Otherwise people can pipe Writable streams, which is just wrong.
Writable.prototype.pipe = function () {
  this.emit('error', new Error('Cannot pipe, not readable'));
};

function writeAfterEnd(stream, cb) {
  var er = new Error('write after end');
  // TODO: defer error events consistently everywhere, not just the cb
  stream.emit('error', er);
  pna.nextTick(cb, er);
}

// Checks that a user-supplied chunk is valid, especially for the particular
// mode the stream is in. Currently this means that `null` is never accepted
// and undefined/non-string values are only allowed in object mode.
function validChunk(stream, state, chunk, cb) {
  var valid = true;
  var er = false;

  if (chunk === null) {
    er = new TypeError('May not write null values to stream');
  } else if (typeof chunk !== 'string' && chunk !== undefined && !state.objectMode) {
    er = new TypeError('Invalid non-string/buffer chunk');
  }
  if (er) {
    stream.emit('error', er);
    pna.nextTick(cb, er);
    valid = false;
  }
  return valid;
}

Writable.prototype.write = function (chunk, encoding, cb) {
  var state = this._writableState;
  var ret = false;
  var isBuf = !state.objectMode && _isUint8Array(chunk);

  if (isBuf && !Buffer.isBuffer(chunk)) {
    chunk = _uint8ArrayToBuffer(chunk);
  }

  if (typeof encoding === 'function') {
    cb = encoding;
    encoding = null;
  }

  if (isBuf) encoding = 'buffer';else if (!encoding) encoding = state.defaultEncoding;

  if (typeof cb !== 'function') cb = nop;

  if (state.ended) writeAfterEnd(this, cb);else if (isBuf || validChunk(this, state, chunk, cb)) {
    state.pendingcb++;
    ret = writeOrBuffer(this, state, isBuf, chunk, encoding, cb);
  }

  return ret;
};

Writable.prototype.cork = function () {
  var state = this._writableState;

  state.corked++;
};

Writable.prototype.uncork = function () {
  var state = this._writableState;

  if (state.corked) {
    state.corked--;

    if (!state.writing && !state.corked && !state.finished && !state.bufferProcessing && state.bufferedRequest) clearBuffer(this, state);
  }
};

Writable.prototype.setDefaultEncoding = function setDefaultEncoding(encoding) {
  // node::ParseEncoding() requires lower case.
  if (typeof encoding === 'string') encoding = encoding.toLowerCase();
  if (!(['hex', 'utf8', 'utf-8', 'ascii', 'binary', 'base64', 'ucs2', 'ucs-2', 'utf16le', 'utf-16le', 'raw'].indexOf((encoding + '').toLowerCase()) > -1)) throw new TypeError('Unknown encoding: ' + encoding);
  this._writableState.defaultEncoding = encoding;
  return this;
};

function decodeChunk(state, chunk, encoding) {
  if (!state.objectMode && state.decodeStrings !== false && typeof chunk === 'string') {
    chunk = Buffer.from(chunk, encoding);
  }
  return chunk;
}

Object.defineProperty(Writable.prototype, 'writableHighWaterMark', {
  // making it explicit this property is not enumerable
  // because otherwise some prototype manipulation in
  // userland will fail
  enumerable: false,
  get: function () {
    return this._writableState.highWaterMark;
  }
});

// if we're already writing something, then just put this
// in the queue, and wait our turn.  Otherwise, call _write
// If we return false, then we need a drain event, so set that flag.
function writeOrBuffer(stream, state, isBuf, chunk, encoding, cb) {
  if (!isBuf) {
    var newChunk = decodeChunk(state, chunk, encoding);
    if (chunk !== newChunk) {
      isBuf = true;
      encoding = 'buffer';
      chunk = newChunk;
    }
  }
  var len = state.objectMode ? 1 : chunk.length;

  state.length += len;

  var ret = state.length < state.highWaterMark;
  // we must ensure that previous needDrain will not be reset to false.
  if (!ret) state.needDrain = true;

  if (state.writing || state.corked) {
    var last = state.lastBufferedRequest;
    state.lastBufferedRequest = {
      chunk: chunk,
      encoding: encoding,
      isBuf: isBuf,
      callback: cb,
      next: null
    };
    if (last) {
      last.next = state.lastBufferedRequest;
    } else {
      state.bufferedRequest = state.lastBufferedRequest;
    }
    state.bufferedRequestCount += 1;
  } else {
    doWrite(stream, state, false, len, chunk, encoding, cb);
  }

  return ret;
}

function doWrite(stream, state, writev, len, chunk, encoding, cb) {
  state.writelen = len;
  state.writecb = cb;
  state.writing = true;
  state.sync = true;
  if (writev) stream._writev(chunk, state.onwrite);else stream._write(chunk, encoding, state.onwrite);
  state.sync = false;
}

function onwriteError(stream, state, sync, er, cb) {
  --state.pendingcb;

  if (sync) {
    // defer the callback if we are being called synchronously
    // to avoid piling up things on the stack
    pna.nextTick(cb, er);
    // this can emit finish, and it will always happen
    // after error
    pna.nextTick(finishMaybe, stream, state);
    stream._writableState.errorEmitted = true;
    stream.emit('error', er);
  } else {
    // the caller expect this to happen before if
    // it is async
    cb(er);
    stream._writableState.errorEmitted = true;
    stream.emit('error', er);
    // this can emit finish, but finish must
    // always follow error
    finishMaybe(stream, state);
  }
}

function onwriteStateUpdate(state) {
  state.writing = false;
  state.writecb = null;
  state.length -= state.writelen;
  state.writelen = 0;
}

function onwrite(stream, er) {
  var state = stream._writableState;
  var sync = state.sync;
  var cb = state.writecb;

  onwriteStateUpdate(state);

  if (er) onwriteError(stream, state, sync, er, cb);else {
    // Check if we're actually ready to finish, but don't emit yet
    var finished = needFinish(state);

    if (!finished && !state.corked && !state.bufferProcessing && state.bufferedRequest) {
      clearBuffer(stream, state);
    }

    if (sync) {
      /*<replacement>*/
      asyncWrite(afterWrite, stream, state, finished, cb);
      /*</replacement>*/
    } else {
      afterWrite(stream, state, finished, cb);
    }
  }
}

function afterWrite(stream, state, finished, cb) {
  if (!finished) onwriteDrain(stream, state);
  state.pendingcb--;
  cb();
  finishMaybe(stream, state);
}

// Must force callback to be called on nextTick, so that we don't
// emit 'drain' before the write() consumer gets the 'false' return
// value, and has a chance to attach a 'drain' listener.
function onwriteDrain(stream, state) {
  if (state.length === 0 && state.needDrain) {
    state.needDrain = false;
    stream.emit('drain');
  }
}

// if there's something in the buffer waiting, then process it
function clearBuffer(stream, state) {
  state.bufferProcessing = true;
  var entry = state.bufferedRequest;

  if (stream._writev && entry && entry.next) {
    // Fast case, write everything using _writev()
    var l = state.bufferedRequestCount;
    var buffer = new Array(l);
    var holder = state.corkedRequestsFree;
    holder.entry = entry;

    var count = 0;
    var allBuffers = true;
    while (entry) {
      buffer[count] = entry;
      if (!entry.isBuf) allBuffers = false;
      entry = entry.next;
      count += 1;
    }
    buffer.allBuffers = allBuffers;

    doWrite(stream, state, true, state.length, buffer, '', holder.finish);

    // doWrite is almost always async, defer these to save a bit of time
    // as the hot path ends with doWrite
    state.pendingcb++;
    state.lastBufferedRequest = null;
    if (holder.next) {
      state.corkedRequestsFree = holder.next;
      holder.next = null;
    } else {
      state.corkedRequestsFree = new CorkedRequest(state);
    }
    state.bufferedRequestCount = 0;
  } else {
    // Slow case, write chunks one-by-one
    while (entry) {
      var chunk = entry.chunk;
      var encoding = entry.encoding;
      var cb = entry.callback;
      var len = state.objectMode ? 1 : chunk.length;

      doWrite(stream, state, false, len, chunk, encoding, cb);
      entry = entry.next;
      state.bufferedRequestCount--;
      // if we didn't call the onwrite immediately, then
      // it means that we need to wait until it does.
      // also, that means that the chunk and cb are currently
      // being processed, so move the buffer counter past them.
      if (state.writing) {
        break;
      }
    }

    if (entry === null) state.lastBufferedRequest = null;
  }

  state.bufferedRequest = entry;
  state.bufferProcessing = false;
}

Writable.prototype._write = function (chunk, encoding, cb) {
  cb(new Error('_write() is not implemented'));
};

Writable.prototype._writev = null;

Writable.prototype.end = function (chunk, encoding, cb) {
  var state = this._writableState;

  if (typeof chunk === 'function') {
    cb = chunk;
    chunk = null;
    encoding = null;
  } else if (typeof encoding === 'function') {
    cb = encoding;
    encoding = null;
  }

  if (chunk !== null && chunk !== undefined) this.write(chunk, encoding);

  // .end() fully uncorks
  if (state.corked) {
    state.corked = 1;
    this.uncork();
  }

  // ignore unnecessary end() calls.
  if (!state.ending && !state.finished) endWritable(this, state, cb);
};

function needFinish(state) {
  return state.ending && state.length === 0 && state.bufferedRequest === null && !state.finished && !state.writing;
}
function callFinal(stream, state) {
  stream._final(function (err) {
    state.pendingcb--;
    if (err) {
      stream.emit('error', err);
    }
    state.prefinished = true;
    stream.emit('prefinish');
    finishMaybe(stream, state);
  });
}
function prefinish(stream, state) {
  if (!state.prefinished && !state.finalCalled) {
    if (typeof stream._final === 'function') {
      state.pendingcb++;
      state.finalCalled = true;
      pna.nextTick(callFinal, stream, state);
    } else {
      state.prefinished = true;
      stream.emit('prefinish');
    }
  }
}

function finishMaybe(stream, state) {
  var need = needFinish(state);
  if (need) {
    prefinish(stream, state);
    if (state.pendingcb === 0) {
      state.finished = true;
      stream.emit('finish');
    }
  }
  return need;
}

function endWritable(stream, state, cb) {
  state.ending = true;
  finishMaybe(stream, state);
  if (cb) {
    if (state.finished) pna.nextTick(cb);else stream.once('finish', cb);
  }
  state.ended = true;
  stream.writable = false;
}

function onCorkedFinish(corkReq, state, err) {
  var entry = corkReq.entry;
  corkReq.entry = null;
  while (entry) {
    var cb = entry.callback;
    state.pendingcb--;
    cb(err);
    entry = entry.next;
  }
  if (state.corkedRequestsFree) {
    state.corkedRequestsFree.next = corkReq;
  } else {
    state.corkedRequestsFree = corkReq;
  }
}

Object.defineProperty(Writable.prototype, 'destroyed', {
  get: function () {
    if (this._writableState === undefined) {
      return false;
    }
    return this._writableState.destroyed;
  },
  set: function (value) {
    // we ignore the value if the stream
    // has not been initialized yet
    if (!this._writableState) {
      return;
    }

    // backward compatibility, the user is explicitly
    // managing destroyed
    this._writableState.destroyed = value;
  }
});

Writable.prototype.destroy = destroyImpl.destroy;
Writable.prototype._undestroy = destroyImpl.undestroy;
Writable.prototype._destroy = function (err, cb) {
  this.end();
  cb(err);
};
/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__(/*! ./../../process/browser.js */ "./node_modules/process/browser.js"), __webpack_require__(/*! ./../../timers-browserify/main.js */ "./node_modules/timers-browserify/main.js").setImmediate, __webpack_require__(/*! ./../../webpack/buildin/global.js */ "./node_modules/webpack/buildin/global.js")))

/***/ }),

/***/ "./node_modules/readable-stream/lib/internal/streams/BufferList.js":
/*!*************************************************************************!*\
  !*** ./node_modules/readable-stream/lib/internal/streams/BufferList.js ***!
  \*************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

var Buffer = __webpack_require__(/*! safe-buffer */ "./node_modules/safe-buffer/index.js").Buffer;
var util = __webpack_require__(/*! util */ 1);

function copyBuffer(src, target, offset) {
  src.copy(target, offset);
}

module.exports = function () {
  function BufferList() {
    _classCallCheck(this, BufferList);

    this.head = null;
    this.tail = null;
    this.length = 0;
  }

  BufferList.prototype.push = function push(v) {
    var entry = { data: v, next: null };
    if (this.length > 0) this.tail.next = entry;else this.head = entry;
    this.tail = entry;
    ++this.length;
  };

  BufferList.prototype.unshift = function unshift(v) {
    var entry = { data: v, next: this.head };
    if (this.length === 0) this.tail = entry;
    this.head = entry;
    ++this.length;
  };

  BufferList.prototype.shift = function shift() {
    if (this.length === 0) return;
    var ret = this.head.data;
    if (this.length === 1) this.head = this.tail = null;else this.head = this.head.next;
    --this.length;
    return ret;
  };

  BufferList.prototype.clear = function clear() {
    this.head = this.tail = null;
    this.length = 0;
  };

  BufferList.prototype.join = function join(s) {
    if (this.length === 0) return '';
    var p = this.head;
    var ret = '' + p.data;
    while (p = p.next) {
      ret += s + p.data;
    }return ret;
  };

  BufferList.prototype.concat = function concat(n) {
    if (this.length === 0) return Buffer.alloc(0);
    if (this.length === 1) return this.head.data;
    var ret = Buffer.allocUnsafe(n >>> 0);
    var p = this.head;
    var i = 0;
    while (p) {
      copyBuffer(p.data, ret, i);
      i += p.data.length;
      p = p.next;
    }
    return ret;
  };

  return BufferList;
}();

if (util && util.inspect && util.inspect.custom) {
  module.exports.prototype[util.inspect.custom] = function () {
    var obj = util.inspect({ length: this.length });
    return this.constructor.name + ' ' + obj;
  };
}

/***/ }),

/***/ "./node_modules/readable-stream/lib/internal/streams/destroy.js":
/*!**********************************************************************!*\
  !*** ./node_modules/readable-stream/lib/internal/streams/destroy.js ***!
  \**********************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


/*<replacement>*/

var pna = __webpack_require__(/*! process-nextick-args */ "./node_modules/process-nextick-args/index.js");
/*</replacement>*/

// undocumented cb() API, needed for core, not for public API
function destroy(err, cb) {
  var _this = this;

  var readableDestroyed = this._readableState && this._readableState.destroyed;
  var writableDestroyed = this._writableState && this._writableState.destroyed;

  if (readableDestroyed || writableDestroyed) {
    if (cb) {
      cb(err);
    } else if (err && (!this._writableState || !this._writableState.errorEmitted)) {
      pna.nextTick(emitErrorNT, this, err);
    }
    return this;
  }

  // we set destroyed to true before firing error callbacks in order
  // to make it re-entrance safe in case destroy() is called within callbacks

  if (this._readableState) {
    this._readableState.destroyed = true;
  }

  // if this is a duplex stream mark the writable part as destroyed as well
  if (this._writableState) {
    this._writableState.destroyed = true;
  }

  this._destroy(err || null, function (err) {
    if (!cb && err) {
      pna.nextTick(emitErrorNT, _this, err);
      if (_this._writableState) {
        _this._writableState.errorEmitted = true;
      }
    } else if (cb) {
      cb(err);
    }
  });

  return this;
}

function undestroy() {
  if (this._readableState) {
    this._readableState.destroyed = false;
    this._readableState.reading = false;
    this._readableState.ended = false;
    this._readableState.endEmitted = false;
  }

  if (this._writableState) {
    this._writableState.destroyed = false;
    this._writableState.ended = false;
    this._writableState.ending = false;
    this._writableState.finished = false;
    this._writableState.errorEmitted = false;
  }
}

function emitErrorNT(self, err) {
  self.emit('error', err);
}

module.exports = {
  destroy: destroy,
  undestroy: undestroy
};

/***/ }),

/***/ "./node_modules/readable-stream/lib/internal/streams/stream-browser.js":
/*!*****************************************************************************!*\
  !*** ./node_modules/readable-stream/lib/internal/streams/stream-browser.js ***!
  \*****************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

module.exports = __webpack_require__(/*! events */ "./node_modules/events/events.js").EventEmitter;


/***/ }),

/***/ "./node_modules/readable-stream/passthrough.js":
/*!*****************************************************!*\
  !*** ./node_modules/readable-stream/passthrough.js ***!
  \*****************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

module.exports = __webpack_require__(/*! ./readable */ "./node_modules/readable-stream/readable-browser.js").PassThrough


/***/ }),

/***/ "./node_modules/readable-stream/readable-browser.js":
/*!**********************************************************!*\
  !*** ./node_modules/readable-stream/readable-browser.js ***!
  \**********************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

exports = module.exports = __webpack_require__(/*! ./lib/_stream_readable.js */ "./node_modules/readable-stream/lib/_stream_readable.js");
exports.Stream = exports;
exports.Readable = exports;
exports.Writable = __webpack_require__(/*! ./lib/_stream_writable.js */ "./node_modules/readable-stream/lib/_stream_writable.js");
exports.Duplex = __webpack_require__(/*! ./lib/_stream_duplex.js */ "./node_modules/readable-stream/lib/_stream_duplex.js");
exports.Transform = __webpack_require__(/*! ./lib/_stream_transform.js */ "./node_modules/readable-stream/lib/_stream_transform.js");
exports.PassThrough = __webpack_require__(/*! ./lib/_stream_passthrough.js */ "./node_modules/readable-stream/lib/_stream_passthrough.js");


/***/ }),

/***/ "./node_modules/readable-stream/transform.js":
/*!***************************************************!*\
  !*** ./node_modules/readable-stream/transform.js ***!
  \***************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

module.exports = __webpack_require__(/*! ./readable */ "./node_modules/readable-stream/readable-browser.js").Transform


/***/ }),

/***/ "./node_modules/readable-stream/writable-browser.js":
/*!**********************************************************!*\
  !*** ./node_modules/readable-stream/writable-browser.js ***!
  \**********************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

module.exports = __webpack_require__(/*! ./lib/_stream_writable.js */ "./node_modules/readable-stream/lib/_stream_writable.js");


/***/ }),

/***/ "./node_modules/safe-buffer/index.js":
/*!*******************************************!*\
  !*** ./node_modules/safe-buffer/index.js ***!
  \*******************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

/* eslint-disable node/no-deprecated-api */
var buffer = __webpack_require__(/*! buffer */ "./node_modules/buffer/index.js")
var Buffer = buffer.Buffer

// alternative to using Object.keys for old browsers
function copyProps (src, dst) {
  for (var key in src) {
    dst[key] = src[key]
  }
}
if (Buffer.from && Buffer.alloc && Buffer.allocUnsafe && Buffer.allocUnsafeSlow) {
  module.exports = buffer
} else {
  // Copy properties from require('buffer')
  copyProps(buffer, exports)
  exports.Buffer = SafeBuffer
}

function SafeBuffer (arg, encodingOrOffset, length) {
  return Buffer(arg, encodingOrOffset, length)
}

// Copy static methods from Buffer
copyProps(Buffer, SafeBuffer)

SafeBuffer.from = function (arg, encodingOrOffset, length) {
  if (typeof arg === 'number') {
    throw new TypeError('Argument must not be a number')
  }
  return Buffer(arg, encodingOrOffset, length)
}

SafeBuffer.alloc = function (size, fill, encoding) {
  if (typeof size !== 'number') {
    throw new TypeError('Argument must be a number')
  }
  var buf = Buffer(size)
  if (fill !== undefined) {
    if (typeof encoding === 'string') {
      buf.fill(fill, encoding)
    } else {
      buf.fill(fill)
    }
  } else {
    buf.fill(0)
  }
  return buf
}

SafeBuffer.allocUnsafe = function (size) {
  if (typeof size !== 'number') {
    throw new TypeError('Argument must be a number')
  }
  return Buffer(size)
}

SafeBuffer.allocUnsafeSlow = function (size) {
  if (typeof size !== 'number') {
    throw new TypeError('Argument must be a number')
  }
  return buffer.SlowBuffer(size)
}


/***/ }),

/***/ "./node_modules/sax/lib/sax.js":
/*!*************************************!*\
  !*** ./node_modules/sax/lib/sax.js ***!
  \*************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

/* WEBPACK VAR INJECTION */(function(Buffer) {;(function (sax) { // wrapper for non-node envs
  sax.parser = function (strict, opt) { return new SAXParser(strict, opt) }
  sax.SAXParser = SAXParser
  sax.SAXStream = SAXStream
  sax.createStream = createStream

  // When we pass the MAX_BUFFER_LENGTH position, start checking for buffer overruns.
  // When we check, schedule the next check for MAX_BUFFER_LENGTH - (max(buffer lengths)),
  // since that's the earliest that a buffer overrun could occur.  This way, checks are
  // as rare as required, but as often as necessary to ensure never crossing this bound.
  // Furthermore, buffers are only tested at most once per write(), so passing a very
  // large string into write() might have undesirable effects, but this is manageable by
  // the caller, so it is assumed to be safe.  Thus, a call to write() may, in the extreme
  // edge case, result in creating at most one complete copy of the string passed in.
  // Set to Infinity to have unlimited buffers.
  sax.MAX_BUFFER_LENGTH = 64 * 1024

  var buffers = [
    'comment', 'sgmlDecl', 'textNode', 'tagName', 'doctype',
    'procInstName', 'procInstBody', 'entity', 'attribName',
    'attribValue', 'cdata', 'script'
  ]

  sax.EVENTS = [
    'text',
    'processinginstruction',
    'sgmldeclaration',
    'doctype',
    'comment',
    'opentagstart',
    'attribute',
    'opentag',
    'closetag',
    'opencdata',
    'cdata',
    'closecdata',
    'error',
    'end',
    'ready',
    'script',
    'opennamespace',
    'closenamespace'
  ]

  function SAXParser (strict, opt) {
    if (!(this instanceof SAXParser)) {
      return new SAXParser(strict, opt)
    }

    var parser = this
    clearBuffers(parser)
    parser.q = parser.c = ''
    parser.bufferCheckPosition = sax.MAX_BUFFER_LENGTH
    parser.opt = opt || {}
    parser.opt.lowercase = parser.opt.lowercase || parser.opt.lowercasetags
    parser.looseCase = parser.opt.lowercase ? 'toLowerCase' : 'toUpperCase'
    parser.tags = []
    parser.closed = parser.closedRoot = parser.sawRoot = false
    parser.tag = parser.error = null
    parser.strict = !!strict
    parser.noscript = !!(strict || parser.opt.noscript)
    parser.state = S.BEGIN
    parser.strictEntities = parser.opt.strictEntities
    parser.ENTITIES = parser.strictEntities ? Object.create(sax.XML_ENTITIES) : Object.create(sax.ENTITIES)
    parser.attribList = []

    // namespaces form a prototype chain.
    // it always points at the current tag,
    // which protos to its parent tag.
    if (parser.opt.xmlns) {
      parser.ns = Object.create(rootNS)
    }

    // mostly just for error reporting
    parser.trackPosition = parser.opt.position !== false
    if (parser.trackPosition) {
      parser.position = parser.line = parser.column = 0
    }
    emit(parser, 'onready')
  }

  if (!Object.create) {
    Object.create = function (o) {
      function F () {}
      F.prototype = o
      var newf = new F()
      return newf
    }
  }

  if (!Object.keys) {
    Object.keys = function (o) {
      var a = []
      for (var i in o) if (o.hasOwnProperty(i)) a.push(i)
      return a
    }
  }

  function checkBufferLength (parser) {
    var maxAllowed = Math.max(sax.MAX_BUFFER_LENGTH, 10)
    var maxActual = 0
    for (var i = 0, l = buffers.length; i < l; i++) {
      var len = parser[buffers[i]].length
      if (len > maxAllowed) {
        // Text/cdata nodes can get big, and since they're buffered,
        // we can get here under normal conditions.
        // Avoid issues by emitting the text node now,
        // so at least it won't get any bigger.
        switch (buffers[i]) {
          case 'textNode':
            closeText(parser)
            break

          case 'cdata':
            emitNode(parser, 'oncdata', parser.cdata)
            parser.cdata = ''
            break

          case 'script':
            emitNode(parser, 'onscript', parser.script)
            parser.script = ''
            break

          default:
            error(parser, 'Max buffer length exceeded: ' + buffers[i])
        }
      }
      maxActual = Math.max(maxActual, len)
    }
    // schedule the next check for the earliest possible buffer overrun.
    var m = sax.MAX_BUFFER_LENGTH - maxActual
    parser.bufferCheckPosition = m + parser.position
  }

  function clearBuffers (parser) {
    for (var i = 0, l = buffers.length; i < l; i++) {
      parser[buffers[i]] = ''
    }
  }

  function flushBuffers (parser) {
    closeText(parser)
    if (parser.cdata !== '') {
      emitNode(parser, 'oncdata', parser.cdata)
      parser.cdata = ''
    }
    if (parser.script !== '') {
      emitNode(parser, 'onscript', parser.script)
      parser.script = ''
    }
  }

  SAXParser.prototype = {
    end: function () { end(this) },
    write: write,
    resume: function () { this.error = null; return this },
    close: function () { return this.write(null) },
    flush: function () { flushBuffers(this) }
  }

  var Stream
  try {
    Stream = __webpack_require__(/*! stream */ "./node_modules/stream-browserify/index.js").Stream
  } catch (ex) {
    Stream = function () {}
  }

  var streamWraps = sax.EVENTS.filter(function (ev) {
    return ev !== 'error' && ev !== 'end'
  })

  function createStream (strict, opt) {
    return new SAXStream(strict, opt)
  }

  function SAXStream (strict, opt) {
    if (!(this instanceof SAXStream)) {
      return new SAXStream(strict, opt)
    }

    Stream.apply(this)

    this._parser = new SAXParser(strict, opt)
    this.writable = true
    this.readable = true

    var me = this

    this._parser.onend = function () {
      me.emit('end')
    }

    this._parser.onerror = function (er) {
      me.emit('error', er)

      // if didn't throw, then means error was handled.
      // go ahead and clear error, so we can write again.
      me._parser.error = null
    }

    this._decoder = null

    streamWraps.forEach(function (ev) {
      Object.defineProperty(me, 'on' + ev, {
        get: function () {
          return me._parser['on' + ev]
        },
        set: function (h) {
          if (!h) {
            me.removeAllListeners(ev)
            me._parser['on' + ev] = h
            return h
          }
          me.on(ev, h)
        },
        enumerable: true,
        configurable: false
      })
    })
  }

  SAXStream.prototype = Object.create(Stream.prototype, {
    constructor: {
      value: SAXStream
    }
  })

  SAXStream.prototype.write = function (data) {
    if (typeof Buffer === 'function' &&
      typeof Buffer.isBuffer === 'function' &&
      Buffer.isBuffer(data)) {
      if (!this._decoder) {
        var SD = __webpack_require__(/*! string_decoder */ "./node_modules/string_decoder/lib/string_decoder.js").StringDecoder
        this._decoder = new SD('utf8')
      }
      data = this._decoder.write(data)
    }

    this._parser.write(data.toString())
    this.emit('data', data)
    return true
  }

  SAXStream.prototype.end = function (chunk) {
    if (chunk && chunk.length) {
      this.write(chunk)
    }
    this._parser.end()
    return true
  }

  SAXStream.prototype.on = function (ev, handler) {
    var me = this
    if (!me._parser['on' + ev] && streamWraps.indexOf(ev) !== -1) {
      me._parser['on' + ev] = function () {
        var args = arguments.length === 1 ? [arguments[0]] : Array.apply(null, arguments)
        args.splice(0, 0, ev)
        me.emit.apply(me, args)
      }
    }

    return Stream.prototype.on.call(me, ev, handler)
  }

  // this really needs to be replaced with character classes.
  // XML allows all manner of ridiculous numbers and digits.
  var CDATA = '[CDATA['
  var DOCTYPE = 'DOCTYPE'
  var XML_NAMESPACE = 'http://www.w3.org/XML/1998/namespace'
  var XMLNS_NAMESPACE = 'http://www.w3.org/2000/xmlns/'
  var rootNS = { xml: XML_NAMESPACE, xmlns: XMLNS_NAMESPACE }

  // http://www.w3.org/TR/REC-xml/#NT-NameStartChar
  // This implementation works on strings, a single character at a time
  // as such, it cannot ever support astral-plane characters (10000-EFFFF)
  // without a significant breaking change to either this  parser, or the
  // JavaScript language.  Implementation of an emoji-capable xml parser
  // is left as an exercise for the reader.
  var nameStart = /[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/

  var nameBody = /[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040.\d-]/

  var entityStart = /[#:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/
  var entityBody = /[#:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040.\d-]/

  function isWhitespace (c) {
    return c === ' ' || c === '\n' || c === '\r' || c === '\t'
  }

  function isQuote (c) {
    return c === '"' || c === '\''
  }

  function isAttribEnd (c) {
    return c === '>' || isWhitespace(c)
  }

  function isMatch (regex, c) {
    return regex.test(c)
  }

  function notMatch (regex, c) {
    return !isMatch(regex, c)
  }

  var S = 0
  sax.STATE = {
    BEGIN: S++, // leading byte order mark or whitespace
    BEGIN_WHITESPACE: S++, // leading whitespace
    TEXT: S++, // general stuff
    TEXT_ENTITY: S++, // &amp and such.
    OPEN_WAKA: S++, // <
    SGML_DECL: S++, // <!BLARG
    SGML_DECL_QUOTED: S++, // <!BLARG foo "bar
    DOCTYPE: S++, // <!DOCTYPE
    DOCTYPE_QUOTED: S++, // <!DOCTYPE "//blah
    DOCTYPE_DTD: S++, // <!DOCTYPE "//blah" [ ...
    DOCTYPE_DTD_QUOTED: S++, // <!DOCTYPE "//blah" [ "foo
    COMMENT_STARTING: S++, // <!-
    COMMENT: S++, // <!--
    COMMENT_ENDING: S++, // <!-- blah -
    COMMENT_ENDED: S++, // <!-- blah --
    CDATA: S++, // <![CDATA[ something
    CDATA_ENDING: S++, // ]
    CDATA_ENDING_2: S++, // ]]
    PROC_INST: S++, // <?hi
    PROC_INST_BODY: S++, // <?hi there
    PROC_INST_ENDING: S++, // <?hi "there" ?
    OPEN_TAG: S++, // <strong
    OPEN_TAG_SLASH: S++, // <strong /
    ATTRIB: S++, // <a
    ATTRIB_NAME: S++, // <a foo
    ATTRIB_NAME_SAW_WHITE: S++, // <a foo _
    ATTRIB_VALUE: S++, // <a foo=
    ATTRIB_VALUE_QUOTED: S++, // <a foo="bar
    ATTRIB_VALUE_CLOSED: S++, // <a foo="bar"
    ATTRIB_VALUE_UNQUOTED: S++, // <a foo=bar
    ATTRIB_VALUE_ENTITY_Q: S++, // <foo bar="&quot;"
    ATTRIB_VALUE_ENTITY_U: S++, // <foo bar=&quot
    CLOSE_TAG: S++, // </a
    CLOSE_TAG_SAW_WHITE: S++, // </a   >
    SCRIPT: S++, // <script> ...
    SCRIPT_ENDING: S++ // <script> ... <
  }

  sax.XML_ENTITIES = {
    'amp': '&',
    'gt': '>',
    'lt': '<',
    'quot': '"',
    'apos': "'"
  }

  sax.ENTITIES = {
    'amp': '&',
    'gt': '>',
    'lt': '<',
    'quot': '"',
    'apos': "'",
    'AElig': 198,
    'Aacute': 193,
    'Acirc': 194,
    'Agrave': 192,
    'Aring': 197,
    'Atilde': 195,
    'Auml': 196,
    'Ccedil': 199,
    'ETH': 208,
    'Eacute': 201,
    'Ecirc': 202,
    'Egrave': 200,
    'Euml': 203,
    'Iacute': 205,
    'Icirc': 206,
    'Igrave': 204,
    'Iuml': 207,
    'Ntilde': 209,
    'Oacute': 211,
    'Ocirc': 212,
    'Ograve': 210,
    'Oslash': 216,
    'Otilde': 213,
    'Ouml': 214,
    'THORN': 222,
    'Uacute': 218,
    'Ucirc': 219,
    'Ugrave': 217,
    'Uuml': 220,
    'Yacute': 221,
    'aacute': 225,
    'acirc': 226,
    'aelig': 230,
    'agrave': 224,
    'aring': 229,
    'atilde': 227,
    'auml': 228,
    'ccedil': 231,
    'eacute': 233,
    'ecirc': 234,
    'egrave': 232,
    'eth': 240,
    'euml': 235,
    'iacute': 237,
    'icirc': 238,
    'igrave': 236,
    'iuml': 239,
    'ntilde': 241,
    'oacute': 243,
    'ocirc': 244,
    'ograve': 242,
    'oslash': 248,
    'otilde': 245,
    'ouml': 246,
    'szlig': 223,
    'thorn': 254,
    'uacute': 250,
    'ucirc': 251,
    'ugrave': 249,
    'uuml': 252,
    'yacute': 253,
    'yuml': 255,
    'copy': 169,
    'reg': 174,
    'nbsp': 160,
    'iexcl': 161,
    'cent': 162,
    'pound': 163,
    'curren': 164,
    'yen': 165,
    'brvbar': 166,
    'sect': 167,
    'uml': 168,
    'ordf': 170,
    'laquo': 171,
    'not': 172,
    'shy': 173,
    'macr': 175,
    'deg': 176,
    'plusmn': 177,
    'sup1': 185,
    'sup2': 178,
    'sup3': 179,
    'acute': 180,
    'micro': 181,
    'para': 182,
    'middot': 183,
    'cedil': 184,
    'ordm': 186,
    'raquo': 187,
    'frac14': 188,
    'frac12': 189,
    'frac34': 190,
    'iquest': 191,
    'times': 215,
    'divide': 247,
    'OElig': 338,
    'oelig': 339,
    'Scaron': 352,
    'scaron': 353,
    'Yuml': 376,
    'fnof': 402,
    'circ': 710,
    'tilde': 732,
    'Alpha': 913,
    'Beta': 914,
    'Gamma': 915,
    'Delta': 916,
    'Epsilon': 917,
    'Zeta': 918,
    'Eta': 919,
    'Theta': 920,
    'Iota': 921,
    'Kappa': 922,
    'Lambda': 923,
    'Mu': 924,
    'Nu': 925,
    'Xi': 926,
    'Omicron': 927,
    'Pi': 928,
    'Rho': 929,
    'Sigma': 931,
    'Tau': 932,
    'Upsilon': 933,
    'Phi': 934,
    'Chi': 935,
    'Psi': 936,
    'Omega': 937,
    'alpha': 945,
    'beta': 946,
    'gamma': 947,
    'delta': 948,
    'epsilon': 949,
    'zeta': 950,
    'eta': 951,
    'theta': 952,
    'iota': 953,
    'kappa': 954,
    'lambda': 955,
    'mu': 956,
    'nu': 957,
    'xi': 958,
    'omicron': 959,
    'pi': 960,
    'rho': 961,
    'sigmaf': 962,
    'sigma': 963,
    'tau': 964,
    'upsilon': 965,
    'phi': 966,
    'chi': 967,
    'psi': 968,
    'omega': 969,
    'thetasym': 977,
    'upsih': 978,
    'piv': 982,
    'ensp': 8194,
    'emsp': 8195,
    'thinsp': 8201,
    'zwnj': 8204,
    'zwj': 8205,
    'lrm': 8206,
    'rlm': 8207,
    'ndash': 8211,
    'mdash': 8212,
    'lsquo': 8216,
    'rsquo': 8217,
    'sbquo': 8218,
    'ldquo': 8220,
    'rdquo': 8221,
    'bdquo': 8222,
    'dagger': 8224,
    'Dagger': 8225,
    'bull': 8226,
    'hellip': 8230,
    'permil': 8240,
    'prime': 8242,
    'Prime': 8243,
    'lsaquo': 8249,
    'rsaquo': 8250,
    'oline': 8254,
    'frasl': 8260,
    'euro': 8364,
    'image': 8465,
    'weierp': 8472,
    'real': 8476,
    'trade': 8482,
    'alefsym': 8501,
    'larr': 8592,
    'uarr': 8593,
    'rarr': 8594,
    'darr': 8595,
    'harr': 8596,
    'crarr': 8629,
    'lArr': 8656,
    'uArr': 8657,
    'rArr': 8658,
    'dArr': 8659,
    'hArr': 8660,
    'forall': 8704,
    'part': 8706,
    'exist': 8707,
    'empty': 8709,
    'nabla': 8711,
    'isin': 8712,
    'notin': 8713,
    'ni': 8715,
    'prod': 8719,
    'sum': 8721,
    'minus': 8722,
    'lowast': 8727,
    'radic': 8730,
    'prop': 8733,
    'infin': 8734,
    'ang': 8736,
    'and': 8743,
    'or': 8744,
    'cap': 8745,
    'cup': 8746,
    'int': 8747,
    'there4': 8756,
    'sim': 8764,
    'cong': 8773,
    'asymp': 8776,
    'ne': 8800,
    'equiv': 8801,
    'le': 8804,
    'ge': 8805,
    'sub': 8834,
    'sup': 8835,
    'nsub': 8836,
    'sube': 8838,
    'supe': 8839,
    'oplus': 8853,
    'otimes': 8855,
    'perp': 8869,
    'sdot': 8901,
    'lceil': 8968,
    'rceil': 8969,
    'lfloor': 8970,
    'rfloor': 8971,
    'lang': 9001,
    'rang': 9002,
    'loz': 9674,
    'spades': 9824,
    'clubs': 9827,
    'hearts': 9829,
    'diams': 9830
  }

  Object.keys(sax.ENTITIES).forEach(function (key) {
    var e = sax.ENTITIES[key]
    var s = typeof e === 'number' ? String.fromCharCode(e) : e
    sax.ENTITIES[key] = s
  })

  for (var s in sax.STATE) {
    sax.STATE[sax.STATE[s]] = s
  }

  // shorthand
  S = sax.STATE

  function emit (parser, event, data) {
    parser[event] && parser[event](data)
  }

  function emitNode (parser, nodeType, data) {
    if (parser.textNode) closeText(parser)
    emit(parser, nodeType, data)
  }

  function closeText (parser) {
    parser.textNode = textopts(parser.opt, parser.textNode)
    if (parser.textNode) emit(parser, 'ontext', parser.textNode)
    parser.textNode = ''
  }

  function textopts (opt, text) {
    if (opt.trim) text = text.trim()
    if (opt.normalize) text = text.replace(/\s+/g, ' ')
    return text
  }

  function error (parser, er) {
    closeText(parser)
    if (parser.trackPosition) {
      er += '\nLine: ' + parser.line +
        '\nColumn: ' + parser.column +
        '\nChar: ' + parser.c
    }
    er = new Error(er)
    parser.error = er
    emit(parser, 'onerror', er)
    return parser
  }

  function end (parser) {
    if (parser.sawRoot && !parser.closedRoot) strictFail(parser, 'Unclosed root tag')
    if ((parser.state !== S.BEGIN) &&
      (parser.state !== S.BEGIN_WHITESPACE) &&
      (parser.state !== S.TEXT)) {
      error(parser, 'Unexpected end')
    }
    closeText(parser)
    parser.c = ''
    parser.closed = true
    emit(parser, 'onend')
    SAXParser.call(parser, parser.strict, parser.opt)
    return parser
  }

  function strictFail (parser, message) {
    if (typeof parser !== 'object' || !(parser instanceof SAXParser)) {
      throw new Error('bad call to strictFail')
    }
    if (parser.strict) {
      error(parser, message)
    }
  }

  function newTag (parser) {
    if (!parser.strict) parser.tagName = parser.tagName[parser.looseCase]()
    var parent = parser.tags[parser.tags.length - 1] || parser
    var tag = parser.tag = { name: parser.tagName, attributes: {} }

    // will be overridden if tag contails an xmlns="foo" or xmlns:foo="bar"
    if (parser.opt.xmlns) {
      tag.ns = parent.ns
    }
    parser.attribList.length = 0
    emitNode(parser, 'onopentagstart', tag)
  }

  function qname (name, attribute) {
    var i = name.indexOf(':')
    var qualName = i < 0 ? [ '', name ] : name.split(':')
    var prefix = qualName[0]
    var local = qualName[1]

    // <x "xmlns"="http://foo">
    if (attribute && name === 'xmlns') {
      prefix = 'xmlns'
      local = ''
    }

    return { prefix: prefix, local: local }
  }

  function attrib (parser) {
    if (!parser.strict) {
      parser.attribName = parser.attribName[parser.looseCase]()
    }

    if (parser.attribList.indexOf(parser.attribName) !== -1 ||
      parser.tag.attributes.hasOwnProperty(parser.attribName)) {
      parser.attribName = parser.attribValue = ''
      return
    }

    if (parser.opt.xmlns) {
      var qn = qname(parser.attribName, true)
      var prefix = qn.prefix
      var local = qn.local

      if (prefix === 'xmlns') {
        // namespace binding attribute. push the binding into scope
        if (local === 'xml' && parser.attribValue !== XML_NAMESPACE) {
          strictFail(parser,
            'xml: prefix must be bound to ' + XML_NAMESPACE + '\n' +
            'Actual: ' + parser.attribValue)
        } else if (local === 'xmlns' && parser.attribValue !== XMLNS_NAMESPACE) {
          strictFail(parser,
            'xmlns: prefix must be bound to ' + XMLNS_NAMESPACE + '\n' +
            'Actual: ' + parser.attribValue)
        } else {
          var tag = parser.tag
          var parent = parser.tags[parser.tags.length - 1] || parser
          if (tag.ns === parent.ns) {
            tag.ns = Object.create(parent.ns)
          }
          tag.ns[local] = parser.attribValue
        }
      }

      // defer onattribute events until all attributes have been seen
      // so any new bindings can take effect. preserve attribute order
      // so deferred events can be emitted in document order
      parser.attribList.push([parser.attribName, parser.attribValue])
    } else {
      // in non-xmlns mode, we can emit the event right away
      parser.tag.attributes[parser.attribName] = parser.attribValue
      emitNode(parser, 'onattribute', {
        name: parser.attribName,
        value: parser.attribValue
      })
    }

    parser.attribName = parser.attribValue = ''
  }

  function openTag (parser, selfClosing) {
    if (parser.opt.xmlns) {
      // emit namespace binding events
      var tag = parser.tag

      // add namespace info to tag
      var qn = qname(parser.tagName)
      tag.prefix = qn.prefix
      tag.local = qn.local
      tag.uri = tag.ns[qn.prefix] || ''

      if (tag.prefix && !tag.uri) {
        strictFail(parser, 'Unbound namespace prefix: ' +
          JSON.stringify(parser.tagName))
        tag.uri = qn.prefix
      }

      var parent = parser.tags[parser.tags.length - 1] || parser
      if (tag.ns && parent.ns !== tag.ns) {
        Object.keys(tag.ns).forEach(function (p) {
          emitNode(parser, 'onopennamespace', {
            prefix: p,
            uri: tag.ns[p]
          })
        })
      }

      // handle deferred onattribute events
      // Note: do not apply default ns to attributes:
      //   http://www.w3.org/TR/REC-xml-names/#defaulting
      for (var i = 0, l = parser.attribList.length; i < l; i++) {
        var nv = parser.attribList[i]
        var name = nv[0]
        var value = nv[1]
        var qualName = qname(name, true)
        var prefix = qualName.prefix
        var local = qualName.local
        var uri = prefix === '' ? '' : (tag.ns[prefix] || '')
        var a = {
          name: name,
          value: value,
          prefix: prefix,
          local: local,
          uri: uri
        }

        // if there's any attributes with an undefined namespace,
        // then fail on them now.
        if (prefix && prefix !== 'xmlns' && !uri) {
          strictFail(parser, 'Unbound namespace prefix: ' +
            JSON.stringify(prefix))
          a.uri = prefix
        }
        parser.tag.attributes[name] = a
        emitNode(parser, 'onattribute', a)
      }
      parser.attribList.length = 0
    }

    parser.tag.isSelfClosing = !!selfClosing

    // process the tag
    parser.sawRoot = true
    parser.tags.push(parser.tag)
    emitNode(parser, 'onopentag', parser.tag)
    if (!selfClosing) {
      // special case for <script> in non-strict mode.
      if (!parser.noscript && parser.tagName.toLowerCase() === 'script') {
        parser.state = S.SCRIPT
      } else {
        parser.state = S.TEXT
      }
      parser.tag = null
      parser.tagName = ''
    }
    parser.attribName = parser.attribValue = ''
    parser.attribList.length = 0
  }

  function closeTag (parser) {
    if (!parser.tagName) {
      strictFail(parser, 'Weird empty close tag.')
      parser.textNode += '</>'
      parser.state = S.TEXT
      return
    }

    if (parser.script) {
      if (parser.tagName !== 'script') {
        parser.script += '</' + parser.tagName + '>'
        parser.tagName = ''
        parser.state = S.SCRIPT
        return
      }
      emitNode(parser, 'onscript', parser.script)
      parser.script = ''
    }

    // first make sure that the closing tag actually exists.
    // <a><b></c></b></a> will close everything, otherwise.
    var t = parser.tags.length
    var tagName = parser.tagName
    if (!parser.strict) {
      tagName = tagName[parser.looseCase]()
    }
    var closeTo = tagName
    while (t--) {
      var close = parser.tags[t]
      if (close.name !== closeTo) {
        // fail the first time in strict mode
        strictFail(parser, 'Unexpected close tag')
      } else {
        break
      }
    }

    // didn't find it.  we already failed for strict, so just abort.
    if (t < 0) {
      strictFail(parser, 'Unmatched closing tag: ' + parser.tagName)
      parser.textNode += '</' + parser.tagName + '>'
      parser.state = S.TEXT
      return
    }
    parser.tagName = tagName
    var s = parser.tags.length
    while (s-- > t) {
      var tag = parser.tag = parser.tags.pop()
      parser.tagName = parser.tag.name
      emitNode(parser, 'onclosetag', parser.tagName)

      var x = {}
      for (var i in tag.ns) {
        x[i] = tag.ns[i]
      }

      var parent = parser.tags[parser.tags.length - 1] || parser
      if (parser.opt.xmlns && tag.ns !== parent.ns) {
        // remove namespace bindings introduced by tag
        Object.keys(tag.ns).forEach(function (p) {
          var n = tag.ns[p]
          emitNode(parser, 'onclosenamespace', { prefix: p, uri: n })
        })
      }
    }
    if (t === 0) parser.closedRoot = true
    parser.tagName = parser.attribValue = parser.attribName = ''
    parser.attribList.length = 0
    parser.state = S.TEXT
  }

  function parseEntity (parser) {
    var entity = parser.entity
    var entityLC = entity.toLowerCase()
    var num
    var numStr = ''

    if (parser.ENTITIES[entity]) {
      return parser.ENTITIES[entity]
    }
    if (parser.ENTITIES[entityLC]) {
      return parser.ENTITIES[entityLC]
    }
    entity = entityLC
    if (entity.charAt(0) === '#') {
      if (entity.charAt(1) === 'x') {
        entity = entity.slice(2)
        num = parseInt(entity, 16)
        numStr = num.toString(16)
      } else {
        entity = entity.slice(1)
        num = parseInt(entity, 10)
        numStr = num.toString(10)
      }
    }
    entity = entity.replace(/^0+/, '')
    if (isNaN(num) || numStr.toLowerCase() !== entity) {
      strictFail(parser, 'Invalid character entity')
      return '&' + parser.entity + ';'
    }

    return String.fromCodePoint(num)
  }

  function beginWhiteSpace (parser, c) {
    if (c === '<') {
      parser.state = S.OPEN_WAKA
      parser.startTagPosition = parser.position
    } else if (!isWhitespace(c)) {
      // have to process this as a text node.
      // weird, but happens.
      strictFail(parser, 'Non-whitespace before first tag.')
      parser.textNode = c
      parser.state = S.TEXT
    }
  }

  function charAt (chunk, i) {
    var result = ''
    if (i < chunk.length) {
      result = chunk.charAt(i)
    }
    return result
  }

  function write (chunk) {
    var parser = this
    if (this.error) {
      throw this.error
    }
    if (parser.closed) {
      return error(parser,
        'Cannot write after close. Assign an onready handler.')
    }
    if (chunk === null) {
      return end(parser)
    }
    if (typeof chunk === 'object') {
      chunk = chunk.toString()
    }
    var i = 0
    var c = ''
    while (true) {
      c = charAt(chunk, i++)
      parser.c = c

      if (!c) {
        break
      }

      if (parser.trackPosition) {
        parser.position++
        if (c === '\n') {
          parser.line++
          parser.column = 0
        } else {
          parser.column++
        }
      }

      switch (parser.state) {
        case S.BEGIN:
          parser.state = S.BEGIN_WHITESPACE
          if (c === '\uFEFF') {
            continue
          }
          beginWhiteSpace(parser, c)
          continue

        case S.BEGIN_WHITESPACE:
          beginWhiteSpace(parser, c)
          continue

        case S.TEXT:
          if (parser.sawRoot && !parser.closedRoot) {
            var starti = i - 1
            while (c && c !== '<' && c !== '&') {
              c = charAt(chunk, i++)
              if (c && parser.trackPosition) {
                parser.position++
                if (c === '\n') {
                  parser.line++
                  parser.column = 0
                } else {
                  parser.column++
                }
              }
            }
            parser.textNode += chunk.substring(starti, i - 1)
          }
          if (c === '<' && !(parser.sawRoot && parser.closedRoot && !parser.strict)) {
            parser.state = S.OPEN_WAKA
            parser.startTagPosition = parser.position
          } else {
            if (!isWhitespace(c) && (!parser.sawRoot || parser.closedRoot)) {
              strictFail(parser, 'Text data outside of root node.')
            }
            if (c === '&') {
              parser.state = S.TEXT_ENTITY
            } else {
              parser.textNode += c
            }
          }
          continue

        case S.SCRIPT:
          // only non-strict
          if (c === '<') {
            parser.state = S.SCRIPT_ENDING
          } else {
            parser.script += c
          }
          continue

        case S.SCRIPT_ENDING:
          if (c === '/') {
            parser.state = S.CLOSE_TAG
          } else {
            parser.script += '<' + c
            parser.state = S.SCRIPT
          }
          continue

        case S.OPEN_WAKA:
          // either a /, ?, !, or text is coming next.
          if (c === '!') {
            parser.state = S.SGML_DECL
            parser.sgmlDecl = ''
          } else if (isWhitespace(c)) {
            // wait for it...
          } else if (isMatch(nameStart, c)) {
            parser.state = S.OPEN_TAG
            parser.tagName = c
          } else if (c === '/') {
            parser.state = S.CLOSE_TAG
            parser.tagName = ''
          } else if (c === '?') {
            parser.state = S.PROC_INST
            parser.procInstName = parser.procInstBody = ''
          } else {
            strictFail(parser, 'Unencoded <')
            // if there was some whitespace, then add that in.
            if (parser.startTagPosition + 1 < parser.position) {
              var pad = parser.position - parser.startTagPosition
              c = new Array(pad).join(' ') + c
            }
            parser.textNode += '<' + c
            parser.state = S.TEXT
          }
          continue

        case S.SGML_DECL:
          if ((parser.sgmlDecl + c).toUpperCase() === CDATA) {
            emitNode(parser, 'onopencdata')
            parser.state = S.CDATA
            parser.sgmlDecl = ''
            parser.cdata = ''
          } else if (parser.sgmlDecl + c === '--') {
            parser.state = S.COMMENT
            parser.comment = ''
            parser.sgmlDecl = ''
          } else if ((parser.sgmlDecl + c).toUpperCase() === DOCTYPE) {
            parser.state = S.DOCTYPE
            if (parser.doctype || parser.sawRoot) {
              strictFail(parser,
                'Inappropriately located doctype declaration')
            }
            parser.doctype = ''
            parser.sgmlDecl = ''
          } else if (c === '>') {
            emitNode(parser, 'onsgmldeclaration', parser.sgmlDecl)
            parser.sgmlDecl = ''
            parser.state = S.TEXT
          } else if (isQuote(c)) {
            parser.state = S.SGML_DECL_QUOTED
            parser.sgmlDecl += c
          } else {
            parser.sgmlDecl += c
          }
          continue

        case S.SGML_DECL_QUOTED:
          if (c === parser.q) {
            parser.state = S.SGML_DECL
            parser.q = ''
          }
          parser.sgmlDecl += c
          continue

        case S.DOCTYPE:
          if (c === '>') {
            parser.state = S.TEXT
            emitNode(parser, 'ondoctype', parser.doctype)
            parser.doctype = true // just remember that we saw it.
          } else {
            parser.doctype += c
            if (c === '[') {
              parser.state = S.DOCTYPE_DTD
            } else if (isQuote(c)) {
              parser.state = S.DOCTYPE_QUOTED
              parser.q = c
            }
          }
          continue

        case S.DOCTYPE_QUOTED:
          parser.doctype += c
          if (c === parser.q) {
            parser.q = ''
            parser.state = S.DOCTYPE
          }
          continue

        case S.DOCTYPE_DTD:
          parser.doctype += c
          if (c === ']') {
            parser.state = S.DOCTYPE
          } else if (isQuote(c)) {
            parser.state = S.DOCTYPE_DTD_QUOTED
            parser.q = c
          }
          continue

        case S.DOCTYPE_DTD_QUOTED:
          parser.doctype += c
          if (c === parser.q) {
            parser.state = S.DOCTYPE_DTD
            parser.q = ''
          }
          continue

        case S.COMMENT:
          if (c === '-') {
            parser.state = S.COMMENT_ENDING
          } else {
            parser.comment += c
          }
          continue

        case S.COMMENT_ENDING:
          if (c === '-') {
            parser.state = S.COMMENT_ENDED
            parser.comment = textopts(parser.opt, parser.comment)
            if (parser.comment) {
              emitNode(parser, 'oncomment', parser.comment)
            }
            parser.comment = ''
          } else {
            parser.comment += '-' + c
            parser.state = S.COMMENT
          }
          continue

        case S.COMMENT_ENDED:
          if (c !== '>') {
            strictFail(parser, 'Malformed comment')
            // allow <!-- blah -- bloo --> in non-strict mode,
            // which is a comment of " blah -- bloo "
            parser.comment += '--' + c
            parser.state = S.COMMENT
          } else {
            parser.state = S.TEXT
          }
          continue

        case S.CDATA:
          if (c === ']') {
            parser.state = S.CDATA_ENDING
          } else {
            parser.cdata += c
          }
          continue

        case S.CDATA_ENDING:
          if (c === ']') {
            parser.state = S.CDATA_ENDING_2
          } else {
            parser.cdata += ']' + c
            parser.state = S.CDATA
          }
          continue

        case S.CDATA_ENDING_2:
          if (c === '>') {
            if (parser.cdata) {
              emitNode(parser, 'oncdata', parser.cdata)
            }
            emitNode(parser, 'onclosecdata')
            parser.cdata = ''
            parser.state = S.TEXT
          } else if (c === ']') {
            parser.cdata += ']'
          } else {
            parser.cdata += ']]' + c
            parser.state = S.CDATA
          }
          continue

        case S.PROC_INST:
          if (c === '?') {
            parser.state = S.PROC_INST_ENDING
          } else if (isWhitespace(c)) {
            parser.state = S.PROC_INST_BODY
          } else {
            parser.procInstName += c
          }
          continue

        case S.PROC_INST_BODY:
          if (!parser.procInstBody && isWhitespace(c)) {
            continue
          } else if (c === '?') {
            parser.state = S.PROC_INST_ENDING
          } else {
            parser.procInstBody += c
          }
          continue

        case S.PROC_INST_ENDING:
          if (c === '>') {
            emitNode(parser, 'onprocessinginstruction', {
              name: parser.procInstName,
              body: parser.procInstBody
            })
            parser.procInstName = parser.procInstBody = ''
            parser.state = S.TEXT
          } else {
            parser.procInstBody += '?' + c
            parser.state = S.PROC_INST_BODY
          }
          continue

        case S.OPEN_TAG:
          if (isMatch(nameBody, c)) {
            parser.tagName += c
          } else {
            newTag(parser)
            if (c === '>') {
              openTag(parser)
            } else if (c === '/') {
              parser.state = S.OPEN_TAG_SLASH
            } else {
              if (!isWhitespace(c)) {
                strictFail(parser, 'Invalid character in tag name')
              }
              parser.state = S.ATTRIB
            }
          }
          continue

        case S.OPEN_TAG_SLASH:
          if (c === '>') {
            openTag(parser, true)
            closeTag(parser)
          } else {
            strictFail(parser, 'Forward-slash in opening tag not followed by >')
            parser.state = S.ATTRIB
          }
          continue

        case S.ATTRIB:
          // haven't read the attribute name yet.
          if (isWhitespace(c)) {
            continue
          } else if (c === '>') {
            openTag(parser)
          } else if (c === '/') {
            parser.state = S.OPEN_TAG_SLASH
          } else if (isMatch(nameStart, c)) {
            parser.attribName = c
            parser.attribValue = ''
            parser.state = S.ATTRIB_NAME
          } else {
            strictFail(parser, 'Invalid attribute name')
          }
          continue

        case S.ATTRIB_NAME:
          if (c === '=') {
            parser.state = S.ATTRIB_VALUE
          } else if (c === '>') {
            strictFail(parser, 'Attribute without value')
            parser.attribValue = parser.attribName
            attrib(parser)
            openTag(parser)
          } else if (isWhitespace(c)) {
            parser.state = S.ATTRIB_NAME_SAW_WHITE
          } else if (isMatch(nameBody, c)) {
            parser.attribName += c
          } else {
            strictFail(parser, 'Invalid attribute name')
          }
          continue

        case S.ATTRIB_NAME_SAW_WHITE:
          if (c === '=') {
            parser.state = S.ATTRIB_VALUE
          } else if (isWhitespace(c)) {
            continue
          } else {
            strictFail(parser, 'Attribute without value')
            parser.tag.attributes[parser.attribName] = ''
            parser.attribValue = ''
            emitNode(parser, 'onattribute', {
              name: parser.attribName,
              value: ''
            })
            parser.attribName = ''
            if (c === '>') {
              openTag(parser)
            } else if (isMatch(nameStart, c)) {
              parser.attribName = c
              parser.state = S.ATTRIB_NAME
            } else {
              strictFail(parser, 'Invalid attribute name')
              parser.state = S.ATTRIB
            }
          }
          continue

        case S.ATTRIB_VALUE:
          if (isWhitespace(c)) {
            continue
          } else if (isQuote(c)) {
            parser.q = c
            parser.state = S.ATTRIB_VALUE_QUOTED
          } else {
            strictFail(parser, 'Unquoted attribute value')
            parser.state = S.ATTRIB_VALUE_UNQUOTED
            parser.attribValue = c
          }
          continue

        case S.ATTRIB_VALUE_QUOTED:
          if (c !== parser.q) {
            if (c === '&') {
              parser.state = S.ATTRIB_VALUE_ENTITY_Q
            } else {
              parser.attribValue += c
            }
            continue
          }
          attrib(parser)
          parser.q = ''
          parser.state = S.ATTRIB_VALUE_CLOSED
          continue

        case S.ATTRIB_VALUE_CLOSED:
          if (isWhitespace(c)) {
            parser.state = S.ATTRIB
          } else if (c === '>') {
            openTag(parser)
          } else if (c === '/') {
            parser.state = S.OPEN_TAG_SLASH
          } else if (isMatch(nameStart, c)) {
            strictFail(parser, 'No whitespace between attributes')
            parser.attribName = c
            parser.attribValue = ''
            parser.state = S.ATTRIB_NAME
          } else {
            strictFail(parser, 'Invalid attribute name')
          }
          continue

        case S.ATTRIB_VALUE_UNQUOTED:
          if (!isAttribEnd(c)) {
            if (c === '&') {
              parser.state = S.ATTRIB_VALUE_ENTITY_U
            } else {
              parser.attribValue += c
            }
            continue
          }
          attrib(parser)
          if (c === '>') {
            openTag(parser)
          } else {
            parser.state = S.ATTRIB
          }
          continue

        case S.CLOSE_TAG:
          if (!parser.tagName) {
            if (isWhitespace(c)) {
              continue
            } else if (notMatch(nameStart, c)) {
              if (parser.script) {
                parser.script += '</' + c
                parser.state = S.SCRIPT
              } else {
                strictFail(parser, 'Invalid tagname in closing tag.')
              }
            } else {
              parser.tagName = c
            }
          } else if (c === '>') {
            closeTag(parser)
          } else if (isMatch(nameBody, c)) {
            parser.tagName += c
          } else if (parser.script) {
            parser.script += '</' + parser.tagName
            parser.tagName = ''
            parser.state = S.SCRIPT
          } else {
            if (!isWhitespace(c)) {
              strictFail(parser, 'Invalid tagname in closing tag')
            }
            parser.state = S.CLOSE_TAG_SAW_WHITE
          }
          continue

        case S.CLOSE_TAG_SAW_WHITE:
          if (isWhitespace(c)) {
            continue
          }
          if (c === '>') {
            closeTag(parser)
          } else {
            strictFail(parser, 'Invalid characters in closing tag')
          }
          continue

        case S.TEXT_ENTITY:
        case S.ATTRIB_VALUE_ENTITY_Q:
        case S.ATTRIB_VALUE_ENTITY_U:
          var returnState
          var buffer
          switch (parser.state) {
            case S.TEXT_ENTITY:
              returnState = S.TEXT
              buffer = 'textNode'
              break

            case S.ATTRIB_VALUE_ENTITY_Q:
              returnState = S.ATTRIB_VALUE_QUOTED
              buffer = 'attribValue'
              break

            case S.ATTRIB_VALUE_ENTITY_U:
              returnState = S.ATTRIB_VALUE_UNQUOTED
              buffer = 'attribValue'
              break
          }

          if (c === ';') {
            parser[buffer] += parseEntity(parser)
            parser.entity = ''
            parser.state = returnState
          } else if (isMatch(parser.entity.length ? entityBody : entityStart, c)) {
            parser.entity += c
          } else {
            strictFail(parser, 'Invalid character in entity name')
            parser[buffer] += '&' + parser.entity + c
            parser.entity = ''
            parser.state = returnState
          }

          continue

        default:
          throw new Error(parser, 'Unknown state: ' + parser.state)
      }
    } // while

    if (parser.position >= parser.bufferCheckPosition) {
      checkBufferLength(parser)
    }
    return parser
  }

  /*! http://mths.be/fromcodepoint v0.1.0 by @mathias */
  /* istanbul ignore next */
  if (!String.fromCodePoint) {
    (function () {
      var stringFromCharCode = String.fromCharCode
      var floor = Math.floor
      var fromCodePoint = function () {
        var MAX_SIZE = 0x4000
        var codeUnits = []
        var highSurrogate
        var lowSurrogate
        var index = -1
        var length = arguments.length
        if (!length) {
          return ''
        }
        var result = ''
        while (++index < length) {
          var codePoint = Number(arguments[index])
          if (
            !isFinite(codePoint) || // `NaN`, `+Infinity`, or `-Infinity`
            codePoint < 0 || // not a valid Unicode code point
            codePoint > 0x10FFFF || // not a valid Unicode code point
            floor(codePoint) !== codePoint // not an integer
          ) {
            throw RangeError('Invalid code point: ' + codePoint)
          }
          if (codePoint <= 0xFFFF) { // BMP code point
            codeUnits.push(codePoint)
          } else { // Astral code point; split in surrogate halves
            // http://mathiasbynens.be/notes/javascript-encoding#surrogate-formulae
            codePoint -= 0x10000
            highSurrogate = (codePoint >> 10) + 0xD800
            lowSurrogate = (codePoint % 0x400) + 0xDC00
            codeUnits.push(highSurrogate, lowSurrogate)
          }
          if (index + 1 === length || codeUnits.length > MAX_SIZE) {
            result += stringFromCharCode.apply(null, codeUnits)
            codeUnits.length = 0
          }
        }
        return result
      }
      /* istanbul ignore next */
      if (Object.defineProperty) {
        Object.defineProperty(String, 'fromCodePoint', {
          value: fromCodePoint,
          configurable: true,
          writable: true
        })
      } else {
        String.fromCodePoint = fromCodePoint
      }
    }())
  }
})( false ? undefined : exports)

/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__(/*! ./../../buffer/index.js */ "./node_modules/buffer/index.js").Buffer))

/***/ }),

/***/ "./node_modules/setimmediate/setImmediate.js":
/*!***************************************************!*\
  !*** ./node_modules/setimmediate/setImmediate.js ***!
  \***************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

/* WEBPACK VAR INJECTION */(function(global, process) {(function (global, undefined) {
    "use strict";

    if (global.setImmediate) {
        return;
    }

    var nextHandle = 1; // Spec says greater than zero
    var tasksByHandle = {};
    var currentlyRunningATask = false;
    var doc = global.document;
    var registerImmediate;

    function setImmediate(callback) {
      // Callback can either be a function or a string
      if (typeof callback !== "function") {
        callback = new Function("" + callback);
      }
      // Copy function arguments
      var args = new Array(arguments.length - 1);
      for (var i = 0; i < args.length; i++) {
          args[i] = arguments[i + 1];
      }
      // Store and register the task
      var task = { callback: callback, args: args };
      tasksByHandle[nextHandle] = task;
      registerImmediate(nextHandle);
      return nextHandle++;
    }

    function clearImmediate(handle) {
        delete tasksByHandle[handle];
    }

    function run(task) {
        var callback = task.callback;
        var args = task.args;
        switch (args.length) {
        case 0:
            callback();
            break;
        case 1:
            callback(args[0]);
            break;
        case 2:
            callback(args[0], args[1]);
            break;
        case 3:
            callback(args[0], args[1], args[2]);
            break;
        default:
            callback.apply(undefined, args);
            break;
        }
    }

    function runIfPresent(handle) {
        // From the spec: "Wait until any invocations of this algorithm started before this one have completed."
        // So if we're currently running a task, we'll need to delay this invocation.
        if (currentlyRunningATask) {
            // Delay by doing a setTimeout. setImmediate was tried instead, but in Firefox 7 it generated a
            // "too much recursion" error.
            setTimeout(runIfPresent, 0, handle);
        } else {
            var task = tasksByHandle[handle];
            if (task) {
                currentlyRunningATask = true;
                try {
                    run(task);
                } finally {
                    clearImmediate(handle);
                    currentlyRunningATask = false;
                }
            }
        }
    }

    function installNextTickImplementation() {
        registerImmediate = function(handle) {
            process.nextTick(function () { runIfPresent(handle); });
        };
    }

    function canUsePostMessage() {
        // The test against `importScripts` prevents this implementation from being installed inside a web worker,
        // where `global.postMessage` means something completely different and can't be used for this purpose.
        if (global.postMessage && !global.importScripts) {
            var postMessageIsAsynchronous = true;
            var oldOnMessage = global.onmessage;
            global.onmessage = function() {
                postMessageIsAsynchronous = false;
            };
            global.postMessage("", "*");
            global.onmessage = oldOnMessage;
            return postMessageIsAsynchronous;
        }
    }

    function installPostMessageImplementation() {
        // Installs an event handler on `global` for the `message` event: see
        // * https://developer.mozilla.org/en/DOM/window.postMessage
        // * http://www.whatwg.org/specs/web-apps/current-work/multipage/comms.html#crossDocumentMessages

        var messagePrefix = "setImmediate$" + Math.random() + "$";
        var onGlobalMessage = function(event) {
            if (event.source === global &&
                typeof event.data === "string" &&
                event.data.indexOf(messagePrefix) === 0) {
                runIfPresent(+event.data.slice(messagePrefix.length));
            }
        };

        if (global.addEventListener) {
            global.addEventListener("message", onGlobalMessage, false);
        } else {
            global.attachEvent("onmessage", onGlobalMessage);
        }

        registerImmediate = function(handle) {
            global.postMessage(messagePrefix + handle, "*");
        };
    }

    function installMessageChannelImplementation() {
        var channel = new MessageChannel();
        channel.port1.onmessage = function(event) {
            var handle = event.data;
            runIfPresent(handle);
        };

        registerImmediate = function(handle) {
            channel.port2.postMessage(handle);
        };
    }

    function installReadyStateChangeImplementation() {
        var html = doc.documentElement;
        registerImmediate = function(handle) {
            // Create a <script> element; its readystatechange event will be fired asynchronously once it is inserted
            // into the document. Do so, thus queuing up the task. Remember to clean up once it's been called.
            var script = doc.createElement("script");
            script.onreadystatechange = function () {
                runIfPresent(handle);
                script.onreadystatechange = null;
                html.removeChild(script);
                script = null;
            };
            html.appendChild(script);
        };
    }

    function installSetTimeoutImplementation() {
        registerImmediate = function(handle) {
            setTimeout(runIfPresent, 0, handle);
        };
    }

    // If supported, we should attach to the prototype of global, since that is where setTimeout et al. live.
    var attachTo = Object.getPrototypeOf && Object.getPrototypeOf(global);
    attachTo = attachTo && attachTo.setTimeout ? attachTo : global;

    // Don't get fooled by e.g. browserify environments.
    if ({}.toString.call(global.process) === "[object process]") {
        // For Node.js before 0.9
        installNextTickImplementation();

    } else if (canUsePostMessage()) {
        // For non-IE10 modern browsers
        installPostMessageImplementation();

    } else if (global.MessageChannel) {
        // For web workers, where supported
        installMessageChannelImplementation();

    } else if (doc && "onreadystatechange" in doc.createElement("script")) {
        // For IE 68
        installReadyStateChangeImplementation();

    } else {
        // For older browsers
        installSetTimeoutImplementation();
    }

    attachTo.setImmediate = setImmediate;
    attachTo.clearImmediate = clearImmediate;
}(typeof self === "undefined" ? typeof global === "undefined" ? this : global : self));

/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__(/*! ./../webpack/buildin/global.js */ "./node_modules/webpack/buildin/global.js"), __webpack_require__(/*! ./../process/browser.js */ "./node_modules/process/browser.js")))

/***/ }),

/***/ "./node_modules/stream-browserify/index.js":
/*!*************************************************!*\
  !*** ./node_modules/stream-browserify/index.js ***!
  \*************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

// Copyright Joyent, Inc. and other Node contributors.
//
// Permission is hereby granted, free of charge, to any person obtaining a
// copy of this software and associated documentation files (the
// "Software"), to deal in the Software without restriction, including
// without limitation the rights to use, copy, modify, merge, publish,
// distribute, sublicense, and/or sell copies of the Software, and to permit
// persons to whom the Software is furnished to do so, subject to the
// following conditions:
//
// The above copyright notice and this permission notice shall be included
// in all copies or substantial portions of the Software.
//
// THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS
// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN
// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,
// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR
// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE
// USE OR OTHER DEALINGS IN THE SOFTWARE.

module.exports = Stream;

var EE = __webpack_require__(/*! events */ "./node_modules/events/events.js").EventEmitter;
var inherits = __webpack_require__(/*! inherits */ "./node_modules/inherits/inherits_browser.js");

inherits(Stream, EE);
Stream.Readable = __webpack_require__(/*! readable-stream/readable.js */ "./node_modules/readable-stream/readable-browser.js");
Stream.Writable = __webpack_require__(/*! readable-stream/writable.js */ "./node_modules/readable-stream/writable-browser.js");
Stream.Duplex = __webpack_require__(/*! readable-stream/duplex.js */ "./node_modules/readable-stream/duplex-browser.js");
Stream.Transform = __webpack_require__(/*! readable-stream/transform.js */ "./node_modules/readable-stream/transform.js");
Stream.PassThrough = __webpack_require__(/*! readable-stream/passthrough.js */ "./node_modules/readable-stream/passthrough.js");

// Backwards-compat with node 0.4.x
Stream.Stream = Stream;



// old-style streams.  Note that the pipe method (the only relevant
// part of this class) is overridden in the Readable class.

function Stream() {
  EE.call(this);
}

Stream.prototype.pipe = function(dest, options) {
  var source = this;

  function ondata(chunk) {
    if (dest.writable) {
      if (false === dest.write(chunk) && source.pause) {
        source.pause();
      }
    }
  }

  source.on('data', ondata);

  function ondrain() {
    if (source.readable && source.resume) {
      source.resume();
    }
  }

  dest.on('drain', ondrain);

  // If the 'end' option is not supplied, dest.end() will be called when
  // source gets the 'end' or 'close' events.  Only dest.end() once.
  if (!dest._isStdio && (!options || options.end !== false)) {
    source.on('end', onend);
    source.on('close', onclose);
  }

  var didOnEnd = false;
  function onend() {
    if (didOnEnd) return;
    didOnEnd = true;

    dest.end();
  }


  function onclose() {
    if (didOnEnd) return;
    didOnEnd = true;

    if (typeof dest.destroy === 'function') dest.destroy();
  }

  // don't leave dangling pipes when there are errors.
  function onerror(er) {
    cleanup();
    if (EE.listenerCount(this, 'error') === 0) {
      throw er; // Unhandled stream error in pipe.
    }
  }

  source.on('error', onerror);
  dest.on('error', onerror);

  // remove all the event listeners that were added.
  function cleanup() {
    source.removeListener('data', ondata);
    dest.removeListener('drain', ondrain);

    source.removeListener('end', onend);
    source.removeListener('close', onclose);

    source.removeListener('error', onerror);
    dest.removeListener('error', onerror);

    source.removeListener('end', cleanup);
    source.removeListener('close', cleanup);

    dest.removeListener('close', cleanup);
  }

  source.on('end', cleanup);
  source.on('close', cleanup);

  dest.on('close', cleanup);

  dest.emit('pipe', source);

  // Allow for unix-like usage: A.pipe(B).pipe(C)
  return dest;
};


/***/ }),

/***/ "./node_modules/string_decoder/lib/string_decoder.js":
/*!***********************************************************!*\
  !*** ./node_modules/string_decoder/lib/string_decoder.js ***!
  \***********************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
// Copyright Joyent, Inc. and other Node contributors.
//
// Permission is hereby granted, free of charge, to any person obtaining a
// copy of this software and associated documentation files (the
// "Software"), to deal in the Software without restriction, including
// without limitation the rights to use, copy, modify, merge, publish,
// distribute, sublicense, and/or sell copies of the Software, and to permit
// persons to whom the Software is furnished to do so, subject to the
// following conditions:
//
// The above copyright notice and this permission notice shall be included
// in all copies or substantial portions of the Software.
//
// THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS
// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN
// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,
// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR
// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE
// USE OR OTHER DEALINGS IN THE SOFTWARE.



/*<replacement>*/

var Buffer = __webpack_require__(/*! safe-buffer */ "./node_modules/safe-buffer/index.js").Buffer;
/*</replacement>*/

var isEncoding = Buffer.isEncoding || function (encoding) {
  encoding = '' + encoding;
  switch (encoding && encoding.toLowerCase()) {
    case 'hex':case 'utf8':case 'utf-8':case 'ascii':case 'binary':case 'base64':case 'ucs2':case 'ucs-2':case 'utf16le':case 'utf-16le':case 'raw':
      return true;
    default:
      return false;
  }
};

function _normalizeEncoding(enc) {
  if (!enc) return 'utf8';
  var retried;
  while (true) {
    switch (enc) {
      case 'utf8':
      case 'utf-8':
        return 'utf8';
      case 'ucs2':
      case 'ucs-2':
      case 'utf16le':
      case 'utf-16le':
        return 'utf16le';
      case 'latin1':
      case 'binary':
        return 'latin1';
      case 'base64':
      case 'ascii':
      case 'hex':
        return enc;
      default:
        if (retried) return; // undefined
        enc = ('' + enc).toLowerCase();
        retried = true;
    }
  }
};

// Do not cache `Buffer.isEncoding` when checking encoding names as some
// modules monkey-patch it to support additional encodings
function normalizeEncoding(enc) {
  var nenc = _normalizeEncoding(enc);
  if (typeof nenc !== 'string' && (Buffer.isEncoding === isEncoding || !isEncoding(enc))) throw new Error('Unknown encoding: ' + enc);
  return nenc || enc;
}

// StringDecoder provides an interface for efficiently splitting a series of
// buffers into a series of JS strings without breaking apart multi-byte
// characters.
exports.StringDecoder = StringDecoder;
function StringDecoder(encoding) {
  this.encoding = normalizeEncoding(encoding);
  var nb;
  switch (this.encoding) {
    case 'utf16le':
      this.text = utf16Text;
      this.end = utf16End;
      nb = 4;
      break;
    case 'utf8':
      this.fillLast = utf8FillLast;
      nb = 4;
      break;
    case 'base64':
      this.text = base64Text;
      this.end = base64End;
      nb = 3;
      break;
    default:
      this.write = simpleWrite;
      this.end = simpleEnd;
      return;
  }
  this.lastNeed = 0;
  this.lastTotal = 0;
  this.lastChar = Buffer.allocUnsafe(nb);
}

StringDecoder.prototype.write = function (buf) {
  if (buf.length === 0) return '';
  var r;
  var i;
  if (this.lastNeed) {
    r = this.fillLast(buf);
    if (r === undefined) return '';
    i = this.lastNeed;
    this.lastNeed = 0;
  } else {
    i = 0;
  }
  if (i < buf.length) return r ? r + this.text(buf, i) : this.text(buf, i);
  return r || '';
};

StringDecoder.prototype.end = utf8End;

// Returns only complete characters in a Buffer
StringDecoder.prototype.text = utf8Text;

// Attempts to complete a partial non-UTF-8 character using bytes from a Buffer
StringDecoder.prototype.fillLast = function (buf) {
  if (this.lastNeed <= buf.length) {
    buf.copy(this.lastChar, this.lastTotal - this.lastNeed, 0, this.lastNeed);
    return this.lastChar.toString(this.encoding, 0, this.lastTotal);
  }
  buf.copy(this.lastChar, this.lastTotal - this.lastNeed, 0, buf.length);
  this.lastNeed -= buf.length;
};

// Checks the type of a UTF-8 byte, whether it's ASCII, a leading byte, or a
// continuation byte. If an invalid byte is detected, -2 is returned.
function utf8CheckByte(byte) {
  if (byte <= 0x7F) return 0;else if (byte >> 5 === 0x06) return 2;else if (byte >> 4 === 0x0E) return 3;else if (byte >> 3 === 0x1E) return 4;
  return byte >> 6 === 0x02 ? -1 : -2;
}

// Checks at most 3 bytes at the end of a Buffer in order to detect an
// incomplete multi-byte UTF-8 character. The total number of bytes (2, 3, or 4)
// needed to complete the UTF-8 character (if applicable) are returned.
function utf8CheckIncomplete(self, buf, i) {
  var j = buf.length - 1;
  if (j < i) return 0;
  var nb = utf8CheckByte(buf[j]);
  if (nb >= 0) {
    if (nb > 0) self.lastNeed = nb - 1;
    return nb;
  }
  if (--j < i || nb === -2) return 0;
  nb = utf8CheckByte(buf[j]);
  if (nb >= 0) {
    if (nb > 0) self.lastNeed = nb - 2;
    return nb;
  }
  if (--j < i || nb === -2) return 0;
  nb = utf8CheckByte(buf[j]);
  if (nb >= 0) {
    if (nb > 0) {
      if (nb === 2) nb = 0;else self.lastNeed = nb - 3;
    }
    return nb;
  }
  return 0;
}

// Validates as many continuation bytes for a multi-byte UTF-8 character as
// needed or are available. If we see a non-continuation byte where we expect
// one, we "replace" the validated continuation bytes we've seen so far with
// a single UTF-8 replacement character ('\ufffd'), to match v8's UTF-8 decoding
// behavior. The continuation byte check is included three times in the case
// where all of the continuation bytes for a character exist in the same buffer.
// It is also done this way as a slight performance increase instead of using a
// loop.
function utf8CheckExtraBytes(self, buf, p) {
  if ((buf[0] & 0xC0) !== 0x80) {
    self.lastNeed = 0;
    return '\ufffd';
  }
  if (self.lastNeed > 1 && buf.length > 1) {
    if ((buf[1] & 0xC0) !== 0x80) {
      self.lastNeed = 1;
      return '\ufffd';
    }
    if (self.lastNeed > 2 && buf.length > 2) {
      if ((buf[2] & 0xC0) !== 0x80) {
        self.lastNeed = 2;
        return '\ufffd';
      }
    }
  }
}

// Attempts to complete a multi-byte UTF-8 character using bytes from a Buffer.
function utf8FillLast(buf) {
  var p = this.lastTotal - this.lastNeed;
  var r = utf8CheckExtraBytes(this, buf, p);
  if (r !== undefined) return r;
  if (this.lastNeed <= buf.length) {
    buf.copy(this.lastChar, p, 0, this.lastNeed);
    return this.lastChar.toString(this.encoding, 0, this.lastTotal);
  }
  buf.copy(this.lastChar, p, 0, buf.length);
  this.lastNeed -= buf.length;
}

// Returns all complete UTF-8 characters in a Buffer. If the Buffer ended on a
// partial character, the character's bytes are buffered until the required
// number of bytes are available.
function utf8Text(buf, i) {
  var total = utf8CheckIncomplete(this, buf, i);
  if (!this.lastNeed) return buf.toString('utf8', i);
  this.lastTotal = total;
  var end = buf.length - (total - this.lastNeed);
  buf.copy(this.lastChar, 0, end);
  return buf.toString('utf8', i, end);
}

// For UTF-8, a replacement character is added when ending on a partial
// character.
function utf8End(buf) {
  var r = buf && buf.length ? this.write(buf) : '';
  if (this.lastNeed) return r + '\ufffd';
  return r;
}

// UTF-16LE typically needs two bytes per character, but even if we have an even
// number of bytes available, we need to check if we end on a leading/high
// surrogate. In that case, we need to wait for the next two bytes in order to
// decode the last character properly.
function utf16Text(buf, i) {
  if ((buf.length - i) % 2 === 0) {
    var r = buf.toString('utf16le', i);
    if (r) {
      var c = r.charCodeAt(r.length - 1);
      if (c >= 0xD800 && c <= 0xDBFF) {
        this.lastNeed = 2;
        this.lastTotal = 4;
        this.lastChar[0] = buf[buf.length - 2];
        this.lastChar[1] = buf[buf.length - 1];
        return r.slice(0, -1);
      }
    }
    return r;
  }
  this.lastNeed = 1;
  this.lastTotal = 2;
  this.lastChar[0] = buf[buf.length - 1];
  return buf.toString('utf16le', i, buf.length - 1);
}

// For UTF-16LE we do not explicitly append special replacement characters if we
// end on a partial character, we simply let v8 handle that.
function utf16End(buf) {
  var r = buf && buf.length ? this.write(buf) : '';
  if (this.lastNeed) {
    var end = this.lastTotal - this.lastNeed;
    return r + this.lastChar.toString('utf16le', 0, end);
  }
  return r;
}

function base64Text(buf, i) {
  var n = (buf.length - i) % 3;
  if (n === 0) return buf.toString('base64', i);
  this.lastNeed = 3 - n;
  this.lastTotal = 3;
  if (n === 1) {
    this.lastChar[0] = buf[buf.length - 1];
  } else {
    this.lastChar[0] = buf[buf.length - 2];
    this.lastChar[1] = buf[buf.length - 1];
  }
  return buf.toString('base64', i, buf.length - n);
}

function base64End(buf) {
  var r = buf && buf.length ? this.write(buf) : '';
  if (this.lastNeed) return r + this.lastChar.toString('base64', 0, 3 - this.lastNeed);
  return r;
}

// Pass bytes on through for single-byte encodings (e.g. ascii, latin1, hex)
function simpleWrite(buf) {
  return buf.toString(this.encoding);
}

function simpleEnd(buf) {
  return buf && buf.length ? this.write(buf) : '';
}

/***/ }),

/***/ "./node_modules/timers-browserify/main.js":
/*!************************************************!*\
  !*** ./node_modules/timers-browserify/main.js ***!
  \************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

/* WEBPACK VAR INJECTION */(function(global) {var scope = (typeof global !== "undefined" && global) ||
            (typeof self !== "undefined" && self) ||
            window;
var apply = Function.prototype.apply;

// DOM APIs, for completeness

exports.setTimeout = function() {
  return new Timeout(apply.call(setTimeout, scope, arguments), clearTimeout);
};
exports.setInterval = function() {
  return new Timeout(apply.call(setInterval, scope, arguments), clearInterval);
};
exports.clearTimeout =
exports.clearInterval = function(timeout) {
  if (timeout) {
    timeout.close();
  }
};

function Timeout(id, clearFn) {
  this._id = id;
  this._clearFn = clearFn;
}
Timeout.prototype.unref = Timeout.prototype.ref = function() {};
Timeout.prototype.close = function() {
  this._clearFn.call(scope, this._id);
};

// Does not start the time, just sets up the members needed.
exports.enroll = function(item, msecs) {
  clearTimeout(item._idleTimeoutId);
  item._idleTimeout = msecs;
};

exports.unenroll = function(item) {
  clearTimeout(item._idleTimeoutId);
  item._idleTimeout = -1;
};

exports._unrefActive = exports.active = function(item) {
  clearTimeout(item._idleTimeoutId);

  var msecs = item._idleTimeout;
  if (msecs >= 0) {
    item._idleTimeoutId = setTimeout(function onTimeout() {
      if (item._onTimeout)
        item._onTimeout();
    }, msecs);
  }
};

// setimmediate attaches itself to the global object
__webpack_require__(/*! setimmediate */ "./node_modules/setimmediate/setImmediate.js");
// On some exotic environments, it's not clear which object `setimmediate` was
// able to install onto.  Search each possibility in the same order as the
// `setimmediate` library.
exports.setImmediate = (typeof self !== "undefined" && self.setImmediate) ||
                       (typeof global !== "undefined" && global.setImmediate) ||
                       (this && this.setImmediate);
exports.clearImmediate = (typeof self !== "undefined" && self.clearImmediate) ||
                         (typeof global !== "undefined" && global.clearImmediate) ||
                         (this && this.clearImmediate);

/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__(/*! ./../webpack/buildin/global.js */ "./node_modules/webpack/buildin/global.js")))

/***/ }),

/***/ "./node_modules/tone/build/Tone.js":
/*!*****************************************!*\
  !*** ./node_modules/tone/build/Tone.js ***!
  \*****************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

!function(t,e){ true?module.exports=e():undefined}("undefined"!=typeof self?self:this,function(){return function(t){var e={};function i(s){if(e[s])return e[s].exports;var n=e[s]={i:s,l:!1,exports:{}};return t[s].call(n.exports,n,n.exports,i),n.l=!0,n.exports}return i.m=t,i.c=e,i.d=function(t,e,s){i.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:s})},i.r=function(t){Object.defineProperty(t,"__esModule",{value:!0})},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="",i(i.s=148)}([function(t,e,i){"use strict";i.r(e),function(t){var s=i(93),n=function(){if(!(this instanceof n))throw new Error("constructor needs to be called with the 'new' keyword")};
/**
 *  Tone.js
 *  @author Yotam Mann
 *  @license http://opensource.org/licenses/MIT MIT License
 *  @copyright 2014-2019 Yotam Mann
 */n.prototype.toString=function(){for(var t in n){var e=t[0].match(/^[A-Z]$/),i=n[t]===this.constructor;if(n.isFunction(n[t])&&e&&i)return t}return"Tone"},n.prototype.dispose=function(){return this},n.prototype.set=function(t,e){if(n.isString(t)){var i={};i[t]=e,t=i}t:for(var s in t){e=t[s];var o=this;if(-1!==s.indexOf(".")){for(var a=s.split("."),r=0;r<a.length-1;r++)if((o=o[a[r]])instanceof n){a.splice(0,r+1);var l=a.join(".");o.set(l,e);continue t}s=a[a.length-1]}var u=o[s];n.isUndef(u)||(n.Signal&&u instanceof n.Signal||n.Param&&u instanceof n.Param?u.value!==e&&(u.value=e):u instanceof AudioParam?u.value!==e&&(u.value=e):n.TimeBase&&u instanceof n.TimeBase?o[s]=e:u instanceof n?u.set(e):u!==e&&(o[s]=e))}return this},n.prototype.get=function(t){n.isUndef(t)?t=this._collectDefaults(this.constructor):n.isString(t)&&(t=[t]);for(var e={},i=0;i<t.length;i++){var s=t[i],o=this,a=e;if(-1!==s.indexOf(".")){for(var r=s.split("."),l=0;l<r.length-1;l++){var u=r[l];a[u]=a[u]||{},a=a[u],o=o[u]}s=r[r.length-1]}var d=o[s];n.isObject(t[s])?a[s]=d.get():n.Signal&&d instanceof n.Signal?a[s]=d.value:n.Param&&d instanceof n.Param?a[s]=d.value:d instanceof AudioParam?a[s]=d.value:d instanceof n?a[s]=d.get():!n.isFunction(d)&&n.isDefined(d)&&(a[s]=d)}return e},n.prototype._collectDefaults=function(t){var e=[];if(n.isDefined(t.defaults)&&(e=Object.keys(t.defaults)),n.isDefined(t._super))for(var i=this._collectDefaults(t._super),s=0;s<i.length;s++)-1===e.indexOf(i[s])&&e.push(i[s]);return e},n.defaults=function(t,e,i){var s={};if(1===t.length&&n.isObject(t[0]))s=t[0];else for(var o=0;o<e.length;o++)s[e[o]]=t[o];return n.isDefined(i.defaults)?n.defaultArg(s,i.defaults):n.isObject(i)?n.defaultArg(s,i):s},n.defaultArg=function(t,e){if(n.isObject(t)&&n.isObject(e)){var i={};for(var s in t)i[s]=n.defaultArg(e[s],t[s]);for(var o in e)i[o]=n.defaultArg(t[o],e[o]);return i}return n.isUndef(t)?e:t},n.prototype.log=function(){if(this.debug||this.toString()===n.global.TONE_DEBUG_CLASS){var t=Array.from(arguments);t.unshift(this.toString()+":"),console.log.apply(void 0,t)}},n.prototype.assert=function(t,e){if(!t)throw new Error(e)},n.connectSeries=function(){for(var t=arguments[0],e=1;e<arguments.length;e++){var i=arguments[e];n.connect(t,i),t=i}return n},n.connect=function(t,e,i,s){for(;n.isDefined(e.input);)n.isArray(e.input)?(s=n.defaultArg(s,0),e=e.input[s],s=0):e.input&&(e=e.input);return e instanceof AudioParam?t.connect(e,i):e instanceof AudioNode&&t.connect(e,i,s),n},n.disconnect=function(t,e,i,s){if(e){for(var o=!1;!o;)n.isArray(e.input)?(n.isDefined(s)?n.disconnect(t,e.input[s],i):e.input.forEach(function(e){try{n.disconnect(t,e,i)}catch(t){}}),o=!0):e.input?e=e.input:o=!0;e instanceof AudioParam?t.disconnect(e,i):e instanceof AudioNode&&t.disconnect(e,i,s)}else t.disconnect();return n},n.isUndef=function(t){return void 0===t},n.isDefined=function(t){return!n.isUndef(t)},n.isFunction=function(t){return"function"==typeof t},n.isNumber=function(t){return"number"==typeof t},n.isObject=function(t){return"[object Object]"===Object.prototype.toString.call(t)&&t.constructor===Object},n.isBoolean=function(t){return"boolean"==typeof t},n.isArray=function(t){return Array.isArray(t)},n.isString=function(t){return"string"==typeof t},n.isNote=function(t){return n.isString(t)&&/^([a-g]{1}(?:b|#|x|bb)?)(-?[0-9]+)/i.test(t)},n.noOp=function(){},n.prototype._readOnly=function(t){if(Array.isArray(t))for(var e=0;e<t.length;e++)this._readOnly(t[e]);else Object.defineProperty(this,t,{writable:!1,enumerable:!0})},n.prototype._writable=function(t){if(Array.isArray(t))for(var e=0;e<t.length;e++)this._writable(t[e]);else Object.defineProperty(this,t,{writable:!0})},n.State={Started:"started",Stopped:"stopped",Paused:"paused"},n.global=n.isUndef(t)?window:t,n.equalPowerScale=function(t){var e=.5*Math.PI;return Math.sin(t*e)},n.dbToGain=function(t){return Math.pow(10,t/20)},n.gainToDb=function(t){return Math.log(t)/Math.LN10*20},n.intervalToFrequencyRatio=function(t){return Math.pow(2,t/12)},n.prototype.now=function(){return n.context.now()},n.now=function(){return n.context.now()},n.prototype.immediate=function(){return n.context.currentTime},n.immediate=function(){return n.context.currentTime},n.extend=function(t,e){function i(){}n.isUndef(e)&&(e=n),i.prototype=e.prototype,t.prototype=new i,t.prototype.constructor=t,t._super=e},n._audioContext=null,n.start=function(){return n.context.resume()},Object.defineProperty(n,"context",{get:function(){return n._audioContext},set:function(t){t.isContext?n._audioContext=t:n._audioContext=new n.Context(t),n.Context.emit("init",n._audioContext)}}),Object.defineProperty(n.prototype,"context",{get:function(){return n.context}}),n.setContext=function(t){n.context=t},Object.defineProperty(n.prototype,"blockTime",{get:function(){return 128/this.context.sampleRate}}),Object.defineProperty(n.prototype,"sampleTime",{get:function(){return 1/this.context.sampleRate}}),Object.defineProperty(n,"supported",{get:function(){var t=n.global.hasOwnProperty("AudioContext")||n.global.hasOwnProperty("webkitAudioContext"),e=n.global.hasOwnProperty("Promise");return t&&e}}),Object.defineProperty(n,"initialized",{get:function(){return Boolean(n.context)}}),n.getContext=function(t){if(n.initialized)t(n.context);else{var e=function(){t(n.context),n.Context.off("init",e)};n.Context.on("init",e)}return n},n.version=s.a,e.default=n}.call(this,i(147))},function(t,e,i){"use strict";i.r(e);var s=i(0);i(20);if(s.default.supported){var n=new OfflineAudioContext(2,1,44100),o=n.createGain(),a=n.createGain();if(o.connect(a)!==a){var r=AudioNode.prototype.connect;AudioNode.prototype.connect=function(){return r.apply(this,arguments),arguments[0]}}}s.default.AudioNode=function(){s.default.call(this);var t=s.default.defaults(arguments,["context"],{context:s.default.context});this._context=t.context},s.default.extend(s.default.AudioNode),Object.defineProperty(s.default.AudioNode.prototype,"context",{get:function(){return this._context}}),s.default.AudioNode.prototype.createInsOuts=function(t,e){1===t?this.input=this.context.createGain():t>1&&(this.input=new Array(t)),1===e?this.output=this.context.createGain():e>1&&(this.output=new Array(e))},Object.defineProperty(s.default.AudioNode.prototype,"channelCount",{get:function(){return this.output.channelCount},set:function(t){return this.output.channelCount=t}}),Object.defineProperty(s.default.AudioNode.prototype,"channelCountMode",{get:function(){return this.output.channelCountMode},set:function(t){return this.output.channelCountMode=t}}),Object.defineProperty(s.default.AudioNode.prototype,"channelInterpretation",{get:function(){return this.output.channelInterpretation},set:function(t){return this.output.channelInterpretation=t}}),Object.defineProperty(s.default.AudioNode.prototype,"numberOfInputs",{get:function(){return this.input?s.default.isArray(this.input)?this.input.length:1:0}}),Object.defineProperty(s.default.AudioNode.prototype,"numberOfOutputs",{get:function(){return this.output?s.default.isArray(this.output)?this.output.length:1:0}}),s.default.AudioNode.prototype.connect=function(t,e,i){return s.default.isArray(this.output)?(e=s.default.defaultArg(e,0),this.output[e].connect(t,0,i)):s.default.connect(this.output,t,e,i),this},s.default.AudioNode.prototype.disconnect=function(t,e,i){return s.default.isArray(this.output)?(e=s.default.defaultArg(e,0),this.output[e].disconnect(t,0,i)):s.default.disconnect(this.output,t,e,i),this},s.default.AudioNode.prototype.chain=function(){var t=Array.from(arguments);return t.unshift(this),s.default.connectSeries.apply(void 0,t),this},s.default.AudioNode.prototype.fan=function(){for(var t=0;t<arguments.length;t++)this.connect(arguments[t]);return this},s.default.AudioNode.prototype.dispose=function(){return s.default.isDefined(this.input)&&(this.input instanceof AudioNode&&this.input.disconnect(),this.input=null),s.default.isDefined(this.output)&&(this.output instanceof AudioNode&&this.output.disconnect(),this.output=null),this._context=null,this};e.default=s.default.AudioNode},function(t,e,i){"use strict";i.r(e);var s=i(0);i(4),i(14),i(30),i(44),i(20),i(3);if(s.default.supported&&!s.default.global.AudioContext.prototype.createConstantSource){var n=function(t){this.context=t;for(var e=t.createBuffer(1,128,t.sampleRate),i=e.getChannelData(0),s=0;s<i.length;s++)i[s]=1;this._bufferSource=t.createBufferSource(),this._bufferSource.channelCount=1,this._bufferSource.channelCountMode="explicit",this._bufferSource.buffer=e,this._bufferSource.loop=!0;var n=this._output=t.createGain();this.offset=n.gain,this._bufferSource.connect(n)};n.prototype.start=function(t){return this._bufferSource.start(t),this},n.prototype.stop=function(t){return this._bufferSource.stop(t),this},n.prototype.connect=function(){return this._output.connect.apply(this._output,arguments),this},n.prototype.disconnect=function(){return this._output.disconnect.apply(this._output,arguments),this},AudioContext.prototype.createConstantSource=function(){return new n(this)},s.default.Context.prototype.createConstantSource=function(){return new n(this)}}s.default.Signal=function(){var t=s.default.defaults(arguments,["value","units"],s.default.Signal);s.default.Param.call(this,t),this._constantSource=this.context.createConstantSource(),this._constantSource.start(0),this._param=this._constantSource.offset,this.value=t.value,this.output=this._constantSource,this.input=this._param=this.output.offset},s.default.extend(s.default.Signal,s.default.Param),s.default.Signal.defaults={value:0,units:s.default.Type.Default,convert:!0},s.default.Signal.prototype.connect=s.default.SignalBase.prototype.connect,s.default.Signal.prototype.disconnect=s.default.SignalBase.prototype.disconnect,s.default.Signal.prototype.getValueAtTime=function(t){return this._param.getValueAtTime?this._param.getValueAtTime(t):s.default.Param.prototype.getValueAtTime.call(this,t)},s.default.Signal.prototype.dispose=function(){return s.default.Param.prototype.dispose.call(this),this._constantSource.stop(),this._constantSource.disconnect(),this._constantSource=null,this};e.default=s.default.Signal},function(t,e,i){"use strict";i.r(e);var s=i(0);i(14),i(4),i(1);s.default.Gain=function(){var t=s.default.defaults(arguments,["gain","units"],s.default.Gain);s.default.AudioNode.call(this,t),this.input=this.output=this._gainNode=this.context.createGain(),this.gain=new s.default.Param({param:this._gainNode.gain,units:t.units,value:t.gain,convert:t.convert}),this._readOnly("gain")},s.default.extend(s.default.Gain,s.default.AudioNode),s.default.Gain.defaults={gain:1,convert:!0},s.default.Gain.prototype.dispose=function(){s.default.AudioNode.prototype.dispose.call(this),this._gainNode.disconnect(),this._gainNode=null,this._writable("gain"),this.gain.dispose(),this.gain=null},e.default=s.default.Gain},function(t,e,i){"use strict";i.r(e);var s=i(0);i(63),i(46),i(45),i(20);s.default.Type={Default:"number",Time:"time",Frequency:"frequency",TransportTime:"transportTime",Ticks:"ticks",NormalRange:"normalRange",AudioRange:"audioRange",Decibels:"db",Interval:"interval",BPM:"bpm",Positive:"positive",Gain:"gain",Cents:"cents",Degrees:"degrees",MIDI:"midi",BarsBeatsSixteenths:"barsBeatsSixteenths",Samples:"samples",Hertz:"hertz",Note:"note",Milliseconds:"milliseconds",Seconds:"seconds",Notation:"notation"},s.default.prototype.toSeconds=function(t){return s.default.isNumber(t)?t:s.default.isUndef(t)?this.now():s.default.isString(t)||s.default.isObject(t)?new s.default.Time(t).toSeconds():t instanceof s.default.TimeBase?t.toSeconds():void 0},s.default.prototype.toFrequency=function(t){return s.default.isNumber(t)?t:s.default.isString(t)||s.default.isUndef(t)||s.default.isObject(t)?new s.default.Frequency(t).valueOf():t instanceof s.default.TimeBase?t.toFrequency():void 0},s.default.prototype.toTicks=function(t){return s.default.isNumber(t)||s.default.isString(t)||s.default.isObject(t)?new s.default.TransportTime(t).toTicks():s.default.isUndef(t)?s.default.Transport.ticks:t instanceof s.default.TimeBase?t.toTicks():void 0},e.default=s.default},function(t,e,i){"use strict";i.r(e);var s=i(0);i(14),i(3),i(30);s.default.Multiply=function(t){s.default.Signal.call(this),this.createInsOuts(2,0),this._mult=this.input[0]=this.output=new s.default.Gain,this._param=this.input[1]=this.output.gain,this.value=s.default.defaultArg(t,0)},s.default.extend(s.default.Multiply,s.default.Signal),s.default.Multiply.prototype.dispose=function(){return s.default.Signal.prototype.dispose.call(this),this._mult.dispose(),this._mult=null,this._param=null,this},e.default=s.default.Multiply},function(t,e,i){"use strict";i.r(e);var s=i(0);i(16),i(27),i(40),i(4),i(34),i(2),i(1);s.default.Source=function(t){t=s.default.defaultArg(t,s.default.Source.defaults),s.default.AudioNode.call(this),this._volume=this.output=new s.default.Volume(t.volume),this.volume=this._volume.volume,this._readOnly("volume"),this._state=new s.default.TimelineState(s.default.State.Stopped),this._state.memory=100,this._synced=!1,this._scheduled=[],this._volume.output.output.channelCount=2,this._volume.output.output.channelCountMode="explicit",this.mute=t.mute},s.default.extend(s.default.Source,s.default.AudioNode),s.default.Source.defaults={volume:0,mute:!1},Object.defineProperty(s.default.Source.prototype,"state",{get:function(){return this._synced?s.default.Transport.state===s.default.State.Started?this._state.getValueAtTime(s.default.Transport.seconds):s.default.State.Stopped:this._state.getValueAtTime(this.now())}}),Object.defineProperty(s.default.Source.prototype,"mute",{get:function(){return this._volume.mute},set:function(t){this._volume.mute=t}}),s.default.Source.prototype._start=s.default.noOp,s.default.Source.prototype.restart=s.default.noOp,s.default.Source.prototype._stop=s.default.noOp,s.default.Source.prototype.start=function(t,e,i){if(s.default.isUndef(t)&&this._synced?t=s.default.Transport.seconds:(t=this.toSeconds(t),t=Math.max(t,this.context.currentTime)),this._state.getValueAtTime(t)===s.default.State.Started)this._state.cancel(t),this._state.setStateAtTime(s.default.State.Started,t),this.restart(t,e,i);else if(this._state.setStateAtTime(s.default.State.Started,t),this._synced){var n=this._state.get(t);n.offset=s.default.defaultArg(e,0),n.duration=i;var o=s.default.Transport.schedule(function(t){this._start(t,e,i)}.bind(this),t);this._scheduled.push(o),s.default.Transport.state===s.default.State.Started&&this._syncedStart(this.now(),s.default.Transport.seconds)}else this._start.apply(this,arguments);return this},s.default.Source.prototype.stop=function(t){if(s.default.isUndef(t)&&this._synced?t=s.default.Transport.seconds:(t=this.toSeconds(t),t=Math.max(t,this.context.currentTime)),this._synced){var e=s.default.Transport.schedule(this._stop.bind(this),t);this._scheduled.push(e)}else this._stop.apply(this,arguments);return this._state.cancel(t),this._state.setStateAtTime(s.default.State.Stopped,t),this},s.default.Source.prototype.sync=function(){return this._synced=!0,this._syncedStart=function(t,e){if(e>0){var i=this._state.get(e);if(i&&i.state===s.default.State.Started&&i.time!==e){var n,o=e-this.toSeconds(i.time);i.duration&&(n=this.toSeconds(i.duration)-o),this._start(t,this.toSeconds(i.offset)+o,n)}}}.bind(this),this._syncedStop=function(t){var e=s.default.Transport.getSecondsAtTime(Math.max(t-this.sampleTime,0));this._state.getValueAtTime(e)===s.default.State.Started&&this._stop(t)}.bind(this),s.default.Transport.on("start loopStart",this._syncedStart),s.default.Transport.on("stop pause loopEnd",this._syncedStop),this},s.default.Source.prototype.unsync=function(){this._synced&&(s.default.Transport.off("stop pause loopEnd",this._syncedStop),s.default.Transport.off("start loopStart",this._syncedStart)),this._synced=!1;for(var t=0;t<this._scheduled.length;t++){var e=this._scheduled[t];s.default.Transport.clear(e)}return this._scheduled=[],this._state.cancel(0),this},s.default.Source.prototype.dispose=function(){s.default.AudioNode.prototype.dispose.call(this),this.unsync(),this._scheduled=null,this._writable("volume"),this._volume.dispose(),this._volume=null,this.volume=null,this._state.dispose(),this._state=null},e.default=s.default.Source},function(t,e,i){"use strict";i.r(e);var s=i(0);i(30),i(44);if(s.default.supported&&!s.default.global.AudioContext.prototype._native_createWaveShaper){var n=navigator.userAgent.toLowerCase();if(n.includes("safari")&&!n.includes("chrome")){var o=function(t){for(var e in this._internalNode=this.input=this.output=t._native_createWaveShaper(),this._curve=null,this._internalNode)this._defineProperty(this._internalNode,e)};Object.defineProperty(o.prototype,"curve",{get:function(){return this._curve},set:function(t){this._curve=t;var e=new Float32Array(t.length+1);e.set(t,1),e[0]=t[0],this._internalNode.curve=e}}),o.prototype._defineProperty=function(t,e){s.default.isUndef(this[e])&&Object.defineProperty(this,e,{get:function(){return"function"==typeof t[e]?t[e].bind(t):t[e]},set:function(i){t[e]=i}})},s.default.global.AudioContext.prototype._native_createWaveShaper=s.default.global.AudioContext.prototype.createWaveShaper,s.default.global.AudioContext.prototype.createWaveShaper=function(){return new o(this)}}}s.default.WaveShaper=function(t,e){s.default.SignalBase.call(this),this._shaper=this.input=this.output=this.context.createWaveShaper(),this._curve=null,Array.isArray(t)?this.curve=t:isFinite(t)||s.default.isUndef(t)?this._curve=new Float32Array(s.default.defaultArg(t,1024)):s.default.isFunction(t)&&(this._curve=new Float32Array(s.default.defaultArg(e,1024)),this.setMap(t))},s.default.extend(s.default.WaveShaper,s.default.SignalBase),s.default.WaveShaper.prototype.setMap=function(t){for(var e=new Array(this._curve.length),i=0,s=this._curve.length;i<s;i++){var n=i/(s-1)*2-1;e[i]=t(n,i)}return this.curve=e,this},Object.defineProperty(s.default.WaveShaper.prototype,"curve",{get:function(){return this._shaper.curve},set:function(t){this._curve=new Float32Array(t),this._shaper.curve=this._curve}}),Object.defineProperty(s.default.WaveShaper.prototype,"oversample",{get:function(){return this._shaper.oversample},set:function(t){if(!["none","2x","4x"].includes(t))throw new RangeError("Tone.WaveShaper: oversampling must be either 'none', '2x', or '4x'");this._shaper.oversample=t}}),s.default.WaveShaper.prototype.dispose=function(){return s.default.SignalBase.prototype.dispose.call(this),this._shaper.disconnect(),this._shaper=null,this._curve=null,this};e.default=s.default.WaveShaper},function(t,e,i){"use strict";i.r(e);var s=i(0);i(23),i(1);s.default.Effect=function(){var t=s.default.defaults(arguments,["wet"],s.default.Effect);s.default.AudioNode.call(this),this.createInsOuts(1,1),this._dryWet=new s.default.CrossFade(t.wet),this.wet=this._dryWet.fade,this.effectSend=new s.default.Gain,this.effectReturn=new s.default.Gain,s.default.connect(this.input,this._dryWet.a),s.default.connect(this.input,this.effectSend),this.effectReturn.connect(this._dryWet.b),this._dryWet.connect(this.output),this._readOnly(["wet"])},s.default.extend(s.default.Effect,s.default.AudioNode),s.default.Effect.defaults={wet:1},s.default.Effect.prototype.connectEffect=function(t){return this.effectSend.chain(t,this.effectReturn),this},s.default.Effect.prototype.dispose=function(){return s.default.AudioNode.prototype.dispose.call(this),this._dryWet.dispose(),this._dryWet=null,this.effectSend.dispose(),this.effectSend=null,this.effectReturn.dispose(),this.effectReturn=null,this._writable(["wet"]),this.wet=null,this},e.default=s.default.Effect},function(t,e,i){"use strict";i.r(e);var s=i(0);i(2),i(1);s.default.Filter=function(){var t=s.default.defaults(arguments,["frequency","type","rolloff"],s.default.Filter);s.default.AudioNode.call(this),this.createInsOuts(1,1),this._filters=[],this.frequency=new s.default.Signal(t.frequency,s.default.Type.Frequency),this.detune=new s.default.Signal(0,s.default.Type.Cents),this.gain=new s.default.Signal({value:t.gain,convert:!0,type:s.default.Type.Decibels}),this.Q=new s.default.Signal(t.Q),this._type=t.type,this._rolloff=t.rolloff,this.rolloff=t.rolloff,this._readOnly(["detune","frequency","gain","Q"])},s.default.extend(s.default.Filter,s.default.AudioNode),s.default.Filter.defaults={type:"lowpass",frequency:350,rolloff:-12,Q:1,gain:0},Object.defineProperty(s.default.Filter.prototype,"type",{get:function(){return this._type},set:function(t){if(-1===["lowpass","highpass","bandpass","lowshelf","highshelf","notch","allpass","peaking"].indexOf(t))throw new TypeError("Tone.Filter: invalid type "+t);this._type=t;for(var e=0;e<this._filters.length;e++)this._filters[e].type=t}}),Object.defineProperty(s.default.Filter.prototype,"rolloff",{get:function(){return this._rolloff},set:function(t){t=parseInt(t,10);var e=[-12,-24,-48,-96].indexOf(t);if(-1===e)throw new RangeError("Tone.Filter: rolloff can only be -12, -24, -48 or -96");e+=1,this._rolloff=t,this.input.disconnect();for(var i=0;i<this._filters.length;i++)this._filters[i].disconnect(),this._filters[i]=null;this._filters=new Array(e);for(var n=0;n<e;n++){var o=this.context.createBiquadFilter();o.type=this._type,this.frequency.connect(o.frequency),this.detune.connect(o.detune),this.Q.connect(o.Q),this.gain.connect(o.gain),this._filters[n]=o}var a=[this.input].concat(this._filters).concat([this.output]);s.default.connectSeries.apply(s.default,a)}}),s.default.Filter.prototype.getFrequencyResponse=function(t){t=s.default.defaultArg(t,128);for(var e=new Float32Array(t).map(function(){return 1}),i=new Float32Array(t),n=0;n<t;n++){var o=19980*Math.pow(n/t,2)+20;i[n]=o}var a=new Float32Array(t),r=new Float32Array(t);return this._filters.forEach(function(){var t=this.context.createBiquadFilter();t.type=this._type,t.Q.value=this.Q.value,t.frequency.value=this.frequency.value,t.gain.value=this.gain.value,t.getFrequencyResponse(i,a,r),a.forEach(function(t,i){e[i]*=t})}.bind(this)),e},s.default.Filter.prototype.dispose=function(){s.default.AudioNode.prototype.dispose.call(this);for(var t=0;t<this._filters.length;t++)this._filters[t].disconnect(),this._filters[t]=null;return this._filters=null,this._writable(["detune","frequency","gain","Q"]),this.frequency.dispose(),this.Q.dispose(),this.frequency=null,this.Q=null,this.detune.dispose(),this.detune=null,this.gain.dispose(),this.gain=null,this},e.default=s.default.Filter},function(t,e,i){"use strict";i.r(e);var s=i(0);i(1);s.default.Merge=function(t){t=s.default.defaultArg(t,2),s.default.AudioNode.call(this),this.createInsOuts(t,0),this._merger=this.output=this.context.createChannelMerger(t);for(var e=0;e<t;e++)this.input[e]=new s.default.Gain,this.input[e].connect(this._merger,0,e),this.input[e].channelCount=1,this.input[e].channelCountMode="explicit";this.left=this.input[0],this.right=this.input[1]},s.default.extend(s.default.Merge,s.default.AudioNode),s.default.Merge.prototype.dispose=function(){return this.input.forEach(function(t){t.dispose()}),s.default.AudioNode.prototype.dispose.call(this),this.left=null,this.right=null,this._merger.disconnect(),this._merger=null,this},e.default=s.default.Merge},function(t,e,i){"use strict";i.r(e);var s=i(0);i(35),i(4);s.default.supported&&(AudioBuffer.prototype.copyToChannel||(AudioBuffer.prototype.copyToChannel=function(t,e,i){var s=this.getChannelData(e);i=i||0;for(var n=0;n<s.length;n++)s[n+i]=t[n]},AudioBuffer.prototype.copyFromChannel=function(t,e,i){var s=this.getChannelData(e);i=i||0;for(var n=0;n<t.length;n++)t[n]=s[n+i]})),s.default.Buffer=function(){var t=s.default.defaults(arguments,["url","onload","onerror"],s.default.Buffer);s.default.call(this),this._buffer=null,this._reversed=t.reverse,this._xhr=null,this.onload=s.default.noOp,t.url instanceof AudioBuffer||t.url instanceof s.default.Buffer?(this.set(t.url),this.loaded||(this.onload=t.onload)):s.default.isString(t.url)&&this.load(t.url).then(t.onload).catch(t.onerror)},s.default.extend(s.default.Buffer),s.default.Buffer.defaults={url:void 0,reverse:!1,onload:s.default.noOp,onerror:s.default.noOp},s.default.Buffer.prototype.set=function(t){return t instanceof s.default.Buffer?t.loaded?this._buffer=t.get():t.onload=function(){this.set(t),this.onload(this)}.bind(this):this._buffer=t,this._reversed&&this._reverse(),this},s.default.Buffer.prototype.get=function(){return this._buffer},s.default.Buffer.prototype.load=function(t,e,i){return new Promise(function(n,o){this._xhr=s.default.Buffer.load(t,function(t){this._xhr=null,this.set(t),n(this),this.onload(this),e&&e(this)}.bind(this),function(t){this._xhr=null,o(t),i&&i(t)}.bind(this))}.bind(this))},s.default.Buffer.prototype.dispose=function(){return s.default.prototype.dispose.call(this),this._buffer=null,this._xhr&&(s.default.Buffer._removeFromDownloadQueue(this._xhr),this._xhr.abort(),this._xhr=null),this},Object.defineProperty(s.default.Buffer.prototype,"loaded",{get:function(){return this.length>0}}),Object.defineProperty(s.default.Buffer.prototype,"duration",{get:function(){return this._buffer?this._buffer.duration:0}}),Object.defineProperty(s.default.Buffer.prototype,"length",{get:function(){return this._buffer?this._buffer.length:0}}),Object.defineProperty(s.default.Buffer.prototype,"numberOfChannels",{get:function(){return this._buffer?this._buffer.numberOfChannels:0}}),s.default.Buffer.prototype.fromArray=function(t){var e=t[0].length>0,i=e?t.length:1,s=e?t[0].length:t.length,n=this.context.createBuffer(i,s,this.context.sampleRate);e||1!==i||(t=[t]);for(var o=0;o<i;o++)n.copyToChannel(t[o],o);return this._buffer=n,this},s.default.Buffer.prototype.toMono=function(t){if(s.default.isNumber(t))this.fromArray(this.toArray(t));else{for(var e=new Float32Array(this.length),i=this.numberOfChannels,n=0;n<i;n++)for(var o=this.toArray(n),a=0;a<o.length;a++)e[a]+=o[a];e=e.map(function(t){return t/i}),this.fromArray(e)}return this},s.default.Buffer.prototype.toArray=function(t){if(s.default.isNumber(t))return this.getChannelData(t);if(1===this.numberOfChannels)return this.toArray(0);for(var e=[],i=0;i<this.numberOfChannels;i++)e[i]=this.getChannelData(i);return e},s.default.Buffer.prototype.getChannelData=function(t){return this._buffer.getChannelData(t)},s.default.Buffer.prototype.slice=function(t,e){e=s.default.defaultArg(e,this.duration);for(var i=Math.floor(this.context.sampleRate*this.toSeconds(t)),n=Math.floor(this.context.sampleRate*this.toSeconds(e)),o=[],a=0;a<this.numberOfChannels;a++)o[a]=this.toArray(a).slice(i,n);return(new s.default.Buffer).fromArray(o)},s.default.Buffer.prototype._reverse=function(){if(this.loaded)for(var t=0;t<this.numberOfChannels;t++)Array.prototype.reverse.call(this.getChannelData(t));return this},Object.defineProperty(s.default.Buffer.prototype,"reverse",{get:function(){return this._reversed},set:function(t){this._reversed!==t&&(this._reversed=t,this._reverse())}}),s.default.Emitter.mixin(s.default.Buffer),s.default.Buffer._downloadQueue=[],s.default.Buffer.baseUrl="",s.default.Buffer.fromArray=function(t){return(new s.default.Buffer).fromArray(t)},s.default.Buffer.fromUrl=function(t){var e=new s.default.Buffer;return e.load(t).then(function(){return e})},s.default.Buffer._removeFromDownloadQueue=function(t){var e=s.default.Buffer._downloadQueue.indexOf(t);-1!==e&&s.default.Buffer._downloadQueue.splice(e,1)},s.default.Buffer.load=function(t,e,i){e=s.default.defaultArg(e,s.default.noOp);var n=t.match(/\[(.+\|?)+\]$/);if(n){for(var o=n[1].split("|"),a=o[0],r=0;r<o.length;r++)if(s.default.Buffer.supportsType(o[r])){a=o[r];break}t=t.replace(n[0],a)}function l(t){if(s.default.Buffer._removeFromDownloadQueue(d),s.default.Buffer.emit("error",t),!i)throw t;i(t)}function u(){for(var t=0,e=0;e<s.default.Buffer._downloadQueue.length;e++)t+=s.default.Buffer._downloadQueue[e].progress;s.default.Buffer.emit("progress",t/s.default.Buffer._downloadQueue.length)}var d=new XMLHttpRequest;return d.open("GET",s.default.Buffer.baseUrl+t,!0),d.responseType="arraybuffer",d.progress=0,s.default.Buffer._downloadQueue.push(d),d.addEventListener("load",function(){200===d.status?s.default.context.decodeAudioData(d.response).then(function(t){d.progress=1,u(),e(t),s.default.Buffer._removeFromDownloadQueue(d),0===s.default.Buffer._downloadQueue.length&&s.default.Buffer.emit("load")}).catch(function(){s.default.Buffer._removeFromDownloadQueue(d),l("Tone.Buffer: could not decode audio data: "+t)}):l("Tone.Buffer: could not locate file: "+t)}),d.addEventListener("error",l),d.addEventListener("progress",function(t){t.lengthComputable&&(d.progress=t.loaded/t.total*.95,u())}),d.send(),d},s.default.Buffer.cancelDownloads=function(){return s.default.Buffer._downloadQueue.slice().forEach(function(t){s.default.Buffer._removeFromDownloadQueue(t),t.abort()}),s.default.Buffer},s.default.Buffer.supportsType=function(t){var e=t.split(".");return e=e[e.length-1],""!==document.createElement("audio").canPlayType("audio/"+e)},s.default.loaded=function(){var t,e;function i(){s.default.Buffer.off("load",t),s.default.Buffer.off("error",e)}return new Promise(function(i,n){t=function(){i()},e=function(){n()},s.default.Buffer.on("load",t),s.default.Buffer.on("error",e)}).then(i).catch(function(t){throw i(),new Error(t)})};e.default=s.default.Buffer},function(t,e,i){"use strict";i.r(e);var s=i(0);i(17),i(26),i(1),i(2),i(22),i(4),i(28);s.default.LFO=function(){var t=s.default.defaults(arguments,["frequency","min","max"],s.default.LFO);s.default.AudioNode.call(this),this._oscillator=new s.default.Oscillator({frequency:t.frequency,type:t.type}),this.frequency=this._oscillator.frequency,this.amplitude=this._oscillator.volume,this.amplitude.units=s.default.Type.NormalRange,this.amplitude.value=t.amplitude,this._stoppedSignal=new s.default.Signal(0,s.default.Type.AudioRange),this._zeros=new s.default.Zero,this._stoppedValue=0,this._a2g=new s.default.AudioToGain,this._scaler=this.output=new s.default.Scale(t.min,t.max),this._units=s.default.Type.Default,this.units=t.units,this._oscillator.chain(this._a2g,this._scaler),this._zeros.connect(this._a2g),this._stoppedSignal.connect(this._a2g),this._readOnly(["amplitude","frequency"]),this.phase=t.phase},s.default.extend(s.default.LFO,s.default.AudioNode),s.default.LFO.defaults={type:"sine",min:0,max:1,phase:0,frequency:"4n",amplitude:1,units:s.default.Type.Default},s.default.LFO.prototype.start=function(t){return t=this.toSeconds(t),this._stoppedSignal.setValueAtTime(0,t),this._oscillator.start(t),this},s.default.LFO.prototype.stop=function(t){return t=this.toSeconds(t),this._stoppedSignal.setValueAtTime(this._stoppedValue,t),this._oscillator.stop(t),this},s.default.LFO.prototype.sync=function(){return this._oscillator.sync(),this._oscillator.syncFrequency(),this},s.default.LFO.prototype.unsync=function(){return this._oscillator.unsync(),this._oscillator.unsyncFrequency(),this},Object.defineProperty(s.default.LFO.prototype,"min",{get:function(){return this._toUnits(this._scaler.min)},set:function(t){t=this._fromUnits(t),this._scaler.min=t}}),Object.defineProperty(s.default.LFO.prototype,"max",{get:function(){return this._toUnits(this._scaler.max)},set:function(t){t=this._fromUnits(t),this._scaler.max=t}}),Object.defineProperty(s.default.LFO.prototype,"type",{get:function(){return this._oscillator.type},set:function(t){this._oscillator.type=t,this._stoppedValue=this._oscillator._getInitialValue(),this._stoppedSignal.value=this._stoppedValue}}),Object.defineProperty(s.default.LFO.prototype,"phase",{get:function(){return this._oscillator.phase},set:function(t){this._oscillator.phase=t,this._stoppedValue=this._oscillator._getInitialValue(),this._stoppedSignal.value=this._stoppedValue}}),Object.defineProperty(s.default.LFO.prototype,"units",{get:function(){return this._units},set:function(t){var e=this.min,i=this.max;this._units=t,this.min=e,this.max=i}}),Object.defineProperty(s.default.LFO.prototype,"state",{get:function(){return this._oscillator.state}}),s.default.LFO.prototype.connect=function(t){return t.constructor!==s.default.Signal&&t.constructor!==s.default.Param||(this.convert=t.convert,this.units=t.units),s.default.SignalBase.prototype.connect.apply(this,arguments),this},s.default.LFO.prototype._fromUnits=s.default.Param.prototype._fromUnits,s.default.LFO.prototype._toUnits=s.default.Param.prototype._toUnits,s.default.LFO.prototype.dispose=function(){return s.default.AudioNode.prototype.dispose.call(this),this._writable(["amplitude","frequency"]),this._oscillator.dispose(),this._oscillator=null,this._stoppedSignal.dispose(),this._stoppedSignal=null,this._zeros.dispose(),this._zeros=null,this._scaler.dispose(),this._scaler=null,this._a2g.dispose(),this._a2g=null,this.frequency=null,this.amplitude=null,this},e.default=s.default.LFO},function(t,e,i){"use strict";i.r(e);var s=i(0);i(29),i(90),i(2),i(3);s.default.Subtract=function(t){s.default.Signal.call(this),this.createInsOuts(2,0),this._sum=this.input[0]=this.output=new s.default.Gain,this._neg=new s.default.Negate,this._param=this.input[1]=new s.default.Signal(t),this._param.chain(this._neg,this._sum)},s.default.extend(s.default.Subtract,s.default.Signal),s.default.Subtract.prototype.dispose=function(){return s.default.Signal.prototype.dispose.call(this),this._neg.dispose(),this._neg=null,this._sum.disconnect(),this._sum=null,this},e.default=s.default.Subtract},function(t,e,i){"use strict";i.r(e);var s=i(0);i(4),i(1),i(24);s.default.Param=function(){var t=s.default.defaults(arguments,["param","units","convert"],s.default.Param);s.default.AudioNode.call(this,t),this._param=this.input=t.param,this.units=t.units,this.convert=t.convert,this.overridden=!1,this._events=new s.default.Timeline(1e3),s.default.isDefined(t.value)&&this._param&&this.setValueAtTime(t.value,0)},s.default.extend(s.default.Param,s.default.AudioNode),s.default.Param.defaults={units:s.default.Type.Default,convert:!0,param:void 0},Object.defineProperty(s.default.Param.prototype,"value",{get:function(){var t=this.now();return this._toUnits(this.getValueAtTime(t))},set:function(t){this._initialValue=this._fromUnits(t),this.cancelScheduledValues(this.now()),this.setValueAtTime(t,this.now())}}),Object.defineProperty(s.default.Param.prototype,"minValue",{get:function(){return this.units===s.default.Type.Time||this.units===s.default.Type.Frequency||this.units===s.default.Type.NormalRange||this.units===s.default.Type.Positive||this.units===s.default.Type.BPM?0:this.units===s.default.Type.AudioRange?-1:this.units===s.default.Type.Decibels?-1/0:this._param.minValue}}),Object.defineProperty(s.default.Param.prototype,"maxValue",{get:function(){return this.units===s.default.Type.NormalRange||this.units===s.default.Type.AudioRange?1:this._param.maxValue}}),s.default.Param.prototype._fromUnits=function(t){if(!this.convert&&!s.default.isUndef(this.convert)||this.overridden)return t;switch(this.units){case s.default.Type.Time:return this.toSeconds(t);case s.default.Type.Frequency:return this.toFrequency(t);case s.default.Type.Decibels:return s.default.dbToGain(t);case s.default.Type.NormalRange:return Math.min(Math.max(t,0),1);case s.default.Type.AudioRange:return Math.min(Math.max(t,-1),1);case s.default.Type.Positive:return Math.max(t,0);default:return t}},s.default.Param.prototype._toUnits=function(t){if(!this.convert&&!s.default.isUndef(this.convert))return t;switch(this.units){case s.default.Type.Decibels:return s.default.gainToDb(t);default:return t}},s.default.Param.prototype._minOutput=1e-5,s.default.Param.AutomationType={Linear:"linearRampToValueAtTime",Exponential:"exponentialRampToValueAtTime",Target:"setTargetAtTime",SetValue:"setValueAtTime",Cancel:"cancelScheduledValues"},s.default.Param.prototype.setValueAtTime=function(t,e){return e=this.toSeconds(e),t=this._fromUnits(t),this._events.add({type:s.default.Param.AutomationType.SetValue,value:t,time:e}),this.log(s.default.Param.AutomationType.SetValue,t,e),this._param.setValueAtTime(t,e),this},s.default.Param.prototype.getValueAtTime=function(t){t=this.toSeconds(t);var e=this._events.getAfter(t),i=this._events.get(t),n=s.default.defaultArg(this._initialValue,this._param.defaultValue),o=n;if(null===i)o=n;else if(i.type===s.default.Param.AutomationType.Target){var a,r=this._events.getBefore(i.time);a=null===r?n:r.value,o=this._exponentialApproach(i.time,a,i.value,i.constant,t)}else o=null===e?i.value:e.type===s.default.Param.AutomationType.Linear?this._linearInterpolate(i.time,i.value,e.time,e.value,t):e.type===s.default.Param.AutomationType.Exponential?this._exponentialInterpolate(i.time,i.value,e.time,e.value,t):i.value;return o},s.default.Param.prototype.setRampPoint=function(t){t=this.toSeconds(t);var e=this.getValueAtTime(t);return this.cancelAndHoldAtTime(t),0===e&&(e=this._minOutput),this.setValueAtTime(this._toUnits(e),t),this},s.default.Param.prototype.linearRampToValueAtTime=function(t,e){return t=this._fromUnits(t),e=this.toSeconds(e),this._events.add({type:s.default.Param.AutomationType.Linear,value:t,time:e}),this.log(s.default.Param.AutomationType.Linear,t,e),this._param.linearRampToValueAtTime(t,e),this},s.default.Param.prototype.exponentialRampToValueAtTime=function(t,e){return t=this._fromUnits(t),t=Math.max(this._minOutput,t),e=this.toSeconds(e),this._events.add({type:s.default.Param.AutomationType.Exponential,time:e,value:t}),this.log(s.default.Param.AutomationType.Exponential,t,e),this._param.exponentialRampToValueAtTime(t,e),this},s.default.Param.prototype.exponentialRampTo=function(t,e,i){return i=this.toSeconds(i),this.setRampPoint(i),this.exponentialRampToValueAtTime(t,i+this.toSeconds(e)),this},s.default.Param.prototype.linearRampTo=function(t,e,i){return i=this.toSeconds(i),this.setRampPoint(i),this.linearRampToValueAtTime(t,i+this.toSeconds(e)),this},s.default.Param.prototype.targetRampTo=function(t,e,i){return i=this.toSeconds(i),this.setRampPoint(i),this.exponentialApproachValueAtTime(t,i,e),this},s.default.Param.prototype.exponentialApproachValueAtTime=function(t,e,i){var s=Math.log(this.toSeconds(i)+1)/Math.log(200);return e=this.toSeconds(e),this.setTargetAtTime(t,e,s),this.cancelAndHoldAtTime(e+.9*i),this.linearRampToValueAtTime(t,e+i),this},s.default.Param.prototype.setTargetAtTime=function(t,e,i){if(t=this._fromUnits(t),i<=0)throw new Error("timeConstant must be greater than 0");return e=this.toSeconds(e),this._events.add({type:s.default.Param.AutomationType.Target,value:t,time:e,constant:i}),this.log(s.default.Param.AutomationType.Target,t,e,i),this._param.setTargetAtTime(t,e,i),this},s.default.Param.prototype.setValueCurveAtTime=function(t,e,i,n){n=s.default.defaultArg(n,1),i=this.toSeconds(i),e=this.toSeconds(e),this.setValueAtTime(t[0]*n,e);for(var o=i/(t.length-1),a=1;a<t.length;a++)this.linearRampToValueAtTime(t[a]*n,e+a*o);return this},s.default.Param.prototype.cancelScheduledValues=function(t){return t=this.toSeconds(t),this._events.cancel(t),this._param.cancelScheduledValues(t),this.log(s.default.Param.AutomationType.Cancel,t),this},s.default.Param.prototype.cancelAndHoldAtTime=function(t){t=this.toSeconds(t);var e=this.getValueAtTime(t);this.log("cancelAndHoldAtTime",t,"value="+e),this._param.cancelScheduledValues(t);var i=this._events.get(t),n=this._events.getAfter(t);return i&&i.time===t?n?this._events.cancel(n.time):this._events.cancel(t+this.sampleTime):n&&(this._events.cancel(n.time),n.type===s.default.Param.AutomationType.Linear?this.linearRampToValueAtTime(e,t):n.type===s.default.Param.AutomationType.Exponential&&this.exponentialRampToValueAtTime(e,t)),this._events.add({type:s.default.Param.AutomationType.SetValue,value:e,time:t}),this._param.setValueAtTime(e,t),this},s.default.Param.prototype.rampTo=function(t,e,i){return e=s.default.defaultArg(e,.1),this.units===s.default.Type.Frequency||this.units===s.default.Type.BPM||this.units===s.default.Type.Decibels?this.exponentialRampTo(t,e,i):this.linearRampTo(t,e,i),this},s.default.Param.prototype._exponentialApproach=function(t,e,i,s,n){return i+(e-i)*Math.exp(-(n-t)/s)},s.default.Param.prototype._linearInterpolate=function(t,e,i,s,n){return e+(n-t)/(i-t)*(s-e)},s.default.Param.prototype._exponentialInterpolate=function(t,e,i,s,n){return e*Math.pow(s/e,(n-t)/(i-t))},s.default.Param.prototype.dispose=function(){return s.default.AudioNode.prototype.dispose.call(this),this._param=null,this._events=null,this},e.default=s.default.Param},function(t,e,i){"use strict";i.r(e);var s=i(0);i(8),i(19),i(10),i(23);s.default.StereoEffect=function(){s.default.AudioNode.call(this);var t=s.default.defaults(arguments,["wet"],s.default.Effect);this.createInsOuts(1,1),this._dryWet=new s.default.CrossFade(t.wet),this.wet=this._dryWet.fade,this._split=new s.default.Split,this.effectSendL=this._split.left,this.effectSendR=this._split.right,this._merge=new s.default.Merge,this.effectReturnL=this._merge.left,this.effectReturnR=this._merge.right,s.default.connect(this.input,this._split),s.default.connect(this.input,this._dryWet,0,0),this._merge.connect(this._dryWet,0,1),this._dryWet.connect(this.output),this._readOnly(["wet"])},s.default.extend(s.default.StereoEffect,s.default.Effect),s.default.StereoEffect.prototype.dispose=function(){return s.default.AudioNode.prototype.dispose.call(this),this._dryWet.dispose(),this._dryWet=null,this._split.dispose(),this._split=null,this._merge.dispose(),this._merge=null,this.effectSendL=null,this.effectSendR=null,this.effectReturnL=null,this.effectReturnR=null,this._writable(["wet"]),this.wet=null,this},e.default=s.default.StereoEffect},function(t,e,i){"use strict";i.r(e);var s=i(0);i(83),i(4),i(24),i(35),i(3),i(81),i(80),i(56);s.default.Transport=function(){s.default.Emitter.call(this),s.default.getContext(function(){this.loop=!1,this._loopStart=0,this._loopEnd=0,this._ppq=n.defaults.PPQ,this._clock=new s.default.Clock({callback:this._processTick.bind(this),frequency:0}),this._bindClockEvents(),this.bpm=this._clock.frequency,this.bpm._toUnits=this._toUnits.bind(this),this.bpm._fromUnits=this._fromUnits.bind(this),this.bpm.units=s.default.Type.BPM,this.bpm.value=n.defaults.bpm,this._readOnly("bpm"),this._timeSignature=n.defaults.timeSignature,this._scheduledEvents={},this._timeline=new s.default.Timeline,this._repeatedEvents=new s.default.IntervalTimeline,this._syncedSignals=[],this._swingTicks=n.defaults.PPQ/2,this._swingAmount=0,this.context.transport=this}.bind(this))},s.default.extend(s.default.Transport,s.default.Emitter),s.default.Transport.defaults={bpm:120,swing:0,swingSubdivision:"8n",timeSignature:4,loopStart:0,loopEnd:"4m",PPQ:192},s.default.Transport.prototype.isTransport=!0,s.default.Transport.prototype._processTick=function(t,e){if(this._swingAmount>0&&e%this._ppq!=0&&e%(2*this._swingTicks)!=0){var i=e%(2*this._swingTicks)/(2*this._swingTicks),n=Math.sin(i*Math.PI)*this._swingAmount;t+=s.default.Ticks(2*this._swingTicks/3).toSeconds()*n}this.loop&&e>=this._loopEnd&&(this.emit("loopEnd",t),this._clock.setTicksAtTime(this._loopStart,t),e=this._loopStart,this.emit("loopStart",t,this._clock.getSecondsAtTime(t)),this.emit("loop",t)),this._timeline.forEachAtTime(e,function(e){e.invoke(t)})},s.default.Transport.prototype.schedule=function(t,e){var i=new s.default.TransportEvent(this,{time:s.default.TransportTime(e),callback:t});return this._addEvent(i,this._timeline)},s.default.Transport.prototype.scheduleRepeat=function(t,e,i,n){var o=new s.default.TransportRepeatEvent(this,{callback:t,interval:s.default.Time(e),time:s.default.TransportTime(i),duration:s.default.Time(s.default.defaultArg(n,1/0))});return this._addEvent(o,this._repeatedEvents)},s.default.Transport.prototype.scheduleOnce=function(t,e){var i=new s.default.TransportEvent(this,{time:s.default.TransportTime(e),callback:t,once:!0});return this._addEvent(i,this._timeline)},s.default.Transport.prototype.clear=function(t){if(this._scheduledEvents.hasOwnProperty(t)){var e=this._scheduledEvents[t.toString()];e.timeline.remove(e.event),e.event.dispose(),delete this._scheduledEvents[t.toString()]}return this},s.default.Transport.prototype._addEvent=function(t,e){return this._scheduledEvents[t.id.toString()]={event:t,timeline:e},e.add(t),t.id},s.default.Transport.prototype.cancel=function(t){return t=s.default.defaultArg(t,0),t=this.toTicks(t),this._timeline.forEachFrom(t,function(t){this.clear(t.id)}.bind(this)),this._repeatedEvents.forEachFrom(t,function(t){this.clear(t.id)}.bind(this)),this},s.default.Transport.prototype._bindClockEvents=function(){this._clock.on("start",function(t,e){e=s.default.Ticks(e).toSeconds(),this.emit("start",t,e)}.bind(this)),this._clock.on("stop",function(t){this.emit("stop",t)}.bind(this)),this._clock.on("pause",function(t){this.emit("pause",t)}.bind(this))},Object.defineProperty(s.default.Transport.prototype,"state",{get:function(){return this._clock.getStateAtTime(this.now())}}),s.default.Transport.prototype.start=function(t,e){return s.default.isDefined(e)&&(e=this.toTicks(e)),this._clock.start(t,e),this},s.default.Transport.prototype.stop=function(t){return this._clock.stop(t),this},s.default.Transport.prototype.pause=function(t){return this._clock.pause(t),this},s.default.Transport.prototype.toggle=function(t){return t=this.toSeconds(t),this._clock.getStateAtTime(t)!==s.default.State.Started?this.start(t):this.stop(t),this},Object.defineProperty(s.default.Transport.prototype,"timeSignature",{get:function(){return this._timeSignature},set:function(t){s.default.isArray(t)&&(t=t[0]/t[1]*4),this._timeSignature=t}}),Object.defineProperty(s.default.Transport.prototype,"loopStart",{get:function(){return s.default.Ticks(this._loopStart).toSeconds()},set:function(t){this._loopStart=this.toTicks(t)}}),Object.defineProperty(s.default.Transport.prototype,"loopEnd",{get:function(){return s.default.Ticks(this._loopEnd).toSeconds()},set:function(t){this._loopEnd=this.toTicks(t)}}),s.default.Transport.prototype.setLoopPoints=function(t,e){return this.loopStart=t,this.loopEnd=e,this},Object.defineProperty(s.default.Transport.prototype,"swing",{get:function(){return this._swingAmount},set:function(t){this._swingAmount=t}}),Object.defineProperty(s.default.Transport.prototype,"swingSubdivision",{get:function(){return s.default.Ticks(this._swingTicks).toNotation()},set:function(t){this._swingTicks=this.toTicks(t)}}),Object.defineProperty(s.default.Transport.prototype,"position",{get:function(){var t=this.now(),e=this._clock.getTicksAtTime(t);return s.default.Ticks(e).toBarsBeatsSixteenths()},set:function(t){var e=this.toTicks(t);this.ticks=e}}),Object.defineProperty(s.default.Transport.prototype,"seconds",{get:function(){return this._clock.seconds},set:function(t){var e=this.now(),i=this.bpm.timeToTicks(t,e);this.ticks=i}}),Object.defineProperty(s.default.Transport.prototype,"progress",{get:function(){if(this.loop){var t=this.now();return(this._clock.getTicksAtTime(t)-this._loopStart)/(this._loopEnd-this._loopStart)}return 0}}),Object.defineProperty(s.default.Transport.prototype,"ticks",{get:function(){return this._clock.ticks},set:function(t){if(this._clock.ticks!==t){var e=this.now();this.state===s.default.State.Started?(this.emit("stop",e),this._clock.setTicksAtTime(t,e),this.emit("start",e,this.seconds)):this._clock.setTicksAtTime(t,e)}}}),s.default.Transport.prototype.getTicksAtTime=function(t){return Math.round(this._clock.getTicksAtTime(t))},s.default.Transport.prototype.getSecondsAtTime=function(t){return this._clock.getSecondsAtTime(t)},Object.defineProperty(s.default.Transport.prototype,"PPQ",{get:function(){return this._ppq},set:function(t){var e=this.bpm.value;this._ppq=t,this.bpm.value=e}}),s.default.Transport.prototype._fromUnits=function(t){return 1/(60/t/this.PPQ)},s.default.Transport.prototype._toUnits=function(t){return t/this.PPQ*60},s.default.Transport.prototype.nextSubdivision=function(t){if(t=this.toTicks(t),this.state!==s.default.State.Started)return 0;var e=this.now(),i=t-this.getTicksAtTime(e)%t;return this._clock.nextTickTime(i,e)},s.default.Transport.prototype.syncSignal=function(t,e){if(!e){var i=this.now();e=0!==t.getValueAtTime(i)?t.getValueAtTime(i)/this.bpm.getValueAtTime(i):0}var n=new s.default.Gain(e);return this.bpm.chain(n,t._param),this._syncedSignals.push({ratio:n,signal:t,initial:t.value}),t.value=0,this},s.default.Transport.prototype.unsyncSignal=function(t){for(var e=this._syncedSignals.length-1;e>=0;e--){var i=this._syncedSignals[e];i.signal===t&&(i.ratio.dispose(),i.signal.value=i.initial,this._syncedSignals.splice(e,1))}return this},s.default.Transport.prototype.dispose=function(){return s.default.Emitter.prototype.dispose.call(this),this._clock.dispose(),this._clock=null,this._writable("bpm"),this.bpm=null,this._timeline.dispose(),this._timeline=null,this._repeatedEvents.dispose(),this._repeatedEvents=null,this};var n=s.default.Transport;s.default.Transport=new n,s.default.Context.on("init",function(t){t.transport&&t.transport.isTransport?s.default.Transport=t.transport:s.default.Transport=new n}),s.default.Context.on("close",function(t){t.transport&&t.transport.isTransport&&t.transport.dispose()}),e.default=s.default.Transport},function(t,e,i){"use strict";i.r(e);var s=i(0);i(2),i(6),i(16),i(64);s.default.Oscillator=function(){var t=s.default.defaults(arguments,["frequency","type"],s.default.Oscillator);s.default.Source.call(this,t),this._oscillator=null,this.frequency=new s.default.Signal(t.frequency,s.default.Type.Frequency),this.detune=new s.default.Signal(t.detune,s.default.Type.Cents),this._wave=null,this._partials=t.partials,this._partialCount=t.partialCount,this._phase=t.phase,this._type=t.type,t.partialCount&&t.type!==s.default.Oscillator.Type.Custom&&(this._type=this.baseType+t.partialCount.toString()),this.phase=this._phase,this._readOnly(["frequency","detune"])},s.default.extend(s.default.Oscillator,s.default.Source),s.default.Oscillator.defaults={type:"sine",frequency:440,detune:0,phase:0,partials:[],partialCount:0},s.default.Oscillator.Type={Sine:"sine",Triangle:"triangle",Sawtooth:"sawtooth",Square:"square",Custom:"custom"},s.default.Oscillator.prototype._start=function(t){this.log("start",t);var e=new s.default.OscillatorNode;this._oscillator=e,this._wave?this._oscillator.setPeriodicWave(this._wave):this._oscillator.type=this._type,this._oscillator.connect(this.output),this.frequency.connect(this._oscillator.frequency),this.detune.connect(this._oscillator.detune),t=this.toSeconds(t),this._oscillator.start(t)},s.default.Oscillator.prototype._stop=function(t){return this.log("stop",t),this._oscillator&&(t=this.toSeconds(t),this._oscillator.stop(t)),this},s.default.Oscillator.prototype.restart=function(t){return this._oscillator&&this._oscillator.cancelStop(),this._state.cancel(this.toSeconds(t)),this},s.default.Oscillator.prototype.syncFrequency=function(){return s.default.Transport.syncSignal(this.frequency),this},s.default.Oscillator.prototype.unsyncFrequency=function(){return s.default.Transport.unsyncSignal(this.frequency),this},Object.defineProperty(s.default.Oscillator.prototype,"type",{get:function(){return this._type},set:function(t){var e=[s.default.Oscillator.Type.Sine,s.default.Oscillator.Type.Square,s.default.Oscillator.Type.Triangle,s.default.Oscillator.Type.Sawtooth].includes(t);if(0===this._phase&&e)this._wave=null,this._partialCount=0,null!==this._oscillator&&(this._oscillator.type=t);else{var i=this._getRealImaginary(t,this._phase),n=this.context.createPeriodicWave(i[0],i[1]);this._wave=n,null!==this._oscillator&&this._oscillator.setPeriodicWave(this._wave)}this._type=t}}),Object.defineProperty(s.default.Oscillator.prototype,"baseType",{get:function(){return this._type.replace(this.partialCount,"")},set:function(t){this.partialCount&&this._type!==s.default.Oscillator.Type.Custom&&t!==s.default.Oscillator.Type.Custom?this.type=t+this.partialCount:this.type=t}}),Object.defineProperty(s.default.Oscillator.prototype,"partialCount",{get:function(){return this._partialCount},set:function(t){var e=this._type,i=/^(sine|triangle|square|sawtooth)(\d+)$/.exec(this._type);i&&(e=i[1]),this._type!==s.default.Oscillator.Type.Custom&&(this.type=0===t?e:e+t.toString())}}),s.default.Oscillator.prototype.get=function(){var t=s.default.prototype.get.apply(this,arguments);return t.type!==s.default.Oscillator.Type.Custom&&delete t.partials,t},s.default.Oscillator.prototype._getRealImaginary=function(t,e){var i=2048,n=new Float32Array(i),o=new Float32Array(i),a=1;if(t===s.default.Oscillator.Type.Custom)a=this._partials.length+1,this._partialCount=this._partials.length,i=a;else{var r=/^(sine|triangle|square|sawtooth)(\d+)$/.exec(t);r?(a=parseInt(r[2])+1,this._partialCount=parseInt(r[2]),t=r[1],i=a=Math.max(a,2)):this._partialCount=0,this._partials=[]}for(var l=1;l<i;++l){var u,d=2/(l*Math.PI);switch(t){case s.default.Oscillator.Type.Sine:u=l<=a?1:0,this._partials[l-1]=u;break;case s.default.Oscillator.Type.Square:u=1&l?2*d:0,this._partials[l-1]=u;break;case s.default.Oscillator.Type.Sawtooth:u=d*(1&l?1:-1),this._partials[l-1]=u;break;case s.default.Oscillator.Type.Triangle:u=1&l?d*d*2*(l-1>>1&1?-1:1):0,this._partials[l-1]=u;break;case s.default.Oscillator.Type.Custom:u=this._partials[l-1];break;default:throw new TypeError("Tone.Oscillator: invalid type: "+t)}0!==u?(n[l]=-u*Math.sin(e*l),o[l]=u*Math.cos(e*l)):(n[l]=0,o[l]=0)}return[n,o]},s.default.Oscillator.prototype._inverseFFT=function(t,e,i){for(var s=0,n=t.length,o=0;o<n;o++)s+=t[o]*Math.cos(o*i)+e[o]*Math.sin(o*i);return s},s.default.Oscillator.prototype._getInitialValue=function(){for(var t=this._getRealImaginary(this._type,0),e=t[0],i=t[1],s=0,n=2*Math.PI,o=0;o<8;o++)s=Math.max(this._inverseFFT(e,i,o/8*n),s);return-this._inverseFFT(e,i,this._phase)/s},Object.defineProperty(s.default.Oscillator.prototype,"partials",{get:function(){return this._partials},set:function(t){this._partials=t,this.type=s.default.Oscillator.Type.Custom}}),Object.defineProperty(s.default.Oscillator.prototype,"phase",{get:function(){return this._phase*(180/Math.PI)},set:function(t){this._phase=t*Math.PI/180,this.type=this._type}}),s.default.Oscillator.prototype.dispose=function(){return s.default.Source.prototype.dispose.call(this),null!==this._oscillator&&(this._oscillator.dispose(),this._oscillator=null),this._wave=null,this._writable(["frequency","detune"]),this.frequency.dispose(),this.frequency=null,this.detune.dispose(),this.detune=null,this._partials=null,this},e.default=s.default.Oscillator},function(t,e,i){"use strict";i.r(e);var s=i(0);i(14),i(1);s.default.Delay=function(){var t=s.default.defaults(arguments,["delayTime","maxDelay"],s.default.Delay);s.default.AudioNode.call(this,t),this._maxDelay=Math.max(this.toSeconds(t.maxDelay),this.toSeconds(t.delayTime)),this._delayNode=this.input=this.output=this.context.createDelay(this._maxDelay),this.delayTime=new s.default.Param({param:this._delayNode.delayTime,units:s.default.Type.Time,value:t.delayTime}),this._readOnly("delayTime")},s.default.extend(s.default.Delay,s.default.AudioNode),s.default.Delay.defaults={maxDelay:1,delayTime:0},Object.defineProperty(s.default.Delay.prototype,"maxDelay",{get:function(){return this._maxDelay}}),s.default.Delay.prototype.dispose=function(){return s.default.AudioNode.prototype.dispose.call(this),this._delayNode.disconnect(),this._delayNode=null,this._writable("delayTime"),this.delayTime=null,this},e.default=s.default.Delay},function(t,e,i){"use strict";i.r(e);var s=i(0);i(3),i(1);s.default.Split=function(t){t=s.default.defaultArg(t,2),s.default.AudioNode.call(this),this.createInsOuts(0,t),this._splitter=this.input=this.context.createChannelSplitter(t);for(var e=0;e<t;e++)this.output[e]=new s.default.Gain,s.default.connect(this._splitter,this.output[e],e,0),this.output[e].channelCount=1,this.output[e].channelCountMode="explicit";this.left=this.output[0],this.right=this.output[1]},s.default.extend(s.default.Split,s.default.AudioNode),s.default.Split.prototype.dispose=function(){return this.output.forEach(function(t){t.dispose()}),s.default.AudioNode.prototype.dispose.call(this),this._splitter.disconnect(),this.left=null,this.right=null,this._splitter=null,this},e.default=s.default.Split},function(t,e,i){"use strict";i.r(e);var s=i(0),n=(i(35),i(24),i(44),["baseLatency","destination","currentTime","sampleRate","listener","state"]),o=["suspend","close","resume","getOutputTimestamp","createMediaElementSource","createMediaStreamSource","createMediaStreamDestination","createBuffer","decodeAudioData","createBufferSource","createConstantSource","createGain","createDelay","createBiquadFilter","createIIRFilter","createWaveShaper","createPanner","createConvolver","createDynamicsCompressor","createAnalyser","createScriptProcessor","createStereoPanner","createOscillator","createPeriodicWave","createChannelSplitter","createChannelMerger","audioWorklet"];s.default.Context=function(){s.default.Emitter.call(this);var t=s.default.defaults(arguments,["context"],s.default.Context);if(!t.context&&(t.context=new s.default.global.AudioContext,!t.context))throw new Error("could not create AudioContext. Possibly too many AudioContexts running already.");for(this._context=t.context;this._context.rawContext;)this._context=this._context.rawContext;n.forEach(function(t){this._defineProperty(this._context,t)}.bind(this)),o.forEach(function(t){this._defineMethod(this._context,t)}.bind(this)),this._latencyHint=t.latencyHint,this._constants={},this.lookAhead=t.lookAhead,this._computedUpdateInterval=0,this._ticker=new a(this.emit.bind(this,"tick"),t.clockSource,t.updateInterval),this._timeouts=new s.default.Timeline,this._timeoutIds=0,this.on("tick",this._timeoutLoop.bind(this)),this._context.onstatechange=function(t){this.emit("statechange",t)}.bind(this)},s.default.extend(s.default.Context,s.default.Emitter),s.default.Emitter.mixin(s.default.Context),s.default.Context.defaults={clockSource:"worker",latencyHint:"interactive",lookAhead:.1,updateInterval:.03},s.default.Context.prototype.isContext=!0,s.default.Context.prototype._defineProperty=function(t,e){s.default.isUndef(this[e])&&Object.defineProperty(this,e,{get:function(){return t[e]},set:function(i){t[e]=i}})},s.default.Context.prototype._defineMethod=function(t,e){s.default.isUndef(this[e])&&Object.defineProperty(this,e,{get:function(){return t[e].bind(t)}})},s.default.Context.prototype.now=function(){return this._context.currentTime+this.lookAhead},Object.defineProperty(s.default.Context.prototype,"destination",{get:function(){return this.master?this.master:this._context.destination}}),s.default.Context.prototype.resume=function(){return"suspended"===this._context.state&&this._context instanceof AudioContext?this._context.resume():Promise.resolve()},s.default.Context.prototype.close=function(){var t=Promise.resolve();return this!==s.default.global.TONE_AUDIO_CONTEXT&&(t=this.rawContext.close()),t.then(function(){s.default.Context.emit("close",this)}.bind(this))},s.default.Context.prototype.getConstant=function(t){if(this._constants[t])return this._constants[t];for(var e=this._context.createBuffer(1,128,this._context.sampleRate),i=e.getChannelData(0),s=0;s<i.length;s++)i[s]=t;var n=this._context.createBufferSource();return n.channelCount=1,n.channelCountMode="explicit",n.buffer=e,n.loop=!0,n.start(0),this._constants[t]=n,n},s.default.Context.prototype._timeoutLoop=function(){for(var t=this.now();this._timeouts&&this._timeouts.length&&this._timeouts.peek().time<=t;)this._timeouts.shift().callback()},s.default.Context.prototype.setTimeout=function(t,e){this._timeoutIds++;var i=this.now();return this._timeouts.add({callback:t,time:i+e,id:this._timeoutIds}),this._timeoutIds},s.default.Context.prototype.clearTimeout=function(t){return this._timeouts.forEach(function(e){e.id===t&&this.remove(e)}),this},Object.defineProperty(s.default.Context.prototype,"updateInterval",{get:function(){return this._ticker.updateInterval},set:function(t){this._ticker.updateInterval=t}}),Object.defineProperty(s.default.Context.prototype,"rawContext",{get:function(){return this._context}}),Object.defineProperty(s.default.Context.prototype,"clockSource",{get:function(){return this._ticker.type},set:function(t){this._ticker.type=t}}),Object.defineProperty(s.default.Context.prototype,"latencyHint",{get:function(){return this._latencyHint},set:function(t){var e=t;if(this._latencyHint=t,s.default.isString(t))switch(t){case"interactive":e=.1,this._context.latencyHint=t;break;case"playback":e=.8,this._context.latencyHint=t;break;case"balanced":e=.25,this._context.latencyHint=t;break;case"fastest":this._context.latencyHint="interactive",e=.01}this.lookAhead=e,this.updateInterval=e/3}}),s.default.Context.prototype.dispose=function(){return this.close().then(function(){for(var t in s.default.Emitter.prototype.dispose.call(this),this._ticker.dispose(),this._ticker=null,this._timeouts.dispose(),this._timeouts=null,this._constants)this._constants[t].disconnect();this._constants=null}.bind(this))};var a=function(t,e,i){this._type=e,this._updateInterval=i,this._callback=s.default.defaultArg(t,s.default.noOp),this._createClock()};if(a.Type={Worker:"worker",Timeout:"timeout",Offline:"offline"},a.prototype._createWorker=function(){s.default.global.URL=s.default.global.URL||s.default.global.webkitURL;var t=new Blob(["var timeoutTime = "+(1e3*this._updateInterval).toFixed(1)+";self.onmessage = function(msg){\ttimeoutTime = parseInt(msg.data);};function tick(){\tsetTimeout(tick, timeoutTime);\tself.postMessage('tick');}tick();"]),e=URL.createObjectURL(t),i=new Worker(e);i.onmessage=this._callback.bind(this),this._worker=i},a.prototype._createTimeout=function(){this._timeout=setTimeout(function(){this._createTimeout(),this._callback()}.bind(this),1e3*this._updateInterval)},a.prototype._createClock=function(){if(this._type===a.Type.Worker)try{this._createWorker()}catch(t){this._type=a.Type.Timeout,this._createClock()}else this._type===a.Type.Timeout&&this._createTimeout()},Object.defineProperty(a.prototype,"updateInterval",{get:function(){return this._updateInterval},set:function(t){this._updateInterval=Math.max(t,128/44100),this._type===a.Type.Worker&&this._worker.postMessage(Math.max(1e3*t,1))}}),Object.defineProperty(a.prototype,"type",{get:function(){return this._type},set:function(t){this._disposeClock(),this._type=t,this._createClock()}}),a.prototype._disposeClock=function(){this._timeout&&(clearTimeout(this._timeout),this._timeout=null),this._worker&&(this._worker.terminate(),this._worker.onmessage=null,this._worker=null)},a.prototype.dispose=function(){this._disposeClock(),this._callback=null},s.default.supported&&!s.default.initialized){if(s.default.global.TONE_AUDIO_CONTEXT||(s.default.global.TONE_AUDIO_CONTEXT=new s.default.Context),s.default.context=s.default.global.TONE_AUDIO_CONTEXT,!s.default.global.TONE_SILENCE_LOGGING){var r="v";"dev"===s.default.version&&(r="");var l=" * Tone.js "+r+s.default.version+" * ";console.log("%c"+l,"background: #000; color: #fff")}}else s.default.supported||s.default.global.TONE_SILENCE_LOGGING||console.warn("This browser does not support Tone.js");e.default=s.default.Context},function(t,e,i){"use strict";i.r(e);var s=i(0);i(4),i(40);s.default.Instrument=function(t){t=s.default.defaultArg(t,s.default.Instrument.defaults),s.default.AudioNode.call(this),this._volume=this.output=new s.default.Volume(t.volume),this.volume=this._volume.volume,this._readOnly("volume"),this._scheduledEvents=[]},s.default.extend(s.default.Instrument,s.default.AudioNode),s.default.Instrument.defaults={volume:0},s.default.Instrument.prototype.triggerAttack=s.default.noOp,s.default.Instrument.prototype.triggerRelease=s.default.noOp,s.default.Instrument.prototype.sync=function(){return this._syncMethod("triggerAttack",1),this._syncMethod("triggerRelease",0),this},s.default.Instrument.prototype._syncMethod=function(t,e){var i=this["_original_"+t]=this[t];this[t]=function(){var t=Array.prototype.slice.call(arguments),n=t[e],o=s.default.Transport.schedule(function(s){t[e]=s,i.apply(this,t)}.bind(this),n);this._scheduledEvents.push(o)}.bind(this)},s.default.Instrument.prototype.unsync=function(){return this._scheduledEvents.forEach(function(t){s.default.Transport.clear(t)}),this._scheduledEvents=[],this._original_triggerAttack&&(this.triggerAttack=this._original_triggerAttack,this.triggerRelease=this._original_triggerRelease),this},s.default.Instrument.prototype.triggerAttackRelease=function(t,e,i,s){return i=this.toSeconds(i),e=this.toSeconds(e),this.triggerAttack(t,i,s),this.triggerRelease(i+e),this},s.default.Instrument.prototype.dispose=function(){return s.default.AudioNode.prototype.dispose.call(this),this._volume.dispose(),this._volume=null,this._writable(["volume"]),this.volume=null,this.unsync(),this._scheduledEvents=null,this},e.default=s.default.Instrument},function(t,e,i){"use strict";i.r(e);var s=i(0);i(7),i(2);s.default.AudioToGain=function(){s.default.SignalBase.call(this),this._norm=this.input=this.output=new s.default.WaveShaper(function(t){return(t+1)/2})},s.default.extend(s.default.AudioToGain,s.default.SignalBase),s.default.AudioToGain.prototype.dispose=function(){return s.default.SignalBase.prototype.dispose.call(this),this._norm.dispose(),this._norm=null,this},e.default=s.default.AudioToGain},function(t,e,i){"use strict";i.r(e);var s=i(0);i(2),i(13),i(89),i(3),i(1);s.default.CrossFade=function(t){s.default.AudioNode.call(this),this.createInsOuts(2,1),this.a=this.input[0]=new s.default.Gain,this.b=this.input[1]=new s.default.Gain,this.fade=new s.default.Signal(s.default.defaultArg(t,.5),s.default.Type.NormalRange),this._equalPowerA=new s.default.EqualPowerGain,this._equalPowerB=new s.default.EqualPowerGain,this._one=this.context.getConstant(1),this._invert=new s.default.Subtract,this.a.connect(this.output),this.b.connect(this.output),this.fade.chain(this._equalPowerB,this.b.gain),s.default.connect(this._one,this._invert,0,0),this.fade.connect(this._invert,0,1),this._invert.chain(this._equalPowerA,this.a.gain),this._readOnly("fade")},s.default.extend(s.default.CrossFade,s.default.AudioNode),s.default.CrossFade.prototype.dispose=function(){return s.default.AudioNode.prototype.dispose.call(this),this._writable("fade"),this._equalPowerA.dispose(),this._equalPowerA=null,this._equalPowerB.dispose(),this._equalPowerB=null,this.fade.dispose(),this.fade=null,this._invert.dispose(),this._invert=null,this._one=null,this.a.dispose(),this.a=null,this.b.dispose(),this.b=null,this},e.default=s.default.CrossFade},function(t,e,i){"use strict";i.r(e);var s=i(0);s.default.Timeline=function(){var t=s.default.defaults(arguments,["memory"],s.default.Timeline);s.default.call(this),this._timeline=[],this.memory=t.memory},s.default.extend(s.default.Timeline),s.default.Timeline.defaults={memory:1/0},Object.defineProperty(s.default.Timeline.prototype,"length",{get:function(){return this._timeline.length}}),s.default.Timeline.prototype.add=function(t){if(s.default.isUndef(t.time))throw new Error("Tone.Timeline: events must have a time attribute");t.time=t.time.valueOf();var e=this._search(t.time);if(this._timeline.splice(e+1,0,t),this.length>this.memory){var i=this.length-this.memory;this._timeline.splice(0,i)}return this},s.default.Timeline.prototype.remove=function(t){var e=this._timeline.indexOf(t);return-1!==e&&this._timeline.splice(e,1),this},s.default.Timeline.prototype.get=function(t,e){e=s.default.defaultArg(e,"time");var i=this._search(t,e);return-1!==i?this._timeline[i]:null},s.default.Timeline.prototype.peek=function(){return this._timeline[0]},s.default.Timeline.prototype.shift=function(){return this._timeline.shift()},s.default.Timeline.prototype.getAfter=function(t,e){e=s.default.defaultArg(e,"time");var i=this._search(t,e);return i+1<this._timeline.length?this._timeline[i+1]:null},s.default.Timeline.prototype.getBefore=function(t,e){e=s.default.defaultArg(e,"time");var i=this._timeline.length;if(i>0&&this._timeline[i-1][e]<t)return this._timeline[i-1];var n=this._search(t,e);return n-1>=0?this._timeline[n-1]:null},s.default.Timeline.prototype.cancel=function(t){if(this._timeline.length>1){var e=this._search(t);if(e>=0)if(this._timeline[e].time===t){for(var i=e;i>=0&&this._timeline[i].time===t;i--)e=i;this._timeline=this._timeline.slice(0,e)}else this._timeline=this._timeline.slice(0,e+1);else this._timeline=[]}else 1===this._timeline.length&&this._timeline[0].time>=t&&(this._timeline=[]);return this},s.default.Timeline.prototype.cancelBefore=function(t){var e=this._search(t);return e>=0&&(this._timeline=this._timeline.slice(e+1)),this},s.default.Timeline.prototype.previousEvent=function(t){var e=this._timeline.indexOf(t);return e>0?this._timeline[e-1]:null},s.default.Timeline.prototype._search=function(t,e){if(0===this._timeline.length)return-1;e=s.default.defaultArg(e,"time");var i=0,n=this._timeline.length,o=n;if(n>0&&this._timeline[n-1][e]<=t)return n-1;for(;i<o;){var a=Math.floor(i+(o-i)/2),r=this._timeline[a],l=this._timeline[a+1];if(r[e]===t){for(var u=a;u<this._timeline.length;u++){this._timeline[u][e]===t&&(a=u)}return a}if(r[e]<t&&l[e]>t)return a;r[e]>t?o=a:i=a+1}return-1},s.default.Timeline.prototype._iterate=function(t,e,i){e=s.default.defaultArg(e,0),i=s.default.defaultArg(i,this._timeline.length-1),this._timeline.slice(e,i+1).forEach(function(e){t.call(this,e)}.bind(this))},s.default.Timeline.prototype.forEach=function(t){return this._iterate(t),this},s.default.Timeline.prototype.forEachBefore=function(t,e){var i=this._search(t);return-1!==i&&this._iterate(e,0,i),this},s.default.Timeline.prototype.forEachAfter=function(t,e){var i=this._search(t);return this._iterate(e,i+1),this},s.default.Timeline.prototype.forEachBetween=function(t,e,i){var s=this._search(t),n=this._search(e);return-1!==s&&-1!==n?(this._timeline[s].time!==t&&(s+=1),this._timeline[n].time===e&&(n-=1),this._iterate(i,s,n)):-1===s&&this._iterate(i,0,n),this},s.default.Timeline.prototype.forEachFrom=function(t,e){for(var i=this._search(t);i>=0&&this._timeline[i].time>=t;)i--;return this._iterate(e,i+1),this},s.default.Timeline.prototype.forEachAtTime=function(t,e){var i=this._search(t);return-1!==i&&this._iterate(function(i){i.time===t&&e.call(this,i)},0,i),this},s.default.Timeline.prototype.dispose=function(){return s.default.prototype.dispose.call(this),this._timeline=null,this},e.default=s.default.Timeline},function(t,e,i){"use strict";i.r(e);var s=i(0);i(21),i(2);s.default.Monophonic=function(t){t=s.default.defaultArg(t,s.default.Monophonic.defaults),s.default.Instrument.call(this,t),this.portamento=t.portamento},s.default.extend(s.default.Monophonic,s.default.Instrument),s.default.Monophonic.defaults={portamento:0},s.default.Monophonic.prototype.triggerAttack=function(t,e,i){return this.log("triggerAttack",t,e,i),e=this.toSeconds(e),this._triggerEnvelopeAttack(e,i),this.setNote(t,e),this},s.default.Monophonic.prototype.triggerRelease=function(t){return this.log("triggerRelease",t),t=this.toSeconds(t),this._triggerEnvelopeRelease(t),this},s.default.Monophonic.prototype._triggerEnvelopeAttack=function(){},s.default.Monophonic.prototype._triggerEnvelopeRelease=function(){},s.default.Monophonic.prototype.getLevelAtTime=function(t){return t=this.toSeconds(t),this.envelope.getValueAtTime(t)},s.default.Monophonic.prototype.setNote=function(t,e){if(e=this.toSeconds(e),this.portamento>0&&this.getLevelAtTime(e)>.05){var i=this.toSeconds(this.portamento);this.frequency.exponentialRampTo(t,i,e)}else this.frequency.setValueAtTime(t,e);return this},e.default=s.default.Monophonic},function(t,e,i){"use strict";i.r(e);var s=i(0);i(29),i(5),i(2);s.default.Scale=function(t,e){s.default.SignalBase.call(this),this._outputMin=s.default.defaultArg(t,0),this._outputMax=s.default.defaultArg(e,1),this._scale=this.input=new s.default.Multiply(1),this._add=this.output=new s.default.Add(0),this._scale.connect(this._add),this._setRange()},s.default.extend(s.default.Scale,s.default.SignalBase),Object.defineProperty(s.default.Scale.prototype,"min",{get:function(){return this._outputMin},set:function(t){this._outputMin=t,this._setRange()}}),Object.defineProperty(s.default.Scale.prototype,"max",{get:function(){return this._outputMax},set:function(t){this._outputMax=t,this._setRange()}}),s.default.Scale.prototype._setRange=function(){this._add.value=this._outputMin,this._scale.value=this._outputMax-this._outputMin},s.default.Scale.prototype.dispose=function(){return s.default.SignalBase.prototype.dispose.call(this),this._add.dispose(),this._add=null,this._scale.dispose(),this._scale=null,this},e.default=s.default.Scale},function(t,e,i){"use strict";i.r(e);var s=i(0);i(2),i(3),i(1);s.default.Volume=function(){var t=s.default.defaults(arguments,["volume"],s.default.Volume);s.default.AudioNode.call(this,t),this.output=this.input=new s.default.Gain(t.volume,s.default.Type.Decibels),this._unmutedVolume=t.volume,this.volume=this.output.gain,this._readOnly("volume"),this.mute=t.mute},s.default.extend(s.default.Volume,s.default.AudioNode),s.default.Volume.defaults={volume:0,mute:!1},Object.defineProperty(s.default.Volume.prototype,"mute",{get:function(){return this.volume.value===-1/0},set:function(t){!this.mute&&t?(this._unmutedVolume=this.volume.value,this.volume.value=-1/0):this.mute&&!t&&(this.volume.value=this._unmutedVolume)}}),s.default.Volume.prototype.dispose=function(){return this.input.dispose(),s.default.AudioNode.prototype.dispose.call(this),this._writable("volume"),this.volume.dispose(),this.volume=null,this},e.default=s.default.Volume},function(t,e,i){"use strict";i.r(e);var s=i(0);i(3),i(30);s.default.Zero=function(){s.default.SignalBase.call(this),this._gain=this.input=this.output=new s.default.Gain,s.default.connect(this.context.getConstant(0),this._gain)},s.default.extend(s.default.Zero,s.default.SignalBase),s.default.Zero.prototype.dispose=function(){return s.default.SignalBase.prototype.dispose.call(this),this._gain.dispose(),this._gain=null,this},e.default=s.default.Zero},function(t,e,i){"use strict";i.r(e);var s=i(0);i(2),i(3);s.default.Add=function(t){s.default.Signal.call(this),this.createInsOuts(2,0),this._sum=this.input[0]=this.input[1]=this.output=new s.default.Gain,this._param=this.input[1]=new s.default.Signal(t),this._param.connect(this._sum)},s.default.extend(s.default.Add,s.default.Signal),s.default.Add.prototype.dispose=function(){return s.default.Signal.prototype.dispose.call(this),this._sum.dispose(),this._sum=null,this},e.default=s.default.Add},function(t,e,i){"use strict";i.r(e);var s=i(0);i(1);s.default.SignalBase=function(){s.default.AudioNode.call(this)},s.default.extend(s.default.SignalBase,s.default.AudioNode),s.default.SignalBase.prototype.connect=function(t,e,i){return s.default.Signal&&s.default.Signal===t.constructor||s.default.Param&&s.default.Param===t.constructor?(t._param.cancelScheduledValues(0),t._param.setValueAtTime(0,0),t.overridden=!0):t instanceof AudioParam&&(t.cancelScheduledValues(0),t.setValueAtTime(0,0)),s.default.AudioNode.prototype.connect.call(this,t,e,i),this},e.default=s.default.SignalBase},function(t,e,i){"use strict";i.r(e);var s=i(0);i(47),i(3);s.default.AmplitudeEnvelope=function(){s.default.Envelope.apply(this,arguments),this.input=this.output=new s.default.Gain,this._sig.connect(this.output.gain)},s.default.extend(s.default.AmplitudeEnvelope,s.default.Envelope),s.default.AmplitudeEnvelope.prototype.dispose=function(){return s.default.Envelope.prototype.dispose.call(this),this},e.default=s.default.AmplitudeEnvelope},function(t,e,i){"use strict";i.r(e);var s=i(0);i(11),i(6),i(3),i(1);s.default.BufferSource=function(){var t=s.default.defaults(arguments,["buffer","onload"],s.default.BufferSource);s.default.AudioNode.call(this,t),this.onended=t.onended,this._startTime=-1,this._sourceStarted=!1,this._sourceStopped=!1,this._stopTime=-1,this._gainNode=this.output=new s.default.Gain(0),this._source=this.context.createBufferSource(),s.default.connect(this._source,this._gainNode),this._source.onended=this._onended.bind(this),this._buffer=new s.default.Buffer(t.buffer,t.onload),this.playbackRate=new s.default.Param({param:this._source.playbackRate,units:s.default.Type.Positive,value:t.playbackRate}),this.fadeIn=t.fadeIn,this.fadeOut=t.fadeOut,this.curve=t.curve,this._onendedTimeout=-1,this.loop=t.loop,this.loopStart=t.loopStart,this.loopEnd=t.loopEnd},s.default.extend(s.default.BufferSource,s.default.AudioNode),s.default.BufferSource.defaults={onended:s.default.noOp,onload:s.default.noOp,loop:!1,loopStart:0,loopEnd:0,fadeIn:0,fadeOut:0,curve:"linear",playbackRate:1},Object.defineProperty(s.default.BufferSource.prototype,"state",{get:function(){return this.getStateAtTime(this.now())}}),s.default.BufferSource.prototype.getStateAtTime=function(t){return t=this.toSeconds(t),-1!==this._startTime&&this._startTime<=t&&(-1===this._stopTime||t<this._stopTime)&&!this._sourceStopped?s.default.State.Started:s.default.State.Stopped},s.default.BufferSource.prototype.start=function(t,e,i,n){this.log("start",t,e,i,n),this.assert(-1===this._startTime,"can only be started once"),this.assert(this.buffer.loaded,"buffer is either not set or not loaded"),this.assert(!this._sourceStopped,"source is already stopped"),t=this.toSeconds(t),e=this.loop?s.default.defaultArg(e,this.loopStart):s.default.defaultArg(e,0),e=this.toSeconds(e),e=Math.max(e,0),n=s.default.defaultArg(n,1);var o=this.toSeconds(this.fadeIn);if(o>0?(this._gainNode.gain.setValueAtTime(0,t),"linear"===this.curve?this._gainNode.gain.linearRampToValueAtTime(n,t+o):this._gainNode.gain.exponentialApproachValueAtTime(n,t,o)):this._gainNode.gain.setValueAtTime(n,t),this._startTime=t,s.default.isDefined(i)){var a=this.toSeconds(i);a=Math.max(a,0),this.stop(t+a)}if(this.loop){var r=this.loopEnd||this.buffer.duration,l=this.loopStart;e>=r&&(e=(e-l)%(r-l)+l)}return this._source.buffer=this.buffer.get(),this._source.loopEnd=this.loopEnd||this.buffer.duration,e<this.buffer.duration&&(this._sourceStarted=!0,this._source.start(t,e)),this},s.default.BufferSource.prototype.stop=function(t){this.log("stop",t),this.assert(this.buffer.loaded,"buffer is either not set or not loaded"),this.assert(!this._sourceStopped,"source is already stopped"),t=this.toSeconds(t),-1!==this._stopTime&&this.cancelStop();var e=this.toSeconds(this.fadeOut);return this._stopTime=t+e,e>0?"linear"===this.curve?this._gainNode.gain.linearRampTo(0,e,t):this._gainNode.gain.targetRampTo(0,e,t):(this._gainNode.gain.cancelAndHoldAtTime(t),this._gainNode.gain.setValueAtTime(0,t)),s.default.context.clearTimeout(this._onendedTimeout),this._onendedTimeout=s.default.context.setTimeout(this._onended.bind(this),this._stopTime-this.now()),this},s.default.BufferSource.prototype.cancelStop=function(){if(-1!==this._startTime&&!this._sourceStopped){var t=this.toSeconds(this.fadeIn);this._gainNode.gain.cancelScheduledValues(this._startTime+t+this.sampleTime),this.context.clearTimeout(this._onendedTimeout),this._stopTime=-1}return this},s.default.BufferSource.prototype._onended=function(){if(!this._sourceStopped){this._sourceStopped=!0;var t="exponential"===this.curve?2*this.fadeOut:0;this._sourceStarted&&-1!==this._stopTime&&this._source.stop(this._stopTime+t),this.onended(this),setTimeout(function(){this._source&&(this._source.disconnect(),this._gainNode.disconnect())}.bind(this),1e3*t+100)}},Object.defineProperty(s.default.BufferSource.prototype,"loopStart",{get:function(){return this._source.loopStart},set:function(t){this._source.loopStart=this.toSeconds(t)}}),Object.defineProperty(s.default.BufferSource.prototype,"loopEnd",{get:function(){return this._source.loopEnd},set:function(t){this._source.loopEnd=this.toSeconds(t)}}),Object.defineProperty(s.default.BufferSource.prototype,"buffer",{get:function(){return this._buffer},set:function(t){this._buffer.set(t)}}),Object.defineProperty(s.default.BufferSource.prototype,"loop",{get:function(){return this._source.loop},set:function(t){this._source.loop=t,this.cancelStop()}}),s.default.BufferSource.prototype.dispose=function(){return this._wasDisposed||(this._wasDisposed=!0,s.default.AudioNode.prototype.dispose.call(this),this.onended=null,this._source.onended=null,this._source.disconnect(),this._source=null,this._gainNode.dispose(),this._gainNode=null,this._buffer.dispose(),this._buffer=null,this._startTime=-1,this.playbackRate=null,s.default.context.clearTimeout(this._onendedTimeout)),this},e.default=s.default.BufferSource},function(t,e,i){"use strict";i.r(e);var s=i(0);i(8),i(2),i(5),i(3);s.default.FeedbackEffect=function(){var t=s.default.defaults(arguments,["feedback"],s.default.FeedbackEffect);s.default.Effect.call(this,t),this._feedbackGain=new s.default.Gain(t.feedback,s.default.Type.NormalRange),this.feedback=this._feedbackGain.gain,this.effectReturn.chain(this._feedbackGain,this.effectSend),this._readOnly(["feedback"])},s.default.extend(s.default.FeedbackEffect,s.default.Effect),s.default.FeedbackEffect.defaults={feedback:.125},s.default.FeedbackEffect.prototype.dispose=function(){return s.default.Effect.prototype.dispose.call(this),this._writable(["feedback"]),this._feedbackGain.dispose(),this._feedbackGain=null,this.feedback=null,this},e.default=s.default.FeedbackEffect},function(t,e,i){"use strict";i.r(e);var s=i(0);i(24),i(4);s.default.TimelineState=function(t){s.default.Timeline.call(this),this._initial=t},s.default.extend(s.default.TimelineState,s.default.Timeline),s.default.TimelineState.prototype.getValueAtTime=function(t){var e=this.get(t);return null!==e?e.state:this._initial},s.default.TimelineState.prototype.setStateAtTime=function(t,e){return this.add({state:t,time:e}),this},s.default.TimelineState.prototype.getLastState=function(t,e){e=this.toSeconds(e);for(var i=this._search(e);i>=0;i--){var s=this._timeline[i];if(s.state===t)return s}},s.default.TimelineState.prototype.getNextState=function(t,e){e=this.toSeconds(e);var i=this._search(e);if(-1!==i)for(var s=i;s<this._timeline.length;s++){var n=this._timeline[s];if(n.state===t)return n}},e.default=s.default.TimelineState},function(t,e,i){"use strict";i.r(e);var s=i(0);s.default.Emitter=function(){s.default.call(this),this._events={}},s.default.extend(s.default.Emitter),s.default.Emitter.prototype.on=function(t,e){for(var i=t.split(/\W+/),s=0;s<i.length;s++){var n=i[s];this._events.hasOwnProperty(n)||(this._events[n]=[]),this._events[n].push(e)}return this},s.default.Emitter.prototype.once=function(t,e){var i=function(){e.apply(this,arguments),this.off(t,i)}.bind(this);return this.on(t,i),this},s.default.Emitter.prototype.off=function(t,e){for(var i=t.split(/\W+/),n=0;n<i.length;n++)if(t=i[n],this._events.hasOwnProperty(t))if(s.default.isUndef(e))this._events[t]=[];else for(var o=this._events[t],a=0;a<o.length;a++)o[a]===e&&o.splice(a,1);return this},s.default.Emitter.prototype.emit=function(t){if(this._events){var e=Array.apply(null,arguments).slice(1);if(this._events.hasOwnProperty(t))for(var i=this._events[t].slice(0),s=0,n=i.length;s<n;s++)i[s].apply(this,e)}return this},s.default.Emitter.mixin=function(t){var e=["on","once","off","emit"];t._events={};for(var i=0;i<e.length;i++){var n=e[i],o=s.default.Emitter.prototype[n];t[n]=o}return s.default.Emitter},s.default.Emitter.prototype.dispose=function(){return s.default.prototype.dispose.call(this),this._events=null,this},e.default=s.default.Emitter},function(t,e,i){"use strict";i.r(e);var s=i(0);i(1),i(44);s.default.supported&&(AnalyserNode.prototype.getFloatTimeDomainData||(AnalyserNode.prototype.getFloatTimeDomainData=function(t){var e=new Uint8Array(t.length);this.getByteTimeDomainData(e);for(var i=0;i<e.length;i++)t[i]=(e[i]-128)/128})),s.default.Analyser=function(){var t=s.default.defaults(arguments,["type","size"],s.default.Analyser);s.default.AudioNode.call(this),this._analyser=this.input=this.output=this.context.createAnalyser(),this._type=t.type,this._buffer=null,this.size=t.size,this.type=t.type},s.default.extend(s.default.Analyser,s.default.AudioNode),s.default.Analyser.defaults={size:1024,type:"fft",smoothing:.8},s.default.Analyser.Type={Waveform:"waveform",FFT:"fft"},s.default.Analyser.prototype.getValue=function(){return this._type===s.default.Analyser.Type.FFT?this._analyser.getFloatFrequencyData(this._buffer):this._type===s.default.Analyser.Type.Waveform&&this._analyser.getFloatTimeDomainData(this._buffer),this._buffer},Object.defineProperty(s.default.Analyser.prototype,"size",{get:function(){return this._analyser.frequencyBinCount},set:function(t){this._analyser.fftSize=2*t,this._buffer=new Float32Array(t)}}),Object.defineProperty(s.default.Analyser.prototype,"type",{get:function(){return this._type},set:function(t){if(t!==s.default.Analyser.Type.Waveform&&t!==s.default.Analyser.Type.FFT)throw new TypeError("Tone.Analyser: invalid type: "+t);this._type=t}}),Object.defineProperty(s.default.Analyser.prototype,"smoothing",{get:function(){return this._analyser.smoothingTimeConstant},set:function(t){this._analyser.smoothingTimeConstant=t}}),s.default.Analyser.prototype.dispose=function(){s.default.AudioNode.prototype.dispose.call(this),this._analyser.disconnect(),this._analyser=null,this._buffer=null};e.default=s.default.Analyser},function(t,e,i){"use strict";i.r(e);var s=i(0);i(6),i(17),i(50),i(69),i(49),i(68),i(67);s.default.OmniOscillator=function(){var t=s.default.defaults(arguments,["frequency","type"],s.default.OmniOscillator);s.default.Source.call(this,t),this.frequency=new s.default.Signal(t.frequency,s.default.Type.Frequency),this.detune=new s.default.Signal(t.detune,s.default.Type.Cents),this._sourceType=void 0,this._oscillator=null,this.type=t.type,this._readOnly(["frequency","detune"]),this.set(t)},s.default.extend(s.default.OmniOscillator,s.default.Source),s.default.OmniOscillator.defaults={frequency:440,detune:0,type:"sine",phase:0};var n="PulseOscillator",o="PWMOscillator",a="Oscillator",r="FMOscillator",l="AMOscillator",u="FatOscillator";s.default.OmniOscillator.prototype._start=function(t){this._oscillator.start(t)},s.default.OmniOscillator.prototype._stop=function(t){this._oscillator.stop(t)},s.default.OmniOscillator.prototype.restart=function(t){this._oscillator.restart(t)},Object.defineProperty(s.default.OmniOscillator.prototype,"type",{get:function(){var t="";return this._sourceType===r?t="fm":this._sourceType===l?t="am":this._sourceType===u&&(t="fat"),t+this._oscillator.type},set:function(t){"fm"===t.substr(0,2)?(this._createNewOscillator(r),this._oscillator.type=t.substr(2)):"am"===t.substr(0,2)?(this._createNewOscillator(l),this._oscillator.type=t.substr(2)):"fat"===t.substr(0,3)?(this._createNewOscillator(u),this._oscillator.type=t.substr(3)):"pwm"===t?this._createNewOscillator(o):"pulse"===t?this._createNewOscillator(n):(this._createNewOscillator(a),this._oscillator.type=t)}}),Object.defineProperty(s.default.OmniOscillator.prototype,"partials",{get:function(){return this._oscillator.partials},set:function(t){this._oscillator.partials=t}}),Object.defineProperty(s.default.OmniOscillator.prototype,"partialCount",{get:function(){return this._oscillator.partialCount},set:function(t){this._oscillator.partialCount=t}}),s.default.OmniOscillator.prototype.set=function(t,e){return"type"===t?this.type=e:s.default.isObject(t)&&t.hasOwnProperty("type")&&(this.type=t.type),s.default.prototype.set.apply(this,arguments),this},s.default.OmniOscillator.prototype.get=function(t){var e=this._oscillator.get(t);return e.type=this.type,e},s.default.OmniOscillator.prototype._createNewOscillator=function(t){if(t!==this._sourceType){this._sourceType=t;var e=s.default[t],i=this.now();if(null!==this._oscillator){var n=this._oscillator;n.stop(i),this.context.setTimeout(function(){n.dispose(),n=null},this.blockTime)}this._oscillator=new e,this.frequency.connect(this._oscillator.frequency),this.detune.connect(this._oscillator.detune),this._oscillator.connect(this.output),this.state===s.default.State.Started&&this._oscillator.start(i)}},Object.defineProperty(s.default.OmniOscillator.prototype,"phase",{get:function(){return this._oscillator.phase},set:function(t){this._oscillator.phase=t}});var d={PulseOscillator:"pulse",PWMOscillator:"pwm",Oscillator:"oscillator",FMOscillator:"fm",AMOscillator:"am",FatOscillator:"fat"};Object.defineProperty(s.default.OmniOscillator.prototype,"sourceType",{get:function(){return d[this._sourceType]},set:function(t){var e="sine";"pwm"!==this._oscillator.type&&"pulse"!==this._oscillator.type&&(e=this._oscillator.type),t===d.FMOscillator?this.type="fm"+e:t===d.AMOscillator?this.type="am"+e:t===d.FatOscillator?this.type="fat"+e:t===d.Oscillator?this.type=e:t===d.PulseOscillator?this.type="pulse":t===d.PWMOscillator&&(this.type="pwm")}}),Object.defineProperty(s.default.OmniOscillator.prototype,"baseType",{get:function(){return this._oscillator.baseType},set:function(t){this.sourceType!==d.PulseOscillator&&this.sourceType!==d.PWMOscillator&&(this._oscillator.baseType=t)}}),Object.defineProperty(s.default.OmniOscillator.prototype,"width",{get:function(){return this._sourceType===n?this._oscillator.width:void 0}}),Object.defineProperty(s.default.OmniOscillator.prototype,"count",{get:function(){return this._sourceType===u?this._oscillator.count:void 0},set:function(t){this._sourceType===u&&(this._oscillator.count=t)}}),Object.defineProperty(s.default.OmniOscillator.prototype,"spread",{get:function(){return this._sourceType===u?this._oscillator.spread:void 0},set:function(t){this._sourceType===u&&(this._oscillator.spread=t)}}),Object.defineProperty(s.default.OmniOscillator.prototype,"modulationType",{get:function(){return this._sourceType===r||this._sourceType===l?this._oscillator.modulationType:void 0},set:function(t){this._sourceType!==r&&this._sourceType!==l||(this._oscillator.modulationType=t)}}),Object.defineProperty(s.default.OmniOscillator.prototype,"modulationIndex",{get:function(){return this._sourceType===r?this._oscillator.modulationIndex:void 0}}),Object.defineProperty(s.default.OmniOscillator.prototype,"harmonicity",{get:function(){return this._sourceType===r||this._sourceType===l?this._oscillator.harmonicity:void 0}}),Object.defineProperty(s.default.OmniOscillator.prototype,"modulationFrequency",{get:function(){return this._sourceType===o?this._oscillator.modulationFrequency:void 0}}),s.default.OmniOscillator.prototype.dispose=function(){return s.default.Source.prototype.dispose.call(this),this._writable(["frequency","detune"]),this.detune.dispose(),this.detune=null,this.frequency.dispose(),this.frequency=null,this._oscillator.dispose(),this._oscillator=null,this._sourceType=null,this},e.default=s.default.OmniOscillator},function(t,e,i){"use strict";i.r(e);var s=i(0);i(31),i(37),i(25);s.default.Synth=function(t){t=s.default.defaultArg(t,s.default.Synth.defaults),s.default.Monophonic.call(this,t),this.oscillator=new s.default.OmniOscillator(t.oscillator),this.frequency=this.oscillator.frequency,this.detune=this.oscillator.detune,this.envelope=new s.default.AmplitudeEnvelope(t.envelope),this.oscillator.chain(this.envelope,this.output),this._readOnly(["oscillator","frequency","detune","envelope"])},s.default.extend(s.default.Synth,s.default.Monophonic),s.default.Synth.defaults={oscillator:{type:"triangle"},envelope:{attack:.005,decay:.1,sustain:.3,release:1}},s.default.Synth.prototype._triggerEnvelopeAttack=function(t,e){return this.envelope.triggerAttack(t,e),this.oscillator.start(t),0===this.envelope.sustain&&this.oscillator.stop(t+this.toSeconds(this.envelope.attack)+this.toSeconds(this.envelope.decay)),this},s.default.Synth.prototype._triggerEnvelopeRelease=function(t){return t=this.toSeconds(t),this.envelope.triggerRelease(t),this.oscillator.stop(t+this.toSeconds(this.envelope.release)),this},s.default.Synth.prototype.dispose=function(){return s.default.Monophonic.prototype.dispose.call(this),this._writable(["oscillator","frequency","detune","envelope"]),this.oscillator.dispose(),this.oscillator=null,this.envelope.dispose(),this.envelope=null,this.frequency=null,this.detune=null,this},e.default=s.default.Synth},function(t,e,i){"use strict";i.r(e);var s=i(0);i(6),i(11),i(32);s.default.Noise=function(){var t=s.default.defaults(arguments,["type"],s.default.Noise);s.default.Source.call(this,t),this._source=null,this._type=t.type,this._playbackRate=t.playbackRate},s.default.extend(s.default.Noise,s.default.Source),s.default.Noise.defaults={type:"white",playbackRate:1},Object.defineProperty(s.default.Noise.prototype,"type",{get:function(){return this._type},set:function(t){if(this._type!==t){if(!(t in n))throw new TypeError("Tone.Noise: invalid type: "+t);if(this._type=t,this.state===s.default.State.Started){var e=this.now();this._stop(e),this._start(e)}}}}),Object.defineProperty(s.default.Noise.prototype,"playbackRate",{get:function(){return this._playbackRate},set:function(t){this._playbackRate=t,this._source&&(this._source.playbackRate.value=t)}}),s.default.Noise.prototype._start=function(t){var e=n[this._type];this._source=new s.default.BufferSource(e).connect(this.output),this._source.loop=!0,this._source.playbackRate.value=this._playbackRate,this._source.start(this.toSeconds(t),Math.random()*(e.duration-.001))},s.default.Noise.prototype._stop=function(t){this._source&&(this._source.stop(this.toSeconds(t)),this._source=null)},s.default.Noise.prototype.restart=function(t){return this._stop(t),this._start(t),this},s.default.Noise.prototype.dispose=function(){return s.default.Source.prototype.dispose.call(this),null!==this._source&&(this._source.disconnect(),this._source=null),this._buffer=null,this};var n={},o={};Object.defineProperty(n,"pink",{get:function(){if(!o.pink){for(var t=[],e=0;e<2;e++){var i,n,a,r,l,u,d,f=new Float32Array(220500);t[e]=f,i=n=a=r=l=u=d=0;for(var h=0;h<220500;h++){var c=2*Math.random()-1;i=.99886*i+.0555179*c,n=.99332*n+.0750759*c,a=.969*a+.153852*c,r=.8665*r+.3104856*c,l=.55*l+.5329522*c,u=-.7616*u-.016898*c,f[h]=i+n+a+r+l+u+d+.5362*c,f[h]*=.11,d=.115926*c}}o.pink=(new s.default.Buffer).fromArray(t)}return o.pink}}),Object.defineProperty(n,"brown",{get:function(){if(!o.brown){for(var t=[],e=0;e<2;e++){var i=new Float32Array(220500);t[e]=i;for(var n=0,a=0;a<220500;a++){var r=2*Math.random()-1;i[a]=(n+.02*r)/1.02,n=i[a],i[a]*=3.5}}o.brown=(new s.default.Buffer).fromArray(t)}return o.brown}}),Object.defineProperty(n,"white",{get:function(){if(!o.white){for(var t=[],e=0;e<2;e++){var i=new Float32Array(220500);t[e]=i;for(var n=0;n<220500;n++)i[n]=2*Math.random()-1}o.white=(new s.default.Buffer).fromArray(t)}return o.white}}),e.default=s.default.Noise},function(t,e,i){"use strict";i.r(e);var s=i(0);i(27),i(20),i(1);s.default.Master=function(){s.default.AudioNode.call(this),s.default.getContext(function(){this.createInsOuts(1,0),this._volume=this.output=new s.default.Volume,this.volume=this._volume.volume,this._readOnly("volume"),s.default.connectSeries(this.input,this.output,this.context.destination),this.context.master=this}.bind(this))},s.default.extend(s.default.Master,s.default.AudioNode),s.default.Master.defaults={volume:0,mute:!1},s.default.Master.prototype.isMaster=!0,Object.defineProperty(s.default.Master.prototype,"mute",{get:function(){return this._volume.mute},set:function(t){this._volume.mute=t}}),s.default.Master.prototype.chain=function(){this.input.disconnect();var t=Array.from(arguments);t.unshift(this.input),t.push(this.output),s.default.connectSeries.apply(void 0,t)},s.default.Master.prototype.dispose=function(){s.default.AudioNode.prototype.dispose.call(this),this._writable("volume"),this._volume.dispose(),this._volume=null,this.volume=null},s.default.AudioNode.prototype.toMaster=function(){return this.connect(this.context.master),this};var n=s.default.Master;s.default.Master=new n,s.default.Context.on("init",function(t){t.master&&t.master.isMaster?s.default.Master=t.master:s.default.Master=new n}),s.default.Context.on("close",function(t){t.master&&t.master.isMaster&&t.master.dispose()}),e.default=s.default.Master},function(t,e,i){"use strict";i.r(e);var s=i(0);i(86),i(47);s.default.FrequencyEnvelope=function(){var t=s.default.defaults(arguments,["attack","decay","sustain","release"],s.default.Envelope);t=s.default.defaultArg(t,s.default.FrequencyEnvelope.defaults),s.default.ScaledEnvelope.call(this,t),this._octaves=t.octaves,this.baseFrequency=t.baseFrequency,this.octaves=t.octaves,this.exponent=t.exponent},s.default.extend(s.default.FrequencyEnvelope,s.default.Envelope),s.default.FrequencyEnvelope.defaults={baseFrequency:200,octaves:4,exponent:1},Object.defineProperty(s.default.FrequencyEnvelope.prototype,"baseFrequency",{get:function(){return this._scale.min},set:function(t){this._scale.min=this.toFrequency(t),this.octaves=this._octaves}}),Object.defineProperty(s.default.FrequencyEnvelope.prototype,"octaves",{get:function(){return this._octaves},set:function(t){this._octaves=t,this._scale.max=this.baseFrequency*Math.pow(2,t)}}),Object.defineProperty(s.default.FrequencyEnvelope.prototype,"exponent",{get:function(){return this._exp.value},set:function(t){this._exp.value=t}}),s.default.FrequencyEnvelope.prototype.dispose=function(){return s.default.ScaledEnvelope.prototype.dispose.call(this),this},e.default=s.default.FrequencyEnvelope},function(t,e,i){"use strict";i.r(e);var s=i(0);i(26),i(61);s.default.ScaleExp=function(t,e,i){s.default.SignalBase.call(this),this._scale=this.output=new s.default.Scale(t,e),this._exp=this.input=new s.default.Pow(s.default.defaultArg(i,2)),this._exp.connect(this._scale)},s.default.extend(s.default.ScaleExp,s.default.SignalBase),Object.defineProperty(s.default.ScaleExp.prototype,"exponent",{get:function(){return this._exp.value},set:function(t){this._exp.value=t}}),Object.defineProperty(s.default.ScaleExp.prototype,"min",{get:function(){return this._scale.min},set:function(t){this._scale.min=t}}),Object.defineProperty(s.default.ScaleExp.prototype,"max",{get:function(){return this._scale.max},set:function(t){this._scale.max=t}}),s.default.ScaleExp.prototype.dispose=function(){return s.default.SignalBase.prototype.dispose.call(this),this._scale.dispose(),this._scale=null,this._exp.dispose(),this._exp=null,this},e.default=s.default.ScaleExp},function(t,e,i){"use strict";i.r(e);var s=i(0);i(14),i(1);s.default.Compressor=function(){var t=s.default.defaults(arguments,["threshold","ratio"],s.default.Compressor);s.default.AudioNode.call(this),this._compressor=this.input=this.output=this.context.createDynamicsCompressor(),this.threshold=new s.default.Param({param:this._compressor.threshold,units:s.default.Type.Decibels,convert:!1}),this.attack=new s.default.Param(this._compressor.attack,s.default.Type.Time),this.release=new s.default.Param(this._compressor.release,s.default.Type.Time),this.knee=new s.default.Param({param:this._compressor.knee,units:s.default.Type.Decibels,convert:!1}),this.ratio=new s.default.Param({param:this._compressor.ratio,convert:!1}),this._readOnly(["knee","release","attack","ratio","threshold"]),this.set(t)},s.default.extend(s.default.Compressor,s.default.AudioNode),s.default.Compressor.defaults={ratio:12,threshold:-24,release:.25,attack:.003,knee:30},s.default.Compressor.prototype.dispose=function(){return s.default.AudioNode.prototype.dispose.call(this),this._writable(["knee","release","attack","ratio","threshold"]),this._compressor.disconnect(),this._compressor=null,this.attack.dispose(),this.attack=null,this.release.dispose(),this.release=null,this.threshold.dispose(),this.threshold=null,this.ratio.dispose(),this.ratio=null,this.knee.dispose(),this.knee=null,this},e.default=s.default.Compressor},function(t,e,i){"use strict";var s=i(0);i(92);if(s.default.supported){!s.default.global.hasOwnProperty("AudioContext")&&s.default.global.hasOwnProperty("webkitAudioContext")&&(s.default.global.AudioContext=s.default.global.webkitAudioContext),AudioContext.prototype.close||(AudioContext.prototype.close=function(){return s.default.isFunction(this.suspend)&&this.suspend(),Promise.resolve()}),AudioContext.prototype.resume||(AudioContext.prototype.resume=function(){var t=this.createBuffer(1,1,this.sampleRate),e=this.createBufferSource();return e.buffer=t,e.connect(this.destination),e.start(0),Promise.resolve()}),!AudioContext.prototype.createGain&&AudioContext.prototype.createGainNode&&(AudioContext.prototype.createGain=AudioContext.prototype.createGainNode),!AudioContext.prototype.createDelay&&AudioContext.prototype.createDelayNode&&(AudioContext.prototype.createDelay=AudioContext.prototype.createDelayNode);var n=!1,o=new OfflineAudioContext(1,1,44100),a=new Uint32Array([1179011410,48,1163280727,544501094,16,131073,44100,176400,1048580,1635017060,8,0,0,0,0]).buffer;try{var r=o.decodeAudioData(a);r&&s.default.isFunction(r.then)&&(n=!0)}catch(t){n=!1}n||(AudioContext.prototype._native_decodeAudioData=AudioContext.prototype.decodeAudioData,AudioContext.prototype.decodeAudioData=function(t){return new Promise(function(e,i){this._native_decodeAudioData(t,e,i)}.bind(this))})}},function(t,e,i){"use strict";i.r(e);var s=i(0);i(63);s.default.TransportTime=function(t,e){if(!(this instanceof s.default.TransportTime))return new s.default.TransportTime(t,e);s.default.Time.call(this,t,e)},s.default.extend(s.default.TransportTime,s.default.Time),s.default.TransportTime.prototype._now=function(){return s.default.Transport.seconds},e.default=s.default.TransportTime},function(t,e,i){"use strict";i.r(e);var s=i(0);i(62);s.default.Frequency=function(t,e){if(!(this instanceof s.default.Frequency))return new s.default.Frequency(t,e);s.default.TimeBase.call(this,t,e)},s.default.extend(s.default.Frequency,s.default.TimeBase),s.default.Frequency.prototype._expressions=Object.assign({},s.default.TimeBase.prototype._expressions,{midi:{regexp:/^(\d+(?:\.\d+)?midi)/,method:function(t){return"midi"===this._defaultUnits?t:s.default.Frequency.mtof(t)}},note:{regexp:/^([a-g]{1}(?:b|#|x|bb)?)(-?[0-9]+)/i,method:function(t,e){var i=n[t.toLowerCase()]+12*(parseInt(e)+1);return"midi"===this._defaultUnits?i:s.default.Frequency.mtof(i)}},tr:{regexp:/^(\d+(?:\.\d+)?):(\d+(?:\.\d+)?):?(\d+(?:\.\d+)?)?/,method:function(t,e,i){var s=1;return t&&"0"!==t&&(s*=this._beatsToUnits(this._getTimeSignature()*parseFloat(t))),e&&"0"!==e&&(s*=this._beatsToUnits(parseFloat(e))),i&&"0"!==i&&(s*=this._beatsToUnits(parseFloat(i)/4)),s}}}),s.default.Frequency.prototype.transpose=function(t){return new this.constructor(this.valueOf()*s.default.intervalToFrequencyRatio(t))},s.default.Frequency.prototype.harmonize=function(t){return t.map(function(t){return this.transpose(t)}.bind(this))},s.default.Frequency.prototype.toMidi=function(){return s.default.Frequency.ftom(this.valueOf())},s.default.Frequency.prototype.toNote=function(){var t=this.toFrequency(),e=Math.log2(t/s.default.Frequency.A4),i=Math.round(12*e)+57,n=Math.floor(i/12);return n<0&&(i+=-12*n),o[i%12]+n.toString()},s.default.Frequency.prototype.toSeconds=function(){return 1/s.default.TimeBase.prototype.toSeconds.call(this)},s.default.Frequency.prototype.toFrequency=function(){return s.default.TimeBase.prototype.toFrequency.call(this)},s.default.Frequency.prototype.toTicks=function(){var t=this._beatsToUnits(1),e=this.valueOf()/t;return Math.floor(e*s.default.Transport.PPQ)},s.default.Frequency.prototype._noArg=function(){return 0},s.default.Frequency.prototype._frequencyToUnits=function(t){return t},s.default.Frequency.prototype._ticksToUnits=function(t){return 1/(60*t/(s.default.Transport.bpm.value*s.default.Transport.PPQ))},s.default.Frequency.prototype._beatsToUnits=function(t){return 1/s.default.TimeBase.prototype._beatsToUnits.call(this,t)},s.default.Frequency.prototype._secondsToUnits=function(t){return 1/t},s.default.Frequency.prototype._defaultUnits="hz";var n={cbb:-2,cb:-1,c:0,"c#":1,cx:2,dbb:0,db:1,d:2,"d#":3,dx:4,ebb:2,eb:3,e:4,"e#":5,ex:6,fbb:3,fb:4,f:5,"f#":6,fx:7,gbb:5,gb:6,g:7,"g#":8,gx:9,abb:7,ab:8,a:9,"a#":10,ax:11,bbb:9,bb:10,b:11,"b#":12,bx:13},o=["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"];s.default.Frequency.A4=440,s.default.Frequency.mtof=function(t){return s.default.Frequency.A4*Math.pow(2,(t-69)/12)},s.default.Frequency.ftom=function(t){return 69+Math.round(12*Math.log2(t/s.default.Frequency.A4))},e.default=s.default.Frequency},function(t,e,i){"use strict";i.r(e);var s=i(0);i(2),i(61),i(4),i(1);s.default.Envelope=function(){var t=s.default.defaults(arguments,["attack","decay","sustain","release"],s.default.Envelope);s.default.AudioNode.call(this),this.attack=t.attack,this.decay=t.decay,this.sustain=t.sustain,this.release=t.release,this._attackCurve="linear",this._releaseCurve="exponential",this._sig=this.output=new s.default.Signal(0),this.attackCurve=t.attackCurve,this.releaseCurve=t.releaseCurve,this.decayCurve=t.decayCurve},s.default.extend(s.default.Envelope,s.default.AudioNode),s.default.Envelope.defaults={attack:.01,decay:.1,sustain:.5,release:1,attackCurve:"linear",decayCurve:"exponential",releaseCurve:"exponential"},Object.defineProperty(s.default.Envelope.prototype,"value",{get:function(){return this.getValueAtTime(this.now())}}),s.default.Envelope.prototype._getCurve=function(t,e){if(s.default.isString(t))return t;if(s.default.isArray(t))for(var i in s.default.Envelope.Type)if(s.default.Envelope.Type[i][e]===t)return i},s.default.Envelope.prototype._setCurve=function(t,e,i){if(s.default.Envelope.Type.hasOwnProperty(i)){var n=s.default.Envelope.Type[i];s.default.isObject(n)?this[t]=n[e]:this[t]=n}else{if(!s.default.isArray(i))throw new Error("Tone.Envelope: invalid curve: "+i);this[t]=i}},Object.defineProperty(s.default.Envelope.prototype,"attackCurve",{get:function(){return this._getCurve(this._attackCurve,"In")},set:function(t){this._setCurve("_attackCurve","In",t)}}),Object.defineProperty(s.default.Envelope.prototype,"releaseCurve",{get:function(){return this._getCurve(this._releaseCurve,"Out")},set:function(t){this._setCurve("_releaseCurve","Out",t)}}),Object.defineProperty(s.default.Envelope.prototype,"decayCurve",{get:function(){return this._decayCurve},set:function(t){if(!["linear","exponential"].includes(t))throw new Error("Tone.Envelope: invalid curve: "+t);this._decayCurve=t}}),s.default.Envelope.prototype.triggerAttack=function(t,e){this.log("triggerAttack",t,e),t=this.toSeconds(t);var i=this.toSeconds(this.attack),n=this.toSeconds(this.decay);e=s.default.defaultArg(e,1);var o=this.getValueAtTime(t);o>0&&(i=(1-o)/(1/i));if(0===i)this._sig.setValueAtTime(e,t);else if("linear"===this._attackCurve)this._sig.linearRampTo(e,i,t);else if("exponential"===this._attackCurve)this._sig.targetRampTo(e,i,t);else if(i>0){this._sig.cancelAndHoldAtTime(t);for(var a=this._attackCurve,r=1;r<a.length;r++)if(a[r-1]<=o&&o<=a[r]){(a=this._attackCurve.slice(r))[0]=o;break}this._sig.setValueCurveAtTime(a,t,i,e)}if(n){var l=e*this.sustain,u=t+i;this.log("decay",u),"linear"===this._decayCurve?this._sig.linearRampTo(l,n,u+this.sampleTime):"exponential"===this._decayCurve&&this._sig.exponentialApproachValueAtTime(l,u,n)}return this},s.default.Envelope.prototype.triggerRelease=function(t){this.log("triggerRelease",t),t=this.toSeconds(t);var e=this.getValueAtTime(t);if(e>0){var i=this.toSeconds(this.release);if("linear"===this._releaseCurve)this._sig.linearRampTo(0,i,t);else if("exponential"===this._releaseCurve)this._sig.targetRampTo(0,i,t);else{var n=this._releaseCurve;s.default.isArray(n)&&(this._sig.cancelAndHoldAtTime(t),this._sig.setValueCurveAtTime(n,t,i,e))}}return this},s.default.Envelope.prototype.getValueAtTime=function(t){return this._sig.getValueAtTime(t)},s.default.Envelope.prototype.triggerAttackRelease=function(t,e,i){return e=this.toSeconds(e),this.triggerAttack(e,i),this.triggerRelease(e+this.toSeconds(t)),this},s.default.Envelope.prototype.cancel=function(t){return this._sig.cancelScheduledValues(t),this},s.default.Envelope.prototype.connect=s.default.SignalBase.prototype.connect,function(){var t,e,i=[];for(t=0;t<128;t++)i[t]=Math.sin(t/127*(Math.PI/2));var n=[];for(t=0;t<127;t++){e=t/127;var o=Math.sin(e*(2*Math.PI)*6.4-Math.PI/2)+1;n[t]=o/10+.83*e}n[127]=1;var a=[];for(t=0;t<128;t++)a[t]=Math.ceil(t/127*5)/5;var r=[];for(t=0;t<128;t++)e=t/127,r[t]=.5*(1-Math.cos(Math.PI*e));var l,u=[];for(t=0;t<128;t++){e=t/127;var d=4*Math.pow(e,3)+.2,f=Math.cos(d*Math.PI*2*e);u[t]=Math.abs(f*(1-e))}function h(t){for(var e=new Array(t.length),i=0;i<t.length;i++)e[i]=1-t[i];return e}s.default.Envelope.Type={linear:"linear",exponential:"exponential",bounce:{In:h(u),Out:u},cosine:{In:i,Out:(l=i,l.slice(0).reverse())},step:{In:a,Out:h(a)},ripple:{In:n,Out:h(n)},sine:{In:r,Out:h(r)}}}(),s.default.Envelope.prototype.dispose=function(){return s.default.AudioNode.prototype.dispose.call(this),this._sig.dispose(),this._sig=null,this._attackCurve=null,this._releaseCurve=null,this},e.default=s.default.Envelope},function(t,e,i){"use strict";i.r(e);var s=i(0);i(23),i(10),i(19),i(7),i(28),i(3),i(2),i(20);if(s.default.supported&&!s.default.global.AudioContext.prototype.createStereoPanner){var n=function(t){this.context=t,this.pan=new s.default.Signal(0,s.default.Type.AudioRange);var e=new s.default.WaveShaper(function(t){return s.default.equalPowerScale((t+1)/2)},4096),i=new s.default.WaveShaper(function(t){return s.default.equalPowerScale(1-(t+1)/2)},4096),n=new s.default.Gain,o=new s.default.Gain,a=this.input=new s.default.Split;a._splitter.channelCountMode="explicit",(new s.default.Zero).fan(e,i);var r=this.output=new s.default.Merge;a.left.chain(n,r.left),a.right.chain(o,r.right),this.pan.chain(i,n.gain),this.pan.chain(e,o.gain)};n.prototype.disconnect=function(){this.output.disconnect.apply(this.output,arguments)},n.prototype.connect=function(){this.output.connect.apply(this.output,arguments)},AudioContext.prototype.createStereoPanner=function(){return new n(this)},s.default.Context.prototype.createStereoPanner=function(){return new n(this)}}i(22),i(1);s.default.Panner=function(){var t=s.default.defaults(arguments,["pan"],s.default.Panner);s.default.AudioNode.call(this),this._panner=this.input=this.output=this.context.createStereoPanner(),this.pan=this._panner.pan,this.pan.value=t.pan,this._readOnly("pan")},s.default.extend(s.default.Panner,s.default.AudioNode),s.default.Panner.defaults={pan:0},s.default.Panner.prototype.dispose=function(){return s.default.AudioNode.prototype.dispose.call(this),this._writable("pan"),this._panner.disconnect(),this._panner=null,this.pan=null,this};e.default=s.default.Panner},function(t,e,i){"use strict";i.r(e);var s=i(0);i(6),i(17),i(5),i(3);s.default.FMOscillator=function(){var t=s.default.defaults(arguments,["frequency","type","modulationType"],s.default.FMOscillator);s.default.Source.call(this,t),this._carrier=new s.default.Oscillator(t.frequency,t.type),this.frequency=new s.default.Signal(t.frequency,s.default.Type.Frequency),this.detune=this._carrier.detune,this.detune.value=t.detune,this.modulationIndex=new s.default.Multiply(t.modulationIndex),this.modulationIndex.units=s.default.Type.Positive,this._modulator=new s.default.Oscillator(t.frequency,t.modulationType),this.harmonicity=new s.default.Multiply(t.harmonicity),this.harmonicity.units=s.default.Type.Positive,this._modulationNode=new s.default.Gain(0),this.frequency.connect(this._carrier.frequency),this.frequency.chain(this.harmonicity,this._modulator.frequency),this.frequency.chain(this.modulationIndex,this._modulationNode),this._modulator.connect(this._modulationNode.gain),this._modulationNode.connect(this._carrier.frequency),this._carrier.connect(this.output),this.detune.connect(this._modulator.detune),this.phase=t.phase,this._readOnly(["modulationIndex","frequency","detune","harmonicity"])},s.default.extend(s.default.FMOscillator,s.default.Source),s.default.FMOscillator.defaults={frequency:440,detune:0,phase:0,type:"sine",modulationIndex:2,modulationType:"square",harmonicity:1},s.default.FMOscillator.prototype._start=function(t){this._modulator.start(t),this._carrier.start(t)},s.default.FMOscillator.prototype._stop=function(t){this._modulator.stop(t),this._carrier.stop(t)},s.default.FMOscillator.prototype.restart=function(t){this._modulator.restart(t),this._carrier.restart(t)},Object.defineProperty(s.default.FMOscillator.prototype,"type",{get:function(){return this._carrier.type},set:function(t){this._carrier.type=t}}),Object.defineProperty(s.default.FMOscillator.prototype,"baseType",{get:function(){return this._carrier.baseType},set:function(t){this._carrier.baseType=t}}),Object.defineProperty(s.default.FMOscillator.prototype,"partialCount",{get:function(){return this._carrier.partialCount},set:function(t){this._carrier.partialCount=t}}),Object.defineProperty(s.default.FMOscillator.prototype,"modulationType",{get:function(){return this._modulator.type},set:function(t){this._modulator.type=t}}),Object.defineProperty(s.default.FMOscillator.prototype,"phase",{get:function(){return this._carrier.phase},set:function(t){this._carrier.phase=t,this._modulator.phase=t}}),Object.defineProperty(s.default.FMOscillator.prototype,"partials",{get:function(){return this._carrier.partials},set:function(t){this._carrier.partials=t}}),s.default.FMOscillator.prototype.dispose=function(){return s.default.Source.prototype.dispose.call(this),this._writable(["modulationIndex","frequency","detune","harmonicity"]),this.frequency.dispose(),this.frequency=null,this.detune=null,this.harmonicity.dispose(),this.harmonicity=null,this._carrier.dispose(),this._carrier=null,this._modulator.dispose(),this._modulator=null,this._modulationNode.dispose(),this._modulationNode=null,this.modulationIndex.dispose(),this.modulationIndex=null,this},e.default=s.default.FMOscillator},function(t,e,i){"use strict";i.r(e);var s=i(0);i(6),i(17),i(2),i(7),i(3);s.default.PulseOscillator=function(){var t=s.default.defaults(arguments,["frequency","width"],s.default.Oscillator);s.default.Source.call(this,t),this.width=new s.default.Signal(t.width,s.default.Type.NormalRange),this._widthGate=new s.default.Gain(0),this._sawtooth=new s.default.Oscillator({frequency:t.frequency,detune:t.detune,type:"sawtooth",phase:t.phase}),this.frequency=this._sawtooth.frequency,this.detune=this._sawtooth.detune,this._thresh=new s.default.WaveShaper(function(t){return t<0?-1:1}),this._sawtooth.chain(this._thresh,this.output),this.width.chain(this._widthGate,this._thresh),this._readOnly(["width","frequency","detune"])},s.default.extend(s.default.PulseOscillator,s.default.Source),s.default.PulseOscillator.defaults={frequency:440,detune:0,phase:0,width:.2},s.default.PulseOscillator.prototype._start=function(t){t=this.toSeconds(t),this._sawtooth.start(t),this._widthGate.gain.setValueAtTime(1,t)},s.default.PulseOscillator.prototype._stop=function(t){t=this.toSeconds(t),this._sawtooth.stop(t),this._widthGate.gain.setValueAtTime(0,t)},s.default.PulseOscillator.prototype.restart=function(t){this._sawtooth.restart(t),this._widthGate.gain.cancelScheduledValues(t),this._widthGate.gain.setValueAtTime(1,t)},Object.defineProperty(s.default.PulseOscillator.prototype,"phase",{get:function(){return this._sawtooth.phase},set:function(t){this._sawtooth.phase=t}}),Object.defineProperty(s.default.PulseOscillator.prototype,"type",{get:function(){return"pulse"}}),Object.defineProperty(s.default.PulseOscillator.prototype,"baseType",{get:function(){return"pulse"}}),Object.defineProperty(s.default.PulseOscillator.prototype,"partials",{get:function(){return[]}}),s.default.PulseOscillator.prototype.dispose=function(){return s.default.Source.prototype.dispose.call(this),this._sawtooth.dispose(),this._sawtooth=null,this._writable(["width","frequency","detune"]),this.width.dispose(),this.width=null,this._widthGate.dispose(),this._widthGate=null,this._thresh.dispose(),this._thresh=null,this.frequency=null,this.detune=null,this},e.default=s.default.PulseOscillator},function(t,e,i){"use strict";i.r(e);var s=i(0);i(16),i(4),i(34);s.default.Event=function(){var t=s.default.defaults(arguments,["callback","value"],s.default.Event);s.default.call(this),this._loop=t.loop,this.callback=t.callback,this.value=t.value,this._loopStart=this.toTicks(t.loopStart),this._loopEnd=this.toTicks(t.loopEnd),this._state=new s.default.TimelineState(s.default.State.Stopped),this._playbackRate=1,this._startOffset=0,this._probability=t.probability,this._humanize=t.humanize,this.mute=t.mute,this.playbackRate=t.playbackRate},s.default.extend(s.default.Event),s.default.Event.defaults={callback:s.default.noOp,loop:!1,loopEnd:"1m",loopStart:0,playbackRate:1,value:null,probability:1,mute:!1,humanize:!1},s.default.Event.prototype._rescheduleEvents=function(t){return t=s.default.defaultArg(t,-1),this._state.forEachFrom(t,function(t){var e;if(t.state===s.default.State.Started){s.default.isDefined(t.id)&&s.default.Transport.clear(t.id);var i=t.time+Math.round(this.startOffset/this._playbackRate);if(!0===this._loop||s.default.isNumber(this._loop)&&this._loop>1){e=1/0,s.default.isNumber(this._loop)&&(e=this._loop*this._getLoopDuration());var n=this._state.getAfter(i);null!==n&&(e=Math.min(e,n.time-i)),e!==1/0&&(this._state.setStateAtTime(s.default.State.Stopped,i+e+1),e=s.default.Ticks(e));var o=s.default.Ticks(this._getLoopDuration());t.id=s.default.Transport.scheduleRepeat(this._tick.bind(this),o,s.default.Ticks(i),e)}else t.id=s.default.Transport.schedule(this._tick.bind(this),s.default.Ticks(i))}}.bind(this)),this},Object.defineProperty(s.default.Event.prototype,"state",{get:function(){return this._state.getValueAtTime(s.default.Transport.ticks)}}),Object.defineProperty(s.default.Event.prototype,"startOffset",{get:function(){return this._startOffset},set:function(t){this._startOffset=t}}),Object.defineProperty(s.default.Event.prototype,"probability",{get:function(){return this._probability},set:function(t){this._probability=t}}),Object.defineProperty(s.default.Event.prototype,"humanize",{get:function(){return this._humanize},set:function(t){this._humanize=t}}),s.default.Event.prototype.start=function(t){return t=this.toTicks(t),this._state.getValueAtTime(t)===s.default.State.Stopped&&(this._state.add({state:s.default.State.Started,time:t,id:void 0}),this._rescheduleEvents(t)),this},s.default.Event.prototype.stop=function(t){if(this.cancel(t),t=this.toTicks(t),this._state.getValueAtTime(t)===s.default.State.Started){this._state.setStateAtTime(s.default.State.Stopped,t);var e=this._state.getBefore(t),i=t;null!==e&&(i=e.time),this._rescheduleEvents(i)}return this},s.default.Event.prototype.cancel=function(t){return t=s.default.defaultArg(t,-1/0),t=this.toTicks(t),this._state.forEachFrom(t,function(t){s.default.Transport.clear(t.id)}),this._state.cancel(t),this},s.default.Event.prototype._tick=function(t){var e=s.default.Transport.getTicksAtTime(t);if(!this.mute&&this._state.getValueAtTime(e)===s.default.State.Started){if(this.probability<1&&Math.random()>this.probability)return;if(this.humanize){var i=.02;s.default.isBoolean(this.humanize)||(i=this.toSeconds(this.humanize)),t+=(2*Math.random()-1)*i}this.callback(t,this.value)}},s.default.Event.prototype._getLoopDuration=function(){return Math.round((this._loopEnd-this._loopStart)/this._playbackRate)},Object.defineProperty(s.default.Event.prototype,"loop",{get:function(){return this._loop},set:function(t){this._loop=t,this._rescheduleEvents()}}),Object.defineProperty(s.default.Event.prototype,"playbackRate",{get:function(){return this._playbackRate},set:function(t){this._playbackRate=t,this._rescheduleEvents()}}),Object.defineProperty(s.default.Event.prototype,"loopEnd",{get:function(){return s.default.Ticks(this._loopEnd).toSeconds()},set:function(t){this._loopEnd=this.toTicks(t),this._loop&&this._rescheduleEvents()}}),Object.defineProperty(s.default.Event.prototype,"loopStart",{get:function(){return s.default.Ticks(this._loopStart).toSeconds()},set:function(t){this._loopStart=this.toTicks(t),this._loop&&this._rescheduleEvents()}}),Object.defineProperty(s.default.Event.prototype,"progress",{get:function(){if(this._loop){var t=s.default.Transport.ticks,e=this._state.get(t);if(null!==e&&e.state===s.default.State.Started){var i=this._getLoopDuration();return(t-e.time)%i/i}return 0}return 0}}),s.default.Event.prototype.dispose=function(){this.cancel(),this._state.dispose(),this._state=null,this.callback=null,this.value=null},e.default=s.default.Event},function(t,e,i){"use strict";i.r(e);var s=i(0);i(2),i(13),i(29),i(10),i(3),i(1);s.default.MidSideMerge=function(){s.default.AudioNode.call(this),this.createInsOuts(2,0),this.mid=this.input[0]=new s.default.Gain,this._left=new s.default.Add,this._timesTwoLeft=new s.default.Multiply(Math.SQRT1_2),this.side=this.input[1]=new s.default.Gain,this._right=new s.default.Subtract,this._timesTwoRight=new s.default.Multiply(Math.SQRT1_2),this._merge=this.output=new s.default.Merge,this.mid.connect(this._left,0,0),this.side.connect(this._left,0,1),this.mid.connect(this._right,0,0),this.side.connect(this._right,0,1),this._left.connect(this._timesTwoLeft),this._right.connect(this._timesTwoRight),this._timesTwoLeft.connect(this._merge,0,0),this._timesTwoRight.connect(this._merge,0,1)},s.default.extend(s.default.MidSideMerge,s.default.AudioNode),s.default.MidSideMerge.prototype.dispose=function(){return s.default.AudioNode.prototype.dispose.call(this),this.mid.dispose(),this.mid=null,this.side.dispose(),this.side=null,this._left.dispose(),this._left=null,this._timesTwoLeft.dispose(),this._timesTwoLeft=null,this._right.dispose(),this._right=null,this._timesTwoRight.dispose(),this._timesTwoRight=null,this._merge.dispose(),this._merge=null,this},e.default=s.default.MidSideMerge},function(t,e,i){"use strict";i.r(e);var s=i(0);i(29),i(13),i(2),i(19),i(1);s.default.MidSideSplit=function(){s.default.AudioNode.call(this),this.createInsOuts(0,2),this._split=this.input=new s.default.Split,this._midAdd=new s.default.Add,this.mid=this.output[0]=new s.default.Multiply(Math.SQRT1_2),this._sideSubtract=new s.default.Subtract,this.side=this.output[1]=new s.default.Multiply(Math.SQRT1_2),this._split.connect(this._midAdd,0,0),this._split.connect(this._midAdd,1,1),this._split.connect(this._sideSubtract,0,0),this._split.connect(this._sideSubtract,1,1),this._midAdd.connect(this.mid),this._sideSubtract.connect(this.side)},s.default.extend(s.default.MidSideSplit,s.default.AudioNode),s.default.MidSideSplit.prototype.dispose=function(){return s.default.AudioNode.prototype.dispose.call(this),this.mid.dispose(),this.mid=null,this.side.dispose(),this.side=null,this._midAdd.dispose(),this._midAdd=null,this._sideSubtract.dispose(),this._sideSubtract=null,this._split.dispose(),this._split=null,this},e.default=s.default.MidSideSplit},function(t,e,i){"use strict";i.r(e);var s=i(0);i(2),i(9),i(1),i(59);s.default.LowpassCombFilter=function(){var t=s.default.defaults(arguments,["delayTime","resonance","dampening"],s.default.LowpassCombFilter);s.default.AudioNode.call(this),this._combFilter=this.output=new s.default.FeedbackCombFilter(t.delayTime,t.resonance),this.delayTime=this._combFilter.delayTime,this._lowpass=this.input=new s.default.Filter({frequency:t.dampening,type:"lowpass",Q:0,rolloff:-12}),this.dampening=this._lowpass.frequency,this.resonance=this._combFilter.resonance,this._lowpass.connect(this._combFilter),this._readOnly(["dampening","resonance","delayTime"])},s.default.extend(s.default.LowpassCombFilter,s.default.AudioNode),s.default.LowpassCombFilter.defaults={delayTime:.1,resonance:.5,dampening:3e3},s.default.LowpassCombFilter.prototype.dispose=function(){return s.default.AudioNode.prototype.dispose.call(this),this._writable(["dampening","resonance","delayTime"]),this._combFilter.dispose(),this._combFilter=null,this.resonance=null,this.delayTime=null,this._lowpass.dispose(),this._lowpass=null,this.dampening=null,this},e.default=s.default.LowpassCombFilter},function(t,e,i){"use strict";i.r(e);var s=i(0);i(45);s.default.Ticks=function(t,e){if(!(this instanceof s.default.Ticks))return new s.default.Ticks(t,e);s.default.TransportTime.call(this,t,e)},s.default.extend(s.default.Ticks,s.default.TransportTime),s.default.Ticks.prototype._defaultUnits="i",s.default.Ticks.prototype._now=function(){return s.default.Transport.ticks},s.default.Ticks.prototype._beatsToUnits=function(t){return this._getPPQ()*t},s.default.Ticks.prototype._secondsToUnits=function(t){return Math.floor(t/(60/this._getBpm())*this._getPPQ())},s.default.Ticks.prototype._ticksToUnits=function(t){return t},s.default.Ticks.prototype.toTicks=function(){return this.valueOf()},s.default.Ticks.prototype.toSeconds=function(){return this.valueOf()/this._getPPQ()*(60/this._getBpm())},e.default=s.default.Ticks},function(t,e,i){"use strict";i.r(e);var s=i(0);i(55);s.default.TransportEvent=function(t,e){e=s.default.defaultArg(e,s.default.TransportEvent.defaults),s.default.call(this),this.Transport=t,this.id=s.default.TransportEvent._eventId++,this.time=s.default.Ticks(e.time),this.callback=e.callback,this._once=e.once},s.default.extend(s.default.TransportEvent),s.default.TransportEvent.defaults={once:!1,callback:s.default.noOp},s.default.TransportEvent._eventId=0,s.default.TransportEvent.prototype.invoke=function(t){this.callback&&(this.callback(t),this._once&&this.Transport&&this.Transport.clear(this.id))},s.default.TransportEvent.prototype.dispose=function(){return s.default.prototype.dispose.call(this),this.Transport=null,this.callback=null,this.time=null,this},e.default=s.default.TransportEvent},function(t,e,i){"use strict";i.r(e);var s=i(0);i(82),i(34),i(24),i(14);s.default.TickSource=function(){var t=s.default.defaults(arguments,["frequency"],s.default.TickSource);this.frequency=new s.default.TickSignal(t.frequency),this._readOnly("frequency"),this._state=new s.default.TimelineState(s.default.State.Stopped),this._state.setStateAtTime(s.default.State.Stopped,0),this._tickOffset=new s.default.Timeline,this.setTicksAtTime(0,0)},s.default.extend(s.default.TickSource),s.default.TickSource.defaults={frequency:1},Object.defineProperty(s.default.TickSource.prototype,"state",{get:function(){return this._state.getValueAtTime(this.now())}}),s.default.TickSource.prototype.start=function(t,e){return t=this.toSeconds(t),this._state.getValueAtTime(t)!==s.default.State.Started&&(this._state.setStateAtTime(s.default.State.Started,t),s.default.isDefined(e)&&this.setTicksAtTime(e,t)),this},s.default.TickSource.prototype.stop=function(t){if(t=this.toSeconds(t),this._state.getValueAtTime(t)===s.default.State.Stopped){var e=this._state.get(t);e.time>0&&(this._tickOffset.cancel(e.time),this._state.cancel(e.time))}return this._state.cancel(t),this._state.setStateAtTime(s.default.State.Stopped,t),this.setTicksAtTime(0,t),this},s.default.TickSource.prototype.pause=function(t){return t=this.toSeconds(t),this._state.getValueAtTime(t)===s.default.State.Started&&this._state.setStateAtTime(s.default.State.Paused,t),this},s.default.TickSource.prototype.cancel=function(t){return t=this.toSeconds(t),this._state.cancel(t),this._tickOffset.cancel(t),this},s.default.TickSource.prototype.getTicksAtTime=function(t){t=this.toSeconds(t);var e=this._state.getLastState(s.default.State.Stopped,t),i={state:s.default.State.Paused,time:t};this._state.add(i);var n=e,o=0;return this._state.forEachBetween(e.time,t+this.sampleTime,function(t){var e=n.time,i=this._tickOffset.get(t.time);i.time>=n.time&&(o=i.ticks,e=i.time),n.state===s.default.State.Started&&t.state!==s.default.State.Started&&(o+=this.frequency.getTicksAtTime(t.time)-this.frequency.getTicksAtTime(e)),n=t}.bind(this)),this._state.remove(i),o},Object.defineProperty(s.default.TickSource.prototype,"ticks",{get:function(){return this.getTicksAtTime(this.now())},set:function(t){this.setTicksAtTime(t,this.now())}}),Object.defineProperty(s.default.TickSource.prototype,"seconds",{get:function(){return this.getSecondsAtTime(this.now())},set:function(t){var e=this.now(),i=this.frequency.timeToTicks(t,e);this.setTicksAtTime(i,e)}}),s.default.TickSource.prototype.getSecondsAtTime=function(t){t=this.toSeconds(t);var e=this._state.getLastState(s.default.State.Stopped,t),i={state:s.default.State.Paused,time:t};this._state.add(i);var n=e,o=0;return this._state.forEachBetween(e.time,t+this.sampleTime,function(t){var e=n.time,i=this._tickOffset.get(t.time);i.time>=n.time&&(o=i.seconds,e=i.time),n.state===s.default.State.Started&&t.state!==s.default.State.Started&&(o+=t.time-e),n=t}.bind(this)),this._state.remove(i),o},s.default.TickSource.prototype.setTicksAtTime=function(t,e){return e=this.toSeconds(e),this._tickOffset.cancel(e),this._tickOffset.add({time:e,ticks:t,seconds:this.frequency.getDurationOfTicks(t,e)}),this},s.default.TickSource.prototype.getStateAtTime=function(t){return t=this.toSeconds(t),this._state.getValueAtTime(t)},s.default.TickSource.prototype.getTimeOfTick=function(t,e){e=s.default.defaultArg(e,this.now());var i=this._tickOffset.get(e),n=this._state.get(e),o=Math.max(i.time,n.time),a=this.frequency.getTicksAtTime(o)+t-i.ticks;return this.frequency.getTimeOfTick(a)},s.default.TickSource.prototype.forEachTickBetween=function(t,e,i){var n=this._state.get(t);if(this._state.forEachBetween(t,e,function(e){n.state===s.default.State.Started&&e.state!==s.default.State.Started&&this.forEachTickBetween(Math.max(n.time,t),e.time-this.sampleTime,i),n=e}.bind(this)),t=Math.max(n.time,t),n.state===s.default.State.Started&&this._state){var o=this.frequency.getTicksAtTime(t),a=(o-this.frequency.getTicksAtTime(n.time))%1;0!==a&&(a=1-a);for(var r=this.frequency.getTimeOfTick(o+a),l=null;r<e&&this._state;){try{i(r,Math.round(this.getTicksAtTime(r)))}catch(t){l=t;break}this._state&&(r+=this.frequency.getDurationOfTicks(1,r))}}if(l)throw l;return this},s.default.TickSource.prototype.dispose=function(){return s.default.Param.prototype.dispose.call(this),this._state.dispose(),this._state=null,this._tickOffset.dispose(),this._tickOffset=null,this._writable("frequency"),this.frequency.dispose(),this.frequency=null,this},e.default=s.default.TickSource},function(t,e,i){"use strict";i.r(e);var s=i(0);i(87),i(13),i(2),i(4),i(18),i(1);s.default.Follower=function(){var t=s.default.defaults(arguments,["smoothing"],s.default.Follower);s.default.AudioNode.call(this),this.createInsOuts(1,1),this._abs=new s.default.Abs,this._filter=this.context.createBiquadFilter(),this._filter.type="lowpass",this._filter.frequency.value=0,this._filter.Q.value=0,this._sub=new s.default.Subtract,this._delay=new s.default.Delay(this.blockTime),this._smoothing=t.smoothing,s.default.connect(this.input,this._delay),s.default.connect(this.input,this._sub,0,1),this._sub.chain(this._abs,this._filter,this.output),this.smoothing=t.smoothing},s.default.extend(s.default.Follower,s.default.AudioNode),s.default.Follower.defaults={smoothing:.05},Object.defineProperty(s.default.Follower.prototype,"smoothing",{get:function(){return this._smoothing},set:function(t){this._smoothing=t,this._filter.frequency.value=.5*s.default.Time(t).toFrequency()}}),s.default.Follower.prototype.connect=s.default.SignalBase.prototype.connect,s.default.Follower.prototype.dispose=function(){return s.default.AudioNode.prototype.dispose.call(this),this._filter.disconnect(),this._filter=null,this._delay.dispose(),this._delay=null,this._sub.disconnect(),this._sub=null,this._abs.dispose(),this._abs=null,this},e.default=s.default.Follower},function(t,e,i){"use strict";i.r(e);var s=i(0);i(42),i(2),i(14),i(18),i(3),i(1);s.default.FeedbackCombFilter=function(){var t=s.default.defaults(arguments,["delayTime","resonance"],s.default.FeedbackCombFilter);s.default.AudioNode.call(this),this._delay=this.input=this.output=new s.default.Delay(t.delayTime),this.delayTime=this._delay.delayTime,this._feedback=new s.default.Gain(t.resonance,s.default.Type.NormalRange),this.resonance=this._feedback.gain,this._delay.chain(this._feedback,this._delay),this._readOnly(["resonance","delayTime"])},s.default.extend(s.default.FeedbackCombFilter,s.default.AudioNode),s.default.FeedbackCombFilter.defaults={delayTime:.1,resonance:.5},s.default.FeedbackCombFilter.prototype.dispose=function(){return s.default.AudioNode.prototype.dispose.call(this),this._writable(["resonance","delayTime"]),this._delay.dispose(),this._delay=null,this.delayTime=null,this._feedback.dispose(),this._feedback=null,this.resonance=null,this},e.default=s.default.FeedbackCombFilter},function(t,e,i){"use strict";i.r(e);var s=i(0);i(9),i(2),i(3),i(1);s.default.MultibandSplit=function(){var t=s.default.defaults(arguments,["lowFrequency","highFrequency"],s.default.MultibandSplit);s.default.AudioNode.call(this),this.input=new s.default.Gain,this.output=new Array(3),this.low=this.output[0]=new s.default.Filter(0,"lowpass"),this._lowMidFilter=new s.default.Filter(0,"highpass"),this.mid=this.output[1]=new s.default.Filter(0,"lowpass"),this.high=this.output[2]=new s.default.Filter(0,"highpass"),this.lowFrequency=new s.default.Signal(t.lowFrequency,s.default.Type.Frequency),this.highFrequency=new s.default.Signal(t.highFrequency,s.default.Type.Frequency),this.Q=new s.default.Signal(t.Q),this.input.fan(this.low,this.high),this.input.chain(this._lowMidFilter,this.mid),this.lowFrequency.connect(this.low.frequency),this.lowFrequency.connect(this._lowMidFilter.frequency),this.highFrequency.connect(this.mid.frequency),this.highFrequency.connect(this.high.frequency),this.Q.connect(this.low.Q),this.Q.connect(this._lowMidFilter.Q),this.Q.connect(this.mid.Q),this.Q.connect(this.high.Q),this._readOnly(["high","mid","low","highFrequency","lowFrequency"])},s.default.extend(s.default.MultibandSplit,s.default.AudioNode),s.default.MultibandSplit.defaults={lowFrequency:400,highFrequency:2500,Q:1},s.default.MultibandSplit.prototype.dispose=function(){return s.default.AudioNode.prototype.dispose.call(this),this._writable(["high","mid","low","highFrequency","lowFrequency"]),this.low.dispose(),this.low=null,this._lowMidFilter.dispose(),this._lowMidFilter=null,this.mid.dispose(),this.mid=null,this.high.dispose(),this.high=null,this.lowFrequency.dispose(),this.lowFrequency=null,this.highFrequency.dispose(),this.highFrequency=null,this.Q.dispose(),this.Q=null,this},e.default=s.default.MultibandSplit},function(t,e,i){"use strict";i.r(e);var s=i(0);i(7);s.default.Pow=function(t){s.default.SignalBase.call(this),this._exp=s.default.defaultArg(t,1),this._expScaler=this.input=this.output=new s.default.WaveShaper(this._expFunc(this._exp),8192)},s.default.extend(s.default.Pow,s.default.SignalBase),Object.defineProperty(s.default.Pow.prototype,"value",{get:function(){return this._exp},set:function(t){this._exp=t,this._expScaler.setMap(this._expFunc(this._exp))}}),s.default.Pow.prototype._expFunc=function(t){return function(e){return Math.pow(Math.abs(e),t)}},s.default.Pow.prototype.dispose=function(){return s.default.SignalBase.prototype.dispose.call(this),this._expScaler.dispose(),this._expScaler=null,this},e.default=s.default.Pow},function(t,e,i){"use strict";i.r(e);var s=i(0);s.default.TimeBase=function(t,e){if(!(this instanceof s.default.TimeBase))return new s.default.TimeBase(t,e);if(this._val=t,this._units=e,s.default.isUndef(this._units)&&s.default.isString(this._val)&&parseFloat(this._val)==this._val&&"+"!==this._val.charAt(0))this._val=parseFloat(this._val),this._units=this._defaultUnits;else if(t&&t.constructor===this.constructor)this._val=t._val,this._units=t._units;else if(t instanceof s.default.TimeBase)switch(this._defaultUnits){case"s":this._val=t.toSeconds();break;case"i":this._val=t.toTicks();break;case"hz":this._val=t.toFrequency();break;case"midi":this._val=t.toMidi();break;default:throw new Error("Unrecognized default units "+this._defaultUnits)}},s.default.extend(s.default.TimeBase),s.default.TimeBase.prototype._expressions={n:{regexp:/^(\d+)n(\.?)$/i,method:function(t,e){t=parseInt(t);var i="."===e?1.5:1;return 1===t?this._beatsToUnits(this._getTimeSignature())*i:this._beatsToUnits(4/t)*i}},t:{regexp:/^(\d+)t$/i,method:function(t){return t=parseInt(t),this._beatsToUnits(8/(3*parseInt(t)))}},m:{regexp:/^(\d+)m$/i,method:function(t){return this._beatsToUnits(parseInt(t)*this._getTimeSignature())}},i:{regexp:/^(\d+)i$/i,method:function(t){return this._ticksToUnits(parseInt(t))}},hz:{regexp:/^(\d+(?:\.\d+)?)hz$/i,method:function(t){return this._frequencyToUnits(parseFloat(t))}},tr:{regexp:/^(\d+(?:\.\d+)?):(\d+(?:\.\d+)?):?(\d+(?:\.\d+)?)?$/,method:function(t,e,i){var s=0;return t&&"0"!==t&&(s+=this._beatsToUnits(this._getTimeSignature()*parseFloat(t))),e&&"0"!==e&&(s+=this._beatsToUnits(parseFloat(e))),i&&"0"!==i&&(s+=this._beatsToUnits(parseFloat(i)/4)),s}},s:{regexp:/^(\d+(?:\.\d+)?)s$/,method:function(t){return this._secondsToUnits(parseFloat(t))}},samples:{regexp:/^(\d+)samples$/,method:function(t){return parseInt(t)/this.context.sampleRate}},default:{regexp:/^(\d+(?:\.\d+)?)$/,method:function(t){return this._expressions[this._defaultUnits].method.call(this,t)}}},s.default.TimeBase.prototype._defaultUnits="s",s.default.TimeBase.prototype._getBpm=function(){return s.default.Transport?s.default.Transport.bpm.value:120},s.default.TimeBase.prototype._getTimeSignature=function(){return s.default.Transport?s.default.Transport.timeSignature:4},s.default.TimeBase.prototype._getPPQ=function(){return s.default.Transport?s.default.Transport.PPQ:192},s.default.TimeBase.prototype._now=function(){return this.now()},s.default.TimeBase.prototype._frequencyToUnits=function(t){return 1/t},s.default.TimeBase.prototype._beatsToUnits=function(t){return 60/this._getBpm()*t},s.default.TimeBase.prototype._secondsToUnits=function(t){return t},s.default.TimeBase.prototype._ticksToUnits=function(t){return t*(this._beatsToUnits(1)/this._getPPQ())},s.default.TimeBase.prototype._noArg=function(){return this._now()},s.default.TimeBase.prototype.valueOf=function(){if(s.default.isUndef(this._val))return this._noArg();if(s.default.isString(this._val)&&s.default.isUndef(this._units)){for(var t in this._expressions)if(this._expressions[t].regexp.test(this._val.trim())){this._units=t;break}}else if(s.default.isObject(this._val)){var e=0;for(var i in this._val){var n=this._val[i];e+=new this.constructor(i).valueOf()*n}return e}if(s.default.isDefined(this._units)){var o=this._expressions[this._units],a=this._val.toString().trim().match(o.regexp);return a?o.method.apply(this,a.slice(1)):o.method.call(this,parseFloat(this._val))}return this._val},s.default.TimeBase.prototype.toSeconds=function(){return this.valueOf()},s.default.TimeBase.prototype.toFrequency=function(){return 1/this.toSeconds()},s.default.TimeBase.prototype.toSamples=function(){return this.toSeconds()*this.context.sampleRate},s.default.TimeBase.prototype.toMilliseconds=function(){return 1e3*this.toSeconds()},s.default.TimeBase.prototype.dispose=function(){this._val=null,this._units=null},e.default=s.default.TimeBase},function(t,e,i){"use strict";i.r(e);var s=i(0);i(62),i(46);s.default.Time=function(t,e){if(!(this instanceof s.default.Time))return new s.default.Time(t,e);s.default.TimeBase.call(this,t,e)},s.default.extend(s.default.Time,s.default.TimeBase),s.default.Time.prototype._expressions=Object.assign({},s.default.TimeBase.prototype._expressions,{quantize:{regexp:/^@(.+)/,method:function(t){if(s.default.Transport){var e=new this.constructor(t);return this._secondsToUnits(s.default.Transport.nextSubdivision(e))}return 0}},now:{regexp:/^\+(.+)/,method:function(t){return this._now()+new this.constructor(t)}}}),s.default.Time.prototype.quantize=function(t,e){e=s.default.defaultArg(e,1);var i=new this.constructor(t),n=this.valueOf();return n+(Math.round(n/i)*i-n)*e},s.default.Time.prototype.toNotation=function(){for(var t=this.toSeconds(),e=["1m"],i=1;i<8;i++){var n=Math.pow(2,i);e.push(n+"n."),e.push(n+"n"),e.push(n+"t")}e.push("0");var o=e[0],a=s.default.Time(e[0]).toSeconds();return e.forEach(function(e){var i=s.default.Time(e).toSeconds();Math.abs(i-t)<Math.abs(a-t)&&(o=e,a=i)}),o},s.default.Time.prototype.toBarsBeatsSixteenths=function(){var t=this._beatsToUnits(1),e=this.valueOf()/t;e=parseFloat(e.toFixed(4));var i=Math.floor(e/this._getTimeSignature()),s=e%1*4;return e=Math.floor(e)%this._getTimeSignature(),(s=s.toString()).length>3&&(s=parseFloat(parseFloat(s).toFixed(3))),[i,e,s].join(":")},s.default.Time.prototype.toTicks=function(){var t=this._beatsToUnits(1),e=this.valueOf()/t;return Math.round(e*this._getPPQ())},s.default.Time.prototype.toSeconds=function(){return this.valueOf()},s.default.Time.prototype.toMidi=function(){return s.default.Frequency.ftom(this.toFrequency())},e.default=s.default.Time},function(t,e,i){"use strict";i.r(e);var s=i(0);i(11),i(6),i(3),i(1);s.default.supported&&(OscillatorNode.prototype.setPeriodicWave||(OscillatorNode.prototype.setPeriodicWave=OscillatorNode.prototype.setWaveTable),AudioContext.prototype.createPeriodicWave||(AudioContext.prototype.createPeriodicWave=AudioContext.prototype.createWaveTable)),s.default.OscillatorNode=function(){var t=s.default.defaults(arguments,["frequency","type"],s.default.OscillatorNode);s.default.AudioNode.call(this,t),this.onended=t.onended,this._startTime=-1,this._stopTime=-1,this._gainNode=this.output=new s.default.Gain(0),this._oscillator=this.context.createOscillator(),s.default.connect(this._oscillator,this._gainNode),this.type=t.type,this.frequency=new s.default.Param({param:this._oscillator.frequency,units:s.default.Type.Frequency,value:t.frequency}),this.detune=new s.default.Param({param:this._oscillator.detune,units:s.default.Type.Cents,value:t.detune}),this._gain=1},s.default.extend(s.default.OscillatorNode,s.default.AudioNode),s.default.OscillatorNode.defaults={frequency:440,detune:0,type:"sine",onended:s.default.noOp},Object.defineProperty(s.default.OscillatorNode.prototype,"state",{get:function(){return this.getStateAtTime(this.now())}}),s.default.OscillatorNode.prototype.getStateAtTime=function(t){return t=this.toSeconds(t),-1!==this._startTime&&t>=this._startTime&&(-1===this._stopTime||t<=this._stopTime)?s.default.State.Started:s.default.State.Stopped},s.default.OscillatorNode.prototype.start=function(t){if(this.log("start",t),-1!==this._startTime)throw new Error("cannot call OscillatorNode.start more than once");return this._startTime=this.toSeconds(t),this._startTime=Math.max(this._startTime,this.context.currentTime),this._oscillator.start(this._startTime),this._gainNode.gain.setValueAtTime(1,this._startTime),this},s.default.OscillatorNode.prototype.setPeriodicWave=function(t){return this._oscillator.setPeriodicWave(t),this},s.default.OscillatorNode.prototype.stop=function(t){return this.log("stop",t),this.assert(-1!==this._startTime,"'start' must be called before 'stop'"),this.cancelStop(),this._stopTime=this.toSeconds(t),this._stopTime=Math.max(this._stopTime,this.context.currentTime),this._stopTime>this._startTime?(this._gainNode.gain.setValueAtTime(0,this._stopTime),this.context.clearTimeout(this._timeout),this._timeout=this.context.setTimeout(function(){this._oscillator.stop(this.now()),this.onended(),setTimeout(function(){this._oscillator&&(this._oscillator.disconnect(),this._gainNode.disconnect())}.bind(this),100)}.bind(this),this._stopTime-this.context.currentTime)):this._gainNode.gain.cancelScheduledValues(this._startTime),this},s.default.OscillatorNode.prototype.cancelStop=function(){return-1!==this._startTime&&(this._gainNode.gain.cancelScheduledValues(this._startTime+this.sampleTime),this.context.clearTimeout(this._timeout),this._stopTime=-1),this},Object.defineProperty(s.default.OscillatorNode.prototype,"type",{get:function(){return this._oscillator.type},set:function(t){this._oscillator.type=t}}),s.default.OscillatorNode.prototype.dispose=function(){return this._wasDisposed||(this._wasDisposed=!0,this.context.clearTimeout(this._timeout),s.default.AudioNode.prototype.dispose.call(this),this.onended=null,this._oscillator.disconnect(),this._oscillator=null,this._gainNode.dispose(),this._gainNode=null,this.frequency.dispose(),this.frequency=null,this.detune.dispose(),this.detune=null),this};e.default=s.default.OscillatorNode},function(t,e,i){"use strict";i.r(e);var s=i(0);i(11),i(6),i(57),i(32);s.default.Player=function(t){var e;t instanceof s.default.Buffer&&t.loaded?(t=t.get(),e=s.default.Player.defaults):e=s.default.defaults(arguments,["url","onload"],s.default.Player),s.default.Source.call(this,e),this.autostart=e.autostart,this._buffer=new s.default.Buffer({url:e.url,onload:this._onload.bind(this,e.onload),reverse:e.reverse}),t instanceof AudioBuffer&&this._buffer.set(t),this._loop=e.loop,this._loopStart=e.loopStart,this._loopEnd=e.loopEnd,this._playbackRate=e.playbackRate,this._activeSources=[],this.fadeIn=e.fadeIn,this.fadeOut=e.fadeOut},s.default.extend(s.default.Player,s.default.Source),s.default.Player.defaults={onload:s.default.noOp,playbackRate:1,loop:!1,autostart:!1,loopStart:0,loopEnd:0,reverse:!1,fadeIn:0,fadeOut:0},s.default.Player.prototype.load=function(t,e){return this._buffer.load(t,this._onload.bind(this,e))},s.default.Player.prototype._onload=function(t){(t=s.default.defaultArg(t,s.default.noOp))(this),this.autostart&&this.start()},s.default.Player.prototype._onSourceEnd=function(t){var e=this._activeSources.indexOf(t);this._activeSources.splice(e,1),0!==this._activeSources.length||this._synced||this._state.setStateAtTime(s.default.State.Stopped,s.default.now())},s.default.Player.prototype._start=function(t,e,i){e=this._loop?s.default.defaultArg(e,this._loopStart):s.default.defaultArg(e,0),e=this.toSeconds(e),this._synced&&(e*=this._playbackRate);var n=s.default.defaultArg(i,Math.max(this._buffer.duration-e,0));n=this.toSeconds(n),n/=this._playbackRate,t=this.toSeconds(t);var o=new s.default.BufferSource({buffer:this._buffer,loop:this._loop,loopStart:this._loopStart,loopEnd:this._loopEnd,onended:this._onSourceEnd.bind(this),playbackRate:this._playbackRate,fadeIn:this.fadeIn,fadeOut:this.fadeOut}).connect(this.output);return this._loop||this._synced||this._state.setStateAtTime(s.default.State.Stopped,t+n),this._activeSources.push(o),this._loop&&s.default.isUndef(i)?o.start(t,e):o.start(t,e,n-this.toSeconds(this.fadeOut)),this},s.default.Player.prototype._stop=function(t){return t=this.toSeconds(t),this._activeSources.forEach(function(e){e.stop(t)}),this},s.default.Player.prototype.restart=function(t,e,i){return this._stop(t),this._start(t,e,i),this},s.default.Player.prototype.seek=function(t,e){return e=this.toSeconds(e),this._state.getValueAtTime(e)===s.default.State.Started&&(t=this.toSeconds(t),this._stop(e),this._start(e,t)),this},s.default.Player.prototype.setLoopPoints=function(t,e){return this.loopStart=t,this.loopEnd=e,this},Object.defineProperty(s.default.Player.prototype,"loopStart",{get:function(){return this._loopStart},set:function(t){this._loopStart=t,this._activeSources.forEach(function(e){e.loopStart=t})}}),Object.defineProperty(s.default.Player.prototype,"loopEnd",{get:function(){return this._loopEnd},set:function(t){this._loopEnd=t,this._activeSources.forEach(function(e){e.loopEnd=t})}}),Object.defineProperty(s.default.Player.prototype,"buffer",{get:function(){return this._buffer},set:function(t){this._buffer.set(t)}}),Object.defineProperty(s.default.Player.prototype,"loop",{get:function(){return this._loop},set:function(t){if(this._loop!==t&&(this._loop=t,this._activeSources.forEach(function(e){e.loop=t}),t)){var e=this._state.getNextState(s.default.State.Stopped,this.now());e&&this._state.cancel(e.time)}}}),Object.defineProperty(s.default.Player.prototype,"playbackRate",{get:function(){return this._playbackRate},set:function(t){this._playbackRate=t;var e=this.now(),i=this._state.getNextState(s.default.State.Stopped,e);i&&this._state.cancel(i.time),this._activeSources.forEach(function(i){i.cancelStop(),i.playbackRate.setValueAtTime(t,e)})}}),Object.defineProperty(s.default.Player.prototype,"reverse",{get:function(){return this._buffer.reverse},set:function(t){this._buffer.reverse=t}}),Object.defineProperty(s.default.Player.prototype,"loaded",{get:function(){return this._buffer.loaded}}),s.default.Player.prototype.dispose=function(){return this._activeSources.forEach(function(t){t.dispose()}),this._activeSources=null,s.default.Source.prototype.dispose.call(this),this._buffer.dispose(),this._buffer=null,this},e.default=s.default.Player},function(t,e,i){"use strict";i.r(e);var s=i(0);i(31),i(41),i(37),i(2),i(9),i(25);s.default.MonoSynth=function(t){t=s.default.defaultArg(t,s.default.MonoSynth.defaults),s.default.Monophonic.call(this,t),this.oscillator=new s.default.OmniOscillator(t.oscillator),this.frequency=this.oscillator.frequency,this.detune=this.oscillator.detune,this.filter=new s.default.Filter(t.filter),this.filter.frequency.value=5e3,this.filterEnvelope=new s.default.FrequencyEnvelope(t.filterEnvelope),this.envelope=new s.default.AmplitudeEnvelope(t.envelope),this.oscillator.chain(this.filter,this.envelope,this.output),this.filterEnvelope.connect(this.filter.frequency),this._readOnly(["oscillator","frequency","detune","filter","filterEnvelope","envelope"])},s.default.extend(s.default.MonoSynth,s.default.Monophonic),s.default.MonoSynth.defaults={frequency:"C4",detune:0,oscillator:{type:"square"},filter:{Q:6,type:"lowpass",rolloff:-24},envelope:{attack:.005,decay:.1,sustain:.9,release:1},filterEnvelope:{attack:.06,decay:.2,sustain:.5,release:2,baseFrequency:200,octaves:7,exponent:2}},s.default.MonoSynth.prototype._triggerEnvelopeAttack=function(t,e){return t=this.toSeconds(t),this.envelope.triggerAttack(t,e),this.filterEnvelope.triggerAttack(t),this.oscillator.start(t),0===this.envelope.sustain&&this.oscillator.stop(t+this.envelope.attack+this.envelope.decay),this},s.default.MonoSynth.prototype._triggerEnvelopeRelease=function(t){return this.envelope.triggerRelease(t),this.filterEnvelope.triggerRelease(t),this.oscillator.stop(t+this.envelope.release),this},s.default.MonoSynth.prototype.dispose=function(){return s.default.Monophonic.prototype.dispose.call(this),this._writable(["oscillator","frequency","detune","filter","filterEnvelope","envelope"]),this.oscillator.dispose(),this.oscillator=null,this.envelope.dispose(),this.envelope=null,this.filterEnvelope.dispose(),this.filterEnvelope=null,this.filter.dispose(),this.filter=null,this.frequency=null,this.detune=null,this},e.default=s.default.MonoSynth},function(t,e,i){"use strict";i.r(e);var s=i(0);i(6),i(17),i(5),i(3);s.default.FatOscillator=function(){var t=s.default.defaults(arguments,["frequency","type","spread"],s.default.FatOscillator);s.default.Source.call(this,t),this.frequency=new s.default.Signal(t.frequency,s.default.Type.Frequency),this.detune=new s.default.Signal(t.detune,s.default.Type.Cents),this._oscillators=[],this._spread=t.spread,this._type=t.type,this._phase=t.phase,this._partials=t.partials,this._partialCount=t.partialCount,this.count=t.count,this._readOnly(["frequency","detune"])},s.default.extend(s.default.FatOscillator,s.default.Source),s.default.FatOscillator.defaults={frequency:440,detune:0,phase:0,spread:20,count:3,type:"sawtooth",partials:[],partialCount:0},s.default.FatOscillator.prototype._start=function(t){t=this.toSeconds(t),this._forEach(function(e){e.start(t)})},s.default.FatOscillator.prototype._stop=function(t){t=this.toSeconds(t),this._forEach(function(e){e.stop(t)})},s.default.FatOscillator.prototype.restart=function(t){t=this.toSeconds(t),this._forEach(function(e){e.restart(t)})},s.default.FatOscillator.prototype._forEach=function(t){for(var e=0;e<this._oscillators.length;e++)t.call(this,this._oscillators[e],e)},Object.defineProperty(s.default.FatOscillator.prototype,"type",{get:function(){return this._type},set:function(t){this._type=t,this._forEach(function(e){e.type=t})}}),Object.defineProperty(s.default.FatOscillator.prototype,"spread",{get:function(){return this._spread},set:function(t){if(this._spread=t,this._oscillators.length>1){var e=-t/2,i=t/(this._oscillators.length-1);this._forEach(function(t,s){t.detune.value=e+i*s})}}}),Object.defineProperty(s.default.FatOscillator.prototype,"count",{get:function(){return this._oscillators.length},set:function(t){if(t=Math.max(t,1),this._oscillators.length!==t){this._forEach(function(t){t.dispose()}),this._oscillators=[];for(var e=0;e<t;e++){var i=new s.default.Oscillator;this.type===s.default.Oscillator.Type.Custom?i.partials=this._partials:i.type=this._type,i.partialCount=this._partialCount,i.phase=this._phase+e/t*360,i.volume.value=-6-1.1*t,this.frequency.connect(i.frequency),this.detune.connect(i.detune),i.connect(this.output),this._oscillators[e]=i}this.spread=this._spread,this.state===s.default.State.Started&&this._forEach(function(t){t.start()})}}}),Object.defineProperty(s.default.FatOscillator.prototype,"phase",{get:function(){return this._phase},set:function(t){this._phase=t,this._forEach(function(e){e.phase=t})}}),Object.defineProperty(s.default.FatOscillator.prototype,"baseType",{get:function(){return this._oscillators[0].baseType},set:function(t){this._forEach(function(e){e.baseType=t}),this._type=this._oscillators[0].type}}),Object.defineProperty(s.default.FatOscillator.prototype,"partials",{get:function(){return this._oscillators[0].partials},set:function(t){this._partials=t,this._type=s.default.Oscillator.Type.Custom,this._forEach(function(e){e.partials=t})}}),Object.defineProperty(s.default.FatOscillator.prototype,"partialCount",{get:function(){return this._oscillators[0].partialCount},set:function(t){this._partialCount=t,this._forEach(function(e){e.partialCount=t}),this._type=this._oscillators[0].type}}),s.default.FatOscillator.prototype.dispose=function(){return s.default.Source.prototype.dispose.call(this),this._writable(["frequency","detune"]),this.frequency.dispose(),this.frequency=null,this.detune.dispose(),this.detune=null,this._forEach(function(t){t.dispose()}),this._oscillators=null,this._partials=null,this},e.default=s.default.FatOscillator},function(t,e,i){"use strict";i.r(e);var s=i(0);i(6),i(17),i(5),i(3),i(22);s.default.AMOscillator=function(){var t=s.default.defaults(arguments,["frequency","type","modulationType"],s.default.AMOscillator);s.default.Source.call(this,t),this._carrier=new s.default.Oscillator(t.frequency,t.type),this.frequency=this._carrier.frequency,this.detune=this._carrier.detune,this.detune.value=t.detune,this._modulator=new s.default.Oscillator(t.frequency,t.modulationType),this._modulationScale=new s.default.AudioToGain,this.harmonicity=new s.default.Multiply(t.harmonicity),this.harmonicity.units=s.default.Type.Positive,this._modulationNode=new s.default.Gain(0),this.frequency.chain(this.harmonicity,this._modulator.frequency),this.detune.connect(this._modulator.detune),this._modulator.chain(this._modulationScale,this._modulationNode.gain),this._carrier.chain(this._modulationNode,this.output),this.phase=t.phase,this._readOnly(["frequency","detune","harmonicity"])},s.default.extend(s.default.AMOscillator,s.default.Oscillator),s.default.AMOscillator.defaults={frequency:440,detune:0,phase:0,type:"sine",modulationType:"square",harmonicity:1},s.default.AMOscillator.prototype._start=function(t){this._modulator.start(t),this._carrier.start(t)},s.default.AMOscillator.prototype._stop=function(t){this._modulator.stop(t),this._carrier.stop(t)},s.default.AMOscillator.prototype.restart=function(t){this._modulator.restart(t),this._carrier.restart(t)},Object.defineProperty(s.default.AMOscillator.prototype,"type",{get:function(){return this._carrier.type},set:function(t){this._carrier.type=t}}),Object.defineProperty(s.default.AMOscillator.prototype,"baseType",{get:function(){return this._carrier.baseType},set:function(t){this._carrier.baseType=t}}),Object.defineProperty(s.default.AMOscillator.prototype,"partialCount",{get:function(){return this._carrier.partialCount},set:function(t){this._carrier.partialCount=t}}),Object.defineProperty(s.default.AMOscillator.prototype,"modulationType",{get:function(){return this._modulator.type},set:function(t){this._modulator.type=t}}),Object.defineProperty(s.default.AMOscillator.prototype,"phase",{get:function(){return this._carrier.phase},set:function(t){this._carrier.phase=t,this._modulator.phase=t}}),Object.defineProperty(s.default.AMOscillator.prototype,"partials",{get:function(){return this._carrier.partials},set:function(t){this._carrier.partials=t}}),s.default.AMOscillator.prototype.dispose=function(){return s.default.Source.prototype.dispose.call(this),this._writable(["frequency","detune","harmonicity"]),this.frequency=null,this.detune=null,this.harmonicity.dispose(),this.harmonicity=null,this._carrier.dispose(),this._carrier=null,this._modulator.dispose(),this._modulator=null,this._modulationNode.dispose(),this._modulationNode=null,this._modulationScale.dispose(),this._modulationScale=null,this},e.default=s.default.AMOscillator},function(t,e,i){"use strict";i.r(e);var s=i(0);i(6),i(50),i(17),i(5);s.default.PWMOscillator=function(){var t=s.default.defaults(arguments,["frequency","modulationFrequency"],s.default.PWMOscillator);s.default.Source.call(this,t),this._pulse=new s.default.PulseOscillator(t.modulationFrequency),this._pulse._sawtooth.type="sine",this._modulator=new s.default.Oscillator({frequency:t.frequency,detune:t.detune,phase:t.phase}),this._scale=new s.default.Multiply(2),this.frequency=this._modulator.frequency,this.detune=this._modulator.detune,this.modulationFrequency=this._pulse.frequency,this._modulator.chain(this._scale,this._pulse.width),this._pulse.connect(this.output),this._readOnly(["modulationFrequency","frequency","detune"])},s.default.extend(s.default.PWMOscillator,s.default.Source),s.default.PWMOscillator.defaults={frequency:440,detune:0,phase:0,modulationFrequency:.4},s.default.PWMOscillator.prototype._start=function(t){t=this.toSeconds(t),this._modulator.start(t),this._pulse.start(t)},s.default.PWMOscillator.prototype._stop=function(t){t=this.toSeconds(t),this._modulator.stop(t),this._pulse.stop(t)},s.default.PWMOscillator.prototype.restart=function(t){this._modulator.restart(t),this._pulse.restart(t)},Object.defineProperty(s.default.PWMOscillator.prototype,"type",{get:function(){return"pwm"}}),Object.defineProperty(s.default.PWMOscillator.prototype,"baseType",{get:function(){return"pwm"}}),Object.defineProperty(s.default.PWMOscillator.prototype,"partials",{get:function(){return[]}}),Object.defineProperty(s.default.PWMOscillator.prototype,"phase",{get:function(){return this._modulator.phase},set:function(t){this._modulator.phase=t}}),s.default.PWMOscillator.prototype.dispose=function(){return s.default.Source.prototype.dispose.call(this),this._pulse.dispose(),this._pulse=null,this._scale.dispose(),this._scale=null,this._modulator.dispose(),this._modulator=null,this._writable(["modulationFrequency","frequency","detune"]),this.frequency=null,this.detune=null,this.modulationFrequency=null,this},e.default=s.default.PWMOscillator},function(t,e,i){"use strict";i.r(e);var s=i(0);i(51),i(4),i(16);s.default.Part=function(){var t=s.default.defaults(arguments,["callback","events"],s.default.Part);s.default.Event.call(this,t),this._events=[];for(var e=0;e<t.events.length;e++)Array.isArray(t.events[e])?this.add(t.events[e][0],t.events[e][1]):this.add(t.events[e])},s.default.extend(s.default.Part,s.default.Event),s.default.Part.defaults={callback:s.default.noOp,loop:!1,loopEnd:"1m",loopStart:0,playbackRate:1,probability:1,humanize:!1,mute:!1,events:[]},s.default.Part.prototype.start=function(t,e){var i=this.toTicks(t);return this._state.getValueAtTime(i)!==s.default.State.Started&&(e=this._loop?s.default.defaultArg(e,this._loopStart):s.default.defaultArg(e,0),e=this.toTicks(e),this._state.add({state:s.default.State.Started,time:i,offset:e}),this._forEach(function(t){this._startNote(t,i,e)})),this},s.default.Part.prototype._startNote=function(t,e,i){e-=i,this._loop?t.startOffset>=this._loopStart&&t.startOffset<this._loopEnd?(t.startOffset<i&&(e+=this._getLoopDuration()),t.start(s.default.Ticks(e))):t.startOffset<this._loopStart&&t.startOffset>=i&&(t.loop=!1,t.start(s.default.Ticks(e))):t.startOffset>=i&&t.start(s.default.Ticks(e))},Object.defineProperty(s.default.Part.prototype,"startOffset",{get:function(){return this._startOffset},set:function(t){this._startOffset=t,this._forEach(function(t){t.startOffset+=this._startOffset})}}),s.default.Part.prototype.stop=function(t){var e=this.toTicks(t);return this._state.cancel(e),this._state.setStateAtTime(s.default.State.Stopped,e),this._forEach(function(e){e.stop(t)}),this},s.default.Part.prototype.at=function(t,e){t=s.default.TransportTime(t);for(var i=s.default.Ticks(1).toSeconds(),n=0;n<this._events.length;n++){var o=this._events[n];if(Math.abs(t.toTicks()-o.startOffset)<i)return s.default.isDefined(e)&&(o.value=e),o}return s.default.isDefined(e)?(this.add(t,e),this._events[this._events.length-1]):null},s.default.Part.prototype.add=function(t,e){var i;return t.hasOwnProperty("time")&&(t=(e=t).time),t=this.toTicks(t),e instanceof s.default.Event?(i=e).callback=this._tick.bind(this):i=new s.default.Event({callback:this._tick.bind(this),value:e}),i.startOffset=t,i.set({loopEnd:this.loopEnd,loopStart:this.loopStart,loop:this.loop,humanize:this.humanize,playbackRate:this.playbackRate,probability:this.probability}),this._events.push(i),this._restartEvent(i),this},s.default.Part.prototype._restartEvent=function(t){this._state.forEach(function(e){e.state===s.default.State.Started?this._startNote(t,e.time,e.offset):t.stop(s.default.Ticks(e.time))}.bind(this))},s.default.Part.prototype.remove=function(t,e){t.hasOwnProperty("time")&&(t=(e=t).time),t=this.toTicks(t);for(var i=this._events.length-1;i>=0;i--){var n=this._events[i];n.startOffset===t&&(s.default.isUndef(e)||s.default.isDefined(e)&&n.value===e)&&(this._events.splice(i,1),n.dispose())}return this},s.default.Part.prototype.removeAll=function(){return this._forEach(function(t){t.dispose()}),this._events=[],this},s.default.Part.prototype.cancel=function(t){return this._forEach(function(e){e.cancel(t)}),this._state.cancel(this.toTicks(t)),this},s.default.Part.prototype._forEach=function(t,e){if(this._events){e=s.default.defaultArg(e,this);for(var i=this._events.length-1;i>=0;i--){var n=this._events[i];n instanceof s.default.Part?n._forEach(t,e):t.call(e,n)}}return this},s.default.Part.prototype._setAll=function(t,e){this._forEach(function(i){i[t]=e})},s.default.Part.prototype._tick=function(t,e){this.mute||this.callback(t,e)},s.default.Part.prototype._testLoopBoundries=function(t){this._loop&&(t.startOffset<this._loopStart||t.startOffset>=this._loopEnd)?t.cancel(0):t.state===s.default.State.Stopped&&this._restartEvent(t)},Object.defineProperty(s.default.Part.prototype,"probability",{get:function(){return this._probability},set:function(t){this._probability=t,this._setAll("probability",t)}}),Object.defineProperty(s.default.Part.prototype,"humanize",{get:function(){return this._humanize},set:function(t){this._humanize=t,this._setAll("humanize",t)}}),Object.defineProperty(s.default.Part.prototype,"loop",{get:function(){return this._loop},set:function(t){this._loop=t,this._forEach(function(e){e._loopStart=this._loopStart,e._loopEnd=this._loopEnd,e.loop=t,this._testLoopBoundries(e)})}}),Object.defineProperty(s.default.Part.prototype,"loopEnd",{get:function(){return s.default.Ticks(this._loopEnd).toSeconds()},set:function(t){this._loopEnd=this.toTicks(t),this._loop&&this._forEach(function(e){e.loopEnd=t,this._testLoopBoundries(e)})}}),Object.defineProperty(s.default.Part.prototype,"loopStart",{get:function(){return s.default.Ticks(this._loopStart).toSeconds()},set:function(t){this._loopStart=this.toTicks(t),this._loop&&this._forEach(function(t){t.loopStart=this.loopStart,this._testLoopBoundries(t)})}}),Object.defineProperty(s.default.Part.prototype,"playbackRate",{get:function(){return this._playbackRate},set:function(t){this._playbackRate=t,this._setAll("playbackRate",t)}}),Object.defineProperty(s.default.Part.prototype,"length",{get:function(){return this._events.length}}),s.default.Part.prototype.dispose=function(){return s.default.Event.prototype.dispose.call(this),this.removeAll(),this.callback=null,this._events=null,this},e.default=s.default.Part},function(t,e,i){"use strict";i.r(e);var s=i(0);i(51);s.default.Loop=function(){var t=s.default.defaults(arguments,["callback","interval"],s.default.Loop);s.default.call(this),this._event=new s.default.Event({callback:this._tick.bind(this),loop:!0,loopEnd:t.interval,playbackRate:t.playbackRate,probability:t.probability}),this.callback=t.callback,this.iterations=t.iterations},s.default.extend(s.default.Loop),s.default.Loop.defaults={interval:"4n",callback:s.default.noOp,playbackRate:1,iterations:1/0,probability:!0,mute:!1},s.default.Loop.prototype.start=function(t){return this._event.start(t),this},s.default.Loop.prototype.stop=function(t){return this._event.stop(t),this},s.default.Loop.prototype.cancel=function(t){return this._event.cancel(t),this},s.default.Loop.prototype._tick=function(t){this.callback(t)},Object.defineProperty(s.default.Loop.prototype,"state",{get:function(){return this._event.state}}),Object.defineProperty(s.default.Loop.prototype,"progress",{get:function(){return this._event.progress}}),Object.defineProperty(s.default.Loop.prototype,"interval",{get:function(){return this._event.loopEnd},set:function(t){this._event.loopEnd=t}}),Object.defineProperty(s.default.Loop.prototype,"playbackRate",{get:function(){return this._event.playbackRate},set:function(t){this._event.playbackRate=t}}),Object.defineProperty(s.default.Loop.prototype,"humanize",{get:function(){return this._event.humanize},set:function(t){this._event.humanize=t}}),Object.defineProperty(s.default.Loop.prototype,"probability",{get:function(){return this._event.probability},set:function(t){this._event.probability=t}}),Object.defineProperty(s.default.Loop.prototype,"mute",{get:function(){return this._event.mute},set:function(t){this._event.mute=t}}),Object.defineProperty(s.default.Loop.prototype,"iterations",{get:function(){return!0===this._event.loop?1/0:this._event.loop},set:function(t){this._event.loop=t===1/0||t}}),s.default.Loop.prototype.dispose=function(){this._event.dispose(),this._event=null,this.callback=null},e.default=s.default.Loop},function(t,e,i){"use strict";i.r(e);var s=i(0);i(15),i(33);s.default.StereoXFeedbackEffect=function(){var t=s.default.defaults(arguments,["feedback"],s.default.FeedbackEffect);s.default.StereoEffect.call(this,t),this.feedback=new s.default.Signal(t.feedback,s.default.Type.NormalRange),this._feedbackLR=new s.default.Gain,this._feedbackRL=new s.default.Gain,this.effectReturnL.chain(this._feedbackLR,this.effectSendR),this.effectReturnR.chain(this._feedbackRL,this.effectSendL),this.feedback.fan(this._feedbackLR.gain,this._feedbackRL.gain),this._readOnly(["feedback"])},s.default.extend(s.default.StereoXFeedbackEffect,s.default.StereoEffect),s.default.StereoXFeedbackEffect.prototype.dispose=function(){return s.default.StereoEffect.prototype.dispose.call(this),this._writable(["feedback"]),this.feedback.dispose(),this.feedback=null,this._feedbackLR.dispose(),this._feedbackLR=null,this._feedbackRL.dispose(),this._feedbackRL=null,this},e.default=s.default.StereoXFeedbackEffect},function(t,e,i){"use strict";i.r(e);var s=i(0);i(8),i(53),i(52);s.default.MidSideEffect=function(){s.default.Effect.apply(this,arguments),this._midSideSplit=new s.default.MidSideSplit,this._midSideMerge=new s.default.MidSideMerge,this.midSend=this._midSideSplit.mid,this.sideSend=this._midSideSplit.side,this.midReturn=this._midSideMerge.mid,this.sideReturn=this._midSideMerge.side,this.effectSend.connect(this._midSideSplit),this._midSideMerge.connect(this.effectReturn)},s.default.extend(s.default.MidSideEffect,s.default.Effect),s.default.MidSideEffect.prototype.dispose=function(){return s.default.Effect.prototype.dispose.call(this),this._midSideSplit.dispose(),this._midSideSplit=null,this._midSideMerge.dispose(),this._midSideMerge=null,this.midSend=null,this.sideSend=null,this.midReturn=null,this.sideReturn=null,this},e.default=s.default.MidSideEffect},function(t,e,i){"use strict";i.r(e);var s=i(0);i(11),i(8);s.default.Convolver=function(){var t=s.default.defaults(arguments,["url","onload"],s.default.Convolver);s.default.Effect.call(this,t),this._convolver=this.context.createConvolver(),this._buffer=new s.default.Buffer(t.url,function(e){this.buffer=e.get(),t.onload()}.bind(this)),this._buffer.loaded&&(this.buffer=this._buffer),this.normalize=t.normalize,this.connectEffect(this._convolver)},s.default.extend(s.default.Convolver,s.default.Effect),s.default.Convolver.defaults={onload:s.default.noOp,normalize:!0},Object.defineProperty(s.default.Convolver.prototype,"buffer",{get:function(){return this._buffer.length?this._buffer:null},set:function(t){this._buffer.set(t),this._convolver.buffer&&(this.effectSend.disconnect(),this._convolver.disconnect(),this._convolver=this.context.createConvolver(),this.connectEffect(this._convolver)),this._convolver.buffer=this._buffer.get()}}),Object.defineProperty(s.default.Convolver.prototype,"normalize",{get:function(){return this._convolver.normalize},set:function(t){this._convolver.normalize=t}}),s.default.Convolver.prototype.load=function(t,e){return this._buffer.load(t,function(t){this.buffer=t,e&&e()}.bind(this))},s.default.Convolver.prototype.dispose=function(){return s.default.Effect.prototype.dispose.call(this),this._buffer.dispose(),this._buffer=null,this._convolver.disconnect(),this._convolver=null,this},e.default=s.default.Convolver},function(t,e,i){"use strict";i.r(e);var s=i(0);i(7),i(5),i(13);s.default.Modulo=function(t){s.default.SignalBase.call(this),this.createInsOuts(1,0),this._shaper=new s.default.WaveShaper(Math.pow(2,16)),this._multiply=new s.default.Multiply,this._subtract=this.output=new s.default.Subtract,this._modSignal=new s.default.Signal(t),s.default.connect(this.input,this._shaper),s.default.connect(this.input,this._subtract),this._modSignal.connect(this._multiply,0,0),this._shaper.connect(this._multiply,0,1),this._multiply.connect(this._subtract,0,1),this._setWaveShaper(t)},s.default.extend(s.default.Modulo,s.default.SignalBase),s.default.Modulo.prototype._setWaveShaper=function(t){this._shaper.setMap(function(e){return Math.floor((e+1e-4)/t)})},Object.defineProperty(s.default.Modulo.prototype,"value",{get:function(){return this._modSignal.value},set:function(t){this._modSignal.value=t,this._setWaveShaper(t)}}),s.default.Modulo.prototype.dispose=function(){return s.default.SignalBase.prototype.dispose.call(this),this._shaper.dispose(),this._shaper=null,this._multiply.dispose(),this._multiply=null,this._subtract.dispose(),this._subtract=null,this._modSignal.dispose(),this._modSignal=null,this},e.default=s.default.Modulo},function(t,e,i){"use strict";i.r(e);var s=i(0);i(20),i(92);s.default.OfflineContext=function(t,e,i){var n=new OfflineAudioContext(t,e*i,i);s.default.Context.call(this,{context:n,clockSource:"offline",lookAhead:0,updateInterval:128/i}),this._duration=e,this._currentTime=0},s.default.extend(s.default.OfflineContext,s.default.Context),s.default.OfflineContext.prototype.now=function(){return this._currentTime},s.default.OfflineContext.prototype.resume=function(){return Promise.resolve()},s.default.OfflineContext.prototype.render=function(){for(;this._duration-this._currentTime>=0;)this.emit("tick"),this._currentTime+=.005;return this._context.startRendering()},s.default.OfflineContext.prototype.close=function(){return this._context=null,Promise.resolve()},e.default=s.default.OfflineContext},function(t,e,i){"use strict";i.r(e);var s=i(0);i(16),i(11),i(76),i(40);s.default.Offline=function(t,e){var i=s.default.context.sampleRate,n=s.default.context,o=new s.default.OfflineContext(2,e,i);s.default.context=o;var a=t(s.default.Transport),r=null;return r=a&&s.default.isFunction(a.then)?a.then(function(){return o.render()}):o.render(),s.default.context=n,r.then(function(t){return new s.default.Buffer(t)})},e.default=s.default.Offline},function(t,e,i){"use strict";i.r(e);var s=i(0);i(11);s.default.Buffers=function(t){var e=Array.prototype.slice.call(arguments);e.shift();var i=s.default.defaults(e,["onload","baseUrl"],s.default.Buffers);for(var n in s.default.call(this),this._buffers={},this.baseUrl=i.baseUrl,this._loadingCount=0,t)this._loadingCount++,this.add(n,t[n],this._bufferLoaded.bind(this,i.onload))},s.default.extend(s.default.Buffers),s.default.Buffers.defaults={onload:s.default.noOp,baseUrl:""},s.default.Buffers.prototype.has=function(t){return this._buffers.hasOwnProperty(t)},s.default.Buffers.prototype.get=function(t){if(this.has(t))return this._buffers[t];throw new Error("Tone.Buffers: no buffer named "+t)},s.default.Buffers.prototype._bufferLoaded=function(t){this._loadingCount--,0===this._loadingCount&&t&&t(this)},Object.defineProperty(s.default.Buffers.prototype,"loaded",{get:function(){var t=!0;for(var e in this._buffers){var i=this.get(e);t=t&&i.loaded}return t}}),s.default.Buffers.prototype.add=function(t,e,i){return i=s.default.defaultArg(i,s.default.noOp),e instanceof s.default.Buffer?(this._buffers[t]=e,i(this)):e instanceof AudioBuffer?(this._buffers[t]=new s.default.Buffer(e),i(this)):s.default.isString(e)&&(this._buffers[t]=new s.default.Buffer(this.baseUrl+e,i)),this},s.default.Buffers.prototype.dispose=function(){for(var t in s.default.prototype.dispose.call(this),this._buffers)this._buffers[t].dispose();return this._buffers=null,this},e.default=s.default.Buffers},function(t,e,i){"use strict";i.r(e);var s=i(0);s.default.CtrlPattern=function(){var t=s.default.defaults(arguments,["values","type"],s.default.CtrlPattern);s.default.call(this),this.values=t.values,this.index=0,this._type=null,this._shuffled=null,this._direction=null,this.type=t.type},s.default.extend(s.default.CtrlPattern),s.default.CtrlPattern.Type={Up:"up",Down:"down",UpDown:"upDown",DownUp:"downUp",AlternateUp:"alternateUp",AlternateDown:"alternateDown",Random:"random",RandomWalk:"randomWalk",RandomOnce:"randomOnce"},s.default.CtrlPattern.defaults={type:s.default.CtrlPattern.Type.Up,values:[]},Object.defineProperty(s.default.CtrlPattern.prototype,"value",{get:function(){if(0!==this.values.length){if(1===this.values.length)return this.values[0];this.index=Math.min(this.index,this.values.length-1);var t=this.values[this.index];return this.type===s.default.CtrlPattern.Type.RandomOnce&&(this.values.length!==this._shuffled.length&&this._shuffleValues(),t=this.values[this._shuffled[this.index]]),t}}}),Object.defineProperty(s.default.CtrlPattern.prototype,"type",{get:function(){return this._type},set:function(t){this._type=t,this._shuffled=null,this._type===s.default.CtrlPattern.Type.Up||this._type===s.default.CtrlPattern.Type.UpDown||this._type===s.default.CtrlPattern.Type.RandomOnce||this._type===s.default.CtrlPattern.Type.AlternateUp?this.index=0:this._type!==s.default.CtrlPattern.Type.Down&&this._type!==s.default.CtrlPattern.Type.DownUp&&this._type!==s.default.CtrlPattern.Type.AlternateDown||(this.index=this.values.length-1),this._type===s.default.CtrlPattern.Type.UpDown||this._type===s.default.CtrlPattern.Type.AlternateUp?this._direction=s.default.CtrlPattern.Type.Up:this._type!==s.default.CtrlPattern.Type.DownUp&&this._type!==s.default.CtrlPattern.Type.AlternateDown||(this._direction=s.default.CtrlPattern.Type.Down),this._type===s.default.CtrlPattern.Type.RandomOnce?this._shuffleValues():this._type===s.default.CtrlPattern.Type.Random&&(this.index=Math.floor(Math.random()*this.values.length))}}),s.default.CtrlPattern.prototype.next=function(){var t=this.type;return t===s.default.CtrlPattern.Type.Up?(this.index++,this.index>=this.values.length&&(this.index=0)):t===s.default.CtrlPattern.Type.Down?(this.index--,this.index<0&&(this.index=this.values.length-1)):t===s.default.CtrlPattern.Type.UpDown||t===s.default.CtrlPattern.Type.DownUp?(this._direction===s.default.CtrlPattern.Type.Up?this.index++:this.index--,this.index<0?(this.index=1,this._direction=s.default.CtrlPattern.Type.Up):this.index>=this.values.length&&(this.index=this.values.length-2,this._direction=s.default.CtrlPattern.Type.Down)):t===s.default.CtrlPattern.Type.Random?this.index=Math.floor(Math.random()*this.values.length):t===s.default.CtrlPattern.Type.RandomWalk?Math.random()<.5?(this.index--,this.index=Math.max(this.index,0)):(this.index++,this.index=Math.min(this.index,this.values.length-1)):t===s.default.CtrlPattern.Type.RandomOnce?(this.index++,this.index>=this.values.length&&(this.index=0,this._shuffleValues())):t===s.default.CtrlPattern.Type.AlternateUp?(this._direction===s.default.CtrlPattern.Type.Up?(this.index+=2,this._direction=s.default.CtrlPattern.Type.Down):(this.index-=1,this._direction=s.default.CtrlPattern.Type.Up),this.index>=this.values.length&&(this.index=0,this._direction=s.default.CtrlPattern.Type.Up)):t===s.default.CtrlPattern.Type.AlternateDown&&(this._direction===s.default.CtrlPattern.Type.Up?(this.index+=1,this._direction=s.default.CtrlPattern.Type.Down):(this.index-=2,this._direction=s.default.CtrlPattern.Type.Up),this.index<0&&(this.index=this.values.length-1,this._direction=s.default.CtrlPattern.Type.Down)),this.value},s.default.CtrlPattern.prototype._shuffleValues=function(){var t=[];this._shuffled=[];for(var e=0;e<this.values.length;e++)t[e]=e;for(;t.length>0;){var i=t.splice(Math.floor(t.length*Math.random()),1);this._shuffled.push(i[0])}},s.default.CtrlPattern.prototype.dispose=function(){this._shuffled=null,this.values=null},e.default=s.default.CtrlPattern},function(t,e,i){"use strict";i.r(e);var s=i(0);i(56),i(55);s.default.TransportRepeatEvent=function(t,e){s.default.TransportEvent.call(this,t,e),e=s.default.defaultArg(e,s.default.TransportRepeatEvent.defaults),this.duration=s.default.Ticks(e.duration),this._interval=s.default.Ticks(e.interval),this._currentId=-1,this._nextId=-1,this._nextTick=this.time,this._boundRestart=this._restart.bind(this),this.Transport.on("start loopStart",this._boundRestart),this._restart()},s.default.extend(s.default.TransportRepeatEvent,s.default.TransportEvent),s.default.TransportRepeatEvent.defaults={duration:1/0,interval:1},s.default.TransportRepeatEvent.prototype.invoke=function(t){this._createEvents(t),s.default.TransportEvent.prototype.invoke.call(this,t)},s.default.TransportRepeatEvent.prototype._createEvents=function(t){var e=this.Transport.getTicksAtTime(t);e>=this.time&&e>=this._nextTick&&this._nextTick+this._interval<this.time+this.duration&&(this._nextTick+=this._interval,this._currentId=this._nextId,this._nextId=this.Transport.scheduleOnce(this.invoke.bind(this),s.default.Ticks(this._nextTick)))},s.default.TransportRepeatEvent.prototype._restart=function(t){this.Transport.clear(this._currentId),this.Transport.clear(this._nextId),this._nextTick=this.time;var e=this.Transport.getTicksAtTime(t);e>this.time&&(this._nextTick=this.time+Math.ceil((e-this.time)/this._interval)*this._interval),this._currentId=this.Transport.scheduleOnce(this.invoke.bind(this),s.default.Ticks(this._nextTick)),this._nextTick+=this._interval,this._nextId=this.Transport.scheduleOnce(this.invoke.bind(this),s.default.Ticks(this._nextTick))},s.default.TransportRepeatEvent.prototype.dispose=function(){return this.Transport.clear(this._currentId),this.Transport.clear(this._nextId),this.Transport.off("start loopStart",this._boundRestart),this._boundCreateEvents=null,s.default.TransportEvent.prototype.dispose.call(this),this.duration=null,this._interval=null,this},e.default=s.default.TransportRepeatEvent},function(t,e,i){"use strict";i.r(e);var s=i(0);i(4);s.default.IntervalTimeline=function(){s.default.call(this),this._root=null,this._length=0},s.default.extend(s.default.IntervalTimeline),s.default.IntervalTimeline.prototype.add=function(t){if(s.default.isUndef(t.time)||s.default.isUndef(t.duration))throw new Error("Tone.IntervalTimeline: events must have time and duration parameters");t.time=t.time.valueOf();var e=new n(t.time,t.time+t.duration,t);for(null===this._root?this._root=e:this._root.insert(e),this._length++;null!==e;)e.updateHeight(),e.updateMax(),this._rebalance(e),e=e.parent;return this},s.default.IntervalTimeline.prototype.remove=function(t){if(null!==this._root){var e=[];this._root.search(t.time,e);for(var i=0;i<e.length;i++){var s=e[i];if(s.event===t){this._removeNode(s),this._length--;break}}}return this},Object.defineProperty(s.default.IntervalTimeline.prototype,"length",{get:function(){return this._length}}),s.default.IntervalTimeline.prototype.cancel=function(t){return this.forEachFrom(t,function(t){this.remove(t)}.bind(this)),this},s.default.IntervalTimeline.prototype._setRoot=function(t){this._root=t,null!==this._root&&(this._root.parent=null)},s.default.IntervalTimeline.prototype._replaceNodeInParent=function(t,e){null!==t.parent?(t.isLeftChild()?t.parent.left=e:t.parent.right=e,this._rebalance(t.parent)):this._setRoot(e)},s.default.IntervalTimeline.prototype._removeNode=function(t){if(null===t.left&&null===t.right)this._replaceNodeInParent(t,null);else if(null===t.right)this._replaceNodeInParent(t,t.left);else if(null===t.left)this._replaceNodeInParent(t,t.right);else{var e,i;if(t.getBalance()>0)if(null===t.left.right)(e=t.left).right=t.right,i=e;else{for(e=t.left.right;null!==e.right;)e=e.right;e.parent.right=e.left,i=e.parent,e.left=t.left,e.right=t.right}else if(null===t.right.left)(e=t.right).left=t.left,i=e;else{for(e=t.right.left;null!==e.left;)e=e.left;e.parent.left=e.right,i=e.parent,e.left=t.left,e.right=t.right}null!==t.parent?t.isLeftChild()?t.parent.left=e:t.parent.right=e:this._setRoot(e),this._rebalance(i)}t.dispose()},s.default.IntervalTimeline.prototype._rotateLeft=function(t){var e=t.parent,i=t.isLeftChild(),s=t.right;t.right=s.left,s.left=t,null!==e?i?e.left=s:e.right=s:this._setRoot(s)},s.default.IntervalTimeline.prototype._rotateRight=function(t){var e=t.parent,i=t.isLeftChild(),s=t.left;t.left=s.right,s.right=t,null!==e?i?e.left=s:e.right=s:this._setRoot(s)},s.default.IntervalTimeline.prototype._rebalance=function(t){var e=t.getBalance();e>1?t.left.getBalance()<0?this._rotateLeft(t.left):this._rotateRight(t):e<-1&&(t.right.getBalance()>0?this._rotateRight(t.right):this._rotateLeft(t))},s.default.IntervalTimeline.prototype.get=function(t){if(null!==this._root){var e=[];if(this._root.search(t,e),e.length>0){for(var i=e[0],s=1;s<e.length;s++)e[s].low>i.low&&(i=e[s]);return i.event}}return null},s.default.IntervalTimeline.prototype.forEach=function(t){if(null!==this._root){var e=[];this._root.traverse(function(t){e.push(t)});for(var i=0;i<e.length;i++){var s=e[i].event;s&&t(s)}}return this},s.default.IntervalTimeline.prototype.forEachAtTime=function(t,e){if(null!==this._root){var i=[];this._root.search(t,i);for(var s=i.length-1;s>=0;s--){var n=i[s].event;n&&e(n)}}return this},s.default.IntervalTimeline.prototype.forEachFrom=function(t,e){if(null!==this._root){var i=[];this._root.searchAfter(t,i);for(var s=i.length-1;s>=0;s--){e(i[s].event)}}return this},s.default.IntervalTimeline.prototype.dispose=function(){var t=[];null!==this._root&&this._root.traverse(function(e){t.push(e)});for(var e=0;e<t.length;e++)t[e].dispose();return t=null,this._root=null,this};var n=function(t,e,i){this.event=i,this.low=t,this.high=e,this.max=this.high,this._left=null,this._right=null,this.parent=null,this.height=0};n.prototype.insert=function(t){t.low<=this.low?null===this.left?this.left=t:this.left.insert(t):null===this.right?this.right=t:this.right.insert(t)},n.prototype.search=function(t,e){t>this.max||(null!==this.left&&this.left.search(t,e),this.low<=t&&this.high>t&&e.push(this),this.low>t||null!==this.right&&this.right.search(t,e))},n.prototype.searchAfter=function(t,e){this.low>=t&&(e.push(this),null!==this.left&&this.left.searchAfter(t,e)),null!==this.right&&this.right.searchAfter(t,e)},n.prototype.traverse=function(t){t(this),null!==this.left&&this.left.traverse(t),null!==this.right&&this.right.traverse(t)},n.prototype.updateHeight=function(){null!==this.left&&null!==this.right?this.height=Math.max(this.left.height,this.right.height)+1:null!==this.right?this.height=this.right.height+1:null!==this.left?this.height=this.left.height+1:this.height=0},n.prototype.updateMax=function(){this.max=this.high,null!==this.left&&(this.max=Math.max(this.max,this.left.max)),null!==this.right&&(this.max=Math.max(this.max,this.right.max))},n.prototype.getBalance=function(){var t=0;return null!==this.left&&null!==this.right?t=this.left.height-this.right.height:null!==this.left?t=this.left.height+1:null!==this.right&&(t=-(this.right.height+1)),t},n.prototype.isLeftChild=function(){return null!==this.parent&&this.parent.left===this},Object.defineProperty(n.prototype,"left",{get:function(){return this._left},set:function(t){this._left=t,null!==t&&(t.parent=this),this.updateHeight(),this.updateMax()}}),Object.defineProperty(n.prototype,"right",{get:function(){return this._right},set:function(t){this._right=t,null!==t&&(t.parent=this),this.updateHeight(),this.updateMax()}}),n.prototype.dispose=function(){this.parent=null,this._left=null,this._right=null,this.event=null},e.default=s.default.IntervalTimeline},function(t,e,i){"use strict";i.r(e);var s=i(0);i(2);function n(t){return function(e,i){i=this.toSeconds(i),t.apply(this,arguments);var s=this._events.get(i),n=this._events.previousEvent(s),o=this._getTicksUntilEvent(n,i);return s.ticks=Math.max(o,0),this}}s.default.TickSignal=function(t){t=s.default.defaultArg(t,1),s.default.Signal.call(this,{units:s.default.Type.Ticks,value:t}),this._events.memory=1/0,this.cancelScheduledValues(0),this._events.add({type:s.default.Param.AutomationType.SetValue,time:0,value:t})},s.default.extend(s.default.TickSignal,s.default.Signal),s.default.TickSignal.prototype.setValueAtTime=n(s.default.Signal.prototype.setValueAtTime),s.default.TickSignal.prototype.linearRampToValueAtTime=n(s.default.Signal.prototype.linearRampToValueAtTime),s.default.TickSignal.prototype.setTargetAtTime=function(t,e,i){e=this.toSeconds(e),this.setRampPoint(e),t=this._fromUnits(t);for(var s=this._events.get(e),n=Math.round(Math.max(1/i,1)),o=0;o<=n;o++){var a=i*o+e,r=this._exponentialApproach(s.time,s.value,t,i,a);this.linearRampToValueAtTime(this._toUnits(r),a)}return this},s.default.TickSignal.prototype.exponentialRampToValueAtTime=function(t,e){e=this.toSeconds(e),t=this._fromUnits(t);for(var i=this._events.get(e),s=Math.round(Math.max(10*(e-i.time),1)),n=(e-i.time)/s,o=0;o<=s;o++){var a=n*o+i.time,r=this._exponentialInterpolate(i.time,i.value,e,t,a);this.linearRampToValueAtTime(this._toUnits(r),a)}return this},s.default.TickSignal.prototype._getTicksUntilEvent=function(t,e){if(null===t)t={ticks:0,time:0};else if(s.default.isUndef(t.ticks)){var i=this._events.previousEvent(t);t.ticks=this._getTicksUntilEvent(i,t.time)}var n=this.getValueAtTime(t.time),o=this.getValueAtTime(e);return this._events.get(e).time===e&&this._events.get(e).type===s.default.Param.AutomationType.SetValue&&(o=this.getValueAtTime(e-this.sampleTime)),.5*(e-t.time)*(n+o)+t.ticks},s.default.TickSignal.prototype.getTicksAtTime=function(t){t=this.toSeconds(t);var e=this._events.get(t);return Math.max(this._getTicksUntilEvent(e,t),0)},s.default.TickSignal.prototype.getDurationOfTicks=function(t,e){e=this.toSeconds(e);var i=this.getTicksAtTime(e);return this.getTimeOfTick(i+t)-e},s.default.TickSignal.prototype.getTimeOfTick=function(t){var e=this._events.get(t,"ticks"),i=this._events.getAfter(t,"ticks");if(e&&e.ticks===t)return e.time;if(e&&i&&i.type===s.default.Param.AutomationType.Linear&&e.value!==i.value){var n=this.getValueAtTime(e.time),o=(this.getValueAtTime(i.time)-n)/(i.time-e.time),a=Math.sqrt(Math.pow(n,2)-2*o*(e.ticks-t)),r=(-n+a)/o;return(r>0?r:(-n-a)/o)+e.time}return e?0===e.value?1/0:e.time+(t-e.ticks)/e.value:t/this._initialValue},s.default.TickSignal.prototype.ticksToTime=function(t,e){return e=this.toSeconds(e),new s.default.Time(this.getDurationOfTicks(t,e))},s.default.TickSignal.prototype.timeToTicks=function(t,e){e=this.toSeconds(e),t=this.toSeconds(t);var i=this.getTicksAtTime(e),n=this.getTicksAtTime(e+t);return new s.default.Ticks(n-i)},e.default=s.default.TickSignal},function(t,e,i){"use strict";i.r(e);var s=i(0);i(57),i(34),i(35),i(20);s.default.Clock=function(){var t=s.default.defaults(arguments,["callback","frequency"],s.default.Clock);s.default.Emitter.call(this),this.callback=t.callback,this._nextTick=0,this._tickSource=new s.default.TickSource(t.frequency),this._lastUpdate=0,this.frequency=this._tickSource.frequency,this._readOnly("frequency"),this._state=new s.default.TimelineState(s.default.State.Stopped),this._state.setStateAtTime(s.default.State.Stopped,0),this._boundLoop=this._loop.bind(this),this.context.on("tick",this._boundLoop)},s.default.extend(s.default.Clock,s.default.Emitter),s.default.Clock.defaults={callback:s.default.noOp,frequency:1},Object.defineProperty(s.default.Clock.prototype,"state",{get:function(){return this._state.getValueAtTime(this.now())}}),s.default.Clock.prototype.start=function(t,e){return this.context.resume(),t=this.toSeconds(t),this._state.getValueAtTime(t)!==s.default.State.Started&&(this._state.setStateAtTime(s.default.State.Started,t),this._tickSource.start(t,e),t<this._lastUpdate&&this.emit("start",t,e)),this},s.default.Clock.prototype.stop=function(t){return t=this.toSeconds(t),this._state.cancel(t),this._state.setStateAtTime(s.default.State.Stopped,t),this._tickSource.stop(t),t<this._lastUpdate&&this.emit("stop",t),this},s.default.Clock.prototype.pause=function(t){return t=this.toSeconds(t),this._state.getValueAtTime(t)===s.default.State.Started&&(this._state.setStateAtTime(s.default.State.Paused,t),this._tickSource.pause(t),t<this._lastUpdate&&this.emit("pause",t)),this},Object.defineProperty(s.default.Clock.prototype,"ticks",{get:function(){return Math.ceil(this.getTicksAtTime(this.now()))},set:function(t){this._tickSource.ticks=t}}),Object.defineProperty(s.default.Clock.prototype,"seconds",{get:function(){return this._tickSource.seconds},set:function(t){this._tickSource.seconds=t}}),s.default.Clock.prototype.getSecondsAtTime=function(t){return this._tickSource.getSecondsAtTime(t)},s.default.Clock.prototype.setTicksAtTime=function(t,e){return this._tickSource.setTicksAtTime(t,e),this},s.default.Clock.prototype.getTicksAtTime=function(t){return this._tickSource.getTicksAtTime(t)},s.default.Clock.prototype.nextTickTime=function(t,e){e=this.toSeconds(e);var i=this.getTicksAtTime(e);return this._tickSource.getTimeOfTick(i+t,e)},s.default.Clock.prototype._loop=function(){var t=this._lastUpdate,e=this.now();this._lastUpdate=e,t!==e&&(this._state.forEachBetween(t,e,function(t){switch(t.state){case s.default.State.Started:var e=this._tickSource.getTicksAtTime(t.time);this.emit("start",t.time,e);break;case s.default.State.Stopped:0!==t.time&&this.emit("stop",t.time);break;case s.default.State.Paused:this.emit("pause",t.time)}}.bind(this)),this._tickSource.forEachTickBetween(t,e,function(t,e){this.callback(t,e)}.bind(this)))},s.default.Clock.prototype.getStateAtTime=function(t){return t=this.toSeconds(t),this._state.getValueAtTime(t)},s.default.Clock.prototype.dispose=function(){s.default.Emitter.prototype.dispose.call(this),this.context.off("tick",this._boundLoop),this._writable("frequency"),this._tickSource.dispose(),this._tickSource=null,this.frequency=null,this._boundLoop=null,this._nextTick=1/0,this.callback=null,this._state.dispose(),this._state=null},e.default=s.default.Clock},function(t,e,i){"use strict";i.r(e);var s=i(0);i(2),i(5),i(7);s.default.GreaterThanZero=function(){s.default.SignalBase.call(this),this._thresh=this.output=new s.default.WaveShaper(function(t){return t<=0?0:1},127),this._scale=this.input=new s.default.Multiply(1e4),this._scale.connect(this._thresh)},s.default.extend(s.default.GreaterThanZero,s.default.SignalBase),s.default.GreaterThanZero.prototype.dispose=function(){return s.default.SignalBase.prototype.dispose.call(this),this._scale.dispose(),this._scale=null,this._thresh.dispose(),this._thresh=null,this},e.default=s.default.GreaterThanZero},function(t,e,i){"use strict";i.r(e);var s=i(0);i(84),i(13),i(2);s.default.GreaterThan=function(t){s.default.Signal.call(this),this.createInsOuts(2,0),this._param=this.input[0]=new s.default.Subtract(t),this.input[1]=this._param.input[1],this._gtz=this.output=new s.default.GreaterThanZero,this._param.connect(this._gtz)},s.default.extend(s.default.GreaterThan,s.default.Signal),s.default.GreaterThan.prototype.dispose=function(){return s.default.Signal.prototype.dispose.call(this),this._gtz.dispose(),this._gtz=null,this},e.default=s.default.GreaterThan},function(t,e,i){"use strict";i.r(e);var s=i(0);i(47),i(26);s.default.ScaledEnvelope=function(){var t=s.default.defaults(arguments,["attack","decay","sustain","release"],s.default.Envelope);s.default.Envelope.call(this,t),t=s.default.defaultArg(t,s.default.ScaledEnvelope.defaults),this._exp=this.output=new s.default.Pow(t.exponent),this._scale=this.output=new s.default.Scale(t.min,t.max),this._sig.chain(this._exp,this._scale)},s.default.extend(s.default.ScaledEnvelope,s.default.Envelope),s.default.ScaledEnvelope.defaults={min:0,max:1,exponent:1},Object.defineProperty(s.default.ScaledEnvelope.prototype,"min",{get:function(){return this._scale.min},set:function(t){this._scale.min=t}}),Object.defineProperty(s.default.ScaledEnvelope.prototype,"max",{get:function(){return this._scale.max},set:function(t){this._scale.max=t}}),Object.defineProperty(s.default.ScaledEnvelope.prototype,"exponent",{get:function(){return this._exp.value},set:function(t){this._exp.value=t}}),s.default.ScaledEnvelope.prototype.dispose=function(){return s.default.Envelope.prototype.dispose.call(this),this._scale.dispose(),this._scale=null,this._exp.dispose(),this._exp=null,this},e.default=s.default.ScaledEnvelope},function(t,e,i){"use strict";i.r(e);var s=i(0);i(7),i(30);s.default.Abs=function(){s.default.SignalBase.call(this),this._abs=this.input=this.output=new s.default.WaveShaper(function(t){return Math.abs(t)<.001?0:Math.abs(t)},1024)},s.default.extend(s.default.Abs,s.default.SignalBase),s.default.Abs.prototype.dispose=function(){return s.default.SignalBase.prototype.dispose.call(this),this._abs.dispose(),this._abs=null,this},e.default=s.default.Abs},function(t,e,i){"use strict";i.r(e);var s=i(0);i(3),i(1);s.default.Solo=function(){var t=s.default.defaults(arguments,["solo"],s.default.Solo);s.default.AudioNode.call(this),this.input=this.output=new s.default.Gain,this._soloBind=this._soloed.bind(this),this.context.on("solo",this._soloBind),this.solo=t.solo},s.default.extend(s.default.Solo,s.default.AudioNode),s.default.Solo.defaults={solo:!1},Object.defineProperty(s.default.Solo.prototype,"solo",{get:function(){return this._isSoloed()},set:function(t){t?this._addSolo():this._removeSolo(),this.context.emit("solo",this)}}),Object.defineProperty(s.default.Solo.prototype,"muted",{get:function(){return 0===this.input.gain.value}}),s.default.Solo.prototype._addSolo=function(){s.default.isArray(this.context._currentSolo)||(this.context._currentSolo=[]),this._isSoloed()||this.context._currentSolo.push(this)},s.default.Solo.prototype._removeSolo=function(){if(this._isSoloed()){var t=this.context._currentSolo.indexOf(this);this.context._currentSolo.splice(t,1)}},s.default.Solo.prototype._isSoloed=function(){return!!s.default.isArray(this.context._currentSolo)&&(0!==this.context._currentSolo.length&&-1!==this.context._currentSolo.indexOf(this))},s.default.Solo.prototype._noSolos=function(){return!s.default.isArray(this.context._currentSolo)||0===this.context._currentSolo.length},s.default.Solo.prototype._soloed=function(){this._isSoloed()?this.input.gain.value=1:this._noSolos()?this.input.gain.value=1:this.input.gain.value=0},s.default.Solo.prototype.dispose=function(){return this.context.off("solo",this._soloBind),this._removeSolo(),this._soloBind=null,s.default.AudioNode.prototype.dispose.call(this),this},e.default=s.default.Solo},function(t,e,i){"use strict";i.r(e);var s=i(0);i(7);s.default.EqualPowerGain=function(){s.default.SignalBase.call(this),this._eqPower=this.input=this.output=new s.default.WaveShaper(function(t){return Math.abs(t)<.001?0:s.default.equalPowerScale(t)}.bind(this),4096)},s.default.extend(s.default.EqualPowerGain,s.default.SignalBase),s.default.EqualPowerGain.prototype.dispose=function(){return s.default.SignalBase.prototype.dispose.call(this),this._eqPower.dispose(),this._eqPower=null,this},e.default=s.default.EqualPowerGain},function(t,e,i){"use strict";i.r(e);var s=i(0);i(5),i(2);s.default.Negate=function(){s.default.SignalBase.call(this),this._multiply=this.input=this.output=new s.default.Multiply(-1)},s.default.extend(s.default.Negate,s.default.SignalBase),s.default.Negate.prototype.dispose=function(){return s.default.SignalBase.prototype.dispose.call(this),this._multiply.dispose(),this._multiply=null,this},e.default=s.default.Negate},function(t,e,i){"use strict";i.r(e);var s=i(0);i(48),i(27),i(1);s.default.PanVol=function(){var t=s.default.defaults(arguments,["pan","volume"],s.default.PanVol);s.default.AudioNode.call(this),this._panner=this.input=new s.default.Panner(t.pan),this.pan=this._panner.pan,this._volume=this.output=new s.default.Volume(t.volume),this.volume=this._volume.volume,this._panner.connect(this._volume),this.mute=t.mute,this._readOnly(["pan","volume"])},s.default.extend(s.default.PanVol,s.default.AudioNode),s.default.PanVol.defaults={pan:0,volume:0,mute:!1},Object.defineProperty(s.default.PanVol.prototype,"mute",{get:function(){return this._volume.mute},set:function(t){this._volume.mute=t}}),s.default.PanVol.prototype.dispose=function(){return s.default.AudioNode.prototype.dispose.call(this),this._writable(["pan","volume"]),this._panner.dispose(),this._panner=null,this.pan=null,this._volume.dispose(),this._volume=null,this.volume=null,this},e.default=s.default.PanVol},function(t,e,i){"use strict";var s=i(0);if(s.default.supported){!s.default.global.hasOwnProperty("OfflineAudioContext")&&s.default.global.hasOwnProperty("webkitOfflineAudioContext")&&(s.default.global.OfflineAudioContext=s.default.global.webkitOfflineAudioContext);var n=new OfflineAudioContext(1,1,44100).startRendering();n&&s.default.isFunction(n.then)||(OfflineAudioContext.prototype._native_startRendering=OfflineAudioContext.prototype.startRendering,OfflineAudioContext.prototype.startRendering=function(){return new Promise(function(t){this.oncomplete=function(e){t(e.renderedBuffer)},this._native_startRendering()}.bind(this))})}},function(t,e,i){"use strict";e.a="13.8.25"},function(t,e,i){"use strict";i.r(e);var s=i(0);i(46);s.default.Midi=function(t,e){if(!(this instanceof s.default.Midi))return new s.default.Midi(t,e);s.default.Frequency.call(this,t,e)},s.default.extend(s.default.Midi,s.default.Frequency),s.default.Midi.prototype._defaultUnits="midi",s.default.Midi.prototype._frequencyToUnits=function(t){return s.default.Frequency.ftom(s.default.Frequency.prototype._frequencyToUnits.call(this,t))},s.default.Midi.prototype._ticksToUnits=function(t){return s.default.Frequency.ftom(s.default.Frequency.prototype._ticksToUnits.call(this,t))},s.default.Midi.prototype._beatsToUnits=function(t){return s.default.Frequency.ftom(s.default.Frequency.prototype._beatsToUnits.call(this,t))},s.default.Midi.prototype._secondsToUnits=function(t){return s.default.Frequency.ftom(s.default.Frequency.prototype._secondsToUnits.call(this,t))},s.default.Midi.prototype.toMidi=function(){return this.valueOf()},s.default.Midi.prototype.toFrequency=function(){return s.default.Frequency.mtof(this.toMidi())},s.default.Midi.prototype.transpose=function(t){return new this.constructor(this.toMidi()+t)},e.default=s.default.Midi},function(t,e,i){"use strict";i.r(e);var s=i(0);i(27),i(1);s.default.UserMedia=function(){var t=s.default.defaults(arguments,["volume"],s.default.UserMedia);s.default.AudioNode.call(this),this._mediaStream=null,this._stream=null,this._device=null,this._volume=this.output=new s.default.Volume(t.volume),this.volume=this._volume.volume,this._readOnly("volume"),this.mute=t.mute},s.default.extend(s.default.UserMedia,s.default.AudioNode),s.default.UserMedia.defaults={volume:0,mute:!1},s.default.UserMedia.prototype.open=function(t){return this.state===s.default.State.Started&&this.close(),s.default.UserMedia.enumerateDevices().then(function(e){var i;if(s.default.isNumber(t))i=e[t];else if(!(i=e.find(function(e){return e.label===t||e.deviceId===t}))&&e.length>0)i=e[0];else if(!i&&s.default.isDefined(t))throw new Error("Tone.UserMedia: no matching device: "+t);this._device=i;var n={audio:{echoCancellation:!1,sampleRate:this.context.sampleRate,noiseSuppression:!1,mozNoiseSuppression:!1}};return i&&(n.audio.deviceId=i.deviceId),navigator.mediaDevices.getUserMedia(n).then(function(t){return this._stream||(this._stream=t,this._mediaStream=this.context.createMediaStreamSource(t),s.default.connect(this._mediaStream,this.output)),this}.bind(this))}.bind(this))},s.default.UserMedia.prototype.close=function(){return this._stream&&(this._stream.getAudioTracks().forEach(function(t){t.stop()}),this._stream=null,this._mediaStream.disconnect(),this._mediaStream=null),this._device=null,this},s.default.UserMedia.enumerateDevices=function(){return navigator.mediaDevices.enumerateDevices().then(function(t){return t.filter(function(t){return"audioinput"===t.kind})})},Object.defineProperty(s.default.UserMedia.prototype,"state",{get:function(){return this._stream&&this._stream.active?s.default.State.Started:s.default.State.Stopped}}),Object.defineProperty(s.default.UserMedia.prototype,"deviceId",{get:function(){return this._device?this._device.deviceId:null}}),Object.defineProperty(s.default.UserMedia.prototype,"groupId",{get:function(){return this._device?this._device.groupId:null}}),Object.defineProperty(s.default.UserMedia.prototype,"label",{get:function(){return this._device?this._device.label:null}}),Object.defineProperty(s.default.UserMedia.prototype,"mute",{get:function(){return this._volume.mute},set:function(t){this._volume.mute=t}}),s.default.UserMedia.prototype.dispose=function(){return s.default.AudioNode.prototype.dispose.call(this),this.close(),this._writable("volume"),this._volume.dispose(),this._volume=null,this.volume=null,this},Object.defineProperty(s.default.UserMedia,"supported",{get:function(){return s.default.isDefined(navigator.mediaDevices)&&s.default.isFunction(navigator.mediaDevices.getUserMedia)}}),e.default=s.default.UserMedia},function(t,e,i){"use strict";i.r(e);var s=i(0);i(65),i(27),i(1);s.default.Players=function(t){var e=Array.prototype.slice.call(arguments);e.shift();var i=s.default.defaults(e,["onload"],s.default.Players);for(var n in s.default.AudioNode.call(this,i),this._volume=this.output=new s.default.Volume(i.volume),this.volume=this._volume.volume,this._readOnly("volume"),this._volume.output.output.channelCount=2,this._volume.output.output.channelCountMode="explicit",this.mute=i.mute,this._players={},this._loadingCount=0,this._fadeIn=i.fadeIn,this._fadeOut=i.fadeOut,t)this._loadingCount++,this.add(n,t[n],this._bufferLoaded.bind(this,i.onload))},s.default.extend(s.default.Players,s.default.AudioNode),s.default.Players.defaults={volume:0,mute:!1,onload:s.default.noOp,fadeIn:0,fadeOut:0},s.default.Players.prototype._bufferLoaded=function(t){this._loadingCount--,0===this._loadingCount&&t&&t(this)},Object.defineProperty(s.default.Players.prototype,"mute",{get:function(){return this._volume.mute},set:function(t){this._volume.mute=t}}),Object.defineProperty(s.default.Players.prototype,"fadeIn",{get:function(){return this._fadeIn},set:function(t){this._fadeIn=t,this._forEach(function(e){e.fadeIn=t})}}),Object.defineProperty(s.default.Players.prototype,"fadeOut",{get:function(){return this._fadeOut},set:function(t){this._fadeOut=t,this._forEach(function(e){e.fadeOut=t})}}),Object.defineProperty(s.default.Players.prototype,"state",{get:function(){var t=!1;return this._forEach(function(e){t=t||e.state===s.default.State.Started}),t?s.default.State.Started:s.default.State.Stopped}}),s.default.Players.prototype.has=function(t){return this._players.hasOwnProperty(t)},s.default.Players.prototype.get=function(t){if(this.has(t))return this._players[t];throw new Error("Tone.Players: no player named "+t)},s.default.Players.prototype._forEach=function(t){for(var e in this._players)t(this._players[e],e);return this},Object.defineProperty(s.default.Players.prototype,"loaded",{get:function(){var t=!0;return this._forEach(function(e){t=t&&e.loaded}),t}}),s.default.Players.prototype.add=function(t,e,i){return this._players[t]=new s.default.Player(e,i).connect(this.output),this._players[t].fadeIn=this._fadeIn,this._players[t].fadeOut=this._fadeOut,this},s.default.Players.prototype.stopAll=function(t){this._forEach(function(e){e.stop(t)})},s.default.Players.prototype.dispose=function(){return s.default.AudioNode.prototype.dispose.call(this),this._volume.dispose(),this._volume=null,this._writable("volume"),this.volume=null,this.output=null,this._forEach(function(t){t.dispose()}),this._players=null,this},e.default=s.default.Players},function(t,e,i){"use strict";i.r(e);var s=i(0);i(6),i(11),i(32);s.default.GrainPlayer=function(){var t=s.default.defaults(arguments,["url","onload"],s.default.GrainPlayer);s.default.Source.call(this,t),this.buffer=new s.default.Buffer(t.url,t.onload.bind(void 0,this)),this._clock=new s.default.Clock(this._tick.bind(this),t.grainSize),this._loopStart=0,this._loopEnd=0,this._activeSources=[],this._playbackRate=t.playbackRate,this._grainSize=t.grainSize,this._overlap=t.overlap,this.detune=t.detune,this.overlap=t.overlap,this.loop=t.loop,this.playbackRate=t.playbackRate,this.grainSize=t.grainSize,this.loopStart=t.loopStart,this.loopEnd=t.loopEnd,this.reverse=t.reverse,this._clock.on("stop",this._onstop.bind(this))},s.default.extend(s.default.GrainPlayer,s.default.Source),s.default.GrainPlayer.defaults={onload:s.default.noOp,overlap:.1,grainSize:.2,playbackRate:1,detune:0,loop:!1,loopStart:0,loopEnd:0,reverse:!1},s.default.GrainPlayer.prototype._start=function(t,e,i){e=s.default.defaultArg(e,0),e=this.toSeconds(e),t=this.toSeconds(t),this._offset=e,this._clock.start(t),i&&this.stop(t+this.toSeconds(i))},s.default.GrainPlayer.prototype._stop=function(t){this._clock.stop(t)},s.default.GrainPlayer.prototype._onstop=function(t){this._activeSources.forEach(function(e){e.fadeOut=0,e.stop(t)})},s.default.GrainPlayer.prototype._tick=function(t){if(!this.loop&&this._offset>this.buffer.duration)this.stop(t);else{var e=this._offset<this._overlap?0:this._overlap,i=new s.default.BufferSource({buffer:this.buffer,fadeIn:e,fadeOut:this._overlap,loop:this.loop,loopStart:this._loopStart,loopEnd:this._loopEnd,playbackRate:s.default.intervalToFrequencyRatio(this.detune/100)}).connect(this.output);i.start(t,this._offset),this._offset+=this.grainSize,i.stop(t+this.grainSize/this.playbackRate),this._activeSources.push(i),i.onended=function(){var t=this._activeSources.indexOf(i);-1!==t&&this._activeSources.splice(t,1)}.bind(this)}},Object.defineProperty(s.default.GrainPlayer.prototype,"playbackRate",{get:function(){return this._playbackRate},set:function(t){this._playbackRate=t,this.grainSize=this._grainSize}}),Object.defineProperty(s.default.GrainPlayer.prototype,"loopStart",{get:function(){return this._loopStart},set:function(t){this._loopStart=this.toSeconds(t)}}),Object.defineProperty(s.default.GrainPlayer.prototype,"loopEnd",{get:function(){return this._loopEnd},set:function(t){this._loopEnd=this.toSeconds(t)}}),Object.defineProperty(s.default.GrainPlayer.prototype,"reverse",{get:function(){return this.buffer.reverse},set:function(t){this.buffer.reverse=t}}),Object.defineProperty(s.default.GrainPlayer.prototype,"grainSize",{get:function(){return this._grainSize},set:function(t){this._grainSize=this.toSeconds(t),this._clock.frequency.value=this._playbackRate/this._grainSize}}),Object.defineProperty(s.default.GrainPlayer.prototype,"overlap",{get:function(){return this._overlap},set:function(t){this._overlap=this.toSeconds(t)}}),Object.defineProperty(s.default.GrainPlayer.prototype,"loaded",{get:function(){return this.buffer.loaded}}),s.default.GrainPlayer.prototype.dispose=function(){return s.default.Source.prototype.dispose.call(this),this.buffer.dispose(),this.buffer=null,this._clock.dispose(),this._clock=null,this._activeSources.forEach(function(t){t.dispose()}),this._activeSources=null,this},e.default=s.default.GrainPlayer},function(t,e,i){"use strict";i.r(e);var s=i(0);i(16),i(2),i(45);s.default.TransportTimelineSignal=function(){s.default.Signal.apply(this,arguments),this.output=this._outputSig=new s.default.Signal(this._initialValue),this._lastVal=this.value,this._synced=s.default.Transport.scheduleRepeat(this._onTick.bind(this),"1i"),this._bindAnchorValue=this._anchorValue.bind(this),s.default.Transport.on("start stop pause",this._bindAnchorValue),this._events.memory=1/0},s.default.extend(s.default.TransportTimelineSignal,s.default.Signal),s.default.TransportTimelineSignal.prototype._onTick=function(t){var e=this.getValueAtTime(s.default.Transport.seconds);this._lastVal!==e&&(this._lastVal=e,this._outputSig.linearRampToValueAtTime(e,t))},s.default.TransportTimelineSignal.prototype._anchorValue=function(t){var e=this.getValueAtTime(s.default.Transport.seconds);return this._lastVal=e,this._outputSig.cancelScheduledValues(t),this._outputSig.setValueAtTime(e,t),this},s.default.TransportTimelineSignal.prototype.getValueAtTime=function(t){return t=s.default.TransportTime(t),s.default.Signal.prototype.getValueAtTime.call(this,t)},s.default.TransportTimelineSignal.prototype.setValueAtTime=function(t,e){return e=s.default.TransportTime(e),s.default.Signal.prototype.setValueAtTime.call(this,t,e),this},s.default.TransportTimelineSignal.prototype.linearRampToValueAtTime=function(t,e){return e=s.default.TransportTime(e),s.default.Signal.prototype.linearRampToValueAtTime.call(this,t,e),this},s.default.TransportTimelineSignal.prototype.exponentialRampToValueAtTime=function(t,e){return e=s.default.TransportTime(e),s.default.Signal.prototype.exponentialRampToValueAtTime.call(this,t,e),this},s.default.TransportTimelineSignal.prototype.setTargetAtTime=function(t,e,i){return e=s.default.TransportTime(e),s.default.Signal.prototype.setTargetAtTime.call(this,t,e,i),this},s.default.TransportTimelineSignal.prototype.cancelScheduledValues=function(t){return t=s.default.TransportTime(t),s.default.Signal.prototype.cancelScheduledValues.call(this,t),this},s.default.TransportTimelineSignal.prototype.setValueCurveAtTime=function(t,e,i,n){return e=s.default.TransportTime(e),i=s.default.TransportTime(i),s.default.Signal.prototype.setValueCurveAtTime.call(this,t,e,i,n),this},s.default.TransportTimelineSignal.prototype.cancelAndHoldAtTime=function(t){return s.default.Signal.prototype.cancelAndHoldAtTime.call(this,s.default.TransportTime(t))},s.default.TransportTimelineSignal.prototype.dispose=function(){s.default.Transport.clear(this._synced),s.default.Transport.off("start stop pause",this._syncedCallback),this._events.cancel(0),s.default.Signal.prototype.dispose.call(this),this._outputSig.dispose(),this._outputSig=null},e.default=s.default.TransportTimelineSignal},function(t,e,i){"use strict";i.r(e);var s=i(0);i(29),i(5);s.default.Normalize=function(t,e){s.default.SignalBase.call(this),this._inputMin=s.default.defaultArg(t,0),this._inputMax=s.default.defaultArg(e,1),this._sub=this.input=new s.default.Add(0),this._div=this.output=new s.default.Multiply(1),this._sub.connect(this._div),this._setRange()},s.default.extend(s.default.Normalize,s.default.SignalBase),Object.defineProperty(s.default.Normalize.prototype,"min",{get:function(){return this._inputMin},set:function(t){this._inputMin=t,this._setRange()}}),Object.defineProperty(s.default.Normalize.prototype,"max",{get:function(){return this._inputMax},set:function(t){this._inputMax=t,this._setRange()}}),s.default.Normalize.prototype._setRange=function(){this._sub.value=-this._inputMin,this._div.value=1/(this._inputMax-this._inputMin)},s.default.Normalize.prototype.dispose=function(){return s.default.SignalBase.prototype.dispose.call(this),this._sub.dispose(),this._sub=null,this._div.dispose(),this._div=null,this},e.default=s.default.Normalize},function(t,e,i){"use strict";i.r(e);var s=i(0);i(7),i(2);s.default.GainToAudio=function(){s.default.SignalBase.call(this),this._norm=this.input=this.output=new s.default.WaveShaper(function(t){return 2*Math.abs(t)-1})},s.default.extend(s.default.GainToAudio,s.default.SignalBase),s.default.GainToAudio.prototype.dispose=function(){return s.default.SignalBase.prototype.dispose.call(this),this._norm.dispose(),this._norm=null,this},e.default=s.default.GainToAudio},function(t,e,i){"use strict";i.r(e);var s=i(0);i(21),i(78),i(32);s.default.Sampler=function(t){var e=Array.prototype.slice.call(arguments);e.shift();var i=s.default.defaults(e,["onload","baseUrl"],s.default.Sampler);s.default.Instrument.call(this,i);var n={};for(var o in t)if(s.default.isNote(o)){n[s.default.Frequency(o).toMidi()]=t[o]}else{if(isNaN(parseFloat(o)))throw new Error("Tone.Sampler: url keys must be the note's pitch");n[o]=t[o]}this._buffers=new s.default.Buffers(n,i.onload,i.baseUrl),this._activeSources={},this.attack=i.attack,this.release=i.release,this.curve=i.curve},s.default.extend(s.default.Sampler,s.default.Instrument),s.default.Sampler.defaults={attack:0,release:.1,onload:s.default.noOp,baseUrl:"",curve:"exponential"},s.default.Sampler.prototype._findClosest=function(t){for(var e=0;e<96;){if(this._buffers.has(t+e))return-e;if(this._buffers.has(t-e))return e;e++}throw new Error("No available buffers for note: "+t)},s.default.Sampler.prototype.triggerAttack=function(t,e,i){this.log("triggerAttack",t,e,i),Array.isArray(t)||(t=[t]);for(var n=0;n<t.length;n++){var o=s.default.Frequency(t[n]).toMidi(),a=this._findClosest(o),r=o-a,l=this._buffers.get(r),u=s.default.intervalToFrequencyRatio(a),d=new s.default.BufferSource({buffer:l,playbackRate:u,fadeIn:this.attack,fadeOut:this.release,curve:this.curve}).connect(this.output);d.start(e,0,l.duration/u,i),s.default.isArray(this._activeSources[o])||(this._activeSources[o]=[]),this._activeSources[o].push(d),d.onended=function(){if(this._activeSources&&this._activeSources[o]){var t=this._activeSources[o].indexOf(d);-1!==t&&this._activeSources[o].splice(t,1)}}.bind(this)}return this},s.default.Sampler.prototype.triggerRelease=function(t,e){this.log("triggerRelease",t,e),Array.isArray(t)||(t=[t]);for(var i=0;i<t.length;i++){var n=s.default.Frequency(t[i]).toMidi();this._activeSources[n]&&this._activeSources[n].length&&(e=this.toSeconds(e),this._activeSources[n].forEach(function(t){t.stop(e)}),this._activeSources[n]=[])}return this},s.default.Sampler.prototype.releaseAll=function(t){for(var e in t=this.toSeconds(t),this._activeSources)for(var i=this._activeSources[e];i.length;){i.shift().stop(t)}return this},s.default.Sampler.prototype.sync=function(){return this._syncMethod("triggerAttack",1),this._syncMethod("triggerRelease",1),this},s.default.Sampler.prototype.triggerAttackRelease=function(t,e,i,n){if(i=this.toSeconds(i),this.triggerAttack(t,i,n),s.default.isArray(e)&&s.default.isArray(t))for(var o=0;o<t.length;o++){var a=e[Math.min(o,e.length-1)];this.triggerRelease(t[o],i+this.toSeconds(a))}else this.triggerRelease(t,i+this.toSeconds(e));return this},s.default.Sampler.prototype.add=function(t,e,i){if(s.default.isNote(t)){var n=s.default.Frequency(t).toMidi();this._buffers.add(n,e,i)}else{if(isNaN(parseFloat(t)))throw new Error("Tone.Sampler: note must be the note's pitch. Instead got "+t);this._buffers.add(t,e,i)}},Object.defineProperty(s.default.Sampler.prototype,"loaded",{get:function(){return this._buffers.loaded}}),s.default.Sampler.prototype.dispose=function(){for(var t in s.default.Instrument.prototype.dispose.call(this),this._buffers.dispose(),this._buffers=null,this._activeSources)this._activeSources[t].forEach(function(t){t.dispose()});return this._activeSources=null,this},e.default=s.default.Sampler},function(t,e,i){"use strict";i.r(e);var s=i(0);i(38),i(6);s.default.PolySynth=function(){var t=s.default.defaults(arguments,["polyphony","voice"],s.default.PolySynth);s.default.Instrument.call(this,t),(t=s.default.defaultArg(t,s.default.Instrument.defaults)).polyphony=Math.min(s.default.PolySynth.MAX_POLYPHONY,t.polyphony),this.voices=new Array(t.polyphony),this.assert(t.polyphony>0,"polyphony must be greater than 0"),this.detune=new s.default.Signal(t.detune,s.default.Type.Cents),this._readOnly("detune");for(var e=0;e<t.polyphony;e++){var i=new t.voice(arguments[2],arguments[3]);if(!(i instanceof s.default.Monophonic))throw new Error("Synth constructor must be instance of Tone.Monophonic");this.voices[e]=i,i.index=e,i.connect(this.output),i.hasOwnProperty("detune")&&this.detune.connect(i.detune)}},s.default.extend(s.default.PolySynth,s.default.Instrument),s.default.PolySynth.defaults={polyphony:4,volume:0,detune:0,voice:s.default.Synth},s.default.PolySynth.prototype._getClosestVoice=function(t,e){var i=this.voices.find(function(i){if(Math.abs(i.frequency.getValueAtTime(t)-s.default.Frequency(e))<1e-4&&i.getLevelAtTime(t)>1e-5)return i});return i||this.voices.slice().sort(function(e,i){var s=e.getLevelAtTime(t+this.blockTime),n=i.getLevelAtTime(t+this.blockTime);return s<1e-5&&(s=0),n<1e-5&&(n=0),s-n}.bind(this))[0]},s.default.PolySynth.prototype.triggerAttack=function(t,e,i){return Array.isArray(t)||(t=[t]),e=this.toSeconds(e),t.forEach(function(t){var s=this._getClosestVoice(e,t);s.triggerAttack(t,e,i),this.log("triggerAttack",s.index,t)}.bind(this)),this},s.default.PolySynth.prototype.triggerRelease=function(t,e){return Array.isArray(t)||(t=[t]),e=this.toSeconds(e),t.forEach(function(t){var i=this._getClosestVoice(e,t);this.log("triggerRelease",i.index,t),i.triggerRelease(e)}.bind(this)),this},s.default.PolySynth.prototype.triggerAttackRelease=function(t,e,i,n){if(i=this.toSeconds(i),this.triggerAttack(t,i,n),s.default.isArray(e)&&s.default.isArray(t))for(var o=0;o<t.length;o++){var a=e[Math.min(o,e.length-1)];this.triggerRelease(t[o],i+this.toSeconds(a))}else this.triggerRelease(t,i+this.toSeconds(e));return this},s.default.PolySynth.prototype.sync=function(){return this._syncMethod("triggerAttack",1),this._syncMethod("triggerRelease",1),this},s.default.PolySynth.prototype.set=function(t,e,i){for(var s=0;s<this.voices.length;s++)this.voices[s].set(t,e,i);return this},s.default.PolySynth.prototype.get=function(t){return this.voices[0].get(t)},s.default.PolySynth.prototype.releaseAll=function(t){return t=this.toSeconds(t),this.voices.forEach(function(e){e.triggerRelease(t)}),this},s.default.PolySynth.prototype.dispose=function(){return s.default.Instrument.prototype.dispose.call(this),this.voices.forEach(function(t){t.dispose()}),this._writable("detune"),this.detune.dispose(),this.detune=null,this.voices=null,this},s.default.PolySynth.MAX_POLYPHONY=20,e.default=s.default.PolySynth},function(t,e,i){"use strict";i.r(e);var s=i(0);i(21),i(39),i(54);s.default.PluckSynth=function(t){t=s.default.defaultArg(t,s.default.PluckSynth.defaults),s.default.Instrument.call(this,t),this._noise=new s.default.Noise("pink"),this.attackNoise=t.attackNoise,this._lfcf=new s.default.LowpassCombFilter({resonance:t.resonance,dampening:t.dampening}),this.resonance=this._lfcf.resonance,this.dampening=this._lfcf.dampening,this._noise.connect(this._lfcf),this._lfcf.connect(this.output),this._readOnly(["resonance","dampening"])},s.default.extend(s.default.PluckSynth,s.default.Instrument),s.default.PluckSynth.defaults={attackNoise:1,dampening:4e3,resonance:.7},s.default.PluckSynth.prototype.triggerAttack=function(t,e){t=this.toFrequency(t),e=this.toSeconds(e);var i=1/t;return this._lfcf.delayTime.setValueAtTime(i,e),this._noise.start(e),this._noise.stop(e+i*this.attackNoise),this},s.default.PluckSynth.prototype.dispose=function(){return s.default.Instrument.prototype.dispose.call(this),this._noise.dispose(),this._lfcf.dispose(),this._noise=null,this._lfcf=null,this._writable(["resonance","dampening"]),this.dampening=null,this.resonance=null,this},e.default=s.default.PluckSynth},function(t,e,i){"use strict";i.r(e);var s=i(0);i(31),i(41),i(39),i(2),i(9),i(21);s.default.NoiseSynth=function(t){t=s.default.defaultArg(t,s.default.NoiseSynth.defaults),s.default.Instrument.call(this,t),this.noise=new s.default.Noise(t.noise),this.envelope=new s.default.AmplitudeEnvelope(t.envelope),this.noise.chain(this.envelope,this.output),this._readOnly(["noise","envelope"])},s.default.extend(s.default.NoiseSynth,s.default.Instrument),s.default.NoiseSynth.defaults={noise:{type:"white"},envelope:{attack:.005,decay:.1,sustain:0}},s.default.NoiseSynth.prototype.triggerAttack=function(t,e){return t=this.toSeconds(t),this.envelope.triggerAttack(t,e),this.noise.start(t),0===this.envelope.sustain&&this.noise.stop(t+this.envelope.attack+this.envelope.decay),this},s.default.NoiseSynth.prototype.triggerRelease=function(t){return t=this.toSeconds(t),this.envelope.triggerRelease(t),this.noise.stop(t+this.envelope.release),this},s.default.NoiseSynth.prototype.sync=function(){return this._syncMethod("triggerAttack",0),this._syncMethod("triggerRelease",0),this},s.default.NoiseSynth.prototype.triggerAttackRelease=function(t,e,i){return e=this.toSeconds(e),t=this.toSeconds(t),this.triggerAttack(e,i),this.triggerRelease(e+t),this},s.default.NoiseSynth.prototype.dispose=function(){return s.default.Instrument.prototype.dispose.call(this),this._writable(["noise","envelope"]),this.noise.dispose(),this.noise=null,this.envelope.dispose(),this.envelope=null,this},e.default=s.default.NoiseSynth},function(t,e,i){"use strict";i.r(e);var s=i(0),n=(i(21),i(49),i(9),i(41),i(31),i(3),i(26),i(5),[1,1.483,1.932,2.546,2.63,3.897]);s.default.MetalSynth=function(t){t=s.default.defaultArg(t,s.default.MetalSynth.defaults),s.default.Instrument.call(this,t),this.frequency=new s.default.Signal(t.frequency,s.default.Type.Frequency),this._oscillators=[],this._freqMultipliers=[],this._amplitue=new s.default.Gain(0).connect(this.output),this._highpass=new s.default.Filter({type:"highpass",Q:-3.0102999566398125}).connect(this._amplitue),this._octaves=t.octaves,this._filterFreqScaler=new s.default.Scale(t.resonance,7e3),this.envelope=new s.default.Envelope({attack:t.envelope.attack,attackCurve:"linear",decay:t.envelope.decay,sustain:0,release:t.envelope.release}).chain(this._filterFreqScaler,this._highpass.frequency),this.envelope.connect(this._amplitue.gain);for(var e=0;e<n.length;e++){var i=new s.default.FMOscillator({type:"square",modulationType:"square",harmonicity:t.harmonicity,modulationIndex:t.modulationIndex});i.connect(this._highpass),this._oscillators[e]=i;var o=new s.default.Multiply(n[e]);this._freqMultipliers[e]=o,this.frequency.chain(o,i.frequency)}this.octaves=t.octaves},s.default.extend(s.default.MetalSynth,s.default.Instrument),s.default.MetalSynth.defaults={frequency:200,envelope:{attack:.001,decay:1.4,release:.2},harmonicity:5.1,modulationIndex:32,resonance:4e3,octaves:1.5},s.default.MetalSynth.prototype.triggerAttack=function(t,e){return t=this.toSeconds(t),e=s.default.defaultArg(e,1),this.envelope.triggerAttack(t,e),this._oscillators.forEach(function(e){e.start(t)}),0===this.envelope.sustain&&this._oscillators.forEach(function(e){e.stop(t+this.envelope.attack+this.envelope.decay)}.bind(this)),this},s.default.MetalSynth.prototype.triggerRelease=function(t){return t=this.toSeconds(t),this.envelope.triggerRelease(t),this._oscillators.forEach(function(e){e.stop(t+this.envelope.release)}.bind(this)),this},s.default.MetalSynth.prototype.sync=function(){return this._syncMethod("triggerAttack",0),this._syncMethod("triggerRelease",0),this},s.default.MetalSynth.prototype.triggerAttackRelease=function(t,e,i){return e=this.toSeconds(e),t=this.toSeconds(t),this.triggerAttack(e,i),this.triggerRelease(e+t),this},Object.defineProperty(s.default.MetalSynth.prototype,"modulationIndex",{get:function(){return this._oscillators[0].modulationIndex.value},set:function(t){for(var e=0;e<this._oscillators.length;e++)this._oscillators[e].modulationIndex.value=t}}),Object.defineProperty(s.default.MetalSynth.prototype,"harmonicity",{get:function(){return this._oscillators[0].harmonicity.value},set:function(t){for(var e=0;e<this._oscillators.length;e++)this._oscillators[e].harmonicity.value=t}}),Object.defineProperty(s.default.MetalSynth.prototype,"resonance",{get:function(){return this._filterFreqScaler.min},set:function(t){this._filterFreqScaler.min=t,this.octaves=this._octaves}}),Object.defineProperty(s.default.MetalSynth.prototype,"octaves",{get:function(){return this._octaves},set:function(t){this._octaves=t,this._filterFreqScaler.max=this._filterFreqScaler.min*Math.pow(2,t)}}),s.default.MetalSynth.prototype.dispose=function(){s.default.Instrument.prototype.dispose.call(this);for(var t=0;t<this._oscillators.length;t++)this._oscillators[t].dispose(),this._freqMultipliers[t].dispose();this._oscillators=null,this._freqMultipliers=null,this.frequency.dispose(),this.frequency=null,this._filterFreqScaler.dispose(),this._filterFreqScaler=null,this._amplitue.dispose(),this._amplitue=null,this.envelope.dispose(),this.envelope=null,this._highpass.dispose(),this._highpass=null},e.default=s.default.MetalSynth},function(t,e,i){"use strict";i.r(e);var s=i(0);i(37),i(21),i(31);s.default.MembraneSynth=function(t){t=s.default.defaultArg(t,s.default.MembraneSynth.defaults),s.default.Instrument.call(this,t),this.oscillator=new s.default.OmniOscillator(t.oscillator),this.envelope=new s.default.AmplitudeEnvelope(t.envelope),this.octaves=t.octaves,this.pitchDecay=t.pitchDecay,this.oscillator.chain(this.envelope,this.output),this._readOnly(["oscillator","envelope"])},s.default.extend(s.default.MembraneSynth,s.default.Instrument),s.default.MembraneSynth.defaults={pitchDecay:.05,octaves:10,oscillator:{type:"sine"},envelope:{attack:.001,decay:.4,sustain:.01,release:1.4,attackCurve:"exponential"}},s.default.MembraneSynth.prototype.triggerAttack=function(t,e,i){e=this.toSeconds(e);var s=(t=this.toFrequency(t))*this.octaves;return this.oscillator.frequency.setValueAtTime(s,e),this.oscillator.frequency.exponentialRampToValueAtTime(t,e+this.toSeconds(this.pitchDecay)),this.envelope.triggerAttack(e,i),this.oscillator.start(e),0===this.envelope.sustain&&this.oscillator.stop(e+this.envelope.attack+this.envelope.decay),this},s.default.MembraneSynth.prototype.triggerRelease=function(t){return t=this.toSeconds(t),this.envelope.triggerRelease(t),this.oscillator.stop(t+this.envelope.release),this},s.default.MembraneSynth.prototype.dispose=function(){return s.default.Instrument.prototype.dispose.call(this),this._writable(["oscillator","envelope"]),this.oscillator.dispose(),this.oscillator=null,this.envelope.dispose(),this.envelope=null,this},e.default=s.default.MembraneSynth},function(t,e,i){"use strict";i.r(e);var s=i(0);i(38),i(2),i(5),i(25);s.default.FMSynth=function(t){t=s.default.defaultArg(t,s.default.FMSynth.defaults),s.default.Monophonic.call(this,t),this._carrier=new s.default.Synth(t.carrier),this._carrier.volume.value=-10,this.oscillator=this._carrier.oscillator,this.envelope=this._carrier.envelope.set(t.envelope),this._modulator=new s.default.Synth(t.modulator),this._modulator.volume.value=-10,this.modulation=this._modulator.oscillator.set(t.modulation),this.modulationEnvelope=this._modulator.envelope.set(t.modulationEnvelope),this.frequency=new s.default.Signal(440,s.default.Type.Frequency),this.detune=new s.default.Signal(t.detune,s.default.Type.Cents),this.harmonicity=new s.default.Multiply(t.harmonicity),this.harmonicity.units=s.default.Type.Positive,this.modulationIndex=new s.default.Multiply(t.modulationIndex),this.modulationIndex.units=s.default.Type.Positive,this._modulationNode=new s.default.Gain(0),this.frequency.connect(this._carrier.frequency),this.frequency.chain(this.harmonicity,this._modulator.frequency),this.frequency.chain(this.modulationIndex,this._modulationNode),this.detune.fan(this._carrier.detune,this._modulator.detune),this._modulator.connect(this._modulationNode.gain),this._modulationNode.connect(this._carrier.frequency),this._carrier.connect(this.output),this._readOnly(["frequency","harmonicity","modulationIndex","oscillator","envelope","modulation","modulationEnvelope","detune"])},s.default.extend(s.default.FMSynth,s.default.Monophonic),s.default.FMSynth.defaults={harmonicity:3,modulationIndex:10,detune:0,oscillator:{type:"sine"},envelope:{attack:.01,decay:.01,sustain:1,release:.5},modulation:{type:"square"},modulationEnvelope:{attack:.5,decay:0,sustain:1,release:.5}},s.default.FMSynth.prototype._triggerEnvelopeAttack=function(t,e){return t=this.toSeconds(t),this._carrier._triggerEnvelopeAttack(t,e),this._modulator._triggerEnvelopeAttack(t),this},s.default.FMSynth.prototype._triggerEnvelopeRelease=function(t){return t=this.toSeconds(t),this._carrier._triggerEnvelopeRelease(t),this._modulator._triggerEnvelopeRelease(t),this},s.default.FMSynth.prototype.dispose=function(){return s.default.Monophonic.prototype.dispose.call(this),this._writable(["frequency","harmonicity","modulationIndex","oscillator","envelope","modulation","modulationEnvelope","detune"]),this._carrier.dispose(),this._carrier=null,this._modulator.dispose(),this._modulator=null,this.frequency.dispose(),this.frequency=null,this.detune.dispose(),this.detune=null,this.modulationIndex.dispose(),this.modulationIndex=null,this.harmonicity.dispose(),this.harmonicity=null,this._modulationNode.dispose(),this._modulationNode=null,this.oscillator=null,this.envelope=null,this.modulationEnvelope=null,this.modulation=null,this},e.default=s.default.FMSynth},function(t,e,i){"use strict";i.r(e);var s=i(0);i(66),i(12),i(2),i(5),i(25),i(14);s.default.DuoSynth=function(t){t=s.default.defaultArg(t,s.default.DuoSynth.defaults),s.default.Monophonic.call(this,t),this.voice0=new s.default.MonoSynth(t.voice0),this.voice0.volume.value=-10,this.voice1=new s.default.MonoSynth(t.voice1),this.voice1.volume.value=-10,this._vibrato=new s.default.LFO(t.vibratoRate,-50,50),this._vibrato.start(),this.vibratoRate=this._vibrato.frequency,this._vibratoGain=new s.default.Gain(t.vibratoAmount,s.default.Type.Positive),this.vibratoAmount=this._vibratoGain.gain,this.frequency=new s.default.Signal(440,s.default.Type.Frequency),this.harmonicity=new s.default.Multiply(t.harmonicity),this.harmonicity.units=s.default.Type.Positive,this.frequency.connect(this.voice0.frequency),this.frequency.chain(this.harmonicity,this.voice1.frequency),this._vibrato.connect(this._vibratoGain),this._vibratoGain.fan(this.voice0.detune,this.voice1.detune),this.voice0.connect(this.output),this.voice1.connect(this.output),this._readOnly(["voice0","voice1","frequency","vibratoAmount","vibratoRate"])},s.default.extend(s.default.DuoSynth,s.default.Monophonic),s.default.DuoSynth.defaults={vibratoAmount:.5,vibratoRate:5,harmonicity:1.5,voice0:{volume:-10,portamento:0,oscillator:{type:"sine"},filterEnvelope:{attack:.01,decay:0,sustain:1,release:.5},envelope:{attack:.01,decay:0,sustain:1,release:.5}},voice1:{volume:-10,portamento:0,oscillator:{type:"sine"},filterEnvelope:{attack:.01,decay:0,sustain:1,release:.5},envelope:{attack:.01,decay:0,sustain:1,release:.5}}},s.default.DuoSynth.prototype._triggerEnvelopeAttack=function(t,e){return t=this.toSeconds(t),this.voice0._triggerEnvelopeAttack(t,e),this.voice1._triggerEnvelopeAttack(t,e),this},s.default.DuoSynth.prototype._triggerEnvelopeRelease=function(t){return this.voice0._triggerEnvelopeRelease(t),this.voice1._triggerEnvelopeRelease(t),this},s.default.DuoSynth.prototype.getLevelAtTime=function(t){return(this.voice0.getLevelAtTime(t)+this.voice1.getLevelAtTime(t))/2},s.default.DuoSynth.prototype.dispose=function(){return s.default.Monophonic.prototype.dispose.call(this),this._writable(["voice0","voice1","frequency","vibratoAmount","vibratoRate"]),this.voice0.dispose(),this.voice0=null,this.voice1.dispose(),this.voice1=null,this.frequency.dispose(),this.frequency=null,this._vibratoGain.dispose(),this._vibratoGain=null,this._vibrato=null,this.harmonicity.dispose(),this.harmonicity=null,this.vibratoAmount.dispose(),this.vibratoAmount=null,this.vibratoRate=null,this},e.default=s.default.DuoSynth},function(t,e,i){"use strict";i.r(e);var s=i(0);i(38),i(2),i(5),i(25),i(22),i(3);s.default.AMSynth=function(t){t=s.default.defaultArg(t,s.default.AMSynth.defaults),s.default.Monophonic.call(this,t),this._carrier=new s.default.Synth,this._carrier.volume.value=-10,this.oscillator=this._carrier.oscillator.set(t.oscillator),this.envelope=this._carrier.envelope.set(t.envelope),this._modulator=new s.default.Synth,this._modulator.volume.value=-10,this.modulation=this._modulator.oscillator.set(t.modulation),this.modulationEnvelope=this._modulator.envelope.set(t.modulationEnvelope),this.frequency=new s.default.Signal(440,s.default.Type.Frequency),this.detune=new s.default.Signal(t.detune,s.default.Type.Cents),this.harmonicity=new s.default.Multiply(t.harmonicity),this.harmonicity.units=s.default.Type.Positive,this._modulationScale=new s.default.AudioToGain,this._modulationNode=new s.default.Gain,this.frequency.connect(this._carrier.frequency),this.frequency.chain(this.harmonicity,this._modulator.frequency),this.detune.fan(this._carrier.detune,this._modulator.detune),this._modulator.chain(this._modulationScale,this._modulationNode.gain),this._carrier.chain(this._modulationNode,this.output),this._readOnly(["frequency","harmonicity","oscillator","envelope","modulation","modulationEnvelope","detune"])},s.default.extend(s.default.AMSynth,s.default.Monophonic),s.default.AMSynth.defaults={harmonicity:3,detune:0,oscillator:{type:"sine"},envelope:{attack:.01,decay:.01,sustain:1,release:.5},modulation:{type:"square"},modulationEnvelope:{attack:.5,decay:0,sustain:1,release:.5}},s.default.AMSynth.prototype._triggerEnvelopeAttack=function(t,e){return t=this.toSeconds(t),this._carrier._triggerEnvelopeAttack(t,e),this._modulator._triggerEnvelopeAttack(t),this},s.default.AMSynth.prototype._triggerEnvelopeRelease=function(t){return this._carrier._triggerEnvelopeRelease(t),this._modulator._triggerEnvelopeRelease(t),this},s.default.AMSynth.prototype.dispose=function(){return s.default.Monophonic.prototype.dispose.call(this),this._writable(["frequency","harmonicity","oscillator","envelope","modulation","modulationEnvelope","detune"]),this._carrier.dispose(),this._carrier=null,this._modulator.dispose(),this._modulator=null,this.frequency.dispose(),this.frequency=null,this.detune.dispose(),this.detune=null,this.harmonicity.dispose(),this.harmonicity=null,this._modulationScale.dispose(),this._modulationScale=null,this._modulationNode.dispose(),this._modulationNode=null,this.oscillator=null,this.envelope=null,this.modulationEnvelope=null,this.modulation=null,this},e.default=s.default.AMSynth},function(t,e,i){"use strict";i.r(e);var s=i(0);i(70),i(16);s.default.Sequence=function(){var t=s.default.defaults(arguments,["callback","events","subdivision"],s.default.Sequence),e=t.events;if(delete t.events,s.default.Part.call(this,t),this._subdivision=this.toTicks(t.subdivision),s.default.isUndef(t.loopEnd)&&s.default.isDefined(e)&&(this._loopEnd=e.length*this._subdivision),this._loop=!0,s.default.isDefined(e))for(var i=0;i<e.length;i++)this.add(i,e[i])},s.default.extend(s.default.Sequence,s.default.Part),s.default.Sequence.defaults={subdivision:"4n"},Object.defineProperty(s.default.Sequence.prototype,"subdivision",{get:function(){return s.default.Ticks(this._subdivision).toSeconds()}}),s.default.Sequence.prototype.at=function(t,e){return s.default.isArray(e)&&this.remove(t),s.default.Part.prototype.at.call(this,this._indexTime(t),e)},s.default.Sequence.prototype.add=function(t,e){if(null===e)return this;if(s.default.isArray(e)){var i=Math.round(this._subdivision/e.length);e=new s.default.Sequence(this._tick.bind(this),e,s.default.Ticks(i))}return s.default.Part.prototype.add.call(this,this._indexTime(t),e),this},s.default.Sequence.prototype.remove=function(t,e){return s.default.Part.prototype.remove.call(this,this._indexTime(t),e),this},s.default.Sequence.prototype._indexTime=function(t){return t instanceof s.default.TransportTime?t:s.default.Ticks(t*this._subdivision+this.startOffset).toSeconds()},s.default.Sequence.prototype.dispose=function(){return s.default.Part.prototype.dispose.call(this),this},e.default=s.default.Sequence},function(t,e,i){"use strict";i.r(e);var s=i(0);i(71),i(79);s.default.Pattern=function(){var t=s.default.defaults(arguments,["callback","values","pattern"],s.default.Pattern);s.default.Loop.call(this,t),this._pattern=new s.default.CtrlPattern({values:t.values,type:t.pattern,index:t.index})},s.default.extend(s.default.Pattern,s.default.Loop),s.default.Pattern.defaults={pattern:s.default.CtrlPattern.Type.Up,callback:s.default.noOp,values:[]},s.default.Pattern.prototype._tick=function(t){this.callback(t,this._pattern.value),this._pattern.next()},Object.defineProperty(s.default.Pattern.prototype,"index",{get:function(){return this._pattern.index},set:function(t){this._pattern.index=t}}),Object.defineProperty(s.default.Pattern.prototype,"values",{get:function(){return this._pattern.values},set:function(t){this._pattern.values=t}}),Object.defineProperty(s.default.Pattern.prototype,"value",{get:function(){return this._pattern.value}}),Object.defineProperty(s.default.Pattern.prototype,"pattern",{get:function(){return this._pattern.type},set:function(t){this._pattern.type=t}}),s.default.Pattern.prototype.dispose=function(){s.default.Loop.prototype.dispose.call(this),this._pattern.dispose(),this._pattern=null},e.default=s.default.Pattern},function(t,e,i){"use strict";i.r(e);var s=i(0);i(8),i(18),i(12);s.default.Vibrato=function(){var t=s.default.defaults(arguments,["frequency","depth"],s.default.Vibrato);s.default.Effect.call(this,t),this._delayNode=new s.default.Delay(0,t.maxDelay),this._lfo=new s.default.LFO({type:t.type,min:0,max:t.maxDelay,frequency:t.frequency,phase:-90}).start().connect(this._delayNode.delayTime),this.frequency=this._lfo.frequency,this.depth=this._lfo.amplitude,this.depth.value=t.depth,this._readOnly(["frequency","depth"]),this.effectSend.chain(this._delayNode,this.effectReturn)},s.default.extend(s.default.Vibrato,s.default.Effect),s.default.Vibrato.defaults={maxDelay:.005,frequency:5,depth:.1,type:"sine"},Object.defineProperty(s.default.Vibrato.prototype,"type",{get:function(){return this._lfo.type},set:function(t){this._lfo.type=t}}),s.default.Vibrato.prototype.dispose=function(){s.default.Effect.prototype.dispose.call(this),this._delayNode.dispose(),this._delayNode=null,this._lfo.dispose(),this._lfo=null,this._writable(["frequency","depth"]),this.frequency=null,this.depth=null},e.default=s.default.Vibrato},function(t,e,i){"use strict";i.r(e);var s=i(0);i(12),i(15);s.default.Tremolo=function(){var t=s.default.defaults(arguments,["frequency","depth"],s.default.Tremolo);s.default.StereoEffect.call(this,t),this._lfoL=new s.default.LFO({phase:t.spread,min:1,max:0}),this._lfoR=new s.default.LFO({phase:t.spread,min:1,max:0}),this._amplitudeL=new s.default.Gain,this._amplitudeR=new s.default.Gain,this.frequency=new s.default.Signal(t.frequency,s.default.Type.Frequency),this.depth=new s.default.Signal(t.depth,s.default.Type.NormalRange),this._readOnly(["frequency","depth"]),this.effectSendL.chain(this._amplitudeL,this.effectReturnL),this.effectSendR.chain(this._amplitudeR,this.effectReturnR),this._lfoL.connect(this._amplitudeL.gain),this._lfoR.connect(this._amplitudeR.gain),this.frequency.fan(this._lfoL.frequency,this._lfoR.frequency),this.depth.fan(this._lfoR.amplitude,this._lfoL.amplitude),this.type=t.type,this.spread=t.spread},s.default.extend(s.default.Tremolo,s.default.StereoEffect),s.default.Tremolo.defaults={frequency:10,type:"sine",depth:.5,spread:180},s.default.Tremolo.prototype.start=function(t){return this._lfoL.start(t),this._lfoR.start(t),this},s.default.Tremolo.prototype.stop=function(t){return this._lfoL.stop(t),this._lfoR.stop(t),this},s.default.Tremolo.prototype.sync=function(t){return this._lfoL.sync(t),this._lfoR.sync(t),s.default.Transport.syncSignal(this.frequency),this},s.default.Tremolo.prototype.unsync=function(){return this._lfoL.unsync(),this._lfoR.unsync(),s.default.Transport.unsyncSignal(this.frequency),this},Object.defineProperty(s.default.Tremolo.prototype,"type",{get:function(){return this._lfoL.type},set:function(t){this._lfoL.type=t,this._lfoR.type=t}}),Object.defineProperty(s.default.Tremolo.prototype,"spread",{get:function(){return this._lfoR.phase-this._lfoL.phase},set:function(t){this._lfoL.phase=90-t/2,this._lfoR.phase=t/2+90}}),s.default.Tremolo.prototype.dispose=function(){return s.default.StereoEffect.prototype.dispose.call(this),this._writable(["frequency","depth"]),this._lfoL.dispose(),this._lfoL=null,this._lfoR.dispose(),this._lfoR=null,this._amplitudeL.dispose(),this._amplitudeL=null,this._amplitudeR.dispose(),this._amplitudeR=null,this.frequency=null,this.depth=null,this},e.default=s.default.Tremolo},function(t,e,i){"use strict";i.r(e);var s=i(0);i(73),i(2),i(5),i(13);s.default.StereoWidener=function(){var t=s.default.defaults(arguments,["width"],s.default.StereoWidener);s.default.MidSideEffect.call(this,t),this.width=new s.default.Signal(t.width,s.default.Type.NormalRange),this._readOnly(["width"]),this._twoTimesWidthMid=new s.default.Multiply(2),this._twoTimesWidthSide=new s.default.Multiply(2),this._midMult=new s.default.Multiply,this._twoTimesWidthMid.connect(this._midMult,0,1),this.midSend.chain(this._midMult,this.midReturn),this._oneMinusWidth=new s.default.Subtract,this._oneMinusWidth.connect(this._twoTimesWidthMid),s.default.connect(this.context.getConstant(1),this._oneMinusWidth,0,0),this.width.connect(this._oneMinusWidth,0,1),this._sideMult=new s.default.Multiply,this.width.connect(this._twoTimesWidthSide),this._twoTimesWidthSide.connect(this._sideMult,0,1),this.sideSend.chain(this._sideMult,this.sideReturn)},s.default.extend(s.default.StereoWidener,s.default.MidSideEffect),s.default.StereoWidener.defaults={width:.5},s.default.StereoWidener.prototype.dispose=function(){return s.default.MidSideEffect.prototype.dispose.call(this),this._writable(["width"]),this.width.dispose(),this.width=null,this._midMult.dispose(),this._midMult=null,this._sideMult.dispose(),this._sideMult=null,this._twoTimesWidthMid.dispose(),this._twoTimesWidthMid=null,this._twoTimesWidthSide.dispose(),this._twoTimesWidthSide=null,this._oneMinusWidth.dispose(),this._oneMinusWidth=null,this},e.default=s.default.StereoWidener},function(t,e,i){"use strict";i.r(e);var s=i(0);i(15),i(33),i(3);s.default.StereoFeedbackEffect=function(){var t=s.default.defaults(arguments,["feedback"],s.default.FeedbackEffect);s.default.StereoEffect.call(this,t),this.feedback=new s.default.Signal(t.feedback,s.default.Type.NormalRange),this._feedbackL=new s.default.Gain,this._feedbackR=new s.default.Gain,this.effectReturnL.chain(this._feedbackL,this.effectSendL),this.effectReturnR.chain(this._feedbackR,this.effectSendR),this.feedback.fan(this._feedbackL.gain,this._feedbackR.gain),this._readOnly(["feedback"])},s.default.extend(s.default.StereoFeedbackEffect,s.default.StereoEffect),s.default.StereoFeedbackEffect.prototype.dispose=function(){return s.default.StereoEffect.prototype.dispose.call(this),this._writable(["feedback"]),this.feedback.dispose(),this.feedback=null,this._feedbackL.dispose(),this._feedbackL=null,this._feedbackR.dispose(),this._feedbackR=null,this},e.default=s.default.StereoFeedbackEffect},function(t,e,i){"use strict";i.r(e);var s=i(0);i(77),i(9),i(10),i(39),i(3),i(74);s.default.Reverb=function(){var t=s.default.defaults(arguments,["decay"],s.default.Reverb);s.default.Effect.call(this,t),this._convolver=this.context.createConvolver(),this.decay=t.decay,this.preDelay=t.preDelay,this.connectEffect(this._convolver)},s.default.extend(s.default.Reverb,s.default.Effect),s.default.Reverb.defaults={decay:1.5,preDelay:.01},s.default.Reverb.prototype.generate=function(){return s.default.Offline(function(){var t=new s.default.Noise,e=new s.default.Noise,i=new s.default.Merge;t.connect(i.left),e.connect(i.right);var n=(new s.default.Gain).toMaster();i.connect(n),t.start(0),e.start(0),n.gain.setValueAtTime(0,0),n.gain.setValueAtTime(1,this.preDelay),n.gain.exponentialApproachValueAtTime(0,this.preDelay,this.decay+this.preDelay)}.bind(this),this.decay+this.preDelay).then(function(t){return this._convolver.buffer=t.get(),this}.bind(this))},s.default.Reverb.prototype.dispose=function(){return s.default.Effect.prototype.dispose.call(this),this._convolver.disconnect(),this._convolver=null,this},e.default=s.default.Reverb},function(t,e,i){"use strict";i.r(e);var s=i(0);i(12),i(23),i(2),i(33),i(18);s.default.PitchShift=function(){var t=s.default.defaults(arguments,["pitch"],s.default.PitchShift);s.default.FeedbackEffect.call(this,t),this._frequency=new s.default.Signal(0),this._delayA=new s.default.Delay(0,1),this._lfoA=new s.default.LFO({min:0,max:.1,type:"sawtooth"}).connect(this._delayA.delayTime),this._delayB=new s.default.Delay(0,1),this._lfoB=new s.default.LFO({min:0,max:.1,type:"sawtooth",phase:180}).connect(this._delayB.delayTime),this._crossFade=new s.default.CrossFade,this._crossFadeLFO=new s.default.LFO({min:0,max:1,type:"triangle",phase:90}).connect(this._crossFade.fade),this._feedbackDelay=new s.default.Delay(t.delayTime),this.delayTime=this._feedbackDelay.delayTime,this._readOnly("delayTime"),this._pitch=t.pitch,this._windowSize=t.windowSize,this._delayA.connect(this._crossFade.a),this._delayB.connect(this._crossFade.b),this._frequency.fan(this._lfoA.frequency,this._lfoB.frequency,this._crossFadeLFO.frequency),this.effectSend.fan(this._delayA,this._delayB),this._crossFade.chain(this._feedbackDelay,this.effectReturn);var e=this.now();this._lfoA.start(e),this._lfoB.start(e),this._crossFadeLFO.start(e),this.windowSize=this._windowSize},s.default.extend(s.default.PitchShift,s.default.FeedbackEffect),s.default.PitchShift.defaults={pitch:0,windowSize:.1,delayTime:0,feedback:0},Object.defineProperty(s.default.PitchShift.prototype,"pitch",{get:function(){return this._pitch},set:function(t){this._pitch=t;var e=0;t<0?(this._lfoA.min=0,this._lfoA.max=this._windowSize,this._lfoB.min=0,this._lfoB.max=this._windowSize,e=s.default.intervalToFrequencyRatio(t-1)+1):(this._lfoA.min=this._windowSize,this._lfoA.max=0,this._lfoB.min=this._windowSize,this._lfoB.max=0,e=s.default.intervalToFrequencyRatio(t)-1),this._frequency.value=e*(1.2/this._windowSize)}}),Object.defineProperty(s.default.PitchShift.prototype,"windowSize",{get:function(){return this._windowSize},set:function(t){this._windowSize=this.toSeconds(t),this.pitch=this._pitch}}),s.default.PitchShift.prototype.dispose=function(){return s.default.FeedbackEffect.prototype.dispose.call(this),this._frequency.dispose(),this._frequency=null,this._delayA.disconnect(),this._delayA=null,this._delayB.disconnect(),this._delayB=null,this._lfoA.dispose(),this._lfoA=null,this._lfoB.dispose(),this._lfoB=null,this._crossFade.dispose(),this._crossFade=null,this._crossFadeLFO.dispose(),this._crossFadeLFO=null,this._writable("delayTime"),this._feedbackDelay.dispose(),this._feedbackDelay=null,this.delayTime=null,this},e.default=s.default.PitchShift},function(t,e,i){"use strict";i.r(e);var s=i(0);i(72),i(2),i(18);s.default.PingPongDelay=function(){var t=s.default.defaults(arguments,["delayTime","feedback"],s.default.PingPongDelay);s.default.StereoXFeedbackEffect.call(this,t),this._leftDelay=new s.default.Delay(0,t.maxDelayTime),this._rightDelay=new s.default.Delay(0,t.maxDelayTime),this._rightPreDelay=new s.default.Delay(0,t.maxDelayTime),this.delayTime=new s.default.Signal(t.delayTime,s.default.Type.Time),this.effectSendL.chain(this._leftDelay,this.effectReturnL),this.effectSendR.chain(this._rightPreDelay,this._rightDelay,this.effectReturnR),this.delayTime.fan(this._leftDelay.delayTime,this._rightDelay.delayTime,this._rightPreDelay.delayTime),this._feedbackLR.disconnect(),this._feedbackLR.connect(this._rightDelay),this._readOnly(["delayTime"])},s.default.extend(s.default.PingPongDelay,s.default.StereoXFeedbackEffect),s.default.PingPongDelay.defaults={delayTime:.25,maxDelayTime:1},s.default.PingPongDelay.prototype.dispose=function(){return s.default.StereoXFeedbackEffect.prototype.dispose.call(this),this._leftDelay.dispose(),this._leftDelay=null,this._rightDelay.dispose(),this._rightDelay=null,this._rightPreDelay.dispose(),this._rightPreDelay=null,this._writable(["delayTime"]),this.delayTime.dispose(),this.delayTime=null,this},e.default=s.default.PingPongDelay},function(t,e,i){"use strict";i.r(e);var s=i(0);i(12),i(9),i(15);s.default.Phaser=function(){var t=s.default.defaults(arguments,["frequency","octaves","baseFrequency"],s.default.Phaser);s.default.StereoEffect.call(this,t),this._lfoL=new s.default.LFO(t.frequency,0,1),this._lfoR=new s.default.LFO(t.frequency,0,1),this._lfoR.phase=180,this._baseFrequency=t.baseFrequency,this._octaves=t.octaves,this.Q=new s.default.Signal(t.Q,s.default.Type.Positive),this._filtersL=this._makeFilters(t.stages,this._lfoL,this.Q),this._filtersR=this._makeFilters(t.stages,this._lfoR,this.Q),this.frequency=this._lfoL.frequency,this.frequency.value=t.frequency,this.effectSendL.connect(this._filtersL[0]),this.effectSendR.connect(this._filtersR[0]),s.default.connect(this._filtersL[t.stages-1],this.effectReturnL),s.default.connect(this._filtersR[t.stages-1],this.effectReturnR),this._lfoL.frequency.connect(this._lfoR.frequency),this.baseFrequency=t.baseFrequency,this.octaves=t.octaves,this._lfoL.start(),this._lfoR.start(),this._readOnly(["frequency","Q"])},s.default.extend(s.default.Phaser,s.default.StereoEffect),s.default.Phaser.defaults={frequency:.5,octaves:3,stages:10,Q:10,baseFrequency:350},s.default.Phaser.prototype._makeFilters=function(t,e,i){for(var n=new Array(t),o=0;o<t;o++){var a=this.context.createBiquadFilter();a.type="allpass",i.connect(a.Q),e.connect(a.frequency),n[o]=a}return s.default.connectSeries.apply(s.default,n),n},Object.defineProperty(s.default.Phaser.prototype,"octaves",{get:function(){return this._octaves},set:function(t){this._octaves=t;var e=this._baseFrequency*Math.pow(2,t);this._lfoL.max=e,this._lfoR.max=e}}),Object.defineProperty(s.default.Phaser.prototype,"baseFrequency",{get:function(){return this._baseFrequency},set:function(t){this._baseFrequency=t,this._lfoL.min=t,this._lfoR.min=t,this.octaves=this._octaves}}),s.default.Phaser.prototype.dispose=function(){s.default.StereoEffect.prototype.dispose.call(this),this._writable(["frequency","Q"]),this.Q.dispose(),this.Q=null,this._lfoL.dispose(),this._lfoL=null,this._lfoR.dispose(),this._lfoR=null;for(var t=0;t<this._filtersL.length;t++)this._filtersL[t].disconnect(),this._filtersL[t]=null;this._filtersL=null;for(var e=0;e<this._filtersR.length;e++)this._filtersR[e].disconnect(),this._filtersR[e]=null;return this._filtersR=null,this.frequency=null,this},e.default=s.default.Phaser},function(t,e,i){"use strict";i.r(e);var s=i(0),n=(i(59),i(15),i(26),[.06748,.06404,.08212,.09004]),o=[.773,.802,.753,.733],a=[347,113,37];s.default.JCReverb=function(){var t=s.default.defaults(arguments,["roomSize"],s.default.JCReverb);s.default.StereoEffect.call(this,t),this.roomSize=new s.default.Signal(t.roomSize,s.default.Type.NormalRange),this._scaleRoomSize=new s.default.Scale(-.733,.197),this._allpassFilters=[],this._feedbackCombFilters=[];for(var e=0;e<a.length;e++){var i=this.context.createBiquadFilter();i.type="allpass",i.frequency.value=a[e],this._allpassFilters.push(i)}for(var r=0;r<n.length;r++){var l=new s.default.FeedbackCombFilter(n[r],.1);this._scaleRoomSize.connect(l.resonance),l.resonance.value=o[r],s.default.connect(this._allpassFilters[this._allpassFilters.length-1],l),r<n.length/2?l.connect(this.effectReturnL):l.connect(this.effectReturnR),this._feedbackCombFilters.push(l)}this.roomSize.connect(this._scaleRoomSize),s.default.connectSeries.apply(s.default,this._allpassFilters),this.effectSendL.connect(this._allpassFilters[0]),this.effectSendR.connect(this._allpassFilters[0]),this._readOnly(["roomSize"])},s.default.extend(s.default.JCReverb,s.default.StereoEffect),s.default.JCReverb.defaults={roomSize:.5},s.default.JCReverb.prototype.dispose=function(){s.default.StereoEffect.prototype.dispose.call(this);for(var t=0;t<this._allpassFilters.length;t++)this._allpassFilters[t].disconnect(),this._allpassFilters[t]=null;this._allpassFilters=null;for(var e=0;e<this._feedbackCombFilters.length;e++)this._feedbackCombFilters[e].dispose(),this._feedbackCombFilters[e]=null;return this._feedbackCombFilters=null,this._writable(["roomSize"]),this.roomSize.dispose(),this.roomSize=null,this._scaleRoomSize.dispose(),this._scaleRoomSize=null,this},e.default=s.default.JCReverb},function(t,e,i){"use strict";i.r(e);var s=i(0),n=(i(54),i(15),i(2),i(19),i(10),i(42),[1557/44100,1617/44100,1491/44100,1422/44100,1277/44100,1356/44100,1188/44100,1116/44100]),o=[225,556,441,341];s.default.Freeverb=function(){var t=s.default.defaults(arguments,["roomSize","dampening"],s.default.Freeverb);s.default.StereoEffect.call(this,t),this.roomSize=new s.default.Signal(t.roomSize,s.default.Type.NormalRange),this.dampening=new s.default.Signal(t.dampening,s.default.Type.Frequency),this._combFilters=[],this._allpassFiltersL=[],this._allpassFiltersR=[];for(var e=0;e<o.length;e++){var i=this.context.createBiquadFilter();i.type="allpass",i.frequency.value=o[e],this._allpassFiltersL.push(i)}for(var a=0;a<o.length;a++){var r=this.context.createBiquadFilter();r.type="allpass",r.frequency.value=o[a],this._allpassFiltersR.push(r)}for(var l=0;l<n.length;l++){var u=new s.default.LowpassCombFilter(n[l]);l<n.length/2?this.effectSendL.chain(u,this._allpassFiltersL[0]):this.effectSendR.chain(u,this._allpassFiltersR[0]),this.roomSize.connect(u.resonance),this.dampening.connect(u.dampening),this._combFilters.push(u)}s.default.connectSeries.apply(s.default,this._allpassFiltersL),s.default.connectSeries.apply(s.default,this._allpassFiltersR),s.default.connect(this._allpassFiltersL[this._allpassFiltersL.length-1],this.effectReturnL),s.default.connect(this._allpassFiltersR[this._allpassFiltersR.length-1],this.effectReturnR),this._readOnly(["roomSize","dampening"])},s.default.extend(s.default.Freeverb,s.default.StereoEffect),s.default.Freeverb.defaults={roomSize:.7,dampening:3e3},s.default.Freeverb.prototype.dispose=function(){s.default.StereoEffect.prototype.dispose.call(this);for(var t=0;t<this._allpassFiltersL.length;t++)this._allpassFiltersL[t].disconnect(),this._allpassFiltersL[t]=null;this._allpassFiltersL=null;for(var e=0;e<this._allpassFiltersR.length;e++)this._allpassFiltersR[e].disconnect(),this._allpassFiltersR[e]=null;this._allpassFiltersR=null;for(var i=0;i<this._combFilters.length;i++)this._combFilters[i].dispose(),this._combFilters[i]=null;return this._combFilters=null,this._writable(["roomSize","dampening"]),this.roomSize.dispose(),this.roomSize=null,this.dampening.dispose(),this.dampening=null,this},e.default=s.default.Freeverb},function(t,e,i){"use strict";i.r(e);var s=i(0);i(33),i(2),i(18);s.default.FeedbackDelay=function(){var t=s.default.defaults(arguments,["delayTime","feedback"],s.default.FeedbackDelay);s.default.FeedbackEffect.call(this,t),this._delayNode=new s.default.Delay(t.delayTime,t.maxDelay),this.delayTime=this._delayNode.delayTime,this.connectEffect(this._delayNode),this._readOnly(["delayTime"])},s.default.extend(s.default.FeedbackDelay,s.default.FeedbackEffect),s.default.FeedbackDelay.defaults={delayTime:.25,maxDelay:1},s.default.FeedbackDelay.prototype.dispose=function(){return s.default.FeedbackEffect.prototype.dispose.call(this),this._delayNode.dispose(),this._delayNode=null,this._writable(["delayTime"]),this.delayTime=null,this},e.default=s.default.FeedbackDelay},function(t,e,i){"use strict";i.r(e);var s=i(0);i(8),i(7);s.default.Distortion=function(){var t=s.default.defaults(arguments,["distortion"],s.default.Distortion);s.default.Effect.call(this,t),this._shaper=new s.default.WaveShaper(4096),this._distortion=t.distortion,this.connectEffect(this._shaper),this.distortion=t.distortion,this.oversample=t.oversample},s.default.extend(s.default.Distortion,s.default.Effect),s.default.Distortion.defaults={distortion:.4,oversample:"none"},Object.defineProperty(s.default.Distortion.prototype,"distortion",{get:function(){return this._distortion},set:function(t){this._distortion=t;var e=100*t,i=Math.PI/180;this._shaper.setMap(function(t){return Math.abs(t)<.001?0:(3+e)*t*20*i/(Math.PI+e*Math.abs(t))})}}),Object.defineProperty(s.default.Distortion.prototype,"oversample",{get:function(){return this._shaper.oversample},set:function(t){this._shaper.oversample=t}}),s.default.Distortion.prototype.dispose=function(){return s.default.Effect.prototype.dispose.call(this),this._shaper.dispose(),this._shaper=null,this},e.default=s.default.Distortion},function(t,e,i){"use strict";i.r(e);var s=i(0);i(12),i(15),i(18);s.default.Chorus=function(){var t=s.default.defaults(arguments,["frequency","delayTime","depth"],s.default.Chorus);s.default.StereoEffect.call(this,t),this._depth=t.depth,this._delayTime=t.delayTime/1e3,this._lfoL=new s.default.LFO({frequency:t.frequency,min:0,max:1}),this._lfoR=new s.default.LFO({frequency:t.frequency,min:0,max:1,phase:180}),this._delayNodeL=new s.default.Delay,this._delayNodeR=new s.default.Delay,this.frequency=this._lfoL.frequency,this.effectSendL.chain(this._delayNodeL,this.effectReturnL),this.effectSendR.chain(this._delayNodeR,this.effectReturnR),this.effectSendL.connect(this.effectReturnL),this.effectSendR.connect(this.effectReturnR),this._lfoL.connect(this._delayNodeL.delayTime),this._lfoR.connect(this._delayNodeR.delayTime),this._lfoL.start(),this._lfoR.start(),this._lfoL.frequency.connect(this._lfoR.frequency),this.depth=this._depth,this.frequency.value=t.frequency,this.type=t.type,this._readOnly(["frequency"]),this.spread=t.spread},s.default.extend(s.default.Chorus,s.default.StereoEffect),s.default.Chorus.defaults={frequency:1.5,delayTime:3.5,depth:.7,type:"sine",spread:180},Object.defineProperty(s.default.Chorus.prototype,"depth",{get:function(){return this._depth},set:function(t){this._depth=t;var e=this._delayTime*t;this._lfoL.min=Math.max(this._delayTime-e,0),this._lfoL.max=this._delayTime+e,this._lfoR.min=Math.max(this._delayTime-e,0),this._lfoR.max=this._delayTime+e}}),Object.defineProperty(s.default.Chorus.prototype,"delayTime",{get:function(){return 1e3*this._delayTime},set:function(t){this._delayTime=t/1e3,this.depth=this._depth}}),Object.defineProperty(s.default.Chorus.prototype,"type",{get:function(){return this._lfoL.type},set:function(t){this._lfoL.type=t,this._lfoR.type=t}}),Object.defineProperty(s.default.Chorus.prototype,"spread",{get:function(){return this._lfoR.phase-this._lfoL.phase},set:function(t){this._lfoL.phase=90-t/2,this._lfoR.phase=t/2+90}}),s.default.Chorus.prototype.dispose=function(){return s.default.StereoEffect.prototype.dispose.call(this),this._lfoL.dispose(),this._lfoL=null,this._lfoR.dispose(),this._lfoR=null,this._delayNodeL.dispose(),this._delayNodeL=null,this._delayNodeR.dispose(),this._delayNodeR=null,this._writable("frequency"),this.frequency=null,this},e.default=s.default.Chorus},function(t,e,i){"use strict";i.r(e);var s=i(0);i(8),i(7);s.default.Chebyshev=function(){var t=s.default.defaults(arguments,["order"],s.default.Chebyshev);s.default.Effect.call(this,t),this._shaper=new s.default.WaveShaper(4096),this._order=t.order,this.connectEffect(this._shaper),this.order=t.order,this.oversample=t.oversample},s.default.extend(s.default.Chebyshev,s.default.Effect),s.default.Chebyshev.defaults={order:1,oversample:"none"},s.default.Chebyshev.prototype._getCoefficient=function(t,e,i){return i.hasOwnProperty(e)?i[e]:(i[e]=0===e?0:1===e?t:2*t*this._getCoefficient(t,e-1,i)-this._getCoefficient(t,e-2,i),i[e])},Object.defineProperty(s.default.Chebyshev.prototype,"order",{get:function(){return this._order},set:function(t){this._order=t;for(var e=new Array(4096),i=e.length,s=0;s<i;++s){var n=2*s/i-1;e[s]=0===n?0:this._getCoefficient(n,t,{})}this._shaper.curve=e}}),Object.defineProperty(s.default.Chebyshev.prototype,"oversample",{get:function(){return this._shaper.oversample},set:function(t){this._shaper.oversample=t}}),s.default.Chebyshev.prototype.dispose=function(){return s.default.Effect.prototype.dispose.call(this),this._shaper.dispose(),this._shaper=null,this},e.default=s.default.Chebyshev},function(t,e,i){"use strict";i.r(e);var s=i(0);i(8),i(13),i(75);s.default.BitCrusher=function(){var t=s.default.defaults(arguments,["bits"],s.default.BitCrusher);s.default.Effect.call(this,t);var e=1/Math.pow(2,t.bits-1);this._subtract=new s.default.Subtract,this._modulo=new s.default.Modulo(e),this._bits=t.bits,this.effectSend.fan(this._subtract,this._modulo),this._modulo.connect(this._subtract,0,1),this._subtract.connect(this.effectReturn)},s.default.extend(s.default.BitCrusher,s.default.Effect),s.default.BitCrusher.defaults={bits:4},Object.defineProperty(s.default.BitCrusher.prototype,"bits",{get:function(){return this._bits},set:function(t){this._bits=t;var e=1/Math.pow(2,t-1);this._modulo.value=e}}),s.default.BitCrusher.prototype.dispose=function(){return s.default.Effect.prototype.dispose.call(this),this._subtract.dispose(),this._subtract=null,this._modulo.dispose(),this._modulo=null,this},e.default=s.default.BitCrusher},function(t,e,i){"use strict";i.r(e);var s=i(0);i(58),i(42),i(8),i(9);s.default.AutoWah=function(){var t=s.default.defaults(arguments,["baseFrequency","octaves","sensitivity"],s.default.AutoWah);s.default.Effect.call(this,t),this.follower=new s.default.Follower(t.follower),this._sweepRange=new s.default.ScaleExp(0,1,.5),this._baseFrequency=t.baseFrequency,this._octaves=t.octaves,this._inputBoost=new s.default.Gain,this._bandpass=new s.default.Filter({rolloff:-48,frequency:0,Q:t.Q}),this._peaking=new s.default.Filter(0,"peaking"),this._peaking.gain.value=t.gain,this.gain=this._peaking.gain,this.Q=this._bandpass.Q,this.effectSend.chain(this._inputBoost,this.follower,this._sweepRange),this._sweepRange.connect(this._bandpass.frequency),this._sweepRange.connect(this._peaking.frequency),this.effectSend.chain(this._bandpass,this._peaking,this.effectReturn),this._setSweepRange(),this.sensitivity=t.sensitivity,this._readOnly(["gain","Q"])},s.default.extend(s.default.AutoWah,s.default.Effect),s.default.AutoWah.defaults={baseFrequency:100,octaves:6,sensitivity:0,Q:2,gain:2,follower:{attack:.3,release:.5}},Object.defineProperty(s.default.AutoWah.prototype,"octaves",{get:function(){return this._octaves},set:function(t){this._octaves=t,this._setSweepRange()}}),Object.defineProperty(s.default.AutoWah.prototype,"baseFrequency",{get:function(){return this._baseFrequency},set:function(t){this._baseFrequency=t,this._setSweepRange()}}),Object.defineProperty(s.default.AutoWah.prototype,"sensitivity",{get:function(){return s.default.gainToDb(1/this._inputBoost.gain.value)},set:function(t){this._inputBoost.gain.value=1/s.default.dbToGain(t)}}),s.default.AutoWah.prototype._setSweepRange=function(){this._sweepRange.min=this._baseFrequency,this._sweepRange.max=Math.min(this._baseFrequency*Math.pow(2,this._octaves),this.context.sampleRate/2)},s.default.AutoWah.prototype.dispose=function(){return s.default.Effect.prototype.dispose.call(this),this.follower.dispose(),this.follower=null,this._sweepRange.dispose(),this._sweepRange=null,this._bandpass.dispose(),this._bandpass=null,this._peaking.dispose(),this._peaking=null,this._inputBoost.dispose(),this._inputBoost=null,this._writable(["gain","Q"]),this.gain=null,this.Q=null,this},e.default=s.default.AutoWah},function(t,e,i){"use strict";i.r(e);var s=i(0);i(8),i(12),i(48);s.default.AutoPanner=function(){var t=s.default.defaults(arguments,["frequency"],s.default.AutoPanner);s.default.Effect.call(this,t),this._lfo=new s.default.LFO({frequency:t.frequency,amplitude:t.depth,min:-1,max:1}),this.depth=this._lfo.amplitude,this._panner=new s.default.Panner,this.frequency=this._lfo.frequency,this.connectEffect(this._panner),this._lfo.connect(this._panner.pan),this.type=t.type,this._readOnly(["depth","frequency"])},s.default.extend(s.default.AutoPanner,s.default.Effect),s.default.AutoPanner.defaults={frequency:1,type:"sine",depth:1},s.default.AutoPanner.prototype.start=function(t){return this._lfo.start(t),this},s.default.AutoPanner.prototype.stop=function(t){return this._lfo.stop(t),this},s.default.AutoPanner.prototype.sync=function(t){return this._lfo.sync(t),this},s.default.AutoPanner.prototype.unsync=function(){return this._lfo.unsync(),this},Object.defineProperty(s.default.AutoPanner.prototype,"type",{get:function(){return this._lfo.type},set:function(t){this._lfo.type=t}}),s.default.AutoPanner.prototype.dispose=function(){return s.default.Effect.prototype.dispose.call(this),this._lfo.dispose(),this._lfo=null,this._panner.dispose(),this._panner=null,this._writable(["depth","frequency"]),this.frequency=null,this.depth=null,this},e.default=s.default.AutoPanner},function(t,e,i){"use strict";i.r(e);var s=i(0);i(8),i(12),i(9);s.default.AutoFilter=function(){var t=s.default.defaults(arguments,["frequency","baseFrequency","octaves"],s.default.AutoFilter);s.default.Effect.call(this,t),this._lfo=new s.default.LFO({frequency:t.frequency,amplitude:t.depth}),this.depth=this._lfo.amplitude,this.frequency=this._lfo.frequency,this.filter=new s.default.Filter(t.filter),this._octaves=0,this.connectEffect(this.filter),this._lfo.connect(this.filter.frequency),this.type=t.type,this._readOnly(["frequency","depth"]),this.octaves=t.octaves,this.baseFrequency=t.baseFrequency},s.default.extend(s.default.AutoFilter,s.default.Effect),s.default.AutoFilter.defaults={frequency:1,type:"sine",depth:1,baseFrequency:200,octaves:2.6,filter:{type:"lowpass",rolloff:-12,Q:1}},s.default.AutoFilter.prototype.start=function(t){return this._lfo.start(t),this},s.default.AutoFilter.prototype.stop=function(t){return this._lfo.stop(t),this},s.default.AutoFilter.prototype.sync=function(t){return this._lfo.sync(t),this},s.default.AutoFilter.prototype.unsync=function(){return this._lfo.unsync(),this},Object.defineProperty(s.default.AutoFilter.prototype,"type",{get:function(){return this._lfo.type},set:function(t){this._lfo.type=t}}),Object.defineProperty(s.default.AutoFilter.prototype,"baseFrequency",{get:function(){return this._lfo.min},set:function(t){this._lfo.min=this.toFrequency(t),this.octaves=this._octaves}}),Object.defineProperty(s.default.AutoFilter.prototype,"octaves",{get:function(){return this._octaves},set:function(t){this._octaves=t,this._lfo.max=this.baseFrequency*Math.pow(2,t)}}),s.default.AutoFilter.prototype.dispose=function(){return s.default.Effect.prototype.dispose.call(this),this._lfo.dispose(),this._lfo=null,this.filter.dispose(),this.filter=null,this._writable(["frequency","depth"]),this.frequency=null,this.depth=null,this},e.default=s.default.AutoFilter},function(t,e,i){"use strict";i.r(e);var s=i(0);i(23),i(10),i(19),i(2),i(22),i(28);s.default.Listener=function(){s.default.call(this),this._orientation=[0,0,0,0,0,0],this._position=[0,0,0],s.default.getContext(function(){this.set(n.defaults)}.bind(this))},s.default.extend(s.default.Listener),s.default.Listener.defaults={positionX:0,positionY:0,positionZ:0,forwardX:0,forwardY:0,forwardZ:1,upX:0,upY:1,upZ:0},s.default.Listener.prototype.isListener=!0,s.default.Listener.prototype._rampTimeConstant=.01,s.default.Listener.prototype.setPosition=function(t,e,i){if(this.context.rawContext.listener.positionX){var s=this.now();this.context.rawContext.listener.positionX.setTargetAtTime(t,s,this._rampTimeConstant),this.context.rawContext.listener.positionY.setTargetAtTime(e,s,this._rampTimeConstant),this.context.rawContext.listener.positionZ.setTargetAtTime(i,s,this._rampTimeConstant)}else this.context.rawContext.listener.setPosition(t,e,i);return this._position=Array.prototype.slice.call(arguments),this},s.default.Listener.prototype.setOrientation=function(t,e,i,s,n,o){if(this.context.rawContext.listener.forwardX){var a=this.now();this.context.rawContext.listener.forwardX.setTargetAtTime(t,a,this._rampTimeConstant),this.context.rawContext.listener.forwardY.setTargetAtTime(e,a,this._rampTimeConstant),this.context.rawContext.listener.forwardZ.setTargetAtTime(i,a,this._rampTimeConstant),this.context.rawContext.listener.upX.setTargetAtTime(s,a,this._rampTimeConstant),this.context.rawContext.listener.upY.setTargetAtTime(n,a,this._rampTimeConstant),this.context.rawContext.listener.upZ.setTargetAtTime(o,a,this._rampTimeConstant)}else this.context.rawContext.listener.setOrientation(t,e,i,s,n,o);return this._orientation=Array.prototype.slice.call(arguments),this},Object.defineProperty(s.default.Listener.prototype,"positionX",{set:function(t){this._position[0]=t,this.setPosition.apply(this,this._position)},get:function(){return this._position[0]}}),Object.defineProperty(s.default.Listener.prototype,"positionY",{set:function(t){this._position[1]=t,this.setPosition.apply(this,this._position)},get:function(){return this._position[1]}}),Object.defineProperty(s.default.Listener.prototype,"positionZ",{set:function(t){this._position[2]=t,this.setPosition.apply(this,this._position)},get:function(){return this._position[2]}}),Object.defineProperty(s.default.Listener.prototype,"forwardX",{set:function(t){this._orientation[0]=t,this.setOrientation.apply(this,this._orientation)},get:function(){return this._orientation[0]}}),Object.defineProperty(s.default.Listener.prototype,"forwardY",{set:function(t){this._orientation[1]=t,this.setOrientation.apply(this,this._orientation)},get:function(){return this._orientation[1]}}),Object.defineProperty(s.default.Listener.prototype,"forwardZ",{set:function(t){this._orientation[2]=t,this.setOrientation.apply(this,this._orientation)},get:function(){return this._orientation[2]}}),Object.defineProperty(s.default.Listener.prototype,"upX",{set:function(t){this._orientation[3]=t,this.setOrientation.apply(this,this._orientation)},get:function(){return this._orientation[3]}}),Object.defineProperty(s.default.Listener.prototype,"upY",{set:function(t){this._orientation[4]=t,this.setOrientation.apply(this,this._orientation)},get:function(){return this._orientation[4]}}),Object.defineProperty(s.default.Listener.prototype,"upZ",{set:function(t){this._orientation[5]=t,this.setOrientation.apply(this,this._orientation)},get:function(){return this._orientation[5]}}),s.default.Listener.prototype.dispose=function(){return this._orientation=null,this._position=null,this};var n=s.default.Listener;s.default.Listener=new n,s.default.Context.on("init",function(t){t.listener&&t.listener.isListener?s.default.Listener=t.listener:s.default.Listener=new n}),e.default=s.default.Listener},function(t,e,i){"use strict";i.r(e);var s=i(0);i(24);s.default.Draw=function(){s.default.call(this),this._events=new s.default.Timeline,this.expiration=.25,this.anticipation=.008,this._boundDrawLoop=this._drawLoop.bind(this)},s.default.extend(s.default.Draw),s.default.Draw.prototype.schedule=function(t,e){return this._events.add({callback:t,time:this.toSeconds(e)}),1===this._events.length&&requestAnimationFrame(this._boundDrawLoop),this},s.default.Draw.prototype.cancel=function(t){return this._events.cancel(this.toSeconds(t)),this},s.default.Draw.prototype._drawLoop=function(){for(var t=s.default.context.currentTime;this._events.length&&this._events.peek().time-this.anticipation<=t;){var e=this._events.shift();t-e.time<=this.expiration&&e.callback()}this._events.length>0&&requestAnimationFrame(this._boundDrawLoop)},s.default.Draw=new s.default.Draw,e.default=s.default.Draw},function(t,e,i){"use strict";i.r(e);var s=i(0),n=(i(3),{});s.default.prototype.send=function(t,e){n.hasOwnProperty(t)||(n[t]=this.context.createGain()),e=s.default.defaultArg(e,0);var i=new s.default.Gain(e,s.default.Type.Decibels);return this.connect(i),i.connect(n[t]),i},s.default.prototype.receive=function(t,e){return n.hasOwnProperty(t)||(n[t]=this.context.createGain()),s.default.connect(n[t],this,0,e),this},s.default.Context.on("init",function(t){t.buses?n=t.buses:(n={},t.buses=n)}),e.default=s.default},function(t,e,i){"use strict";i.r(e);var s=i(0);i(4);s.default.CtrlRandom=function(){var t=s.default.defaults(arguments,["min","max"],s.default.CtrlRandom);s.default.call(this),this.min=t.min,this.max=t.max,this.integer=t.integer},s.default.extend(s.default.CtrlRandom),s.default.CtrlRandom.defaults={min:0,max:1,integer:!1},Object.defineProperty(s.default.CtrlRandom.prototype,"value",{get:function(){var t=this.toSeconds(this.min),e=this.toSeconds(this.max),i=Math.random(),s=i*t+(1-i)*e;return this.integer&&(s=Math.floor(s)),s}}),e.default=s.default.CtrlRandom},function(t,e,i){"use strict";i.r(e);var s=i(0);s.default.CtrlMarkov=function(t,e){s.default.call(this),this.values=s.default.defaultArg(t,{}),this.value=s.default.defaultArg(e,Object.keys(this.values)[0])},s.default.extend(s.default.CtrlMarkov),s.default.CtrlMarkov.prototype.next=function(){if(this.values.hasOwnProperty(this.value)){var t=this.values[this.value];if(s.default.isArray(t))for(var e=this._getProbDistribution(t),i=Math.random(),n=0,o=0;o<e.length;o++){var a=e[o];if(i>n&&i<n+a){var r=t[o];s.default.isObject(r)?this.value=r.value:this.value=r}n+=a}else this.value=t}return this.value},s.default.CtrlMarkov.prototype._getProbDistribution=function(t){for(var e=[],i=0,n=!1,o=0;o<t.length;o++){var a=t[o];s.default.isObject(a)?(n=!0,e[o]=a.probability):e[o]=1/t.length,i+=e[o]}if(n)for(var r=0;r<e.length;r++)e[r]=e[r]/i;return e},s.default.CtrlMarkov.prototype.dispose=function(){this.values=null},e.default=s.default.CtrlMarkov},function(t,e,i){"use strict";i.r(e);var s=i(0);i(4);s.default.CtrlInterpolate=function(){var t=s.default.defaults(arguments,["values","index"],s.default.CtrlInterpolate);s.default.call(this),this.values=t.values,this.index=t.index},s.default.extend(s.default.CtrlInterpolate),s.default.CtrlInterpolate.defaults={index:0,values:[]},Object.defineProperty(s.default.CtrlInterpolate.prototype,"value",{get:function(){var t=this.index;t=Math.min(t,this.values.length-1);var e=Math.floor(t),i=this.values[e],s=this.values[Math.ceil(t)];return this._interpolate(t-e,i,s)}}),s.default.CtrlInterpolate.prototype._interpolate=function(t,e,i){if(s.default.isArray(e)){for(var n=[],o=0;o<e.length;o++)n[o]=this._interpolate(t,e[o],i[o]);return n}if(s.default.isObject(e)){var a={};for(var r in e)a[r]=this._interpolate(t,e[r],i[r]);return a}return(1-t)*(e=this._toNumber(e))+t*(i=this._toNumber(i))},s.default.CtrlInterpolate.prototype._toNumber=function(t){return s.default.isNumber(t)?t:this.toSeconds(t)},s.default.CtrlInterpolate.prototype.dispose=function(){this.values=null},e.default=s.default.CtrlInterpolate},function(t,e,i){"use strict";i.r(e);var s=i(0);i(36),i(1);s.default.Waveform=function(){var t=s.default.defaults(arguments,["size"],s.default.Waveform);t.type=s.default.Analyser.Type.Waveform,s.default.AudioNode.call(this),this._analyser=this.input=this.output=new s.default.Analyser(t)},s.default.extend(s.default.Waveform,s.default.AudioNode),s.default.Waveform.defaults={size:1024},s.default.Waveform.prototype.getValue=function(){return this._analyser.getValue()},Object.defineProperty(s.default.Waveform.prototype,"size",{get:function(){return this._analyser.size},set:function(t){this._analyser.size=t}}),s.default.Waveform.prototype.dispose=function(){s.default.AudioNode.prototype.dispose.call(this),this._analyser.dispose(),this._analyser=null},e.default=s.default.Waveform},function(t,e,i){"use strict";i.r(e);var s=i(0);i(23),i(10),i(19),i(2),i(22),i(28),i(1);s.default.Panner3D=function(){var t=s.default.defaults(arguments,["positionX","positionY","positionZ"],s.default.Panner3D);s.default.AudioNode.call(this),this._panner=this.input=this.output=this.context.createPanner(),this._panner.panningModel=t.panningModel,this._panner.maxDistance=t.maxDistance,this._panner.distanceModel=t.distanceModel,this._panner.coneOuterGain=t.coneOuterGain,this._panner.coneOuterAngle=t.coneOuterAngle,this._panner.coneInnerAngle=t.coneInnerAngle,this._panner.refDistance=t.refDistance,this._panner.rolloffFactor=t.rolloffFactor,this._orientation=[t.orientationX,t.orientationY,t.orientationZ],this._position=[t.positionX,t.positionY,t.positionZ],this.orientationX=t.orientationX,this.orientationY=t.orientationY,this.orientationZ=t.orientationZ,this.positionX=t.positionX,this.positionY=t.positionY,this.positionZ=t.positionZ},s.default.extend(s.default.Panner3D,s.default.AudioNode),s.default.Panner3D.defaults={positionX:0,positionY:0,positionZ:0,orientationX:0,orientationY:0,orientationZ:0,panningModel:"equalpower",maxDistance:1e4,distanceModel:"inverse",coneOuterGain:0,coneOuterAngle:360,coneInnerAngle:360,refDistance:1,rolloffFactor:1},s.default.Panner3D.prototype._rampTimeConstant=.01,s.default.Panner3D.prototype.setPosition=function(t,e,i){if(this._panner.positionX){var s=this.now();this._panner.positionX.setTargetAtTime(t,s,this._rampTimeConstant),this._panner.positionY.setTargetAtTime(e,s,this._rampTimeConstant),this._panner.positionZ.setTargetAtTime(i,s,this._rampTimeConstant)}else this._panner.setPosition(t,e,i);return this._position=Array.prototype.slice.call(arguments),this},s.default.Panner3D.prototype.setOrientation=function(t,e,i){if(this._panner.orientationX){var s=this.now();this._panner.orientationX.setTargetAtTime(t,s,this._rampTimeConstant),this._panner.orientationY.setTargetAtTime(e,s,this._rampTimeConstant),this._panner.orientationZ.setTargetAtTime(i,s,this._rampTimeConstant)}else this._panner.setOrientation(t,e,i);return this._orientation=Array.prototype.slice.call(arguments),this},Object.defineProperty(s.default.Panner3D.prototype,"positionX",{set:function(t){this._position[0]=t,this.setPosition.apply(this,this._position)},get:function(){return this._position[0]}}),Object.defineProperty(s.default.Panner3D.prototype,"positionY",{set:function(t){this._position[1]=t,this.setPosition.apply(this,this._position)},get:function(){return this._position[1]}}),Object.defineProperty(s.default.Panner3D.prototype,"positionZ",{set:function(t){this._position[2]=t,this.setPosition.apply(this,this._position)},get:function(){return this._position[2]}}),Object.defineProperty(s.default.Panner3D.prototype,"orientationX",{set:function(t){this._orientation[0]=t,this.setOrientation.apply(this,this._orientation)},get:function(){return this._orientation[0]}}),Object.defineProperty(s.default.Panner3D.prototype,"orientationY",{set:function(t){this._orientation[1]=t,this.setOrientation.apply(this,this._orientation)},get:function(){return this._orientation[1]}}),Object.defineProperty(s.default.Panner3D.prototype,"orientationZ",{set:function(t){this._orientation[2]=t,this.setOrientation.apply(this,this._orientation)},get:function(){return this._orientation[2]}}),s.default.Panner3D._aliasProperty=function(t){Object.defineProperty(s.default.Panner3D.prototype,t,{set:function(e){this._panner[t]=e},get:function(){return this._panner[t]}})},s.default.Panner3D._aliasProperty("panningModel"),s.default.Panner3D._aliasProperty("refDistance"),s.default.Panner3D._aliasProperty("rolloffFactor"),s.default.Panner3D._aliasProperty("distanceModel"),s.default.Panner3D._aliasProperty("coneInnerAngle"),s.default.Panner3D._aliasProperty("coneOuterAngle"),s.default.Panner3D._aliasProperty("coneOuterGain"),s.default.Panner3D._aliasProperty("maxDistance"),s.default.Panner3D.prototype.dispose=function(){return s.default.AudioNode.prototype.dispose.call(this),this._panner.disconnect(),this._panner=null,this._orientation=null,this._position=null,this},e.default=s.default.Panner3D},function(t,e,i){"use strict";i.r(e);var s=i(0);i(60),i(43),i(1);s.default.MultibandCompressor=function(t){s.default.AudioNode.call(this),t=s.default.defaultArg(arguments,s.default.MultibandCompressor.defaults),this._splitter=this.input=new s.default.MultibandSplit({lowFrequency:t.lowFrequency,highFrequency:t.highFrequency}),this.lowFrequency=this._splitter.lowFrequency,this.highFrequency=this._splitter.highFrequency,this.output=new s.default.Gain,this.low=new s.default.Compressor(t.low),this.mid=new s.default.Compressor(t.mid),this.high=new s.default.Compressor(t.high),this._splitter.low.chain(this.low,this.output),this._splitter.mid.chain(this.mid,this.output),this._splitter.high.chain(this.high,this.output),this._readOnly(["high","mid","low","highFrequency","lowFrequency"])},s.default.extend(s.default.MultibandCompressor,s.default.AudioNode),s.default.MultibandCompressor.defaults={low:s.default.Compressor.defaults,mid:s.default.Compressor.defaults,high:s.default.Compressor.defaults,lowFrequency:250,highFrequency:2e3},s.default.MultibandCompressor.prototype.dispose=function(){return s.default.AudioNode.prototype.dispose.call(this),this._splitter.dispose(),this._writable(["high","mid","low","highFrequency","lowFrequency"]),this.low.dispose(),this.mid.dispose(),this.high.dispose(),this._splitter=null,this.low=null,this.mid=null,this.high=null,this.lowFrequency=null,this.highFrequency=null,this},e.default=s.default.MultibandCompressor},function(t,e,i){"use strict";i.r(e);var s=i(0);i(10),i(1);s.default.Mono=function(){s.default.AudioNode.call(this),this.createInsOuts(1,0),this._merge=this.output=new s.default.Merge,s.default.connect(this.input,this._merge,0,0),s.default.connect(this.input,this._merge,0,1)},s.default.extend(s.default.Mono,s.default.AudioNode),s.default.Mono.prototype.dispose=function(){return s.default.AudioNode.prototype.dispose.call(this),this._merge.dispose(),this._merge=null,this},e.default=s.default.Mono},function(t,e,i){"use strict";i.r(e);var s=i(0);i(53),i(52),i(43),i(1);s.default.MidSideCompressor=function(t){s.default.AudioNode.call(this),t=s.default.defaultArg(t,s.default.MidSideCompressor.defaults),this._midSideSplit=this.input=new s.default.MidSideSplit,this._midSideMerge=this.output=new s.default.MidSideMerge,this.mid=new s.default.Compressor(t.mid),this.side=new s.default.Compressor(t.side),this._midSideSplit.mid.chain(this.mid,this._midSideMerge.mid),this._midSideSplit.side.chain(this.side,this._midSideMerge.side),this._readOnly(["mid","side"])},s.default.extend(s.default.MidSideCompressor,s.default.AudioNode),s.default.MidSideCompressor.defaults={mid:{ratio:3,threshold:-24,release:.03,attack:.02,knee:16},side:{ratio:6,threshold:-30,release:.25,attack:.03,knee:10}},s.default.MidSideCompressor.prototype.dispose=function(){return s.default.AudioNode.prototype.dispose.call(this),this._writable(["mid","side"]),this.mid.dispose(),this.mid=null,this.side.dispose(),this.side=null,this._midSideSplit.dispose(),this._midSideSplit=null,this._midSideMerge.dispose(),this._midSideMerge=null,this},e.default=s.default.MidSideCompressor},function(t,e,i){"use strict";i.r(e);var s=i(0);i(36),i(1);s.default.Meter=function(){var t=s.default.defaults(arguments,["smoothing"],s.default.Meter);s.default.AudioNode.call(this),this.smoothing=t.smoothing,this._rms=0,this.input=this.output=this._analyser=new s.default.Analyser("waveform",256)},s.default.extend(s.default.Meter,s.default.AudioNode),s.default.Meter.defaults={smoothing:.8},s.default.Meter.prototype.getLevel=function(){for(var t=this._analyser.getValue(),e=0,i=0;i<t.length;i++){var n=t[i];e+=n*n}var o=Math.sqrt(e/t.length);return this._rms=Math.max(o,this._rms*this.smoothing),s.default.gainToDb(this._rms)},s.default.Meter.prototype.getValue=function(){return this._analyser.getValue()[0]},s.default.Meter.prototype.dispose=function(){return s.default.AudioNode.prototype.dispose.call(this),this._analyser.dispose(),this._analyser=null,this},e.default=s.default.Meter},function(t,e,i){"use strict";i.r(e);var s=i(0);i(43),i(1);s.default.Limiter=function(){var t=s.default.defaults(arguments,["threshold"],s.default.Limiter);s.default.AudioNode.call(this),this._compressor=this.input=this.output=new s.default.Compressor({attack:.001,decay:.001,threshold:t.threshold}),this.threshold=this._compressor.threshold,this._readOnly("threshold")},s.default.extend(s.default.Limiter,s.default.AudioNode),s.default.Limiter.defaults={threshold:-12},s.default.Limiter.prototype.dispose=function(){return s.default.AudioNode.prototype.dispose.call(this),this._compressor.dispose(),this._compressor=null,this._writable("threshold"),this.threshold=null,this},e.default=s.default.Limiter},function(t,e,i){"use strict";i.r(e);var s=i(0);i(58),i(85),i(1);s.default.Gate=function(){var t=s.default.defaults(arguments,["threshold","smoothing"],s.default.Gate);s.default.AudioNode.call(this),this.createInsOuts(1,1),this._follower=new s.default.Follower(t.smoothing),this._gt=new s.default.GreaterThan(s.default.dbToGain(t.threshold)),s.default.connect(this.input,this.output),s.default.connectSeries(this.input,this._follower,this._gt,this.output.gain)},s.default.extend(s.default.Gate,s.default.AudioNode),s.default.Gate.defaults={smoothing:.1,threshold:-40},Object.defineProperty(s.default.Gate.prototype,"threshold",{get:function(){return s.default.gainToDb(this._gt.value)},set:function(t){this._gt.value=s.default.dbToGain(t)}}),Object.defineProperty(s.default.Gate.prototype,"smoothing",{get:function(){return this._follower.smoothing},set:function(t){this._follower.smoothing=t}}),s.default.Gate.prototype.dispose=function(){return s.default.AudioNode.prototype.dispose.call(this),this._follower.dispose(),this._gt.dispose(),this._follower=null,this._gt=null,this},e.default=s.default.Gate},function(t,e,i){"use strict";i.r(e);var s=i(0);i(36),i(1);s.default.FFT=function(){var t=s.default.defaults(arguments,["size"],s.default.FFT);t.type=s.default.Analyser.Type.FFT,s.default.AudioNode.call(this),this._analyser=this.input=this.output=new s.default.Analyser(t)},s.default.extend(s.default.FFT,s.default.AudioNode),s.default.FFT.defaults={size:1024},s.default.FFT.prototype.getValue=function(){return this._analyser.getValue()},Object.defineProperty(s.default.FFT.prototype,"size",{get:function(){return this._analyser.size},set:function(t){this._analyser.size=t}}),s.default.FFT.prototype.dispose=function(){s.default.AudioNode.prototype.dispose.call(this),this._analyser.dispose(),this._analyser=null},e.default=s.default.FFT},function(t,e,i){"use strict";i.r(e);var s=i(0);i(60),i(3),i(1);s.default.EQ3=function(){var t=s.default.defaults(arguments,["low","mid","high"],s.default.EQ3);s.default.AudioNode.call(this),this.output=new s.default.Gain,this._multibandSplit=this.input=new s.default.MultibandSplit({lowFrequency:t.lowFrequency,highFrequency:t.highFrequency}),this._lowGain=new s.default.Gain(t.low,s.default.Type.Decibels),this._midGain=new s.default.Gain(t.mid,s.default.Type.Decibels),this._highGain=new s.default.Gain(t.high,s.default.Type.Decibels),this.low=this._lowGain.gain,this.mid=this._midGain.gain,this.high=this._highGain.gain,this.Q=this._multibandSplit.Q,this.lowFrequency=this._multibandSplit.lowFrequency,this.highFrequency=this._multibandSplit.highFrequency,this._multibandSplit.low.chain(this._lowGain,this.output),this._multibandSplit.mid.chain(this._midGain,this.output),this._multibandSplit.high.chain(this._highGain,this.output),this._readOnly(["low","mid","high","lowFrequency","highFrequency"])},s.default.extend(s.default.EQ3,s.default.AudioNode),s.default.EQ3.defaults={low:0,mid:0,high:0,lowFrequency:400,highFrequency:2500},s.default.EQ3.prototype.dispose=function(){return s.default.AudioNode.prototype.dispose.call(this),this._writable(["low","mid","high","lowFrequency","highFrequency"]),this._multibandSplit.dispose(),this._multibandSplit=null,this.lowFrequency=null,this.highFrequency=null,this._lowGain.dispose(),this._lowGain=null,this._midGain.dispose(),this._midGain=null,this._highGain.dispose(),this._highGain=null,this.low=null,this.mid=null,this.high=null,this.Q=null,this},e.default=s.default.EQ3},function(t,e,i){"use strict";i.r(e);var s=i(0);i(91),i(88),i(1);s.default.Channel=function(){var t=s.default.defaults(arguments,["volume","pan"],s.default.PanVol);s.default.AudioNode.call(this,t),this._solo=this.input=new s.default.Solo(t.solo),this._panVol=this.output=new s.default.PanVol({pan:t.pan,volume:t.volume,mute:t.mute}),this.pan=this._panVol.pan,this.volume=this._panVol.volume,this._solo.connect(this._panVol),this._readOnly(["pan","volume"])},s.default.extend(s.default.Channel,s.default.AudioNode),s.default.Channel.defaults={pan:0,volume:0,mute:!1,solo:!1},Object.defineProperty(s.default.Channel.prototype,"solo",{get:function(){return this._solo.solo},set:function(t){this._solo.solo=t}}),Object.defineProperty(s.default.Channel.prototype,"muted",{get:function(){return this._solo.muted||this.mute}}),Object.defineProperty(s.default.Channel.prototype,"mute",{get:function(){return this._panVol.mute},set:function(t){this._panVol.mute=t}}),s.default.Channel.prototype.dispose=function(){return s.default.AudioNode.prototype.dispose.call(this),this._writable(["pan","volume"]),this._panVol.dispose(),this._panVol=null,this.pan=null,this.volume=null,this._solo.dispose(),this._solo=null,this},e.default=s.default.Channel},function(t,e){var i;i=function(){return this}();try{i=i||Function("return this")()||(0,eval)("this")}catch(t){"object"==typeof window&&(i=window)}t.exports=i},function(t,e,i){i(31),i(36),i(146),i(43),i(23),i(47),i(145),i(59),i(144),i(9),i(58),i(41),i(143),i(12),i(142),i(54),i(10),i(141),i(140),i(52),i(53),i(139),i(138),i(60),i(48),i(137),i(91),i(86),i(88),i(19),i(27),i(136),i(135),i(134),i(79),i(133),i(1),i(11),i(78),i(132),i(83),i(20),i(18),i(131),i(35),i(3),i(81),i(130),i(40),i(77),i(76),i(14),i(24),i(34),i(16),i(56),i(80),i(129),i(128),i(127),i(126),i(125),i(124),i(74),i(123),i(8),i(122),i(33),i(121),i(120),i(73),i(119),i(118),i(117),i(116),i(15),i(115),i(114),i(72),i(113),i(112),i(51),i(71),i(70),i(111),i(110),i(109),i(108),i(107),i(21),i(106),i(105),i(25),i(66),i(104),i(103),i(102),i(101),i(38),i(87),i(29),i(22),i(89),i(100),i(85),i(84),i(75),i(5),i(90),i(99),i(61),i(26),i(42),i(2),i(30),i(13),i(82),i(98),i(7),i(28),i(68),i(32),i(67),i(49),i(97),i(39),i(37),i(17),i(64),i(65),i(96),i(50),i(69),i(6),i(57),i(95),i(46),i(94),i(55),i(63),i(62),i(45),i(4),t.exports=i(0).default}])});
//# sourceMappingURL=Tone.js.map

/***/ }),

/***/ "./node_modules/util-deprecate/browser.js":
/*!************************************************!*\
  !*** ./node_modules/util-deprecate/browser.js ***!
  \************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

/* WEBPACK VAR INJECTION */(function(global) {
/**
 * Module exports.
 */

module.exports = deprecate;

/**
 * Mark that a method should not be used.
 * Returns a modified function which warns once by default.
 *
 * If `localStorage.noDeprecation = true` is set, then it is a no-op.
 *
 * If `localStorage.throwDeprecation = true` is set, then deprecated functions
 * will throw an Error when invoked.
 *
 * If `localStorage.traceDeprecation = true` is set, then deprecated functions
 * will invoke `console.trace()` instead of `console.error()`.
 *
 * @param {Function} fn - the function to deprecate
 * @param {String} msg - the string to print to the console when `fn` is invoked
 * @returns {Function} a new "deprecated" version of `fn`
 * @api public
 */

function deprecate (fn, msg) {
  if (config('noDeprecation')) {
    return fn;
  }

  var warned = false;
  function deprecated() {
    if (!warned) {
      if (config('throwDeprecation')) {
        throw new Error(msg);
      } else if (config('traceDeprecation')) {
        console.trace(msg);
      } else {
        console.warn(msg);
      }
      warned = true;
    }
    return fn.apply(this, arguments);
  }

  return deprecated;
}

/**
 * Checks `localStorage` for boolean values for the given `name`.
 *
 * @param {String} name
 * @returns {Boolean}
 * @api private
 */

function config (name) {
  // accessing global.localStorage can trigger a DOMException in sandboxed iframes
  try {
    if (!global.localStorage) return false;
  } catch (_) {
    return false;
  }
  var val = global.localStorage[name];
  if (null == val) return false;
  return String(val).toLowerCase() === 'true';
}

/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__(/*! ./../webpack/buildin/global.js */ "./node_modules/webpack/buildin/global.js")))

/***/ }),

/***/ "./node_modules/webmidi/webmidi.min.js":
/*!*********************************************!*\
  !*** ./node_modules/webmidi/webmidi.min.js ***!
  \*********************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

var __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;/*

WebMidi v2.5.1

WebMidi.js helps you tame the Web MIDI API. Send and receive MIDI messages with ease. Control instruments with user-friendly functions (playNote, sendPitchBend, etc.). React to MIDI input with simple event listeners (noteon, pitchbend, controlchange, etc.).
https://github.com/djipco/webmidi


The MIT License (MIT)

Copyright (c) 2015-2019, Jean-Philippe Ct

Permission is hereby granted, free of charge, to any person obtaining a copy of this software and
associated documentation files (the "Software"), to deal in the Software without restriction,
including without limitation the rights to use, copy, modify, merge, publish, distribute,
sublicense, and/or sell copies of the Software, and to permit persons to whom the Software is
furnished to do so, subject to the following conditions:

The above copyright notice and this permission notice shall be included in all copies or substantial
portions of the Software.

THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT
NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES
OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN
CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.

*/


!function(scope){"use strict";function WebMidi(){if(WebMidi.prototype._singleton)throw new Error("WebMidi is a singleton, it cannot be instantiated directly.");(WebMidi.prototype._singleton=this)._inputs=[],this._outputs=[],this._userHandlers={},this._stateChangeQueue=[],this._processingStateChange=!1,this._midiInterfaceEvents=["connected","disconnected"],this._nrpnBuffer=[[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[]],this._nrpnEventsEnabled=!0,this._nrpnTypes=["entry","increment","decrement"],this._notes=["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"],this._semitones={C:0,D:2,E:4,F:5,G:7,A:9,B:11},Object.defineProperties(this,{MIDI_SYSTEM_MESSAGES:{value:{sysex:240,timecode:241,songposition:242,songselect:243,tuningrequest:246,sysexend:247,clock:248,start:250,continue:251,stop:252,activesensing:254,reset:255,midimessage:0,unknownsystemmessage:-1},writable:!1,enumerable:!0,configurable:!1},MIDI_CHANNEL_MESSAGES:{value:{noteoff:8,noteon:9,keyaftertouch:10,controlchange:11,channelmode:11,nrpn:11,programchange:12,channelaftertouch:13,pitchbend:14},writable:!1,enumerable:!0,configurable:!1},MIDI_REGISTERED_PARAMETER:{value:{pitchbendrange:[0,0],channelfinetuning:[0,1],channelcoarsetuning:[0,2],tuningprogram:[0,3],tuningbank:[0,4],modulationrange:[0,5],azimuthangle:[61,0],elevationangle:[61,1],gain:[61,2],distanceratio:[61,3],maximumdistance:[61,4],maximumdistancegain:[61,5],referencedistanceratio:[61,6],panspreadangle:[61,7],rollangle:[61,8]},writable:!1,enumerable:!0,configurable:!1},MIDI_CONTROL_CHANGE_MESSAGES:{value:{bankselectcoarse:0,modulationwheelcoarse:1,breathcontrollercoarse:2,footcontrollercoarse:4,portamentotimecoarse:5,dataentrycoarse:6,volumecoarse:7,balancecoarse:8,pancoarse:10,expressioncoarse:11,effectcontrol1coarse:12,effectcontrol2coarse:13,generalpurposeslider1:16,generalpurposeslider2:17,generalpurposeslider3:18,generalpurposeslider4:19,bankselectfine:32,modulationwheelfine:33,breathcontrollerfine:34,footcontrollerfine:36,portamentotimefine:37,dataentryfine:38,volumefine:39,balancefine:40,panfine:42,expressionfine:43,effectcontrol1fine:44,effectcontrol2fine:45,holdpedal:64,portamento:65,sustenutopedal:66,softpedal:67,legatopedal:68,hold2pedal:69,soundvariation:70,resonance:71,soundreleasetime:72,soundattacktime:73,brightness:74,soundcontrol6:75,soundcontrol7:76,soundcontrol8:77,soundcontrol9:78,soundcontrol10:79,generalpurposebutton1:80,generalpurposebutton2:81,generalpurposebutton3:82,generalpurposebutton4:83,reverblevel:91,tremololevel:92,choruslevel:93,celestelevel:94,phaserlevel:95,databuttonincrement:96,databuttondecrement:97,nonregisteredparametercoarse:98,nonregisteredparameterfine:99,registeredparametercoarse:100,registeredparameterfine:101},writable:!1,enumerable:!0,configurable:!1},MIDI_NRPN_MESSAGES:{value:{entrymsb:6,entrylsb:38,increment:96,decrement:97,paramlsb:98,parammsb:99,nullactiveparameter:127},writable:!1,enumerable:!0,configurable:!1},MIDI_CHANNEL_MODE_MESSAGES:{value:{allsoundoff:120,resetallcontrollers:121,localcontrol:122,allnotesoff:123,omnimodeoff:124,omnimodeon:125,monomodeon:126,polymodeon:127},writable:!1,enumerable:!0,configurable:!1},octaveOffset:{value:0,writable:!0,enumerable:!0,configurable:!1}}),Object.defineProperties(this,{supported:{enumerable:!0,get:function(){return"requestMIDIAccess"in navigator}},enabled:{enumerable:!0,get:function(){return void 0!==this.interface}.bind(this)},inputs:{enumerable:!0,get:function(){return this._inputs}.bind(this)},outputs:{enumerable:!0,get:function(){return this._outputs}.bind(this)},sysexEnabled:{enumerable:!0,get:function(){return!(!this.interface||!this.interface.sysexEnabled)}.bind(this)},nrpnEventsEnabled:{enumerable:!0,get:function(){return!!this._nrpnEventsEnabled}.bind(this),set:function(enabled){return this._nrpnEventsEnabled=enabled,this._nrpnEventsEnabled}},nrpnTypes:{enumerable:!0,get:function(){return this._nrpnTypes}.bind(this)},time:{enumerable:!0,get:function(){return performance.now()}}})}var wm=new WebMidi;function Input(midiInput){var that=this;this._userHandlers={channel:{},system:{}},this._midiInput=midiInput,Object.defineProperties(this,{connection:{enumerable:!0,get:function(){return that._midiInput.connection}},id:{enumerable:!0,get:function(){return that._midiInput.id}},manufacturer:{enumerable:!0,get:function(){return that._midiInput.manufacturer}},name:{enumerable:!0,get:function(){return that._midiInput.name}},state:{enumerable:!0,get:function(){return that._midiInput.state}},type:{enumerable:!0,get:function(){return that._midiInput.type}}}),this._initializeUserHandlers(),this._midiInput.onmidimessage=this._onMidiMessage.bind(this)}function Output(midiOutput){var that=this;this._midiOutput=midiOutput,Object.defineProperties(this,{connection:{enumerable:!0,get:function(){return that._midiOutput.connection}},id:{enumerable:!0,get:function(){return that._midiOutput.id}},manufacturer:{enumerable:!0,get:function(){return that._midiOutput.manufacturer}},name:{enumerable:!0,get:function(){return that._midiOutput.name}},state:{enumerable:!0,get:function(){return that._midiOutput.state}},type:{enumerable:!0,get:function(){return that._midiOutput.type}}})}WebMidi.prototype.enable=function(callback,sysex){this.enabled||(this.supported?navigator.requestMIDIAccess({sysex:sysex}).then(function(midiAccess){var promiseTimeout,events=[],promises=[];this.interface=midiAccess,this._resetInterfaceUserHandlers(),this.interface.onstatechange=function(e){events.push(e)};for(var inputs=midiAccess.inputs.values(),input=inputs.next();input&&!input.done;input=inputs.next())promises.push(input.value.open());for(var outputs=midiAccess.outputs.values(),output=outputs.next();output&&!output.done;output=outputs.next())promises.push(output.value.open());function onPortsOpen(){clearTimeout(promiseTimeout),this._updateInputsAndOutputs(),this.interface.onstatechange=this._onInterfaceStateChange.bind(this),"function"==typeof callback&&callback.call(this),events.forEach(function(event){this._onInterfaceStateChange(event)}.bind(this))}promiseTimeout=setTimeout(onPortsOpen.bind(this),200),Promise&&Promise.all(promises).catch(function(err){}).then(onPortsOpen.bind(this))}.bind(this),function(err){"function"==typeof callback&&callback.call(this,err)}.bind(this)):"function"==typeof callback&&callback(new Error("The Web MIDI API is not supported by your browser.")))},WebMidi.prototype.disable=function(){if(!this.supported)throw new Error("The Web MIDI API is not supported by your browser.");this.interface&&(this.interface.onstatechange=void 0),this.interface=void 0,this._inputs=[],this._outputs=[],this._nrpnEventsEnabled=!0,this._resetInterfaceUserHandlers()},WebMidi.prototype.addListener=function(type,listener){if(!this.enabled)throw new Error("WebMidi must be enabled before adding event listeners.");if("function"!=typeof listener)throw new TypeError("The 'listener' parameter must be a function.");if(!(0<=this._midiInterfaceEvents.indexOf(type)))throw new TypeError("The specified event type is not supported.");return this._userHandlers[type].push(listener),this},WebMidi.prototype.hasListener=function(type,listener){if(!this.enabled)throw new Error("WebMidi must be enabled before checking event listeners.");if("function"!=typeof listener)throw new TypeError("The 'listener' parameter must be a function.");if(!(0<=this._midiInterfaceEvents.indexOf(type)))throw new TypeError("The specified event type is not supported.");for(var o=0;o<this._userHandlers[type].length;o++)if(this._userHandlers[type][o]===listener)return!0;return!1},WebMidi.prototype.removeListener=function(type,listener){if(!this.enabled)throw new Error("WebMidi must be enabled before removing event listeners.");if(void 0!==listener&&"function"!=typeof listener)throw new TypeError("The 'listener' parameter must be a function.");if(0<=this._midiInterfaceEvents.indexOf(type))if(listener)for(var o=0;o<this._userHandlers[type].length;o++)this._userHandlers[type][o]===listener&&this._userHandlers[type].splice(o,1);else this._userHandlers[type]=[];else{if(void 0!==type)throw new TypeError("The specified event type is not supported.");this._resetInterfaceUserHandlers()}return this},WebMidi.prototype.toMIDIChannels=function(channel){var channels;if("all"===channel||void 0===channel)channels=["all"];else{if("none"===channel)return channels=[];channels=Array.isArray(channel)?channel:[channel]}return-1<channels.indexOf("all")&&(channels=[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16]),channels.map(function(ch){return parseInt(ch)}).filter(function(ch){return 1<=ch&&ch<=16})},WebMidi.prototype.getInputById=function(id){if(!this.enabled)throw new Error("WebMidi is not enabled.");id=String(id);for(var i=0;i<this.inputs.length;i++)if(this.inputs[i].id===id)return this.inputs[i];return!1},WebMidi.prototype.getOutputById=function(id){if(!this.enabled)throw new Error("WebMidi is not enabled.");id=String(id);for(var i=0;i<this.outputs.length;i++)if(this.outputs[i].id===id)return this.outputs[i];return!1},WebMidi.prototype.getInputByName=function(name){if(!this.enabled)throw new Error("WebMidi is not enabled.");for(var i=0;i<this.inputs.length;i++)if(~this.inputs[i].name.indexOf(name))return this.inputs[i];return!1},WebMidi.prototype.getOctave=function(number){if(null!=number&&0<=number&&number<=127)return Math.floor(Math.floor(number)/12-1)+Math.floor(wm.octaveOffset)},WebMidi.prototype.getOutputByName=function(name){if(!this.enabled)throw new Error("WebMidi is not enabled.");for(var i=0;i<this.outputs.length;i++)if(~this.outputs[i].name.indexOf(name))return this.outputs[i];return!1},WebMidi.prototype.guessNoteNumber=function(input){var output=!1;if(input&&input.toFixed&&0<=input&&input<=127?output=Math.round(input):0<=parseInt(input)&&parseInt(input)<=127?output=parseInt(input):("string"==typeof input||input instanceof String)&&(output=this.noteNameToNumber(input)),!1===output)throw new Error("Invalid input value ("+input+").");return output},WebMidi.prototype.noteNameToNumber=function(name){"string"!=typeof name&&(name="");var matches=name.match(/([CDEFGAB])(#{0,2}|b{0,2})(-?\d+)/i);if(!matches)throw new RangeError("Invalid note name.");var semitones=wm._semitones[matches[1].toUpperCase()],result=12*(parseInt(matches[3])+1-Math.floor(wm.octaveOffset))+semitones;if(-1<matches[2].toLowerCase().indexOf("b")?result-=matches[2].length:-1<matches[2].toLowerCase().indexOf("#")&&(result+=matches[2].length),result<0||127<result)throw new RangeError("Invalid note name or note outside valid range.");return result},WebMidi.prototype._updateInputsAndOutputs=function(){this._updateInputs(),this._updateOutputs()},WebMidi.prototype._updateInputs=function(){for(var i=0;i<this._inputs.length;i++){for(var remove=!0,updated=this.interface.inputs.values(),input=updated.next();input&&!input.done;input=updated.next())if(this._inputs[i]._midiInput===input.value){remove=!1;break}remove&&this._inputs.splice(i,1)}this.interface&&this.interface.inputs.forEach(function(nInput){for(var add=!0,j=0;j<this._inputs.length;j++)this._inputs[j]._midiInput===nInput&&(add=!1);add&&this._inputs.push(new Input(nInput))}.bind(this))},WebMidi.prototype._updateOutputs=function(){for(var i=0;i<this._outputs.length;i++){for(var remove=!0,updated=this.interface.outputs.values(),output=updated.next();output&&!output.done;output=updated.next())if(this._outputs[i]._midiOutput===output.value){remove=!1;break}remove&&this._outputs.splice(i,1)}this.interface&&this.interface.outputs.forEach(function(nOutput){for(var add=!0,j=0;j<this._outputs.length;j++)this._outputs[j]._midiOutput===nOutput&&(add=!1);add&&this._outputs.push(new Output(nOutput))}.bind(this))},WebMidi.prototype._onInterfaceStateChange=function(e){this._updateInputsAndOutputs();var event={timestamp:e.timeStamp,type:e.port.state};this.interface&&"connected"===e.port.state?"output"===e.port.type?event.port=this.getOutputById(e.port.id):"input"===e.port.type&&(event.port=this.getInputById(e.port.id)):event.port={connection:"closed",id:e.port.id,manufacturer:e.port.manufacturer,name:e.port.name,state:e.port.state,type:e.port.type},this._userHandlers[e.port.state].forEach(function(handler){handler(event)})},WebMidi.prototype._resetInterfaceUserHandlers=function(){for(var i=0;i<this._midiInterfaceEvents.length;i++)this._userHandlers[this._midiInterfaceEvents[i]]=[]},Input.prototype.on=Input.prototype.addListener=function(type,channel,listener){var that=this;if(void 0===channel&&(channel="all"),Array.isArray(channel)||(channel=[channel]),channel.forEach(function(item){if("all"!==item&&!(1<=item&&item<=16))throw new RangeError("The 'channel' parameter is invalid.")}),"function"!=typeof listener)throw new TypeError("The 'listener' parameter must be a function.");if(void 0!==wm.MIDI_SYSTEM_MESSAGES[type])this._userHandlers.system[type]||(this._userHandlers.system[type]=[]),this._userHandlers.system[type].push(listener);else{if(void 0===wm.MIDI_CHANNEL_MESSAGES[type])throw new TypeError("The specified event type is not supported.");if(-1<channel.indexOf("all")){channel=[];for(var j=1;j<=16;j++)channel.push(j)}this._userHandlers.channel[type]||(this._userHandlers.channel[type]=[]),channel.forEach(function(ch){that._userHandlers.channel[type][ch]||(that._userHandlers.channel[type][ch]=[]),that._userHandlers.channel[type][ch].push(listener)})}return this},Input.prototype.hasListener=function(type,channel,listener){var that=this;if("function"!=typeof listener)throw new TypeError("The 'listener' parameter must be a function.");if(void 0===channel&&(channel="all"),channel.constructor!==Array&&(channel=[channel]),void 0!==wm.MIDI_SYSTEM_MESSAGES[type]){for(var o=0;o<this._userHandlers.system[type].length;o++)if(this._userHandlers.system[type][o]===listener)return!0}else if(void 0!==wm.MIDI_CHANNEL_MESSAGES[type]){if(-1<channel.indexOf("all")){channel=[];for(var j=1;j<=16;j++)channel.push(j)}return!!this._userHandlers.channel[type]&&channel.every(function(chNum){var listeners=that._userHandlers.channel[type][chNum];return listeners&&-1<listeners.indexOf(listener)})}return!1},Input.prototype.removeListener=function(type,channel,listener){var that=this;if(void 0!==listener&&"function"!=typeof listener)throw new TypeError("The 'listener' parameter must be a function.");if(void 0===channel&&(channel="all"),channel.constructor!==Array&&(channel=[channel]),void 0!==wm.MIDI_SYSTEM_MESSAGES[type])if(void 0===listener)this._userHandlers.system[type]=[];else for(var o=0;o<this._userHandlers.system[type].length;o++)this._userHandlers.system[type][o]===listener&&this._userHandlers.system[type].splice(o,1);else if(void 0!==wm.MIDI_CHANNEL_MESSAGES[type]){if(-1<channel.indexOf("all")){channel=[];for(var j=1;j<=16;j++)channel.push(j)}if(!this._userHandlers.channel[type])return this;channel.forEach(function(chNum){var listeners=that._userHandlers.channel[type][chNum];if(listeners)if(void 0===listener)that._userHandlers.channel[type][chNum]=[];else for(var l=0;l<listeners.length;l++)listeners[l]===listener&&listeners.splice(l,1)})}else{if(void 0!==type)throw new TypeError("The specified event type is not supported.");this._initializeUserHandlers()}return this},Input.prototype._initializeUserHandlers=function(){for(var prop1 in wm.MIDI_CHANNEL_MESSAGES)wm.MIDI_CHANNEL_MESSAGES.hasOwnProperty(prop1)&&(this._userHandlers.channel[prop1]={});for(var prop2 in wm.MIDI_SYSTEM_MESSAGES)wm.MIDI_SYSTEM_MESSAGES.hasOwnProperty(prop2)&&(this._userHandlers.system[prop2]=[])},Input.prototype._onMidiMessage=function(e){if(0<this._userHandlers.system.midimessage.length){var event={target:this,data:e.data,timestamp:e.timeStamp,type:"midimessage"};this._userHandlers.system.midimessage.forEach(function(callback){callback(event)})}e.data[0]<240?(this._parseChannelEvent(e),this._parseNrpnEvent(e)):e.data[0]<=255&&this._parseSystemEvent(e)},Input.prototype._parseNrpnEvent=function(e){var data1,data2,command=e.data[0]>>4,channelBufferIndex=15&e.data[0],channel=1+channelBufferIndex;if(1<e.data.length&&(data1=e.data[1],data2=2<e.data.length?e.data[2]:void 0),wm.nrpnEventsEnabled&&command===wm.MIDI_CHANNEL_MESSAGES.controlchange&&(data1>=wm.MIDI_NRPN_MESSAGES.increment&&data1<=wm.MIDI_NRPN_MESSAGES.parammsb||data1===wm.MIDI_NRPN_MESSAGES.entrymsb||data1===wm.MIDI_NRPN_MESSAGES.entrylsb)){var ccEvent={target:this,type:"controlchange",data:e.data,timestamp:e.timeStamp,channel:channel,controller:{number:data1,name:this.getCcNameByNumber(data1)},value:data2};if(ccEvent.controller.number===wm.MIDI_NRPN_MESSAGES.parammsb&&ccEvent.value!=wm.MIDI_NRPN_MESSAGES.nullactiveparameter)wm._nrpnBuffer[channelBufferIndex]=[],wm._nrpnBuffer[channelBufferIndex][0]=ccEvent;else if(1===wm._nrpnBuffer[channelBufferIndex].length&&ccEvent.controller.number===wm.MIDI_NRPN_MESSAGES.paramlsb)wm._nrpnBuffer[channelBufferIndex].push(ccEvent);else if(2!==wm._nrpnBuffer[channelBufferIndex].length||ccEvent.controller.number!==wm.MIDI_NRPN_MESSAGES.increment&&ccEvent.controller.number!==wm.MIDI_NRPN_MESSAGES.decrement&&ccEvent.controller.number!==wm.MIDI_NRPN_MESSAGES.entrymsb)if(3===wm._nrpnBuffer[channelBufferIndex].length&&wm._nrpnBuffer[channelBufferIndex][2].number===wm.MIDI_NRPN_MESSAGES.entrymsb&&ccEvent.controller.number===wm.MIDI_NRPN_MESSAGES.entrylsb)wm._nrpnBuffer[channelBufferIndex].push(ccEvent);else if(3<=wm._nrpnBuffer[channelBufferIndex].length&&wm._nrpnBuffer[channelBufferIndex].length<=4&&ccEvent.controller.number===wm.MIDI_NRPN_MESSAGES.parammsb&&ccEvent.value===wm.MIDI_NRPN_MESSAGES.nullactiveparameter)wm._nrpnBuffer[channelBufferIndex].push(ccEvent);else if(4<=wm._nrpnBuffer[channelBufferIndex].length&&wm._nrpnBuffer[channelBufferIndex].length<=5&&ccEvent.controller.number===wm.MIDI_NRPN_MESSAGES.paramlsb&&ccEvent.value===wm.MIDI_NRPN_MESSAGES.nullactiveparameter){wm._nrpnBuffer[channelBufferIndex].push(ccEvent);var rawData=[];wm._nrpnBuffer[channelBufferIndex].forEach(function(ev){rawData.push(ev.data)});var nrpnNumber=wm._nrpnBuffer[channelBufferIndex][0].value<<7|wm._nrpnBuffer[channelBufferIndex][1].value,nrpnValue=wm._nrpnBuffer[channelBufferIndex][2].value;6===wm._nrpnBuffer[channelBufferIndex].length&&(nrpnValue=wm._nrpnBuffer[channelBufferIndex][2].value<<7|wm._nrpnBuffer[channelBufferIndex][3].value);var nrpnControllerType="";switch(wm._nrpnBuffer[channelBufferIndex][2].controller.number){case wm.MIDI_NRPN_MESSAGES.entrymsb:nrpnControllerType=wm._nrpnTypes[0];break;case wm.MIDI_NRPN_MESSAGES.increment:nrpnControllerType=wm._nrpnTypes[1];break;case wm.MIDI_NRPN_MESSAGES.decrement:nrpnControllerType=wm._nrpnTypes[2];break;default:throw new Error("The NPRN type was unidentifiable.")}var nrpnEvent={timestamp:ccEvent.timestamp,channel:ccEvent.channel,type:"nrpn",data:rawData,controller:{number:nrpnNumber,type:nrpnControllerType,name:"Non-Registered Parameter "+nrpnNumber},value:nrpnValue};wm._nrpnBuffer[channelBufferIndex]=[],this._userHandlers.channel[nrpnEvent.type]&&this._userHandlers.channel[nrpnEvent.type][nrpnEvent.channel]&&this._userHandlers.channel[nrpnEvent.type][nrpnEvent.channel].forEach(function(callback){callback(nrpnEvent)})}else wm._nrpnBuffer[channelBufferIndex]=[];else wm._nrpnBuffer[channelBufferIndex].push(ccEvent)}},Input.prototype._parseChannelEvent=function(e){var data1,data2,command=e.data[0]>>4,channel=1+(15&e.data[0]);1<e.data.length&&(data1=e.data[1],data2=2<e.data.length?e.data[2]:void 0);var event={target:this,data:e.data,timestamp:e.timeStamp,channel:channel};command===wm.MIDI_CHANNEL_MESSAGES.noteoff||command===wm.MIDI_CHANNEL_MESSAGES.noteon&&0===data2?(event.type="noteoff",event.note={number:data1,name:wm._notes[data1%12],octave:wm.getOctave(data1)},event.velocity=data2/127,event.rawVelocity=data2):command===wm.MIDI_CHANNEL_MESSAGES.noteon?(event.type="noteon",event.note={number:data1,name:wm._notes[data1%12],octave:wm.getOctave(data1)},event.velocity=data2/127,event.rawVelocity=data2):command===wm.MIDI_CHANNEL_MESSAGES.keyaftertouch?(event.type="keyaftertouch",event.note={number:data1,name:wm._notes[data1%12],octave:wm.getOctave(data1)},event.value=data2/127):command===wm.MIDI_CHANNEL_MESSAGES.controlchange&&0<=data1&&data1<=119?(event.type="controlchange",event.controller={number:data1,name:this.getCcNameByNumber(data1)},event.value=data2):command===wm.MIDI_CHANNEL_MESSAGES.channelmode&&120<=data1&&data1<=127?(event.type="channelmode",event.controller={number:data1,name:this.getChannelModeByNumber(data1)},event.value=data2):command===wm.MIDI_CHANNEL_MESSAGES.programchange?(event.type="programchange",event.value=data1):command===wm.MIDI_CHANNEL_MESSAGES.channelaftertouch?(event.type="channelaftertouch",event.value=data1/127):command===wm.MIDI_CHANNEL_MESSAGES.pitchbend?(event.type="pitchbend",event.value=((data2<<7)+data1-8192)/8192):event.type="unknownchannelmessage",this._userHandlers.channel[event.type]&&this._userHandlers.channel[event.type][channel]&&this._userHandlers.channel[event.type][channel].forEach(function(callback){callback(event)})},Input.prototype.getCcNameByNumber=function(number){if(!(0<=(number=Math.floor(number))&&number<=119))throw new RangeError("The control change number must be between 0 and 119.");for(var cc in wm.MIDI_CONTROL_CHANGE_MESSAGES)if(wm.MIDI_CONTROL_CHANGE_MESSAGES.hasOwnProperty(cc)&&number===wm.MIDI_CONTROL_CHANGE_MESSAGES[cc])return cc},Input.prototype.getChannelModeByNumber=function(number){if(!(120<=(number=Math.floor(number))&&status<=127))throw new RangeError("The control change number must be between 120 and 127.");for(var cm in wm.MIDI_CHANNEL_MODE_MESSAGES)if(wm.MIDI_CHANNEL_MODE_MESSAGES.hasOwnProperty(cm)&&number===wm.MIDI_CHANNEL_MODE_MESSAGES[cm])return cm},Input.prototype._parseSystemEvent=function(e){var command=e.data[0],event={target:this,data:e.data,timestamp:e.timeStamp};command===wm.MIDI_SYSTEM_MESSAGES.sysex?event.type="sysex":command===wm.MIDI_SYSTEM_MESSAGES.timecode?event.type="timecode":command===wm.MIDI_SYSTEM_MESSAGES.songposition?event.type="songposition":command===wm.MIDI_SYSTEM_MESSAGES.songselect?(event.type="songselect",event.song=e.data[1]):command===wm.MIDI_SYSTEM_MESSAGES.tuningrequest?event.type="tuningrequest":command===wm.MIDI_SYSTEM_MESSAGES.clock?event.type="clock":command===wm.MIDI_SYSTEM_MESSAGES.start?event.type="start":command===wm.MIDI_SYSTEM_MESSAGES.continue?event.type="continue":command===wm.MIDI_SYSTEM_MESSAGES.stop?event.type="stop":command===wm.MIDI_SYSTEM_MESSAGES.activesensing?event.type="activesensing":command===wm.MIDI_SYSTEM_MESSAGES.reset?event.type="reset":event.type="unknownsystemmessage",this._userHandlers.system[event.type]&&this._userHandlers.system[event.type].forEach(function(callback){callback(event)})},Output.prototype.send=function(status,data,timestamp){if(!(128<=status&&status<=255))throw new RangeError("The status byte must be an integer between 128 (0x80) and 255 (0xFF).");void 0===data&&(data=[]),Array.isArray(data)||(data=[data]);var message=[];return data.forEach(function(item){var parsed=Math.floor(item);if(!(0<=parsed&&parsed<=255))throw new RangeError("Data bytes must be integers between 0 (0x00) and 255 (0xFF).");message.push(parsed)}),this._midiOutput.send([status].concat(message),parseFloat(timestamp)||0),this},Output.prototype.sendSysex=function(manufacturer,data,options){if(!wm.sysexEnabled)throw new Error("Sysex message support must first be activated.");return options=options||{},manufacturer=[].concat(manufacturer),data.forEach(function(item){if(item<0||127<item)throw new RangeError("The data bytes of a sysex message must be integers between 0 (0x00) and 127 (0x7F).")}),data=manufacturer.concat(data,wm.MIDI_SYSTEM_MESSAGES.sysexend),this.send(wm.MIDI_SYSTEM_MESSAGES.sysex,data,this._parseTimeParameter(options.time)),this},Output.prototype.sendTimecodeQuarterFrame=function(value,options){return options=options||{},this.send(wm.MIDI_SYSTEM_MESSAGES.timecode,value,this._parseTimeParameter(options.time)),this},Output.prototype.sendSongPosition=function(value,options){options=options||{};var msb=(value=Math.floor(value)||0)>>7&127,lsb=127&value;return this.send(wm.MIDI_SYSTEM_MESSAGES.songposition,[msb,lsb],this._parseTimeParameter(options.time)),this},Output.prototype.sendSongSelect=function(value,options){if(options=options||{},!(0<=(value=Math.floor(value))&&value<=127))throw new RangeError("The song number must be between 0 and 127.");return this.send(wm.MIDI_SYSTEM_MESSAGES.songselect,[value],this._parseTimeParameter(options.time)),this},Output.prototype.sendTuningRequest=function(options){return options=options||{},this.send(wm.MIDI_SYSTEM_MESSAGES.tuningrequest,void 0,this._parseTimeParameter(options.time)),this},Output.prototype.sendClock=function(options){return options=options||{},this.send(wm.MIDI_SYSTEM_MESSAGES.clock,void 0,this._parseTimeParameter(options.time)),this},Output.prototype.sendStart=function(options){return options=options||{},this.send(wm.MIDI_SYSTEM_MESSAGES.start,void 0,this._parseTimeParameter(options.time)),this},Output.prototype.sendContinue=function(options){return options=options||{},this.send(wm.MIDI_SYSTEM_MESSAGES.continue,void 0,this._parseTimeParameter(options.time)),this},Output.prototype.sendStop=function(options){return options=options||{},this.send(wm.MIDI_SYSTEM_MESSAGES.stop,void 0,this._parseTimeParameter(options.time)),this},Output.prototype.sendActiveSensing=function(options){return options=options||{},this.send(wm.MIDI_SYSTEM_MESSAGES.activesensing,[],this._parseTimeParameter(options.time)),this},Output.prototype.sendReset=function(options){return options=options||{},this.send(wm.MIDI_SYSTEM_MESSAGES.reset,void 0,this._parseTimeParameter(options.time)),this},Output.prototype.stopNote=function(note,channel,options){if("all"===note)return this.sendChannelMode("allnotesoff",0,channel,options);var nVelocity=64;return(options=options||{}).rawVelocity?!isNaN(options.velocity)&&0<=options.velocity&&options.velocity<=127&&(nVelocity=options.velocity):!isNaN(options.velocity)&&0<=options.velocity&&options.velocity<=1&&(nVelocity=127*options.velocity),this._convertNoteToArray(note).forEach(function(item){wm.toMIDIChannels(channel).forEach(function(ch){this.send((wm.MIDI_CHANNEL_MESSAGES.noteoff<<4)+(ch-1),[item,Math.round(nVelocity)],this._parseTimeParameter(options.time))}.bind(this))}.bind(this)),this},Output.prototype.playNote=function(note,channel,options){var time,nVelocity=64;if((options=options||{}).rawVelocity?!isNaN(options.velocity)&&0<=options.velocity&&options.velocity<=127&&(nVelocity=options.velocity):!isNaN(options.velocity)&&0<=options.velocity&&options.velocity<=1&&(nVelocity=127*options.velocity),time=this._parseTimeParameter(options.time),this._convertNoteToArray(note).forEach(function(item){wm.toMIDIChannels(channel).forEach(function(ch){this.send((wm.MIDI_CHANNEL_MESSAGES.noteon<<4)+(ch-1),[item,Math.round(nVelocity)],time)}.bind(this))}.bind(this)),!isNaN(options.duration)){options.duration<=0&&(options.duration=0);var nRelease=64;options.rawVelocity?!isNaN(options.release)&&0<=options.release&&options.release<=127&&(nRelease=options.release):!isNaN(options.release)&&0<=options.release&&options.release<=1&&(nRelease=127*options.release),this._convertNoteToArray(note).forEach(function(item){wm.toMIDIChannels(channel).forEach(function(ch){this.send((wm.MIDI_CHANNEL_MESSAGES.noteoff<<4)+(ch-1),[item,Math.round(nRelease)],(time||wm.time)+options.duration)}.bind(this))}.bind(this))}return this},Output.prototype.sendKeyAftertouch=function(note,channel,pressure,options){var that=this;if(options=options||{},channel<1||16<channel)throw new RangeError("The channel must be between 1 and 16.");(isNaN(pressure)||pressure<0||1<pressure)&&(pressure=.5);var nPressure=Math.round(127*pressure);return this._convertNoteToArray(note).forEach(function(item){wm.toMIDIChannels(channel).forEach(function(ch){that.send((wm.MIDI_CHANNEL_MESSAGES.keyaftertouch<<4)+(ch-1),[item,nPressure],that._parseTimeParameter(options.time))})}),this},Output.prototype.sendControlChange=function(controller,value,channel,options){if(options=options||{},"string"==typeof controller){if(void 0===(controller=wm.MIDI_CONTROL_CHANGE_MESSAGES[controller]))throw new TypeError("Invalid controller name.")}else if(!(0<=(controller=Math.floor(controller))&&controller<=119))throw new RangeError("Controller numbers must be between 0 and 119.");if(!(0<=(value=Math.floor(value)||0)&&value<=127))throw new RangeError("Controller value must be between 0 and 127.");return wm.toMIDIChannels(channel).forEach(function(ch){this.send((wm.MIDI_CHANNEL_MESSAGES.controlchange<<4)+(ch-1),[controller,value],this._parseTimeParameter(options.time))}.bind(this)),this},Output.prototype._selectRegisteredParameter=function(parameter,channel,time){var that=this;if(parameter[0]=Math.floor(parameter[0]),!(0<=parameter[0]&&parameter[0]<=127))throw new RangeError("The control65 value must be between 0 and 127");if(parameter[1]=Math.floor(parameter[1]),!(0<=parameter[1]&&parameter[1]<=127))throw new RangeError("The control64 value must be between 0 and 127");return wm.toMIDIChannels(channel).forEach(function(){that.sendControlChange(101,parameter[0],channel,{time:time}),that.sendControlChange(100,parameter[1],channel,{time:time})}),this},Output.prototype._selectNonRegisteredParameter=function(parameter,channel,time){var that=this;if(parameter[0]=Math.floor(parameter[0]),!(0<=parameter[0]&&parameter[0]<=127))throw new RangeError("The control63 value must be between 0 and 127");if(parameter[1]=Math.floor(parameter[1]),!(0<=parameter[1]&&parameter[1]<=127))throw new RangeError("The control62 value must be between 0 and 127");return wm.toMIDIChannels(channel).forEach(function(){that.sendControlChange(99,parameter[0],channel,{time:time}),that.sendControlChange(98,parameter[1],channel,{time:time})}),this},Output.prototype._setCurrentRegisteredParameter=function(data,channel,time){var that=this;if((data=[].concat(data))[0]=Math.floor(data[0]),!(0<=data[0]&&data[0]<=127))throw new RangeError("The msb value must be between 0 and 127");return wm.toMIDIChannels(channel).forEach(function(){that.sendControlChange(6,data[0],channel,{time:time})}),data[1]=Math.floor(data[1]),0<=data[1]&&data[1]<=127&&wm.toMIDIChannels(channel).forEach(function(){that.sendControlChange(38,data[1],channel,{time:time})}),this},Output.prototype._deselectRegisteredParameter=function(channel,time){var that=this;return wm.toMIDIChannels(channel).forEach(function(){that.sendControlChange(101,127,channel,{time:time}),that.sendControlChange(100,127,channel,{time:time})}),this},Output.prototype.setRegisteredParameter=function(parameter,data,channel,options){var that=this;if(options=options||{},!Array.isArray(parameter)){if(!wm.MIDI_REGISTERED_PARAMETER[parameter])throw new Error("The specified parameter is not available.");parameter=wm.MIDI_REGISTERED_PARAMETER[parameter]}return wm.toMIDIChannels(channel).forEach(function(){that._selectRegisteredParameter(parameter,channel,options.time),that._setCurrentRegisteredParameter(data,channel,options.time),that._deselectRegisteredParameter(channel,options.time)}),this},Output.prototype.setNonRegisteredParameter=function(parameter,data,channel,options){var that=this;if(options=options||{},!(0<=parameter[0]&&parameter[0]<=127&&0<=parameter[1]&&parameter[1]<=127))throw new Error("Position 0 and 1 of the 2-position parameter array must both be between 0 and 127.");return data=[].concat(data),wm.toMIDIChannels(channel).forEach(function(){that._selectNonRegisteredParameter(parameter,channel,options.time),that._setCurrentRegisteredParameter(data,channel,options.time),that._deselectRegisteredParameter(channel,options.time)}),this},Output.prototype.incrementRegisteredParameter=function(parameter,channel,options){var that=this;if(options=options||{},!Array.isArray(parameter)){if(!wm.MIDI_REGISTERED_PARAMETER[parameter])throw new Error("The specified parameter is not available.");parameter=wm.MIDI_REGISTERED_PARAMETER[parameter]}return wm.toMIDIChannels(channel).forEach(function(){that._selectRegisteredParameter(parameter,channel,options.time),that.sendControlChange(96,0,channel,{time:options.time}),that._deselectRegisteredParameter(channel,options.time)}),this},Output.prototype.decrementRegisteredParameter=function(parameter,channel,options){if(options=options||{},!Array.isArray(parameter)){if(!wm.MIDI_REGISTERED_PARAMETER[parameter])throw new TypeError("The specified parameter is not available.");parameter=wm.MIDI_REGISTERED_PARAMETER[parameter]}return wm.toMIDIChannels(channel).forEach(function(){this._selectRegisteredParameter(parameter,channel,options.time),this.sendControlChange(97,0,channel,{time:options.time}),this._deselectRegisteredParameter(channel,options.time)}.bind(this)),this},Output.prototype.setPitchBendRange=function(semitones,cents,channel,options){var that=this;if(options=options||{},!(0<=(semitones=Math.floor(semitones)||0)&&semitones<=127))throw new RangeError("The semitones value must be between 0 and 127");if(!(0<=(cents=Math.floor(cents)||0)&&cents<=127))throw new RangeError("The cents value must be between 0 and 127");return wm.toMIDIChannels(channel).forEach(function(){that.setRegisteredParameter("pitchbendrange",[semitones,cents],channel,{time:options.time})}),this},Output.prototype.setModulationRange=function(semitones,cents,channel,options){var that=this;if(options=options||{},!(0<=(semitones=Math.floor(semitones)||0)&&semitones<=127))throw new RangeError("The semitones value must be between 0 and 127");if(!(0<=(cents=Math.floor(cents)||0)&&cents<=127))throw new RangeError("The cents value must be between 0 and 127");return wm.toMIDIChannels(channel).forEach(function(){that.setRegisteredParameter("modulationrange",[semitones,cents],channel,{time:options.time})}),this},Output.prototype.setMasterTuning=function(value,channel,options){var that=this;if(options=options||{},(value=parseFloat(value)||0)<=-65||64<=value)throw new RangeError("The value must be a decimal number larger than -65 and smaller than 64.");var coarse=Math.floor(value)+64,fine=value-Math.floor(value),msb=(fine=Math.round((fine+1)/2*16383))>>7&127,lsb=127&fine;return wm.toMIDIChannels(channel).forEach(function(){that.setRegisteredParameter("channelcoarsetuning",coarse,channel,{time:options.time}),that.setRegisteredParameter("channelfinetuning",[msb,lsb],channel,{time:options.time})}),this},Output.prototype.setTuningProgram=function(value,channel,options){var that=this;if(options=options||{},!(0<=(value=Math.floor(value))&&value<=127))throw new RangeError("The program value must be between 0 and 127");return wm.toMIDIChannels(channel).forEach(function(){that.setRegisteredParameter("tuningprogram",value,channel,{time:options.time})}),this},Output.prototype.setTuningBank=function(value,channel,options){var that=this;if(options=options||{},!(0<=(value=Math.floor(value)||0)&&value<=127))throw new RangeError("The bank value must be between 0 and 127");return wm.toMIDIChannels(channel).forEach(function(){that.setRegisteredParameter("tuningbank",value,channel,{time:options.time})}),this},Output.prototype.sendChannelMode=function(command,value,channel,options){if(options=options||{},"string"==typeof command){if(!(command=wm.MIDI_CHANNEL_MODE_MESSAGES[command]))throw new TypeError("Invalid channel mode message name.")}else if(!(120<=(command=Math.floor(command))&&command<=127))throw new RangeError("Channel mode numerical identifiers must be between 120 and 127.");if((value=Math.floor(value)||0)<0||127<value)throw new RangeError("Value must be an integer between 0 and 127.");return wm.toMIDIChannels(channel).forEach(function(ch){this.send((wm.MIDI_CHANNEL_MESSAGES.channelmode<<4)+(ch-1),[command,value],this._parseTimeParameter(options.time))}.bind(this)),this},Output.prototype.sendProgramChange=function(program,channel,options){var that=this;if(options=options||{},program=Math.floor(program),isNaN(program)||program<0||127<program)throw new RangeError("Program numbers must be between 0 and 127.");return wm.toMIDIChannels(channel).forEach(function(ch){that.send((wm.MIDI_CHANNEL_MESSAGES.programchange<<4)+(ch-1),[program],that._parseTimeParameter(options.time))}),this},Output.prototype.sendChannelAftertouch=function(pressure,channel,options){var that=this;options=options||{},pressure=parseFloat(pressure),(isNaN(pressure)||pressure<0||1<pressure)&&(pressure=.5);var nPressure=Math.round(127*pressure);return wm.toMIDIChannels(channel).forEach(function(ch){that.send((wm.MIDI_CHANNEL_MESSAGES.channelaftertouch<<4)+(ch-1),[nPressure],that._parseTimeParameter(options.time))}),this},Output.prototype.sendPitchBend=function(bend,channel,options){var that=this;if(options=options||{},isNaN(bend)||bend<-1||1<bend)throw new RangeError("Pitch bend value must be between -1 and 1.");var nLevel=Math.round((bend+1)/2*16383),msb=nLevel>>7&127,lsb=127&nLevel;return wm.toMIDIChannels(channel).forEach(function(ch){that.send((wm.MIDI_CHANNEL_MESSAGES.pitchbend<<4)+(ch-1),[lsb,msb],that._parseTimeParameter(options.time))}),this},Output.prototype._parseTimeParameter=function(time){var value,parsed=parseFloat(time);return"string"==typeof time&&"+"===time.substring(0,1)?parsed&&0<parsed&&(value=wm.time+parsed):parsed>wm.time&&(value=parsed),value},Output.prototype._convertNoteToArray=function(note){var notes=[];return Array.isArray(note)||(note=[note]),note.forEach(function(item){notes.push(wm.guessNoteNumber(item))}),notes}, true?!(__WEBPACK_AMD_DEFINE_ARRAY__ = [], __WEBPACK_AMD_DEFINE_RESULT__ = (function(){return wm}).apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__),
				__WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__)):undefined}(this);

/***/ }),

/***/ "./node_modules/webpack/buildin/global.js":
/*!***********************************!*\
  !*** (webpack)/buildin/global.js ***!
  \***********************************/
/*! no static exports found */
/***/ (function(module, exports) {

var g;

// This works in non-strict mode
g = (function() {
	return this;
})();

try {
	// This works if eval is allowed (see CSP)
	g = g || new Function("return this")();
} catch (e) {
	// This works if the window reference is available
	if (typeof window === "object") g = window;
}

// g can still be undefined, but nothing to do about it...
// We return undefined, instead of nothing here, so it's
// easier to handle this case. if(!global) { ...}

module.exports = g;


/***/ }),

/***/ "./node_modules/xml-js/lib/array-helper.js":
/*!*************************************************!*\
  !*** ./node_modules/xml-js/lib/array-helper.js ***!
  \*************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = {

  isArray: function(value) {
    if (Array.isArray) {
      return Array.isArray(value);
    }
    // fallback for older browsers like  IE 8
    return Object.prototype.toString.call( value ) === '[object Array]';
  }

};


/***/ }),

/***/ "./node_modules/xml-js/lib/index.js":
/*!******************************************!*\
  !*** ./node_modules/xml-js/lib/index.js ***!
  \******************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

/*jslint node:true */

var xml2js = __webpack_require__(/*! ./xml2js */ "./node_modules/xml-js/lib/xml2js.js");
var xml2json = __webpack_require__(/*! ./xml2json */ "./node_modules/xml-js/lib/xml2json.js");
var js2xml = __webpack_require__(/*! ./js2xml */ "./node_modules/xml-js/lib/js2xml.js");
var json2xml = __webpack_require__(/*! ./json2xml */ "./node_modules/xml-js/lib/json2xml.js");

module.exports = {
  xml2js: xml2js,
  xml2json: xml2json,
  js2xml: js2xml,
  json2xml: json2xml
};


/***/ }),

/***/ "./node_modules/xml-js/lib/js2xml.js":
/*!*******************************************!*\
  !*** ./node_modules/xml-js/lib/js2xml.js ***!
  \*******************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

var helper = __webpack_require__(/*! ./options-helper */ "./node_modules/xml-js/lib/options-helper.js");
var isArray = __webpack_require__(/*! ./array-helper */ "./node_modules/xml-js/lib/array-helper.js").isArray;

var currentElement, currentElementName;

function validateOptions(userOptions) {
  var options = helper.copyOptions(userOptions);
  helper.ensureFlagExists('ignoreDeclaration', options);
  helper.ensureFlagExists('ignoreInstruction', options);
  helper.ensureFlagExists('ignoreAttributes', options);
  helper.ensureFlagExists('ignoreText', options);
  helper.ensureFlagExists('ignoreComment', options);
  helper.ensureFlagExists('ignoreCdata', options);
  helper.ensureFlagExists('ignoreDoctype', options);
  helper.ensureFlagExists('compact', options);
  helper.ensureFlagExists('indentText', options);
  helper.ensureFlagExists('indentCdata', options);
  helper.ensureFlagExists('indentAttributes', options);
  helper.ensureFlagExists('indentInstruction', options);
  helper.ensureFlagExists('fullTagEmptyElement', options);
  helper.ensureFlagExists('noQuotesForNativeAttributes', options);
  helper.ensureSpacesExists(options);
  if (typeof options.spaces === 'number') {
    options.spaces = Array(options.spaces + 1).join(' ');
  }
  helper.ensureKeyExists('declaration', options);
  helper.ensureKeyExists('instruction', options);
  helper.ensureKeyExists('attributes', options);
  helper.ensureKeyExists('text', options);
  helper.ensureKeyExists('comment', options);
  helper.ensureKeyExists('cdata', options);
  helper.ensureKeyExists('doctype', options);
  helper.ensureKeyExists('type', options);
  helper.ensureKeyExists('name', options);
  helper.ensureKeyExists('elements', options);
  helper.checkFnExists('doctype', options);
  helper.checkFnExists('instruction', options);
  helper.checkFnExists('cdata', options);
  helper.checkFnExists('comment', options);
  helper.checkFnExists('text', options);
  helper.checkFnExists('instructionName', options);
  helper.checkFnExists('elementName', options);
  helper.checkFnExists('attributeName', options);
  helper.checkFnExists('attributeValue', options);
  helper.checkFnExists('attributes', options);
  helper.checkFnExists('fullTagEmptyElement', options);
  return options;
}

function writeIndentation(options, depth, firstLine) {
  return (!firstLine && options.spaces ? '\n' : '') + Array(depth + 1).join(options.spaces);
}

function writeAttributes(attributes, options, depth) {
  if (options.ignoreAttributes) {
    return '';
  }
  if ('attributesFn' in options) {
    attributes = options.attributesFn(attributes, currentElementName, currentElement);
  }
  var key, attr, attrName, quote, result = [];
  for (key in attributes) {
    if (attributes.hasOwnProperty(key) && attributes[key] !== null && attributes[key] !== undefined) {
      quote = options.noQuotesForNativeAttributes && typeof attributes[key] !== 'string' ? '' : '"';
      attr = '' + attributes[key]; // ensure number and boolean are converted to String
      attr = attr.replace(/"/g, '&quot;');
      attrName = 'attributeNameFn' in options ? options.attributeNameFn(key, attr, currentElementName, currentElement) : key;
      result.push((options.spaces && options.indentAttributes? writeIndentation(options, depth+1, false) : ' '));
      result.push(attrName + '=' + quote + ('attributeValueFn' in options ? options.attributeValueFn(attr, key, currentElementName, currentElement) : attr) + quote);
    }
  }
  if (attributes && Object.keys(attributes).length && options.spaces && options.indentAttributes) {
    result.push(writeIndentation(options, depth, false));
  }
  return result.join('');
}

function writeDeclaration(declaration, options, depth) {
  currentElement = declaration;
  currentElementName = 'xml';
  return options.ignoreDeclaration ? '' :  '<?' + 'xml' + writeAttributes(declaration[options.attributesKey], options, depth) + '?>';
}

function writeInstruction(instruction, options, depth) {
  if (options.ignoreInstruction) {
    return '';
  }
  var key;
  for (key in instruction) {
    if (instruction.hasOwnProperty(key)) {
      break;
    }
  }
  var instructionName = 'instructionNameFn' in options ? options.instructionNameFn(key, instruction[key], currentElementName, currentElement) : key;
  if (typeof instruction[key] === 'object') {
    currentElement = instruction;
    currentElementName = instructionName;
    return '<?' + instructionName + writeAttributes(instruction[key][options.attributesKey], options, depth) + '?>';
  } else {
    var instructionValue = instruction[key] ? instruction[key] : '';
    if ('instructionFn' in options) instructionValue = options.instructionFn(instructionValue, key, currentElementName, currentElement);
    return '<?' + instructionName + (instructionValue ? ' ' + instructionValue : '') + '?>';
  }
}

function writeComment(comment, options) {
  return options.ignoreComment ? '' : '<!--' + ('commentFn' in options ? options.commentFn(comment, currentElementName, currentElement) : comment) + '-->';
}

function writeCdata(cdata, options) {
  return options.ignoreCdata ? '' : '<![CDATA[' + ('cdataFn' in options ? options.cdataFn(cdata, currentElementName, currentElement) : cdata.replace(']]>', ']]]]><![CDATA[>')) + ']]>';
}

function writeDoctype(doctype, options) {
  return options.ignoreDoctype ? '' : '<!DOCTYPE ' + ('doctypeFn' in options ? options.doctypeFn(doctype, currentElementName, currentElement) : doctype) + '>';
}

function writeText(text, options) {
  if (options.ignoreText) return '';
  text = '' + text; // ensure Number and Boolean are converted to String
  text = text.replace(/&amp;/g, '&'); // desanitize to avoid double sanitization
  text = text.replace(/&/g, '&amp;').replace(/</g, '&lt;').replace(/>/g, '&gt;');
  return 'textFn' in options ? options.textFn(text, currentElementName, currentElement) : text;
}

function hasContent(element, options) {
  var i;
  if (element.elements && element.elements.length) {
    for (i = 0; i < element.elements.length; ++i) {
      switch (element.elements[i][options.typeKey]) {
      case 'text':
        if (options.indentText) {
          return true;
        }
        break; // skip to next key
      case 'cdata':
        if (options.indentCdata) {
          return true;
        }
        break; // skip to next key
      case 'instruction':
        if (options.indentInstruction) {
          return true;
        }
        break; // skip to next key
      case 'doctype':
      case 'comment':
      case 'element':
        return true;
      default:
        return true;
      }
    }
  }
  return false;
}

function writeElement(element, options, depth) {
  currentElement = element;
  currentElementName = element.name;
  var xml = [], elementName = 'elementNameFn' in options ? options.elementNameFn(element.name, element) : element.name;
  xml.push('<' + elementName);
  if (element[options.attributesKey]) {
    xml.push(writeAttributes(element[options.attributesKey], options, depth));
  }
  var withClosingTag = element[options.elementsKey] && element[options.elementsKey].length || element[options.attributesKey] && element[options.attributesKey]['xml:space'] === 'preserve';
  if (!withClosingTag) {
    if ('fullTagEmptyElementFn' in options) {
      withClosingTag = options.fullTagEmptyElementFn(element.name, element);
    } else {
      withClosingTag = options.fullTagEmptyElement;
    }
  }
  if (withClosingTag) {
    xml.push('>');
    if (element[options.elementsKey] && element[options.elementsKey].length) {
      xml.push(writeElements(element[options.elementsKey], options, depth + 1));
      currentElement = element;
      currentElementName = element.name;
    }
    xml.push(options.spaces && hasContent(element, options) ? '\n' + Array(depth + 1).join(options.spaces) : '');
    xml.push('</' + elementName + '>');
  } else {
    xml.push('/>');
  }
  return xml.join('');
}

function writeElements(elements, options, depth, firstLine) {
  return elements.reduce(function (xml, element) {
    var indent = writeIndentation(options, depth, firstLine && !xml);
    switch (element.type) {
    case 'element': return xml + indent + writeElement(element, options, depth);
    case 'comment': return xml + indent + writeComment(element[options.commentKey], options);
    case 'doctype': return xml + indent + writeDoctype(element[options.doctypeKey], options);
    case 'cdata': return xml + (options.indentCdata ? indent : '') + writeCdata(element[options.cdataKey], options);
    case 'text': return xml + (options.indentText ? indent : '') + writeText(element[options.textKey], options);
    case 'instruction':
      var instruction = {};
      instruction[element[options.nameKey]] = element[options.attributesKey] ? element : element[options.instructionKey];
      return xml + (options.indentInstruction ? indent : '') + writeInstruction(instruction, options, depth);
    }
  }, '');
}

function hasContentCompact(element, options, anyContent) {
  var key;
  for (key in element) {
    if (element.hasOwnProperty(key)) {
      switch (key) {
      case options.parentKey:
      case options.attributesKey:
        break; // skip to next key
      case options.textKey:
        if (options.indentText || anyContent) {
          return true;
        }
        break; // skip to next key
      case options.cdataKey:
        if (options.indentCdata || anyContent) {
          return true;
        }
        break; // skip to next key
      case options.instructionKey:
        if (options.indentInstruction || anyContent) {
          return true;
        }
        break; // skip to next key
      case options.doctypeKey:
      case options.commentKey:
        return true;
      default:
        return true;
      }
    }
  }
  return false;
}

function writeElementCompact(element, name, options, depth, indent) {
  currentElement = element;
  currentElementName = name;
  var elementName = 'elementNameFn' in options ? options.elementNameFn(name, element) : name;
  if (typeof element === 'undefined' || element === null || element === '') {
    return 'fullTagEmptyElementFn' in options && options.fullTagEmptyElementFn(name, element) || options.fullTagEmptyElement ? '<' + elementName + '></' + elementName + '>' : '<' + elementName + '/>';
  }
  var xml = [];
  if (name) {
    xml.push('<' + elementName);
    if (typeof element !== 'object') {
      xml.push('>' + writeText(element,options) + '</' + elementName + '>');
      return xml.join('');
    }
    if (element[options.attributesKey]) {
      xml.push(writeAttributes(element[options.attributesKey], options, depth));
    }
    var withClosingTag = hasContentCompact(element, options, true) || element[options.attributesKey] && element[options.attributesKey]['xml:space'] === 'preserve';
    if (!withClosingTag) {
      if ('fullTagEmptyElementFn' in options) {
        withClosingTag = options.fullTagEmptyElementFn(name, element);
      } else {
        withClosingTag = options.fullTagEmptyElement;
      }
    }
    if (withClosingTag) {
      xml.push('>');
    } else {
      xml.push('/>');
      return xml.join('');
    }
  }
  xml.push(writeElementsCompact(element, options, depth + 1, false));
  currentElement = element;
  currentElementName = name;
  if (name) {
    xml.push((indent ? writeIndentation(options, depth, false) : '') + '</' + elementName + '>');
  }
  return xml.join('');
}

function writeElementsCompact(element, options, depth, firstLine) {
  var i, key, nodes, xml = [];
  for (key in element) {
    if (element.hasOwnProperty(key)) {
      nodes = isArray(element[key]) ? element[key] : [element[key]];
      for (i = 0; i < nodes.length; ++i) {
        switch (key) {
        case options.declarationKey: xml.push(writeDeclaration(nodes[i], options, depth)); break;
        case options.instructionKey: xml.push((options.indentInstruction ? writeIndentation(options, depth, firstLine) : '') + writeInstruction(nodes[i], options, depth)); break;
        case options.attributesKey: case options.parentKey: break; // skip
        case options.textKey: xml.push((options.indentText ? writeIndentation(options, depth, firstLine) : '') + writeText(nodes[i], options)); break;
        case options.cdataKey: xml.push((options.indentCdata ? writeIndentation(options, depth, firstLine) : '') + writeCdata(nodes[i], options)); break;
        case options.doctypeKey: xml.push(writeIndentation(options, depth, firstLine) + writeDoctype(nodes[i], options)); break;
        case options.commentKey: xml.push(writeIndentation(options, depth, firstLine) + writeComment(nodes[i], options)); break;
        default: xml.push(writeIndentation(options, depth, firstLine) + writeElementCompact(nodes[i], key, options, depth, hasContentCompact(nodes[i], options)));
        }
        firstLine = firstLine && !xml.length;
      }
    }
  }
  return xml.join('');
}

module.exports = function (js, options) {
  options = validateOptions(options);
  var xml = [];
  currentElement = js;
  currentElementName = '_root_';
  if (options.compact) {
    xml.push(writeElementsCompact(js, options, 0, true));
  } else {
    if (js[options.declarationKey]) {
      xml.push(writeDeclaration(js[options.declarationKey], options, 0));
    }
    if (js[options.elementsKey] && js[options.elementsKey].length) {
      xml.push(writeElements(js[options.elementsKey], options, 0, !xml.length));
    }
  }
  return xml.join('');
};


/***/ }),

/***/ "./node_modules/xml-js/lib/json2xml.js":
/*!*********************************************!*\
  !*** ./node_modules/xml-js/lib/json2xml.js ***!
  \*********************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

/* WEBPACK VAR INJECTION */(function(Buffer) {var js2xml = __webpack_require__(/*! ./js2xml.js */ "./node_modules/xml-js/lib/js2xml.js");

module.exports = function (json, options) {
  if (json instanceof Buffer) {
    json = json.toString();
  }
  var js = null;
  if (typeof (json) === 'string') {
    try {
      js = JSON.parse(json);
    } catch (e) {
      throw new Error('The JSON structure is invalid');
    }
  } else {
    js = json;
  }
  return js2xml(js, options);
};

/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__(/*! ./../../buffer/index.js */ "./node_modules/buffer/index.js").Buffer))

/***/ }),

/***/ "./node_modules/xml-js/lib/options-helper.js":
/*!***************************************************!*\
  !*** ./node_modules/xml-js/lib/options-helper.js ***!
  \***************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

var isArray = __webpack_require__(/*! ./array-helper */ "./node_modules/xml-js/lib/array-helper.js").isArray;

module.exports = {

  copyOptions: function (options) {
    var key, copy = {};
    for (key in options) {
      if (options.hasOwnProperty(key)) {
        copy[key] = options[key];
      }
    }
    return copy;
  },

  ensureFlagExists: function (item, options) {
    if (!(item in options) || typeof options[item] !== 'boolean') {
      options[item] = false;
    }
  },

  ensureSpacesExists: function (options) {
    if (!('spaces' in options) || (typeof options.spaces !== 'number' && typeof options.spaces !== 'string')) {
      options.spaces = 0;
    }
  },

  ensureAlwaysArrayExists: function (options) {
    if (!('alwaysArray' in options) || (typeof options.alwaysArray !== 'boolean' && !isArray(options.alwaysArray))) {
      options.alwaysArray = false;
    }
  },

  ensureKeyExists: function (key, options) {
    if (!(key + 'Key' in options) || typeof options[key + 'Key'] !== 'string') {
      options[key + 'Key'] = options.compact ? '_' + key : key;
    }
  },

  checkFnExists: function (key, options) {
    return key + 'Fn' in options;
  }

};


/***/ }),

/***/ "./node_modules/xml-js/lib/xml2js.js":
/*!*******************************************!*\
  !*** ./node_modules/xml-js/lib/xml2js.js ***!
  \*******************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

var sax = __webpack_require__(/*! sax */ "./node_modules/sax/lib/sax.js");
var expat /*= require('node-expat');*/ = { on: function () { }, parse: function () { } };
var helper = __webpack_require__(/*! ./options-helper */ "./node_modules/xml-js/lib/options-helper.js");
var isArray = __webpack_require__(/*! ./array-helper */ "./node_modules/xml-js/lib/array-helper.js").isArray;

var options;
var pureJsParser = true;
var currentElement;

function validateOptions(userOptions) {
  options = helper.copyOptions(userOptions);
  helper.ensureFlagExists('ignoreDeclaration', options);
  helper.ensureFlagExists('ignoreInstruction', options);
  helper.ensureFlagExists('ignoreAttributes', options);
  helper.ensureFlagExists('ignoreText', options);
  helper.ensureFlagExists('ignoreComment', options);
  helper.ensureFlagExists('ignoreCdata', options);
  helper.ensureFlagExists('ignoreDoctype', options);
  helper.ensureFlagExists('compact', options);
  helper.ensureFlagExists('alwaysChildren', options);
  helper.ensureFlagExists('addParent', options);
  helper.ensureFlagExists('trim', options);
  helper.ensureFlagExists('nativeType', options);
  helper.ensureFlagExists('nativeTypeAttributes', options);
  helper.ensureFlagExists('sanitize', options);
  helper.ensureFlagExists('instructionHasAttributes', options);
  helper.ensureFlagExists('captureSpacesBetweenElements', options);
  helper.ensureAlwaysArrayExists(options);
  helper.ensureKeyExists('declaration', options);
  helper.ensureKeyExists('instruction', options);
  helper.ensureKeyExists('attributes', options);
  helper.ensureKeyExists('text', options);
  helper.ensureKeyExists('comment', options);
  helper.ensureKeyExists('cdata', options);
  helper.ensureKeyExists('doctype', options);
  helper.ensureKeyExists('type', options);
  helper.ensureKeyExists('name', options);
  helper.ensureKeyExists('elements', options);
  helper.ensureKeyExists('parent', options);
  helper.checkFnExists('doctype', options);
  helper.checkFnExists('instruction', options);
  helper.checkFnExists('cdata', options);
  helper.checkFnExists('comment', options);
  helper.checkFnExists('text', options);
  helper.checkFnExists('instructionName', options);
  helper.checkFnExists('elementName', options);
  helper.checkFnExists('attributeName', options);
  helper.checkFnExists('attributeValue', options);
  helper.checkFnExists('attributes', options);
  return options;
}

function nativeType(value) {
  var nValue = Number(value);
  if (!isNaN(nValue)) {
    return nValue;
  }
  var bValue = value.toLowerCase();
  if (bValue === 'true') {
    return true;
  } else if (bValue === 'false') {
    return false;
  }
  return value;
}

function addField(type, value) {
  var key;
  if (options.compact) {
    if (
      !currentElement[options[type + 'Key']] &&
      (isArray(options.alwaysArray) ? options.alwaysArray.indexOf(options[type + 'Key']) !== -1 : options.alwaysArray)
    ) {
      currentElement[options[type + 'Key']] = [];
    }
    if (currentElement[options[type + 'Key']] && !isArray(currentElement[options[type + 'Key']])) {
      currentElement[options[type + 'Key']] = [currentElement[options[type + 'Key']]];
    }
    if (type + 'Fn' in options && typeof value === 'string') {
      value = options[type + 'Fn'](value, currentElement);
    }
    if (type === 'instruction' && ('instructionFn' in options || 'instructionNameFn' in options)) {
      for (key in value) {
        if (value.hasOwnProperty(key)) {
          if ('instructionFn' in options) {
            value[key] = options.instructionFn(value[key], key, currentElement);
          } else {
            var temp = value[key];
            delete value[key];
            value[options.instructionNameFn(key, temp, currentElement)] = temp;
          }
        }
      }
    }
    if (isArray(currentElement[options[type + 'Key']])) {
      currentElement[options[type + 'Key']].push(value);
    } else {
      currentElement[options[type + 'Key']] = value;
    }
  } else {
    if (!currentElement[options.elementsKey]) {
      currentElement[options.elementsKey] = [];
    }
    var element = {};
    element[options.typeKey] = type;
    if (type === 'instruction') {
      for (key in value) {
        if (value.hasOwnProperty(key)) {
          break;
        }
      }
      element[options.nameKey] = 'instructionNameFn' in options ? options.instructionNameFn(key, value, currentElement) : key;
      if (options.instructionHasAttributes) {
        element[options.attributesKey] = value[key][options.attributesKey];
        if ('instructionFn' in options) {
          element[options.attributesKey] = options.instructionFn(element[options.attributesKey], key, currentElement);
        }
      } else {
        if ('instructionFn' in options) {
          value[key] = options.instructionFn(value[key], key, currentElement);
        }
        element[options.instructionKey] = value[key];
      }
    } else {
      if (type + 'Fn' in options) {
        value = options[type + 'Fn'](value, currentElement);
      }
      element[options[type + 'Key']] = value;
    }
    if (options.addParent) {
      element[options.parentKey] = currentElement;
    }
    currentElement[options.elementsKey].push(element);
  }
}

function manipulateAttributes(attributes) {
  if ('attributesFn' in options && attributes) {
    attributes = options.attributesFn(attributes, currentElement);
  }
  if ((options.trim || 'attributeValueFn' in options || 'attributeNameFn' in options || options.nativeTypeAttributes) && attributes) {
    var key;
    for (key in attributes) {
      if (attributes.hasOwnProperty(key)) {
        if (options.trim) attributes[key] = attributes[key].trim();
        if (options.nativeTypeAttributes) {
          attributes[key] = nativeType(attributes[key]);
        }
        if ('attributeValueFn' in options) attributes[key] = options.attributeValueFn(attributes[key], key, currentElement);
        if ('attributeNameFn' in options) {
          var temp = attributes[key];
          delete attributes[key];
          attributes[options.attributeNameFn(key, attributes[key], currentElement)] = temp;
        }
      }
    }
  }
  return attributes;
}

function onInstruction(instruction) {
  var attributes = {};
  if (instruction.body && (instruction.name.toLowerCase() === 'xml' || options.instructionHasAttributes)) {
    var attrsRegExp = /([\w:-]+)\s*=\s*(?:"([^"]*)"|'([^']*)'|(\w+))\s*/g;
    var match;
    while ((match = attrsRegExp.exec(instruction.body)) !== null) {
      attributes[match[1]] = match[2] || match[3] || match[4];
    }
    attributes = manipulateAttributes(attributes);
  }
  if (instruction.name.toLowerCase() === 'xml') {
    if (options.ignoreDeclaration) {
      return;
    }
    currentElement[options.declarationKey] = {};
    if (Object.keys(attributes).length) {
      currentElement[options.declarationKey][options.attributesKey] = attributes;
    }
    if (options.addParent) {
      currentElement[options.declarationKey][options.parentKey] = currentElement;
    }
  } else {
    if (options.ignoreInstruction) {
      return;
    }
    if (options.trim) {
      instruction.body = instruction.body.trim();
    }
    var value = {};
    if (options.instructionHasAttributes && Object.keys(attributes).length) {
      value[instruction.name] = {};
      value[instruction.name][options.attributesKey] = attributes;
    } else {
      value[instruction.name] = instruction.body;
    }
    addField('instruction', value);
  }
}

function onStartElement(name, attributes) {
  var element;
  if (typeof name === 'object') {
    attributes = name.attributes;
    name = name.name;
  }
  attributes = manipulateAttributes(attributes);
  if ('elementNameFn' in options) {
    name = options.elementNameFn(name, currentElement);
  }
  if (options.compact) {
    element = {};
    if (!options.ignoreAttributes && attributes && Object.keys(attributes).length) {
      element[options.attributesKey] = {};
      var key;
      for (key in attributes) {
        if (attributes.hasOwnProperty(key)) {
          element[options.attributesKey][key] = attributes[key];
        }
      }
    }
    if (
      !(name in currentElement) &&
      (isArray(options.alwaysArray) ? options.alwaysArray.indexOf(name) !== -1 : options.alwaysArray)
    ) {
      currentElement[name] = [];
    }
    if (currentElement[name] && !isArray(currentElement[name])) {
      currentElement[name] = [currentElement[name]];
    }
    if (isArray(currentElement[name])) {
      currentElement[name].push(element);
    } else {
      currentElement[name] = element;
    }
  } else {
    if (!currentElement[options.elementsKey]) {
      currentElement[options.elementsKey] = [];
    }
    element = {};
    element[options.typeKey] = 'element';
    element[options.nameKey] = name;
    if (!options.ignoreAttributes && attributes && Object.keys(attributes).length) {
      element[options.attributesKey] = attributes;
    }
    if (options.alwaysChildren) {
      element[options.elementsKey] = [];
    }
    currentElement[options.elementsKey].push(element);
  }
  element[options.parentKey] = currentElement; // will be deleted in onEndElement() if !options.addParent
  currentElement = element;
}

function onText(text) {
  if (options.ignoreText) {
    return;
  }
  if (!text.trim() && !options.captureSpacesBetweenElements) {
    return;
  }
  if (options.trim) {
    text = text.trim();
  }
  if (options.nativeType) {
    text = nativeType(text);
  }
  if (options.sanitize) {
    text = text.replace(/&/g, '&amp;').replace(/</g, '&lt;').replace(/>/g, '&gt;');
  }
  addField('text', text);
}

function onComment(comment) {
  if (options.ignoreComment) {
    return;
  }
  if (options.trim) {
    comment = comment.trim();
  }
  addField('comment', comment);
}

function onEndElement(name) {
  var parentElement = currentElement[options.parentKey];
  if (!options.addParent) {
    delete currentElement[options.parentKey];
  }
  currentElement = parentElement;
}

function onCdata(cdata) {
  if (options.ignoreCdata) {
    return;
  }
  if (options.trim) {
    cdata = cdata.trim();
  }
  addField('cdata', cdata);
}

function onDoctype(doctype) {
  if (options.ignoreDoctype) {
    return;
  }
  doctype = doctype.replace(/^ /, '');
  if (options.trim) {
    doctype = doctype.trim();
  }
  addField('doctype', doctype);
}

function onError(error) {
  error.note = error; //console.error(error);
}

module.exports = function (xml, userOptions) {

  var parser = pureJsParser ? sax.parser(true, {}) : parser = new expat.Parser('UTF-8');
  var result = {};
  currentElement = result;

  options = validateOptions(userOptions);

  if (pureJsParser) {
    parser.opt = {strictEntities: true};
    parser.onopentag = onStartElement;
    parser.ontext = onText;
    parser.oncomment = onComment;
    parser.onclosetag = onEndElement;
    parser.onerror = onError;
    parser.oncdata = onCdata;
    parser.ondoctype = onDoctype;
    parser.onprocessinginstruction = onInstruction;
  } else {
    parser.on('startElement', onStartElement);
    parser.on('text', onText);
    parser.on('comment', onComment);
    parser.on('endElement', onEndElement);
    parser.on('error', onError);
    //parser.on('startCdata', onStartCdata);
    //parser.on('endCdata', onEndCdata);
    //parser.on('entityDecl', onEntityDecl);
  }

  if (pureJsParser) {
    parser.write(xml).close();
  } else {
    if (!parser.parse(xml)) {
      throw new Error('XML parsing error: ' + parser.getError());
    }
  }

  if (result[options.elementsKey]) {
    var temp = result[options.elementsKey];
    delete result[options.elementsKey];
    result[options.elementsKey] = temp;
    delete result.text;
  }

  return result;

};


/***/ }),

/***/ "./node_modules/xml-js/lib/xml2json.js":
/*!*********************************************!*\
  !*** ./node_modules/xml-js/lib/xml2json.js ***!
  \*********************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

var helper = __webpack_require__(/*! ./options-helper */ "./node_modules/xml-js/lib/options-helper.js");
var xml2js = __webpack_require__(/*! ./xml2js */ "./node_modules/xml-js/lib/xml2js.js");

function validateOptions (userOptions) {
  var options = helper.copyOptions(userOptions);
  helper.ensureSpacesExists(options);
  return options;
}

module.exports = function(xml, userOptions) {
  var options, js, json, parentKey;
  options = validateOptions(userOptions);
  js = xml2js(xml, options);
  parentKey = 'compact' in options && options.compact ? '_parent' : 'parent';
  // parentKey = ptions.compact ? '_parent' : 'parent'; // consider this
  if ('addParent' in options && options.addParent) {
    json = JSON.stringify(js, function (k, v) { return k === parentKey? '_' : v; }, options.spaces);
  } else {
    json = JSON.stringify(js, null, options.spaces);
  }
  return json.replace(/\u2028/g, '\\u2028').replace(/\u2029/g, '\\u2029');
};


/***/ }),

/***/ "./src/MIDI/MIDIController.js":
/*!************************************!*\
  !*** ./src/MIDI/MIDIController.js ***!
  \************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

const WebMidi = __webpack_require__(/*! webmidi */ "./node_modules/webmidi/webmidi.min.js");


class MIDIController{
    
    static INIT_WEBMIDI(){
        return new Promise( (resolve, reject) => {
            MIDIController.WebMidi = WebMidi;
            MIDIController.WebMidi.enable( function(err){
                if(err){
                    reject('WebMidi could not be enabled.', err);
                }else{
                    resolve();
                }
            })
        });
    }

    constructor(controllerName = null){
        this.controllerName = controllerName;
    }

    initController(){
        var staticWebMidi = new Promise( (resolve, reject) => {
            if(! MIDIController.WebMidi){
                MIDIController.INIT_WEBMIDI().then( () => {
                    resolve();
                }).catch( (e) => {reject(e);});
            }else{
                resolve();
            }
        });

     
        return new Promise( (resolve, reject ) => {
            staticWebMidi.then( () => {

                if(MIDIController.WebMidi.inputs.length <= 0)throw "No MIDI Device detected!";

                if(this.controllerName){
                    this.output = MIDIController.WebMidi.getOutputByName(this.controllerName);
                    this.input = MIDIController.WebMidi.getInputByName(this.controllerName);
                }else{
                    this.output = MIDIController.WebMidi.outputs[0];
                    this.input = MIDIController.WebMidi.inputs[0];
                
                    console.log("INPUT", MIDIController.WebMidi.inputs);
                }
                
                console.log(this);

                this.isInitialized = true;
                resolve(this);
            });
        });
    }

    onNoteOn( callback){
        this._checkMidiDevice();
        this.input.addListener('noteon', 'all', callback);
    }

    onNoteOff( callback ){
        this._checkMidiDevice();
        this.input.addListener('noteoff', 'all', callback);
    }

    onInput( callback ){
        this._checkMidiDevice();
        this.input.addListener('controlchange', 'all', callback);
    }

    playNote (note, channel='all', options={duration: 1500}){
        this._checkMidiDevice();
        this.output.playNote(note, channel, options);
    }

    _checkMidiDevice(){
        if(!this.isInitialized)throw "MIDI-Controller is not initialized yet!";
    }
}

module.exports = MIDIController;

/***/ }),

/***/ "./src/MIDI/TonePiano.js":
/*!*******************************!*\
  !*** ./src/MIDI/TonePiano.js ***!
  \*******************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

const Tone = __webpack_require__(/*! tone */ "./node_modules/tone/build/Tone.js");

class TonePiano{

    constructor(){
        this._recordedNotes = [];
        this._piano = null;
        this._initPiano();
        this._tempo = 120;
    }

    _initPiano(){
        //this._piano = new Tone.Synth().toMaster();
        this._piano = new Tone.Sampler({
			"A0" : "A0.[mp3|ogg]",
			"C1" : "C1.[mp3|ogg]",
			"D#1" : "Ds1.[mp3|ogg]",
			"F#1" : "Fs1.[mp3|ogg]",
			"A1" : "A1.[mp3|ogg]",
			"C2" : "C2.[mp3|ogg]",
			"D#2" : "Ds2.[mp3|ogg]",
			"F#2" : "Fs2.[mp3|ogg]",
			"A2" : "A2.[mp3|ogg]",
			"C3" : "C3.[mp3|ogg]",
			"D#3" : "Ds3.[mp3|ogg]",
			"F#3" : "Fs3.[mp3|ogg]",
			"A3" : "A3.[mp3|ogg]",
			"C4" : "C4.[mp3|ogg]",
			"D#4" : "Ds4.[mp3|ogg]",
			"F#4" : "Fs4.[mp3|ogg]",
			"A4" : "A4.[mp3|ogg]",
			"C5" : "C5.[mp3|ogg]",
			"D#5" : "Ds5.[mp3|ogg]",
			"F#5" : "Fs5.[mp3|ogg]",
			"A5" : "A5.[mp3|ogg]",
			"C6" : "C6.[mp3|ogg]",
			"D#6" : "Ds6.[mp3|ogg]",
			"F#6" : "Fs6.[mp3|ogg]",
			"A6" : "A6.[mp3|ogg]",
			"C7" : "C7.[mp3|ogg]",
			"D#7" : "Ds7.[mp3|ogg]",
			"F#7" : "Fs7.[mp3|ogg]",
			"A7" : "A7.[mp3|ogg]",
			"C8" : "C8.[mp3|ogg]"
		}, {
			"release" : 1,
			"baseUrl" : "./audio/salamander/"
		}).toMaster();
    }
    get recordedNotes(){ return this._recordedNotes; }

    addNote( note ){
        this._recordedNotes.push(
            note
        );
        return this;
    }

    setNotes( notes ){
        this._recordedNotes = notes;
        return this;
    }

    _setNotesToT0(){
        var minTimestamp = this._recordedNotes[0].timestampStart;

        this._recordedNotes.forEach( (note) => {
            note
            .setTimestampStart( (note.timestampStart - minTimestamp) )
            .setTimestampEnd( (note.timestampEnd - minTimestamp) );
            
        });
    }

    playRecord(){
        if(this._recordedNotes.length <= 0)return;

        window.TRANSPORT = Tone.Transport;

        Tone.Transport.stop();
        Tone.Transport.position = 0;
        Tone.Transport.cancel();

        this._setNotesToT0();
        this._recordedNotes.forEach( note => {
            Tone.Transport.schedule( time => {
                this._piano.triggerAttackRelease( (note.step+''+ (note.alter === 1 ? '#' : note.alter === -1 ? 'b' : '')+note.octave), (note.durationTimestamp/1000) );
            }, (note.timestampStart/1000));
        });    

        var endMelodie = this._recordedNotes[ this._recordedNotes.length - 1].timestampStart + this._recordedNotes[ this._recordedNotes.length - 1].durationTimestamp;

        Tone.Transport.schedule( time => {
            document.getElementById('button-play').click(); // REALLY BAD PROGRAMMING! - I know ;-)
        }, (endMelodie/1000));

        Tone.Transport.start();
    }

    playRecordDuration(){
        if(this._recordedNotes.length <= 0)return;

        const T_MIDI_STEP = 60 / (this._tempo * 24);

        window.TRANSPORT = Tone.Transport;

        Tone.Transport.stop();
        Tone.Transport.position = 0;
        Tone.Transport.cancel();

        let currentMidiStep = 0;

        this.recordedNotes.forEach( note => {
            Tone.Transport.schedule( time => {
                this._piano.triggerAttackRelease( (note.step+''+ (note.alter === 1 ? '#' : note.alter === -1 ? 'b' : '')+note.octave), (note.duration*T_MIDI_STEP) );
            }, currentMidiStep * T_MIDI_STEP);
            currentMidiStep += note.duration;
        });

        var endMelodie = currentMidiStep * T_MIDI_STEP;

        Tone.Transport.schedule( time => {
            document.getElementById('button-note-play').click(); // REALLY BAD PROGRAMMING! - I know ;-)
        }, endMelodie);

        Tone.Transport.start();
    }

    pauseRecord(){
        Tone.Transport.stop();
    }
    clearRecord(){
        this._recordedNotes = [];
    }
}

module.exports = TonePiano;

/***/ }),

/***/ "./src/MusicXML/Composition.js":
/*!*************************************!*\
  !*** ./src/MusicXML/Composition.js ***!
  \*************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

const xmlConverter = __webpack_require__(/*! xml-js */ "./node_modules/xml-js/lib/index.js");
const MusicXMLParser = __webpack_require__(/*! ./MusicXMLParser */ "./src/MusicXML/MusicXMLParser.js");
const Part = __webpack_require__(/*! ./CompositionElements/Part */ "./src/MusicXML/CompositionElements/Part.js");
const Measure = __webpack_require__(/*! ./CompositionElements/Measure */ "./src/MusicXML/CompositionElements/Measure.js");

class Composition extends MusicXMLParser{

    constructor(){
        super();
        this._partList = [];
        this._title = "Default";
    }

    addPart(part){ 
        if(!(part instanceof Part))throw "Parameter must be instance of Part";
        this._partList.push(part); 
        return this;
    }
    setTitle(title){ 
        this._title = title; 
        return this; 
    }


    toMusicXMLinJSON(){
        const JSON = {
            _declaration: {
                _attributes: {
                    version: "1.0",
                    encoding: "UTF-8"
                }
            },
            _doctype: "score-partwise PUBLIC \"-//Recordare//DTD MusicXML 3.1 Partwise//EN\" \"http://www.musicxml.org/dtds/partwise.dtd\"",
            'score-partwise': {
                _attributes: { version: "3.1"},
                'part-list': {
                    'score-part': []
                },

                'part': []
            }
        };

        if(this._title !== null)JSON['score-partwise']['work'] = {'work-title': {'_text': this._title}};

        this._partList.forEach( part => {
            JSON['score-partwise']['part-list']['score-part'].push( part.toMusicXMLPartListinJSON()['score-part'] );
            JSON['score-partwise']['part'].push( part.toMusicXMLinJSON().part );
        })
        return JSON;
    }

    download(downloadName = "composition"){
        var dataStr = "data:musicxml;charset=utf-8," + encodeURIComponent( this.toMusicXML() );
        var downloadAnchorNode = document.createElement('a');
        downloadAnchorNode.setAttribute("href",     dataStr);
        downloadAnchorNode.setAttribute("download", downloadName+".musicxml");
        document.body.appendChild(downloadAnchorNode); // required for firefox
        downloadAnchorNode.click();
        downloadAnchorNode.remove();
    }

}

module.exports = {Composition, Part, Measure};

/***/ }),

/***/ "./src/MusicXML/CompositionElements/Measure.js":
/*!*****************************************************!*\
  !*** ./src/MusicXML/CompositionElements/Measure.js ***!
  \*****************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

const MusicXMLParser = __webpack_require__(/*! ../MusicXMLParser */ "./src/MusicXML/MusicXMLParser.js");

class Measure extends MusicXMLParser{
    constructor(measureNumber){
        super();
        if(measureNumber === undefined || !Number.isInteger(measureNumber)) throw "Measure Number must be set as int in constructor!";

        this._number = measureNumber;
        this._attributes = Measure.DEFAULT_ATTRIBUTES;
        this._notes = [];
    }

    get number(){ return this._number; }
    get notes(){ return this._notes; }

    get measureDuration(){ 
        let duration = 0;
        this.notes.forEach( note => {
            duration += note.duration;
        });
        return duration;
    }

    addNote(note){ this._notes.push(note); return this; }
    setAttributes(attributes){ this._attributes = attributes; return this; }

    toMusicXMLinJSON(){
        const JSON = { 
            'measure': {
                '_attributes': {
                    number: this.number,
                },
            }
        };

        if(this._number === 1){
            JSON.measure.attributes = this._attributes;
        }

        JSON.measure.note = [];
        this.notes.forEach( note => {
            JSON.measure.note.push( note.toMusicXMLinJSON().note );
        });

        return JSON;
    }
}

Measure.DEFAULT_ATTRIBUTES = {
    divisions: { _text: 24, },
    key: { fifths: { _text: 0 }},
    time: { 
        beats: { _text: 4 }, 
        'beat-type': { _text: 4 }
    },
    clef: {
        sign: { _text: 'G' },
        line: { _text: 2}
    }
}

module.exports = Measure;


/***/ }),

/***/ "./src/MusicXML/CompositionElements/Part.js":
/*!**************************************************!*\
  !*** ./src/MusicXML/CompositionElements/Part.js ***!
  \**************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

const MusicXMLParser = __webpack_require__(/*! ../MusicXMLParser */ "./src/MusicXML/MusicXMLParser.js");
const Measure = __webpack_require__(/*! ../CompositionElements/Measure */ "./src/MusicXML/CompositionElements/Measure.js");
const Note = __webpack_require__(/*! ../../Utils/Note */ "./src/Utils/Note.js");

class Part extends MusicXMLParser{
    constructor(partID){
        super();
        if(partID === undefined)throw "Part ID is not allowd to be undefined!";
        this._id = partID;
        this._name = partID;
        this._measures = [];
    }

    get name(){ return this._name; }
    get id(){ return this._id; }

    setName(name){ this._name = name; return this; }
    addMeasure(measure){ 
        if(!(measure instanceof Measure))throw "Parameter must be instance of Measure";
        this._measures.push(measure); 
        return this; 
    }
    addNote(note){
        Note.validate(note);
        var latestMeasure = this._measures[this._measures.length - 1];
        
        if(latestMeasure === undefined){
            this.addMeasure( new Measure( this._measures.length+1 ));    
            latestMeasure = this._measures[this._measures.length - 1];
        }

        /*if(latestMeasure === undefined || latestMeasure.measureDuration >= 96){   // create new Measure on overflow
            this.addMeasure( new Measure( this._measures.length+1 ));    
            latestMeasure = this._measures[this._measures.length - 1];
        }*/

        latestMeasure.addNote( note );
        return this;
    }

    toMusicXMLPartListinJSON(){
        const partJSON = { 
            'score-part': {
                '_attributes': {
                    id: this.id,
                }
            }
        };

        if(this.name !== null)partJSON['score-part']['part-name'] = this.name;
        
        return partJSON;    
    }

    toMusicXMLinJSON(){
        const JSON = {
            'part': {
                '_attributes': {
                    id: this.id
                },
            }
        };

        JSON.part.measure = [];
        this._measures.forEach( measure => {
            JSON.part.measure.push( measure.toMusicXMLinJSON().measure );
        });

        return JSON;
    }
}

module.exports = Part;

/***/ }),

/***/ "./src/MusicXML/MusicXMLParser.js":
/*!****************************************!*\
  !*** ./src/MusicXML/MusicXMLParser.js ***!
  \****************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

const xmlConverter = __webpack_require__(/*! xml-js */ "./node_modules/xml-js/lib/index.js");
window.xmlConverter = xmlConverter;

class MusicXMLParser{


    toMusicXML(){
        return xmlConverter.js2xml( this.toMusicXMLinJSON() , { compact: true, ignoreComment: true, spaces: 0} );
    }
}

module.exports = MusicXMLParser;

/***/ }),

/***/ "./src/OSMD/index.js":
/*!***************************!*\
  !*** ./src/OSMD/index.js ***!
  \***************************/
/*! no static exports found */
/***/ (function(module, exports) {

class OSMD{
    constructor(){
        this._containerID = 'osmdContainer';

        this._osmd = new window.opensheetmusicdisplay.OpenSheetMusicDisplay( this._containerID );

    }

    renderMusicXML( musicXML ) {
        this._osmd
            .load( musicXML )
            .then( () => {
                this._osmd.render();
            });
    }
}



module.exports = new OSMD();


/***/ }),

/***/ "./src/Processing/Clustering/ClusterAlgorithm.js":
/*!*******************************************************!*\
  !*** ./src/Processing/Clustering/ClusterAlgorithm.js ***!
  \*******************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

const Note = __webpack_require__(/*! ../../Utils/Note */ "./src/Utils/Note.js");
const {Cluster } = __webpack_require__(/*! ./Utils */ "./src/Processing/Clustering/Utils.js");

class ClusterAlgorithm{ //ABSTRACT

    constructor(){
        this._cluster = [];
        this._dataset = [];
    }

    setDataset( noteArray ){
        this._dataset = noteArray;
        return this;
    }

    getClusterIdOfRecord( note ){
        return this._getClusterIdOfRecord(note);
    }

    getClusterCentroidMap(){
        let map = [];
        this._cluster.forEach( cluster => {
            cluster.calcCentroid();
            map.push(
                {
                    cluster_id: cluster.id,
                    centroid: cluster.centroid,
                    cluster: cluster
                }
            );
        }); 

        map.sort( (a,b) => {
            return (a.centroid - b.centroid);
        });

        return map;
    }
}


module.exports = ClusterAlgorithm;

/***/ }),

/***/ "./src/Processing/Clustering/Utils.js":
/*!********************************************!*\
  !*** ./src/Processing/Clustering/Utils.js ***!
  \********************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

const Note = __webpack_require__(/*! ../../Utils/Note */ "./src/Utils/Note.js");

class Cluster{
    
    constructor(){
        this._elements = [];
        this._centroid = null;
        this._maxDistance = null;

        this._id = Cluster.GET_CLUSTER_ID();
    }

    addElement( note ){
        Note.validate(note);
        this._elements.push(note);
        return this;
    }

    dumpElements(){
        this._elements = [];
        return this;
    }

    setCentroidValue(timestampSumm){
        if(timestampSumm === undefined || Number(timestampSumm) !== timestampSumm)throw "Parameter must be Number!";
        this._centroid = timestampSumm;
        return this;
    }

    calcCentroid(){    //WAS WENN KEINE ELEMENTE ZUGEORDNET WERDEN!?
        let centroidSumm = 0;
        this._elements.forEach( note => {
            centroidSumm += note.durationTimestamp
        });
        this._centroid = centroidSumm / (this._elements.length > 0 ? this._elements.length: 1);
        return this;
    }
    
    calcMaxDistance(){
        this._maxDistance = 0;
        this._elements.forEach( note => {
            let calcDistance = this.getDistance( note );
            if( calcDistance > this._maxDistance){
                this._maxDistance = calcDistance;
            }
        });
        return this;
    }

    getDistance( note ){
        Note.validate(note);
        return Math.abs( this._centroid - note.durationTimestamp );
    }


    get elements(){
        return this._elements;
    }

    get centroid(){
        if(this._centroid === null)throw "Centroid undefined! Please exec calc Centroid!";
        return this._centroid;
    }

    get maxDistance(){
        if(this._maxDistance === null)throw "Max Distance undefined! Please exec calc Centroid!";
        return this._maxDistance;
    }

    get maxElement(){
        if(this._elements.length <= 0)throw "No elements available!";
        this._elements.sort( (a,b) => {
            return (a.durationTimestamp - b.durationTimestamp);
        });
        return this._elements[0];
    }

    get minElement(){
        if(this._elements.length <= 0)throw "No elements available!";
        this._elements.sort( (a,b) => {
            return (b.durationTimestamp - a.durationTimestamp);
        });
        return this._elements[0];
    }

    get id(){
        return this._id;
    }

    static GET_CLUSTER_ID(){
        Cluster.CLUSTER_ID++;
        return "cluster_"+Cluster.CLUSTER_ID;
    }
}
Cluster.CLUSTER_ID = 0;


module.exports = {
    Cluster: Cluster
};

/***/ }),

/***/ "./src/Processing/Clustering/dbscan.js":
/*!*********************************************!*\
  !*** ./src/Processing/Clustering/dbscan.js ***!
  \*********************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

const Note = __webpack_require__(/*! ../../Utils/Note */ "./src/Utils/Note.js");
const {Cluster } = __webpack_require__(/*! ./Utils */ "./src/Processing/Clustering/Utils.js");
const ClusterAlgorithm = __webpack_require__(/*! ./ClusterAlgorithm */ "./src/Processing/Clustering/ClusterAlgorithm.js");

class DBSCAN extends ClusterAlgorithm{

    constructor(e = 2000){
        super();
        this._e = e;   
    }

    generateCluster(){
        if(this._dataset.length <= 0) throw "There is no data set, to generate Clusters from.";
        this._dataset.sort( (a,b) => {
            return (a.durationTimestamp - b.durationTimestamp);
        });

        this._cluster.push(
            new Cluster().addElement( this._dataset[0] )
        );
        
        this._dataset.forEach( (note,index) => {   //assumption: cluster1 have already been clustered, cluster2 have no cluster
            if(index <= 0)return;
            
            let currentCluster = this._cluster[ this._cluster.length - 1 ];
            let maxDuration = currentCluster.maxElement.durationTimestamp;

            if( note.durationTimestamp < (maxDuration + this._e)){
                currentCluster.addElement( note );
            }else{
                this._cluster.push(
                    new Cluster().addElement( note )
                );
            }
        });

        return this;
    }

    _getClusterIdOfRecord(note){
        let clusterId = undefined;
        this._cluster.forEach( cluster => {
            let maxValue = cluster.maxElement.durationTimestamp,
                minValue = cluster.minElement.durationTimestamp;

            if( note.durationTimestamp > (minValue - this._e) && note.durationTimestamp < (maxValue + this._e)){
                clusterId = cluster.id;
            }
        });
        if(clusterId){
            return clusterId;
        }
        throw "Given in note couldnt be clustered!";
    }
}

module.exports = DBSCAN;

/***/ }),

/***/ "./src/Processing/Clustering/k-means.js":
/*!**********************************************!*\
  !*** ./src/Processing/Clustering/k-means.js ***!
  \**********************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

const Note = __webpack_require__(/*! ../../Utils/Note */ "./src/Utils/Note.js");
const {Cluster } = __webpack_require__(/*! ./Utils */ "./src/Processing/Clustering/Utils.js");
const ClusterAlgorithm = __webpack_require__(/*! ./ClusterAlgorithm */ "./src/Processing/Clustering/ClusterAlgorithm.js");

class kMeans extends ClusterAlgorithm{

    constructor(k = null){
        if(!Number.isInteger(k) && k < 0)throw "k must be int and greater zero!";
        super();
        
        this._k = k;
    }

    generateCluster(maxIterations = 100){
        this._cluster = [];
        if(this._dataset.length < this._k)throw "Dataset must be more elements then "+this._k;

        for(let k = 0; k < this._k; k++){   //INIT CLUSTER
            let min = 0, max = this._dataset.length;

            let randomIndex = Math.floor( Math.random() * max) + min;
            this._cluster.push(  new Cluster().setCentroidValue( this._dataset[randomIndex].durationTimestamp ) );
        }

        for(let i = 0; i < maxIterations; i++){    //Zuordnung
            let noRecordSwitchedCluster = true;
            this._dataset.forEach( note => {
                let bestCluster = this.getNearestCluster( note );

                if(!note.hasOwnProperty('lastCluster')){
                    noRecordSwitchedCluster = false;
                }else{
                    if(note.lastCluster !== bestCluster.id)noRecordSwitchedCluster = false;
                }

                note.lastCluster = bestCluster.id;
                bestCluster.addElement( note );
            });

            if(noRecordSwitchedCluster){
                break;
            }

            this._cluster.forEach( cluster => { //Aktualisierung
                cluster.calcCentroid();
                cluster.dumpElements();
            });
        }
        return this;
    }

    getNearestCluster( note ){
        var minCluster = this._cluster[0];
        this._cluster.forEach( cluster => {
            if( cluster.getDistance(note) < minCluster.getDistance(note)){
                minCluster = cluster;
            }
        });
        return minCluster;
    }

    _getClusterIdOfRecord( note ){
        return this.getNearestCluster(note).id;
    }
}

module.exports = kMeans;

/***/ }),

/***/ "./src/Processing/NoteProcessor.js":
/*!*****************************************!*\
  !*** ./src/Processing/NoteProcessor.js ***!
  \*****************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

const BPM = __webpack_require__(/*! ../Utils/BPM */ "./src/Utils/BPM.js");
const OSMD = __webpack_require__(/*! ../OSMD/index */ "./src/OSMD/index.js");
const {Composition, Part, Measure} = __webpack_require__(/*! ../MusicXML/Composition */ "./src/MusicXML/Composition.js");
const DBSCAN = __webpack_require__(/*! ./Clustering/dbscan */ "./src/Processing/Clustering/dbscan.js");
const KMeans = __webpack_require__(/*! ./Clustering/k-means */ "./src/Processing/Clustering/k-means.js");
const Note = __webpack_require__(/*! ../Utils/Note */ "./src/Utils/Note.js");

class NoteProcessor{

    constructor(){
        this._notes = [];
        this._composition = new Composition().setTitle("Note-Writer");
        this._part = new Part('P1').setName('Beethovens Piano');
        this._osmd = OSMD;


        this._k = 2;
        this._e = 200;

        this._classificationTimes = [6,12,24,48,96];
        this._composition.addPart( this._part );
    }

    initComposition(){
        this._composition = new Composition().setTitle("Note-Writer");
        this._part = new Part('P1').setName('Beethovens Piano');

        this._composition.addPart( this._part );
        OSMD.renderMusicXML( this._composition.toMusicXML() );
    }

    get notes(){
        return this._notes;
    }

    pushNote(note){
        this._notes.push(note);
        return this;
    }

    clearNotes(){
        this._notes = [];
        return this;
    }

    processNoteDurationDBSCAN(){
        this.initComposition();
        let dbscan = new DBSCAN( this._e ).setDataset( this._notes ).generateCluster(); 

        this._map = dbscan.getClusterCentroidMap();
    

        this._map.forEach( (clusterMap, index) => {
            if(index === 0){
                clusterMap.duration = 12;
            }else{
                let calculatedDuration = (clusterMap.centroid / this._map[0].centroid) * 12;
                let nearestDuration = 12;
                this._classificationTimes.forEach( duration => {
                    if(Math.abs(duration-calculatedDuration) < nearestDuration)nearestDuration = duration;
                });
                clusterMap.duration = nearestDuration;
            }
        });

        console.log(this._map);
        
        this._notes.sort( (a,b) => {
            return (a.timestampStart - b.timestampStart);
        }).forEach( note => {
            let clusterId = dbscan.getClusterIdOfRecord( note );
            let duration = this._map.filter( element => element.cluster_id === clusterId)[0].duration;
            note.setDuration( duration);
        });

        /*for(let i = 0; i < (this._notes.length-1); i++){
            console.log("NOTE "+i);
            let note1 = this._notes[i];
            let note2 = this._notes[i+1];

            let restTime = note2.timestampStart - note1.timestampEnd;
            try{
                let restNote = new Note()
                    .setTimestampStart( note1.timestampEnd + 1)
                    .setTimestampEnd( note2.timestampStart - 1 );
                let clusterId = dbscan4.getClusterIdOfRecord( restNote );
                let duration = map.filter( el => el.cluster_id === clusterId)[0].duration;
                
                restNote.setDuration( duration ); 
                
                this._notes.splice( i+1, 0, restNote);
            }catch(e){} //not clusterable
        }*/

        this._notes.forEach( note => this._part.addNote( note ));        
        OSMD.renderMusicXML( this._composition.toMusicXML() );
    }

    processNoteDurationKMEANS(){
        this.initComposition();
        let dbscan4 = new KMeans( this._k ).setDataset( this._notes ).generateCluster();

        this._map = dbscan4.getClusterCentroidMap();
    
        this._map.forEach( (clusterMap, index) => {
            if(index === 0){
                clusterMap.duration = 12;
            }else{
                let calculatedDuration = (clusterMap.centroid / this._map[0].centroid) * 12;
                let nearestDuration = 12;
                this._classificationTimes.forEach( duration => {
                    if(Math.abs(duration-calculatedDuration) < nearestDuration)nearestDuration = duration;
                });
                clusterMap.duration = nearestDuration;
            }
        });

        console.log( this._map);
        
        this._notes.sort( (a,b) => {
            return (a.timestampStart - b.timestampStart);
        }).forEach( note => {
            let clusterId = dbscan4.getClusterIdOfRecord( note );
            let duration = this._map.filter( element => element.cluster_id === clusterId)[0].duration;
            note.setDuration( duration);
        });

        /*for(let i = 0; i < (this._notes.length-1); i++){
            console.log("NOTE "+i);
            let note1 = this._notes[i];
            let note2 = this._notes[i+1];

            let restTime = note2.timestampStart - note1.timestampEnd;
            try{
                let restNote = new Note()
                    .setTimestampStart( note1.timestampEnd + 1)
                    .setTimestampEnd( note2.timestampStart - 1 );
                let clusterId = dbscan4.getClusterIdOfRecord( restNote );
                let duration = map.filter( el => el.cluster_id === clusterId)[0].duration;
                
                restNote.setDuration( duration ); 
                
                this._notes.splice( i+1, 0, restNote);
            }catch(e){} //not clusterable
        }*/

        this._notes.forEach( note => this._part.addNote( note ));        
        OSMD.renderMusicXML( this._composition.toMusicXML() );
    }


    downloadNotesheet(){
        this._composition.download();
    }
}

module.exports = NoteProcessor;

/***/ }),

/***/ "./src/Utils/BPM.js":
/*!**************************!*\
  !*** ./src/Utils/BPM.js ***!
  \**************************/
/*! no static exports found */
/***/ (function(module, exports) {

class BPM{

    constructor(){
        this.CLASSIFICATION_80_140 = [
            {
                type: 'whole',
                duration: 96,
                upperBound: 3000,
                lowerBound: 1710
            },
            {
                type: 'half',
                duration: 48,
                upperBound: 1500,
                lowerBound: 860
            },
            {
                type: 'quarter',
                duration: 24,
                upperBound: 750,
                lowerBound: 430
            },
            {
                type: 'eighth',
                duration: 12,
                upperBound: 380,
                lowerBound: 210
            },
            {
                type: '16th',
                duration: 6,
                upperBound: 190,
                lowerBound: 110
            }
        ];
    }


    GET_DURATION_C80140( startTS, endTS ){
        const duration = endTS - startTS;

        this.CLASSIFICATION_80_140.forEach( bpmClass => {
            if(duration < bpmClass.upperBound && duration > bpmClass.lowerBound){
                return ( bpmClass.duration );
            }
        });

        return 12;
    }
}

module.exports = new BPM();

/***/ }),

/***/ "./src/Utils/Note.js":
/*!***************************!*\
  !*** ./src/Utils/Note.js ***!
  \***************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

const MusicXMLParser = __webpack_require__(/*! ../MusicXML/MusicXMLParser */ "./src/MusicXML/MusicXMLParser.js");

class Note extends MusicXMLParser{
    constructor(){
        super();
        this._step = null;
        this._octave = null;
        this._alter = null;
        this._duration = null;

        this._timestampStart = null;
        this._timestampEnd = null;
        this._velocity = 1;
    }

    get step(){ return this._step; }
    get octave(){ return this._octave; }
    get alter(){ return this._alter; }
    get duration(){ return this._duration; }
    get type(){
        let theDurationType = Note.TYPES.filter( durationType => {
            return durationType.duration === this.duration;
        })[0];
        return theDurationType ? theDurationType.type : null;
    }
    
    get durationTimestamp(){ return parseInt(this.timestampEnd - this.timestampStart); }
    get timestampStart(){ return (this._timestampStart); }
    get timestampEnd(){ return (this._timestampEnd); }
    get velocity(){ return this._velocity; }
    hasEnded(){ return this._timestampEnd !== null;}

    get isRest(){ return (this.step === null || this.octave === null); }

    get color(){
        let noteColor = '#FF6EFF';
        switch (this.duration) {
            case 6:
                noteColor = '#FF8A24';
                break;
            case 12:
                noteColor = '#C430FF';
                break;
            case 24:
                noteColor = '#E82320';
                break;
            case 48:
                noteColor = '#203AE8';
                break;
            case 96:
                noteColor = '#0DF3FF';
                break;
        }
        return noteColor;
    }

    setStep(step){
        if(typeof step !== 'string')throw "Invalid step ("+step+") given in! Must be String!";
        if(step.includes('#')){
            step = step.replace('#', '');
            this.setAlter(1);
        }
        if(step.includes('b')){
            step = step.replace('b', '');
            this.setAlter(-1);
        }
        step = step.toUpperCase();
        if(!Note.VALID_STEPS.includes(step))throw "Invalid step ("+step+") given in!";
        this._step = step; 
        return this; 
    }
    setOctave(octave){ 
        if(!Number.isInteger(octave) || octave < 0)throw "Invalid octave ("+octave+") given in!";
        this._octave = octave; 
        return this; 
    }
    setAlter(alter){ 
        if(!Number.isInteger(alter) || alter < -2 || alter > 2)throw "Invalid alter ("+alter+") given in!";
        this._alter = alter; 
        return this;
    }
    setDuration(duration){
        if(!Number.isInteger(duration) || duration < 0)throw "Invalid duration ("+duration+") given in!";
        this._duration = duration;
        return this;
    }

    setTimestampStart(timestamp){  this._timestampStart = timestamp; return this; }
    setTimestampEnd(timestamp){  this._timestampEnd = timestamp; return this; }
    setVelocity(velocity){ this._velocity = velocity; return this; }
    

    toString(){
        return ""+this.step+this.octave;
    }

    toMusicXMLinJSON(){
        if(this.duration === null)throw "Duration is not set. Cant construct MusicXML Note.";
        const toneJSON = {}
        if(this.isRest){
            toneJSON.note = {
                    rest: { }
                };
        }else{
            toneJSON.note = {
                    pitch: {
                        step: { _text: this.step },
                        octave: { _text: this.octave}
                    },
                };
        }

        toneJSON.note.duration = { _text: this.duration };
              
        if(this.alter !== null){
            toneJSON.note.pitch['alter'] = { _text: this.alter };
        }

        if(this.type !== null){
            toneJSON.note.type = { _text: this.type };
        }

        return toneJSON;
    }

    toJSON(){
        const jsonObj = {};

        //add all private (_note) attributes to json
        const attributes = Object.getOwnPropertyNames(this);
        attributes.forEach( key => {
            if(key.charAt(0) === '_'){
                jsonObj[key.substring(1, key.length)] = this[key];
            }
        });


        jsonObj['durationTimestamp'] = this.durationTimestamp;
        jsonObj['isRest'] = this.isRest;
        jsonObj['type'] = this.type;
        jsonObj['velocity'] = this.velocity;

        return jsonObj;
    }

    static equals(n1, n2){
        return (n1.step === n2.step) && (n1.octave === n2.octave) && (n1.alter === n2.alter);
    }

    static validate( note ){
        if(!(note instanceof Note))throw "Parameter given in must be type of Note!";
        return true;
    }

    static clone( note ){
        if (null == note || "object" != typeof note) return note;
        var copy = new Note();
        for (var attr in note) {
            if (note.hasOwnProperty(attr)) copy[attr] = note[attr];
        }
        return copy;
    }
}

Note.VALID_STEPS = ['A', 'B', 'C', 'D', 'E', 'F', 'G'];
Note.TYPES = [ 
    { duration: 96, type: 'whole'},
    { duration: 48, type: 'half'},
    { duration: 24, type: 'quarter'},
    { duration: 12, type: 'eighth'},
    { duration: 6, type: '16th'},
    { duration: 3, type: '32nd'},    
];

module.exports = Note;

/***/ }),

/***/ "./src/Utils/NoteStream.js":
/*!*********************************!*\
  !*** ./src/Utils/NoteStream.js ***!
  \*********************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

const Note = __webpack_require__(/*! ./Note */ "./src/Utils/Note.js");
const MidiController = __webpack_require__(/*! ../MIDI/MIDIController */ "./src/MIDI/MIDIController.js");

class NoteStream{

    constructor(midiController){
        if(!(midiController instanceof MidiController))throw "Parameter must be a instance of MidiController!";
        this._midiController = midiController;
        this._active = true;

        this._midiController.initController().then( () => {
            this._midiController.onNoteOn( (event) => {
                this._onNote(event);
            });

            this._midiController.onNoteOff( (event) => {
                this._offNote(event);
            });
        });


        this._startedNotes = [];
        this._callbacks = [];
    }

    registerCallback( callback ){
        if(typeof callback !== "function")throw "Parameter must be function!";
        this._callbacks.push(callback);
        return this;
    }

    setActive(){
        this._active = true;
        return this;
    }

    setInactive(){
        this._active = false;
        return this;
    }

    _onNote(event){
        this._startedNotes.push(
            new Note()
                .setStep( event.note.name )
                .setOctave( event.note.octave )
                .setTimestampStart( event.timestamp )
                .setVelocity( event.velocity )
        );
    }

    _offNote(event){
        const refNote = new Note()
            .setStep( event.note.name )
            .setOctave( event.note.octave );

        for(let i = 0; i < this._startedNotes.length; i++){
            if(Note.equals(this._startedNotes[i], refNote)){
                const offNote = this._startedNotes.splice(i, 1)[0];
                offNote.setTimestampEnd( event.timestamp );
                this._sendNote( offNote );
                break;
            }
        }
    }

    _sendNote( note ){
        if(!this._active)return;
        
        this._callbacks.forEach( callback => {
            callback(note);
        });
    }
}

module.exports = NoteStream;

/***/ }),

/***/ "./src/index.js":
/*!**********************!*\
  !*** ./src/index.js ***!
  \**********************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

const MIDIController = __webpack_require__(/*! ./MIDI/MIDIController */ "./src/MIDI/MIDIController.js");
//const MIDIRecorder = require('./MIDI/MIDIRecorder');
//const OSMD = require('./OSMD/index');
//const Note = require('./Utils/Note');
//const BPM = require('./Utils/BPM');
const NoteStream = __webpack_require__(/*! ./Utils/NoteStream */ "./src/Utils/NoteStream.js");
const NoteProcessor = __webpack_require__(/*! ./Processing/NoteProcessor */ "./src/Processing/NoteProcessor.js");
//const {Composition, Part, Measure} = require('./MusicXML/Composition');
//const NoteDump = require('./Processing/NoteDump');
const Piano = __webpack_require__(/*! ./MIDI/TonePiano */ "./src/MIDI/TonePiano.js");
//window.Note = Note;
//window.Composition = Composition;
//window.Part = Part;

//var Measure1 = new Measure(1);
/*var Measure2 = new Measure(2);
var Measure3 = new Measure(3);

Measure1
    .addNote( (new Note()).setDuration(12).setStep("C").setOctave(4) )
    .addNote( (new Note()).setDuration(12).setStep("D").setOctave(4) )
    .addNote( (new Note()).setDuration(24).setStep("E").setOctave(4) )
    .addNote( (new Note()).setDuration(12).setStep("G").setOctave(4) )
    .addNote( (new Note()).setDuration(12).setStep("E").setOctave(4) )
    .addNote( (new Note()).setDuration(24).setStep("F").setOctave(4) );
Measure2
    .addNote( (new Note()).setDuration(24).setStep("G").setOctave(4) )
    .addNote( (new Note()).setDuration(24).setStep("A").setOctave(4) )
    .addNote( (new Note()).setDuration(24).setStep("Bb").setOctave(4) )
    .addNote( (new Note()).setDuration(24).setStep("B").setOctave(4) )
    .addNote( (new Note()).setDuration(24).setStep("B#").setOctave(4) )
    .addNote( (new Note()).setDuration(24).setStep("C").setOctave(5) );

var Part1 = new Part("Piano von Lukas");
Part1
    .addMeasure( Measure1 );
    /*.addMeasure( Measure2 )
    .addMeasure( Measure3 );

var theMusic = new Composition();
theMusic.addPart(Part1);    

OSMD.renderMusicXML( theMusic.toMusicXML() );*/

var theStream = new NoteStream( new MIDIController());
theStream.setInactive();

var theProcessor = new NoteProcessor();
var thePiano = new Piano();

theStream.registerCallback( note => {
    if(note.step === 'A' && note.octave === 0){
        theProcessor.processNoteDuration();
    }else if(note.step == 'B' && note.octave === 0){
        theProcessor.downloadNotesheet();
    }else{
        theProcessor.pushNote(note); 
        thePiano.addNote( note );
    }
});

window.STREAM = theStream;
window.PROCESSOR = theProcessor;
window.PIANO = thePiano;

/*
theStream.registerCallback( note => {
    note.setDuration( BPM.GET_DURATION_C80140( note ));
    Part1.addNote( note );
    OSMD.renderMusicXML( theMusic.toMusicXML() );
});

var noteDump = new NoteDump();
theStream.registerCallback( note => {
    noteDump.addNote( note );
    if(note.step === 'C' && note.octave === 1)noteDump.downloadDump();
});*/

/*
var DigitalPiano = new MIDIController();
var Recorder = new MIDIRecorder();


DigitalPiano.initController().then( () => {

    Recorder.registerOutput( DigitalPiano.output );
    Recorder.registerNoteEndedEvent( note => {
        console.log("EVENT-BUS-DUMP");

        BPM.GET_DURATION_C80140( note );

        Part1.addNote( note );
        OSMD.renderMusicXML( theMusic.toMusicXML() );
    });


    DigitalPiano.onNoteOn( (event) => {
        console.log(event);
        switch (event.note.number) {
            case 36:
                console.log("FINAL DUMP!!!");
                Recorder.recordedNotes.forEach( note => {
                    console.log(note.durationTimestamp);
                });
                theMusic.download();
                Recorder.playRecord();
                break;
            case 38:
                Recorder.clearRecord();
                break;
            default:
                Recorder.noteOnEvent(event);
                break;
        }

    });
    DigitalPiano.onNoteOff( (event) => {
        Recorder.noteOffEvent(event);
    });
}); /**/



/***/ }),

/***/ 0:
/*!**********************!*\
  !*** util (ignored) ***!
  \**********************/
/*! no static exports found */
/***/ (function(module, exports) {

/* (ignored) */

/***/ }),

/***/ 1:
/*!**********************!*\
  !*** util (ignored) ***!
  \**********************/
/*! no static exports found */
/***/ (function(module, exports) {

/* (ignored) */

/***/ })

/******/ });
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL2Jhc2U2NC1qcy9pbmRleC5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvYnVmZmVyL2luZGV4LmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9jb3JlLXV0aWwtaXMvbGliL3V0aWwuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL2V2ZW50cy9ldmVudHMuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL2llZWU3NTQvaW5kZXguanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL2luaGVyaXRzL2luaGVyaXRzX2Jyb3dzZXIuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL2lzYXJyYXkvaW5kZXguanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL3Byb2Nlc3MtbmV4dGljay1hcmdzL2luZGV4LmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9wcm9jZXNzL2Jyb3dzZXIuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL3JlYWRhYmxlLXN0cmVhbS9kdXBsZXgtYnJvd3Nlci5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvcmVhZGFibGUtc3RyZWFtL2xpYi9fc3RyZWFtX2R1cGxleC5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvcmVhZGFibGUtc3RyZWFtL2xpYi9fc3RyZWFtX3Bhc3N0aHJvdWdoLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9yZWFkYWJsZS1zdHJlYW0vbGliL19zdHJlYW1fcmVhZGFibGUuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL3JlYWRhYmxlLXN0cmVhbS9saWIvX3N0cmVhbV90cmFuc2Zvcm0uanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL3JlYWRhYmxlLXN0cmVhbS9saWIvX3N0cmVhbV93cml0YWJsZS5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvcmVhZGFibGUtc3RyZWFtL2xpYi9pbnRlcm5hbC9zdHJlYW1zL0J1ZmZlckxpc3QuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL3JlYWRhYmxlLXN0cmVhbS9saWIvaW50ZXJuYWwvc3RyZWFtcy9kZXN0cm95LmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9yZWFkYWJsZS1zdHJlYW0vbGliL2ludGVybmFsL3N0cmVhbXMvc3RyZWFtLWJyb3dzZXIuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL3JlYWRhYmxlLXN0cmVhbS9wYXNzdGhyb3VnaC5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvcmVhZGFibGUtc3RyZWFtL3JlYWRhYmxlLWJyb3dzZXIuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL3JlYWRhYmxlLXN0cmVhbS90cmFuc2Zvcm0uanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL3JlYWRhYmxlLXN0cmVhbS93cml0YWJsZS1icm93c2VyLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9zYWZlLWJ1ZmZlci9pbmRleC5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvc2F4L2xpYi9zYXguanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL3NldGltbWVkaWF0ZS9zZXRJbW1lZGlhdGUuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL3N0cmVhbS1icm93c2VyaWZ5L2luZGV4LmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9zdHJpbmdfZGVjb2Rlci9saWIvc3RyaW5nX2RlY29kZXIuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL3RpbWVycy1icm93c2VyaWZ5L21haW4uanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL3RvbmUvYnVpbGQvVG9uZS5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvdXRpbC1kZXByZWNhdGUvYnJvd3Nlci5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvd2VibWlkaS93ZWJtaWRpLm1pbi5qcyIsIndlYnBhY2s6Ly8vKHdlYnBhY2spL2J1aWxkaW4vZ2xvYmFsLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy94bWwtanMvbGliL2FycmF5LWhlbHBlci5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMveG1sLWpzL2xpYi9pbmRleC5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMveG1sLWpzL2xpYi9qczJ4bWwuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL3htbC1qcy9saWIvanNvbjJ4bWwuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL3htbC1qcy9saWIvb3B0aW9ucy1oZWxwZXIuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL3htbC1qcy9saWIveG1sMmpzLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy94bWwtanMvbGliL3htbDJqc29uLmpzIiwid2VicGFjazovLy8uL3NyYy9NSURJL01JRElDb250cm9sbGVyLmpzIiwid2VicGFjazovLy8uL3NyYy9NSURJL1RvbmVQaWFuby5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvTXVzaWNYTUwvQ29tcG9zaXRpb24uanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL011c2ljWE1ML0NvbXBvc2l0aW9uRWxlbWVudHMvTWVhc3VyZS5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvTXVzaWNYTUwvQ29tcG9zaXRpb25FbGVtZW50cy9QYXJ0LmpzIiwid2VicGFjazovLy8uL3NyYy9NdXNpY1hNTC9NdXNpY1hNTFBhcnNlci5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvT1NNRC9pbmRleC5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvUHJvY2Vzc2luZy9DbHVzdGVyaW5nL0NsdXN0ZXJBbGdvcml0aG0uanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL1Byb2Nlc3NpbmcvQ2x1c3RlcmluZy9VdGlscy5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvUHJvY2Vzc2luZy9DbHVzdGVyaW5nL2Ric2Nhbi5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvUHJvY2Vzc2luZy9DbHVzdGVyaW5nL2stbWVhbnMuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL1Byb2Nlc3NpbmcvTm90ZVByb2Nlc3Nvci5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvVXRpbHMvQlBNLmpzIiwid2VicGFjazovLy8uL3NyYy9VdGlscy9Ob3RlLmpzIiwid2VicGFjazovLy8uL3NyYy9VdGlscy9Ob3RlU3RyZWFtLmpzIiwid2VicGFjazovLy8uL3NyYy9pbmRleC5qcyIsIndlYnBhY2s6Ly8vdXRpbCAoaWdub3JlZCkiLCJ3ZWJwYWNrOi8vL3V0aWwgKGlnbm9yZWQpP2M5M2QiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IjtRQUFBO1FBQ0E7O1FBRUE7UUFDQTs7UUFFQTtRQUNBO1FBQ0E7UUFDQTtRQUNBO1FBQ0E7UUFDQTtRQUNBO1FBQ0E7UUFDQTs7UUFFQTtRQUNBOztRQUVBO1FBQ0E7O1FBRUE7UUFDQTtRQUNBOzs7UUFHQTtRQUNBOztRQUVBO1FBQ0E7O1FBRUE7UUFDQTtRQUNBO1FBQ0EsMENBQTBDLGdDQUFnQztRQUMxRTtRQUNBOztRQUVBO1FBQ0E7UUFDQTtRQUNBLHdEQUF3RCxrQkFBa0I7UUFDMUU7UUFDQSxpREFBaUQsY0FBYztRQUMvRDs7UUFFQTtRQUNBO1FBQ0E7UUFDQTtRQUNBO1FBQ0E7UUFDQTtRQUNBO1FBQ0E7UUFDQTtRQUNBO1FBQ0EseUNBQXlDLGlDQUFpQztRQUMxRSxnSEFBZ0gsbUJBQW1CLEVBQUU7UUFDckk7UUFDQTs7UUFFQTtRQUNBO1FBQ0E7UUFDQSwyQkFBMkIsMEJBQTBCLEVBQUU7UUFDdkQsaUNBQWlDLGVBQWU7UUFDaEQ7UUFDQTtRQUNBOztRQUVBO1FBQ0Esc0RBQXNELCtEQUErRDs7UUFFckg7UUFDQTs7O1FBR0E7UUFDQTs7Ozs7Ozs7Ozs7OztBQ2xGWTs7QUFFWjtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0Esa0NBQWtDLFNBQVM7QUFDM0M7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0EsYUFBYSxTQUFTO0FBQ3RCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxxQkFBcUIsU0FBUztBQUM5QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLDBDQUEwQyxVQUFVO0FBQ3BEO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOzs7Ozs7Ozs7Ozs7O0FDdkpBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVZOztBQUVaLGFBQWEsbUJBQU8sQ0FBQyxvREFBVztBQUNoQyxjQUFjLG1CQUFPLENBQUMsZ0RBQVM7QUFDL0IsY0FBYyxtQkFBTyxDQUFDLGdEQUFTOztBQUUvQjtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EscUJBQXFCLG1EQUFtRDtBQUN4RTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsbUJBQW1CLFVBQVU7QUFDN0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCLFlBQVk7QUFDN0I7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQSxHQUFHO0FBQ0g7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLDBCQUEwQjtBQUMxQjtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTs7QUFFQSx1Q0FBdUMsU0FBUztBQUNoRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxlQUFlLGlCQUFpQjtBQUNoQztBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLGFBQWEsaUJBQWlCO0FBQzlCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQixTQUFTO0FBQzFCO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUIsU0FBUztBQUMxQjtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUIsU0FBUztBQUMxQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGdEQUFnRCxFQUFFO0FBQ2xEO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBLGlCQUFpQixTQUFTO0FBQzFCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx5Q0FBeUM7QUFDekM7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLHdCQUF3QixlQUFlO0FBQ3ZDO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBLHdCQUF3QixRQUFRO0FBQ2hDO0FBQ0EscUJBQXFCLGVBQWU7QUFDcEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCLFlBQVk7QUFDN0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBLHFCQUFxQixTQUFTO0FBQzlCO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQSxxQkFBcUIsU0FBUztBQUM5QjtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQSxxQkFBcUIsU0FBUztBQUM5QjtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUIsa0JBQWtCO0FBQ25DO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQSxtQkFBbUIsY0FBYztBQUNqQztBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsdURBQXVELE9BQU87QUFDOUQ7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLHVEQUF1RCxPQUFPO0FBQzlEO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLGtCQUFrQjtBQUNsQjtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLHFCQUFxQixRQUFRO0FBQzdCO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQSxlQUFlLFNBQVM7QUFDeEI7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQSxtQkFBbUIsU0FBUztBQUM1QjtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZUFBZSxpQkFBaUI7QUFDaEM7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSxpQkFBaUIsWUFBWTtBQUM3Qjs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsaUJBQWlCLGdCQUFnQjtBQUNqQztBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQixnQkFBZ0I7QUFDakM7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0EsaUJBQWlCLFlBQVk7QUFDN0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7Ozs7QUM1dkRBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBOzs7Ozs7Ozs7Ozs7OztBQzFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVhOztBQUViO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQzs7QUFFRDs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxpQkFBaUIsc0JBQXNCO0FBQ3ZDOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGVBQWU7QUFDZjtBQUNBO0FBQ0E7QUFDQTtBQUNBLGNBQWM7QUFDZDs7QUFFQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBLG1CQUFtQixTQUFTO0FBQzVCO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBLEtBQUs7QUFDTDtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLGlCQUFpQixzQkFBc0I7QUFDdkM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0EsZUFBZTtBQUNmO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQOztBQUVBLGlDQUFpQyxRQUFRO0FBQ3pDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxtQkFBbUIsaUJBQWlCO0FBQ3BDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0Esc0NBQXNDLFFBQVE7QUFDOUM7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLGlCQUFpQixPQUFPO0FBQ3hCO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLFFBQVEseUJBQXlCO0FBQ2pDO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsaUJBQWlCLGdCQUFnQjtBQUNqQztBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7O0FDL2JBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxRQUFRLFdBQVc7O0FBRW5CO0FBQ0E7QUFDQTtBQUNBLFFBQVEsV0FBVzs7QUFFbkI7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBOztBQUVBLFFBQVEsV0FBVzs7QUFFbkI7QUFDQTtBQUNBLFFBQVEsVUFBVTs7QUFFbEI7QUFDQTs7Ozs7Ozs7Ozs7O0FDbkZBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0EsQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7OztBQzFCQSxpQkFBaUI7O0FBRWpCO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7OztBQ0pBLCtDQUFhOztBQUViO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esb0JBQW9CO0FBQ3BCLENBQUM7QUFDRDtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBOzs7Ozs7Ozs7Ozs7OztBQzNDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7OztBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7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QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLHNDQUFzQzs7QUFFdEM7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHdEQUF3RDtBQUN4RDtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsWUFBWTtBQUNaO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQSw0Q0FBNEM7O0FBRTVDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLG9CQUFvQjs7QUFFcEI7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSxtQkFBbUIsU0FBUztBQUM1QjtBQUNBLEtBQUs7QUFDTDs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLEdBQUc7O0FBRUg7QUFDQTtBQUNBOztBQUVBO0FBQ0EsNEVBQTRFOztBQUU1RTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7O0FBRUE7QUFDQSxpQkFBaUIseUJBQXlCO0FBQzFDO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7O0FBRUQ7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLG1EQUFtRDtBQUNuRDtBQUNBLG1EQUFtRCxpRUFBaUU7QUFDcEg7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxzQ0FBc0M7QUFDdEM7QUFDQTtBQUNBO0FBQ0E7QUFDQSx1Q0FBdUM7QUFDdkMsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FB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QUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7O0FBRUE7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLGlDQUFpQzs7QUFFakM7O0FBRUEsMkNBQTJDO0FBQzNDO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQzs7QUFFRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxtREFBbUQ7QUFDbkQ7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUEsb0RBQW9EO0FBQ3BEO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSx5Q0FBeUM7QUFDekM7QUFDQTtBQUNBO0FBQ0E7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QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHOztBQUVIO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSw0QkFBNEIscUNBQXFDOztBQUVqRTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsWUFBWTtBQUNaOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVztBQUNYLFNBQVM7QUFDVDs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxtREFBbUQsT0FBTztBQUMxRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnREFBZ0Qsb0JBQW9CO0FBQ3BFLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscUNBQXFDO0FBQ3JDOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVztBQUNYO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXO0FBQ1g7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLFdBQVc7QUFDWDtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVztBQUNYO0FBQ0EsV0FBVztBQUNYO0FBQ0E7QUFDQSxXQUFXO0FBQ1g7QUFDQTtBQUNBLFdBQVc7QUFDWDtBQUNBO0FBQ0EsV0FBVztBQUNYO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVc7QUFDWDtBQUNBO0FBQ0E7QUFDQSxXQUFXO0FBQ1g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXO0FBQ1g7QUFDQTtBQUNBO0FBQ0EsV0FBVztBQUNYO0FBQ0E7QUFDQSxXQUFXO0FBQ1g7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXO0FBQ1g7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXO0FBQ1g7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsV0FBVztBQUNYO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVztBQUNYO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVztBQUNYO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxXQUFXO0FBQ1g7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLFdBQVc7QUFDWDtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVztBQUNYO0FBQ0EsV0FBVztBQUNYO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLFdBQVc7QUFDWDtBQUNBLFdBQVc7QUFDWDtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsV0FBVztBQUNYO0FBQ0EsV0FBVztBQUNYO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQSxXQUFXO0FBQ1g7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsV0FBVztBQUNYO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVc7QUFDWDtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVc7QUFDWDtBQUNBLFdBQVc7QUFDWDtBQUNBLFdBQVc7QUFDWDtBQUNBO0FBQ0E7QUFDQSxXQUFXO0FBQ1g7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLFdBQVc7QUFDWDtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVc7QUFDWDtBQUNBLFdBQVc7QUFDWDtBQUNBLFdBQVc7QUFDWDtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsV0FBVztBQUNYO0FBQ0EsV0FBVztBQUNYO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLFdBQVc7QUFDWDtBQUNBO0FBQ0EsV0FBVztBQUNYO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxXQUFXO0FBQ1g7QUFDQSxXQUFXO0FBQ1g7QUFDQSxXQUFXO0FBQ1g7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXO0FBQ1g7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVztBQUNYO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQSxlQUFlO0FBQ2Y7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0EsV0FBVztBQUNYO0FBQ0EsV0FBVztBQUNYO0FBQ0EsV0FBVztBQUNYO0FBQ0E7QUFDQTtBQUNBLFdBQVc7QUFDWDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVztBQUNYO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLHNCQUFzQjtBQUN0QjtBQUNBO0FBQ0E7QUFDQSxXQUFXO0FBQ1g7QUFDQSxXQUFXO0FBQ1g7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxLQUFLOztBQUVMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esb0NBQW9DO0FBQ3BDO0FBQ0EsV0FBVyxPQUFPLHNCQUFzQjtBQUN4QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVCxPQUFPO0FBQ1A7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBLENBQUMsRUFBRSxNQUE4QixHQUFHLFNBQWE7Ozs7Ozs7Ozs7Ozs7QUM1aERqRDtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQSx1QkFBdUI7QUFDdkI7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxQkFBcUIsaUJBQWlCO0FBQ3RDO0FBQ0E7QUFDQTtBQUNBLGtCQUFrQjtBQUNsQjtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSwwQ0FBMEMsc0JBQXNCLEVBQUU7QUFDbEU7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSx5Q0FBeUM7QUFDekM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLFVBQVU7QUFDVjtBQUNBOztBQUVBLEtBQUs7QUFDTDtBQUNBOztBQUVBLEtBQUs7QUFDTDtBQUNBOztBQUVBLEtBQUs7QUFDTDtBQUNBOztBQUVBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLENBQUM7Ozs7Ozs7Ozs7Ozs7QUN6TEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQSxTQUFTLG1CQUFPLENBQUMsK0NBQVE7QUFDekIsZUFBZSxtQkFBTyxDQUFDLDZEQUFVOztBQUVqQztBQUNBLGtCQUFrQixtQkFBTyxDQUFDLHVGQUE2QjtBQUN2RCxrQkFBa0IsbUJBQU8sQ0FBQyx1RkFBNkI7QUFDdkQsZ0JBQWdCLG1CQUFPLENBQUMsbUZBQTJCO0FBQ25ELG1CQUFtQixtQkFBTyxDQUFDLGlGQUE4QjtBQUN6RCxxQkFBcUIsbUJBQU8sQ0FBQyxxRkFBZ0M7O0FBRTdEO0FBQ0E7Ozs7QUFJQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7OztBQUdBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZUFBZTtBQUNmO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7O0FBRUE7O0FBRUE7QUFDQTtBQUNBOzs7Ozs7Ozs7Ozs7O0FDOUhBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRWE7O0FBRWI7O0FBRUEsYUFBYSxtQkFBTyxDQUFDLHdEQUFhO0FBQ2xDOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw0QkFBNEI7QUFDNUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSw2QkFBNkIsc0NBQXNDLHNDQUFzQztBQUN6RztBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDJCQUEyQjtBQUMzQjtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNB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O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxtQkFBbUI7QUFDbkIsNEJBQTRCLFNBQVM7QUFDckMsa0NBQWtDLHNCQUFzQixzQkFBc0I7QUFDOUU7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxlQUFlLDZCQUE2QjtBQUM1QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsY0FBYztBQUNkO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsY0FBYztBQUNkO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsY0FBYztBQUNkO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsY0FBYztBQUNkO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsY0FBYztBQUNkO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsY0FBYztBQUNkO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsY0FBYztBQUNkO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCLGtCQUFrQjtBQUNuQztBQUNBLDBGQUEwRjtBQUMxRiwyS0FBMks7QUFDM0ssa0VBQWtFO0FBQ2xFLCtJQUErSTtBQUMvSSxrSkFBa0o7QUFDbEoseUhBQXlIO0FBQ3pILHlIQUF5SDtBQUN6SDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7O0FDL1RBLDJEQUFhLG1CQUFPLENBQUMsd0RBQWE7O0FBRWxDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7OztBQ2pCQSxjQUFjLG1CQUFPLENBQUMsaUVBQWdCOztBQUV0Qzs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7O0FBRUg7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHOztBQUVIO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7O0FBRUg7QUFDQTtBQUNBOztBQUVBOzs7Ozs7Ozs7Ozs7QUMxQ0EsVUFBVSxtQkFBTyxDQUFDLDBDQUFLO0FBQ3ZCLG9DQUFvQyxNQUFNLGtCQUFrQixFQUFFLHNCQUFzQixFQUFFO0FBQ3RGLGFBQWEsbUJBQU8sQ0FBQyxxRUFBa0I7QUFDdkMsY0FBYyxtQkFBTyxDQUFDLGlFQUFnQjs7QUFFdEM7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXO0FBQ1g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7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aWxlIjoibm90ZS13cml0ZXIuanMiLCJzb3VyY2VzQ29udGVudCI6WyIgXHQvLyBUaGUgbW9kdWxlIGNhY2hlXG4gXHR2YXIgaW5zdGFsbGVkTW9kdWxlcyA9IHt9O1xuXG4gXHQvLyBUaGUgcmVxdWlyZSBmdW5jdGlvblxuIFx0ZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuXG4gXHRcdC8vIENoZWNrIGlmIG1vZHVsZSBpcyBpbiBjYWNoZVxuIFx0XHRpZihpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSkge1xuIFx0XHRcdHJldHVybiBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXS5leHBvcnRzO1xuIFx0XHR9XG4gXHRcdC8vIENyZWF0ZSBhIG5ldyBtb2R1bGUgKGFuZCBwdXQgaXQgaW50byB0aGUgY2FjaGUpXG4gXHRcdHZhciBtb2R1bGUgPSBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSA9IHtcbiBcdFx0XHRpOiBtb2R1bGVJZCxcbiBcdFx0XHRsOiBmYWxzZSxcbiBcdFx0XHRleHBvcnRzOiB7fVxuIFx0XHR9O1xuXG4gXHRcdC8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvblxuIFx0XHRtb2R1bGVzW21vZHVsZUlkXS5jYWxsKG1vZHVsZS5leHBvcnRzLCBtb2R1bGUsIG1vZHVsZS5leHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKTtcblxuIFx0XHQvLyBGbGFnIHRoZSBtb2R1bGUgYXMgbG9hZGVkXG4gXHRcdG1vZHVsZS5sID0gdHJ1ZTtcblxuIFx0XHQvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZVxuIFx0XHRyZXR1cm4gbW9kdWxlLmV4cG9ydHM7XG4gXHR9XG5cblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGVzIG9iamVjdCAoX193ZWJwYWNrX21vZHVsZXNfXylcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubSA9IG1vZHVsZXM7XG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlIGNhY2hlXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmMgPSBpbnN0YWxsZWRNb2R1bGVzO1xuXG4gXHQvLyBkZWZpbmUgZ2V0dGVyIGZ1bmN0aW9uIGZvciBoYXJtb255IGV4cG9ydHNcbiBcdF9fd2VicGFja19yZXF1aXJlX18uZCA9IGZ1bmN0aW9uKGV4cG9ydHMsIG5hbWUsIGdldHRlcikge1xuIFx0XHRpZighX193ZWJwYWNrX3JlcXVpcmVfXy5vKGV4cG9ydHMsIG5hbWUpKSB7XG4gXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIG5hbWUsIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBnZXR0ZXIgfSk7XG4gXHRcdH1cbiBcdH07XG5cbiBcdC8vIGRlZmluZSBfX2VzTW9kdWxlIG9uIGV4cG9ydHNcbiBcdF9fd2VicGFja19yZXF1aXJlX18uciA9IGZ1bmN0aW9uKGV4cG9ydHMpIHtcbiBcdFx0aWYodHlwZW9mIFN5bWJvbCAhPT0gJ3VuZGVmaW5lZCcgJiYgU3ltYm9sLnRvU3RyaW5nVGFnKSB7XG4gXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFN5bWJvbC50b1N0cmluZ1RhZywgeyB2YWx1ZTogJ01vZHVsZScgfSk7XG4gXHRcdH1cbiBcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICdfX2VzTW9kdWxlJywgeyB2YWx1ZTogdHJ1ZSB9KTtcbiBcdH07XG5cbiBcdC8vIGNyZWF0ZSBhIGZha2UgbmFtZXNwYWNlIG9iamVjdFxuIFx0Ly8gbW9kZSAmIDE6IHZhbHVlIGlzIGEgbW9kdWxlIGlkLCByZXF1aXJlIGl0XG4gXHQvLyBtb2RlICYgMjogbWVyZ2UgYWxsIHByb3BlcnRpZXMgb2YgdmFsdWUgaW50byB0aGUgbnNcbiBcdC8vIG1vZGUgJiA0OiByZXR1cm4gdmFsdWUgd2hlbiBhbHJlYWR5IG5zIG9iamVjdFxuIFx0Ly8gbW9kZSAmIDh8MTogYmVoYXZlIGxpa2UgcmVxdWlyZVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy50ID0gZnVuY3Rpb24odmFsdWUsIG1vZGUpIHtcbiBcdFx0aWYobW9kZSAmIDEpIHZhbHVlID0gX193ZWJwYWNrX3JlcXVpcmVfXyh2YWx1ZSk7XG4gXHRcdGlmKG1vZGUgJiA4KSByZXR1cm4gdmFsdWU7XG4gXHRcdGlmKChtb2RlICYgNCkgJiYgdHlwZW9mIHZhbHVlID09PSAnb2JqZWN0JyAmJiB2YWx1ZSAmJiB2YWx1ZS5fX2VzTW9kdWxlKSByZXR1cm4gdmFsdWU7XG4gXHRcdHZhciBucyA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG4gXHRcdF9fd2VicGFja19yZXF1aXJlX18ucihucyk7XG4gXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShucywgJ2RlZmF1bHQnLCB7IGVudW1lcmFibGU6IHRydWUsIHZhbHVlOiB2YWx1ZSB9KTtcbiBcdFx0aWYobW9kZSAmIDIgJiYgdHlwZW9mIHZhbHVlICE9ICdzdHJpbmcnKSBmb3IodmFyIGtleSBpbiB2YWx1ZSkgX193ZWJwYWNrX3JlcXVpcmVfXy5kKG5zLCBrZXksIGZ1bmN0aW9uKGtleSkgeyByZXR1cm4gdmFsdWVba2V5XTsgfS5iaW5kKG51bGwsIGtleSkpO1xuIFx0XHRyZXR1cm4gbnM7XG4gXHR9O1xuXG4gXHQvLyBnZXREZWZhdWx0RXhwb3J0IGZ1bmN0aW9uIGZvciBjb21wYXRpYmlsaXR5IHdpdGggbm9uLWhhcm1vbnkgbW9kdWxlc1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5uID0gZnVuY3Rpb24obW9kdWxlKSB7XG4gXHRcdHZhciBnZXR0ZXIgPSBtb2R1bGUgJiYgbW9kdWxlLl9fZXNNb2R1bGUgP1xuIFx0XHRcdGZ1bmN0aW9uIGdldERlZmF1bHQoKSB7IHJldHVybiBtb2R1bGVbJ2RlZmF1bHQnXTsgfSA6XG4gXHRcdFx0ZnVuY3Rpb24gZ2V0TW9kdWxlRXhwb3J0cygpIHsgcmV0dXJuIG1vZHVsZTsgfTtcbiBcdFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kKGdldHRlciwgJ2EnLCBnZXR0ZXIpO1xuIFx0XHRyZXR1cm4gZ2V0dGVyO1xuIFx0fTtcblxuIFx0Ly8gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm8gPSBmdW5jdGlvbihvYmplY3QsIHByb3BlcnR5KSB7IHJldHVybiBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqZWN0LCBwcm9wZXJ0eSk7IH07XG5cbiBcdC8vIF9fd2VicGFja19wdWJsaWNfcGF0aF9fXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnAgPSBcIlwiO1xuXG5cbiBcdC8vIExvYWQgZW50cnkgbW9kdWxlIGFuZCByZXR1cm4gZXhwb3J0c1xuIFx0cmV0dXJuIF9fd2VicGFja19yZXF1aXJlX18oX193ZWJwYWNrX3JlcXVpcmVfXy5zID0gXCIuL3NyYy9pbmRleC5qc1wiKTtcbiIsIid1c2Ugc3RyaWN0J1xuXG5leHBvcnRzLmJ5dGVMZW5ndGggPSBieXRlTGVuZ3RoXG5leHBvcnRzLnRvQnl0ZUFycmF5ID0gdG9CeXRlQXJyYXlcbmV4cG9ydHMuZnJvbUJ5dGVBcnJheSA9IGZyb21CeXRlQXJyYXlcblxudmFyIGxvb2t1cCA9IFtdXG52YXIgcmV2TG9va3VwID0gW11cbnZhciBBcnIgPSB0eXBlb2YgVWludDhBcnJheSAhPT0gJ3VuZGVmaW5lZCcgPyBVaW50OEFycmF5IDogQXJyYXlcblxudmFyIGNvZGUgPSAnQUJDREVGR0hJSktMTU5PUFFSU1RVVldYWVphYmNkZWZnaGlqa2xtbm9wcXJzdHV2d3h5ejAxMjM0NTY3ODkrLydcbmZvciAodmFyIGkgPSAwLCBsZW4gPSBjb2RlLmxlbmd0aDsgaSA8IGxlbjsgKytpKSB7XG4gIGxvb2t1cFtpXSA9IGNvZGVbaV1cbiAgcmV2TG9va3VwW2NvZGUuY2hhckNvZGVBdChpKV0gPSBpXG59XG5cbi8vIFN1cHBvcnQgZGVjb2RpbmcgVVJMLXNhZmUgYmFzZTY0IHN0cmluZ3MsIGFzIE5vZGUuanMgZG9lcy5cbi8vIFNlZTogaHR0cHM6Ly9lbi53aWtpcGVkaWEub3JnL3dpa2kvQmFzZTY0I1VSTF9hcHBsaWNhdGlvbnNcbnJldkxvb2t1cFsnLScuY2hhckNvZGVBdCgwKV0gPSA2MlxucmV2TG9va3VwWydfJy5jaGFyQ29kZUF0KDApXSA9IDYzXG5cbmZ1bmN0aW9uIGdldExlbnMgKGI2NCkge1xuICB2YXIgbGVuID0gYjY0Lmxlbmd0aFxuXG4gIGlmIChsZW4gJSA0ID4gMCkge1xuICAgIHRocm93IG5ldyBFcnJvcignSW52YWxpZCBzdHJpbmcuIExlbmd0aCBtdXN0IGJlIGEgbXVsdGlwbGUgb2YgNCcpXG4gIH1cblxuICAvLyBUcmltIG9mZiBleHRyYSBieXRlcyBhZnRlciBwbGFjZWhvbGRlciBieXRlcyBhcmUgZm91bmRcbiAgLy8gU2VlOiBodHRwczovL2dpdGh1Yi5jb20vYmVhdGdhbW1pdC9iYXNlNjQtanMvaXNzdWVzLzQyXG4gIHZhciB2YWxpZExlbiA9IGI2NC5pbmRleE9mKCc9JylcbiAgaWYgKHZhbGlkTGVuID09PSAtMSkgdmFsaWRMZW4gPSBsZW5cblxuICB2YXIgcGxhY2VIb2xkZXJzTGVuID0gdmFsaWRMZW4gPT09IGxlblxuICAgID8gMFxuICAgIDogNCAtICh2YWxpZExlbiAlIDQpXG5cbiAgcmV0dXJuIFt2YWxpZExlbiwgcGxhY2VIb2xkZXJzTGVuXVxufVxuXG4vLyBiYXNlNjQgaXMgNC8zICsgdXAgdG8gdHdvIGNoYXJhY3RlcnMgb2YgdGhlIG9yaWdpbmFsIGRhdGFcbmZ1bmN0aW9uIGJ5dGVMZW5ndGggKGI2NCkge1xuICB2YXIgbGVucyA9IGdldExlbnMoYjY0KVxuICB2YXIgdmFsaWRMZW4gPSBsZW5zWzBdXG4gIHZhciBwbGFjZUhvbGRlcnNMZW4gPSBsZW5zWzFdXG4gIHJldHVybiAoKHZhbGlkTGVuICsgcGxhY2VIb2xkZXJzTGVuKSAqIDMgLyA0KSAtIHBsYWNlSG9sZGVyc0xlblxufVxuXG5mdW5jdGlvbiBfYnl0ZUxlbmd0aCAoYjY0LCB2YWxpZExlbiwgcGxhY2VIb2xkZXJzTGVuKSB7XG4gIHJldHVybiAoKHZhbGlkTGVuICsgcGxhY2VIb2xkZXJzTGVuKSAqIDMgLyA0KSAtIHBsYWNlSG9sZGVyc0xlblxufVxuXG5mdW5jdGlvbiB0b0J5dGVBcnJheSAoYjY0KSB7XG4gIHZhciB0bXBcbiAgdmFyIGxlbnMgPSBnZXRMZW5zKGI2NClcbiAgdmFyIHZhbGlkTGVuID0gbGVuc1swXVxuICB2YXIgcGxhY2VIb2xkZXJzTGVuID0gbGVuc1sxXVxuXG4gIHZhciBhcnIgPSBuZXcgQXJyKF9ieXRlTGVuZ3RoKGI2NCwgdmFsaWRMZW4sIHBsYWNlSG9sZGVyc0xlbikpXG5cbiAgdmFyIGN1ckJ5dGUgPSAwXG5cbiAgLy8gaWYgdGhlcmUgYXJlIHBsYWNlaG9sZGVycywgb25seSBnZXQgdXAgdG8gdGhlIGxhc3QgY29tcGxldGUgNCBjaGFyc1xuICB2YXIgbGVuID0gcGxhY2VIb2xkZXJzTGVuID4gMFxuICAgID8gdmFsaWRMZW4gLSA0XG4gICAgOiB2YWxpZExlblxuXG4gIHZhciBpXG4gIGZvciAoaSA9IDA7IGkgPCBsZW47IGkgKz0gNCkge1xuICAgIHRtcCA9XG4gICAgICAocmV2TG9va3VwW2I2NC5jaGFyQ29kZUF0KGkpXSA8PCAxOCkgfFxuICAgICAgKHJldkxvb2t1cFtiNjQuY2hhckNvZGVBdChpICsgMSldIDw8IDEyKSB8XG4gICAgICAocmV2TG9va3VwW2I2NC5jaGFyQ29kZUF0KGkgKyAyKV0gPDwgNikgfFxuICAgICAgcmV2TG9va3VwW2I2NC5jaGFyQ29kZUF0KGkgKyAzKV1cbiAgICBhcnJbY3VyQnl0ZSsrXSA9ICh0bXAgPj4gMTYpICYgMHhGRlxuICAgIGFycltjdXJCeXRlKytdID0gKHRtcCA+PiA4KSAmIDB4RkZcbiAgICBhcnJbY3VyQnl0ZSsrXSA9IHRtcCAmIDB4RkZcbiAgfVxuXG4gIGlmIChwbGFjZUhvbGRlcnNMZW4gPT09IDIpIHtcbiAgICB0bXAgPVxuICAgICAgKHJldkxvb2t1cFtiNjQuY2hhckNvZGVBdChpKV0gPDwgMikgfFxuICAgICAgKHJldkxvb2t1cFtiNjQuY2hhckNvZGVBdChpICsgMSldID4+IDQpXG4gICAgYXJyW2N1ckJ5dGUrK10gPSB0bXAgJiAweEZGXG4gIH1cblxuICBpZiAocGxhY2VIb2xkZXJzTGVuID09PSAxKSB7XG4gICAgdG1wID1cbiAgICAgIChyZXZMb29rdXBbYjY0LmNoYXJDb2RlQXQoaSldIDw8IDEwKSB8XG4gICAgICAocmV2TG9va3VwW2I2NC5jaGFyQ29kZUF0KGkgKyAxKV0gPDwgNCkgfFxuICAgICAgKHJldkxvb2t1cFtiNjQuY2hhckNvZGVBdChpICsgMildID4+IDIpXG4gICAgYXJyW2N1ckJ5dGUrK10gPSAodG1wID4+IDgpICYgMHhGRlxuICAgIGFycltjdXJCeXRlKytdID0gdG1wICYgMHhGRlxuICB9XG5cbiAgcmV0dXJuIGFyclxufVxuXG5mdW5jdGlvbiB0cmlwbGV0VG9CYXNlNjQgKG51bSkge1xuICByZXR1cm4gbG9va3VwW251bSA+PiAxOCAmIDB4M0ZdICtcbiAgICBsb29rdXBbbnVtID4+IDEyICYgMHgzRl0gK1xuICAgIGxvb2t1cFtudW0gPj4gNiAmIDB4M0ZdICtcbiAgICBsb29rdXBbbnVtICYgMHgzRl1cbn1cblxuZnVuY3Rpb24gZW5jb2RlQ2h1bmsgKHVpbnQ4LCBzdGFydCwgZW5kKSB7XG4gIHZhciB0bXBcbiAgdmFyIG91dHB1dCA9IFtdXG4gIGZvciAodmFyIGkgPSBzdGFydDsgaSA8IGVuZDsgaSArPSAzKSB7XG4gICAgdG1wID1cbiAgICAgICgodWludDhbaV0gPDwgMTYpICYgMHhGRjAwMDApICtcbiAgICAgICgodWludDhbaSArIDFdIDw8IDgpICYgMHhGRjAwKSArXG4gICAgICAodWludDhbaSArIDJdICYgMHhGRilcbiAgICBvdXRwdXQucHVzaCh0cmlwbGV0VG9CYXNlNjQodG1wKSlcbiAgfVxuICByZXR1cm4gb3V0cHV0LmpvaW4oJycpXG59XG5cbmZ1bmN0aW9uIGZyb21CeXRlQXJyYXkgKHVpbnQ4KSB7XG4gIHZhciB0bXBcbiAgdmFyIGxlbiA9IHVpbnQ4Lmxlbmd0aFxuICB2YXIgZXh0cmFCeXRlcyA9IGxlbiAlIDMgLy8gaWYgd2UgaGF2ZSAxIGJ5dGUgbGVmdCwgcGFkIDIgYnl0ZXNcbiAgdmFyIHBhcnRzID0gW11cbiAgdmFyIG1heENodW5rTGVuZ3RoID0gMTYzODMgLy8gbXVzdCBiZSBtdWx0aXBsZSBvZiAzXG5cbiAgLy8gZ28gdGhyb3VnaCB0aGUgYXJyYXkgZXZlcnkgdGhyZWUgYnl0ZXMsIHdlJ2xsIGRlYWwgd2l0aCB0cmFpbGluZyBzdHVmZiBsYXRlclxuICBmb3IgKHZhciBpID0gMCwgbGVuMiA9IGxlbiAtIGV4dHJhQnl0ZXM7IGkgPCBsZW4yOyBpICs9IG1heENodW5rTGVuZ3RoKSB7XG4gICAgcGFydHMucHVzaChlbmNvZGVDaHVuayhcbiAgICAgIHVpbnQ4LCBpLCAoaSArIG1heENodW5rTGVuZ3RoKSA+IGxlbjIgPyBsZW4yIDogKGkgKyBtYXhDaHVua0xlbmd0aClcbiAgICApKVxuICB9XG5cbiAgLy8gcGFkIHRoZSBlbmQgd2l0aCB6ZXJvcywgYnV0IG1ha2Ugc3VyZSB0byBub3QgZm9yZ2V0IHRoZSBleHRyYSBieXRlc1xuICBpZiAoZXh0cmFCeXRlcyA9PT0gMSkge1xuICAgIHRtcCA9IHVpbnQ4W2xlbiAtIDFdXG4gICAgcGFydHMucHVzaChcbiAgICAgIGxvb2t1cFt0bXAgPj4gMl0gK1xuICAgICAgbG9va3VwWyh0bXAgPDwgNCkgJiAweDNGXSArXG4gICAgICAnPT0nXG4gICAgKVxuICB9IGVsc2UgaWYgKGV4dHJhQnl0ZXMgPT09IDIpIHtcbiAgICB0bXAgPSAodWludDhbbGVuIC0gMl0gPDwgOCkgKyB1aW50OFtsZW4gLSAxXVxuICAgIHBhcnRzLnB1c2goXG4gICAgICBsb29rdXBbdG1wID4+IDEwXSArXG4gICAgICBsb29rdXBbKHRtcCA+PiA0KSAmIDB4M0ZdICtcbiAgICAgIGxvb2t1cFsodG1wIDw8IDIpICYgMHgzRl0gK1xuICAgICAgJz0nXG4gICAgKVxuICB9XG5cbiAgcmV0dXJuIHBhcnRzLmpvaW4oJycpXG59XG4iLCIvKiFcbiAqIFRoZSBidWZmZXIgbW9kdWxlIGZyb20gbm9kZS5qcywgZm9yIHRoZSBicm93c2VyLlxuICpcbiAqIEBhdXRob3IgICBGZXJvc3MgQWJvdWtoYWRpamVoIDxmZXJvc3NAZmVyb3NzLm9yZz4gPGh0dHA6Ly9mZXJvc3Mub3JnPlxuICogQGxpY2Vuc2UgIE1JVFxuICovXG4vKiBlc2xpbnQtZGlzYWJsZSBuby1wcm90byAqL1xuXG4ndXNlIHN0cmljdCdcblxudmFyIGJhc2U2NCA9IHJlcXVpcmUoJ2Jhc2U2NC1qcycpXG52YXIgaWVlZTc1NCA9IHJlcXVpcmUoJ2llZWU3NTQnKVxudmFyIGlzQXJyYXkgPSByZXF1aXJlKCdpc2FycmF5JylcblxuZXhwb3J0cy5CdWZmZXIgPSBCdWZmZXJcbmV4cG9ydHMuU2xvd0J1ZmZlciA9IFNsb3dCdWZmZXJcbmV4cG9ydHMuSU5TUEVDVF9NQVhfQllURVMgPSA1MFxuXG4vKipcbiAqIElmIGBCdWZmZXIuVFlQRURfQVJSQVlfU1VQUE9SVGA6XG4gKiAgID09PSB0cnVlICAgIFVzZSBVaW50OEFycmF5IGltcGxlbWVudGF0aW9uIChmYXN0ZXN0KVxuICogICA9PT0gZmFsc2UgICBVc2UgT2JqZWN0IGltcGxlbWVudGF0aW9uIChtb3N0IGNvbXBhdGlibGUsIGV2ZW4gSUU2KVxuICpcbiAqIEJyb3dzZXJzIHRoYXQgc3VwcG9ydCB0eXBlZCBhcnJheXMgYXJlIElFIDEwKywgRmlyZWZveCA0KywgQ2hyb21lIDcrLCBTYWZhcmkgNS4xKyxcbiAqIE9wZXJhIDExLjYrLCBpT1MgNC4yKy5cbiAqXG4gKiBEdWUgdG8gdmFyaW91cyBicm93c2VyIGJ1Z3MsIHNvbWV0aW1lcyB0aGUgT2JqZWN0IGltcGxlbWVudGF0aW9uIHdpbGwgYmUgdXNlZCBldmVuXG4gKiB3aGVuIHRoZSBicm93c2VyIHN1cHBvcnRzIHR5cGVkIGFycmF5cy5cbiAqXG4gKiBOb3RlOlxuICpcbiAqICAgLSBGaXJlZm94IDQtMjkgbGFja3Mgc3VwcG9ydCBmb3IgYWRkaW5nIG5ldyBwcm9wZXJ0aWVzIHRvIGBVaW50OEFycmF5YCBpbnN0YW5jZXMsXG4gKiAgICAgU2VlOiBodHRwczovL2J1Z3ppbGxhLm1vemlsbGEub3JnL3Nob3dfYnVnLmNnaT9pZD02OTU0MzguXG4gKlxuICogICAtIENocm9tZSA5LTEwIGlzIG1pc3NpbmcgdGhlIGBUeXBlZEFycmF5LnByb3RvdHlwZS5zdWJhcnJheWAgZnVuY3Rpb24uXG4gKlxuICogICAtIElFMTAgaGFzIGEgYnJva2VuIGBUeXBlZEFycmF5LnByb3RvdHlwZS5zdWJhcnJheWAgZnVuY3Rpb24gd2hpY2ggcmV0dXJucyBhcnJheXMgb2ZcbiAqICAgICBpbmNvcnJlY3QgbGVuZ3RoIGluIHNvbWUgc2l0dWF0aW9ucy5cblxuICogV2UgZGV0ZWN0IHRoZXNlIGJ1Z2d5IGJyb3dzZXJzIGFuZCBzZXQgYEJ1ZmZlci5UWVBFRF9BUlJBWV9TVVBQT1JUYCB0byBgZmFsc2VgIHNvIHRoZXlcbiAqIGdldCB0aGUgT2JqZWN0IGltcGxlbWVudGF0aW9uLCB3aGljaCBpcyBzbG93ZXIgYnV0IGJlaGF2ZXMgY29ycmVjdGx5LlxuICovXG5CdWZmZXIuVFlQRURfQVJSQVlfU1VQUE9SVCA9IGdsb2JhbC5UWVBFRF9BUlJBWV9TVVBQT1JUICE9PSB1bmRlZmluZWRcbiAgPyBnbG9iYWwuVFlQRURfQVJSQVlfU1VQUE9SVFxuICA6IHR5cGVkQXJyYXlTdXBwb3J0KClcblxuLypcbiAqIEV4cG9ydCBrTWF4TGVuZ3RoIGFmdGVyIHR5cGVkIGFycmF5IHN1cHBvcnQgaXMgZGV0ZXJtaW5lZC5cbiAqL1xuZXhwb3J0cy5rTWF4TGVuZ3RoID0ga01heExlbmd0aCgpXG5cbmZ1bmN0aW9uIHR5cGVkQXJyYXlTdXBwb3J0ICgpIHtcbiAgdHJ5IHtcbiAgICB2YXIgYXJyID0gbmV3IFVpbnQ4QXJyYXkoMSlcbiAgICBhcnIuX19wcm90b19fID0ge19fcHJvdG9fXzogVWludDhBcnJheS5wcm90b3R5cGUsIGZvbzogZnVuY3Rpb24gKCkgeyByZXR1cm4gNDIgfX1cbiAgICByZXR1cm4gYXJyLmZvbygpID09PSA0MiAmJiAvLyB0eXBlZCBhcnJheSBpbnN0YW5jZXMgY2FuIGJlIGF1Z21lbnRlZFxuICAgICAgICB0eXBlb2YgYXJyLnN1YmFycmF5ID09PSAnZnVuY3Rpb24nICYmIC8vIGNocm9tZSA5LTEwIGxhY2sgYHN1YmFycmF5YFxuICAgICAgICBhcnIuc3ViYXJyYXkoMSwgMSkuYnl0ZUxlbmd0aCA9PT0gMCAvLyBpZTEwIGhhcyBicm9rZW4gYHN1YmFycmF5YFxuICB9IGNhdGNoIChlKSB7XG4gICAgcmV0dXJuIGZhbHNlXG4gIH1cbn1cblxuZnVuY3Rpb24ga01heExlbmd0aCAoKSB7XG4gIHJldHVybiBCdWZmZXIuVFlQRURfQVJSQVlfU1VQUE9SVFxuICAgID8gMHg3ZmZmZmZmZlxuICAgIDogMHgzZmZmZmZmZlxufVxuXG5mdW5jdGlvbiBjcmVhdGVCdWZmZXIgKHRoYXQsIGxlbmd0aCkge1xuICBpZiAoa01heExlbmd0aCgpIDwgbGVuZ3RoKSB7XG4gICAgdGhyb3cgbmV3IFJhbmdlRXJyb3IoJ0ludmFsaWQgdHlwZWQgYXJyYXkgbGVuZ3RoJylcbiAgfVxuICBpZiAoQnVmZmVyLlRZUEVEX0FSUkFZX1NVUFBPUlQpIHtcbiAgICAvLyBSZXR1cm4gYW4gYXVnbWVudGVkIGBVaW50OEFycmF5YCBpbnN0YW5jZSwgZm9yIGJlc3QgcGVyZm9ybWFuY2VcbiAgICB0aGF0ID0gbmV3IFVpbnQ4QXJyYXkobGVuZ3RoKVxuICAgIHRoYXQuX19wcm90b19fID0gQnVmZmVyLnByb3RvdHlwZVxuICB9IGVsc2Uge1xuICAgIC8vIEZhbGxiYWNrOiBSZXR1cm4gYW4gb2JqZWN0IGluc3RhbmNlIG9mIHRoZSBCdWZmZXIgY2xhc3NcbiAgICBpZiAodGhhdCA9PT0gbnVsbCkge1xuICAgICAgdGhhdCA9IG5ldyBCdWZmZXIobGVuZ3RoKVxuICAgIH1cbiAgICB0aGF0Lmxlbmd0aCA9IGxlbmd0aFxuICB9XG5cbiAgcmV0dXJuIHRoYXRcbn1cblxuLyoqXG4gKiBUaGUgQnVmZmVyIGNvbnN0cnVjdG9yIHJldHVybnMgaW5zdGFuY2VzIG9mIGBVaW50OEFycmF5YCB0aGF0IGhhdmUgdGhlaXJcbiAqIHByb3RvdHlwZSBjaGFuZ2VkIHRvIGBCdWZmZXIucHJvdG90eXBlYC4gRnVydGhlcm1vcmUsIGBCdWZmZXJgIGlzIGEgc3ViY2xhc3Mgb2ZcbiAqIGBVaW50OEFycmF5YCwgc28gdGhlIHJldHVybmVkIGluc3RhbmNlcyB3aWxsIGhhdmUgYWxsIHRoZSBub2RlIGBCdWZmZXJgIG1ldGhvZHNcbiAqIGFuZCB0aGUgYFVpbnQ4QXJyYXlgIG1ldGhvZHMuIFNxdWFyZSBicmFja2V0IG5vdGF0aW9uIHdvcmtzIGFzIGV4cGVjdGVkIC0tIGl0XG4gKiByZXR1cm5zIGEgc2luZ2xlIG9jdGV0LlxuICpcbiAqIFRoZSBgVWludDhBcnJheWAgcHJvdG90eXBlIHJlbWFpbnMgdW5tb2RpZmllZC5cbiAqL1xuXG5mdW5jdGlvbiBCdWZmZXIgKGFyZywgZW5jb2RpbmdPck9mZnNldCwgbGVuZ3RoKSB7XG4gIGlmICghQnVmZmVyLlRZUEVEX0FSUkFZX1NVUFBPUlQgJiYgISh0aGlzIGluc3RhbmNlb2YgQnVmZmVyKSkge1xuICAgIHJldHVybiBuZXcgQnVmZmVyKGFyZywgZW5jb2RpbmdPck9mZnNldCwgbGVuZ3RoKVxuICB9XG5cbiAgLy8gQ29tbW9uIGNhc2UuXG4gIGlmICh0eXBlb2YgYXJnID09PSAnbnVtYmVyJykge1xuICAgIGlmICh0eXBlb2YgZW5jb2RpbmdPck9mZnNldCA9PT0gJ3N0cmluZycpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgICAgJ0lmIGVuY29kaW5nIGlzIHNwZWNpZmllZCB0aGVuIHRoZSBmaXJzdCBhcmd1bWVudCBtdXN0IGJlIGEgc3RyaW5nJ1xuICAgICAgKVxuICAgIH1cbiAgICByZXR1cm4gYWxsb2NVbnNhZmUodGhpcywgYXJnKVxuICB9XG4gIHJldHVybiBmcm9tKHRoaXMsIGFyZywgZW5jb2RpbmdPck9mZnNldCwgbGVuZ3RoKVxufVxuXG5CdWZmZXIucG9vbFNpemUgPSA4MTkyIC8vIG5vdCB1c2VkIGJ5IHRoaXMgaW1wbGVtZW50YXRpb25cblxuLy8gVE9ETzogTGVnYWN5LCBub3QgbmVlZGVkIGFueW1vcmUuIFJlbW92ZSBpbiBuZXh0IG1ham9yIHZlcnNpb24uXG5CdWZmZXIuX2F1Z21lbnQgPSBmdW5jdGlvbiAoYXJyKSB7XG4gIGFyci5fX3Byb3RvX18gPSBCdWZmZXIucHJvdG90eXBlXG4gIHJldHVybiBhcnJcbn1cblxuZnVuY3Rpb24gZnJvbSAodGhhdCwgdmFsdWUsIGVuY29kaW5nT3JPZmZzZXQsIGxlbmd0aCkge1xuICBpZiAodHlwZW9mIHZhbHVlID09PSAnbnVtYmVyJykge1xuICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ1widmFsdWVcIiBhcmd1bWVudCBtdXN0IG5vdCBiZSBhIG51bWJlcicpXG4gIH1cblxuICBpZiAodHlwZW9mIEFycmF5QnVmZmVyICE9PSAndW5kZWZpbmVkJyAmJiB2YWx1ZSBpbnN0YW5jZW9mIEFycmF5QnVmZmVyKSB7XG4gICAgcmV0dXJuIGZyb21BcnJheUJ1ZmZlcih0aGF0LCB2YWx1ZSwgZW5jb2RpbmdPck9mZnNldCwgbGVuZ3RoKVxuICB9XG5cbiAgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gJ3N0cmluZycpIHtcbiAgICByZXR1cm4gZnJvbVN0cmluZyh0aGF0LCB2YWx1ZSwgZW5jb2RpbmdPck9mZnNldClcbiAgfVxuXG4gIHJldHVybiBmcm9tT2JqZWN0KHRoYXQsIHZhbHVlKVxufVxuXG4vKipcbiAqIEZ1bmN0aW9uYWxseSBlcXVpdmFsZW50IHRvIEJ1ZmZlcihhcmcsIGVuY29kaW5nKSBidXQgdGhyb3dzIGEgVHlwZUVycm9yXG4gKiBpZiB2YWx1ZSBpcyBhIG51bWJlci5cbiAqIEJ1ZmZlci5mcm9tKHN0clssIGVuY29kaW5nXSlcbiAqIEJ1ZmZlci5mcm9tKGFycmF5KVxuICogQnVmZmVyLmZyb20oYnVmZmVyKVxuICogQnVmZmVyLmZyb20oYXJyYXlCdWZmZXJbLCBieXRlT2Zmc2V0WywgbGVuZ3RoXV0pXG4gKiovXG5CdWZmZXIuZnJvbSA9IGZ1bmN0aW9uICh2YWx1ZSwgZW5jb2RpbmdPck9mZnNldCwgbGVuZ3RoKSB7XG4gIHJldHVybiBmcm9tKG51bGwsIHZhbHVlLCBlbmNvZGluZ09yT2Zmc2V0LCBsZW5ndGgpXG59XG5cbmlmIChCdWZmZXIuVFlQRURfQVJSQVlfU1VQUE9SVCkge1xuICBCdWZmZXIucHJvdG90eXBlLl9fcHJvdG9fXyA9IFVpbnQ4QXJyYXkucHJvdG90eXBlXG4gIEJ1ZmZlci5fX3Byb3RvX18gPSBVaW50OEFycmF5XG4gIGlmICh0eXBlb2YgU3ltYm9sICE9PSAndW5kZWZpbmVkJyAmJiBTeW1ib2wuc3BlY2llcyAmJlxuICAgICAgQnVmZmVyW1N5bWJvbC5zcGVjaWVzXSA9PT0gQnVmZmVyKSB7XG4gICAgLy8gRml4IHN1YmFycmF5KCkgaW4gRVMyMDE2LiBTZWU6IGh0dHBzOi8vZ2l0aHViLmNvbS9mZXJvc3MvYnVmZmVyL3B1bGwvOTdcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoQnVmZmVyLCBTeW1ib2wuc3BlY2llcywge1xuICAgICAgdmFsdWU6IG51bGwsXG4gICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICB9KVxuICB9XG59XG5cbmZ1bmN0aW9uIGFzc2VydFNpemUgKHNpemUpIHtcbiAgaWYgKHR5cGVvZiBzaXplICE9PSAnbnVtYmVyJykge1xuICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ1wic2l6ZVwiIGFyZ3VtZW50IG11c3QgYmUgYSBudW1iZXInKVxuICB9IGVsc2UgaWYgKHNpemUgPCAwKSB7XG4gICAgdGhyb3cgbmV3IFJhbmdlRXJyb3IoJ1wic2l6ZVwiIGFyZ3VtZW50IG11c3Qgbm90IGJlIG5lZ2F0aXZlJylcbiAgfVxufVxuXG5mdW5jdGlvbiBhbGxvYyAodGhhdCwgc2l6ZSwgZmlsbCwgZW5jb2RpbmcpIHtcbiAgYXNzZXJ0U2l6ZShzaXplKVxuICBpZiAoc2l6ZSA8PSAwKSB7XG4gICAgcmV0dXJuIGNyZWF0ZUJ1ZmZlcih0aGF0LCBzaXplKVxuICB9XG4gIGlmIChmaWxsICE9PSB1bmRlZmluZWQpIHtcbiAgICAvLyBPbmx5IHBheSBhdHRlbnRpb24gdG8gZW5jb2RpbmcgaWYgaXQncyBhIHN0cmluZy4gVGhpc1xuICAgIC8vIHByZXZlbnRzIGFjY2lkZW50YWxseSBzZW5kaW5nIGluIGEgbnVtYmVyIHRoYXQgd291bGRcbiAgICAvLyBiZSBpbnRlcnByZXR0ZWQgYXMgYSBzdGFydCBvZmZzZXQuXG4gICAgcmV0dXJuIHR5cGVvZiBlbmNvZGluZyA9PT0gJ3N0cmluZydcbiAgICAgID8gY3JlYXRlQnVmZmVyKHRoYXQsIHNpemUpLmZpbGwoZmlsbCwgZW5jb2RpbmcpXG4gICAgICA6IGNyZWF0ZUJ1ZmZlcih0aGF0LCBzaXplKS5maWxsKGZpbGwpXG4gIH1cbiAgcmV0dXJuIGNyZWF0ZUJ1ZmZlcih0aGF0LCBzaXplKVxufVxuXG4vKipcbiAqIENyZWF0ZXMgYSBuZXcgZmlsbGVkIEJ1ZmZlciBpbnN0YW5jZS5cbiAqIGFsbG9jKHNpemVbLCBmaWxsWywgZW5jb2RpbmddXSlcbiAqKi9cbkJ1ZmZlci5hbGxvYyA9IGZ1bmN0aW9uIChzaXplLCBmaWxsLCBlbmNvZGluZykge1xuICByZXR1cm4gYWxsb2MobnVsbCwgc2l6ZSwgZmlsbCwgZW5jb2RpbmcpXG59XG5cbmZ1bmN0aW9uIGFsbG9jVW5zYWZlICh0aGF0LCBzaXplKSB7XG4gIGFzc2VydFNpemUoc2l6ZSlcbiAgdGhhdCA9IGNyZWF0ZUJ1ZmZlcih0aGF0LCBzaXplIDwgMCA/IDAgOiBjaGVja2VkKHNpemUpIHwgMClcbiAgaWYgKCFCdWZmZXIuVFlQRURfQVJSQVlfU1VQUE9SVCkge1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgc2l6ZTsgKytpKSB7XG4gICAgICB0aGF0W2ldID0gMFxuICAgIH1cbiAgfVxuICByZXR1cm4gdGhhdFxufVxuXG4vKipcbiAqIEVxdWl2YWxlbnQgdG8gQnVmZmVyKG51bSksIGJ5IGRlZmF1bHQgY3JlYXRlcyBhIG5vbi16ZXJvLWZpbGxlZCBCdWZmZXIgaW5zdGFuY2UuXG4gKiAqL1xuQnVmZmVyLmFsbG9jVW5zYWZlID0gZnVuY3Rpb24gKHNpemUpIHtcbiAgcmV0dXJuIGFsbG9jVW5zYWZlKG51bGwsIHNpemUpXG59XG4vKipcbiAqIEVxdWl2YWxlbnQgdG8gU2xvd0J1ZmZlcihudW0pLCBieSBkZWZhdWx0IGNyZWF0ZXMgYSBub24temVyby1maWxsZWQgQnVmZmVyIGluc3RhbmNlLlxuICovXG5CdWZmZXIuYWxsb2NVbnNhZmVTbG93ID0gZnVuY3Rpb24gKHNpemUpIHtcbiAgcmV0dXJuIGFsbG9jVW5zYWZlKG51bGwsIHNpemUpXG59XG5cbmZ1bmN0aW9uIGZyb21TdHJpbmcgKHRoYXQsIHN0cmluZywgZW5jb2RpbmcpIHtcbiAgaWYgKHR5cGVvZiBlbmNvZGluZyAhPT0gJ3N0cmluZycgfHwgZW5jb2RpbmcgPT09ICcnKSB7XG4gICAgZW5jb2RpbmcgPSAndXRmOCdcbiAgfVxuXG4gIGlmICghQnVmZmVyLmlzRW5jb2RpbmcoZW5jb2RpbmcpKSB7XG4gICAgdGhyb3cgbmV3IFR5cGVFcnJvcignXCJlbmNvZGluZ1wiIG11c3QgYmUgYSB2YWxpZCBzdHJpbmcgZW5jb2RpbmcnKVxuICB9XG5cbiAgdmFyIGxlbmd0aCA9IGJ5dGVMZW5ndGgoc3RyaW5nLCBlbmNvZGluZykgfCAwXG4gIHRoYXQgPSBjcmVhdGVCdWZmZXIodGhhdCwgbGVuZ3RoKVxuXG4gIHZhciBhY3R1YWwgPSB0aGF0LndyaXRlKHN0cmluZywgZW5jb2RpbmcpXG5cbiAgaWYgKGFjdHVhbCAhPT0gbGVuZ3RoKSB7XG4gICAgLy8gV3JpdGluZyBhIGhleCBzdHJpbmcsIGZvciBleGFtcGxlLCB0aGF0IGNvbnRhaW5zIGludmFsaWQgY2hhcmFjdGVycyB3aWxsXG4gICAgLy8gY2F1c2UgZXZlcnl0aGluZyBhZnRlciB0aGUgZmlyc3QgaW52YWxpZCBjaGFyYWN0ZXIgdG8gYmUgaWdub3JlZC4gKGUuZy5cbiAgICAvLyAnYWJ4eGNkJyB3aWxsIGJlIHRyZWF0ZWQgYXMgJ2FiJylcbiAgICB0aGF0ID0gdGhhdC5zbGljZSgwLCBhY3R1YWwpXG4gIH1cblxuICByZXR1cm4gdGhhdFxufVxuXG5mdW5jdGlvbiBmcm9tQXJyYXlMaWtlICh0aGF0LCBhcnJheSkge1xuICB2YXIgbGVuZ3RoID0gYXJyYXkubGVuZ3RoIDwgMCA/IDAgOiBjaGVja2VkKGFycmF5Lmxlbmd0aCkgfCAwXG4gIHRoYXQgPSBjcmVhdGVCdWZmZXIodGhhdCwgbGVuZ3RoKVxuICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbmd0aDsgaSArPSAxKSB7XG4gICAgdGhhdFtpXSA9IGFycmF5W2ldICYgMjU1XG4gIH1cbiAgcmV0dXJuIHRoYXRcbn1cblxuZnVuY3Rpb24gZnJvbUFycmF5QnVmZmVyICh0aGF0LCBhcnJheSwgYnl0ZU9mZnNldCwgbGVuZ3RoKSB7XG4gIGFycmF5LmJ5dGVMZW5ndGggLy8gdGhpcyB0aHJvd3MgaWYgYGFycmF5YCBpcyBub3QgYSB2YWxpZCBBcnJheUJ1ZmZlclxuXG4gIGlmIChieXRlT2Zmc2V0IDwgMCB8fCBhcnJheS5ieXRlTGVuZ3RoIDwgYnl0ZU9mZnNldCkge1xuICAgIHRocm93IG5ldyBSYW5nZUVycm9yKCdcXCdvZmZzZXRcXCcgaXMgb3V0IG9mIGJvdW5kcycpXG4gIH1cblxuICBpZiAoYXJyYXkuYnl0ZUxlbmd0aCA8IGJ5dGVPZmZzZXQgKyAobGVuZ3RoIHx8IDApKSB7XG4gICAgdGhyb3cgbmV3IFJhbmdlRXJyb3IoJ1xcJ2xlbmd0aFxcJyBpcyBvdXQgb2YgYm91bmRzJylcbiAgfVxuXG4gIGlmIChieXRlT2Zmc2V0ID09PSB1bmRlZmluZWQgJiYgbGVuZ3RoID09PSB1bmRlZmluZWQpIHtcbiAgICBhcnJheSA9IG5ldyBVaW50OEFycmF5KGFycmF5KVxuICB9IGVsc2UgaWYgKGxlbmd0aCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgYXJyYXkgPSBuZXcgVWludDhBcnJheShhcnJheSwgYnl0ZU9mZnNldClcbiAgfSBlbHNlIHtcbiAgICBhcnJheSA9IG5ldyBVaW50OEFycmF5KGFycmF5LCBieXRlT2Zmc2V0LCBsZW5ndGgpXG4gIH1cblxuICBpZiAoQnVmZmVyLlRZUEVEX0FSUkFZX1NVUFBPUlQpIHtcbiAgICAvLyBSZXR1cm4gYW4gYXVnbWVudGVkIGBVaW50OEFycmF5YCBpbnN0YW5jZSwgZm9yIGJlc3QgcGVyZm9ybWFuY2VcbiAgICB0aGF0ID0gYXJyYXlcbiAgICB0aGF0Ll9fcHJvdG9fXyA9IEJ1ZmZlci5wcm90b3R5cGVcbiAgfSBlbHNlIHtcbiAgICAvLyBGYWxsYmFjazogUmV0dXJuIGFuIG9iamVjdCBpbnN0YW5jZSBvZiB0aGUgQnVmZmVyIGNsYXNzXG4gICAgdGhhdCA9IGZyb21BcnJheUxpa2UodGhhdCwgYXJyYXkpXG4gIH1cbiAgcmV0dXJuIHRoYXRcbn1cblxuZnVuY3Rpb24gZnJvbU9iamVjdCAodGhhdCwgb2JqKSB7XG4gIGlmIChCdWZmZXIuaXNCdWZmZXIob2JqKSkge1xuICAgIHZhciBsZW4gPSBjaGVja2VkKG9iai5sZW5ndGgpIHwgMFxuICAgIHRoYXQgPSBjcmVhdGVCdWZmZXIodGhhdCwgbGVuKVxuXG4gICAgaWYgKHRoYXQubGVuZ3RoID09PSAwKSB7XG4gICAgICByZXR1cm4gdGhhdFxuICAgIH1cblxuICAgIG9iai5jb3B5KHRoYXQsIDAsIDAsIGxlbilcbiAgICByZXR1cm4gdGhhdFxuICB9XG5cbiAgaWYgKG9iaikge1xuICAgIGlmICgodHlwZW9mIEFycmF5QnVmZmVyICE9PSAndW5kZWZpbmVkJyAmJlxuICAgICAgICBvYmouYnVmZmVyIGluc3RhbmNlb2YgQXJyYXlCdWZmZXIpIHx8ICdsZW5ndGgnIGluIG9iaikge1xuICAgICAgaWYgKHR5cGVvZiBvYmoubGVuZ3RoICE9PSAnbnVtYmVyJyB8fCBpc25hbihvYmoubGVuZ3RoKSkge1xuICAgICAgICByZXR1cm4gY3JlYXRlQnVmZmVyKHRoYXQsIDApXG4gICAgICB9XG4gICAgICByZXR1cm4gZnJvbUFycmF5TGlrZSh0aGF0LCBvYmopXG4gICAgfVxuXG4gICAgaWYgKG9iai50eXBlID09PSAnQnVmZmVyJyAmJiBpc0FycmF5KG9iai5kYXRhKSkge1xuICAgICAgcmV0dXJuIGZyb21BcnJheUxpa2UodGhhdCwgb2JqLmRhdGEpXG4gICAgfVxuICB9XG5cbiAgdGhyb3cgbmV3IFR5cGVFcnJvcignRmlyc3QgYXJndW1lbnQgbXVzdCBiZSBhIHN0cmluZywgQnVmZmVyLCBBcnJheUJ1ZmZlciwgQXJyYXksIG9yIGFycmF5LWxpa2Ugb2JqZWN0LicpXG59XG5cbmZ1bmN0aW9uIGNoZWNrZWQgKGxlbmd0aCkge1xuICAvLyBOb3RlOiBjYW5ub3QgdXNlIGBsZW5ndGggPCBrTWF4TGVuZ3RoKClgIGhlcmUgYmVjYXVzZSB0aGF0IGZhaWxzIHdoZW5cbiAgLy8gbGVuZ3RoIGlzIE5hTiAod2hpY2ggaXMgb3RoZXJ3aXNlIGNvZXJjZWQgdG8gemVyby4pXG4gIGlmIChsZW5ndGggPj0ga01heExlbmd0aCgpKSB7XG4gICAgdGhyb3cgbmV3IFJhbmdlRXJyb3IoJ0F0dGVtcHQgdG8gYWxsb2NhdGUgQnVmZmVyIGxhcmdlciB0aGFuIG1heGltdW0gJyArXG4gICAgICAgICAgICAgICAgICAgICAgICAgJ3NpemU6IDB4JyArIGtNYXhMZW5ndGgoKS50b1N0cmluZygxNikgKyAnIGJ5dGVzJylcbiAgfVxuICByZXR1cm4gbGVuZ3RoIHwgMFxufVxuXG5mdW5jdGlvbiBTbG93QnVmZmVyIChsZW5ndGgpIHtcbiAgaWYgKCtsZW5ndGggIT0gbGVuZ3RoKSB7IC8vIGVzbGludC1kaXNhYmxlLWxpbmUgZXFlcWVxXG4gICAgbGVuZ3RoID0gMFxuICB9XG4gIHJldHVybiBCdWZmZXIuYWxsb2MoK2xlbmd0aClcbn1cblxuQnVmZmVyLmlzQnVmZmVyID0gZnVuY3Rpb24gaXNCdWZmZXIgKGIpIHtcbiAgcmV0dXJuICEhKGIgIT0gbnVsbCAmJiBiLl9pc0J1ZmZlcilcbn1cblxuQnVmZmVyLmNvbXBhcmUgPSBmdW5jdGlvbiBjb21wYXJlIChhLCBiKSB7XG4gIGlmICghQnVmZmVyLmlzQnVmZmVyKGEpIHx8ICFCdWZmZXIuaXNCdWZmZXIoYikpIHtcbiAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdBcmd1bWVudHMgbXVzdCBiZSBCdWZmZXJzJylcbiAgfVxuXG4gIGlmIChhID09PSBiKSByZXR1cm4gMFxuXG4gIHZhciB4ID0gYS5sZW5ndGhcbiAgdmFyIHkgPSBiLmxlbmd0aFxuXG4gIGZvciAodmFyIGkgPSAwLCBsZW4gPSBNYXRoLm1pbih4LCB5KTsgaSA8IGxlbjsgKytpKSB7XG4gICAgaWYgKGFbaV0gIT09IGJbaV0pIHtcbiAgICAgIHggPSBhW2ldXG4gICAgICB5ID0gYltpXVxuICAgICAgYnJlYWtcbiAgICB9XG4gIH1cblxuICBpZiAoeCA8IHkpIHJldHVybiAtMVxuICBpZiAoeSA8IHgpIHJldHVybiAxXG4gIHJldHVybiAwXG59XG5cbkJ1ZmZlci5pc0VuY29kaW5nID0gZnVuY3Rpb24gaXNFbmNvZGluZyAoZW5jb2RpbmcpIHtcbiAgc3dpdGNoIChTdHJpbmcoZW5jb2RpbmcpLnRvTG93ZXJDYXNlKCkpIHtcbiAgICBjYXNlICdoZXgnOlxuICAgIGNhc2UgJ3V0ZjgnOlxuICAgIGNhc2UgJ3V0Zi04JzpcbiAgICBjYXNlICdhc2NpaSc6XG4gICAgY2FzZSAnbGF0aW4xJzpcbiAgICBjYXNlICdiaW5hcnknOlxuICAgIGNhc2UgJ2Jhc2U2NCc6XG4gICAgY2FzZSAndWNzMic6XG4gICAgY2FzZSAndWNzLTInOlxuICAgIGNhc2UgJ3V0ZjE2bGUnOlxuICAgIGNhc2UgJ3V0Zi0xNmxlJzpcbiAgICAgIHJldHVybiB0cnVlXG4gICAgZGVmYXVsdDpcbiAgICAgIHJldHVybiBmYWxzZVxuICB9XG59XG5cbkJ1ZmZlci5jb25jYXQgPSBmdW5jdGlvbiBjb25jYXQgKGxpc3QsIGxlbmd0aCkge1xuICBpZiAoIWlzQXJyYXkobGlzdCkpIHtcbiAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdcImxpc3RcIiBhcmd1bWVudCBtdXN0IGJlIGFuIEFycmF5IG9mIEJ1ZmZlcnMnKVxuICB9XG5cbiAgaWYgKGxpc3QubGVuZ3RoID09PSAwKSB7XG4gICAgcmV0dXJuIEJ1ZmZlci5hbGxvYygwKVxuICB9XG5cbiAgdmFyIGlcbiAgaWYgKGxlbmd0aCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgbGVuZ3RoID0gMFxuICAgIGZvciAoaSA9IDA7IGkgPCBsaXN0Lmxlbmd0aDsgKytpKSB7XG4gICAgICBsZW5ndGggKz0gbGlzdFtpXS5sZW5ndGhcbiAgICB9XG4gIH1cblxuICB2YXIgYnVmZmVyID0gQnVmZmVyLmFsbG9jVW5zYWZlKGxlbmd0aClcbiAgdmFyIHBvcyA9IDBcbiAgZm9yIChpID0gMDsgaSA8IGxpc3QubGVuZ3RoOyArK2kpIHtcbiAgICB2YXIgYnVmID0gbGlzdFtpXVxuICAgIGlmICghQnVmZmVyLmlzQnVmZmVyKGJ1ZikpIHtcbiAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ1wibGlzdFwiIGFyZ3VtZW50IG11c3QgYmUgYW4gQXJyYXkgb2YgQnVmZmVycycpXG4gICAgfVxuICAgIGJ1Zi5jb3B5KGJ1ZmZlciwgcG9zKVxuICAgIHBvcyArPSBidWYubGVuZ3RoXG4gIH1cbiAgcmV0dXJuIGJ1ZmZlclxufVxuXG5mdW5jdGlvbiBieXRlTGVuZ3RoIChzdHJpbmcsIGVuY29kaW5nKSB7XG4gIGlmIChCdWZmZXIuaXNCdWZmZXIoc3RyaW5nKSkge1xuICAgIHJldHVybiBzdHJpbmcubGVuZ3RoXG4gIH1cbiAgaWYgKHR5cGVvZiBBcnJheUJ1ZmZlciAhPT0gJ3VuZGVmaW5lZCcgJiYgdHlwZW9mIEFycmF5QnVmZmVyLmlzVmlldyA9PT0gJ2Z1bmN0aW9uJyAmJlxuICAgICAgKEFycmF5QnVmZmVyLmlzVmlldyhzdHJpbmcpIHx8IHN0cmluZyBpbnN0YW5jZW9mIEFycmF5QnVmZmVyKSkge1xuICAgIHJldHVybiBzdHJpbmcuYnl0ZUxlbmd0aFxuICB9XG4gIGlmICh0eXBlb2Ygc3RyaW5nICE9PSAnc3RyaW5nJykge1xuICAgIHN0cmluZyA9ICcnICsgc3RyaW5nXG4gIH1cblxuICB2YXIgbGVuID0gc3RyaW5nLmxlbmd0aFxuICBpZiAobGVuID09PSAwKSByZXR1cm4gMFxuXG4gIC8vIFVzZSBhIGZvciBsb29wIHRvIGF2b2lkIHJlY3Vyc2lvblxuICB2YXIgbG93ZXJlZENhc2UgPSBmYWxzZVxuICBmb3IgKDs7KSB7XG4gICAgc3dpdGNoIChlbmNvZGluZykge1xuICAgICAgY2FzZSAnYXNjaWknOlxuICAgICAgY2FzZSAnbGF0aW4xJzpcbiAgICAgIGNhc2UgJ2JpbmFyeSc6XG4gICAgICAgIHJldHVybiBsZW5cbiAgICAgIGNhc2UgJ3V0ZjgnOlxuICAgICAgY2FzZSAndXRmLTgnOlxuICAgICAgY2FzZSB1bmRlZmluZWQ6XG4gICAgICAgIHJldHVybiB1dGY4VG9CeXRlcyhzdHJpbmcpLmxlbmd0aFxuICAgICAgY2FzZSAndWNzMic6XG4gICAgICBjYXNlICd1Y3MtMic6XG4gICAgICBjYXNlICd1dGYxNmxlJzpcbiAgICAgIGNhc2UgJ3V0Zi0xNmxlJzpcbiAgICAgICAgcmV0dXJuIGxlbiAqIDJcbiAgICAgIGNhc2UgJ2hleCc6XG4gICAgICAgIHJldHVybiBsZW4gPj4+IDFcbiAgICAgIGNhc2UgJ2Jhc2U2NCc6XG4gICAgICAgIHJldHVybiBiYXNlNjRUb0J5dGVzKHN0cmluZykubGVuZ3RoXG4gICAgICBkZWZhdWx0OlxuICAgICAgICBpZiAobG93ZXJlZENhc2UpIHJldHVybiB1dGY4VG9CeXRlcyhzdHJpbmcpLmxlbmd0aCAvLyBhc3N1bWUgdXRmOFxuICAgICAgICBlbmNvZGluZyA9ICgnJyArIGVuY29kaW5nKS50b0xvd2VyQ2FzZSgpXG4gICAgICAgIGxvd2VyZWRDYXNlID0gdHJ1ZVxuICAgIH1cbiAgfVxufVxuQnVmZmVyLmJ5dGVMZW5ndGggPSBieXRlTGVuZ3RoXG5cbmZ1bmN0aW9uIHNsb3dUb1N0cmluZyAoZW5jb2RpbmcsIHN0YXJ0LCBlbmQpIHtcbiAgdmFyIGxvd2VyZWRDYXNlID0gZmFsc2VcblxuICAvLyBObyBuZWVkIHRvIHZlcmlmeSB0aGF0IFwidGhpcy5sZW5ndGggPD0gTUFYX1VJTlQzMlwiIHNpbmNlIGl0J3MgYSByZWFkLW9ubHlcbiAgLy8gcHJvcGVydHkgb2YgYSB0eXBlZCBhcnJheS5cblxuICAvLyBUaGlzIGJlaGF2ZXMgbmVpdGhlciBsaWtlIFN0cmluZyBub3IgVWludDhBcnJheSBpbiB0aGF0IHdlIHNldCBzdGFydC9lbmRcbiAgLy8gdG8gdGhlaXIgdXBwZXIvbG93ZXIgYm91bmRzIGlmIHRoZSB2YWx1ZSBwYXNzZWQgaXMgb3V0IG9mIHJhbmdlLlxuICAvLyB1bmRlZmluZWQgaXMgaGFuZGxlZCBzcGVjaWFsbHkgYXMgcGVyIEVDTUEtMjYyIDZ0aCBFZGl0aW9uLFxuICAvLyBTZWN0aW9uIDEzLjMuMy43IFJ1bnRpbWUgU2VtYW50aWNzOiBLZXllZEJpbmRpbmdJbml0aWFsaXphdGlvbi5cbiAgaWYgKHN0YXJ0ID09PSB1bmRlZmluZWQgfHwgc3RhcnQgPCAwKSB7XG4gICAgc3RhcnQgPSAwXG4gIH1cbiAgLy8gUmV0dXJuIGVhcmx5IGlmIHN0YXJ0ID4gdGhpcy5sZW5ndGguIERvbmUgaGVyZSB0byBwcmV2ZW50IHBvdGVudGlhbCB1aW50MzJcbiAgLy8gY29lcmNpb24gZmFpbCBiZWxvdy5cbiAgaWYgKHN0YXJ0ID4gdGhpcy5sZW5ndGgpIHtcbiAgICByZXR1cm4gJydcbiAgfVxuXG4gIGlmIChlbmQgPT09IHVuZGVmaW5lZCB8fCBlbmQgPiB0aGlzLmxlbmd0aCkge1xuICAgIGVuZCA9IHRoaXMubGVuZ3RoXG4gIH1cblxuICBpZiAoZW5kIDw9IDApIHtcbiAgICByZXR1cm4gJydcbiAgfVxuXG4gIC8vIEZvcmNlIGNvZXJzaW9uIHRvIHVpbnQzMi4gVGhpcyB3aWxsIGFsc28gY29lcmNlIGZhbHNleS9OYU4gdmFsdWVzIHRvIDAuXG4gIGVuZCA+Pj49IDBcbiAgc3RhcnQgPj4+PSAwXG5cbiAgaWYgKGVuZCA8PSBzdGFydCkge1xuICAgIHJldHVybiAnJ1xuICB9XG5cbiAgaWYgKCFlbmNvZGluZykgZW5jb2RpbmcgPSAndXRmOCdcblxuICB3aGlsZSAodHJ1ZSkge1xuICAgIHN3aXRjaCAoZW5jb2RpbmcpIHtcbiAgICAgIGNhc2UgJ2hleCc6XG4gICAgICAgIHJldHVybiBoZXhTbGljZSh0aGlzLCBzdGFydCwgZW5kKVxuXG4gICAgICBjYXNlICd1dGY4JzpcbiAgICAgIGNhc2UgJ3V0Zi04JzpcbiAgICAgICAgcmV0dXJuIHV0ZjhTbGljZSh0aGlzLCBzdGFydCwgZW5kKVxuXG4gICAgICBjYXNlICdhc2NpaSc6XG4gICAgICAgIHJldHVybiBhc2NpaVNsaWNlKHRoaXMsIHN0YXJ0LCBlbmQpXG5cbiAgICAgIGNhc2UgJ2xhdGluMSc6XG4gICAgICBjYXNlICdiaW5hcnknOlxuICAgICAgICByZXR1cm4gbGF0aW4xU2xpY2UodGhpcywgc3RhcnQsIGVuZClcblxuICAgICAgY2FzZSAnYmFzZTY0JzpcbiAgICAgICAgcmV0dXJuIGJhc2U2NFNsaWNlKHRoaXMsIHN0YXJ0LCBlbmQpXG5cbiAgICAgIGNhc2UgJ3VjczInOlxuICAgICAgY2FzZSAndWNzLTInOlxuICAgICAgY2FzZSAndXRmMTZsZSc6XG4gICAgICBjYXNlICd1dGYtMTZsZSc6XG4gICAgICAgIHJldHVybiB1dGYxNmxlU2xpY2UodGhpcywgc3RhcnQsIGVuZClcblxuICAgICAgZGVmYXVsdDpcbiAgICAgICAgaWYgKGxvd2VyZWRDYXNlKSB0aHJvdyBuZXcgVHlwZUVycm9yKCdVbmtub3duIGVuY29kaW5nOiAnICsgZW5jb2RpbmcpXG4gICAgICAgIGVuY29kaW5nID0gKGVuY29kaW5nICsgJycpLnRvTG93ZXJDYXNlKClcbiAgICAgICAgbG93ZXJlZENhc2UgPSB0cnVlXG4gICAgfVxuICB9XG59XG5cbi8vIFRoZSBwcm9wZXJ0eSBpcyB1c2VkIGJ5IGBCdWZmZXIuaXNCdWZmZXJgIGFuZCBgaXMtYnVmZmVyYCAoaW4gU2FmYXJpIDUtNykgdG8gZGV0ZWN0XG4vLyBCdWZmZXIgaW5zdGFuY2VzLlxuQnVmZmVyLnByb3RvdHlwZS5faXNCdWZmZXIgPSB0cnVlXG5cbmZ1bmN0aW9uIHN3YXAgKGIsIG4sIG0pIHtcbiAgdmFyIGkgPSBiW25dXG4gIGJbbl0gPSBiW21dXG4gIGJbbV0gPSBpXG59XG5cbkJ1ZmZlci5wcm90b3R5cGUuc3dhcDE2ID0gZnVuY3Rpb24gc3dhcDE2ICgpIHtcbiAgdmFyIGxlbiA9IHRoaXMubGVuZ3RoXG4gIGlmIChsZW4gJSAyICE9PSAwKSB7XG4gICAgdGhyb3cgbmV3IFJhbmdlRXJyb3IoJ0J1ZmZlciBzaXplIG11c3QgYmUgYSBtdWx0aXBsZSBvZiAxNi1iaXRzJylcbiAgfVxuICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbjsgaSArPSAyKSB7XG4gICAgc3dhcCh0aGlzLCBpLCBpICsgMSlcbiAgfVxuICByZXR1cm4gdGhpc1xufVxuXG5CdWZmZXIucHJvdG90eXBlLnN3YXAzMiA9IGZ1bmN0aW9uIHN3YXAzMiAoKSB7XG4gIHZhciBsZW4gPSB0aGlzLmxlbmd0aFxuICBpZiAobGVuICUgNCAhPT0gMCkge1xuICAgIHRocm93IG5ldyBSYW5nZUVycm9yKCdCdWZmZXIgc2l6ZSBtdXN0IGJlIGEgbXVsdGlwbGUgb2YgMzItYml0cycpXG4gIH1cbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW47IGkgKz0gNCkge1xuICAgIHN3YXAodGhpcywgaSwgaSArIDMpXG4gICAgc3dhcCh0aGlzLCBpICsgMSwgaSArIDIpXG4gIH1cbiAgcmV0dXJuIHRoaXNcbn1cblxuQnVmZmVyLnByb3RvdHlwZS5zd2FwNjQgPSBmdW5jdGlvbiBzd2FwNjQgKCkge1xuICB2YXIgbGVuID0gdGhpcy5sZW5ndGhcbiAgaWYgKGxlbiAlIDggIT09IDApIHtcbiAgICB0aHJvdyBuZXcgUmFuZ2VFcnJvcignQnVmZmVyIHNpemUgbXVzdCBiZSBhIG11bHRpcGxlIG9mIDY0LWJpdHMnKVxuICB9XG4gIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuOyBpICs9IDgpIHtcbiAgICBzd2FwKHRoaXMsIGksIGkgKyA3KVxuICAgIHN3YXAodGhpcywgaSArIDEsIGkgKyA2KVxuICAgIHN3YXAodGhpcywgaSArIDIsIGkgKyA1KVxuICAgIHN3YXAodGhpcywgaSArIDMsIGkgKyA0KVxuICB9XG4gIHJldHVybiB0aGlzXG59XG5cbkJ1ZmZlci5wcm90b3R5cGUudG9TdHJpbmcgPSBmdW5jdGlvbiB0b1N0cmluZyAoKSB7XG4gIHZhciBsZW5ndGggPSB0aGlzLmxlbmd0aCB8IDBcbiAgaWYgKGxlbmd0aCA9PT0gMCkgcmV0dXJuICcnXG4gIGlmIChhcmd1bWVudHMubGVuZ3RoID09PSAwKSByZXR1cm4gdXRmOFNsaWNlKHRoaXMsIDAsIGxlbmd0aClcbiAgcmV0dXJuIHNsb3dUb1N0cmluZy5hcHBseSh0aGlzLCBhcmd1bWVudHMpXG59XG5cbkJ1ZmZlci5wcm90b3R5cGUuZXF1YWxzID0gZnVuY3Rpb24gZXF1YWxzIChiKSB7XG4gIGlmICghQnVmZmVyLmlzQnVmZmVyKGIpKSB0aHJvdyBuZXcgVHlwZUVycm9yKCdBcmd1bWVudCBtdXN0IGJlIGEgQnVmZmVyJylcbiAgaWYgKHRoaXMgPT09IGIpIHJldHVybiB0cnVlXG4gIHJldHVybiBCdWZmZXIuY29tcGFyZSh0aGlzLCBiKSA9PT0gMFxufVxuXG5CdWZmZXIucHJvdG90eXBlLmluc3BlY3QgPSBmdW5jdGlvbiBpbnNwZWN0ICgpIHtcbiAgdmFyIHN0ciA9ICcnXG4gIHZhciBtYXggPSBleHBvcnRzLklOU1BFQ1RfTUFYX0JZVEVTXG4gIGlmICh0aGlzLmxlbmd0aCA+IDApIHtcbiAgICBzdHIgPSB0aGlzLnRvU3RyaW5nKCdoZXgnLCAwLCBtYXgpLm1hdGNoKC8uezJ9L2cpLmpvaW4oJyAnKVxuICAgIGlmICh0aGlzLmxlbmd0aCA+IG1heCkgc3RyICs9ICcgLi4uICdcbiAgfVxuICByZXR1cm4gJzxCdWZmZXIgJyArIHN0ciArICc+J1xufVxuXG5CdWZmZXIucHJvdG90eXBlLmNvbXBhcmUgPSBmdW5jdGlvbiBjb21wYXJlICh0YXJnZXQsIHN0YXJ0LCBlbmQsIHRoaXNTdGFydCwgdGhpc0VuZCkge1xuICBpZiAoIUJ1ZmZlci5pc0J1ZmZlcih0YXJnZXQpKSB7XG4gICAgdGhyb3cgbmV3IFR5cGVFcnJvcignQXJndW1lbnQgbXVzdCBiZSBhIEJ1ZmZlcicpXG4gIH1cblxuICBpZiAoc3RhcnQgPT09IHVuZGVmaW5lZCkge1xuICAgIHN0YXJ0ID0gMFxuICB9XG4gIGlmIChlbmQgPT09IHVuZGVmaW5lZCkge1xuICAgIGVuZCA9IHRhcmdldCA/IHRhcmdldC5sZW5ndGggOiAwXG4gIH1cbiAgaWYgKHRoaXNTdGFydCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgdGhpc1N0YXJ0ID0gMFxuICB9XG4gIGlmICh0aGlzRW5kID09PSB1bmRlZmluZWQpIHtcbiAgICB0aGlzRW5kID0gdGhpcy5sZW5ndGhcbiAgfVxuXG4gIGlmIChzdGFydCA8IDAgfHwgZW5kID4gdGFyZ2V0Lmxlbmd0aCB8fCB0aGlzU3RhcnQgPCAwIHx8IHRoaXNFbmQgPiB0aGlzLmxlbmd0aCkge1xuICAgIHRocm93IG5ldyBSYW5nZUVycm9yKCdvdXQgb2YgcmFuZ2UgaW5kZXgnKVxuICB9XG5cbiAgaWYgKHRoaXNTdGFydCA+PSB0aGlzRW5kICYmIHN0YXJ0ID49IGVuZCkge1xuICAgIHJldHVybiAwXG4gIH1cbiAgaWYgKHRoaXNTdGFydCA+PSB0aGlzRW5kKSB7XG4gICAgcmV0dXJuIC0xXG4gIH1cbiAgaWYgKHN0YXJ0ID49IGVuZCkge1xuICAgIHJldHVybiAxXG4gIH1cblxuICBzdGFydCA+Pj49IDBcbiAgZW5kID4+Pj0gMFxuICB0aGlzU3RhcnQgPj4+PSAwXG4gIHRoaXNFbmQgPj4+PSAwXG5cbiAgaWYgKHRoaXMgPT09IHRhcmdldCkgcmV0dXJuIDBcblxuICB2YXIgeCA9IHRoaXNFbmQgLSB0aGlzU3RhcnRcbiAgdmFyIHkgPSBlbmQgLSBzdGFydFxuICB2YXIgbGVuID0gTWF0aC5taW4oeCwgeSlcblxuICB2YXIgdGhpc0NvcHkgPSB0aGlzLnNsaWNlKHRoaXNTdGFydCwgdGhpc0VuZClcbiAgdmFyIHRhcmdldENvcHkgPSB0YXJnZXQuc2xpY2Uoc3RhcnQsIGVuZClcblxuICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbjsgKytpKSB7XG4gICAgaWYgKHRoaXNDb3B5W2ldICE9PSB0YXJnZXRDb3B5W2ldKSB7XG4gICAgICB4ID0gdGhpc0NvcHlbaV1cbiAgICAgIHkgPSB0YXJnZXRDb3B5W2ldXG4gICAgICBicmVha1xuICAgIH1cbiAgfVxuXG4gIGlmICh4IDwgeSkgcmV0dXJuIC0xXG4gIGlmICh5IDwgeCkgcmV0dXJuIDFcbiAgcmV0dXJuIDBcbn1cblxuLy8gRmluZHMgZWl0aGVyIHRoZSBmaXJzdCBpbmRleCBvZiBgdmFsYCBpbiBgYnVmZmVyYCBhdCBvZmZzZXQgPj0gYGJ5dGVPZmZzZXRgLFxuLy8gT1IgdGhlIGxhc3QgaW5kZXggb2YgYHZhbGAgaW4gYGJ1ZmZlcmAgYXQgb2Zmc2V0IDw9IGBieXRlT2Zmc2V0YC5cbi8vXG4vLyBBcmd1bWVudHM6XG4vLyAtIGJ1ZmZlciAtIGEgQnVmZmVyIHRvIHNlYXJjaFxuLy8gLSB2YWwgLSBhIHN0cmluZywgQnVmZmVyLCBvciBudW1iZXJcbi8vIC0gYnl0ZU9mZnNldCAtIGFuIGluZGV4IGludG8gYGJ1ZmZlcmA7IHdpbGwgYmUgY2xhbXBlZCB0byBhbiBpbnQzMlxuLy8gLSBlbmNvZGluZyAtIGFuIG9wdGlvbmFsIGVuY29kaW5nLCByZWxldmFudCBpcyB2YWwgaXMgYSBzdHJpbmdcbi8vIC0gZGlyIC0gdHJ1ZSBmb3IgaW5kZXhPZiwgZmFsc2UgZm9yIGxhc3RJbmRleE9mXG5mdW5jdGlvbiBiaWRpcmVjdGlvbmFsSW5kZXhPZiAoYnVmZmVyLCB2YWwsIGJ5dGVPZmZzZXQsIGVuY29kaW5nLCBkaXIpIHtcbiAgLy8gRW1wdHkgYnVmZmVyIG1lYW5zIG5vIG1hdGNoXG4gIGlmIChidWZmZXIubGVuZ3RoID09PSAwKSByZXR1cm4gLTFcblxuICAvLyBOb3JtYWxpemUgYnl0ZU9mZnNldFxuICBpZiAodHlwZW9mIGJ5dGVPZmZzZXQgPT09ICdzdHJpbmcnKSB7XG4gICAgZW5jb2RpbmcgPSBieXRlT2Zmc2V0XG4gICAgYnl0ZU9mZnNldCA9IDBcbiAgfSBlbHNlIGlmIChieXRlT2Zmc2V0ID4gMHg3ZmZmZmZmZikge1xuICAgIGJ5dGVPZmZzZXQgPSAweDdmZmZmZmZmXG4gIH0gZWxzZSBpZiAoYnl0ZU9mZnNldCA8IC0weDgwMDAwMDAwKSB7XG4gICAgYnl0ZU9mZnNldCA9IC0weDgwMDAwMDAwXG4gIH1cbiAgYnl0ZU9mZnNldCA9ICtieXRlT2Zmc2V0ICAvLyBDb2VyY2UgdG8gTnVtYmVyLlxuICBpZiAoaXNOYU4oYnl0ZU9mZnNldCkpIHtcbiAgICAvLyBieXRlT2Zmc2V0OiBpdCBpdCdzIHVuZGVmaW5lZCwgbnVsbCwgTmFOLCBcImZvb1wiLCBldGMsIHNlYXJjaCB3aG9sZSBidWZmZXJcbiAgICBieXRlT2Zmc2V0ID0gZGlyID8gMCA6IChidWZmZXIubGVuZ3RoIC0gMSlcbiAgfVxuXG4gIC8vIE5vcm1hbGl6ZSBieXRlT2Zmc2V0OiBuZWdhdGl2ZSBvZmZzZXRzIHN0YXJ0IGZyb20gdGhlIGVuZCBvZiB0aGUgYnVmZmVyXG4gIGlmIChieXRlT2Zmc2V0IDwgMCkgYnl0ZU9mZnNldCA9IGJ1ZmZlci5sZW5ndGggKyBieXRlT2Zmc2V0XG4gIGlmIChieXRlT2Zmc2V0ID49IGJ1ZmZlci5sZW5ndGgpIHtcbiAgICBpZiAoZGlyKSByZXR1cm4gLTFcbiAgICBlbHNlIGJ5dGVPZmZzZXQgPSBidWZmZXIubGVuZ3RoIC0gMVxuICB9IGVsc2UgaWYgKGJ5dGVPZmZzZXQgPCAwKSB7XG4gICAgaWYgKGRpcikgYnl0ZU9mZnNldCA9IDBcbiAgICBlbHNlIHJldHVybiAtMVxuICB9XG5cbiAgLy8gTm9ybWFsaXplIHZhbFxuICBpZiAodHlwZW9mIHZhbCA9PT0gJ3N0cmluZycpIHtcbiAgICB2YWwgPSBCdWZmZXIuZnJvbSh2YWwsIGVuY29kaW5nKVxuICB9XG5cbiAgLy8gRmluYWxseSwgc2VhcmNoIGVpdGhlciBpbmRleE9mIChpZiBkaXIgaXMgdHJ1ZSkgb3IgbGFzdEluZGV4T2ZcbiAgaWYgKEJ1ZmZlci5pc0J1ZmZlcih2YWwpKSB7XG4gICAgLy8gU3BlY2lhbCBjYXNlOiBsb29raW5nIGZvciBlbXB0eSBzdHJpbmcvYnVmZmVyIGFsd2F5cyBmYWlsc1xuICAgIGlmICh2YWwubGVuZ3RoID09PSAwKSB7XG4gICAgICByZXR1cm4gLTFcbiAgICB9XG4gICAgcmV0dXJuIGFycmF5SW5kZXhPZihidWZmZXIsIHZhbCwgYnl0ZU9mZnNldCwgZW5jb2RpbmcsIGRpcilcbiAgfSBlbHNlIGlmICh0eXBlb2YgdmFsID09PSAnbnVtYmVyJykge1xuICAgIHZhbCA9IHZhbCAmIDB4RkYgLy8gU2VhcmNoIGZvciBhIGJ5dGUgdmFsdWUgWzAtMjU1XVxuICAgIGlmIChCdWZmZXIuVFlQRURfQVJSQVlfU1VQUE9SVCAmJlxuICAgICAgICB0eXBlb2YgVWludDhBcnJheS5wcm90b3R5cGUuaW5kZXhPZiA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgaWYgKGRpcikge1xuICAgICAgICByZXR1cm4gVWludDhBcnJheS5wcm90b3R5cGUuaW5kZXhPZi5jYWxsKGJ1ZmZlciwgdmFsLCBieXRlT2Zmc2V0KVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIFVpbnQ4QXJyYXkucHJvdG90eXBlLmxhc3RJbmRleE9mLmNhbGwoYnVmZmVyLCB2YWwsIGJ5dGVPZmZzZXQpXG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBhcnJheUluZGV4T2YoYnVmZmVyLCBbIHZhbCBdLCBieXRlT2Zmc2V0LCBlbmNvZGluZywgZGlyKVxuICB9XG5cbiAgdGhyb3cgbmV3IFR5cGVFcnJvcigndmFsIG11c3QgYmUgc3RyaW5nLCBudW1iZXIgb3IgQnVmZmVyJylcbn1cblxuZnVuY3Rpb24gYXJyYXlJbmRleE9mIChhcnIsIHZhbCwgYnl0ZU9mZnNldCwgZW5jb2RpbmcsIGRpcikge1xuICB2YXIgaW5kZXhTaXplID0gMVxuICB2YXIgYXJyTGVuZ3RoID0gYXJyLmxlbmd0aFxuICB2YXIgdmFsTGVuZ3RoID0gdmFsLmxlbmd0aFxuXG4gIGlmIChlbmNvZGluZyAhPT0gdW5kZWZpbmVkKSB7XG4gICAgZW5jb2RpbmcgPSBTdHJpbmcoZW5jb2RpbmcpLnRvTG93ZXJDYXNlKClcbiAgICBpZiAoZW5jb2RpbmcgPT09ICd1Y3MyJyB8fCBlbmNvZGluZyA9PT0gJ3Vjcy0yJyB8fFxuICAgICAgICBlbmNvZGluZyA9PT0gJ3V0ZjE2bGUnIHx8IGVuY29kaW5nID09PSAndXRmLTE2bGUnKSB7XG4gICAgICBpZiAoYXJyLmxlbmd0aCA8IDIgfHwgdmFsLmxlbmd0aCA8IDIpIHtcbiAgICAgICAgcmV0dXJuIC0xXG4gICAgICB9XG4gICAgICBpbmRleFNpemUgPSAyXG4gICAgICBhcnJMZW5ndGggLz0gMlxuICAgICAgdmFsTGVuZ3RoIC89IDJcbiAgICAgIGJ5dGVPZmZzZXQgLz0gMlxuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIHJlYWQgKGJ1ZiwgaSkge1xuICAgIGlmIChpbmRleFNpemUgPT09IDEpIHtcbiAgICAgIHJldHVybiBidWZbaV1cbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIGJ1Zi5yZWFkVUludDE2QkUoaSAqIGluZGV4U2l6ZSlcbiAgICB9XG4gIH1cblxuICB2YXIgaVxuICBpZiAoZGlyKSB7XG4gICAgdmFyIGZvdW5kSW5kZXggPSAtMVxuICAgIGZvciAoaSA9IGJ5dGVPZmZzZXQ7IGkgPCBhcnJMZW5ndGg7IGkrKykge1xuICAgICAgaWYgKHJlYWQoYXJyLCBpKSA9PT0gcmVhZCh2YWwsIGZvdW5kSW5kZXggPT09IC0xID8gMCA6IGkgLSBmb3VuZEluZGV4KSkge1xuICAgICAgICBpZiAoZm91bmRJbmRleCA9PT0gLTEpIGZvdW5kSW5kZXggPSBpXG4gICAgICAgIGlmIChpIC0gZm91bmRJbmRleCArIDEgPT09IHZhbExlbmd0aCkgcmV0dXJuIGZvdW5kSW5kZXggKiBpbmRleFNpemVcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGlmIChmb3VuZEluZGV4ICE9PSAtMSkgaSAtPSBpIC0gZm91bmRJbmRleFxuICAgICAgICBmb3VuZEluZGV4ID0gLTFcbiAgICAgIH1cbiAgICB9XG4gIH0gZWxzZSB7XG4gICAgaWYgKGJ5dGVPZmZzZXQgKyB2YWxMZW5ndGggPiBhcnJMZW5ndGgpIGJ5dGVPZmZzZXQgPSBhcnJMZW5ndGggLSB2YWxMZW5ndGhcbiAgICBmb3IgKGkgPSBieXRlT2Zmc2V0OyBpID49IDA7IGktLSkge1xuICAgICAgdmFyIGZvdW5kID0gdHJ1ZVxuICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCB2YWxMZW5ndGg7IGorKykge1xuICAgICAgICBpZiAocmVhZChhcnIsIGkgKyBqKSAhPT0gcmVhZCh2YWwsIGopKSB7XG4gICAgICAgICAgZm91bmQgPSBmYWxzZVxuICAgICAgICAgIGJyZWFrXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGlmIChmb3VuZCkgcmV0dXJuIGlcbiAgICB9XG4gIH1cblxuICByZXR1cm4gLTFcbn1cblxuQnVmZmVyLnByb3RvdHlwZS5pbmNsdWRlcyA9IGZ1bmN0aW9uIGluY2x1ZGVzICh2YWwsIGJ5dGVPZmZzZXQsIGVuY29kaW5nKSB7XG4gIHJldHVybiB0aGlzLmluZGV4T2YodmFsLCBieXRlT2Zmc2V0LCBlbmNvZGluZykgIT09IC0xXG59XG5cbkJ1ZmZlci5wcm90b3R5cGUuaW5kZXhPZiA9IGZ1bmN0aW9uIGluZGV4T2YgKHZhbCwgYnl0ZU9mZnNldCwgZW5jb2RpbmcpIHtcbiAgcmV0dXJuIGJpZGlyZWN0aW9uYWxJbmRleE9mKHRoaXMsIHZhbCwgYnl0ZU9mZnNldCwgZW5jb2RpbmcsIHRydWUpXG59XG5cbkJ1ZmZlci5wcm90b3R5cGUubGFzdEluZGV4T2YgPSBmdW5jdGlvbiBsYXN0SW5kZXhPZiAodmFsLCBieXRlT2Zmc2V0LCBlbmNvZGluZykge1xuICByZXR1cm4gYmlkaXJlY3Rpb25hbEluZGV4T2YodGhpcywgdmFsLCBieXRlT2Zmc2V0LCBlbmNvZGluZywgZmFsc2UpXG59XG5cbmZ1bmN0aW9uIGhleFdyaXRlIChidWYsIHN0cmluZywgb2Zmc2V0LCBsZW5ndGgpIHtcbiAgb2Zmc2V0ID0gTnVtYmVyKG9mZnNldCkgfHwgMFxuICB2YXIgcmVtYWluaW5nID0gYnVmLmxlbmd0aCAtIG9mZnNldFxuICBpZiAoIWxlbmd0aCkge1xuICAgIGxlbmd0aCA9IHJlbWFpbmluZ1xuICB9IGVsc2Uge1xuICAgIGxlbmd0aCA9IE51bWJlcihsZW5ndGgpXG4gICAgaWYgKGxlbmd0aCA+IHJlbWFpbmluZykge1xuICAgICAgbGVuZ3RoID0gcmVtYWluaW5nXG4gICAgfVxuICB9XG5cbiAgLy8gbXVzdCBiZSBhbiBldmVuIG51bWJlciBvZiBkaWdpdHNcbiAgdmFyIHN0ckxlbiA9IHN0cmluZy5sZW5ndGhcbiAgaWYgKHN0ckxlbiAlIDIgIT09IDApIHRocm93IG5ldyBUeXBlRXJyb3IoJ0ludmFsaWQgaGV4IHN0cmluZycpXG5cbiAgaWYgKGxlbmd0aCA+IHN0ckxlbiAvIDIpIHtcbiAgICBsZW5ndGggPSBzdHJMZW4gLyAyXG4gIH1cbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW5ndGg7ICsraSkge1xuICAgIHZhciBwYXJzZWQgPSBwYXJzZUludChzdHJpbmcuc3Vic3RyKGkgKiAyLCAyKSwgMTYpXG4gICAgaWYgKGlzTmFOKHBhcnNlZCkpIHJldHVybiBpXG4gICAgYnVmW29mZnNldCArIGldID0gcGFyc2VkXG4gIH1cbiAgcmV0dXJuIGlcbn1cblxuZnVuY3Rpb24gdXRmOFdyaXRlIChidWYsIHN0cmluZywgb2Zmc2V0LCBsZW5ndGgpIHtcbiAgcmV0dXJuIGJsaXRCdWZmZXIodXRmOFRvQnl0ZXMoc3RyaW5nLCBidWYubGVuZ3RoIC0gb2Zmc2V0KSwgYnVmLCBvZmZzZXQsIGxlbmd0aClcbn1cblxuZnVuY3Rpb24gYXNjaWlXcml0ZSAoYnVmLCBzdHJpbmcsIG9mZnNldCwgbGVuZ3RoKSB7XG4gIHJldHVybiBibGl0QnVmZmVyKGFzY2lpVG9CeXRlcyhzdHJpbmcpLCBidWYsIG9mZnNldCwgbGVuZ3RoKVxufVxuXG5mdW5jdGlvbiBsYXRpbjFXcml0ZSAoYnVmLCBzdHJpbmcsIG9mZnNldCwgbGVuZ3RoKSB7XG4gIHJldHVybiBhc2NpaVdyaXRlKGJ1Ziwgc3RyaW5nLCBvZmZzZXQsIGxlbmd0aClcbn1cblxuZnVuY3Rpb24gYmFzZTY0V3JpdGUgKGJ1Ziwgc3RyaW5nLCBvZmZzZXQsIGxlbmd0aCkge1xuICByZXR1cm4gYmxpdEJ1ZmZlcihiYXNlNjRUb0J5dGVzKHN0cmluZyksIGJ1Ziwgb2Zmc2V0LCBsZW5ndGgpXG59XG5cbmZ1bmN0aW9uIHVjczJXcml0ZSAoYnVmLCBzdHJpbmcsIG9mZnNldCwgbGVuZ3RoKSB7XG4gIHJldHVybiBibGl0QnVmZmVyKHV0ZjE2bGVUb0J5dGVzKHN0cmluZywgYnVmLmxlbmd0aCAtIG9mZnNldCksIGJ1Ziwgb2Zmc2V0LCBsZW5ndGgpXG59XG5cbkJ1ZmZlci5wcm90b3R5cGUud3JpdGUgPSBmdW5jdGlvbiB3cml0ZSAoc3RyaW5nLCBvZmZzZXQsIGxlbmd0aCwgZW5jb2RpbmcpIHtcbiAgLy8gQnVmZmVyI3dyaXRlKHN0cmluZylcbiAgaWYgKG9mZnNldCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgZW5jb2RpbmcgPSAndXRmOCdcbiAgICBsZW5ndGggPSB0aGlzLmxlbmd0aFxuICAgIG9mZnNldCA9IDBcbiAgLy8gQnVmZmVyI3dyaXRlKHN0cmluZywgZW5jb2RpbmcpXG4gIH0gZWxzZSBpZiAobGVuZ3RoID09PSB1bmRlZmluZWQgJiYgdHlwZW9mIG9mZnNldCA9PT0gJ3N0cmluZycpIHtcbiAgICBlbmNvZGluZyA9IG9mZnNldFxuICAgIGxlbmd0aCA9IHRoaXMubGVuZ3RoXG4gICAgb2Zmc2V0ID0gMFxuICAvLyBCdWZmZXIjd3JpdGUoc3RyaW5nLCBvZmZzZXRbLCBsZW5ndGhdWywgZW5jb2RpbmddKVxuICB9IGVsc2UgaWYgKGlzRmluaXRlKG9mZnNldCkpIHtcbiAgICBvZmZzZXQgPSBvZmZzZXQgfCAwXG4gICAgaWYgKGlzRmluaXRlKGxlbmd0aCkpIHtcbiAgICAgIGxlbmd0aCA9IGxlbmd0aCB8IDBcbiAgICAgIGlmIChlbmNvZGluZyA9PT0gdW5kZWZpbmVkKSBlbmNvZGluZyA9ICd1dGY4J1xuICAgIH0gZWxzZSB7XG4gICAgICBlbmNvZGluZyA9IGxlbmd0aFxuICAgICAgbGVuZ3RoID0gdW5kZWZpbmVkXG4gICAgfVxuICAvLyBsZWdhY3kgd3JpdGUoc3RyaW5nLCBlbmNvZGluZywgb2Zmc2V0LCBsZW5ndGgpIC0gcmVtb3ZlIGluIHYwLjEzXG4gIH0gZWxzZSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgJ0J1ZmZlci53cml0ZShzdHJpbmcsIGVuY29kaW5nLCBvZmZzZXRbLCBsZW5ndGhdKSBpcyBubyBsb25nZXIgc3VwcG9ydGVkJ1xuICAgIClcbiAgfVxuXG4gIHZhciByZW1haW5pbmcgPSB0aGlzLmxlbmd0aCAtIG9mZnNldFxuICBpZiAobGVuZ3RoID09PSB1bmRlZmluZWQgfHwgbGVuZ3RoID4gcmVtYWluaW5nKSBsZW5ndGggPSByZW1haW5pbmdcblxuICBpZiAoKHN0cmluZy5sZW5ndGggPiAwICYmIChsZW5ndGggPCAwIHx8IG9mZnNldCA8IDApKSB8fCBvZmZzZXQgPiB0aGlzLmxlbmd0aCkge1xuICAgIHRocm93IG5ldyBSYW5nZUVycm9yKCdBdHRlbXB0IHRvIHdyaXRlIG91dHNpZGUgYnVmZmVyIGJvdW5kcycpXG4gIH1cblxuICBpZiAoIWVuY29kaW5nKSBlbmNvZGluZyA9ICd1dGY4J1xuXG4gIHZhciBsb3dlcmVkQ2FzZSA9IGZhbHNlXG4gIGZvciAoOzspIHtcbiAgICBzd2l0Y2ggKGVuY29kaW5nKSB7XG4gICAgICBjYXNlICdoZXgnOlxuICAgICAgICByZXR1cm4gaGV4V3JpdGUodGhpcywgc3RyaW5nLCBvZmZzZXQsIGxlbmd0aClcblxuICAgICAgY2FzZSAndXRmOCc6XG4gICAgICBjYXNlICd1dGYtOCc6XG4gICAgICAgIHJldHVybiB1dGY4V3JpdGUodGhpcywgc3RyaW5nLCBvZmZzZXQsIGxlbmd0aClcblxuICAgICAgY2FzZSAnYXNjaWknOlxuICAgICAgICByZXR1cm4gYXNjaWlXcml0ZSh0aGlzLCBzdHJpbmcsIG9mZnNldCwgbGVuZ3RoKVxuXG4gICAgICBjYXNlICdsYXRpbjEnOlxuICAgICAgY2FzZSAnYmluYXJ5JzpcbiAgICAgICAgcmV0dXJuIGxhdGluMVdyaXRlKHRoaXMsIHN0cmluZywgb2Zmc2V0LCBsZW5ndGgpXG5cbiAgICAgIGNhc2UgJ2Jhc2U2NCc6XG4gICAgICAgIC8vIFdhcm5pbmc6IG1heExlbmd0aCBub3QgdGFrZW4gaW50byBhY2NvdW50IGluIGJhc2U2NFdyaXRlXG4gICAgICAgIHJldHVybiBiYXNlNjRXcml0ZSh0aGlzLCBzdHJpbmcsIG9mZnNldCwgbGVuZ3RoKVxuXG4gICAgICBjYXNlICd1Y3MyJzpcbiAgICAgIGNhc2UgJ3Vjcy0yJzpcbiAgICAgIGNhc2UgJ3V0ZjE2bGUnOlxuICAgICAgY2FzZSAndXRmLTE2bGUnOlxuICAgICAgICByZXR1cm4gdWNzMldyaXRlKHRoaXMsIHN0cmluZywgb2Zmc2V0LCBsZW5ndGgpXG5cbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIGlmIChsb3dlcmVkQ2FzZSkgdGhyb3cgbmV3IFR5cGVFcnJvcignVW5rbm93biBlbmNvZGluZzogJyArIGVuY29kaW5nKVxuICAgICAgICBlbmNvZGluZyA9ICgnJyArIGVuY29kaW5nKS50b0xvd2VyQ2FzZSgpXG4gICAgICAgIGxvd2VyZWRDYXNlID0gdHJ1ZVxuICAgIH1cbiAgfVxufVxuXG5CdWZmZXIucHJvdG90eXBlLnRvSlNPTiA9IGZ1bmN0aW9uIHRvSlNPTiAoKSB7XG4gIHJldHVybiB7XG4gICAgdHlwZTogJ0J1ZmZlcicsXG4gICAgZGF0YTogQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwodGhpcy5fYXJyIHx8IHRoaXMsIDApXG4gIH1cbn1cblxuZnVuY3Rpb24gYmFzZTY0U2xpY2UgKGJ1Ziwgc3RhcnQsIGVuZCkge1xuICBpZiAoc3RhcnQgPT09IDAgJiYgZW5kID09PSBidWYubGVuZ3RoKSB7XG4gICAgcmV0dXJuIGJhc2U2NC5mcm9tQnl0ZUFycmF5KGJ1ZilcbiAgfSBlbHNlIHtcbiAgICByZXR1cm4gYmFzZTY0LmZyb21CeXRlQXJyYXkoYnVmLnNsaWNlKHN0YXJ0LCBlbmQpKVxuICB9XG59XG5cbmZ1bmN0aW9uIHV0ZjhTbGljZSAoYnVmLCBzdGFydCwgZW5kKSB7XG4gIGVuZCA9IE1hdGgubWluKGJ1Zi5sZW5ndGgsIGVuZClcbiAgdmFyIHJlcyA9IFtdXG5cbiAgdmFyIGkgPSBzdGFydFxuICB3aGlsZSAoaSA8IGVuZCkge1xuICAgIHZhciBmaXJzdEJ5dGUgPSBidWZbaV1cbiAgICB2YXIgY29kZVBvaW50ID0gbnVsbFxuICAgIHZhciBieXRlc1BlclNlcXVlbmNlID0gKGZpcnN0Qnl0ZSA+IDB4RUYpID8gNFxuICAgICAgOiAoZmlyc3RCeXRlID4gMHhERikgPyAzXG4gICAgICA6IChmaXJzdEJ5dGUgPiAweEJGKSA/IDJcbiAgICAgIDogMVxuXG4gICAgaWYgKGkgKyBieXRlc1BlclNlcXVlbmNlIDw9IGVuZCkge1xuICAgICAgdmFyIHNlY29uZEJ5dGUsIHRoaXJkQnl0ZSwgZm91cnRoQnl0ZSwgdGVtcENvZGVQb2ludFxuXG4gICAgICBzd2l0Y2ggKGJ5dGVzUGVyU2VxdWVuY2UpIHtcbiAgICAgICAgY2FzZSAxOlxuICAgICAgICAgIGlmIChmaXJzdEJ5dGUgPCAweDgwKSB7XG4gICAgICAgICAgICBjb2RlUG9pbnQgPSBmaXJzdEJ5dGVcbiAgICAgICAgICB9XG4gICAgICAgICAgYnJlYWtcbiAgICAgICAgY2FzZSAyOlxuICAgICAgICAgIHNlY29uZEJ5dGUgPSBidWZbaSArIDFdXG4gICAgICAgICAgaWYgKChzZWNvbmRCeXRlICYgMHhDMCkgPT09IDB4ODApIHtcbiAgICAgICAgICAgIHRlbXBDb2RlUG9pbnQgPSAoZmlyc3RCeXRlICYgMHgxRikgPDwgMHg2IHwgKHNlY29uZEJ5dGUgJiAweDNGKVxuICAgICAgICAgICAgaWYgKHRlbXBDb2RlUG9pbnQgPiAweDdGKSB7XG4gICAgICAgICAgICAgIGNvZGVQb2ludCA9IHRlbXBDb2RlUG9pbnRcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgICAgYnJlYWtcbiAgICAgICAgY2FzZSAzOlxuICAgICAgICAgIHNlY29uZEJ5dGUgPSBidWZbaSArIDFdXG4gICAgICAgICAgdGhpcmRCeXRlID0gYnVmW2kgKyAyXVxuICAgICAgICAgIGlmICgoc2Vjb25kQnl0ZSAmIDB4QzApID09PSAweDgwICYmICh0aGlyZEJ5dGUgJiAweEMwKSA9PT0gMHg4MCkge1xuICAgICAgICAgICAgdGVtcENvZGVQb2ludCA9IChmaXJzdEJ5dGUgJiAweEYpIDw8IDB4QyB8IChzZWNvbmRCeXRlICYgMHgzRikgPDwgMHg2IHwgKHRoaXJkQnl0ZSAmIDB4M0YpXG4gICAgICAgICAgICBpZiAodGVtcENvZGVQb2ludCA+IDB4N0ZGICYmICh0ZW1wQ29kZVBvaW50IDwgMHhEODAwIHx8IHRlbXBDb2RlUG9pbnQgPiAweERGRkYpKSB7XG4gICAgICAgICAgICAgIGNvZGVQb2ludCA9IHRlbXBDb2RlUG9pbnRcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgICAgYnJlYWtcbiAgICAgICAgY2FzZSA0OlxuICAgICAgICAgIHNlY29uZEJ5dGUgPSBidWZbaSArIDFdXG4gICAgICAgICAgdGhpcmRCeXRlID0gYnVmW2kgKyAyXVxuICAgICAgICAgIGZvdXJ0aEJ5dGUgPSBidWZbaSArIDNdXG4gICAgICAgICAgaWYgKChzZWNvbmRCeXRlICYgMHhDMCkgPT09IDB4ODAgJiYgKHRoaXJkQnl0ZSAmIDB4QzApID09PSAweDgwICYmIChmb3VydGhCeXRlICYgMHhDMCkgPT09IDB4ODApIHtcbiAgICAgICAgICAgIHRlbXBDb2RlUG9pbnQgPSAoZmlyc3RCeXRlICYgMHhGKSA8PCAweDEyIHwgKHNlY29uZEJ5dGUgJiAweDNGKSA8PCAweEMgfCAodGhpcmRCeXRlICYgMHgzRikgPDwgMHg2IHwgKGZvdXJ0aEJ5dGUgJiAweDNGKVxuICAgICAgICAgICAgaWYgKHRlbXBDb2RlUG9pbnQgPiAweEZGRkYgJiYgdGVtcENvZGVQb2ludCA8IDB4MTEwMDAwKSB7XG4gICAgICAgICAgICAgIGNvZGVQb2ludCA9IHRlbXBDb2RlUG9pbnRcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKGNvZGVQb2ludCA9PT0gbnVsbCkge1xuICAgICAgLy8gd2UgZGlkIG5vdCBnZW5lcmF0ZSBhIHZhbGlkIGNvZGVQb2ludCBzbyBpbnNlcnQgYVxuICAgICAgLy8gcmVwbGFjZW1lbnQgY2hhciAoVStGRkZEKSBhbmQgYWR2YW5jZSBvbmx5IDEgYnl0ZVxuICAgICAgY29kZVBvaW50ID0gMHhGRkZEXG4gICAgICBieXRlc1BlclNlcXVlbmNlID0gMVxuICAgIH0gZWxzZSBpZiAoY29kZVBvaW50ID4gMHhGRkZGKSB7XG4gICAgICAvLyBlbmNvZGUgdG8gdXRmMTYgKHN1cnJvZ2F0ZSBwYWlyIGRhbmNlKVxuICAgICAgY29kZVBvaW50IC09IDB4MTAwMDBcbiAgICAgIHJlcy5wdXNoKGNvZGVQb2ludCA+Pj4gMTAgJiAweDNGRiB8IDB4RDgwMClcbiAgICAgIGNvZGVQb2ludCA9IDB4REMwMCB8IGNvZGVQb2ludCAmIDB4M0ZGXG4gICAgfVxuXG4gICAgcmVzLnB1c2goY29kZVBvaW50KVxuICAgIGkgKz0gYnl0ZXNQZXJTZXF1ZW5jZVxuICB9XG5cbiAgcmV0dXJuIGRlY29kZUNvZGVQb2ludHNBcnJheShyZXMpXG59XG5cbi8vIEJhc2VkIG9uIGh0dHA6Ly9zdGFja292ZXJmbG93LmNvbS9hLzIyNzQ3MjcyLzY4MDc0MiwgdGhlIGJyb3dzZXIgd2l0aFxuLy8gdGhlIGxvd2VzdCBsaW1pdCBpcyBDaHJvbWUsIHdpdGggMHgxMDAwMCBhcmdzLlxuLy8gV2UgZ28gMSBtYWduaXR1ZGUgbGVzcywgZm9yIHNhZmV0eVxudmFyIE1BWF9BUkdVTUVOVFNfTEVOR1RIID0gMHgxMDAwXG5cbmZ1bmN0aW9uIGRlY29kZUNvZGVQb2ludHNBcnJheSAoY29kZVBvaW50cykge1xuICB2YXIgbGVuID0gY29kZVBvaW50cy5sZW5ndGhcbiAgaWYgKGxlbiA8PSBNQVhfQVJHVU1FTlRTX0xFTkdUSCkge1xuICAgIHJldHVybiBTdHJpbmcuZnJvbUNoYXJDb2RlLmFwcGx5KFN0cmluZywgY29kZVBvaW50cykgLy8gYXZvaWQgZXh0cmEgc2xpY2UoKVxuICB9XG5cbiAgLy8gRGVjb2RlIGluIGNodW5rcyB0byBhdm9pZCBcImNhbGwgc3RhY2sgc2l6ZSBleGNlZWRlZFwiLlxuICB2YXIgcmVzID0gJydcbiAgdmFyIGkgPSAwXG4gIHdoaWxlIChpIDwgbGVuKSB7XG4gICAgcmVzICs9IFN0cmluZy5mcm9tQ2hhckNvZGUuYXBwbHkoXG4gICAgICBTdHJpbmcsXG4gICAgICBjb2RlUG9pbnRzLnNsaWNlKGksIGkgKz0gTUFYX0FSR1VNRU5UU19MRU5HVEgpXG4gICAgKVxuICB9XG4gIHJldHVybiByZXNcbn1cblxuZnVuY3Rpb24gYXNjaWlTbGljZSAoYnVmLCBzdGFydCwgZW5kKSB7XG4gIHZhciByZXQgPSAnJ1xuICBlbmQgPSBNYXRoLm1pbihidWYubGVuZ3RoLCBlbmQpXG5cbiAgZm9yICh2YXIgaSA9IHN0YXJ0OyBpIDwgZW5kOyArK2kpIHtcbiAgICByZXQgKz0gU3RyaW5nLmZyb21DaGFyQ29kZShidWZbaV0gJiAweDdGKVxuICB9XG4gIHJldHVybiByZXRcbn1cblxuZnVuY3Rpb24gbGF0aW4xU2xpY2UgKGJ1Ziwgc3RhcnQsIGVuZCkge1xuICB2YXIgcmV0ID0gJydcbiAgZW5kID0gTWF0aC5taW4oYnVmLmxlbmd0aCwgZW5kKVxuXG4gIGZvciAodmFyIGkgPSBzdGFydDsgaSA8IGVuZDsgKytpKSB7XG4gICAgcmV0ICs9IFN0cmluZy5mcm9tQ2hhckNvZGUoYnVmW2ldKVxuICB9XG4gIHJldHVybiByZXRcbn1cblxuZnVuY3Rpb24gaGV4U2xpY2UgKGJ1Ziwgc3RhcnQsIGVuZCkge1xuICB2YXIgbGVuID0gYnVmLmxlbmd0aFxuXG4gIGlmICghc3RhcnQgfHwgc3RhcnQgPCAwKSBzdGFydCA9IDBcbiAgaWYgKCFlbmQgfHwgZW5kIDwgMCB8fCBlbmQgPiBsZW4pIGVuZCA9IGxlblxuXG4gIHZhciBvdXQgPSAnJ1xuICBmb3IgKHZhciBpID0gc3RhcnQ7IGkgPCBlbmQ7ICsraSkge1xuICAgIG91dCArPSB0b0hleChidWZbaV0pXG4gIH1cbiAgcmV0dXJuIG91dFxufVxuXG5mdW5jdGlvbiB1dGYxNmxlU2xpY2UgKGJ1Ziwgc3RhcnQsIGVuZCkge1xuICB2YXIgYnl0ZXMgPSBidWYuc2xpY2Uoc3RhcnQsIGVuZClcbiAgdmFyIHJlcyA9ICcnXG4gIGZvciAodmFyIGkgPSAwOyBpIDwgYnl0ZXMubGVuZ3RoOyBpICs9IDIpIHtcbiAgICByZXMgKz0gU3RyaW5nLmZyb21DaGFyQ29kZShieXRlc1tpXSArIGJ5dGVzW2kgKyAxXSAqIDI1NilcbiAgfVxuICByZXR1cm4gcmVzXG59XG5cbkJ1ZmZlci5wcm90b3R5cGUuc2xpY2UgPSBmdW5jdGlvbiBzbGljZSAoc3RhcnQsIGVuZCkge1xuICB2YXIgbGVuID0gdGhpcy5sZW5ndGhcbiAgc3RhcnQgPSB+fnN0YXJ0XG4gIGVuZCA9IGVuZCA9PT0gdW5kZWZpbmVkID8gbGVuIDogfn5lbmRcblxuICBpZiAoc3RhcnQgPCAwKSB7XG4gICAgc3RhcnQgKz0gbGVuXG4gICAgaWYgKHN0YXJ0IDwgMCkgc3RhcnQgPSAwXG4gIH0gZWxzZSBpZiAoc3RhcnQgPiBsZW4pIHtcbiAgICBzdGFydCA9IGxlblxuICB9XG5cbiAgaWYgKGVuZCA8IDApIHtcbiAgICBlbmQgKz0gbGVuXG4gICAgaWYgKGVuZCA8IDApIGVuZCA9IDBcbiAgfSBlbHNlIGlmIChlbmQgPiBsZW4pIHtcbiAgICBlbmQgPSBsZW5cbiAgfVxuXG4gIGlmIChlbmQgPCBzdGFydCkgZW5kID0gc3RhcnRcblxuICB2YXIgbmV3QnVmXG4gIGlmIChCdWZmZXIuVFlQRURfQVJSQVlfU1VQUE9SVCkge1xuICAgIG5ld0J1ZiA9IHRoaXMuc3ViYXJyYXkoc3RhcnQsIGVuZClcbiAgICBuZXdCdWYuX19wcm90b19fID0gQnVmZmVyLnByb3RvdHlwZVxuICB9IGVsc2Uge1xuICAgIHZhciBzbGljZUxlbiA9IGVuZCAtIHN0YXJ0XG4gICAgbmV3QnVmID0gbmV3IEJ1ZmZlcihzbGljZUxlbiwgdW5kZWZpbmVkKVxuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgc2xpY2VMZW47ICsraSkge1xuICAgICAgbmV3QnVmW2ldID0gdGhpc1tpICsgc3RhcnRdXG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIG5ld0J1ZlxufVxuXG4vKlxuICogTmVlZCB0byBtYWtlIHN1cmUgdGhhdCBidWZmZXIgaXNuJ3QgdHJ5aW5nIHRvIHdyaXRlIG91dCBvZiBib3VuZHMuXG4gKi9cbmZ1bmN0aW9uIGNoZWNrT2Zmc2V0IChvZmZzZXQsIGV4dCwgbGVuZ3RoKSB7XG4gIGlmICgob2Zmc2V0ICUgMSkgIT09IDAgfHwgb2Zmc2V0IDwgMCkgdGhyb3cgbmV3IFJhbmdlRXJyb3IoJ29mZnNldCBpcyBub3QgdWludCcpXG4gIGlmIChvZmZzZXQgKyBleHQgPiBsZW5ndGgpIHRocm93IG5ldyBSYW5nZUVycm9yKCdUcnlpbmcgdG8gYWNjZXNzIGJleW9uZCBidWZmZXIgbGVuZ3RoJylcbn1cblxuQnVmZmVyLnByb3RvdHlwZS5yZWFkVUludExFID0gZnVuY3Rpb24gcmVhZFVJbnRMRSAob2Zmc2V0LCBieXRlTGVuZ3RoLCBub0Fzc2VydCkge1xuICBvZmZzZXQgPSBvZmZzZXQgfCAwXG4gIGJ5dGVMZW5ndGggPSBieXRlTGVuZ3RoIHwgMFxuICBpZiAoIW5vQXNzZXJ0KSBjaGVja09mZnNldChvZmZzZXQsIGJ5dGVMZW5ndGgsIHRoaXMubGVuZ3RoKVxuXG4gIHZhciB2YWwgPSB0aGlzW29mZnNldF1cbiAgdmFyIG11bCA9IDFcbiAgdmFyIGkgPSAwXG4gIHdoaWxlICgrK2kgPCBieXRlTGVuZ3RoICYmIChtdWwgKj0gMHgxMDApKSB7XG4gICAgdmFsICs9IHRoaXNbb2Zmc2V0ICsgaV0gKiBtdWxcbiAgfVxuXG4gIHJldHVybiB2YWxcbn1cblxuQnVmZmVyLnByb3RvdHlwZS5yZWFkVUludEJFID0gZnVuY3Rpb24gcmVhZFVJbnRCRSAob2Zmc2V0LCBieXRlTGVuZ3RoLCBub0Fzc2VydCkge1xuICBvZmZzZXQgPSBvZmZzZXQgfCAwXG4gIGJ5dGVMZW5ndGggPSBieXRlTGVuZ3RoIHwgMFxuICBpZiAoIW5vQXNzZXJ0KSB7XG4gICAgY2hlY2tPZmZzZXQob2Zmc2V0LCBieXRlTGVuZ3RoLCB0aGlzLmxlbmd0aClcbiAgfVxuXG4gIHZhciB2YWwgPSB0aGlzW29mZnNldCArIC0tYnl0ZUxlbmd0aF1cbiAgdmFyIG11bCA9IDFcbiAgd2hpbGUgKGJ5dGVMZW5ndGggPiAwICYmIChtdWwgKj0gMHgxMDApKSB7XG4gICAgdmFsICs9IHRoaXNbb2Zmc2V0ICsgLS1ieXRlTGVuZ3RoXSAqIG11bFxuICB9XG5cbiAgcmV0dXJuIHZhbFxufVxuXG5CdWZmZXIucHJvdG90eXBlLnJlYWRVSW50OCA9IGZ1bmN0aW9uIHJlYWRVSW50OCAob2Zmc2V0LCBub0Fzc2VydCkge1xuICBpZiAoIW5vQXNzZXJ0KSBjaGVja09mZnNldChvZmZzZXQsIDEsIHRoaXMubGVuZ3RoKVxuICByZXR1cm4gdGhpc1tvZmZzZXRdXG59XG5cbkJ1ZmZlci5wcm90b3R5cGUucmVhZFVJbnQxNkxFID0gZnVuY3Rpb24gcmVhZFVJbnQxNkxFIChvZmZzZXQsIG5vQXNzZXJ0KSB7XG4gIGlmICghbm9Bc3NlcnQpIGNoZWNrT2Zmc2V0KG9mZnNldCwgMiwgdGhpcy5sZW5ndGgpXG4gIHJldHVybiB0aGlzW29mZnNldF0gfCAodGhpc1tvZmZzZXQgKyAxXSA8PCA4KVxufVxuXG5CdWZmZXIucHJvdG90eXBlLnJlYWRVSW50MTZCRSA9IGZ1bmN0aW9uIHJlYWRVSW50MTZCRSAob2Zmc2V0LCBub0Fzc2VydCkge1xuICBpZiAoIW5vQXNzZXJ0KSBjaGVja09mZnNldChvZmZzZXQsIDIsIHRoaXMubGVuZ3RoKVxuICByZXR1cm4gKHRoaXNbb2Zmc2V0XSA8PCA4KSB8IHRoaXNbb2Zmc2V0ICsgMV1cbn1cblxuQnVmZmVyLnByb3RvdHlwZS5yZWFkVUludDMyTEUgPSBmdW5jdGlvbiByZWFkVUludDMyTEUgKG9mZnNldCwgbm9Bc3NlcnQpIHtcbiAgaWYgKCFub0Fzc2VydCkgY2hlY2tPZmZzZXQob2Zmc2V0LCA0LCB0aGlzLmxlbmd0aClcblxuICByZXR1cm4gKCh0aGlzW29mZnNldF0pIHxcbiAgICAgICh0aGlzW29mZnNldCArIDFdIDw8IDgpIHxcbiAgICAgICh0aGlzW29mZnNldCArIDJdIDw8IDE2KSkgK1xuICAgICAgKHRoaXNbb2Zmc2V0ICsgM10gKiAweDEwMDAwMDApXG59XG5cbkJ1ZmZlci5wcm90b3R5cGUucmVhZFVJbnQzMkJFID0gZnVuY3Rpb24gcmVhZFVJbnQzMkJFIChvZmZzZXQsIG5vQXNzZXJ0KSB7XG4gIGlmICghbm9Bc3NlcnQpIGNoZWNrT2Zmc2V0KG9mZnNldCwgNCwgdGhpcy5sZW5ndGgpXG5cbiAgcmV0dXJuICh0aGlzW29mZnNldF0gKiAweDEwMDAwMDApICtcbiAgICAoKHRoaXNbb2Zmc2V0ICsgMV0gPDwgMTYpIHxcbiAgICAodGhpc1tvZmZzZXQgKyAyXSA8PCA4KSB8XG4gICAgdGhpc1tvZmZzZXQgKyAzXSlcbn1cblxuQnVmZmVyLnByb3RvdHlwZS5yZWFkSW50TEUgPSBmdW5jdGlvbiByZWFkSW50TEUgKG9mZnNldCwgYnl0ZUxlbmd0aCwgbm9Bc3NlcnQpIHtcbiAgb2Zmc2V0ID0gb2Zmc2V0IHwgMFxuICBieXRlTGVuZ3RoID0gYnl0ZUxlbmd0aCB8IDBcbiAgaWYgKCFub0Fzc2VydCkgY2hlY2tPZmZzZXQob2Zmc2V0LCBieXRlTGVuZ3RoLCB0aGlzLmxlbmd0aClcblxuICB2YXIgdmFsID0gdGhpc1tvZmZzZXRdXG4gIHZhciBtdWwgPSAxXG4gIHZhciBpID0gMFxuICB3aGlsZSAoKytpIDwgYnl0ZUxlbmd0aCAmJiAobXVsICo9IDB4MTAwKSkge1xuICAgIHZhbCArPSB0aGlzW29mZnNldCArIGldICogbXVsXG4gIH1cbiAgbXVsICo9IDB4ODBcblxuICBpZiAodmFsID49IG11bCkgdmFsIC09IE1hdGgucG93KDIsIDggKiBieXRlTGVuZ3RoKVxuXG4gIHJldHVybiB2YWxcbn1cblxuQnVmZmVyLnByb3RvdHlwZS5yZWFkSW50QkUgPSBmdW5jdGlvbiByZWFkSW50QkUgKG9mZnNldCwgYnl0ZUxlbmd0aCwgbm9Bc3NlcnQpIHtcbiAgb2Zmc2V0ID0gb2Zmc2V0IHwgMFxuICBieXRlTGVuZ3RoID0gYnl0ZUxlbmd0aCB8IDBcbiAgaWYgKCFub0Fzc2VydCkgY2hlY2tPZmZzZXQob2Zmc2V0LCBieXRlTGVuZ3RoLCB0aGlzLmxlbmd0aClcblxuICB2YXIgaSA9IGJ5dGVMZW5ndGhcbiAgdmFyIG11bCA9IDFcbiAgdmFyIHZhbCA9IHRoaXNbb2Zmc2V0ICsgLS1pXVxuICB3aGlsZSAoaSA+IDAgJiYgKG11bCAqPSAweDEwMCkpIHtcbiAgICB2YWwgKz0gdGhpc1tvZmZzZXQgKyAtLWldICogbXVsXG4gIH1cbiAgbXVsICo9IDB4ODBcblxuICBpZiAodmFsID49IG11bCkgdmFsIC09IE1hdGgucG93KDIsIDggKiBieXRlTGVuZ3RoKVxuXG4gIHJldHVybiB2YWxcbn1cblxuQnVmZmVyLnByb3RvdHlwZS5yZWFkSW50OCA9IGZ1bmN0aW9uIHJlYWRJbnQ4IChvZmZzZXQsIG5vQXNzZXJ0KSB7XG4gIGlmICghbm9Bc3NlcnQpIGNoZWNrT2Zmc2V0KG9mZnNldCwgMSwgdGhpcy5sZW5ndGgpXG4gIGlmICghKHRoaXNbb2Zmc2V0XSAmIDB4ODApKSByZXR1cm4gKHRoaXNbb2Zmc2V0XSlcbiAgcmV0dXJuICgoMHhmZiAtIHRoaXNbb2Zmc2V0XSArIDEpICogLTEpXG59XG5cbkJ1ZmZlci5wcm90b3R5cGUucmVhZEludDE2TEUgPSBmdW5jdGlvbiByZWFkSW50MTZMRSAob2Zmc2V0LCBub0Fzc2VydCkge1xuICBpZiAoIW5vQXNzZXJ0KSBjaGVja09mZnNldChvZmZzZXQsIDIsIHRoaXMubGVuZ3RoKVxuICB2YXIgdmFsID0gdGhpc1tvZmZzZXRdIHwgKHRoaXNbb2Zmc2V0ICsgMV0gPDwgOClcbiAgcmV0dXJuICh2YWwgJiAweDgwMDApID8gdmFsIHwgMHhGRkZGMDAwMCA6IHZhbFxufVxuXG5CdWZmZXIucHJvdG90eXBlLnJlYWRJbnQxNkJFID0gZnVuY3Rpb24gcmVhZEludDE2QkUgKG9mZnNldCwgbm9Bc3NlcnQpIHtcbiAgaWYgKCFub0Fzc2VydCkgY2hlY2tPZmZzZXQob2Zmc2V0LCAyLCB0aGlzLmxlbmd0aClcbiAgdmFyIHZhbCA9IHRoaXNbb2Zmc2V0ICsgMV0gfCAodGhpc1tvZmZzZXRdIDw8IDgpXG4gIHJldHVybiAodmFsICYgMHg4MDAwKSA/IHZhbCB8IDB4RkZGRjAwMDAgOiB2YWxcbn1cblxuQnVmZmVyLnByb3RvdHlwZS5yZWFkSW50MzJMRSA9IGZ1bmN0aW9uIHJlYWRJbnQzMkxFIChvZmZzZXQsIG5vQXNzZXJ0KSB7XG4gIGlmICghbm9Bc3NlcnQpIGNoZWNrT2Zmc2V0KG9mZnNldCwgNCwgdGhpcy5sZW5ndGgpXG5cbiAgcmV0dXJuICh0aGlzW29mZnNldF0pIHxcbiAgICAodGhpc1tvZmZzZXQgKyAxXSA8PCA4KSB8XG4gICAgKHRoaXNbb2Zmc2V0ICsgMl0gPDwgMTYpIHxcbiAgICAodGhpc1tvZmZzZXQgKyAzXSA8PCAyNClcbn1cblxuQnVmZmVyLnByb3RvdHlwZS5yZWFkSW50MzJCRSA9IGZ1bmN0aW9uIHJlYWRJbnQzMkJFIChvZmZzZXQsIG5vQXNzZXJ0KSB7XG4gIGlmICghbm9Bc3NlcnQpIGNoZWNrT2Zmc2V0KG9mZnNldCwgNCwgdGhpcy5sZW5ndGgpXG5cbiAgcmV0dXJuICh0aGlzW29mZnNldF0gPDwgMjQpIHxcbiAgICAodGhpc1tvZmZzZXQgKyAxXSA8PCAxNikgfFxuICAgICh0aGlzW29mZnNldCArIDJdIDw8IDgpIHxcbiAgICAodGhpc1tvZmZzZXQgKyAzXSlcbn1cblxuQnVmZmVyLnByb3RvdHlwZS5yZWFkRmxvYXRMRSA9IGZ1bmN0aW9uIHJlYWRGbG9hdExFIChvZmZzZXQsIG5vQXNzZXJ0KSB7XG4gIGlmICghbm9Bc3NlcnQpIGNoZWNrT2Zmc2V0KG9mZnNldCwgNCwgdGhpcy5sZW5ndGgpXG4gIHJldHVybiBpZWVlNzU0LnJlYWQodGhpcywgb2Zmc2V0LCB0cnVlLCAyMywgNClcbn1cblxuQnVmZmVyLnByb3RvdHlwZS5yZWFkRmxvYXRCRSA9IGZ1bmN0aW9uIHJlYWRGbG9hdEJFIChvZmZzZXQsIG5vQXNzZXJ0KSB7XG4gIGlmICghbm9Bc3NlcnQpIGNoZWNrT2Zmc2V0KG9mZnNldCwgNCwgdGhpcy5sZW5ndGgpXG4gIHJldHVybiBpZWVlNzU0LnJlYWQodGhpcywgb2Zmc2V0LCBmYWxzZSwgMjMsIDQpXG59XG5cbkJ1ZmZlci5wcm90b3R5cGUucmVhZERvdWJsZUxFID0gZnVuY3Rpb24gcmVhZERvdWJsZUxFIChvZmZzZXQsIG5vQXNzZXJ0KSB7XG4gIGlmICghbm9Bc3NlcnQpIGNoZWNrT2Zmc2V0KG9mZnNldCwgOCwgdGhpcy5sZW5ndGgpXG4gIHJldHVybiBpZWVlNzU0LnJlYWQodGhpcywgb2Zmc2V0LCB0cnVlLCA1MiwgOClcbn1cblxuQnVmZmVyLnByb3RvdHlwZS5yZWFkRG91YmxlQkUgPSBmdW5jdGlvbiByZWFkRG91YmxlQkUgKG9mZnNldCwgbm9Bc3NlcnQpIHtcbiAgaWYgKCFub0Fzc2VydCkgY2hlY2tPZmZzZXQob2Zmc2V0LCA4LCB0aGlzLmxlbmd0aClcbiAgcmV0dXJuIGllZWU3NTQucmVhZCh0aGlzLCBvZmZzZXQsIGZhbHNlLCA1MiwgOClcbn1cblxuZnVuY3Rpb24gY2hlY2tJbnQgKGJ1ZiwgdmFsdWUsIG9mZnNldCwgZXh0LCBtYXgsIG1pbikge1xuICBpZiAoIUJ1ZmZlci5pc0J1ZmZlcihidWYpKSB0aHJvdyBuZXcgVHlwZUVycm9yKCdcImJ1ZmZlclwiIGFyZ3VtZW50IG11c3QgYmUgYSBCdWZmZXIgaW5zdGFuY2UnKVxuICBpZiAodmFsdWUgPiBtYXggfHwgdmFsdWUgPCBtaW4pIHRocm93IG5ldyBSYW5nZUVycm9yKCdcInZhbHVlXCIgYXJndW1lbnQgaXMgb3V0IG9mIGJvdW5kcycpXG4gIGlmIChvZmZzZXQgKyBleHQgPiBidWYubGVuZ3RoKSB0aHJvdyBuZXcgUmFuZ2VFcnJvcignSW5kZXggb3V0IG9mIHJhbmdlJylcbn1cblxuQnVmZmVyLnByb3RvdHlwZS53cml0ZVVJbnRMRSA9IGZ1bmN0aW9uIHdyaXRlVUludExFICh2YWx1ZSwgb2Zmc2V0LCBieXRlTGVuZ3RoLCBub0Fzc2VydCkge1xuICB2YWx1ZSA9ICt2YWx1ZVxuICBvZmZzZXQgPSBvZmZzZXQgfCAwXG4gIGJ5dGVMZW5ndGggPSBieXRlTGVuZ3RoIHwgMFxuICBpZiAoIW5vQXNzZXJ0KSB7XG4gICAgdmFyIG1heEJ5dGVzID0gTWF0aC5wb3coMiwgOCAqIGJ5dGVMZW5ndGgpIC0gMVxuICAgIGNoZWNrSW50KHRoaXMsIHZhbHVlLCBvZmZzZXQsIGJ5dGVMZW5ndGgsIG1heEJ5dGVzLCAwKVxuICB9XG5cbiAgdmFyIG11bCA9IDFcbiAgdmFyIGkgPSAwXG4gIHRoaXNbb2Zmc2V0XSA9IHZhbHVlICYgMHhGRlxuICB3aGlsZSAoKytpIDwgYnl0ZUxlbmd0aCAmJiAobXVsICo9IDB4MTAwKSkge1xuICAgIHRoaXNbb2Zmc2V0ICsgaV0gPSAodmFsdWUgLyBtdWwpICYgMHhGRlxuICB9XG5cbiAgcmV0dXJuIG9mZnNldCArIGJ5dGVMZW5ndGhcbn1cblxuQnVmZmVyLnByb3RvdHlwZS53cml0ZVVJbnRCRSA9IGZ1bmN0aW9uIHdyaXRlVUludEJFICh2YWx1ZSwgb2Zmc2V0LCBieXRlTGVuZ3RoLCBub0Fzc2VydCkge1xuICB2YWx1ZSA9ICt2YWx1ZVxuICBvZmZzZXQgPSBvZmZzZXQgfCAwXG4gIGJ5dGVMZW5ndGggPSBieXRlTGVuZ3RoIHwgMFxuICBpZiAoIW5vQXNzZXJ0KSB7XG4gICAgdmFyIG1heEJ5dGVzID0gTWF0aC5wb3coMiwgOCAqIGJ5dGVMZW5ndGgpIC0gMVxuICAgIGNoZWNrSW50KHRoaXMsIHZhbHVlLCBvZmZzZXQsIGJ5dGVMZW5ndGgsIG1heEJ5dGVzLCAwKVxuICB9XG5cbiAgdmFyIGkgPSBieXRlTGVuZ3RoIC0gMVxuICB2YXIgbXVsID0gMVxuICB0aGlzW29mZnNldCArIGldID0gdmFsdWUgJiAweEZGXG4gIHdoaWxlICgtLWkgPj0gMCAmJiAobXVsICo9IDB4MTAwKSkge1xuICAgIHRoaXNbb2Zmc2V0ICsgaV0gPSAodmFsdWUgLyBtdWwpICYgMHhGRlxuICB9XG5cbiAgcmV0dXJuIG9mZnNldCArIGJ5dGVMZW5ndGhcbn1cblxuQnVmZmVyLnByb3RvdHlwZS53cml0ZVVJbnQ4ID0gZnVuY3Rpb24gd3JpdGVVSW50OCAodmFsdWUsIG9mZnNldCwgbm9Bc3NlcnQpIHtcbiAgdmFsdWUgPSArdmFsdWVcbiAgb2Zmc2V0ID0gb2Zmc2V0IHwgMFxuICBpZiAoIW5vQXNzZXJ0KSBjaGVja0ludCh0aGlzLCB2YWx1ZSwgb2Zmc2V0LCAxLCAweGZmLCAwKVxuICBpZiAoIUJ1ZmZlci5UWVBFRF9BUlJBWV9TVVBQT1JUKSB2YWx1ZSA9IE1hdGguZmxvb3IodmFsdWUpXG4gIHRoaXNbb2Zmc2V0XSA9ICh2YWx1ZSAmIDB4ZmYpXG4gIHJldHVybiBvZmZzZXQgKyAxXG59XG5cbmZ1bmN0aW9uIG9iamVjdFdyaXRlVUludDE2IChidWYsIHZhbHVlLCBvZmZzZXQsIGxpdHRsZUVuZGlhbikge1xuICBpZiAodmFsdWUgPCAwKSB2YWx1ZSA9IDB4ZmZmZiArIHZhbHVlICsgMVxuICBmb3IgKHZhciBpID0gMCwgaiA9IE1hdGgubWluKGJ1Zi5sZW5ndGggLSBvZmZzZXQsIDIpOyBpIDwgajsgKytpKSB7XG4gICAgYnVmW29mZnNldCArIGldID0gKHZhbHVlICYgKDB4ZmYgPDwgKDggKiAobGl0dGxlRW5kaWFuID8gaSA6IDEgLSBpKSkpKSA+Pj5cbiAgICAgIChsaXR0bGVFbmRpYW4gPyBpIDogMSAtIGkpICogOFxuICB9XG59XG5cbkJ1ZmZlci5wcm90b3R5cGUud3JpdGVVSW50MTZMRSA9IGZ1bmN0aW9uIHdyaXRlVUludDE2TEUgKHZhbHVlLCBvZmZzZXQsIG5vQXNzZXJ0KSB7XG4gIHZhbHVlID0gK3ZhbHVlXG4gIG9mZnNldCA9IG9mZnNldCB8IDBcbiAgaWYgKCFub0Fzc2VydCkgY2hlY2tJbnQodGhpcywgdmFsdWUsIG9mZnNldCwgMiwgMHhmZmZmLCAwKVxuICBpZiAoQnVmZmVyLlRZUEVEX0FSUkFZX1NVUFBPUlQpIHtcbiAgICB0aGlzW29mZnNldF0gPSAodmFsdWUgJiAweGZmKVxuICAgIHRoaXNbb2Zmc2V0ICsgMV0gPSAodmFsdWUgPj4+IDgpXG4gIH0gZWxzZSB7XG4gICAgb2JqZWN0V3JpdGVVSW50MTYodGhpcywgdmFsdWUsIG9mZnNldCwgdHJ1ZSlcbiAgfVxuICByZXR1cm4gb2Zmc2V0ICsgMlxufVxuXG5CdWZmZXIucHJvdG90eXBlLndyaXRlVUludDE2QkUgPSBmdW5jdGlvbiB3cml0ZVVJbnQxNkJFICh2YWx1ZSwgb2Zmc2V0LCBub0Fzc2VydCkge1xuICB2YWx1ZSA9ICt2YWx1ZVxuICBvZmZzZXQgPSBvZmZzZXQgfCAwXG4gIGlmICghbm9Bc3NlcnQpIGNoZWNrSW50KHRoaXMsIHZhbHVlLCBvZmZzZXQsIDIsIDB4ZmZmZiwgMClcbiAgaWYgKEJ1ZmZlci5UWVBFRF9BUlJBWV9TVVBQT1JUKSB7XG4gICAgdGhpc1tvZmZzZXRdID0gKHZhbHVlID4+PiA4KVxuICAgIHRoaXNbb2Zmc2V0ICsgMV0gPSAodmFsdWUgJiAweGZmKVxuICB9IGVsc2Uge1xuICAgIG9iamVjdFdyaXRlVUludDE2KHRoaXMsIHZhbHVlLCBvZmZzZXQsIGZhbHNlKVxuICB9XG4gIHJldHVybiBvZmZzZXQgKyAyXG59XG5cbmZ1bmN0aW9uIG9iamVjdFdyaXRlVUludDMyIChidWYsIHZhbHVlLCBvZmZzZXQsIGxpdHRsZUVuZGlhbikge1xuICBpZiAodmFsdWUgPCAwKSB2YWx1ZSA9IDB4ZmZmZmZmZmYgKyB2YWx1ZSArIDFcbiAgZm9yICh2YXIgaSA9IDAsIGogPSBNYXRoLm1pbihidWYubGVuZ3RoIC0gb2Zmc2V0LCA0KTsgaSA8IGo7ICsraSkge1xuICAgIGJ1ZltvZmZzZXQgKyBpXSA9ICh2YWx1ZSA+Pj4gKGxpdHRsZUVuZGlhbiA/IGkgOiAzIC0gaSkgKiA4KSAmIDB4ZmZcbiAgfVxufVxuXG5CdWZmZXIucHJvdG90eXBlLndyaXRlVUludDMyTEUgPSBmdW5jdGlvbiB3cml0ZVVJbnQzMkxFICh2YWx1ZSwgb2Zmc2V0LCBub0Fzc2VydCkge1xuICB2YWx1ZSA9ICt2YWx1ZVxuICBvZmZzZXQgPSBvZmZzZXQgfCAwXG4gIGlmICghbm9Bc3NlcnQpIGNoZWNrSW50KHRoaXMsIHZhbHVlLCBvZmZzZXQsIDQsIDB4ZmZmZmZmZmYsIDApXG4gIGlmIChCdWZmZXIuVFlQRURfQVJSQVlfU1VQUE9SVCkge1xuICAgIHRoaXNbb2Zmc2V0ICsgM10gPSAodmFsdWUgPj4+IDI0KVxuICAgIHRoaXNbb2Zmc2V0ICsgMl0gPSAodmFsdWUgPj4+IDE2KVxuICAgIHRoaXNbb2Zmc2V0ICsgMV0gPSAodmFsdWUgPj4+IDgpXG4gICAgdGhpc1tvZmZzZXRdID0gKHZhbHVlICYgMHhmZilcbiAgfSBlbHNlIHtcbiAgICBvYmplY3RXcml0ZVVJbnQzMih0aGlzLCB2YWx1ZSwgb2Zmc2V0LCB0cnVlKVxuICB9XG4gIHJldHVybiBvZmZzZXQgKyA0XG59XG5cbkJ1ZmZlci5wcm90b3R5cGUud3JpdGVVSW50MzJCRSA9IGZ1bmN0aW9uIHdyaXRlVUludDMyQkUgKHZhbHVlLCBvZmZzZXQsIG5vQXNzZXJ0KSB7XG4gIHZhbHVlID0gK3ZhbHVlXG4gIG9mZnNldCA9IG9mZnNldCB8IDBcbiAgaWYgKCFub0Fzc2VydCkgY2hlY2tJbnQodGhpcywgdmFsdWUsIG9mZnNldCwgNCwgMHhmZmZmZmZmZiwgMClcbiAgaWYgKEJ1ZmZlci5UWVBFRF9BUlJBWV9TVVBQT1JUKSB7XG4gICAgdGhpc1tvZmZzZXRdID0gKHZhbHVlID4+PiAyNClcbiAgICB0aGlzW29mZnNldCArIDFdID0gKHZhbHVlID4+PiAxNilcbiAgICB0aGlzW29mZnNldCArIDJdID0gKHZhbHVlID4+PiA4KVxuICAgIHRoaXNbb2Zmc2V0ICsgM10gPSAodmFsdWUgJiAweGZmKVxuICB9IGVsc2Uge1xuICAgIG9iamVjdFdyaXRlVUludDMyKHRoaXMsIHZhbHVlLCBvZmZzZXQsIGZhbHNlKVxuICB9XG4gIHJldHVybiBvZmZzZXQgKyA0XG59XG5cbkJ1ZmZlci5wcm90b3R5cGUud3JpdGVJbnRMRSA9IGZ1bmN0aW9uIHdyaXRlSW50TEUgKHZhbHVlLCBvZmZzZXQsIGJ5dGVMZW5ndGgsIG5vQXNzZXJ0KSB7XG4gIHZhbHVlID0gK3ZhbHVlXG4gIG9mZnNldCA9IG9mZnNldCB8IDBcbiAgaWYgKCFub0Fzc2VydCkge1xuICAgIHZhciBsaW1pdCA9IE1hdGgucG93KDIsIDggKiBieXRlTGVuZ3RoIC0gMSlcblxuICAgIGNoZWNrSW50KHRoaXMsIHZhbHVlLCBvZmZzZXQsIGJ5dGVMZW5ndGgsIGxpbWl0IC0gMSwgLWxpbWl0KVxuICB9XG5cbiAgdmFyIGkgPSAwXG4gIHZhciBtdWwgPSAxXG4gIHZhciBzdWIgPSAwXG4gIHRoaXNbb2Zmc2V0XSA9IHZhbHVlICYgMHhGRlxuICB3aGlsZSAoKytpIDwgYnl0ZUxlbmd0aCAmJiAobXVsICo9IDB4MTAwKSkge1xuICAgIGlmICh2YWx1ZSA8IDAgJiYgc3ViID09PSAwICYmIHRoaXNbb2Zmc2V0ICsgaSAtIDFdICE9PSAwKSB7XG4gICAgICBzdWIgPSAxXG4gICAgfVxuICAgIHRoaXNbb2Zmc2V0ICsgaV0gPSAoKHZhbHVlIC8gbXVsKSA+PiAwKSAtIHN1YiAmIDB4RkZcbiAgfVxuXG4gIHJldHVybiBvZmZzZXQgKyBieXRlTGVuZ3RoXG59XG5cbkJ1ZmZlci5wcm90b3R5cGUud3JpdGVJbnRCRSA9IGZ1bmN0aW9uIHdyaXRlSW50QkUgKHZhbHVlLCBvZmZzZXQsIGJ5dGVMZW5ndGgsIG5vQXNzZXJ0KSB7XG4gIHZhbHVlID0gK3ZhbHVlXG4gIG9mZnNldCA9IG9mZnNldCB8IDBcbiAgaWYgKCFub0Fzc2VydCkge1xuICAgIHZhciBsaW1pdCA9IE1hdGgucG93KDIsIDggKiBieXRlTGVuZ3RoIC0gMSlcblxuICAgIGNoZWNrSW50KHRoaXMsIHZhbHVlLCBvZmZzZXQsIGJ5dGVMZW5ndGgsIGxpbWl0IC0gMSwgLWxpbWl0KVxuICB9XG5cbiAgdmFyIGkgPSBieXRlTGVuZ3RoIC0gMVxuICB2YXIgbXVsID0gMVxuICB2YXIgc3ViID0gMFxuICB0aGlzW29mZnNldCArIGldID0gdmFsdWUgJiAweEZGXG4gIHdoaWxlICgtLWkgPj0gMCAmJiAobXVsICo9IDB4MTAwKSkge1xuICAgIGlmICh2YWx1ZSA8IDAgJiYgc3ViID09PSAwICYmIHRoaXNbb2Zmc2V0ICsgaSArIDFdICE9PSAwKSB7XG4gICAgICBzdWIgPSAxXG4gICAgfVxuICAgIHRoaXNbb2Zmc2V0ICsgaV0gPSAoKHZhbHVlIC8gbXVsKSA+PiAwKSAtIHN1YiAmIDB4RkZcbiAgfVxuXG4gIHJldHVybiBvZmZzZXQgKyBieXRlTGVuZ3RoXG59XG5cbkJ1ZmZlci5wcm90b3R5cGUud3JpdGVJbnQ4ID0gZnVuY3Rpb24gd3JpdGVJbnQ4ICh2YWx1ZSwgb2Zmc2V0LCBub0Fzc2VydCkge1xuICB2YWx1ZSA9ICt2YWx1ZVxuICBvZmZzZXQgPSBvZmZzZXQgfCAwXG4gIGlmICghbm9Bc3NlcnQpIGNoZWNrSW50KHRoaXMsIHZhbHVlLCBvZmZzZXQsIDEsIDB4N2YsIC0weDgwKVxuICBpZiAoIUJ1ZmZlci5UWVBFRF9BUlJBWV9TVVBQT1JUKSB2YWx1ZSA9IE1hdGguZmxvb3IodmFsdWUpXG4gIGlmICh2YWx1ZSA8IDApIHZhbHVlID0gMHhmZiArIHZhbHVlICsgMVxuICB0aGlzW29mZnNldF0gPSAodmFsdWUgJiAweGZmKVxuICByZXR1cm4gb2Zmc2V0ICsgMVxufVxuXG5CdWZmZXIucHJvdG90eXBlLndyaXRlSW50MTZMRSA9IGZ1bmN0aW9uIHdyaXRlSW50MTZMRSAodmFsdWUsIG9mZnNldCwgbm9Bc3NlcnQpIHtcbiAgdmFsdWUgPSArdmFsdWVcbiAgb2Zmc2V0ID0gb2Zmc2V0IHwgMFxuICBpZiAoIW5vQXNzZXJ0KSBjaGVja0ludCh0aGlzLCB2YWx1ZSwgb2Zmc2V0LCAyLCAweDdmZmYsIC0weDgwMDApXG4gIGlmIChCdWZmZXIuVFlQRURfQVJSQVlfU1VQUE9SVCkge1xuICAgIHRoaXNbb2Zmc2V0XSA9ICh2YWx1ZSAmIDB4ZmYpXG4gICAgdGhpc1tvZmZzZXQgKyAxXSA9ICh2YWx1ZSA+Pj4gOClcbiAgfSBlbHNlIHtcbiAgICBvYmplY3RXcml0ZVVJbnQxNih0aGlzLCB2YWx1ZSwgb2Zmc2V0LCB0cnVlKVxuICB9XG4gIHJldHVybiBvZmZzZXQgKyAyXG59XG5cbkJ1ZmZlci5wcm90b3R5cGUud3JpdGVJbnQxNkJFID0gZnVuY3Rpb24gd3JpdGVJbnQxNkJFICh2YWx1ZSwgb2Zmc2V0LCBub0Fzc2VydCkge1xuICB2YWx1ZSA9ICt2YWx1ZVxuICBvZmZzZXQgPSBvZmZzZXQgfCAwXG4gIGlmICghbm9Bc3NlcnQpIGNoZWNrSW50KHRoaXMsIHZhbHVlLCBvZmZzZXQsIDIsIDB4N2ZmZiwgLTB4ODAwMClcbiAgaWYgKEJ1ZmZlci5UWVBFRF9BUlJBWV9TVVBQT1JUKSB7XG4gICAgdGhpc1tvZmZzZXRdID0gKHZhbHVlID4+PiA4KVxuICAgIHRoaXNbb2Zmc2V0ICsgMV0gPSAodmFsdWUgJiAweGZmKVxuICB9IGVsc2Uge1xuICAgIG9iamVjdFdyaXRlVUludDE2KHRoaXMsIHZhbHVlLCBvZmZzZXQsIGZhbHNlKVxuICB9XG4gIHJldHVybiBvZmZzZXQgKyAyXG59XG5cbkJ1ZmZlci5wcm90b3R5cGUud3JpdGVJbnQzMkxFID0gZnVuY3Rpb24gd3JpdGVJbnQzMkxFICh2YWx1ZSwgb2Zmc2V0LCBub0Fzc2VydCkge1xuICB2YWx1ZSA9ICt2YWx1ZVxuICBvZmZzZXQgPSBvZmZzZXQgfCAwXG4gIGlmICghbm9Bc3NlcnQpIGNoZWNrSW50KHRoaXMsIHZhbHVlLCBvZmZzZXQsIDQsIDB4N2ZmZmZmZmYsIC0weDgwMDAwMDAwKVxuICBpZiAoQnVmZmVyLlRZUEVEX0FSUkFZX1NVUFBPUlQpIHtcbiAgICB0aGlzW29mZnNldF0gPSAodmFsdWUgJiAweGZmKVxuICAgIHRoaXNbb2Zmc2V0ICsgMV0gPSAodmFsdWUgPj4+IDgpXG4gICAgdGhpc1tvZmZzZXQgKyAyXSA9ICh2YWx1ZSA+Pj4gMTYpXG4gICAgdGhpc1tvZmZzZXQgKyAzXSA9ICh2YWx1ZSA+Pj4gMjQpXG4gIH0gZWxzZSB7XG4gICAgb2JqZWN0V3JpdGVVSW50MzIodGhpcywgdmFsdWUsIG9mZnNldCwgdHJ1ZSlcbiAgfVxuICByZXR1cm4gb2Zmc2V0ICsgNFxufVxuXG5CdWZmZXIucHJvdG90eXBlLndyaXRlSW50MzJCRSA9IGZ1bmN0aW9uIHdyaXRlSW50MzJCRSAodmFsdWUsIG9mZnNldCwgbm9Bc3NlcnQpIHtcbiAgdmFsdWUgPSArdmFsdWVcbiAgb2Zmc2V0ID0gb2Zmc2V0IHwgMFxuICBpZiAoIW5vQXNzZXJ0KSBjaGVja0ludCh0aGlzLCB2YWx1ZSwgb2Zmc2V0LCA0LCAweDdmZmZmZmZmLCAtMHg4MDAwMDAwMClcbiAgaWYgKHZhbHVlIDwgMCkgdmFsdWUgPSAweGZmZmZmZmZmICsgdmFsdWUgKyAxXG4gIGlmIChCdWZmZXIuVFlQRURfQVJSQVlfU1VQUE9SVCkge1xuICAgIHRoaXNbb2Zmc2V0XSA9ICh2YWx1ZSA+Pj4gMjQpXG4gICAgdGhpc1tvZmZzZXQgKyAxXSA9ICh2YWx1ZSA+Pj4gMTYpXG4gICAgdGhpc1tvZmZzZXQgKyAyXSA9ICh2YWx1ZSA+Pj4gOClcbiAgICB0aGlzW29mZnNldCArIDNdID0gKHZhbHVlICYgMHhmZilcbiAgfSBlbHNlIHtcbiAgICBvYmplY3RXcml0ZVVJbnQzMih0aGlzLCB2YWx1ZSwgb2Zmc2V0LCBmYWxzZSlcbiAgfVxuICByZXR1cm4gb2Zmc2V0ICsgNFxufVxuXG5mdW5jdGlvbiBjaGVja0lFRUU3NTQgKGJ1ZiwgdmFsdWUsIG9mZnNldCwgZXh0LCBtYXgsIG1pbikge1xuICBpZiAob2Zmc2V0ICsgZXh0ID4gYnVmLmxlbmd0aCkgdGhyb3cgbmV3IFJhbmdlRXJyb3IoJ0luZGV4IG91dCBvZiByYW5nZScpXG4gIGlmIChvZmZzZXQgPCAwKSB0aHJvdyBuZXcgUmFuZ2VFcnJvcignSW5kZXggb3V0IG9mIHJhbmdlJylcbn1cblxuZnVuY3Rpb24gd3JpdGVGbG9hdCAoYnVmLCB2YWx1ZSwgb2Zmc2V0LCBsaXR0bGVFbmRpYW4sIG5vQXNzZXJ0KSB7XG4gIGlmICghbm9Bc3NlcnQpIHtcbiAgICBjaGVja0lFRUU3NTQoYnVmLCB2YWx1ZSwgb2Zmc2V0LCA0LCAzLjQwMjgyMzQ2NjM4NTI4ODZlKzM4LCAtMy40MDI4MjM0NjYzODUyODg2ZSszOClcbiAgfVxuICBpZWVlNzU0LndyaXRlKGJ1ZiwgdmFsdWUsIG9mZnNldCwgbGl0dGxlRW5kaWFuLCAyMywgNClcbiAgcmV0dXJuIG9mZnNldCArIDRcbn1cblxuQnVmZmVyLnByb3RvdHlwZS53cml0ZUZsb2F0TEUgPSBmdW5jdGlvbiB3cml0ZUZsb2F0TEUgKHZhbHVlLCBvZmZzZXQsIG5vQXNzZXJ0KSB7XG4gIHJldHVybiB3cml0ZUZsb2F0KHRoaXMsIHZhbHVlLCBvZmZzZXQsIHRydWUsIG5vQXNzZXJ0KVxufVxuXG5CdWZmZXIucHJvdG90eXBlLndyaXRlRmxvYXRCRSA9IGZ1bmN0aW9uIHdyaXRlRmxvYXRCRSAodmFsdWUsIG9mZnNldCwgbm9Bc3NlcnQpIHtcbiAgcmV0dXJuIHdyaXRlRmxvYXQodGhpcywgdmFsdWUsIG9mZnNldCwgZmFsc2UsIG5vQXNzZXJ0KVxufVxuXG5mdW5jdGlvbiB3cml0ZURvdWJsZSAoYnVmLCB2YWx1ZSwgb2Zmc2V0LCBsaXR0bGVFbmRpYW4sIG5vQXNzZXJ0KSB7XG4gIGlmICghbm9Bc3NlcnQpIHtcbiAgICBjaGVja0lFRUU3NTQoYnVmLCB2YWx1ZSwgb2Zmc2V0LCA4LCAxLjc5NzY5MzEzNDg2MjMxNTdFKzMwOCwgLTEuNzk3NjkzMTM0ODYyMzE1N0UrMzA4KVxuICB9XG4gIGllZWU3NTQud3JpdGUoYnVmLCB2YWx1ZSwgb2Zmc2V0LCBsaXR0bGVFbmRpYW4sIDUyLCA4KVxuICByZXR1cm4gb2Zmc2V0ICsgOFxufVxuXG5CdWZmZXIucHJvdG90eXBlLndyaXRlRG91YmxlTEUgPSBmdW5jdGlvbiB3cml0ZURvdWJsZUxFICh2YWx1ZSwgb2Zmc2V0LCBub0Fzc2VydCkge1xuICByZXR1cm4gd3JpdGVEb3VibGUodGhpcywgdmFsdWUsIG9mZnNldCwgdHJ1ZSwgbm9Bc3NlcnQpXG59XG5cbkJ1ZmZlci5wcm90b3R5cGUud3JpdGVEb3VibGVCRSA9IGZ1bmN0aW9uIHdyaXRlRG91YmxlQkUgKHZhbHVlLCBvZmZzZXQsIG5vQXNzZXJ0KSB7XG4gIHJldHVybiB3cml0ZURvdWJsZSh0aGlzLCB2YWx1ZSwgb2Zmc2V0LCBmYWxzZSwgbm9Bc3NlcnQpXG59XG5cbi8vIGNvcHkodGFyZ2V0QnVmZmVyLCB0YXJnZXRTdGFydD0wLCBzb3VyY2VTdGFydD0wLCBzb3VyY2VFbmQ9YnVmZmVyLmxlbmd0aClcbkJ1ZmZlci5wcm90b3R5cGUuY29weSA9IGZ1bmN0aW9uIGNvcHkgKHRhcmdldCwgdGFyZ2V0U3RhcnQsIHN0YXJ0LCBlbmQpIHtcbiAgaWYgKCFzdGFydCkgc3RhcnQgPSAwXG4gIGlmICghZW5kICYmIGVuZCAhPT0gMCkgZW5kID0gdGhpcy5sZW5ndGhcbiAgaWYgKHRhcmdldFN0YXJ0ID49IHRhcmdldC5sZW5ndGgpIHRhcmdldFN0YXJ0ID0gdGFyZ2V0Lmxlbmd0aFxuICBpZiAoIXRhcmdldFN0YXJ0KSB0YXJnZXRTdGFydCA9IDBcbiAgaWYgKGVuZCA+IDAgJiYgZW5kIDwgc3RhcnQpIGVuZCA9IHN0YXJ0XG5cbiAgLy8gQ29weSAwIGJ5dGVzOyB3ZSdyZSBkb25lXG4gIGlmIChlbmQgPT09IHN0YXJ0KSByZXR1cm4gMFxuICBpZiAodGFyZ2V0Lmxlbmd0aCA9PT0gMCB8fCB0aGlzLmxlbmd0aCA9PT0gMCkgcmV0dXJuIDBcblxuICAvLyBGYXRhbCBlcnJvciBjb25kaXRpb25zXG4gIGlmICh0YXJnZXRTdGFydCA8IDApIHtcbiAgICB0aHJvdyBuZXcgUmFuZ2VFcnJvcigndGFyZ2V0U3RhcnQgb3V0IG9mIGJvdW5kcycpXG4gIH1cbiAgaWYgKHN0YXJ0IDwgMCB8fCBzdGFydCA+PSB0aGlzLmxlbmd0aCkgdGhyb3cgbmV3IFJhbmdlRXJyb3IoJ3NvdXJjZVN0YXJ0IG91dCBvZiBib3VuZHMnKVxuICBpZiAoZW5kIDwgMCkgdGhyb3cgbmV3IFJhbmdlRXJyb3IoJ3NvdXJjZUVuZCBvdXQgb2YgYm91bmRzJylcblxuICAvLyBBcmUgd2Ugb29iP1xuICBpZiAoZW5kID4gdGhpcy5sZW5ndGgpIGVuZCA9IHRoaXMubGVuZ3RoXG4gIGlmICh0YXJnZXQubGVuZ3RoIC0gdGFyZ2V0U3RhcnQgPCBlbmQgLSBzdGFydCkge1xuICAgIGVuZCA9IHRhcmdldC5sZW5ndGggLSB0YXJnZXRTdGFydCArIHN0YXJ0XG4gIH1cblxuICB2YXIgbGVuID0gZW5kIC0gc3RhcnRcbiAgdmFyIGlcblxuICBpZiAodGhpcyA9PT0gdGFyZ2V0ICYmIHN0YXJ0IDwgdGFyZ2V0U3RhcnQgJiYgdGFyZ2V0U3RhcnQgPCBlbmQpIHtcbiAgICAvLyBkZXNjZW5kaW5nIGNvcHkgZnJvbSBlbmRcbiAgICBmb3IgKGkgPSBsZW4gLSAxOyBpID49IDA7IC0taSkge1xuICAgICAgdGFyZ2V0W2kgKyB0YXJnZXRTdGFydF0gPSB0aGlzW2kgKyBzdGFydF1cbiAgICB9XG4gIH0gZWxzZSBpZiAobGVuIDwgMTAwMCB8fCAhQnVmZmVyLlRZUEVEX0FSUkFZX1NVUFBPUlQpIHtcbiAgICAvLyBhc2NlbmRpbmcgY29weSBmcm9tIHN0YXJ0XG4gICAgZm9yIChpID0gMDsgaSA8IGxlbjsgKytpKSB7XG4gICAgICB0YXJnZXRbaSArIHRhcmdldFN0YXJ0XSA9IHRoaXNbaSArIHN0YXJ0XVxuICAgIH1cbiAgfSBlbHNlIHtcbiAgICBVaW50OEFycmF5LnByb3RvdHlwZS5zZXQuY2FsbChcbiAgICAgIHRhcmdldCxcbiAgICAgIHRoaXMuc3ViYXJyYXkoc3RhcnQsIHN0YXJ0ICsgbGVuKSxcbiAgICAgIHRhcmdldFN0YXJ0XG4gICAgKVxuICB9XG5cbiAgcmV0dXJuIGxlblxufVxuXG4vLyBVc2FnZTpcbi8vICAgIGJ1ZmZlci5maWxsKG51bWJlclssIG9mZnNldFssIGVuZF1dKVxuLy8gICAgYnVmZmVyLmZpbGwoYnVmZmVyWywgb2Zmc2V0WywgZW5kXV0pXG4vLyAgICBidWZmZXIuZmlsbChzdHJpbmdbLCBvZmZzZXRbLCBlbmRdXVssIGVuY29kaW5nXSlcbkJ1ZmZlci5wcm90b3R5cGUuZmlsbCA9IGZ1bmN0aW9uIGZpbGwgKHZhbCwgc3RhcnQsIGVuZCwgZW5jb2RpbmcpIHtcbiAgLy8gSGFuZGxlIHN0cmluZyBjYXNlczpcbiAgaWYgKHR5cGVvZiB2YWwgPT09ICdzdHJpbmcnKSB7XG4gICAgaWYgKHR5cGVvZiBzdGFydCA9PT0gJ3N0cmluZycpIHtcbiAgICAgIGVuY29kaW5nID0gc3RhcnRcbiAgICAgIHN0YXJ0ID0gMFxuICAgICAgZW5kID0gdGhpcy5sZW5ndGhcbiAgICB9IGVsc2UgaWYgKHR5cGVvZiBlbmQgPT09ICdzdHJpbmcnKSB7XG4gICAgICBlbmNvZGluZyA9IGVuZFxuICAgICAgZW5kID0gdGhpcy5sZW5ndGhcbiAgICB9XG4gICAgaWYgKHZhbC5sZW5ndGggPT09IDEpIHtcbiAgICAgIHZhciBjb2RlID0gdmFsLmNoYXJDb2RlQXQoMClcbiAgICAgIGlmIChjb2RlIDwgMjU2KSB7XG4gICAgICAgIHZhbCA9IGNvZGVcbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKGVuY29kaW5nICE9PSB1bmRlZmluZWQgJiYgdHlwZW9mIGVuY29kaW5nICE9PSAnc3RyaW5nJykge1xuICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignZW5jb2RpbmcgbXVzdCBiZSBhIHN0cmluZycpXG4gICAgfVxuICAgIGlmICh0eXBlb2YgZW5jb2RpbmcgPT09ICdzdHJpbmcnICYmICFCdWZmZXIuaXNFbmNvZGluZyhlbmNvZGluZykpIHtcbiAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ1Vua25vd24gZW5jb2Rpbmc6ICcgKyBlbmNvZGluZylcbiAgICB9XG4gIH0gZWxzZSBpZiAodHlwZW9mIHZhbCA9PT0gJ251bWJlcicpIHtcbiAgICB2YWwgPSB2YWwgJiAyNTVcbiAgfVxuXG4gIC8vIEludmFsaWQgcmFuZ2VzIGFyZSBub3Qgc2V0IHRvIGEgZGVmYXVsdCwgc28gY2FuIHJhbmdlIGNoZWNrIGVhcmx5LlxuICBpZiAoc3RhcnQgPCAwIHx8IHRoaXMubGVuZ3RoIDwgc3RhcnQgfHwgdGhpcy5sZW5ndGggPCBlbmQpIHtcbiAgICB0aHJvdyBuZXcgUmFuZ2VFcnJvcignT3V0IG9mIHJhbmdlIGluZGV4JylcbiAgfVxuXG4gIGlmIChlbmQgPD0gc3RhcnQpIHtcbiAgICByZXR1cm4gdGhpc1xuICB9XG5cbiAgc3RhcnQgPSBzdGFydCA+Pj4gMFxuICBlbmQgPSBlbmQgPT09IHVuZGVmaW5lZCA/IHRoaXMubGVuZ3RoIDogZW5kID4+PiAwXG5cbiAgaWYgKCF2YWwpIHZhbCA9IDBcblxuICB2YXIgaVxuICBpZiAodHlwZW9mIHZhbCA9PT0gJ251bWJlcicpIHtcbiAgICBmb3IgKGkgPSBzdGFydDsgaSA8IGVuZDsgKytpKSB7XG4gICAgICB0aGlzW2ldID0gdmFsXG4gICAgfVxuICB9IGVsc2Uge1xuICAgIHZhciBieXRlcyA9IEJ1ZmZlci5pc0J1ZmZlcih2YWwpXG4gICAgICA/IHZhbFxuICAgICAgOiB1dGY4VG9CeXRlcyhuZXcgQnVmZmVyKHZhbCwgZW5jb2RpbmcpLnRvU3RyaW5nKCkpXG4gICAgdmFyIGxlbiA9IGJ5dGVzLmxlbmd0aFxuICAgIGZvciAoaSA9IDA7IGkgPCBlbmQgLSBzdGFydDsgKytpKSB7XG4gICAgICB0aGlzW2kgKyBzdGFydF0gPSBieXRlc1tpICUgbGVuXVxuICAgIH1cbiAgfVxuXG4gIHJldHVybiB0aGlzXG59XG5cbi8vIEhFTFBFUiBGVU5DVElPTlNcbi8vID09PT09PT09PT09PT09PT1cblxudmFyIElOVkFMSURfQkFTRTY0X1JFID0gL1teK1xcLzAtOUEtWmEtei1fXS9nXG5cbmZ1bmN0aW9uIGJhc2U2NGNsZWFuIChzdHIpIHtcbiAgLy8gTm9kZSBzdHJpcHMgb3V0IGludmFsaWQgY2hhcmFjdGVycyBsaWtlIFxcbiBhbmQgXFx0IGZyb20gdGhlIHN0cmluZywgYmFzZTY0LWpzIGRvZXMgbm90XG4gIHN0ciA9IHN0cmluZ3RyaW0oc3RyKS5yZXBsYWNlKElOVkFMSURfQkFTRTY0X1JFLCAnJylcbiAgLy8gTm9kZSBjb252ZXJ0cyBzdHJpbmdzIHdpdGggbGVuZ3RoIDwgMiB0byAnJ1xuICBpZiAoc3RyLmxlbmd0aCA8IDIpIHJldHVybiAnJ1xuICAvLyBOb2RlIGFsbG93cyBmb3Igbm9uLXBhZGRlZCBiYXNlNjQgc3RyaW5ncyAobWlzc2luZyB0cmFpbGluZyA9PT0pLCBiYXNlNjQtanMgZG9lcyBub3RcbiAgd2hpbGUgKHN0ci5sZW5ndGggJSA0ICE9PSAwKSB7XG4gICAgc3RyID0gc3RyICsgJz0nXG4gIH1cbiAgcmV0dXJuIHN0clxufVxuXG5mdW5jdGlvbiBzdHJpbmd0cmltIChzdHIpIHtcbiAgaWYgKHN0ci50cmltKSByZXR1cm4gc3RyLnRyaW0oKVxuICByZXR1cm4gc3RyLnJlcGxhY2UoL15cXHMrfFxccyskL2csICcnKVxufVxuXG5mdW5jdGlvbiB0b0hleCAobikge1xuICBpZiAobiA8IDE2KSByZXR1cm4gJzAnICsgbi50b1N0cmluZygxNilcbiAgcmV0dXJuIG4udG9TdHJpbmcoMTYpXG59XG5cbmZ1bmN0aW9uIHV0ZjhUb0J5dGVzIChzdHJpbmcsIHVuaXRzKSB7XG4gIHVuaXRzID0gdW5pdHMgfHwgSW5maW5pdHlcbiAgdmFyIGNvZGVQb2ludFxuICB2YXIgbGVuZ3RoID0gc3RyaW5nLmxlbmd0aFxuICB2YXIgbGVhZFN1cnJvZ2F0ZSA9IG51bGxcbiAgdmFyIGJ5dGVzID0gW11cblxuICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbmd0aDsgKytpKSB7XG4gICAgY29kZVBvaW50ID0gc3RyaW5nLmNoYXJDb2RlQXQoaSlcblxuICAgIC8vIGlzIHN1cnJvZ2F0ZSBjb21wb25lbnRcbiAgICBpZiAoY29kZVBvaW50ID4gMHhEN0ZGICYmIGNvZGVQb2ludCA8IDB4RTAwMCkge1xuICAgICAgLy8gbGFzdCBjaGFyIHdhcyBhIGxlYWRcbiAgICAgIGlmICghbGVhZFN1cnJvZ2F0ZSkge1xuICAgICAgICAvLyBubyBsZWFkIHlldFxuICAgICAgICBpZiAoY29kZVBvaW50ID4gMHhEQkZGKSB7XG4gICAgICAgICAgLy8gdW5leHBlY3RlZCB0cmFpbFxuICAgICAgICAgIGlmICgodW5pdHMgLT0gMykgPiAtMSkgYnl0ZXMucHVzaCgweEVGLCAweEJGLCAweEJEKVxuICAgICAgICAgIGNvbnRpbnVlXG4gICAgICAgIH0gZWxzZSBpZiAoaSArIDEgPT09IGxlbmd0aCkge1xuICAgICAgICAgIC8vIHVucGFpcmVkIGxlYWRcbiAgICAgICAgICBpZiAoKHVuaXRzIC09IDMpID4gLTEpIGJ5dGVzLnB1c2goMHhFRiwgMHhCRiwgMHhCRClcbiAgICAgICAgICBjb250aW51ZVxuICAgICAgICB9XG5cbiAgICAgICAgLy8gdmFsaWQgbGVhZFxuICAgICAgICBsZWFkU3Vycm9nYXRlID0gY29kZVBvaW50XG5cbiAgICAgICAgY29udGludWVcbiAgICAgIH1cblxuICAgICAgLy8gMiBsZWFkcyBpbiBhIHJvd1xuICAgICAgaWYgKGNvZGVQb2ludCA8IDB4REMwMCkge1xuICAgICAgICBpZiAoKHVuaXRzIC09IDMpID4gLTEpIGJ5dGVzLnB1c2goMHhFRiwgMHhCRiwgMHhCRClcbiAgICAgICAgbGVhZFN1cnJvZ2F0ZSA9IGNvZGVQb2ludFxuICAgICAgICBjb250aW51ZVxuICAgICAgfVxuXG4gICAgICAvLyB2YWxpZCBzdXJyb2dhdGUgcGFpclxuICAgICAgY29kZVBvaW50ID0gKGxlYWRTdXJyb2dhdGUgLSAweEQ4MDAgPDwgMTAgfCBjb2RlUG9pbnQgLSAweERDMDApICsgMHgxMDAwMFxuICAgIH0gZWxzZSBpZiAobGVhZFN1cnJvZ2F0ZSkge1xuICAgICAgLy8gdmFsaWQgYm1wIGNoYXIsIGJ1dCBsYXN0IGNoYXIgd2FzIGEgbGVhZFxuICAgICAgaWYgKCh1bml0cyAtPSAzKSA+IC0xKSBieXRlcy5wdXNoKDB4RUYsIDB4QkYsIDB4QkQpXG4gICAgfVxuXG4gICAgbGVhZFN1cnJvZ2F0ZSA9IG51bGxcblxuICAgIC8vIGVuY29kZSB1dGY4XG4gICAgaWYgKGNvZGVQb2ludCA8IDB4ODApIHtcbiAgICAgIGlmICgodW5pdHMgLT0gMSkgPCAwKSBicmVha1xuICAgICAgYnl0ZXMucHVzaChjb2RlUG9pbnQpXG4gICAgfSBlbHNlIGlmIChjb2RlUG9pbnQgPCAweDgwMCkge1xuICAgICAgaWYgKCh1bml0cyAtPSAyKSA8IDApIGJyZWFrXG4gICAgICBieXRlcy5wdXNoKFxuICAgICAgICBjb2RlUG9pbnQgPj4gMHg2IHwgMHhDMCxcbiAgICAgICAgY29kZVBvaW50ICYgMHgzRiB8IDB4ODBcbiAgICAgIClcbiAgICB9IGVsc2UgaWYgKGNvZGVQb2ludCA8IDB4MTAwMDApIHtcbiAgICAgIGlmICgodW5pdHMgLT0gMykgPCAwKSBicmVha1xuICAgICAgYnl0ZXMucHVzaChcbiAgICAgICAgY29kZVBvaW50ID4+IDB4QyB8IDB4RTAsXG4gICAgICAgIGNvZGVQb2ludCA+PiAweDYgJiAweDNGIHwgMHg4MCxcbiAgICAgICAgY29kZVBvaW50ICYgMHgzRiB8IDB4ODBcbiAgICAgIClcbiAgICB9IGVsc2UgaWYgKGNvZGVQb2ludCA8IDB4MTEwMDAwKSB7XG4gICAgICBpZiAoKHVuaXRzIC09IDQpIDwgMCkgYnJlYWtcbiAgICAgIGJ5dGVzLnB1c2goXG4gICAgICAgIGNvZGVQb2ludCA+PiAweDEyIHwgMHhGMCxcbiAgICAgICAgY29kZVBvaW50ID4+IDB4QyAmIDB4M0YgfCAweDgwLFxuICAgICAgICBjb2RlUG9pbnQgPj4gMHg2ICYgMHgzRiB8IDB4ODAsXG4gICAgICAgIGNvZGVQb2ludCAmIDB4M0YgfCAweDgwXG4gICAgICApXG4gICAgfSBlbHNlIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignSW52YWxpZCBjb2RlIHBvaW50JylcbiAgICB9XG4gIH1cblxuICByZXR1cm4gYnl0ZXNcbn1cblxuZnVuY3Rpb24gYXNjaWlUb0J5dGVzIChzdHIpIHtcbiAgdmFyIGJ5dGVBcnJheSA9IFtdXG4gIGZvciAodmFyIGkgPSAwOyBpIDwgc3RyLmxlbmd0aDsgKytpKSB7XG4gICAgLy8gTm9kZSdzIGNvZGUgc2VlbXMgdG8gYmUgZG9pbmcgdGhpcyBhbmQgbm90ICYgMHg3Ri4uXG4gICAgYnl0ZUFycmF5LnB1c2goc3RyLmNoYXJDb2RlQXQoaSkgJiAweEZGKVxuICB9XG4gIHJldHVybiBieXRlQXJyYXlcbn1cblxuZnVuY3Rpb24gdXRmMTZsZVRvQnl0ZXMgKHN0ciwgdW5pdHMpIHtcbiAgdmFyIGMsIGhpLCBsb1xuICB2YXIgYnl0ZUFycmF5ID0gW11cbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBzdHIubGVuZ3RoOyArK2kpIHtcbiAgICBpZiAoKHVuaXRzIC09IDIpIDwgMCkgYnJlYWtcblxuICAgIGMgPSBzdHIuY2hhckNvZGVBdChpKVxuICAgIGhpID0gYyA+PiA4XG4gICAgbG8gPSBjICUgMjU2XG4gICAgYnl0ZUFycmF5LnB1c2gobG8pXG4gICAgYnl0ZUFycmF5LnB1c2goaGkpXG4gIH1cblxuICByZXR1cm4gYnl0ZUFycmF5XG59XG5cbmZ1bmN0aW9uIGJhc2U2NFRvQnl0ZXMgKHN0cikge1xuICByZXR1cm4gYmFzZTY0LnRvQnl0ZUFycmF5KGJhc2U2NGNsZWFuKHN0cikpXG59XG5cbmZ1bmN0aW9uIGJsaXRCdWZmZXIgKHNyYywgZHN0LCBvZmZzZXQsIGxlbmd0aCkge1xuICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbmd0aDsgKytpKSB7XG4gICAgaWYgKChpICsgb2Zmc2V0ID49IGRzdC5sZW5ndGgpIHx8IChpID49IHNyYy5sZW5ndGgpKSBicmVha1xuICAgIGRzdFtpICsgb2Zmc2V0XSA9IHNyY1tpXVxuICB9XG4gIHJldHVybiBpXG59XG5cbmZ1bmN0aW9uIGlzbmFuICh2YWwpIHtcbiAgcmV0dXJuIHZhbCAhPT0gdmFsIC8vIGVzbGludC1kaXNhYmxlLWxpbmUgbm8tc2VsZi1jb21wYXJlXG59XG4iLCIvLyBDb3B5cmlnaHQgSm95ZW50LCBJbmMuIGFuZCBvdGhlciBOb2RlIGNvbnRyaWJ1dG9ycy5cbi8vXG4vLyBQZXJtaXNzaW9uIGlzIGhlcmVieSBncmFudGVkLCBmcmVlIG9mIGNoYXJnZSwgdG8gYW55IHBlcnNvbiBvYnRhaW5pbmcgYVxuLy8gY29weSBvZiB0aGlzIHNvZnR3YXJlIGFuZCBhc3NvY2lhdGVkIGRvY3VtZW50YXRpb24gZmlsZXMgKHRoZVxuLy8gXCJTb2Z0d2FyZVwiKSwgdG8gZGVhbCBpbiB0aGUgU29mdHdhcmUgd2l0aG91dCByZXN0cmljdGlvbiwgaW5jbHVkaW5nXG4vLyB3aXRob3V0IGxpbWl0YXRpb24gdGhlIHJpZ2h0cyB0byB1c2UsIGNvcHksIG1vZGlmeSwgbWVyZ2UsIHB1Ymxpc2gsXG4vLyBkaXN0cmlidXRlLCBzdWJsaWNlbnNlLCBhbmQvb3Igc2VsbCBjb3BpZXMgb2YgdGhlIFNvZnR3YXJlLCBhbmQgdG8gcGVybWl0XG4vLyBwZXJzb25zIHRvIHdob20gdGhlIFNvZnR3YXJlIGlzIGZ1cm5pc2hlZCB0byBkbyBzbywgc3ViamVjdCB0byB0aGVcbi8vIGZvbGxvd2luZyBjb25kaXRpb25zOlxuLy9cbi8vIFRoZSBhYm92ZSBjb3B5cmlnaHQgbm90aWNlIGFuZCB0aGlzIHBlcm1pc3Npb24gbm90aWNlIHNoYWxsIGJlIGluY2x1ZGVkXG4vLyBpbiBhbGwgY29waWVzIG9yIHN1YnN0YW50aWFsIHBvcnRpb25zIG9mIHRoZSBTb2Z0d2FyZS5cbi8vXG4vLyBUSEUgU09GVFdBUkUgSVMgUFJPVklERUQgXCJBUyBJU1wiLCBXSVRIT1VUIFdBUlJBTlRZIE9GIEFOWSBLSU5ELCBFWFBSRVNTXG4vLyBPUiBJTVBMSUVELCBJTkNMVURJTkcgQlVUIE5PVCBMSU1JVEVEIFRPIFRIRSBXQVJSQU5USUVTIE9GXG4vLyBNRVJDSEFOVEFCSUxJVFksIEZJVE5FU1MgRk9SIEEgUEFSVElDVUxBUiBQVVJQT1NFIEFORCBOT05JTkZSSU5HRU1FTlQuIElOXG4vLyBOTyBFVkVOVCBTSEFMTCBUSEUgQVVUSE9SUyBPUiBDT1BZUklHSFQgSE9MREVSUyBCRSBMSUFCTEUgRk9SIEFOWSBDTEFJTSxcbi8vIERBTUFHRVMgT1IgT1RIRVIgTElBQklMSVRZLCBXSEVUSEVSIElOIEFOIEFDVElPTiBPRiBDT05UUkFDVCwgVE9SVCBPUlxuLy8gT1RIRVJXSVNFLCBBUklTSU5HIEZST00sIE9VVCBPRiBPUiBJTiBDT05ORUNUSU9OIFdJVEggVEhFIFNPRlRXQVJFIE9SIFRIRVxuLy8gVVNFIE9SIE9USEVSIERFQUxJTkdTIElOIFRIRSBTT0ZUV0FSRS5cblxuLy8gTk9URTogVGhlc2UgdHlwZSBjaGVja2luZyBmdW5jdGlvbnMgaW50ZW50aW9uYWxseSBkb24ndCB1c2UgYGluc3RhbmNlb2ZgXG4vLyBiZWNhdXNlIGl0IGlzIGZyYWdpbGUgYW5kIGNhbiBiZSBlYXNpbHkgZmFrZWQgd2l0aCBgT2JqZWN0LmNyZWF0ZSgpYC5cblxuZnVuY3Rpb24gaXNBcnJheShhcmcpIHtcbiAgaWYgKEFycmF5LmlzQXJyYXkpIHtcbiAgICByZXR1cm4gQXJyYXkuaXNBcnJheShhcmcpO1xuICB9XG4gIHJldHVybiBvYmplY3RUb1N0cmluZyhhcmcpID09PSAnW29iamVjdCBBcnJheV0nO1xufVxuZXhwb3J0cy5pc0FycmF5ID0gaXNBcnJheTtcblxuZnVuY3Rpb24gaXNCb29sZWFuKGFyZykge1xuICByZXR1cm4gdHlwZW9mIGFyZyA9PT0gJ2Jvb2xlYW4nO1xufVxuZXhwb3J0cy5pc0Jvb2xlYW4gPSBpc0Jvb2xlYW47XG5cbmZ1bmN0aW9uIGlzTnVsbChhcmcpIHtcbiAgcmV0dXJuIGFyZyA9PT0gbnVsbDtcbn1cbmV4cG9ydHMuaXNOdWxsID0gaXNOdWxsO1xuXG5mdW5jdGlvbiBpc051bGxPclVuZGVmaW5lZChhcmcpIHtcbiAgcmV0dXJuIGFyZyA9PSBudWxsO1xufVxuZXhwb3J0cy5pc051bGxPclVuZGVmaW5lZCA9IGlzTnVsbE9yVW5kZWZpbmVkO1xuXG5mdW5jdGlvbiBpc051bWJlcihhcmcpIHtcbiAgcmV0dXJuIHR5cGVvZiBhcmcgPT09ICdudW1iZXInO1xufVxuZXhwb3J0cy5pc051bWJlciA9IGlzTnVtYmVyO1xuXG5mdW5jdGlvbiBpc1N0cmluZyhhcmcpIHtcbiAgcmV0dXJuIHR5cGVvZiBhcmcgPT09ICdzdHJpbmcnO1xufVxuZXhwb3J0cy5pc1N0cmluZyA9IGlzU3RyaW5nO1xuXG5mdW5jdGlvbiBpc1N5bWJvbChhcmcpIHtcbiAgcmV0dXJuIHR5cGVvZiBhcmcgPT09ICdzeW1ib2wnO1xufVxuZXhwb3J0cy5pc1N5bWJvbCA9IGlzU3ltYm9sO1xuXG5mdW5jdGlvbiBpc1VuZGVmaW5lZChhcmcpIHtcbiAgcmV0dXJuIGFyZyA9PT0gdm9pZCAwO1xufVxuZXhwb3J0cy5pc1VuZGVmaW5lZCA9IGlzVW5kZWZpbmVkO1xuXG5mdW5jdGlvbiBpc1JlZ0V4cChyZSkge1xuICByZXR1cm4gb2JqZWN0VG9TdHJpbmcocmUpID09PSAnW29iamVjdCBSZWdFeHBdJztcbn1cbmV4cG9ydHMuaXNSZWdFeHAgPSBpc1JlZ0V4cDtcblxuZnVuY3Rpb24gaXNPYmplY3QoYXJnKSB7XG4gIHJldHVybiB0eXBlb2YgYXJnID09PSAnb2JqZWN0JyAmJiBhcmcgIT09IG51bGw7XG59XG5leHBvcnRzLmlzT2JqZWN0ID0gaXNPYmplY3Q7XG5cbmZ1bmN0aW9uIGlzRGF0ZShkKSB7XG4gIHJldHVybiBvYmplY3RUb1N0cmluZyhkKSA9PT0gJ1tvYmplY3QgRGF0ZV0nO1xufVxuZXhwb3J0cy5pc0RhdGUgPSBpc0RhdGU7XG5cbmZ1bmN0aW9uIGlzRXJyb3IoZSkge1xuICByZXR1cm4gKG9iamVjdFRvU3RyaW5nKGUpID09PSAnW29iamVjdCBFcnJvcl0nIHx8IGUgaW5zdGFuY2VvZiBFcnJvcik7XG59XG5leHBvcnRzLmlzRXJyb3IgPSBpc0Vycm9yO1xuXG5mdW5jdGlvbiBpc0Z1bmN0aW9uKGFyZykge1xuICByZXR1cm4gdHlwZW9mIGFyZyA9PT0gJ2Z1bmN0aW9uJztcbn1cbmV4cG9ydHMuaXNGdW5jdGlvbiA9IGlzRnVuY3Rpb247XG5cbmZ1bmN0aW9uIGlzUHJpbWl0aXZlKGFyZykge1xuICByZXR1cm4gYXJnID09PSBudWxsIHx8XG4gICAgICAgICB0eXBlb2YgYXJnID09PSAnYm9vbGVhbicgfHxcbiAgICAgICAgIHR5cGVvZiBhcmcgPT09ICdudW1iZXInIHx8XG4gICAgICAgICB0eXBlb2YgYXJnID09PSAnc3RyaW5nJyB8fFxuICAgICAgICAgdHlwZW9mIGFyZyA9PT0gJ3N5bWJvbCcgfHwgIC8vIEVTNiBzeW1ib2xcbiAgICAgICAgIHR5cGVvZiBhcmcgPT09ICd1bmRlZmluZWQnO1xufVxuZXhwb3J0cy5pc1ByaW1pdGl2ZSA9IGlzUHJpbWl0aXZlO1xuXG5leHBvcnRzLmlzQnVmZmVyID0gQnVmZmVyLmlzQnVmZmVyO1xuXG5mdW5jdGlvbiBvYmplY3RUb1N0cmluZyhvKSB7XG4gIHJldHVybiBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwobyk7XG59XG4iLCIvLyBDb3B5cmlnaHQgSm95ZW50LCBJbmMuIGFuZCBvdGhlciBOb2RlIGNvbnRyaWJ1dG9ycy5cbi8vXG4vLyBQZXJtaXNzaW9uIGlzIGhlcmVieSBncmFudGVkLCBmcmVlIG9mIGNoYXJnZSwgdG8gYW55IHBlcnNvbiBvYnRhaW5pbmcgYVxuLy8gY29weSBvZiB0aGlzIHNvZnR3YXJlIGFuZCBhc3NvY2lhdGVkIGRvY3VtZW50YXRpb24gZmlsZXMgKHRoZVxuLy8gXCJTb2Z0d2FyZVwiKSwgdG8gZGVhbCBpbiB0aGUgU29mdHdhcmUgd2l0aG91dCByZXN0cmljdGlvbiwgaW5jbHVkaW5nXG4vLyB3aXRob3V0IGxpbWl0YXRpb24gdGhlIHJpZ2h0cyB0byB1c2UsIGNvcHksIG1vZGlmeSwgbWVyZ2UsIHB1Ymxpc2gsXG4vLyBkaXN0cmlidXRlLCBzdWJsaWNlbnNlLCBhbmQvb3Igc2VsbCBjb3BpZXMgb2YgdGhlIFNvZnR3YXJlLCBhbmQgdG8gcGVybWl0XG4vLyBwZXJzb25zIHRvIHdob20gdGhlIFNvZnR3YXJlIGlzIGZ1cm5pc2hlZCB0byBkbyBzbywgc3ViamVjdCB0byB0aGVcbi8vIGZvbGxvd2luZyBjb25kaXRpb25zOlxuLy9cbi8vIFRoZSBhYm92ZSBjb3B5cmlnaHQgbm90aWNlIGFuZCB0aGlzIHBlcm1pc3Npb24gbm90aWNlIHNoYWxsIGJlIGluY2x1ZGVkXG4vLyBpbiBhbGwgY29waWVzIG9yIHN1YnN0YW50aWFsIHBvcnRpb25zIG9mIHRoZSBTb2Z0d2FyZS5cbi8vXG4vLyBUSEUgU09GVFdBUkUgSVMgUFJPVklERUQgXCJBUyBJU1wiLCBXSVRIT1VUIFdBUlJBTlRZIE9GIEFOWSBLSU5ELCBFWFBSRVNTXG4vLyBPUiBJTVBMSUVELCBJTkNMVURJTkcgQlVUIE5PVCBMSU1JVEVEIFRPIFRIRSBXQVJSQU5USUVTIE9GXG4vLyBNRVJDSEFOVEFCSUxJVFksIEZJVE5FU1MgRk9SIEEgUEFSVElDVUxBUiBQVVJQT1NFIEFORCBOT05JTkZSSU5HRU1FTlQuIElOXG4vLyBOTyBFVkVOVCBTSEFMTCBUSEUgQVVUSE9SUyBPUiBDT1BZUklHSFQgSE9MREVSUyBCRSBMSUFCTEUgRk9SIEFOWSBDTEFJTSxcbi8vIERBTUFHRVMgT1IgT1RIRVIgTElBQklMSVRZLCBXSEVUSEVSIElOIEFOIEFDVElPTiBPRiBDT05UUkFDVCwgVE9SVCBPUlxuLy8gT1RIRVJXSVNFLCBBUklTSU5HIEZST00sIE9VVCBPRiBPUiBJTiBDT05ORUNUSU9OIFdJVEggVEhFIFNPRlRXQVJFIE9SIFRIRVxuLy8gVVNFIE9SIE9USEVSIERFQUxJTkdTIElOIFRIRSBTT0ZUV0FSRS5cblxuJ3VzZSBzdHJpY3QnO1xuXG52YXIgUiA9IHR5cGVvZiBSZWZsZWN0ID09PSAnb2JqZWN0JyA/IFJlZmxlY3QgOiBudWxsXG52YXIgUmVmbGVjdEFwcGx5ID0gUiAmJiB0eXBlb2YgUi5hcHBseSA9PT0gJ2Z1bmN0aW9uJ1xuICA/IFIuYXBwbHlcbiAgOiBmdW5jdGlvbiBSZWZsZWN0QXBwbHkodGFyZ2V0LCByZWNlaXZlciwgYXJncykge1xuICAgIHJldHVybiBGdW5jdGlvbi5wcm90b3R5cGUuYXBwbHkuY2FsbCh0YXJnZXQsIHJlY2VpdmVyLCBhcmdzKTtcbiAgfVxuXG52YXIgUmVmbGVjdE93bktleXNcbmlmIChSICYmIHR5cGVvZiBSLm93bktleXMgPT09ICdmdW5jdGlvbicpIHtcbiAgUmVmbGVjdE93bktleXMgPSBSLm93bktleXNcbn0gZWxzZSBpZiAoT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scykge1xuICBSZWZsZWN0T3duS2V5cyA9IGZ1bmN0aW9uIFJlZmxlY3RPd25LZXlzKHRhcmdldCkge1xuICAgIHJldHVybiBPYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lcyh0YXJnZXQpXG4gICAgICAuY29uY2F0KE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHModGFyZ2V0KSk7XG4gIH07XG59IGVsc2Uge1xuICBSZWZsZWN0T3duS2V5cyA9IGZ1bmN0aW9uIFJlZmxlY3RPd25LZXlzKHRhcmdldCkge1xuICAgIHJldHVybiBPYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lcyh0YXJnZXQpO1xuICB9O1xufVxuXG5mdW5jdGlvbiBQcm9jZXNzRW1pdFdhcm5pbmcod2FybmluZykge1xuICBpZiAoY29uc29sZSAmJiBjb25zb2xlLndhcm4pIGNvbnNvbGUud2Fybih3YXJuaW5nKTtcbn1cblxudmFyIE51bWJlcklzTmFOID0gTnVtYmVyLmlzTmFOIHx8IGZ1bmN0aW9uIE51bWJlcklzTmFOKHZhbHVlKSB7XG4gIHJldHVybiB2YWx1ZSAhPT0gdmFsdWU7XG59XG5cbmZ1bmN0aW9uIEV2ZW50RW1pdHRlcigpIHtcbiAgRXZlbnRFbWl0dGVyLmluaXQuY2FsbCh0aGlzKTtcbn1cbm1vZHVsZS5leHBvcnRzID0gRXZlbnRFbWl0dGVyO1xuXG4vLyBCYWNrd2FyZHMtY29tcGF0IHdpdGggbm9kZSAwLjEwLnhcbkV2ZW50RW1pdHRlci5FdmVudEVtaXR0ZXIgPSBFdmVudEVtaXR0ZXI7XG5cbkV2ZW50RW1pdHRlci5wcm90b3R5cGUuX2V2ZW50cyA9IHVuZGVmaW5lZDtcbkV2ZW50RW1pdHRlci5wcm90b3R5cGUuX2V2ZW50c0NvdW50ID0gMDtcbkV2ZW50RW1pdHRlci5wcm90b3R5cGUuX21heExpc3RlbmVycyA9IHVuZGVmaW5lZDtcblxuLy8gQnkgZGVmYXVsdCBFdmVudEVtaXR0ZXJzIHdpbGwgcHJpbnQgYSB3YXJuaW5nIGlmIG1vcmUgdGhhbiAxMCBsaXN0ZW5lcnMgYXJlXG4vLyBhZGRlZCB0byBpdC4gVGhpcyBpcyBhIHVzZWZ1bCBkZWZhdWx0IHdoaWNoIGhlbHBzIGZpbmRpbmcgbWVtb3J5IGxlYWtzLlxudmFyIGRlZmF1bHRNYXhMaXN0ZW5lcnMgPSAxMDtcblxuT2JqZWN0LmRlZmluZVByb3BlcnR5KEV2ZW50RW1pdHRlciwgJ2RlZmF1bHRNYXhMaXN0ZW5lcnMnLCB7XG4gIGVudW1lcmFibGU6IHRydWUsXG4gIGdldDogZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIGRlZmF1bHRNYXhMaXN0ZW5lcnM7XG4gIH0sXG4gIHNldDogZnVuY3Rpb24oYXJnKSB7XG4gICAgaWYgKHR5cGVvZiBhcmcgIT09ICdudW1iZXInIHx8IGFyZyA8IDAgfHwgTnVtYmVySXNOYU4oYXJnKSkge1xuICAgICAgdGhyb3cgbmV3IFJhbmdlRXJyb3IoJ1RoZSB2YWx1ZSBvZiBcImRlZmF1bHRNYXhMaXN0ZW5lcnNcIiBpcyBvdXQgb2YgcmFuZ2UuIEl0IG11c3QgYmUgYSBub24tbmVnYXRpdmUgbnVtYmVyLiBSZWNlaXZlZCAnICsgYXJnICsgJy4nKTtcbiAgICB9XG4gICAgZGVmYXVsdE1heExpc3RlbmVycyA9IGFyZztcbiAgfVxufSk7XG5cbkV2ZW50RW1pdHRlci5pbml0ID0gZnVuY3Rpb24oKSB7XG5cbiAgaWYgKHRoaXMuX2V2ZW50cyA9PT0gdW5kZWZpbmVkIHx8XG4gICAgICB0aGlzLl9ldmVudHMgPT09IE9iamVjdC5nZXRQcm90b3R5cGVPZih0aGlzKS5fZXZlbnRzKSB7XG4gICAgdGhpcy5fZXZlbnRzID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcbiAgICB0aGlzLl9ldmVudHNDb3VudCA9IDA7XG4gIH1cblxuICB0aGlzLl9tYXhMaXN0ZW5lcnMgPSB0aGlzLl9tYXhMaXN0ZW5lcnMgfHwgdW5kZWZpbmVkO1xufTtcblxuLy8gT2J2aW91c2x5IG5vdCBhbGwgRW1pdHRlcnMgc2hvdWxkIGJlIGxpbWl0ZWQgdG8gMTAuIFRoaXMgZnVuY3Rpb24gYWxsb3dzXG4vLyB0aGF0IHRvIGJlIGluY3JlYXNlZC4gU2V0IHRvIHplcm8gZm9yIHVubGltaXRlZC5cbkV2ZW50RW1pdHRlci5wcm90b3R5cGUuc2V0TWF4TGlzdGVuZXJzID0gZnVuY3Rpb24gc2V0TWF4TGlzdGVuZXJzKG4pIHtcbiAgaWYgKHR5cGVvZiBuICE9PSAnbnVtYmVyJyB8fCBuIDwgMCB8fCBOdW1iZXJJc05hTihuKSkge1xuICAgIHRocm93IG5ldyBSYW5nZUVycm9yKCdUaGUgdmFsdWUgb2YgXCJuXCIgaXMgb3V0IG9mIHJhbmdlLiBJdCBtdXN0IGJlIGEgbm9uLW5lZ2F0aXZlIG51bWJlci4gUmVjZWl2ZWQgJyArIG4gKyAnLicpO1xuICB9XG4gIHRoaXMuX21heExpc3RlbmVycyA9IG47XG4gIHJldHVybiB0aGlzO1xufTtcblxuZnVuY3Rpb24gJGdldE1heExpc3RlbmVycyh0aGF0KSB7XG4gIGlmICh0aGF0Ll9tYXhMaXN0ZW5lcnMgPT09IHVuZGVmaW5lZClcbiAgICByZXR1cm4gRXZlbnRFbWl0dGVyLmRlZmF1bHRNYXhMaXN0ZW5lcnM7XG4gIHJldHVybiB0aGF0Ll9tYXhMaXN0ZW5lcnM7XG59XG5cbkV2ZW50RW1pdHRlci5wcm90b3R5cGUuZ2V0TWF4TGlzdGVuZXJzID0gZnVuY3Rpb24gZ2V0TWF4TGlzdGVuZXJzKCkge1xuICByZXR1cm4gJGdldE1heExpc3RlbmVycyh0aGlzKTtcbn07XG5cbkV2ZW50RW1pdHRlci5wcm90b3R5cGUuZW1pdCA9IGZ1bmN0aW9uIGVtaXQodHlwZSkge1xuICB2YXIgYXJncyA9IFtdO1xuICBmb3IgKHZhciBpID0gMTsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKykgYXJncy5wdXNoKGFyZ3VtZW50c1tpXSk7XG4gIHZhciBkb0Vycm9yID0gKHR5cGUgPT09ICdlcnJvcicpO1xuXG4gIHZhciBldmVudHMgPSB0aGlzLl9ldmVudHM7XG4gIGlmIChldmVudHMgIT09IHVuZGVmaW5lZClcbiAgICBkb0Vycm9yID0gKGRvRXJyb3IgJiYgZXZlbnRzLmVycm9yID09PSB1bmRlZmluZWQpO1xuICBlbHNlIGlmICghZG9FcnJvcilcbiAgICByZXR1cm4gZmFsc2U7XG5cbiAgLy8gSWYgdGhlcmUgaXMgbm8gJ2Vycm9yJyBldmVudCBsaXN0ZW5lciB0aGVuIHRocm93LlxuICBpZiAoZG9FcnJvcikge1xuICAgIHZhciBlcjtcbiAgICBpZiAoYXJncy5sZW5ndGggPiAwKVxuICAgICAgZXIgPSBhcmdzWzBdO1xuICAgIGlmIChlciBpbnN0YW5jZW9mIEVycm9yKSB7XG4gICAgICAvLyBOb3RlOiBUaGUgY29tbWVudHMgb24gdGhlIGB0aHJvd2AgbGluZXMgYXJlIGludGVudGlvbmFsLCB0aGV5IHNob3dcbiAgICAgIC8vIHVwIGluIE5vZGUncyBvdXRwdXQgaWYgdGhpcyByZXN1bHRzIGluIGFuIHVuaGFuZGxlZCBleGNlcHRpb24uXG4gICAgICB0aHJvdyBlcjsgLy8gVW5oYW5kbGVkICdlcnJvcicgZXZlbnRcbiAgICB9XG4gICAgLy8gQXQgbGVhc3QgZ2l2ZSBzb21lIGtpbmQgb2YgY29udGV4dCB0byB0aGUgdXNlclxuICAgIHZhciBlcnIgPSBuZXcgRXJyb3IoJ1VuaGFuZGxlZCBlcnJvci4nICsgKGVyID8gJyAoJyArIGVyLm1lc3NhZ2UgKyAnKScgOiAnJykpO1xuICAgIGVyci5jb250ZXh0ID0gZXI7XG4gICAgdGhyb3cgZXJyOyAvLyBVbmhhbmRsZWQgJ2Vycm9yJyBldmVudFxuICB9XG5cbiAgdmFyIGhhbmRsZXIgPSBldmVudHNbdHlwZV07XG5cbiAgaWYgKGhhbmRsZXIgPT09IHVuZGVmaW5lZClcbiAgICByZXR1cm4gZmFsc2U7XG5cbiAgaWYgKHR5cGVvZiBoYW5kbGVyID09PSAnZnVuY3Rpb24nKSB7XG4gICAgUmVmbGVjdEFwcGx5KGhhbmRsZXIsIHRoaXMsIGFyZ3MpO1xuICB9IGVsc2Uge1xuICAgIHZhciBsZW4gPSBoYW5kbGVyLmxlbmd0aDtcbiAgICB2YXIgbGlzdGVuZXJzID0gYXJyYXlDbG9uZShoYW5kbGVyLCBsZW4pO1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuOyArK2kpXG4gICAgICBSZWZsZWN0QXBwbHkobGlzdGVuZXJzW2ldLCB0aGlzLCBhcmdzKTtcbiAgfVxuXG4gIHJldHVybiB0cnVlO1xufTtcblxuZnVuY3Rpb24gX2FkZExpc3RlbmVyKHRhcmdldCwgdHlwZSwgbGlzdGVuZXIsIHByZXBlbmQpIHtcbiAgdmFyIG07XG4gIHZhciBldmVudHM7XG4gIHZhciBleGlzdGluZztcblxuICBpZiAodHlwZW9mIGxpc3RlbmVyICE9PSAnZnVuY3Rpb24nKSB7XG4gICAgdGhyb3cgbmV3IFR5cGVFcnJvcignVGhlIFwibGlzdGVuZXJcIiBhcmd1bWVudCBtdXN0IGJlIG9mIHR5cGUgRnVuY3Rpb24uIFJlY2VpdmVkIHR5cGUgJyArIHR5cGVvZiBsaXN0ZW5lcik7XG4gIH1cblxuICBldmVudHMgPSB0YXJnZXQuX2V2ZW50cztcbiAgaWYgKGV2ZW50cyA9PT0gdW5kZWZpbmVkKSB7XG4gICAgZXZlbnRzID0gdGFyZ2V0Ll9ldmVudHMgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuICAgIHRhcmdldC5fZXZlbnRzQ291bnQgPSAwO1xuICB9IGVsc2Uge1xuICAgIC8vIFRvIGF2b2lkIHJlY3Vyc2lvbiBpbiB0aGUgY2FzZSB0aGF0IHR5cGUgPT09IFwibmV3TGlzdGVuZXJcIiEgQmVmb3JlXG4gICAgLy8gYWRkaW5nIGl0IHRvIHRoZSBsaXN0ZW5lcnMsIGZpcnN0IGVtaXQgXCJuZXdMaXN0ZW5lclwiLlxuICAgIGlmIChldmVudHMubmV3TGlzdGVuZXIgIT09IHVuZGVmaW5lZCkge1xuICAgICAgdGFyZ2V0LmVtaXQoJ25ld0xpc3RlbmVyJywgdHlwZSxcbiAgICAgICAgICAgICAgICAgIGxpc3RlbmVyLmxpc3RlbmVyID8gbGlzdGVuZXIubGlzdGVuZXIgOiBsaXN0ZW5lcik7XG5cbiAgICAgIC8vIFJlLWFzc2lnbiBgZXZlbnRzYCBiZWNhdXNlIGEgbmV3TGlzdGVuZXIgaGFuZGxlciBjb3VsZCBoYXZlIGNhdXNlZCB0aGVcbiAgICAgIC8vIHRoaXMuX2V2ZW50cyB0byBiZSBhc3NpZ25lZCB0byBhIG5ldyBvYmplY3RcbiAgICAgIGV2ZW50cyA9IHRhcmdldC5fZXZlbnRzO1xuICAgIH1cbiAgICBleGlzdGluZyA9IGV2ZW50c1t0eXBlXTtcbiAgfVxuXG4gIGlmIChleGlzdGluZyA9PT0gdW5kZWZpbmVkKSB7XG4gICAgLy8gT3B0aW1pemUgdGhlIGNhc2Ugb2Ygb25lIGxpc3RlbmVyLiBEb24ndCBuZWVkIHRoZSBleHRyYSBhcnJheSBvYmplY3QuXG4gICAgZXhpc3RpbmcgPSBldmVudHNbdHlwZV0gPSBsaXN0ZW5lcjtcbiAgICArK3RhcmdldC5fZXZlbnRzQ291bnQ7XG4gIH0gZWxzZSB7XG4gICAgaWYgKHR5cGVvZiBleGlzdGluZyA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgLy8gQWRkaW5nIHRoZSBzZWNvbmQgZWxlbWVudCwgbmVlZCB0byBjaGFuZ2UgdG8gYXJyYXkuXG4gICAgICBleGlzdGluZyA9IGV2ZW50c1t0eXBlXSA9XG4gICAgICAgIHByZXBlbmQgPyBbbGlzdGVuZXIsIGV4aXN0aW5nXSA6IFtleGlzdGluZywgbGlzdGVuZXJdO1xuICAgICAgLy8gSWYgd2UndmUgYWxyZWFkeSBnb3QgYW4gYXJyYXksIGp1c3QgYXBwZW5kLlxuICAgIH0gZWxzZSBpZiAocHJlcGVuZCkge1xuICAgICAgZXhpc3RpbmcudW5zaGlmdChsaXN0ZW5lcik7XG4gICAgfSBlbHNlIHtcbiAgICAgIGV4aXN0aW5nLnB1c2gobGlzdGVuZXIpO1xuICAgIH1cblxuICAgIC8vIENoZWNrIGZvciBsaXN0ZW5lciBsZWFrXG4gICAgbSA9ICRnZXRNYXhMaXN0ZW5lcnModGFyZ2V0KTtcbiAgICBpZiAobSA+IDAgJiYgZXhpc3RpbmcubGVuZ3RoID4gbSAmJiAhZXhpc3Rpbmcud2FybmVkKSB7XG4gICAgICBleGlzdGluZy53YXJuZWQgPSB0cnVlO1xuICAgICAgLy8gTm8gZXJyb3IgY29kZSBmb3IgdGhpcyBzaW5jZSBpdCBpcyBhIFdhcm5pbmdcbiAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1yZXN0cmljdGVkLXN5bnRheFxuICAgICAgdmFyIHcgPSBuZXcgRXJyb3IoJ1Bvc3NpYmxlIEV2ZW50RW1pdHRlciBtZW1vcnkgbGVhayBkZXRlY3RlZC4gJyArXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGV4aXN0aW5nLmxlbmd0aCArICcgJyArIFN0cmluZyh0eXBlKSArICcgbGlzdGVuZXJzICcgK1xuICAgICAgICAgICAgICAgICAgICAgICAgICAnYWRkZWQuIFVzZSBlbWl0dGVyLnNldE1heExpc3RlbmVycygpIHRvICcgK1xuICAgICAgICAgICAgICAgICAgICAgICAgICAnaW5jcmVhc2UgbGltaXQnKTtcbiAgICAgIHcubmFtZSA9ICdNYXhMaXN0ZW5lcnNFeGNlZWRlZFdhcm5pbmcnO1xuICAgICAgdy5lbWl0dGVyID0gdGFyZ2V0O1xuICAgICAgdy50eXBlID0gdHlwZTtcbiAgICAgIHcuY291bnQgPSBleGlzdGluZy5sZW5ndGg7XG4gICAgICBQcm9jZXNzRW1pdFdhcm5pbmcodyk7XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIHRhcmdldDtcbn1cblxuRXZlbnRFbWl0dGVyLnByb3RvdHlwZS5hZGRMaXN0ZW5lciA9IGZ1bmN0aW9uIGFkZExpc3RlbmVyKHR5cGUsIGxpc3RlbmVyKSB7XG4gIHJldHVybiBfYWRkTGlzdGVuZXIodGhpcywgdHlwZSwgbGlzdGVuZXIsIGZhbHNlKTtcbn07XG5cbkV2ZW50RW1pdHRlci5wcm90b3R5cGUub24gPSBFdmVudEVtaXR0ZXIucHJvdG90eXBlLmFkZExpc3RlbmVyO1xuXG5FdmVudEVtaXR0ZXIucHJvdG90eXBlLnByZXBlbmRMaXN0ZW5lciA9XG4gICAgZnVuY3Rpb24gcHJlcGVuZExpc3RlbmVyKHR5cGUsIGxpc3RlbmVyKSB7XG4gICAgICByZXR1cm4gX2FkZExpc3RlbmVyKHRoaXMsIHR5cGUsIGxpc3RlbmVyLCB0cnVlKTtcbiAgICB9O1xuXG5mdW5jdGlvbiBvbmNlV3JhcHBlcigpIHtcbiAgdmFyIGFyZ3MgPSBbXTtcbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspIGFyZ3MucHVzaChhcmd1bWVudHNbaV0pO1xuICBpZiAoIXRoaXMuZmlyZWQpIHtcbiAgICB0aGlzLnRhcmdldC5yZW1vdmVMaXN0ZW5lcih0aGlzLnR5cGUsIHRoaXMud3JhcEZuKTtcbiAgICB0aGlzLmZpcmVkID0gdHJ1ZTtcbiAgICBSZWZsZWN0QXBwbHkodGhpcy5saXN0ZW5lciwgdGhpcy50YXJnZXQsIGFyZ3MpO1xuICB9XG59XG5cbmZ1bmN0aW9uIF9vbmNlV3JhcCh0YXJnZXQsIHR5cGUsIGxpc3RlbmVyKSB7XG4gIHZhciBzdGF0ZSA9IHsgZmlyZWQ6IGZhbHNlLCB3cmFwRm46IHVuZGVmaW5lZCwgdGFyZ2V0OiB0YXJnZXQsIHR5cGU6IHR5cGUsIGxpc3RlbmVyOiBsaXN0ZW5lciB9O1xuICB2YXIgd3JhcHBlZCA9IG9uY2VXcmFwcGVyLmJpbmQoc3RhdGUpO1xuICB3cmFwcGVkLmxpc3RlbmVyID0gbGlzdGVuZXI7XG4gIHN0YXRlLndyYXBGbiA9IHdyYXBwZWQ7XG4gIHJldHVybiB3cmFwcGVkO1xufVxuXG5FdmVudEVtaXR0ZXIucHJvdG90eXBlLm9uY2UgPSBmdW5jdGlvbiBvbmNlKHR5cGUsIGxpc3RlbmVyKSB7XG4gIGlmICh0eXBlb2YgbGlzdGVuZXIgIT09ICdmdW5jdGlvbicpIHtcbiAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdUaGUgXCJsaXN0ZW5lclwiIGFyZ3VtZW50IG11c3QgYmUgb2YgdHlwZSBGdW5jdGlvbi4gUmVjZWl2ZWQgdHlwZSAnICsgdHlwZW9mIGxpc3RlbmVyKTtcbiAgfVxuICB0aGlzLm9uKHR5cGUsIF9vbmNlV3JhcCh0aGlzLCB0eXBlLCBsaXN0ZW5lcikpO1xuICByZXR1cm4gdGhpcztcbn07XG5cbkV2ZW50RW1pdHRlci5wcm90b3R5cGUucHJlcGVuZE9uY2VMaXN0ZW5lciA9XG4gICAgZnVuY3Rpb24gcHJlcGVuZE9uY2VMaXN0ZW5lcih0eXBlLCBsaXN0ZW5lcikge1xuICAgICAgaWYgKHR5cGVvZiBsaXN0ZW5lciAhPT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdUaGUgXCJsaXN0ZW5lclwiIGFyZ3VtZW50IG11c3QgYmUgb2YgdHlwZSBGdW5jdGlvbi4gUmVjZWl2ZWQgdHlwZSAnICsgdHlwZW9mIGxpc3RlbmVyKTtcbiAgICAgIH1cbiAgICAgIHRoaXMucHJlcGVuZExpc3RlbmVyKHR5cGUsIF9vbmNlV3JhcCh0aGlzLCB0eXBlLCBsaXN0ZW5lcikpO1xuICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfTtcblxuLy8gRW1pdHMgYSAncmVtb3ZlTGlzdGVuZXInIGV2ZW50IGlmIGFuZCBvbmx5IGlmIHRoZSBsaXN0ZW5lciB3YXMgcmVtb3ZlZC5cbkV2ZW50RW1pdHRlci5wcm90b3R5cGUucmVtb3ZlTGlzdGVuZXIgPVxuICAgIGZ1bmN0aW9uIHJlbW92ZUxpc3RlbmVyKHR5cGUsIGxpc3RlbmVyKSB7XG4gICAgICB2YXIgbGlzdCwgZXZlbnRzLCBwb3NpdGlvbiwgaSwgb3JpZ2luYWxMaXN0ZW5lcjtcblxuICAgICAgaWYgKHR5cGVvZiBsaXN0ZW5lciAhPT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdUaGUgXCJsaXN0ZW5lclwiIGFyZ3VtZW50IG11c3QgYmUgb2YgdHlwZSBGdW5jdGlvbi4gUmVjZWl2ZWQgdHlwZSAnICsgdHlwZW9mIGxpc3RlbmVyKTtcbiAgICAgIH1cblxuICAgICAgZXZlbnRzID0gdGhpcy5fZXZlbnRzO1xuICAgICAgaWYgKGV2ZW50cyA9PT0gdW5kZWZpbmVkKVxuICAgICAgICByZXR1cm4gdGhpcztcblxuICAgICAgbGlzdCA9IGV2ZW50c1t0eXBlXTtcbiAgICAgIGlmIChsaXN0ID09PSB1bmRlZmluZWQpXG4gICAgICAgIHJldHVybiB0aGlzO1xuXG4gICAgICBpZiAobGlzdCA9PT0gbGlzdGVuZXIgfHwgbGlzdC5saXN0ZW5lciA9PT0gbGlzdGVuZXIpIHtcbiAgICAgICAgaWYgKC0tdGhpcy5fZXZlbnRzQ291bnQgPT09IDApXG4gICAgICAgICAgdGhpcy5fZXZlbnRzID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgZGVsZXRlIGV2ZW50c1t0eXBlXTtcbiAgICAgICAgICBpZiAoZXZlbnRzLnJlbW92ZUxpc3RlbmVyKVxuICAgICAgICAgICAgdGhpcy5lbWl0KCdyZW1vdmVMaXN0ZW5lcicsIHR5cGUsIGxpc3QubGlzdGVuZXIgfHwgbGlzdGVuZXIpO1xuICAgICAgICB9XG4gICAgICB9IGVsc2UgaWYgKHR5cGVvZiBsaXN0ICE9PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgIHBvc2l0aW9uID0gLTE7XG5cbiAgICAgICAgZm9yIChpID0gbGlzdC5sZW5ndGggLSAxOyBpID49IDA7IGktLSkge1xuICAgICAgICAgIGlmIChsaXN0W2ldID09PSBsaXN0ZW5lciB8fCBsaXN0W2ldLmxpc3RlbmVyID09PSBsaXN0ZW5lcikge1xuICAgICAgICAgICAgb3JpZ2luYWxMaXN0ZW5lciA9IGxpc3RbaV0ubGlzdGVuZXI7XG4gICAgICAgICAgICBwb3NpdGlvbiA9IGk7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBpZiAocG9zaXRpb24gPCAwKVxuICAgICAgICAgIHJldHVybiB0aGlzO1xuXG4gICAgICAgIGlmIChwb3NpdGlvbiA9PT0gMClcbiAgICAgICAgICBsaXN0LnNoaWZ0KCk7XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgIHNwbGljZU9uZShsaXN0LCBwb3NpdGlvbik7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAobGlzdC5sZW5ndGggPT09IDEpXG4gICAgICAgICAgZXZlbnRzW3R5cGVdID0gbGlzdFswXTtcblxuICAgICAgICBpZiAoZXZlbnRzLnJlbW92ZUxpc3RlbmVyICE9PSB1bmRlZmluZWQpXG4gICAgICAgICAgdGhpcy5lbWl0KCdyZW1vdmVMaXN0ZW5lcicsIHR5cGUsIG9yaWdpbmFsTGlzdGVuZXIgfHwgbGlzdGVuZXIpO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gdGhpcztcbiAgICB9O1xuXG5FdmVudEVtaXR0ZXIucHJvdG90eXBlLm9mZiA9IEV2ZW50RW1pdHRlci5wcm90b3R5cGUucmVtb3ZlTGlzdGVuZXI7XG5cbkV2ZW50RW1pdHRlci5wcm90b3R5cGUucmVtb3ZlQWxsTGlzdGVuZXJzID1cbiAgICBmdW5jdGlvbiByZW1vdmVBbGxMaXN0ZW5lcnModHlwZSkge1xuICAgICAgdmFyIGxpc3RlbmVycywgZXZlbnRzLCBpO1xuXG4gICAgICBldmVudHMgPSB0aGlzLl9ldmVudHM7XG4gICAgICBpZiAoZXZlbnRzID09PSB1bmRlZmluZWQpXG4gICAgICAgIHJldHVybiB0aGlzO1xuXG4gICAgICAvLyBub3QgbGlzdGVuaW5nIGZvciByZW1vdmVMaXN0ZW5lciwgbm8gbmVlZCB0byBlbWl0XG4gICAgICBpZiAoZXZlbnRzLnJlbW92ZUxpc3RlbmVyID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICB0aGlzLl9ldmVudHMgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuICAgICAgICAgIHRoaXMuX2V2ZW50c0NvdW50ID0gMDtcbiAgICAgICAgfSBlbHNlIGlmIChldmVudHNbdHlwZV0gIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgIGlmICgtLXRoaXMuX2V2ZW50c0NvdW50ID09PSAwKVxuICAgICAgICAgICAgdGhpcy5fZXZlbnRzID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcbiAgICAgICAgICBlbHNlXG4gICAgICAgICAgICBkZWxldGUgZXZlbnRzW3R5cGVdO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgfVxuXG4gICAgICAvLyBlbWl0IHJlbW92ZUxpc3RlbmVyIGZvciBhbGwgbGlzdGVuZXJzIG9uIGFsbCBldmVudHNcbiAgICAgIGlmIChhcmd1bWVudHMubGVuZ3RoID09PSAwKSB7XG4gICAgICAgIHZhciBrZXlzID0gT2JqZWN0LmtleXMoZXZlbnRzKTtcbiAgICAgICAgdmFyIGtleTtcbiAgICAgICAgZm9yIChpID0gMDsgaSA8IGtleXMubGVuZ3RoOyArK2kpIHtcbiAgICAgICAgICBrZXkgPSBrZXlzW2ldO1xuICAgICAgICAgIGlmIChrZXkgPT09ICdyZW1vdmVMaXN0ZW5lcicpIGNvbnRpbnVlO1xuICAgICAgICAgIHRoaXMucmVtb3ZlQWxsTGlzdGVuZXJzKGtleSk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5yZW1vdmVBbGxMaXN0ZW5lcnMoJ3JlbW92ZUxpc3RlbmVyJyk7XG4gICAgICAgIHRoaXMuX2V2ZW50cyA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG4gICAgICAgIHRoaXMuX2V2ZW50c0NvdW50ID0gMDtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICB9XG5cbiAgICAgIGxpc3RlbmVycyA9IGV2ZW50c1t0eXBlXTtcblxuICAgICAgaWYgKHR5cGVvZiBsaXN0ZW5lcnMgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgdGhpcy5yZW1vdmVMaXN0ZW5lcih0eXBlLCBsaXN0ZW5lcnMpO1xuICAgICAgfSBlbHNlIGlmIChsaXN0ZW5lcnMgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAvLyBMSUZPIG9yZGVyXG4gICAgICAgIGZvciAoaSA9IGxpc3RlbmVycy5sZW5ndGggLSAxOyBpID49IDA7IGktLSkge1xuICAgICAgICAgIHRoaXMucmVtb3ZlTGlzdGVuZXIodHlwZSwgbGlzdGVuZXJzW2ldKTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICByZXR1cm4gdGhpcztcbiAgICB9O1xuXG5mdW5jdGlvbiBfbGlzdGVuZXJzKHRhcmdldCwgdHlwZSwgdW53cmFwKSB7XG4gIHZhciBldmVudHMgPSB0YXJnZXQuX2V2ZW50cztcblxuICBpZiAoZXZlbnRzID09PSB1bmRlZmluZWQpXG4gICAgcmV0dXJuIFtdO1xuXG4gIHZhciBldmxpc3RlbmVyID0gZXZlbnRzW3R5cGVdO1xuICBpZiAoZXZsaXN0ZW5lciA9PT0gdW5kZWZpbmVkKVxuICAgIHJldHVybiBbXTtcblxuICBpZiAodHlwZW9mIGV2bGlzdGVuZXIgPT09ICdmdW5jdGlvbicpXG4gICAgcmV0dXJuIHVud3JhcCA/IFtldmxpc3RlbmVyLmxpc3RlbmVyIHx8IGV2bGlzdGVuZXJdIDogW2V2bGlzdGVuZXJdO1xuXG4gIHJldHVybiB1bndyYXAgP1xuICAgIHVud3JhcExpc3RlbmVycyhldmxpc3RlbmVyKSA6IGFycmF5Q2xvbmUoZXZsaXN0ZW5lciwgZXZsaXN0ZW5lci5sZW5ndGgpO1xufVxuXG5FdmVudEVtaXR0ZXIucHJvdG90eXBlLmxpc3RlbmVycyA9IGZ1bmN0aW9uIGxpc3RlbmVycyh0eXBlKSB7XG4gIHJldHVybiBfbGlzdGVuZXJzKHRoaXMsIHR5cGUsIHRydWUpO1xufTtcblxuRXZlbnRFbWl0dGVyLnByb3RvdHlwZS5yYXdMaXN0ZW5lcnMgPSBmdW5jdGlvbiByYXdMaXN0ZW5lcnModHlwZSkge1xuICByZXR1cm4gX2xpc3RlbmVycyh0aGlzLCB0eXBlLCBmYWxzZSk7XG59O1xuXG5FdmVudEVtaXR0ZXIubGlzdGVuZXJDb3VudCA9IGZ1bmN0aW9uKGVtaXR0ZXIsIHR5cGUpIHtcbiAgaWYgKHR5cGVvZiBlbWl0dGVyLmxpc3RlbmVyQ291bnQgPT09ICdmdW5jdGlvbicpIHtcbiAgICByZXR1cm4gZW1pdHRlci5saXN0ZW5lckNvdW50KHR5cGUpO1xuICB9IGVsc2Uge1xuICAgIHJldHVybiBsaXN0ZW5lckNvdW50LmNhbGwoZW1pdHRlciwgdHlwZSk7XG4gIH1cbn07XG5cbkV2ZW50RW1pdHRlci5wcm90b3R5cGUubGlzdGVuZXJDb3VudCA9IGxpc3RlbmVyQ291bnQ7XG5mdW5jdGlvbiBsaXN0ZW5lckNvdW50KHR5cGUpIHtcbiAgdmFyIGV2ZW50cyA9IHRoaXMuX2V2ZW50cztcblxuICBpZiAoZXZlbnRzICE9PSB1bmRlZmluZWQpIHtcbiAgICB2YXIgZXZsaXN0ZW5lciA9IGV2ZW50c1t0eXBlXTtcblxuICAgIGlmICh0eXBlb2YgZXZsaXN0ZW5lciA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgcmV0dXJuIDE7XG4gICAgfSBlbHNlIGlmIChldmxpc3RlbmVyICE9PSB1bmRlZmluZWQpIHtcbiAgICAgIHJldHVybiBldmxpc3RlbmVyLmxlbmd0aDtcbiAgICB9XG4gIH1cblxuICByZXR1cm4gMDtcbn1cblxuRXZlbnRFbWl0dGVyLnByb3RvdHlwZS5ldmVudE5hbWVzID0gZnVuY3Rpb24gZXZlbnROYW1lcygpIHtcbiAgcmV0dXJuIHRoaXMuX2V2ZW50c0NvdW50ID4gMCA/IFJlZmxlY3RPd25LZXlzKHRoaXMuX2V2ZW50cykgOiBbXTtcbn07XG5cbmZ1bmN0aW9uIGFycmF5Q2xvbmUoYXJyLCBuKSB7XG4gIHZhciBjb3B5ID0gbmV3IEFycmF5KG4pO1xuICBmb3IgKHZhciBpID0gMDsgaSA8IG47ICsraSlcbiAgICBjb3B5W2ldID0gYXJyW2ldO1xuICByZXR1cm4gY29weTtcbn1cblxuZnVuY3Rpb24gc3BsaWNlT25lKGxpc3QsIGluZGV4KSB7XG4gIGZvciAoOyBpbmRleCArIDEgPCBsaXN0Lmxlbmd0aDsgaW5kZXgrKylcbiAgICBsaXN0W2luZGV4XSA9IGxpc3RbaW5kZXggKyAxXTtcbiAgbGlzdC5wb3AoKTtcbn1cblxuZnVuY3Rpb24gdW53cmFwTGlzdGVuZXJzKGFycikge1xuICB2YXIgcmV0ID0gbmV3IEFycmF5KGFyci5sZW5ndGgpO1xuICBmb3IgKHZhciBpID0gMDsgaSA8IHJldC5sZW5ndGg7ICsraSkge1xuICAgIHJldFtpXSA9IGFycltpXS5saXN0ZW5lciB8fCBhcnJbaV07XG4gIH1cbiAgcmV0dXJuIHJldDtcbn1cbiIsImV4cG9ydHMucmVhZCA9IGZ1bmN0aW9uIChidWZmZXIsIG9mZnNldCwgaXNMRSwgbUxlbiwgbkJ5dGVzKSB7XG4gIHZhciBlLCBtXG4gIHZhciBlTGVuID0gKG5CeXRlcyAqIDgpIC0gbUxlbiAtIDFcbiAgdmFyIGVNYXggPSAoMSA8PCBlTGVuKSAtIDFcbiAgdmFyIGVCaWFzID0gZU1heCA+PiAxXG4gIHZhciBuQml0cyA9IC03XG4gIHZhciBpID0gaXNMRSA/IChuQnl0ZXMgLSAxKSA6IDBcbiAgdmFyIGQgPSBpc0xFID8gLTEgOiAxXG4gIHZhciBzID0gYnVmZmVyW29mZnNldCArIGldXG5cbiAgaSArPSBkXG5cbiAgZSA9IHMgJiAoKDEgPDwgKC1uQml0cykpIC0gMSlcbiAgcyA+Pj0gKC1uQml0cylcbiAgbkJpdHMgKz0gZUxlblxuICBmb3IgKDsgbkJpdHMgPiAwOyBlID0gKGUgKiAyNTYpICsgYnVmZmVyW29mZnNldCArIGldLCBpICs9IGQsIG5CaXRzIC09IDgpIHt9XG5cbiAgbSA9IGUgJiAoKDEgPDwgKC1uQml0cykpIC0gMSlcbiAgZSA+Pj0gKC1uQml0cylcbiAgbkJpdHMgKz0gbUxlblxuICBmb3IgKDsgbkJpdHMgPiAwOyBtID0gKG0gKiAyNTYpICsgYnVmZmVyW29mZnNldCArIGldLCBpICs9IGQsIG5CaXRzIC09IDgpIHt9XG5cbiAgaWYgKGUgPT09IDApIHtcbiAgICBlID0gMSAtIGVCaWFzXG4gIH0gZWxzZSBpZiAoZSA9PT0gZU1heCkge1xuICAgIHJldHVybiBtID8gTmFOIDogKChzID8gLTEgOiAxKSAqIEluZmluaXR5KVxuICB9IGVsc2Uge1xuICAgIG0gPSBtICsgTWF0aC5wb3coMiwgbUxlbilcbiAgICBlID0gZSAtIGVCaWFzXG4gIH1cbiAgcmV0dXJuIChzID8gLTEgOiAxKSAqIG0gKiBNYXRoLnBvdygyLCBlIC0gbUxlbilcbn1cblxuZXhwb3J0cy53cml0ZSA9IGZ1bmN0aW9uIChidWZmZXIsIHZhbHVlLCBvZmZzZXQsIGlzTEUsIG1MZW4sIG5CeXRlcykge1xuICB2YXIgZSwgbSwgY1xuICB2YXIgZUxlbiA9IChuQnl0ZXMgKiA4KSAtIG1MZW4gLSAxXG4gIHZhciBlTWF4ID0gKDEgPDwgZUxlbikgLSAxXG4gIHZhciBlQmlhcyA9IGVNYXggPj4gMVxuICB2YXIgcnQgPSAobUxlbiA9PT0gMjMgPyBNYXRoLnBvdygyLCAtMjQpIC0gTWF0aC5wb3coMiwgLTc3KSA6IDApXG4gIHZhciBpID0gaXNMRSA/IDAgOiAobkJ5dGVzIC0gMSlcbiAgdmFyIGQgPSBpc0xFID8gMSA6IC0xXG4gIHZhciBzID0gdmFsdWUgPCAwIHx8ICh2YWx1ZSA9PT0gMCAmJiAxIC8gdmFsdWUgPCAwKSA/IDEgOiAwXG5cbiAgdmFsdWUgPSBNYXRoLmFicyh2YWx1ZSlcblxuICBpZiAoaXNOYU4odmFsdWUpIHx8IHZhbHVlID09PSBJbmZpbml0eSkge1xuICAgIG0gPSBpc05hTih2YWx1ZSkgPyAxIDogMFxuICAgIGUgPSBlTWF4XG4gIH0gZWxzZSB7XG4gICAgZSA9IE1hdGguZmxvb3IoTWF0aC5sb2codmFsdWUpIC8gTWF0aC5MTjIpXG4gICAgaWYgKHZhbHVlICogKGMgPSBNYXRoLnBvdygyLCAtZSkpIDwgMSkge1xuICAgICAgZS0tXG4gICAgICBjICo9IDJcbiAgICB9XG4gICAgaWYgKGUgKyBlQmlhcyA+PSAxKSB7XG4gICAgICB2YWx1ZSArPSBydCAvIGNcbiAgICB9IGVsc2Uge1xuICAgICAgdmFsdWUgKz0gcnQgKiBNYXRoLnBvdygyLCAxIC0gZUJpYXMpXG4gICAgfVxuICAgIGlmICh2YWx1ZSAqIGMgPj0gMikge1xuICAgICAgZSsrXG4gICAgICBjIC89IDJcbiAgICB9XG5cbiAgICBpZiAoZSArIGVCaWFzID49IGVNYXgpIHtcbiAgICAgIG0gPSAwXG4gICAgICBlID0gZU1heFxuICAgIH0gZWxzZSBpZiAoZSArIGVCaWFzID49IDEpIHtcbiAgICAgIG0gPSAoKHZhbHVlICogYykgLSAxKSAqIE1hdGgucG93KDIsIG1MZW4pXG4gICAgICBlID0gZSArIGVCaWFzXG4gICAgfSBlbHNlIHtcbiAgICAgIG0gPSB2YWx1ZSAqIE1hdGgucG93KDIsIGVCaWFzIC0gMSkgKiBNYXRoLnBvdygyLCBtTGVuKVxuICAgICAgZSA9IDBcbiAgICB9XG4gIH1cblxuICBmb3IgKDsgbUxlbiA+PSA4OyBidWZmZXJbb2Zmc2V0ICsgaV0gPSBtICYgMHhmZiwgaSArPSBkLCBtIC89IDI1NiwgbUxlbiAtPSA4KSB7fVxuXG4gIGUgPSAoZSA8PCBtTGVuKSB8IG1cbiAgZUxlbiArPSBtTGVuXG4gIGZvciAoOyBlTGVuID4gMDsgYnVmZmVyW29mZnNldCArIGldID0gZSAmIDB4ZmYsIGkgKz0gZCwgZSAvPSAyNTYsIGVMZW4gLT0gOCkge31cblxuICBidWZmZXJbb2Zmc2V0ICsgaSAtIGRdIHw9IHMgKiAxMjhcbn1cbiIsImlmICh0eXBlb2YgT2JqZWN0LmNyZWF0ZSA9PT0gJ2Z1bmN0aW9uJykge1xuICAvLyBpbXBsZW1lbnRhdGlvbiBmcm9tIHN0YW5kYXJkIG5vZGUuanMgJ3V0aWwnIG1vZHVsZVxuICBtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIGluaGVyaXRzKGN0b3IsIHN1cGVyQ3Rvcikge1xuICAgIGlmIChzdXBlckN0b3IpIHtcbiAgICAgIGN0b3Iuc3VwZXJfID0gc3VwZXJDdG9yXG4gICAgICBjdG9yLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoc3VwZXJDdG9yLnByb3RvdHlwZSwge1xuICAgICAgICBjb25zdHJ1Y3Rvcjoge1xuICAgICAgICAgIHZhbHVlOiBjdG9yLFxuICAgICAgICAgIGVudW1lcmFibGU6IGZhbHNlLFxuICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgICAgICB9XG4gICAgICB9KVxuICAgIH1cbiAgfTtcbn0gZWxzZSB7XG4gIC8vIG9sZCBzY2hvb2wgc2hpbSBmb3Igb2xkIGJyb3dzZXJzXG4gIG1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gaW5oZXJpdHMoY3Rvciwgc3VwZXJDdG9yKSB7XG4gICAgaWYgKHN1cGVyQ3Rvcikge1xuICAgICAgY3Rvci5zdXBlcl8gPSBzdXBlckN0b3JcbiAgICAgIHZhciBUZW1wQ3RvciA9IGZ1bmN0aW9uICgpIHt9XG4gICAgICBUZW1wQ3Rvci5wcm90b3R5cGUgPSBzdXBlckN0b3IucHJvdG90eXBlXG4gICAgICBjdG9yLnByb3RvdHlwZSA9IG5ldyBUZW1wQ3RvcigpXG4gICAgICBjdG9yLnByb3RvdHlwZS5jb25zdHJ1Y3RvciA9IGN0b3JcbiAgICB9XG4gIH1cbn1cbiIsInZhciB0b1N0cmluZyA9IHt9LnRvU3RyaW5nO1xuXG5tb2R1bGUuZXhwb3J0cyA9IEFycmF5LmlzQXJyYXkgfHwgZnVuY3Rpb24gKGFycikge1xuICByZXR1cm4gdG9TdHJpbmcuY2FsbChhcnIpID09ICdbb2JqZWN0IEFycmF5XSc7XG59O1xuIiwiJ3VzZSBzdHJpY3QnO1xuXG5pZiAodHlwZW9mIHByb2Nlc3MgPT09ICd1bmRlZmluZWQnIHx8XG4gICAgIXByb2Nlc3MudmVyc2lvbiB8fFxuICAgIHByb2Nlc3MudmVyc2lvbi5pbmRleE9mKCd2MC4nKSA9PT0gMCB8fFxuICAgIHByb2Nlc3MudmVyc2lvbi5pbmRleE9mKCd2MS4nKSA9PT0gMCAmJiBwcm9jZXNzLnZlcnNpb24uaW5kZXhPZigndjEuOC4nKSAhPT0gMCkge1xuICBtb2R1bGUuZXhwb3J0cyA9IHsgbmV4dFRpY2s6IG5leHRUaWNrIH07XG59IGVsc2Uge1xuICBtb2R1bGUuZXhwb3J0cyA9IHByb2Nlc3Ncbn1cblxuZnVuY3Rpb24gbmV4dFRpY2soZm4sIGFyZzEsIGFyZzIsIGFyZzMpIHtcbiAgaWYgKHR5cGVvZiBmbiAhPT0gJ2Z1bmN0aW9uJykge1xuICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ1wiY2FsbGJhY2tcIiBhcmd1bWVudCBtdXN0IGJlIGEgZnVuY3Rpb24nKTtcbiAgfVxuICB2YXIgbGVuID0gYXJndW1lbnRzLmxlbmd0aDtcbiAgdmFyIGFyZ3MsIGk7XG4gIHN3aXRjaCAobGVuKSB7XG4gIGNhc2UgMDpcbiAgY2FzZSAxOlxuICAgIHJldHVybiBwcm9jZXNzLm5leHRUaWNrKGZuKTtcbiAgY2FzZSAyOlxuICAgIHJldHVybiBwcm9jZXNzLm5leHRUaWNrKGZ1bmN0aW9uIGFmdGVyVGlja09uZSgpIHtcbiAgICAgIGZuLmNhbGwobnVsbCwgYXJnMSk7XG4gICAgfSk7XG4gIGNhc2UgMzpcbiAgICByZXR1cm4gcHJvY2Vzcy5uZXh0VGljayhmdW5jdGlvbiBhZnRlclRpY2tUd28oKSB7XG4gICAgICBmbi5jYWxsKG51bGwsIGFyZzEsIGFyZzIpO1xuICAgIH0pO1xuICBjYXNlIDQ6XG4gICAgcmV0dXJuIHByb2Nlc3MubmV4dFRpY2soZnVuY3Rpb24gYWZ0ZXJUaWNrVGhyZWUoKSB7XG4gICAgICBmbi5jYWxsKG51bGwsIGFyZzEsIGFyZzIsIGFyZzMpO1xuICAgIH0pO1xuICBkZWZhdWx0OlxuICAgIGFyZ3MgPSBuZXcgQXJyYXkobGVuIC0gMSk7XG4gICAgaSA9IDA7XG4gICAgd2hpbGUgKGkgPCBhcmdzLmxlbmd0aCkge1xuICAgICAgYXJnc1tpKytdID0gYXJndW1lbnRzW2ldO1xuICAgIH1cbiAgICByZXR1cm4gcHJvY2Vzcy5uZXh0VGljayhmdW5jdGlvbiBhZnRlclRpY2soKSB7XG4gICAgICBmbi5hcHBseShudWxsLCBhcmdzKTtcbiAgICB9KTtcbiAgfVxufVxuXG4iLCIvLyBzaGltIGZvciB1c2luZyBwcm9jZXNzIGluIGJyb3dzZXJcbnZhciBwcm9jZXNzID0gbW9kdWxlLmV4cG9ydHMgPSB7fTtcblxuLy8gY2FjaGVkIGZyb20gd2hhdGV2ZXIgZ2xvYmFsIGlzIHByZXNlbnQgc28gdGhhdCB0ZXN0IHJ1bm5lcnMgdGhhdCBzdHViIGl0XG4vLyBkb24ndCBicmVhayB0aGluZ3MuICBCdXQgd2UgbmVlZCB0byB3cmFwIGl0IGluIGEgdHJ5IGNhdGNoIGluIGNhc2UgaXQgaXNcbi8vIHdyYXBwZWQgaW4gc3RyaWN0IG1vZGUgY29kZSB3aGljaCBkb2Vzbid0IGRlZmluZSBhbnkgZ2xvYmFscy4gIEl0J3MgaW5zaWRlIGFcbi8vIGZ1bmN0aW9uIGJlY2F1c2UgdHJ5L2NhdGNoZXMgZGVvcHRpbWl6ZSBpbiBjZXJ0YWluIGVuZ2luZXMuXG5cbnZhciBjYWNoZWRTZXRUaW1lb3V0O1xudmFyIGNhY2hlZENsZWFyVGltZW91dDtcblxuZnVuY3Rpb24gZGVmYXVsdFNldFRpbW91dCgpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ3NldFRpbWVvdXQgaGFzIG5vdCBiZWVuIGRlZmluZWQnKTtcbn1cbmZ1bmN0aW9uIGRlZmF1bHRDbGVhclRpbWVvdXQgKCkge1xuICAgIHRocm93IG5ldyBFcnJvcignY2xlYXJUaW1lb3V0IGhhcyBub3QgYmVlbiBkZWZpbmVkJyk7XG59XG4oZnVuY3Rpb24gKCkge1xuICAgIHRyeSB7XG4gICAgICAgIGlmICh0eXBlb2Ygc2V0VGltZW91dCA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgY2FjaGVkU2V0VGltZW91dCA9IHNldFRpbWVvdXQ7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBjYWNoZWRTZXRUaW1lb3V0ID0gZGVmYXVsdFNldFRpbW91dDtcbiAgICAgICAgfVxuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgY2FjaGVkU2V0VGltZW91dCA9IGRlZmF1bHRTZXRUaW1vdXQ7XG4gICAgfVxuICAgIHRyeSB7XG4gICAgICAgIGlmICh0eXBlb2YgY2xlYXJUaW1lb3V0ID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICBjYWNoZWRDbGVhclRpbWVvdXQgPSBjbGVhclRpbWVvdXQ7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBjYWNoZWRDbGVhclRpbWVvdXQgPSBkZWZhdWx0Q2xlYXJUaW1lb3V0O1xuICAgICAgICB9XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgICBjYWNoZWRDbGVhclRpbWVvdXQgPSBkZWZhdWx0Q2xlYXJUaW1lb3V0O1xuICAgIH1cbn0gKCkpXG5mdW5jdGlvbiBydW5UaW1lb3V0KGZ1bikge1xuICAgIGlmIChjYWNoZWRTZXRUaW1lb3V0ID09PSBzZXRUaW1lb3V0KSB7XG4gICAgICAgIC8vbm9ybWFsIGVudmlyb21lbnRzIGluIHNhbmUgc2l0dWF0aW9uc1xuICAgICAgICByZXR1cm4gc2V0VGltZW91dChmdW4sIDApO1xuICAgIH1cbiAgICAvLyBpZiBzZXRUaW1lb3V0IHdhc24ndCBhdmFpbGFibGUgYnV0IHdhcyBsYXR0ZXIgZGVmaW5lZFxuICAgIGlmICgoY2FjaGVkU2V0VGltZW91dCA9PT0gZGVmYXVsdFNldFRpbW91dCB8fCAhY2FjaGVkU2V0VGltZW91dCkgJiYgc2V0VGltZW91dCkge1xuICAgICAgICBjYWNoZWRTZXRUaW1lb3V0ID0gc2V0VGltZW91dDtcbiAgICAgICAgcmV0dXJuIHNldFRpbWVvdXQoZnVuLCAwKTtcbiAgICB9XG4gICAgdHJ5IHtcbiAgICAgICAgLy8gd2hlbiB3aGVuIHNvbWVib2R5IGhhcyBzY3Jld2VkIHdpdGggc2V0VGltZW91dCBidXQgbm8gSS5FLiBtYWRkbmVzc1xuICAgICAgICByZXR1cm4gY2FjaGVkU2V0VGltZW91dChmdW4sIDApO1xuICAgIH0gY2F0Y2goZSl7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICAvLyBXaGVuIHdlIGFyZSBpbiBJLkUuIGJ1dCB0aGUgc2NyaXB0IGhhcyBiZWVuIGV2YWxlZCBzbyBJLkUuIGRvZXNuJ3QgdHJ1c3QgdGhlIGdsb2JhbCBvYmplY3Qgd2hlbiBjYWxsZWQgbm9ybWFsbHlcbiAgICAgICAgICAgIHJldHVybiBjYWNoZWRTZXRUaW1lb3V0LmNhbGwobnVsbCwgZnVuLCAwKTtcbiAgICAgICAgfSBjYXRjaChlKXtcbiAgICAgICAgICAgIC8vIHNhbWUgYXMgYWJvdmUgYnV0IHdoZW4gaXQncyBhIHZlcnNpb24gb2YgSS5FLiB0aGF0IG11c3QgaGF2ZSB0aGUgZ2xvYmFsIG9iamVjdCBmb3IgJ3RoaXMnLCBob3BmdWxseSBvdXIgY29udGV4dCBjb3JyZWN0IG90aGVyd2lzZSBpdCB3aWxsIHRocm93IGEgZ2xvYmFsIGVycm9yXG4gICAgICAgICAgICByZXR1cm4gY2FjaGVkU2V0VGltZW91dC5jYWxsKHRoaXMsIGZ1biwgMCk7XG4gICAgICAgIH1cbiAgICB9XG5cblxufVxuZnVuY3Rpb24gcnVuQ2xlYXJUaW1lb3V0KG1hcmtlcikge1xuICAgIGlmIChjYWNoZWRDbGVhclRpbWVvdXQgPT09IGNsZWFyVGltZW91dCkge1xuICAgICAgICAvL25vcm1hbCBlbnZpcm9tZW50cyBpbiBzYW5lIHNpdHVhdGlvbnNcbiAgICAgICAgcmV0dXJuIGNsZWFyVGltZW91dChtYXJrZXIpO1xuICAgIH1cbiAgICAvLyBpZiBjbGVhclRpbWVvdXQgd2Fzbid0IGF2YWlsYWJsZSBidXQgd2FzIGxhdHRlciBkZWZpbmVkXG4gICAgaWYgKChjYWNoZWRDbGVhclRpbWVvdXQgPT09IGRlZmF1bHRDbGVhclRpbWVvdXQgfHwgIWNhY2hlZENsZWFyVGltZW91dCkgJiYgY2xlYXJUaW1lb3V0KSB7XG4gICAgICAgIGNhY2hlZENsZWFyVGltZW91dCA9IGNsZWFyVGltZW91dDtcbiAgICAgICAgcmV0dXJuIGNsZWFyVGltZW91dChtYXJrZXIpO1xuICAgIH1cbiAgICB0cnkge1xuICAgICAgICAvLyB3aGVuIHdoZW4gc29tZWJvZHkgaGFzIHNjcmV3ZWQgd2l0aCBzZXRUaW1lb3V0IGJ1dCBubyBJLkUuIG1hZGRuZXNzXG4gICAgICAgIHJldHVybiBjYWNoZWRDbGVhclRpbWVvdXQobWFya2VyKTtcbiAgICB9IGNhdGNoIChlKXtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIC8vIFdoZW4gd2UgYXJlIGluIEkuRS4gYnV0IHRoZSBzY3JpcHQgaGFzIGJlZW4gZXZhbGVkIHNvIEkuRS4gZG9lc24ndCAgdHJ1c3QgdGhlIGdsb2JhbCBvYmplY3Qgd2hlbiBjYWxsZWQgbm9ybWFsbHlcbiAgICAgICAgICAgIHJldHVybiBjYWNoZWRDbGVhclRpbWVvdXQuY2FsbChudWxsLCBtYXJrZXIpO1xuICAgICAgICB9IGNhdGNoIChlKXtcbiAgICAgICAgICAgIC8vIHNhbWUgYXMgYWJvdmUgYnV0IHdoZW4gaXQncyBhIHZlcnNpb24gb2YgSS5FLiB0aGF0IG11c3QgaGF2ZSB0aGUgZ2xvYmFsIG9iamVjdCBmb3IgJ3RoaXMnLCBob3BmdWxseSBvdXIgY29udGV4dCBjb3JyZWN0IG90aGVyd2lzZSBpdCB3aWxsIHRocm93IGEgZ2xvYmFsIGVycm9yLlxuICAgICAgICAgICAgLy8gU29tZSB2ZXJzaW9ucyBvZiBJLkUuIGhhdmUgZGlmZmVyZW50IHJ1bGVzIGZvciBjbGVhclRpbWVvdXQgdnMgc2V0VGltZW91dFxuICAgICAgICAgICAgcmV0dXJuIGNhY2hlZENsZWFyVGltZW91dC5jYWxsKHRoaXMsIG1hcmtlcik7XG4gICAgICAgIH1cbiAgICB9XG5cblxuXG59XG52YXIgcXVldWUgPSBbXTtcbnZhciBkcmFpbmluZyA9IGZhbHNlO1xudmFyIGN1cnJlbnRRdWV1ZTtcbnZhciBxdWV1ZUluZGV4ID0gLTE7XG5cbmZ1bmN0aW9uIGNsZWFuVXBOZXh0VGljaygpIHtcbiAgICBpZiAoIWRyYWluaW5nIHx8ICFjdXJyZW50UXVldWUpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBkcmFpbmluZyA9IGZhbHNlO1xuICAgIGlmIChjdXJyZW50UXVldWUubGVuZ3RoKSB7XG4gICAgICAgIHF1ZXVlID0gY3VycmVudFF1ZXVlLmNvbmNhdChxdWV1ZSk7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgcXVldWVJbmRleCA9IC0xO1xuICAgIH1cbiAgICBpZiAocXVldWUubGVuZ3RoKSB7XG4gICAgICAgIGRyYWluUXVldWUoKTtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIGRyYWluUXVldWUoKSB7XG4gICAgaWYgKGRyYWluaW5nKSB7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG4gICAgdmFyIHRpbWVvdXQgPSBydW5UaW1lb3V0KGNsZWFuVXBOZXh0VGljayk7XG4gICAgZHJhaW5pbmcgPSB0cnVlO1xuXG4gICAgdmFyIGxlbiA9IHF1ZXVlLmxlbmd0aDtcbiAgICB3aGlsZShsZW4pIHtcbiAgICAgICAgY3VycmVudFF1ZXVlID0gcXVldWU7XG4gICAgICAgIHF1ZXVlID0gW107XG4gICAgICAgIHdoaWxlICgrK3F1ZXVlSW5kZXggPCBsZW4pIHtcbiAgICAgICAgICAgIGlmIChjdXJyZW50UXVldWUpIHtcbiAgICAgICAgICAgICAgICBjdXJyZW50UXVldWVbcXVldWVJbmRleF0ucnVuKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcXVldWVJbmRleCA9IC0xO1xuICAgICAgICBsZW4gPSBxdWV1ZS5sZW5ndGg7XG4gICAgfVxuICAgIGN1cnJlbnRRdWV1ZSA9IG51bGw7XG4gICAgZHJhaW5pbmcgPSBmYWxzZTtcbiAgICBydW5DbGVhclRpbWVvdXQodGltZW91dCk7XG59XG5cbnByb2Nlc3MubmV4dFRpY2sgPSBmdW5jdGlvbiAoZnVuKSB7XG4gICAgdmFyIGFyZ3MgPSBuZXcgQXJyYXkoYXJndW1lbnRzLmxlbmd0aCAtIDEpO1xuICAgIGlmIChhcmd1bWVudHMubGVuZ3RoID4gMSkge1xuICAgICAgICBmb3IgKHZhciBpID0gMTsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgYXJnc1tpIC0gMV0gPSBhcmd1bWVudHNbaV07XG4gICAgICAgIH1cbiAgICB9XG4gICAgcXVldWUucHVzaChuZXcgSXRlbShmdW4sIGFyZ3MpKTtcbiAgICBpZiAocXVldWUubGVuZ3RoID09PSAxICYmICFkcmFpbmluZykge1xuICAgICAgICBydW5UaW1lb3V0KGRyYWluUXVldWUpO1xuICAgIH1cbn07XG5cbi8vIHY4IGxpa2VzIHByZWRpY3RpYmxlIG9iamVjdHNcbmZ1bmN0aW9uIEl0ZW0oZnVuLCBhcnJheSkge1xuICAgIHRoaXMuZnVuID0gZnVuO1xuICAgIHRoaXMuYXJyYXkgPSBhcnJheTtcbn1cbkl0ZW0ucHJvdG90eXBlLnJ1biA9IGZ1bmN0aW9uICgpIHtcbiAgICB0aGlzLmZ1bi5hcHBseShudWxsLCB0aGlzLmFycmF5KTtcbn07XG5wcm9jZXNzLnRpdGxlID0gJ2Jyb3dzZXInO1xucHJvY2Vzcy5icm93c2VyID0gdHJ1ZTtcbnByb2Nlc3MuZW52ID0ge307XG5wcm9jZXNzLmFyZ3YgPSBbXTtcbnByb2Nlc3MudmVyc2lvbiA9ICcnOyAvLyBlbXB0eSBzdHJpbmcgdG8gYXZvaWQgcmVnZXhwIGlzc3Vlc1xucHJvY2Vzcy52ZXJzaW9ucyA9IHt9O1xuXG5mdW5jdGlvbiBub29wKCkge31cblxucHJvY2Vzcy5vbiA9IG5vb3A7XG5wcm9jZXNzLmFkZExpc3RlbmVyID0gbm9vcDtcbnByb2Nlc3Mub25jZSA9IG5vb3A7XG5wcm9jZXNzLm9mZiA9IG5vb3A7XG5wcm9jZXNzLnJlbW92ZUxpc3RlbmVyID0gbm9vcDtcbnByb2Nlc3MucmVtb3ZlQWxsTGlzdGVuZXJzID0gbm9vcDtcbnByb2Nlc3MuZW1pdCA9IG5vb3A7XG5wcm9jZXNzLnByZXBlbmRMaXN0ZW5lciA9IG5vb3A7XG5wcm9jZXNzLnByZXBlbmRPbmNlTGlzdGVuZXIgPSBub29wO1xuXG5wcm9jZXNzLmxpc3RlbmVycyA9IGZ1bmN0aW9uIChuYW1lKSB7IHJldHVybiBbXSB9XG5cbnByb2Nlc3MuYmluZGluZyA9IGZ1bmN0aW9uIChuYW1lKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdwcm9jZXNzLmJpbmRpbmcgaXMgbm90IHN1cHBvcnRlZCcpO1xufTtcblxucHJvY2Vzcy5jd2QgPSBmdW5jdGlvbiAoKSB7IHJldHVybiAnLycgfTtcbnByb2Nlc3MuY2hkaXIgPSBmdW5jdGlvbiAoZGlyKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdwcm9jZXNzLmNoZGlyIGlzIG5vdCBzdXBwb3J0ZWQnKTtcbn07XG5wcm9jZXNzLnVtYXNrID0gZnVuY3Rpb24oKSB7IHJldHVybiAwOyB9O1xuIiwibW9kdWxlLmV4cG9ydHMgPSByZXF1aXJlKCcuL2xpYi9fc3RyZWFtX2R1cGxleC5qcycpO1xuIiwiLy8gQ29weXJpZ2h0IEpveWVudCwgSW5jLiBhbmQgb3RoZXIgTm9kZSBjb250cmlidXRvcnMuXG4vL1xuLy8gUGVybWlzc2lvbiBpcyBoZXJlYnkgZ3JhbnRlZCwgZnJlZSBvZiBjaGFyZ2UsIHRvIGFueSBwZXJzb24gb2J0YWluaW5nIGFcbi8vIGNvcHkgb2YgdGhpcyBzb2Z0d2FyZSBhbmQgYXNzb2NpYXRlZCBkb2N1bWVudGF0aW9uIGZpbGVzICh0aGVcbi8vIFwiU29mdHdhcmVcIiksIHRvIGRlYWwgaW4gdGhlIFNvZnR3YXJlIHdpdGhvdXQgcmVzdHJpY3Rpb24sIGluY2x1ZGluZ1xuLy8gd2l0aG91dCBsaW1pdGF0aW9uIHRoZSByaWdodHMgdG8gdXNlLCBjb3B5LCBtb2RpZnksIG1lcmdlLCBwdWJsaXNoLFxuLy8gZGlzdHJpYnV0ZSwgc3VibGljZW5zZSwgYW5kL29yIHNlbGwgY29waWVzIG9mIHRoZSBTb2Z0d2FyZSwgYW5kIHRvIHBlcm1pdFxuLy8gcGVyc29ucyB0byB3aG9tIHRoZSBTb2Z0d2FyZSBpcyBmdXJuaXNoZWQgdG8gZG8gc28sIHN1YmplY3QgdG8gdGhlXG4vLyBmb2xsb3dpbmcgY29uZGl0aW9uczpcbi8vXG4vLyBUaGUgYWJvdmUgY29weXJpZ2h0IG5vdGljZSBhbmQgdGhpcyBwZXJtaXNzaW9uIG5vdGljZSBzaGFsbCBiZSBpbmNsdWRlZFxuLy8gaW4gYWxsIGNvcGllcyBvciBzdWJzdGFudGlhbCBwb3J0aW9ucyBvZiB0aGUgU29mdHdhcmUuXG4vL1xuLy8gVEhFIFNPRlRXQVJFIElTIFBST1ZJREVEIFwiQVMgSVNcIiwgV0lUSE9VVCBXQVJSQU5UWSBPRiBBTlkgS0lORCwgRVhQUkVTU1xuLy8gT1IgSU1QTElFRCwgSU5DTFVESU5HIEJVVCBOT1QgTElNSVRFRCBUTyBUSEUgV0FSUkFOVElFUyBPRlxuLy8gTUVSQ0hBTlRBQklMSVRZLCBGSVRORVNTIEZPUiBBIFBBUlRJQ1VMQVIgUFVSUE9TRSBBTkQgTk9OSU5GUklOR0VNRU5ULiBJTlxuLy8gTk8gRVZFTlQgU0hBTEwgVEhFIEFVVEhPUlMgT1IgQ09QWVJJR0hUIEhPTERFUlMgQkUgTElBQkxFIEZPUiBBTlkgQ0xBSU0sXG4vLyBEQU1BR0VTIE9SIE9USEVSIExJQUJJTElUWSwgV0hFVEhFUiBJTiBBTiBBQ1RJT04gT0YgQ09OVFJBQ1QsIFRPUlQgT1Jcbi8vIE9USEVSV0lTRSwgQVJJU0lORyBGUk9NLCBPVVQgT0YgT1IgSU4gQ09OTkVDVElPTiBXSVRIIFRIRSBTT0ZUV0FSRSBPUiBUSEVcbi8vIFVTRSBPUiBPVEhFUiBERUFMSU5HUyBJTiBUSEUgU09GVFdBUkUuXG5cbi8vIGEgZHVwbGV4IHN0cmVhbSBpcyBqdXN0IGEgc3RyZWFtIHRoYXQgaXMgYm90aCByZWFkYWJsZSBhbmQgd3JpdGFibGUuXG4vLyBTaW5jZSBKUyBkb2Vzbid0IGhhdmUgbXVsdGlwbGUgcHJvdG90eXBhbCBpbmhlcml0YW5jZSwgdGhpcyBjbGFzc1xuLy8gcHJvdG90eXBhbGx5IGluaGVyaXRzIGZyb20gUmVhZGFibGUsIGFuZCB0aGVuIHBhcmFzaXRpY2FsbHkgZnJvbVxuLy8gV3JpdGFibGUuXG5cbid1c2Ugc3RyaWN0JztcblxuLyo8cmVwbGFjZW1lbnQ+Ki9cblxudmFyIHBuYSA9IHJlcXVpcmUoJ3Byb2Nlc3MtbmV4dGljay1hcmdzJyk7XG4vKjwvcmVwbGFjZW1lbnQ+Ki9cblxuLyo8cmVwbGFjZW1lbnQ+Ki9cbnZhciBvYmplY3RLZXlzID0gT2JqZWN0LmtleXMgfHwgZnVuY3Rpb24gKG9iaikge1xuICB2YXIga2V5cyA9IFtdO1xuICBmb3IgKHZhciBrZXkgaW4gb2JqKSB7XG4gICAga2V5cy5wdXNoKGtleSk7XG4gIH1yZXR1cm4ga2V5cztcbn07XG4vKjwvcmVwbGFjZW1lbnQ+Ki9cblxubW9kdWxlLmV4cG9ydHMgPSBEdXBsZXg7XG5cbi8qPHJlcGxhY2VtZW50PiovXG52YXIgdXRpbCA9IHJlcXVpcmUoJ2NvcmUtdXRpbC1pcycpO1xudXRpbC5pbmhlcml0cyA9IHJlcXVpcmUoJ2luaGVyaXRzJyk7XG4vKjwvcmVwbGFjZW1lbnQ+Ki9cblxudmFyIFJlYWRhYmxlID0gcmVxdWlyZSgnLi9fc3RyZWFtX3JlYWRhYmxlJyk7XG52YXIgV3JpdGFibGUgPSByZXF1aXJlKCcuL19zdHJlYW1fd3JpdGFibGUnKTtcblxudXRpbC5pbmhlcml0cyhEdXBsZXgsIFJlYWRhYmxlKTtcblxue1xuICAvLyBhdm9pZCBzY29wZSBjcmVlcCwgdGhlIGtleXMgYXJyYXkgY2FuIHRoZW4gYmUgY29sbGVjdGVkXG4gIHZhciBrZXlzID0gb2JqZWN0S2V5cyhXcml0YWJsZS5wcm90b3R5cGUpO1xuICBmb3IgKHZhciB2ID0gMDsgdiA8IGtleXMubGVuZ3RoOyB2KyspIHtcbiAgICB2YXIgbWV0aG9kID0ga2V5c1t2XTtcbiAgICBpZiAoIUR1cGxleC5wcm90b3R5cGVbbWV0aG9kXSkgRHVwbGV4LnByb3RvdHlwZVttZXRob2RdID0gV3JpdGFibGUucHJvdG90eXBlW21ldGhvZF07XG4gIH1cbn1cblxuZnVuY3Rpb24gRHVwbGV4KG9wdGlvbnMpIHtcbiAgaWYgKCEodGhpcyBpbnN0YW5jZW9mIER1cGxleCkpIHJldHVybiBuZXcgRHVwbGV4KG9wdGlvbnMpO1xuXG4gIFJlYWRhYmxlLmNhbGwodGhpcywgb3B0aW9ucyk7XG4gIFdyaXRhYmxlLmNhbGwodGhpcywgb3B0aW9ucyk7XG5cbiAgaWYgKG9wdGlvbnMgJiYgb3B0aW9ucy5yZWFkYWJsZSA9PT0gZmFsc2UpIHRoaXMucmVhZGFibGUgPSBmYWxzZTtcblxuICBpZiAob3B0aW9ucyAmJiBvcHRpb25zLndyaXRhYmxlID09PSBmYWxzZSkgdGhpcy53cml0YWJsZSA9IGZhbHNlO1xuXG4gIHRoaXMuYWxsb3dIYWxmT3BlbiA9IHRydWU7XG4gIGlmIChvcHRpb25zICYmIG9wdGlvbnMuYWxsb3dIYWxmT3BlbiA9PT0gZmFsc2UpIHRoaXMuYWxsb3dIYWxmT3BlbiA9IGZhbHNlO1xuXG4gIHRoaXMub25jZSgnZW5kJywgb25lbmQpO1xufVxuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoRHVwbGV4LnByb3RvdHlwZSwgJ3dyaXRhYmxlSGlnaFdhdGVyTWFyaycsIHtcbiAgLy8gbWFraW5nIGl0IGV4cGxpY2l0IHRoaXMgcHJvcGVydHkgaXMgbm90IGVudW1lcmFibGVcbiAgLy8gYmVjYXVzZSBvdGhlcndpc2Ugc29tZSBwcm90b3R5cGUgbWFuaXB1bGF0aW9uIGluXG4gIC8vIHVzZXJsYW5kIHdpbGwgZmFpbFxuICBlbnVtZXJhYmxlOiBmYWxzZSxcbiAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIHRoaXMuX3dyaXRhYmxlU3RhdGUuaGlnaFdhdGVyTWFyaztcbiAgfVxufSk7XG5cbi8vIHRoZSBuby1oYWxmLW9wZW4gZW5mb3JjZXJcbmZ1bmN0aW9uIG9uZW5kKCkge1xuICAvLyBpZiB3ZSBhbGxvdyBoYWxmLW9wZW4gc3RhdGUsIG9yIGlmIHRoZSB3cml0YWJsZSBzaWRlIGVuZGVkLFxuICAvLyB0aGVuIHdlJ3JlIG9rLlxuICBpZiAodGhpcy5hbGxvd0hhbGZPcGVuIHx8IHRoaXMuX3dyaXRhYmxlU3RhdGUuZW5kZWQpIHJldHVybjtcblxuICAvLyBubyBtb3JlIGRhdGEgY2FuIGJlIHdyaXR0ZW4uXG4gIC8vIEJ1dCBhbGxvdyBtb3JlIHdyaXRlcyB0byBoYXBwZW4gaW4gdGhpcyB0aWNrLlxuICBwbmEubmV4dFRpY2sob25FbmROVCwgdGhpcyk7XG59XG5cbmZ1bmN0aW9uIG9uRW5kTlQoc2VsZikge1xuICBzZWxmLmVuZCgpO1xufVxuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoRHVwbGV4LnByb3RvdHlwZSwgJ2Rlc3Ryb3llZCcsIHtcbiAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgaWYgKHRoaXMuX3JlYWRhYmxlU3RhdGUgPT09IHVuZGVmaW5lZCB8fCB0aGlzLl93cml0YWJsZVN0YXRlID09PSB1bmRlZmluZWQpIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgcmV0dXJuIHRoaXMuX3JlYWRhYmxlU3RhdGUuZGVzdHJveWVkICYmIHRoaXMuX3dyaXRhYmxlU3RhdGUuZGVzdHJveWVkO1xuICB9LFxuICBzZXQ6IGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgIC8vIHdlIGlnbm9yZSB0aGUgdmFsdWUgaWYgdGhlIHN0cmVhbVxuICAgIC8vIGhhcyBub3QgYmVlbiBpbml0aWFsaXplZCB5ZXRcbiAgICBpZiAodGhpcy5fcmVhZGFibGVTdGF0ZSA9PT0gdW5kZWZpbmVkIHx8IHRoaXMuX3dyaXRhYmxlU3RhdGUgPT09IHVuZGVmaW5lZCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIC8vIGJhY2t3YXJkIGNvbXBhdGliaWxpdHksIHRoZSB1c2VyIGlzIGV4cGxpY2l0bHlcbiAgICAvLyBtYW5hZ2luZyBkZXN0cm95ZWRcbiAgICB0aGlzLl9yZWFkYWJsZVN0YXRlLmRlc3Ryb3llZCA9IHZhbHVlO1xuICAgIHRoaXMuX3dyaXRhYmxlU3RhdGUuZGVzdHJveWVkID0gdmFsdWU7XG4gIH1cbn0pO1xuXG5EdXBsZXgucHJvdG90eXBlLl9kZXN0cm95ID0gZnVuY3Rpb24gKGVyciwgY2IpIHtcbiAgdGhpcy5wdXNoKG51bGwpO1xuICB0aGlzLmVuZCgpO1xuXG4gIHBuYS5uZXh0VGljayhjYiwgZXJyKTtcbn07IiwiLy8gQ29weXJpZ2h0IEpveWVudCwgSW5jLiBhbmQgb3RoZXIgTm9kZSBjb250cmlidXRvcnMuXG4vL1xuLy8gUGVybWlzc2lvbiBpcyBoZXJlYnkgZ3JhbnRlZCwgZnJlZSBvZiBjaGFyZ2UsIHRvIGFueSBwZXJzb24gb2J0YWluaW5nIGFcbi8vIGNvcHkgb2YgdGhpcyBzb2Z0d2FyZSBhbmQgYXNzb2NpYXRlZCBkb2N1bWVudGF0aW9uIGZpbGVzICh0aGVcbi8vIFwiU29mdHdhcmVcIiksIHRvIGRlYWwgaW4gdGhlIFNvZnR3YXJlIHdpdGhvdXQgcmVzdHJpY3Rpb24sIGluY2x1ZGluZ1xuLy8gd2l0aG91dCBsaW1pdGF0aW9uIHRoZSByaWdodHMgdG8gdXNlLCBjb3B5LCBtb2RpZnksIG1lcmdlLCBwdWJsaXNoLFxuLy8gZGlzdHJpYnV0ZSwgc3VibGljZW5zZSwgYW5kL29yIHNlbGwgY29waWVzIG9mIHRoZSBTb2Z0d2FyZSwgYW5kIHRvIHBlcm1pdFxuLy8gcGVyc29ucyB0byB3aG9tIHRoZSBTb2Z0d2FyZSBpcyBmdXJuaXNoZWQgdG8gZG8gc28sIHN1YmplY3QgdG8gdGhlXG4vLyBmb2xsb3dpbmcgY29uZGl0aW9uczpcbi8vXG4vLyBUaGUgYWJvdmUgY29weXJpZ2h0IG5vdGljZSBhbmQgdGhpcyBwZXJtaXNzaW9uIG5vdGljZSBzaGFsbCBiZSBpbmNsdWRlZFxuLy8gaW4gYWxsIGNvcGllcyBvciBzdWJzdGFudGlhbCBwb3J0aW9ucyBvZiB0aGUgU29mdHdhcmUuXG4vL1xuLy8gVEhFIFNPRlRXQVJFIElTIFBST1ZJREVEIFwiQVMgSVNcIiwgV0lUSE9VVCBXQVJSQU5UWSBPRiBBTlkgS0lORCwgRVhQUkVTU1xuLy8gT1IgSU1QTElFRCwgSU5DTFVESU5HIEJVVCBOT1QgTElNSVRFRCBUTyBUSEUgV0FSUkFOVElFUyBPRlxuLy8gTUVSQ0hBTlRBQklMSVRZLCBGSVRORVNTIEZPUiBBIFBBUlRJQ1VMQVIgUFVSUE9TRSBBTkQgTk9OSU5GUklOR0VNRU5ULiBJTlxuLy8gTk8gRVZFTlQgU0hBTEwgVEhFIEFVVEhPUlMgT1IgQ09QWVJJR0hUIEhPTERFUlMgQkUgTElBQkxFIEZPUiBBTlkgQ0xBSU0sXG4vLyBEQU1BR0VTIE9SIE9USEVSIExJQUJJTElUWSwgV0hFVEhFUiBJTiBBTiBBQ1RJT04gT0YgQ09OVFJBQ1QsIFRPUlQgT1Jcbi8vIE9USEVSV0lTRSwgQVJJU0lORyBGUk9NLCBPVVQgT0YgT1IgSU4gQ09OTkVDVElPTiBXSVRIIFRIRSBTT0ZUV0FSRSBPUiBUSEVcbi8vIFVTRSBPUiBPVEhFUiBERUFMSU5HUyBJTiBUSEUgU09GVFdBUkUuXG5cbi8vIGEgcGFzc3Rocm91Z2ggc3RyZWFtLlxuLy8gYmFzaWNhbGx5IGp1c3QgdGhlIG1vc3QgbWluaW1hbCBzb3J0IG9mIFRyYW5zZm9ybSBzdHJlYW0uXG4vLyBFdmVyeSB3cml0dGVuIGNodW5rIGdldHMgb3V0cHV0IGFzLWlzLlxuXG4ndXNlIHN0cmljdCc7XG5cbm1vZHVsZS5leHBvcnRzID0gUGFzc1Rocm91Z2g7XG5cbnZhciBUcmFuc2Zvcm0gPSByZXF1aXJlKCcuL19zdHJlYW1fdHJhbnNmb3JtJyk7XG5cbi8qPHJlcGxhY2VtZW50PiovXG52YXIgdXRpbCA9IHJlcXVpcmUoJ2NvcmUtdXRpbC1pcycpO1xudXRpbC5pbmhlcml0cyA9IHJlcXVpcmUoJ2luaGVyaXRzJyk7XG4vKjwvcmVwbGFjZW1lbnQ+Ki9cblxudXRpbC5pbmhlcml0cyhQYXNzVGhyb3VnaCwgVHJhbnNmb3JtKTtcblxuZnVuY3Rpb24gUGFzc1Rocm91Z2gob3B0aW9ucykge1xuICBpZiAoISh0aGlzIGluc3RhbmNlb2YgUGFzc1Rocm91Z2gpKSByZXR1cm4gbmV3IFBhc3NUaHJvdWdoKG9wdGlvbnMpO1xuXG4gIFRyYW5zZm9ybS5jYWxsKHRoaXMsIG9wdGlvbnMpO1xufVxuXG5QYXNzVGhyb3VnaC5wcm90b3R5cGUuX3RyYW5zZm9ybSA9IGZ1bmN0aW9uIChjaHVuaywgZW5jb2RpbmcsIGNiKSB7XG4gIGNiKG51bGwsIGNodW5rKTtcbn07IiwiLy8gQ29weXJpZ2h0IEpveWVudCwgSW5jLiBhbmQgb3RoZXIgTm9kZSBjb250cmlidXRvcnMuXG4vL1xuLy8gUGVybWlzc2lvbiBpcyBoZXJlYnkgZ3JhbnRlZCwgZnJlZSBvZiBjaGFyZ2UsIHRvIGFueSBwZXJzb24gb2J0YWluaW5nIGFcbi8vIGNvcHkgb2YgdGhpcyBzb2Z0d2FyZSBhbmQgYXNzb2NpYXRlZCBkb2N1bWVudGF0aW9uIGZpbGVzICh0aGVcbi8vIFwiU29mdHdhcmVcIiksIHRvIGRlYWwgaW4gdGhlIFNvZnR3YXJlIHdpdGhvdXQgcmVzdHJpY3Rpb24sIGluY2x1ZGluZ1xuLy8gd2l0aG91dCBsaW1pdGF0aW9uIHRoZSByaWdodHMgdG8gdXNlLCBjb3B5LCBtb2RpZnksIG1lcmdlLCBwdWJsaXNoLFxuLy8gZGlzdHJpYnV0ZSwgc3VibGljZW5zZSwgYW5kL29yIHNlbGwgY29waWVzIG9mIHRoZSBTb2Z0d2FyZSwgYW5kIHRvIHBlcm1pdFxuLy8gcGVyc29ucyB0byB3aG9tIHRoZSBTb2Z0d2FyZSBpcyBmdXJuaXNoZWQgdG8gZG8gc28sIHN1YmplY3QgdG8gdGhlXG4vLyBmb2xsb3dpbmcgY29uZGl0aW9uczpcbi8vXG4vLyBUaGUgYWJvdmUgY29weXJpZ2h0IG5vdGljZSBhbmQgdGhpcyBwZXJtaXNzaW9uIG5vdGljZSBzaGFsbCBiZSBpbmNsdWRlZFxuLy8gaW4gYWxsIGNvcGllcyBvciBzdWJzdGFudGlhbCBwb3J0aW9ucyBvZiB0aGUgU29mdHdhcmUuXG4vL1xuLy8gVEhFIFNPRlRXQVJFIElTIFBST1ZJREVEIFwiQVMgSVNcIiwgV0lUSE9VVCBXQVJSQU5UWSBPRiBBTlkgS0lORCwgRVhQUkVTU1xuLy8gT1IgSU1QTElFRCwgSU5DTFVESU5HIEJVVCBOT1QgTElNSVRFRCBUTyBUSEUgV0FSUkFOVElFUyBPRlxuLy8gTUVSQ0hBTlRBQklMSVRZLCBGSVRORVNTIEZPUiBBIFBBUlRJQ1VMQVIgUFVSUE9TRSBBTkQgTk9OSU5GUklOR0VNRU5ULiBJTlxuLy8gTk8gRVZFTlQgU0hBTEwgVEhFIEFVVEhPUlMgT1IgQ09QWVJJR0hUIEhPTERFUlMgQkUgTElBQkxFIEZPUiBBTlkgQ0xBSU0sXG4vLyBEQU1BR0VTIE9SIE9USEVSIExJQUJJTElUWSwgV0hFVEhFUiBJTiBBTiBBQ1RJT04gT0YgQ09OVFJBQ1QsIFRPUlQgT1Jcbi8vIE9USEVSV0lTRSwgQVJJU0lORyBGUk9NLCBPVVQgT0YgT1IgSU4gQ09OTkVDVElPTiBXSVRIIFRIRSBTT0ZUV0FSRSBPUiBUSEVcbi8vIFVTRSBPUiBPVEhFUiBERUFMSU5HUyBJTiBUSEUgU09GVFdBUkUuXG5cbid1c2Ugc3RyaWN0JztcblxuLyo8cmVwbGFjZW1lbnQ+Ki9cblxudmFyIHBuYSA9IHJlcXVpcmUoJ3Byb2Nlc3MtbmV4dGljay1hcmdzJyk7XG4vKjwvcmVwbGFjZW1lbnQ+Ki9cblxubW9kdWxlLmV4cG9ydHMgPSBSZWFkYWJsZTtcblxuLyo8cmVwbGFjZW1lbnQ+Ki9cbnZhciBpc0FycmF5ID0gcmVxdWlyZSgnaXNhcnJheScpO1xuLyo8L3JlcGxhY2VtZW50PiovXG5cbi8qPHJlcGxhY2VtZW50PiovXG52YXIgRHVwbGV4O1xuLyo8L3JlcGxhY2VtZW50PiovXG5cblJlYWRhYmxlLlJlYWRhYmxlU3RhdGUgPSBSZWFkYWJsZVN0YXRlO1xuXG4vKjxyZXBsYWNlbWVudD4qL1xudmFyIEVFID0gcmVxdWlyZSgnZXZlbnRzJykuRXZlbnRFbWl0dGVyO1xuXG52YXIgRUVsaXN0ZW5lckNvdW50ID0gZnVuY3Rpb24gKGVtaXR0ZXIsIHR5cGUpIHtcbiAgcmV0dXJuIGVtaXR0ZXIubGlzdGVuZXJzKHR5cGUpLmxlbmd0aDtcbn07XG4vKjwvcmVwbGFjZW1lbnQ+Ki9cblxuLyo8cmVwbGFjZW1lbnQ+Ki9cbnZhciBTdHJlYW0gPSByZXF1aXJlKCcuL2ludGVybmFsL3N0cmVhbXMvc3RyZWFtJyk7XG4vKjwvcmVwbGFjZW1lbnQ+Ki9cblxuLyo8cmVwbGFjZW1lbnQ+Ki9cblxudmFyIEJ1ZmZlciA9IHJlcXVpcmUoJ3NhZmUtYnVmZmVyJykuQnVmZmVyO1xudmFyIE91clVpbnQ4QXJyYXkgPSBnbG9iYWwuVWludDhBcnJheSB8fCBmdW5jdGlvbiAoKSB7fTtcbmZ1bmN0aW9uIF91aW50OEFycmF5VG9CdWZmZXIoY2h1bmspIHtcbiAgcmV0dXJuIEJ1ZmZlci5mcm9tKGNodW5rKTtcbn1cbmZ1bmN0aW9uIF9pc1VpbnQ4QXJyYXkob2JqKSB7XG4gIHJldHVybiBCdWZmZXIuaXNCdWZmZXIob2JqKSB8fCBvYmogaW5zdGFuY2VvZiBPdXJVaW50OEFycmF5O1xufVxuXG4vKjwvcmVwbGFjZW1lbnQ+Ki9cblxuLyo8cmVwbGFjZW1lbnQ+Ki9cbnZhciB1dGlsID0gcmVxdWlyZSgnY29yZS11dGlsLWlzJyk7XG51dGlsLmluaGVyaXRzID0gcmVxdWlyZSgnaW5oZXJpdHMnKTtcbi8qPC9yZXBsYWNlbWVudD4qL1xuXG4vKjxyZXBsYWNlbWVudD4qL1xudmFyIGRlYnVnVXRpbCA9IHJlcXVpcmUoJ3V0aWwnKTtcbnZhciBkZWJ1ZyA9IHZvaWQgMDtcbmlmIChkZWJ1Z1V0aWwgJiYgZGVidWdVdGlsLmRlYnVnbG9nKSB7XG4gIGRlYnVnID0gZGVidWdVdGlsLmRlYnVnbG9nKCdzdHJlYW0nKTtcbn0gZWxzZSB7XG4gIGRlYnVnID0gZnVuY3Rpb24gKCkge307XG59XG4vKjwvcmVwbGFjZW1lbnQ+Ki9cblxudmFyIEJ1ZmZlckxpc3QgPSByZXF1aXJlKCcuL2ludGVybmFsL3N0cmVhbXMvQnVmZmVyTGlzdCcpO1xudmFyIGRlc3Ryb3lJbXBsID0gcmVxdWlyZSgnLi9pbnRlcm5hbC9zdHJlYW1zL2Rlc3Ryb3knKTtcbnZhciBTdHJpbmdEZWNvZGVyO1xuXG51dGlsLmluaGVyaXRzKFJlYWRhYmxlLCBTdHJlYW0pO1xuXG52YXIga1Byb3h5RXZlbnRzID0gWydlcnJvcicsICdjbG9zZScsICdkZXN0cm95JywgJ3BhdXNlJywgJ3Jlc3VtZSddO1xuXG5mdW5jdGlvbiBwcmVwZW5kTGlzdGVuZXIoZW1pdHRlciwgZXZlbnQsIGZuKSB7XG4gIC8vIFNhZGx5IHRoaXMgaXMgbm90IGNhY2hlYWJsZSBhcyBzb21lIGxpYnJhcmllcyBidW5kbGUgdGhlaXIgb3duXG4gIC8vIGV2ZW50IGVtaXR0ZXIgaW1wbGVtZW50YXRpb24gd2l0aCB0aGVtLlxuICBpZiAodHlwZW9mIGVtaXR0ZXIucHJlcGVuZExpc3RlbmVyID09PSAnZnVuY3Rpb24nKSByZXR1cm4gZW1pdHRlci5wcmVwZW5kTGlzdGVuZXIoZXZlbnQsIGZuKTtcblxuICAvLyBUaGlzIGlzIGEgaGFjayB0byBtYWtlIHN1cmUgdGhhdCBvdXIgZXJyb3IgaGFuZGxlciBpcyBhdHRhY2hlZCBiZWZvcmUgYW55XG4gIC8vIHVzZXJsYW5kIG9uZXMuICBORVZFUiBETyBUSElTLiBUaGlzIGlzIGhlcmUgb25seSBiZWNhdXNlIHRoaXMgY29kZSBuZWVkc1xuICAvLyB0byBjb250aW51ZSB0byB3b3JrIHdpdGggb2xkZXIgdmVyc2lvbnMgb2YgTm9kZS5qcyB0aGF0IGRvIG5vdCBpbmNsdWRlXG4gIC8vIHRoZSBwcmVwZW5kTGlzdGVuZXIoKSBtZXRob2QuIFRoZSBnb2FsIGlzIHRvIGV2ZW50dWFsbHkgcmVtb3ZlIHRoaXMgaGFjay5cbiAgaWYgKCFlbWl0dGVyLl9ldmVudHMgfHwgIWVtaXR0ZXIuX2V2ZW50c1tldmVudF0pIGVtaXR0ZXIub24oZXZlbnQsIGZuKTtlbHNlIGlmIChpc0FycmF5KGVtaXR0ZXIuX2V2ZW50c1tldmVudF0pKSBlbWl0dGVyLl9ldmVudHNbZXZlbnRdLnVuc2hpZnQoZm4pO2Vsc2UgZW1pdHRlci5fZXZlbnRzW2V2ZW50XSA9IFtmbiwgZW1pdHRlci5fZXZlbnRzW2V2ZW50XV07XG59XG5cbmZ1bmN0aW9uIFJlYWRhYmxlU3RhdGUob3B0aW9ucywgc3RyZWFtKSB7XG4gIER1cGxleCA9IER1cGxleCB8fCByZXF1aXJlKCcuL19zdHJlYW1fZHVwbGV4Jyk7XG5cbiAgb3B0aW9ucyA9IG9wdGlvbnMgfHwge307XG5cbiAgLy8gRHVwbGV4IHN0cmVhbXMgYXJlIGJvdGggcmVhZGFibGUgYW5kIHdyaXRhYmxlLCBidXQgc2hhcmVcbiAgLy8gdGhlIHNhbWUgb3B0aW9ucyBvYmplY3QuXG4gIC8vIEhvd2V2ZXIsIHNvbWUgY2FzZXMgcmVxdWlyZSBzZXR0aW5nIG9wdGlvbnMgdG8gZGlmZmVyZW50XG4gIC8vIHZhbHVlcyBmb3IgdGhlIHJlYWRhYmxlIGFuZCB0aGUgd3JpdGFibGUgc2lkZXMgb2YgdGhlIGR1cGxleCBzdHJlYW0uXG4gIC8vIFRoZXNlIG9wdGlvbnMgY2FuIGJlIHByb3ZpZGVkIHNlcGFyYXRlbHkgYXMgcmVhZGFibGVYWFggYW5kIHdyaXRhYmxlWFhYLlxuICB2YXIgaXNEdXBsZXggPSBzdHJlYW0gaW5zdGFuY2VvZiBEdXBsZXg7XG5cbiAgLy8gb2JqZWN0IHN0cmVhbSBmbGFnLiBVc2VkIHRvIG1ha2UgcmVhZChuKSBpZ25vcmUgbiBhbmQgdG9cbiAgLy8gbWFrZSBhbGwgdGhlIGJ1ZmZlciBtZXJnaW5nIGFuZCBsZW5ndGggY2hlY2tzIGdvIGF3YXlcbiAgdGhpcy5vYmplY3RNb2RlID0gISFvcHRpb25zLm9iamVjdE1vZGU7XG5cbiAgaWYgKGlzRHVwbGV4KSB0aGlzLm9iamVjdE1vZGUgPSB0aGlzLm9iamVjdE1vZGUgfHwgISFvcHRpb25zLnJlYWRhYmxlT2JqZWN0TW9kZTtcblxuICAvLyB0aGUgcG9pbnQgYXQgd2hpY2ggaXQgc3RvcHMgY2FsbGluZyBfcmVhZCgpIHRvIGZpbGwgdGhlIGJ1ZmZlclxuICAvLyBOb3RlOiAwIGlzIGEgdmFsaWQgdmFsdWUsIG1lYW5zIFwiZG9uJ3QgY2FsbCBfcmVhZCBwcmVlbXB0aXZlbHkgZXZlclwiXG4gIHZhciBod20gPSBvcHRpb25zLmhpZ2hXYXRlck1hcms7XG4gIHZhciByZWFkYWJsZUh3bSA9IG9wdGlvbnMucmVhZGFibGVIaWdoV2F0ZXJNYXJrO1xuICB2YXIgZGVmYXVsdEh3bSA9IHRoaXMub2JqZWN0TW9kZSA/IDE2IDogMTYgKiAxMDI0O1xuXG4gIGlmIChod20gfHwgaHdtID09PSAwKSB0aGlzLmhpZ2hXYXRlck1hcmsgPSBod207ZWxzZSBpZiAoaXNEdXBsZXggJiYgKHJlYWRhYmxlSHdtIHx8IHJlYWRhYmxlSHdtID09PSAwKSkgdGhpcy5oaWdoV2F0ZXJNYXJrID0gcmVhZGFibGVId207ZWxzZSB0aGlzLmhpZ2hXYXRlck1hcmsgPSBkZWZhdWx0SHdtO1xuXG4gIC8vIGNhc3QgdG8gaW50cy5cbiAgdGhpcy5oaWdoV2F0ZXJNYXJrID0gTWF0aC5mbG9vcih0aGlzLmhpZ2hXYXRlck1hcmspO1xuXG4gIC8vIEEgbGlua2VkIGxpc3QgaXMgdXNlZCB0byBzdG9yZSBkYXRhIGNodW5rcyBpbnN0ZWFkIG9mIGFuIGFycmF5IGJlY2F1c2UgdGhlXG4gIC8vIGxpbmtlZCBsaXN0IGNhbiByZW1vdmUgZWxlbWVudHMgZnJvbSB0aGUgYmVnaW5uaW5nIGZhc3RlciB0aGFuXG4gIC8vIGFycmF5LnNoaWZ0KClcbiAgdGhpcy5idWZmZXIgPSBuZXcgQnVmZmVyTGlzdCgpO1xuICB0aGlzLmxlbmd0aCA9IDA7XG4gIHRoaXMucGlwZXMgPSBudWxsO1xuICB0aGlzLnBpcGVzQ291bnQgPSAwO1xuICB0aGlzLmZsb3dpbmcgPSBudWxsO1xuICB0aGlzLmVuZGVkID0gZmFsc2U7XG4gIHRoaXMuZW5kRW1pdHRlZCA9IGZhbHNlO1xuICB0aGlzLnJlYWRpbmcgPSBmYWxzZTtcblxuICAvLyBhIGZsYWcgdG8gYmUgYWJsZSB0byB0ZWxsIGlmIHRoZSBldmVudCAncmVhZGFibGUnLydkYXRhJyBpcyBlbWl0dGVkXG4gIC8vIGltbWVkaWF0ZWx5LCBvciBvbiBhIGxhdGVyIHRpY2suICBXZSBzZXQgdGhpcyB0byB0cnVlIGF0IGZpcnN0LCBiZWNhdXNlXG4gIC8vIGFueSBhY3Rpb25zIHRoYXQgc2hvdWxkbid0IGhhcHBlbiB1bnRpbCBcImxhdGVyXCIgc2hvdWxkIGdlbmVyYWxseSBhbHNvXG4gIC8vIG5vdCBoYXBwZW4gYmVmb3JlIHRoZSBmaXJzdCByZWFkIGNhbGwuXG4gIHRoaXMuc3luYyA9IHRydWU7XG5cbiAgLy8gd2hlbmV2ZXIgd2UgcmV0dXJuIG51bGwsIHRoZW4gd2Ugc2V0IGEgZmxhZyB0byBzYXlcbiAgLy8gdGhhdCB3ZSdyZSBhd2FpdGluZyBhICdyZWFkYWJsZScgZXZlbnQgZW1pc3Npb24uXG4gIHRoaXMubmVlZFJlYWRhYmxlID0gZmFsc2U7XG4gIHRoaXMuZW1pdHRlZFJlYWRhYmxlID0gZmFsc2U7XG4gIHRoaXMucmVhZGFibGVMaXN0ZW5pbmcgPSBmYWxzZTtcbiAgdGhpcy5yZXN1bWVTY2hlZHVsZWQgPSBmYWxzZTtcblxuICAvLyBoYXMgaXQgYmVlbiBkZXN0cm95ZWRcbiAgdGhpcy5kZXN0cm95ZWQgPSBmYWxzZTtcblxuICAvLyBDcnlwdG8gaXMga2luZCBvZiBvbGQgYW5kIGNydXN0eS4gIEhpc3RvcmljYWxseSwgaXRzIGRlZmF1bHQgc3RyaW5nXG4gIC8vIGVuY29kaW5nIGlzICdiaW5hcnknIHNvIHdlIGhhdmUgdG8gbWFrZSB0aGlzIGNvbmZpZ3VyYWJsZS5cbiAgLy8gRXZlcnl0aGluZyBlbHNlIGluIHRoZSB1bml2ZXJzZSB1c2VzICd1dGY4JywgdGhvdWdoLlxuICB0aGlzLmRlZmF1bHRFbmNvZGluZyA9IG9wdGlvbnMuZGVmYXVsdEVuY29kaW5nIHx8ICd1dGY4JztcblxuICAvLyB0aGUgbnVtYmVyIG9mIHdyaXRlcnMgdGhhdCBhcmUgYXdhaXRpbmcgYSBkcmFpbiBldmVudCBpbiAucGlwZSgpc1xuICB0aGlzLmF3YWl0RHJhaW4gPSAwO1xuXG4gIC8vIGlmIHRydWUsIGEgbWF5YmVSZWFkTW9yZSBoYXMgYmVlbiBzY2hlZHVsZWRcbiAgdGhpcy5yZWFkaW5nTW9yZSA9IGZhbHNlO1xuXG4gIHRoaXMuZGVjb2RlciA9IG51bGw7XG4gIHRoaXMuZW5jb2RpbmcgPSBudWxsO1xuICBpZiAob3B0aW9ucy5lbmNvZGluZykge1xuICAgIGlmICghU3RyaW5nRGVjb2RlcikgU3RyaW5nRGVjb2RlciA9IHJlcXVpcmUoJ3N0cmluZ19kZWNvZGVyLycpLlN0cmluZ0RlY29kZXI7XG4gICAgdGhpcy5kZWNvZGVyID0gbmV3IFN0cmluZ0RlY29kZXIob3B0aW9ucy5lbmNvZGluZyk7XG4gICAgdGhpcy5lbmNvZGluZyA9IG9wdGlvbnMuZW5jb2Rpbmc7XG4gIH1cbn1cblxuZnVuY3Rpb24gUmVhZGFibGUob3B0aW9ucykge1xuICBEdXBsZXggPSBEdXBsZXggfHwgcmVxdWlyZSgnLi9fc3RyZWFtX2R1cGxleCcpO1xuXG4gIGlmICghKHRoaXMgaW5zdGFuY2VvZiBSZWFkYWJsZSkpIHJldHVybiBuZXcgUmVhZGFibGUob3B0aW9ucyk7XG5cbiAgdGhpcy5fcmVhZGFibGVTdGF0ZSA9IG5ldyBSZWFkYWJsZVN0YXRlKG9wdGlvbnMsIHRoaXMpO1xuXG4gIC8vIGxlZ2FjeVxuICB0aGlzLnJlYWRhYmxlID0gdHJ1ZTtcblxuICBpZiAob3B0aW9ucykge1xuICAgIGlmICh0eXBlb2Ygb3B0aW9ucy5yZWFkID09PSAnZnVuY3Rpb24nKSB0aGlzLl9yZWFkID0gb3B0aW9ucy5yZWFkO1xuXG4gICAgaWYgKHR5cGVvZiBvcHRpb25zLmRlc3Ryb3kgPT09ICdmdW5jdGlvbicpIHRoaXMuX2Rlc3Ryb3kgPSBvcHRpb25zLmRlc3Ryb3k7XG4gIH1cblxuICBTdHJlYW0uY2FsbCh0aGlzKTtcbn1cblxuT2JqZWN0LmRlZmluZVByb3BlcnR5KFJlYWRhYmxlLnByb3RvdHlwZSwgJ2Rlc3Ryb3llZCcsIHtcbiAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgaWYgKHRoaXMuX3JlYWRhYmxlU3RhdGUgPT09IHVuZGVmaW5lZCkge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICByZXR1cm4gdGhpcy5fcmVhZGFibGVTdGF0ZS5kZXN0cm95ZWQ7XG4gIH0sXG4gIHNldDogZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgLy8gd2UgaWdub3JlIHRoZSB2YWx1ZSBpZiB0aGUgc3RyZWFtXG4gICAgLy8gaGFzIG5vdCBiZWVuIGluaXRpYWxpemVkIHlldFxuICAgIGlmICghdGhpcy5fcmVhZGFibGVTdGF0ZSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIC8vIGJhY2t3YXJkIGNvbXBhdGliaWxpdHksIHRoZSB1c2VyIGlzIGV4cGxpY2l0bHlcbiAgICAvLyBtYW5hZ2luZyBkZXN0cm95ZWRcbiAgICB0aGlzLl9yZWFkYWJsZVN0YXRlLmRlc3Ryb3llZCA9IHZhbHVlO1xuICB9XG59KTtcblxuUmVhZGFibGUucHJvdG90eXBlLmRlc3Ryb3kgPSBkZXN0cm95SW1wbC5kZXN0cm95O1xuUmVhZGFibGUucHJvdG90eXBlLl91bmRlc3Ryb3kgPSBkZXN0cm95SW1wbC51bmRlc3Ryb3k7XG5SZWFkYWJsZS5wcm90b3R5cGUuX2Rlc3Ryb3kgPSBmdW5jdGlvbiAoZXJyLCBjYikge1xuICB0aGlzLnB1c2gobnVsbCk7XG4gIGNiKGVycik7XG59O1xuXG4vLyBNYW51YWxseSBzaG92ZSBzb21ldGhpbmcgaW50byB0aGUgcmVhZCgpIGJ1ZmZlci5cbi8vIFRoaXMgcmV0dXJucyB0cnVlIGlmIHRoZSBoaWdoV2F0ZXJNYXJrIGhhcyBub3QgYmVlbiBoaXQgeWV0LFxuLy8gc2ltaWxhciB0byBob3cgV3JpdGFibGUud3JpdGUoKSByZXR1cm5zIHRydWUgaWYgeW91IHNob3VsZFxuLy8gd3JpdGUoKSBzb21lIG1vcmUuXG5SZWFkYWJsZS5wcm90b3R5cGUucHVzaCA9IGZ1bmN0aW9uIChjaHVuaywgZW5jb2RpbmcpIHtcbiAgdmFyIHN0YXRlID0gdGhpcy5fcmVhZGFibGVTdGF0ZTtcbiAgdmFyIHNraXBDaHVua0NoZWNrO1xuXG4gIGlmICghc3RhdGUub2JqZWN0TW9kZSkge1xuICAgIGlmICh0eXBlb2YgY2h1bmsgPT09ICdzdHJpbmcnKSB7XG4gICAgICBlbmNvZGluZyA9IGVuY29kaW5nIHx8IHN0YXRlLmRlZmF1bHRFbmNvZGluZztcbiAgICAgIGlmIChlbmNvZGluZyAhPT0gc3RhdGUuZW5jb2RpbmcpIHtcbiAgICAgICAgY2h1bmsgPSBCdWZmZXIuZnJvbShjaHVuaywgZW5jb2RpbmcpO1xuICAgICAgICBlbmNvZGluZyA9ICcnO1xuICAgICAgfVxuICAgICAgc2tpcENodW5rQ2hlY2sgPSB0cnVlO1xuICAgIH1cbiAgfSBlbHNlIHtcbiAgICBza2lwQ2h1bmtDaGVjayA9IHRydWU7XG4gIH1cblxuICByZXR1cm4gcmVhZGFibGVBZGRDaHVuayh0aGlzLCBjaHVuaywgZW5jb2RpbmcsIGZhbHNlLCBza2lwQ2h1bmtDaGVjayk7XG59O1xuXG4vLyBVbnNoaWZ0IHNob3VsZCAqYWx3YXlzKiBiZSBzb21ldGhpbmcgZGlyZWN0bHkgb3V0IG9mIHJlYWQoKVxuUmVhZGFibGUucHJvdG90eXBlLnVuc2hpZnQgPSBmdW5jdGlvbiAoY2h1bmspIHtcbiAgcmV0dXJuIHJlYWRhYmxlQWRkQ2h1bmsodGhpcywgY2h1bmssIG51bGwsIHRydWUsIGZhbHNlKTtcbn07XG5cbmZ1bmN0aW9uIHJlYWRhYmxlQWRkQ2h1bmsoc3RyZWFtLCBjaHVuaywgZW5jb2RpbmcsIGFkZFRvRnJvbnQsIHNraXBDaHVua0NoZWNrKSB7XG4gIHZhciBzdGF0ZSA9IHN0cmVhbS5fcmVhZGFibGVTdGF0ZTtcbiAgaWYgKGNodW5rID09PSBudWxsKSB7XG4gICAgc3RhdGUucmVhZGluZyA9IGZhbHNlO1xuICAgIG9uRW9mQ2h1bmsoc3RyZWFtLCBzdGF0ZSk7XG4gIH0gZWxzZSB7XG4gICAgdmFyIGVyO1xuICAgIGlmICghc2tpcENodW5rQ2hlY2spIGVyID0gY2h1bmtJbnZhbGlkKHN0YXRlLCBjaHVuayk7XG4gICAgaWYgKGVyKSB7XG4gICAgICBzdHJlYW0uZW1pdCgnZXJyb3InLCBlcik7XG4gICAgfSBlbHNlIGlmIChzdGF0ZS5vYmplY3RNb2RlIHx8IGNodW5rICYmIGNodW5rLmxlbmd0aCA+IDApIHtcbiAgICAgIGlmICh0eXBlb2YgY2h1bmsgIT09ICdzdHJpbmcnICYmICFzdGF0ZS5vYmplY3RNb2RlICYmIE9iamVjdC5nZXRQcm90b3R5cGVPZihjaHVuaykgIT09IEJ1ZmZlci5wcm90b3R5cGUpIHtcbiAgICAgICAgY2h1bmsgPSBfdWludDhBcnJheVRvQnVmZmVyKGNodW5rKTtcbiAgICAgIH1cblxuICAgICAgaWYgKGFkZFRvRnJvbnQpIHtcbiAgICAgICAgaWYgKHN0YXRlLmVuZEVtaXR0ZWQpIHN0cmVhbS5lbWl0KCdlcnJvcicsIG5ldyBFcnJvcignc3RyZWFtLnVuc2hpZnQoKSBhZnRlciBlbmQgZXZlbnQnKSk7ZWxzZSBhZGRDaHVuayhzdHJlYW0sIHN0YXRlLCBjaHVuaywgdHJ1ZSk7XG4gICAgICB9IGVsc2UgaWYgKHN0YXRlLmVuZGVkKSB7XG4gICAgICAgIHN0cmVhbS5lbWl0KCdlcnJvcicsIG5ldyBFcnJvcignc3RyZWFtLnB1c2goKSBhZnRlciBFT0YnKSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBzdGF0ZS5yZWFkaW5nID0gZmFsc2U7XG4gICAgICAgIGlmIChzdGF0ZS5kZWNvZGVyICYmICFlbmNvZGluZykge1xuICAgICAgICAgIGNodW5rID0gc3RhdGUuZGVjb2Rlci53cml0ZShjaHVuayk7XG4gICAgICAgICAgaWYgKHN0YXRlLm9iamVjdE1vZGUgfHwgY2h1bmsubGVuZ3RoICE9PSAwKSBhZGRDaHVuayhzdHJlYW0sIHN0YXRlLCBjaHVuaywgZmFsc2UpO2Vsc2UgbWF5YmVSZWFkTW9yZShzdHJlYW0sIHN0YXRlKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBhZGRDaHVuayhzdHJlYW0sIHN0YXRlLCBjaHVuaywgZmFsc2UpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSBlbHNlIGlmICghYWRkVG9Gcm9udCkge1xuICAgICAgc3RhdGUucmVhZGluZyA9IGZhbHNlO1xuICAgIH1cbiAgfVxuXG4gIHJldHVybiBuZWVkTW9yZURhdGEoc3RhdGUpO1xufVxuXG5mdW5jdGlvbiBhZGRDaHVuayhzdHJlYW0sIHN0YXRlLCBjaHVuaywgYWRkVG9Gcm9udCkge1xuICBpZiAoc3RhdGUuZmxvd2luZyAmJiBzdGF0ZS5sZW5ndGggPT09IDAgJiYgIXN0YXRlLnN5bmMpIHtcbiAgICBzdHJlYW0uZW1pdCgnZGF0YScsIGNodW5rKTtcbiAgICBzdHJlYW0ucmVhZCgwKTtcbiAgfSBlbHNlIHtcbiAgICAvLyB1cGRhdGUgdGhlIGJ1ZmZlciBpbmZvLlxuICAgIHN0YXRlLmxlbmd0aCArPSBzdGF0ZS5vYmplY3RNb2RlID8gMSA6IGNodW5rLmxlbmd0aDtcbiAgICBpZiAoYWRkVG9Gcm9udCkgc3RhdGUuYnVmZmVyLnVuc2hpZnQoY2h1bmspO2Vsc2Ugc3RhdGUuYnVmZmVyLnB1c2goY2h1bmspO1xuXG4gICAgaWYgKHN0YXRlLm5lZWRSZWFkYWJsZSkgZW1pdFJlYWRhYmxlKHN0cmVhbSk7XG4gIH1cbiAgbWF5YmVSZWFkTW9yZShzdHJlYW0sIHN0YXRlKTtcbn1cblxuZnVuY3Rpb24gY2h1bmtJbnZhbGlkKHN0YXRlLCBjaHVuaykge1xuICB2YXIgZXI7XG4gIGlmICghX2lzVWludDhBcnJheShjaHVuaykgJiYgdHlwZW9mIGNodW5rICE9PSAnc3RyaW5nJyAmJiBjaHVuayAhPT0gdW5kZWZpbmVkICYmICFzdGF0ZS5vYmplY3RNb2RlKSB7XG4gICAgZXIgPSBuZXcgVHlwZUVycm9yKCdJbnZhbGlkIG5vbi1zdHJpbmcvYnVmZmVyIGNodW5rJyk7XG4gIH1cbiAgcmV0dXJuIGVyO1xufVxuXG4vLyBpZiBpdCdzIHBhc3QgdGhlIGhpZ2ggd2F0ZXIgbWFyaywgd2UgY2FuIHB1c2ggaW4gc29tZSBtb3JlLlxuLy8gQWxzbywgaWYgd2UgaGF2ZSBubyBkYXRhIHlldCwgd2UgY2FuIHN0YW5kIHNvbWVcbi8vIG1vcmUgYnl0ZXMuICBUaGlzIGlzIHRvIHdvcmsgYXJvdW5kIGNhc2VzIHdoZXJlIGh3bT0wLFxuLy8gc3VjaCBhcyB0aGUgcmVwbC4gIEFsc28sIGlmIHRoZSBwdXNoKCkgdHJpZ2dlcmVkIGFcbi8vIHJlYWRhYmxlIGV2ZW50LCBhbmQgdGhlIHVzZXIgY2FsbGVkIHJlYWQobGFyZ2VOdW1iZXIpIHN1Y2ggdGhhdFxuLy8gbmVlZFJlYWRhYmxlIHdhcyBzZXQsIHRoZW4gd2Ugb3VnaHQgdG8gcHVzaCBtb3JlLCBzbyB0aGF0IGFub3RoZXJcbi8vICdyZWFkYWJsZScgZXZlbnQgd2lsbCBiZSB0cmlnZ2VyZWQuXG5mdW5jdGlvbiBuZWVkTW9yZURhdGEoc3RhdGUpIHtcbiAgcmV0dXJuICFzdGF0ZS5lbmRlZCAmJiAoc3RhdGUubmVlZFJlYWRhYmxlIHx8IHN0YXRlLmxlbmd0aCA8IHN0YXRlLmhpZ2hXYXRlck1hcmsgfHwgc3RhdGUubGVuZ3RoID09PSAwKTtcbn1cblxuUmVhZGFibGUucHJvdG90eXBlLmlzUGF1c2VkID0gZnVuY3Rpb24gKCkge1xuICByZXR1cm4gdGhpcy5fcmVhZGFibGVTdGF0ZS5mbG93aW5nID09PSBmYWxzZTtcbn07XG5cbi8vIGJhY2t3YXJkcyBjb21wYXRpYmlsaXR5LlxuUmVhZGFibGUucHJvdG90eXBlLnNldEVuY29kaW5nID0gZnVuY3Rpb24gKGVuYykge1xuICBpZiAoIVN0cmluZ0RlY29kZXIpIFN0cmluZ0RlY29kZXIgPSByZXF1aXJlKCdzdHJpbmdfZGVjb2Rlci8nKS5TdHJpbmdEZWNvZGVyO1xuICB0aGlzLl9yZWFkYWJsZVN0YXRlLmRlY29kZXIgPSBuZXcgU3RyaW5nRGVjb2RlcihlbmMpO1xuICB0aGlzLl9yZWFkYWJsZVN0YXRlLmVuY29kaW5nID0gZW5jO1xuICByZXR1cm4gdGhpcztcbn07XG5cbi8vIERvbid0IHJhaXNlIHRoZSBod20gPiA4TUJcbnZhciBNQVhfSFdNID0gMHg4MDAwMDA7XG5mdW5jdGlvbiBjb21wdXRlTmV3SGlnaFdhdGVyTWFyayhuKSB7XG4gIGlmIChuID49IE1BWF9IV00pIHtcbiAgICBuID0gTUFYX0hXTTtcbiAgfSBlbHNlIHtcbiAgICAvLyBHZXQgdGhlIG5leHQgaGlnaGVzdCBwb3dlciBvZiAyIHRvIHByZXZlbnQgaW5jcmVhc2luZyBod20gZXhjZXNzaXZlbHkgaW5cbiAgICAvLyB0aW55IGFtb3VudHNcbiAgICBuLS07XG4gICAgbiB8PSBuID4+PiAxO1xuICAgIG4gfD0gbiA+Pj4gMjtcbiAgICBuIHw9IG4gPj4+IDQ7XG4gICAgbiB8PSBuID4+PiA4O1xuICAgIG4gfD0gbiA+Pj4gMTY7XG4gICAgbisrO1xuICB9XG4gIHJldHVybiBuO1xufVxuXG4vLyBUaGlzIGZ1bmN0aW9uIGlzIGRlc2lnbmVkIHRvIGJlIGlubGluYWJsZSwgc28gcGxlYXNlIHRha2UgY2FyZSB3aGVuIG1ha2luZ1xuLy8gY2hhbmdlcyB0byB0aGUgZnVuY3Rpb24gYm9keS5cbmZ1bmN0aW9uIGhvd011Y2hUb1JlYWQobiwgc3RhdGUpIHtcbiAgaWYgKG4gPD0gMCB8fCBzdGF0ZS5sZW5ndGggPT09IDAgJiYgc3RhdGUuZW5kZWQpIHJldHVybiAwO1xuICBpZiAoc3RhdGUub2JqZWN0TW9kZSkgcmV0dXJuIDE7XG4gIGlmIChuICE9PSBuKSB7XG4gICAgLy8gT25seSBmbG93IG9uZSBidWZmZXIgYXQgYSB0aW1lXG4gICAgaWYgKHN0YXRlLmZsb3dpbmcgJiYgc3RhdGUubGVuZ3RoKSByZXR1cm4gc3RhdGUuYnVmZmVyLmhlYWQuZGF0YS5sZW5ndGg7ZWxzZSByZXR1cm4gc3RhdGUubGVuZ3RoO1xuICB9XG4gIC8vIElmIHdlJ3JlIGFza2luZyBmb3IgbW9yZSB0aGFuIHRoZSBjdXJyZW50IGh3bSwgdGhlbiByYWlzZSB0aGUgaHdtLlxuICBpZiAobiA+IHN0YXRlLmhpZ2hXYXRlck1hcmspIHN0YXRlLmhpZ2hXYXRlck1hcmsgPSBjb21wdXRlTmV3SGlnaFdhdGVyTWFyayhuKTtcbiAgaWYgKG4gPD0gc3RhdGUubGVuZ3RoKSByZXR1cm4gbjtcbiAgLy8gRG9uJ3QgaGF2ZSBlbm91Z2hcbiAgaWYgKCFzdGF0ZS5lbmRlZCkge1xuICAgIHN0YXRlLm5lZWRSZWFkYWJsZSA9IHRydWU7XG4gICAgcmV0dXJuIDA7XG4gIH1cbiAgcmV0dXJuIHN0YXRlLmxlbmd0aDtcbn1cblxuLy8geW91IGNhbiBvdmVycmlkZSBlaXRoZXIgdGhpcyBtZXRob2QsIG9yIHRoZSBhc3luYyBfcmVhZChuKSBiZWxvdy5cblJlYWRhYmxlLnByb3RvdHlwZS5yZWFkID0gZnVuY3Rpb24gKG4pIHtcbiAgZGVidWcoJ3JlYWQnLCBuKTtcbiAgbiA9IHBhcnNlSW50KG4sIDEwKTtcbiAgdmFyIHN0YXRlID0gdGhpcy5fcmVhZGFibGVTdGF0ZTtcbiAgdmFyIG5PcmlnID0gbjtcblxuICBpZiAobiAhPT0gMCkgc3RhdGUuZW1pdHRlZFJlYWRhYmxlID0gZmFsc2U7XG5cbiAgLy8gaWYgd2UncmUgZG9pbmcgcmVhZCgwKSB0byB0cmlnZ2VyIGEgcmVhZGFibGUgZXZlbnQsIGJ1dCB3ZVxuICAvLyBhbHJlYWR5IGhhdmUgYSBidW5jaCBvZiBkYXRhIGluIHRoZSBidWZmZXIsIHRoZW4ganVzdCB0cmlnZ2VyXG4gIC8vIHRoZSAncmVhZGFibGUnIGV2ZW50IGFuZCBtb3ZlIG9uLlxuICBpZiAobiA9PT0gMCAmJiBzdGF0ZS5uZWVkUmVhZGFibGUgJiYgKHN0YXRlLmxlbmd0aCA+PSBzdGF0ZS5oaWdoV2F0ZXJNYXJrIHx8IHN0YXRlLmVuZGVkKSkge1xuICAgIGRlYnVnKCdyZWFkOiBlbWl0UmVhZGFibGUnLCBzdGF0ZS5sZW5ndGgsIHN0YXRlLmVuZGVkKTtcbiAgICBpZiAoc3RhdGUubGVuZ3RoID09PSAwICYmIHN0YXRlLmVuZGVkKSBlbmRSZWFkYWJsZSh0aGlzKTtlbHNlIGVtaXRSZWFkYWJsZSh0aGlzKTtcbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuXG4gIG4gPSBob3dNdWNoVG9SZWFkKG4sIHN0YXRlKTtcblxuICAvLyBpZiB3ZSd2ZSBlbmRlZCwgYW5kIHdlJ3JlIG5vdyBjbGVhciwgdGhlbiBmaW5pc2ggaXQgdXAuXG4gIGlmIChuID09PSAwICYmIHN0YXRlLmVuZGVkKSB7XG4gICAgaWYgKHN0YXRlLmxlbmd0aCA9PT0gMCkgZW5kUmVhZGFibGUodGhpcyk7XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cblxuICAvLyBBbGwgdGhlIGFjdHVhbCBjaHVuayBnZW5lcmF0aW9uIGxvZ2ljIG5lZWRzIHRvIGJlXG4gIC8vICpiZWxvdyogdGhlIGNhbGwgdG8gX3JlYWQuICBUaGUgcmVhc29uIGlzIHRoYXQgaW4gY2VydGFpblxuICAvLyBzeW50aGV0aWMgc3RyZWFtIGNhc2VzLCBzdWNoIGFzIHBhc3N0aHJvdWdoIHN0cmVhbXMsIF9yZWFkXG4gIC8vIG1heSBiZSBhIGNvbXBsZXRlbHkgc3luY2hyb25vdXMgb3BlcmF0aW9uIHdoaWNoIG1heSBjaGFuZ2VcbiAgLy8gdGhlIHN0YXRlIG9mIHRoZSByZWFkIGJ1ZmZlciwgcHJvdmlkaW5nIGVub3VnaCBkYXRhIHdoZW5cbiAgLy8gYmVmb3JlIHRoZXJlIHdhcyAqbm90KiBlbm91Z2guXG4gIC8vXG4gIC8vIFNvLCB0aGUgc3RlcHMgYXJlOlxuICAvLyAxLiBGaWd1cmUgb3V0IHdoYXQgdGhlIHN0YXRlIG9mIHRoaW5ncyB3aWxsIGJlIGFmdGVyIHdlIGRvXG4gIC8vIGEgcmVhZCBmcm9tIHRoZSBidWZmZXIuXG4gIC8vXG4gIC8vIDIuIElmIHRoYXQgcmVzdWx0aW5nIHN0YXRlIHdpbGwgdHJpZ2dlciBhIF9yZWFkLCB0aGVuIGNhbGwgX3JlYWQuXG4gIC8vIE5vdGUgdGhhdCB0aGlzIG1heSBiZSBhc3luY2hyb25vdXMsIG9yIHN5bmNocm9ub3VzLiAgWWVzLCBpdCBpc1xuICAvLyBkZWVwbHkgdWdseSB0byB3cml0ZSBBUElzIHRoaXMgd2F5LCBidXQgdGhhdCBzdGlsbCBkb2Vzbid0IG1lYW5cbiAgLy8gdGhhdCB0aGUgUmVhZGFibGUgY2xhc3Mgc2hvdWxkIGJlaGF2ZSBpbXByb3Blcmx5LCBhcyBzdHJlYW1zIGFyZVxuICAvLyBkZXNpZ25lZCB0byBiZSBzeW5jL2FzeW5jIGFnbm9zdGljLlxuICAvLyBUYWtlIG5vdGUgaWYgdGhlIF9yZWFkIGNhbGwgaXMgc3luYyBvciBhc3luYyAoaWUsIGlmIHRoZSByZWFkIGNhbGxcbiAgLy8gaGFzIHJldHVybmVkIHlldCksIHNvIHRoYXQgd2Uga25vdyB3aGV0aGVyIG9yIG5vdCBpdCdzIHNhZmUgdG8gZW1pdFxuICAvLyAncmVhZGFibGUnIGV0Yy5cbiAgLy9cbiAgLy8gMy4gQWN0dWFsbHkgcHVsbCB0aGUgcmVxdWVzdGVkIGNodW5rcyBvdXQgb2YgdGhlIGJ1ZmZlciBhbmQgcmV0dXJuLlxuXG4gIC8vIGlmIHdlIG5lZWQgYSByZWFkYWJsZSBldmVudCwgdGhlbiB3ZSBuZWVkIHRvIGRvIHNvbWUgcmVhZGluZy5cbiAgdmFyIGRvUmVhZCA9IHN0YXRlLm5lZWRSZWFkYWJsZTtcbiAgZGVidWcoJ25lZWQgcmVhZGFibGUnLCBkb1JlYWQpO1xuXG4gIC8vIGlmIHdlIGN1cnJlbnRseSBoYXZlIGxlc3MgdGhhbiB0aGUgaGlnaFdhdGVyTWFyaywgdGhlbiBhbHNvIHJlYWQgc29tZVxuICBpZiAoc3RhdGUubGVuZ3RoID09PSAwIHx8IHN0YXRlLmxlbmd0aCAtIG4gPCBzdGF0ZS5oaWdoV2F0ZXJNYXJrKSB7XG4gICAgZG9SZWFkID0gdHJ1ZTtcbiAgICBkZWJ1ZygnbGVuZ3RoIGxlc3MgdGhhbiB3YXRlcm1hcmsnLCBkb1JlYWQpO1xuICB9XG5cbiAgLy8gaG93ZXZlciwgaWYgd2UndmUgZW5kZWQsIHRoZW4gdGhlcmUncyBubyBwb2ludCwgYW5kIGlmIHdlJ3JlIGFscmVhZHlcbiAgLy8gcmVhZGluZywgdGhlbiBpdCdzIHVubmVjZXNzYXJ5LlxuICBpZiAoc3RhdGUuZW5kZWQgfHwgc3RhdGUucmVhZGluZykge1xuICAgIGRvUmVhZCA9IGZhbHNlO1xuICAgIGRlYnVnKCdyZWFkaW5nIG9yIGVuZGVkJywgZG9SZWFkKTtcbiAgfSBlbHNlIGlmIChkb1JlYWQpIHtcbiAgICBkZWJ1ZygnZG8gcmVhZCcpO1xuICAgIHN0YXRlLnJlYWRpbmcgPSB0cnVlO1xuICAgIHN0YXRlLnN5bmMgPSB0cnVlO1xuICAgIC8vIGlmIHRoZSBsZW5ndGggaXMgY3VycmVudGx5IHplcm8sIHRoZW4gd2UgKm5lZWQqIGEgcmVhZGFibGUgZXZlbnQuXG4gICAgaWYgKHN0YXRlLmxlbmd0aCA9PT0gMCkgc3RhdGUubmVlZFJlYWRhYmxlID0gdHJ1ZTtcbiAgICAvLyBjYWxsIGludGVybmFsIHJlYWQgbWV0aG9kXG4gICAgdGhpcy5fcmVhZChzdGF0ZS5oaWdoV2F0ZXJNYXJrKTtcbiAgICBzdGF0ZS5zeW5jID0gZmFsc2U7XG4gICAgLy8gSWYgX3JlYWQgcHVzaGVkIGRhdGEgc3luY2hyb25vdXNseSwgdGhlbiBgcmVhZGluZ2Agd2lsbCBiZSBmYWxzZSxcbiAgICAvLyBhbmQgd2UgbmVlZCB0byByZS1ldmFsdWF0ZSBob3cgbXVjaCBkYXRhIHdlIGNhbiByZXR1cm4gdG8gdGhlIHVzZXIuXG4gICAgaWYgKCFzdGF0ZS5yZWFkaW5nKSBuID0gaG93TXVjaFRvUmVhZChuT3JpZywgc3RhdGUpO1xuICB9XG5cbiAgdmFyIHJldDtcbiAgaWYgKG4gPiAwKSByZXQgPSBmcm9tTGlzdChuLCBzdGF0ZSk7ZWxzZSByZXQgPSBudWxsO1xuXG4gIGlmIChyZXQgPT09IG51bGwpIHtcbiAgICBzdGF0ZS5uZWVkUmVhZGFibGUgPSB0cnVlO1xuICAgIG4gPSAwO1xuICB9IGVsc2Uge1xuICAgIHN0YXRlLmxlbmd0aCAtPSBuO1xuICB9XG5cbiAgaWYgKHN0YXRlLmxlbmd0aCA9PT0gMCkge1xuICAgIC8vIElmIHdlIGhhdmUgbm90aGluZyBpbiB0aGUgYnVmZmVyLCB0aGVuIHdlIHdhbnQgdG8ga25vd1xuICAgIC8vIGFzIHNvb24gYXMgd2UgKmRvKiBnZXQgc29tZXRoaW5nIGludG8gdGhlIGJ1ZmZlci5cbiAgICBpZiAoIXN0YXRlLmVuZGVkKSBzdGF0ZS5uZWVkUmVhZGFibGUgPSB0cnVlO1xuXG4gICAgLy8gSWYgd2UgdHJpZWQgdG8gcmVhZCgpIHBhc3QgdGhlIEVPRiwgdGhlbiBlbWl0IGVuZCBvbiB0aGUgbmV4dCB0aWNrLlxuICAgIGlmIChuT3JpZyAhPT0gbiAmJiBzdGF0ZS5lbmRlZCkgZW5kUmVhZGFibGUodGhpcyk7XG4gIH1cblxuICBpZiAocmV0ICE9PSBudWxsKSB0aGlzLmVtaXQoJ2RhdGEnLCByZXQpO1xuXG4gIHJldHVybiByZXQ7XG59O1xuXG5mdW5jdGlvbiBvbkVvZkNodW5rKHN0cmVhbSwgc3RhdGUpIHtcbiAgaWYgKHN0YXRlLmVuZGVkKSByZXR1cm47XG4gIGlmIChzdGF0ZS5kZWNvZGVyKSB7XG4gICAgdmFyIGNodW5rID0gc3RhdGUuZGVjb2Rlci5lbmQoKTtcbiAgICBpZiAoY2h1bmsgJiYgY2h1bmsubGVuZ3RoKSB7XG4gICAgICBzdGF0ZS5idWZmZXIucHVzaChjaHVuayk7XG4gICAgICBzdGF0ZS5sZW5ndGggKz0gc3RhdGUub2JqZWN0TW9kZSA/IDEgOiBjaHVuay5sZW5ndGg7XG4gICAgfVxuICB9XG4gIHN0YXRlLmVuZGVkID0gdHJ1ZTtcblxuICAvLyBlbWl0ICdyZWFkYWJsZScgbm93IHRvIG1ha2Ugc3VyZSBpdCBnZXRzIHBpY2tlZCB1cC5cbiAgZW1pdFJlYWRhYmxlKHN0cmVhbSk7XG59XG5cbi8vIERvbid0IGVtaXQgcmVhZGFibGUgcmlnaHQgYXdheSBpbiBzeW5jIG1vZGUsIGJlY2F1c2UgdGhpcyBjYW4gdHJpZ2dlclxuLy8gYW5vdGhlciByZWFkKCkgY2FsbCA9PiBzdGFjayBvdmVyZmxvdy4gIFRoaXMgd2F5LCBpdCBtaWdodCB0cmlnZ2VyXG4vLyBhIG5leHRUaWNrIHJlY3Vyc2lvbiB3YXJuaW5nLCBidXQgdGhhdCdzIG5vdCBzbyBiYWQuXG5mdW5jdGlvbiBlbWl0UmVhZGFibGUoc3RyZWFtKSB7XG4gIHZhciBzdGF0ZSA9IHN0cmVhbS5fcmVhZGFibGVTdGF0ZTtcbiAgc3RhdGUubmVlZFJlYWRhYmxlID0gZmFsc2U7XG4gIGlmICghc3RhdGUuZW1pdHRlZFJlYWRhYmxlKSB7XG4gICAgZGVidWcoJ2VtaXRSZWFkYWJsZScsIHN0YXRlLmZsb3dpbmcpO1xuICAgIHN0YXRlLmVtaXR0ZWRSZWFkYWJsZSA9IHRydWU7XG4gICAgaWYgKHN0YXRlLnN5bmMpIHBuYS5uZXh0VGljayhlbWl0UmVhZGFibGVfLCBzdHJlYW0pO2Vsc2UgZW1pdFJlYWRhYmxlXyhzdHJlYW0pO1xuICB9XG59XG5cbmZ1bmN0aW9uIGVtaXRSZWFkYWJsZV8oc3RyZWFtKSB7XG4gIGRlYnVnKCdlbWl0IHJlYWRhYmxlJyk7XG4gIHN0cmVhbS5lbWl0KCdyZWFkYWJsZScpO1xuICBmbG93KHN0cmVhbSk7XG59XG5cbi8vIGF0IHRoaXMgcG9pbnQsIHRoZSB1c2VyIGhhcyBwcmVzdW1hYmx5IHNlZW4gdGhlICdyZWFkYWJsZScgZXZlbnQsXG4vLyBhbmQgY2FsbGVkIHJlYWQoKSB0byBjb25zdW1lIHNvbWUgZGF0YS4gIHRoYXQgbWF5IGhhdmUgdHJpZ2dlcmVkXG4vLyBpbiB0dXJuIGFub3RoZXIgX3JlYWQobikgY2FsbCwgaW4gd2hpY2ggY2FzZSByZWFkaW5nID0gdHJ1ZSBpZlxuLy8gaXQncyBpbiBwcm9ncmVzcy5cbi8vIEhvd2V2ZXIsIGlmIHdlJ3JlIG5vdCBlbmRlZCwgb3IgcmVhZGluZywgYW5kIHRoZSBsZW5ndGggPCBod20sXG4vLyB0aGVuIGdvIGFoZWFkIGFuZCB0cnkgdG8gcmVhZCBzb21lIG1vcmUgcHJlZW1wdGl2ZWx5LlxuZnVuY3Rpb24gbWF5YmVSZWFkTW9yZShzdHJlYW0sIHN0YXRlKSB7XG4gIGlmICghc3RhdGUucmVhZGluZ01vcmUpIHtcbiAgICBzdGF0ZS5yZWFkaW5nTW9yZSA9IHRydWU7XG4gICAgcG5hLm5leHRUaWNrKG1heWJlUmVhZE1vcmVfLCBzdHJlYW0sIHN0YXRlKTtcbiAgfVxufVxuXG5mdW5jdGlvbiBtYXliZVJlYWRNb3JlXyhzdHJlYW0sIHN0YXRlKSB7XG4gIHZhciBsZW4gPSBzdGF0ZS5sZW5ndGg7XG4gIHdoaWxlICghc3RhdGUucmVhZGluZyAmJiAhc3RhdGUuZmxvd2luZyAmJiAhc3RhdGUuZW5kZWQgJiYgc3RhdGUubGVuZ3RoIDwgc3RhdGUuaGlnaFdhdGVyTWFyaykge1xuICAgIGRlYnVnKCdtYXliZVJlYWRNb3JlIHJlYWQgMCcpO1xuICAgIHN0cmVhbS5yZWFkKDApO1xuICAgIGlmIChsZW4gPT09IHN0YXRlLmxlbmd0aClcbiAgICAgIC8vIGRpZG4ndCBnZXQgYW55IGRhdGEsIHN0b3Agc3Bpbm5pbmcuXG4gICAgICBicmVhaztlbHNlIGxlbiA9IHN0YXRlLmxlbmd0aDtcbiAgfVxuICBzdGF0ZS5yZWFkaW5nTW9yZSA9IGZhbHNlO1xufVxuXG4vLyBhYnN0cmFjdCBtZXRob2QuICB0byBiZSBvdmVycmlkZGVuIGluIHNwZWNpZmljIGltcGxlbWVudGF0aW9uIGNsYXNzZXMuXG4vLyBjYWxsIGNiKGVyLCBkYXRhKSB3aGVyZSBkYXRhIGlzIDw9IG4gaW4gbGVuZ3RoLlxuLy8gZm9yIHZpcnR1YWwgKG5vbi1zdHJpbmcsIG5vbi1idWZmZXIpIHN0cmVhbXMsIFwibGVuZ3RoXCIgaXMgc29tZXdoYXRcbi8vIGFyYml0cmFyeSwgYW5kIHBlcmhhcHMgbm90IHZlcnkgbWVhbmluZ2Z1bC5cblJlYWRhYmxlLnByb3RvdHlwZS5fcmVhZCA9IGZ1bmN0aW9uIChuKSB7XG4gIHRoaXMuZW1pdCgnZXJyb3InLCBuZXcgRXJyb3IoJ19yZWFkKCkgaXMgbm90IGltcGxlbWVudGVkJykpO1xufTtcblxuUmVhZGFibGUucHJvdG90eXBlLnBpcGUgPSBmdW5jdGlvbiAoZGVzdCwgcGlwZU9wdHMpIHtcbiAgdmFyIHNyYyA9IHRoaXM7XG4gIHZhciBzdGF0ZSA9IHRoaXMuX3JlYWRhYmxlU3RhdGU7XG5cbiAgc3dpdGNoIChzdGF0ZS5waXBlc0NvdW50KSB7XG4gICAgY2FzZSAwOlxuICAgICAgc3RhdGUucGlwZXMgPSBkZXN0O1xuICAgICAgYnJlYWs7XG4gICAgY2FzZSAxOlxuICAgICAgc3RhdGUucGlwZXMgPSBbc3RhdGUucGlwZXMsIGRlc3RdO1xuICAgICAgYnJlYWs7XG4gICAgZGVmYXVsdDpcbiAgICAgIHN0YXRlLnBpcGVzLnB1c2goZGVzdCk7XG4gICAgICBicmVhaztcbiAgfVxuICBzdGF0ZS5waXBlc0NvdW50ICs9IDE7XG4gIGRlYnVnKCdwaXBlIGNvdW50PSVkIG9wdHM9JWonLCBzdGF0ZS5waXBlc0NvdW50LCBwaXBlT3B0cyk7XG5cbiAgdmFyIGRvRW5kID0gKCFwaXBlT3B0cyB8fCBwaXBlT3B0cy5lbmQgIT09IGZhbHNlKSAmJiBkZXN0ICE9PSBwcm9jZXNzLnN0ZG91dCAmJiBkZXN0ICE9PSBwcm9jZXNzLnN0ZGVycjtcblxuICB2YXIgZW5kRm4gPSBkb0VuZCA/IG9uZW5kIDogdW5waXBlO1xuICBpZiAoc3RhdGUuZW5kRW1pdHRlZCkgcG5hLm5leHRUaWNrKGVuZEZuKTtlbHNlIHNyYy5vbmNlKCdlbmQnLCBlbmRGbik7XG5cbiAgZGVzdC5vbigndW5waXBlJywgb251bnBpcGUpO1xuICBmdW5jdGlvbiBvbnVucGlwZShyZWFkYWJsZSwgdW5waXBlSW5mbykge1xuICAgIGRlYnVnKCdvbnVucGlwZScpO1xuICAgIGlmIChyZWFkYWJsZSA9PT0gc3JjKSB7XG4gICAgICBpZiAodW5waXBlSW5mbyAmJiB1bnBpcGVJbmZvLmhhc1VucGlwZWQgPT09IGZhbHNlKSB7XG4gICAgICAgIHVucGlwZUluZm8uaGFzVW5waXBlZCA9IHRydWU7XG4gICAgICAgIGNsZWFudXAoKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBmdW5jdGlvbiBvbmVuZCgpIHtcbiAgICBkZWJ1Zygnb25lbmQnKTtcbiAgICBkZXN0LmVuZCgpO1xuICB9XG5cbiAgLy8gd2hlbiB0aGUgZGVzdCBkcmFpbnMsIGl0IHJlZHVjZXMgdGhlIGF3YWl0RHJhaW4gY291bnRlclxuICAvLyBvbiB0aGUgc291cmNlLiAgVGhpcyB3b3VsZCBiZSBtb3JlIGVsZWdhbnQgd2l0aCBhIC5vbmNlKClcbiAgLy8gaGFuZGxlciBpbiBmbG93KCksIGJ1dCBhZGRpbmcgYW5kIHJlbW92aW5nIHJlcGVhdGVkbHkgaXNcbiAgLy8gdG9vIHNsb3cuXG4gIHZhciBvbmRyYWluID0gcGlwZU9uRHJhaW4oc3JjKTtcbiAgZGVzdC5vbignZHJhaW4nLCBvbmRyYWluKTtcblxuICB2YXIgY2xlYW5lZFVwID0gZmFsc2U7XG4gIGZ1bmN0aW9uIGNsZWFudXAoKSB7XG4gICAgZGVidWcoJ2NsZWFudXAnKTtcbiAgICAvLyBjbGVhbnVwIGV2ZW50IGhhbmRsZXJzIG9uY2UgdGhlIHBpcGUgaXMgYnJva2VuXG4gICAgZGVzdC5yZW1vdmVMaXN0ZW5lcignY2xvc2UnLCBvbmNsb3NlKTtcbiAgICBkZXN0LnJlbW92ZUxpc3RlbmVyKCdmaW5pc2gnLCBvbmZpbmlzaCk7XG4gICAgZGVzdC5yZW1vdmVMaXN0ZW5lcignZHJhaW4nLCBvbmRyYWluKTtcbiAgICBkZXN0LnJlbW92ZUxpc3RlbmVyKCdlcnJvcicsIG9uZXJyb3IpO1xuICAgIGRlc3QucmVtb3ZlTGlzdGVuZXIoJ3VucGlwZScsIG9udW5waXBlKTtcbiAgICBzcmMucmVtb3ZlTGlzdGVuZXIoJ2VuZCcsIG9uZW5kKTtcbiAgICBzcmMucmVtb3ZlTGlzdGVuZXIoJ2VuZCcsIHVucGlwZSk7XG4gICAgc3JjLnJlbW92ZUxpc3RlbmVyKCdkYXRhJywgb25kYXRhKTtcblxuICAgIGNsZWFuZWRVcCA9IHRydWU7XG5cbiAgICAvLyBpZiB0aGUgcmVhZGVyIGlzIHdhaXRpbmcgZm9yIGEgZHJhaW4gZXZlbnQgZnJvbSB0aGlzXG4gICAgLy8gc3BlY2lmaWMgd3JpdGVyLCB0aGVuIGl0IHdvdWxkIGNhdXNlIGl0IHRvIG5ldmVyIHN0YXJ0XG4gICAgLy8gZmxvd2luZyBhZ2Fpbi5cbiAgICAvLyBTbywgaWYgdGhpcyBpcyBhd2FpdGluZyBhIGRyYWluLCB0aGVuIHdlIGp1c3QgY2FsbCBpdCBub3cuXG4gICAgLy8gSWYgd2UgZG9uJ3Qga25vdywgdGhlbiBhc3N1bWUgdGhhdCB3ZSBhcmUgd2FpdGluZyBmb3Igb25lLlxuICAgIGlmIChzdGF0ZS5hd2FpdERyYWluICYmICghZGVzdC5fd3JpdGFibGVTdGF0ZSB8fCBkZXN0Ll93cml0YWJsZVN0YXRlLm5lZWREcmFpbikpIG9uZHJhaW4oKTtcbiAgfVxuXG4gIC8vIElmIHRoZSB1c2VyIHB1c2hlcyBtb3JlIGRhdGEgd2hpbGUgd2UncmUgd3JpdGluZyB0byBkZXN0IHRoZW4gd2UnbGwgZW5kIHVwXG4gIC8vIGluIG9uZGF0YSBhZ2Fpbi4gSG93ZXZlciwgd2Ugb25seSB3YW50IHRvIGluY3JlYXNlIGF3YWl0RHJhaW4gb25jZSBiZWNhdXNlXG4gIC8vIGRlc3Qgd2lsbCBvbmx5IGVtaXQgb25lICdkcmFpbicgZXZlbnQgZm9yIHRoZSBtdWx0aXBsZSB3cml0ZXMuXG4gIC8vID0+IEludHJvZHVjZSBhIGd1YXJkIG9uIGluY3JlYXNpbmcgYXdhaXREcmFpbi5cbiAgdmFyIGluY3JlYXNlZEF3YWl0RHJhaW4gPSBmYWxzZTtcbiAgc3JjLm9uKCdkYXRhJywgb25kYXRhKTtcbiAgZnVuY3Rpb24gb25kYXRhKGNodW5rKSB7XG4gICAgZGVidWcoJ29uZGF0YScpO1xuICAgIGluY3JlYXNlZEF3YWl0RHJhaW4gPSBmYWxzZTtcbiAgICB2YXIgcmV0ID0gZGVzdC53cml0ZShjaHVuayk7XG4gICAgaWYgKGZhbHNlID09PSByZXQgJiYgIWluY3JlYXNlZEF3YWl0RHJhaW4pIHtcbiAgICAgIC8vIElmIHRoZSB1c2VyIHVucGlwZWQgZHVyaW5nIGBkZXN0LndyaXRlKClgLCBpdCBpcyBwb3NzaWJsZVxuICAgICAgLy8gdG8gZ2V0IHN0dWNrIGluIGEgcGVybWFuZW50bHkgcGF1c2VkIHN0YXRlIGlmIHRoYXQgd3JpdGVcbiAgICAgIC8vIGFsc28gcmV0dXJuZWQgZmFsc2UuXG4gICAgICAvLyA9PiBDaGVjayB3aGV0aGVyIGBkZXN0YCBpcyBzdGlsbCBhIHBpcGluZyBkZXN0aW5hdGlvbi5cbiAgICAgIGlmICgoc3RhdGUucGlwZXNDb3VudCA9PT0gMSAmJiBzdGF0ZS5waXBlcyA9PT0gZGVzdCB8fCBzdGF0ZS5waXBlc0NvdW50ID4gMSAmJiBpbmRleE9mKHN0YXRlLnBpcGVzLCBkZXN0KSAhPT0gLTEpICYmICFjbGVhbmVkVXApIHtcbiAgICAgICAgZGVidWcoJ2ZhbHNlIHdyaXRlIHJlc3BvbnNlLCBwYXVzZScsIHNyYy5fcmVhZGFibGVTdGF0ZS5hd2FpdERyYWluKTtcbiAgICAgICAgc3JjLl9yZWFkYWJsZVN0YXRlLmF3YWl0RHJhaW4rKztcbiAgICAgICAgaW5jcmVhc2VkQXdhaXREcmFpbiA9IHRydWU7XG4gICAgICB9XG4gICAgICBzcmMucGF1c2UoKTtcbiAgICB9XG4gIH1cblxuICAvLyBpZiB0aGUgZGVzdCBoYXMgYW4gZXJyb3IsIHRoZW4gc3RvcCBwaXBpbmcgaW50byBpdC5cbiAgLy8gaG93ZXZlciwgZG9uJ3Qgc3VwcHJlc3MgdGhlIHRocm93aW5nIGJlaGF2aW9yIGZvciB0aGlzLlxuICBmdW5jdGlvbiBvbmVycm9yKGVyKSB7XG4gICAgZGVidWcoJ29uZXJyb3InLCBlcik7XG4gICAgdW5waXBlKCk7XG4gICAgZGVzdC5yZW1vdmVMaXN0ZW5lcignZXJyb3InLCBvbmVycm9yKTtcbiAgICBpZiAoRUVsaXN0ZW5lckNvdW50KGRlc3QsICdlcnJvcicpID09PSAwKSBkZXN0LmVtaXQoJ2Vycm9yJywgZXIpO1xuICB9XG5cbiAgLy8gTWFrZSBzdXJlIG91ciBlcnJvciBoYW5kbGVyIGlzIGF0dGFjaGVkIGJlZm9yZSB1c2VybGFuZCBvbmVzLlxuICBwcmVwZW5kTGlzdGVuZXIoZGVzdCwgJ2Vycm9yJywgb25lcnJvcik7XG5cbiAgLy8gQm90aCBjbG9zZSBhbmQgZmluaXNoIHNob3VsZCB0cmlnZ2VyIHVucGlwZSwgYnV0IG9ubHkgb25jZS5cbiAgZnVuY3Rpb24gb25jbG9zZSgpIHtcbiAgICBkZXN0LnJlbW92ZUxpc3RlbmVyKCdmaW5pc2gnLCBvbmZpbmlzaCk7XG4gICAgdW5waXBlKCk7XG4gIH1cbiAgZGVzdC5vbmNlKCdjbG9zZScsIG9uY2xvc2UpO1xuICBmdW5jdGlvbiBvbmZpbmlzaCgpIHtcbiAgICBkZWJ1Zygnb25maW5pc2gnKTtcbiAgICBkZXN0LnJlbW92ZUxpc3RlbmVyKCdjbG9zZScsIG9uY2xvc2UpO1xuICAgIHVucGlwZSgpO1xuICB9XG4gIGRlc3Qub25jZSgnZmluaXNoJywgb25maW5pc2gpO1xuXG4gIGZ1bmN0aW9uIHVucGlwZSgpIHtcbiAgICBkZWJ1ZygndW5waXBlJyk7XG4gICAgc3JjLnVucGlwZShkZXN0KTtcbiAgfVxuXG4gIC8vIHRlbGwgdGhlIGRlc3QgdGhhdCBpdCdzIGJlaW5nIHBpcGVkIHRvXG4gIGRlc3QuZW1pdCgncGlwZScsIHNyYyk7XG5cbiAgLy8gc3RhcnQgdGhlIGZsb3cgaWYgaXQgaGFzbid0IGJlZW4gc3RhcnRlZCBhbHJlYWR5LlxuICBpZiAoIXN0YXRlLmZsb3dpbmcpIHtcbiAgICBkZWJ1ZygncGlwZSByZXN1bWUnKTtcbiAgICBzcmMucmVzdW1lKCk7XG4gIH1cblxuICByZXR1cm4gZGVzdDtcbn07XG5cbmZ1bmN0aW9uIHBpcGVPbkRyYWluKHNyYykge1xuICByZXR1cm4gZnVuY3Rpb24gKCkge1xuICAgIHZhciBzdGF0ZSA9IHNyYy5fcmVhZGFibGVTdGF0ZTtcbiAgICBkZWJ1ZygncGlwZU9uRHJhaW4nLCBzdGF0ZS5hd2FpdERyYWluKTtcbiAgICBpZiAoc3RhdGUuYXdhaXREcmFpbikgc3RhdGUuYXdhaXREcmFpbi0tO1xuICAgIGlmIChzdGF0ZS5hd2FpdERyYWluID09PSAwICYmIEVFbGlzdGVuZXJDb3VudChzcmMsICdkYXRhJykpIHtcbiAgICAgIHN0YXRlLmZsb3dpbmcgPSB0cnVlO1xuICAgICAgZmxvdyhzcmMpO1xuICAgIH1cbiAgfTtcbn1cblxuUmVhZGFibGUucHJvdG90eXBlLnVucGlwZSA9IGZ1bmN0aW9uIChkZXN0KSB7XG4gIHZhciBzdGF0ZSA9IHRoaXMuX3JlYWRhYmxlU3RhdGU7XG4gIHZhciB1bnBpcGVJbmZvID0geyBoYXNVbnBpcGVkOiBmYWxzZSB9O1xuXG4gIC8vIGlmIHdlJ3JlIG5vdCBwaXBpbmcgYW55d2hlcmUsIHRoZW4gZG8gbm90aGluZy5cbiAgaWYgKHN0YXRlLnBpcGVzQ291bnQgPT09IDApIHJldHVybiB0aGlzO1xuXG4gIC8vIGp1c3Qgb25lIGRlc3RpbmF0aW9uLiAgbW9zdCBjb21tb24gY2FzZS5cbiAgaWYgKHN0YXRlLnBpcGVzQ291bnQgPT09IDEpIHtcbiAgICAvLyBwYXNzZWQgaW4gb25lLCBidXQgaXQncyBub3QgdGhlIHJpZ2h0IG9uZS5cbiAgICBpZiAoZGVzdCAmJiBkZXN0ICE9PSBzdGF0ZS5waXBlcykgcmV0dXJuIHRoaXM7XG5cbiAgICBpZiAoIWRlc3QpIGRlc3QgPSBzdGF0ZS5waXBlcztcblxuICAgIC8vIGdvdCBhIG1hdGNoLlxuICAgIHN0YXRlLnBpcGVzID0gbnVsbDtcbiAgICBzdGF0ZS5waXBlc0NvdW50ID0gMDtcbiAgICBzdGF0ZS5mbG93aW5nID0gZmFsc2U7XG4gICAgaWYgKGRlc3QpIGRlc3QuZW1pdCgndW5waXBlJywgdGhpcywgdW5waXBlSW5mbyk7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cblxuICAvLyBzbG93IGNhc2UuIG11bHRpcGxlIHBpcGUgZGVzdGluYXRpb25zLlxuXG4gIGlmICghZGVzdCkge1xuICAgIC8vIHJlbW92ZSBhbGwuXG4gICAgdmFyIGRlc3RzID0gc3RhdGUucGlwZXM7XG4gICAgdmFyIGxlbiA9IHN0YXRlLnBpcGVzQ291bnQ7XG4gICAgc3RhdGUucGlwZXMgPSBudWxsO1xuICAgIHN0YXRlLnBpcGVzQ291bnQgPSAwO1xuICAgIHN0YXRlLmZsb3dpbmcgPSBmYWxzZTtcblxuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgIGRlc3RzW2ldLmVtaXQoJ3VucGlwZScsIHRoaXMsIHVucGlwZUluZm8pO1xuICAgIH1yZXR1cm4gdGhpcztcbiAgfVxuXG4gIC8vIHRyeSB0byBmaW5kIHRoZSByaWdodCBvbmUuXG4gIHZhciBpbmRleCA9IGluZGV4T2Yoc3RhdGUucGlwZXMsIGRlc3QpO1xuICBpZiAoaW5kZXggPT09IC0xKSByZXR1cm4gdGhpcztcblxuICBzdGF0ZS5waXBlcy5zcGxpY2UoaW5kZXgsIDEpO1xuICBzdGF0ZS5waXBlc0NvdW50IC09IDE7XG4gIGlmIChzdGF0ZS5waXBlc0NvdW50ID09PSAxKSBzdGF0ZS5waXBlcyA9IHN0YXRlLnBpcGVzWzBdO1xuXG4gIGRlc3QuZW1pdCgndW5waXBlJywgdGhpcywgdW5waXBlSW5mbyk7XG5cbiAgcmV0dXJuIHRoaXM7XG59O1xuXG4vLyBzZXQgdXAgZGF0YSBldmVudHMgaWYgdGhleSBhcmUgYXNrZWQgZm9yXG4vLyBFbnN1cmUgcmVhZGFibGUgbGlzdGVuZXJzIGV2ZW50dWFsbHkgZ2V0IHNvbWV0aGluZ1xuUmVhZGFibGUucHJvdG90eXBlLm9uID0gZnVuY3Rpb24gKGV2LCBmbikge1xuICB2YXIgcmVzID0gU3RyZWFtLnByb3RvdHlwZS5vbi5jYWxsKHRoaXMsIGV2LCBmbik7XG5cbiAgaWYgKGV2ID09PSAnZGF0YScpIHtcbiAgICAvLyBTdGFydCBmbG93aW5nIG9uIG5leHQgdGljayBpZiBzdHJlYW0gaXNuJ3QgZXhwbGljaXRseSBwYXVzZWRcbiAgICBpZiAodGhpcy5fcmVhZGFibGVTdGF0ZS5mbG93aW5nICE9PSBmYWxzZSkgdGhpcy5yZXN1bWUoKTtcbiAgfSBlbHNlIGlmIChldiA9PT0gJ3JlYWRhYmxlJykge1xuICAgIHZhciBzdGF0ZSA9IHRoaXMuX3JlYWRhYmxlU3RhdGU7XG4gICAgaWYgKCFzdGF0ZS5lbmRFbWl0dGVkICYmICFzdGF0ZS5yZWFkYWJsZUxpc3RlbmluZykge1xuICAgICAgc3RhdGUucmVhZGFibGVMaXN0ZW5pbmcgPSBzdGF0ZS5uZWVkUmVhZGFibGUgPSB0cnVlO1xuICAgICAgc3RhdGUuZW1pdHRlZFJlYWRhYmxlID0gZmFsc2U7XG4gICAgICBpZiAoIXN0YXRlLnJlYWRpbmcpIHtcbiAgICAgICAgcG5hLm5leHRUaWNrKG5SZWFkaW5nTmV4dFRpY2ssIHRoaXMpO1xuICAgICAgfSBlbHNlIGlmIChzdGF0ZS5sZW5ndGgpIHtcbiAgICAgICAgZW1pdFJlYWRhYmxlKHRoaXMpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIHJldHVybiByZXM7XG59O1xuUmVhZGFibGUucHJvdG90eXBlLmFkZExpc3RlbmVyID0gUmVhZGFibGUucHJvdG90eXBlLm9uO1xuXG5mdW5jdGlvbiBuUmVhZGluZ05leHRUaWNrKHNlbGYpIHtcbiAgZGVidWcoJ3JlYWRhYmxlIG5leHR0aWNrIHJlYWQgMCcpO1xuICBzZWxmLnJlYWQoMCk7XG59XG5cbi8vIHBhdXNlKCkgYW5kIHJlc3VtZSgpIGFyZSByZW1uYW50cyBvZiB0aGUgbGVnYWN5IHJlYWRhYmxlIHN0cmVhbSBBUElcbi8vIElmIHRoZSB1c2VyIHVzZXMgdGhlbSwgdGhlbiBzd2l0Y2ggaW50byBvbGQgbW9kZS5cblJlYWRhYmxlLnByb3RvdHlwZS5yZXN1bWUgPSBmdW5jdGlvbiAoKSB7XG4gIHZhciBzdGF0ZSA9IHRoaXMuX3JlYWRhYmxlU3RhdGU7XG4gIGlmICghc3RhdGUuZmxvd2luZykge1xuICAgIGRlYnVnKCdyZXN1bWUnKTtcbiAgICBzdGF0ZS5mbG93aW5nID0gdHJ1ZTtcbiAgICByZXN1bWUodGhpcywgc3RhdGUpO1xuICB9XG4gIHJldHVybiB0aGlzO1xufTtcblxuZnVuY3Rpb24gcmVzdW1lKHN0cmVhbSwgc3RhdGUpIHtcbiAgaWYgKCFzdGF0ZS5yZXN1bWVTY2hlZHVsZWQpIHtcbiAgICBzdGF0ZS5yZXN1bWVTY2hlZHVsZWQgPSB0cnVlO1xuICAgIHBuYS5uZXh0VGljayhyZXN1bWVfLCBzdHJlYW0sIHN0YXRlKTtcbiAgfVxufVxuXG5mdW5jdGlvbiByZXN1bWVfKHN0cmVhbSwgc3RhdGUpIHtcbiAgaWYgKCFzdGF0ZS5yZWFkaW5nKSB7XG4gICAgZGVidWcoJ3Jlc3VtZSByZWFkIDAnKTtcbiAgICBzdHJlYW0ucmVhZCgwKTtcbiAgfVxuXG4gIHN0YXRlLnJlc3VtZVNjaGVkdWxlZCA9IGZhbHNlO1xuICBzdGF0ZS5hd2FpdERyYWluID0gMDtcbiAgc3RyZWFtLmVtaXQoJ3Jlc3VtZScpO1xuICBmbG93KHN0cmVhbSk7XG4gIGlmIChzdGF0ZS5mbG93aW5nICYmICFzdGF0ZS5yZWFkaW5nKSBzdHJlYW0ucmVhZCgwKTtcbn1cblxuUmVhZGFibGUucHJvdG90eXBlLnBhdXNlID0gZnVuY3Rpb24gKCkge1xuICBkZWJ1ZygnY2FsbCBwYXVzZSBmbG93aW5nPSVqJywgdGhpcy5fcmVhZGFibGVTdGF0ZS5mbG93aW5nKTtcbiAgaWYgKGZhbHNlICE9PSB0aGlzLl9yZWFkYWJsZVN0YXRlLmZsb3dpbmcpIHtcbiAgICBkZWJ1ZygncGF1c2UnKTtcbiAgICB0aGlzLl9yZWFkYWJsZVN0YXRlLmZsb3dpbmcgPSBmYWxzZTtcbiAgICB0aGlzLmVtaXQoJ3BhdXNlJyk7XG4gIH1cbiAgcmV0dXJuIHRoaXM7XG59O1xuXG5mdW5jdGlvbiBmbG93KHN0cmVhbSkge1xuICB2YXIgc3RhdGUgPSBzdHJlYW0uX3JlYWRhYmxlU3RhdGU7XG4gIGRlYnVnKCdmbG93Jywgc3RhdGUuZmxvd2luZyk7XG4gIHdoaWxlIChzdGF0ZS5mbG93aW5nICYmIHN0cmVhbS5yZWFkKCkgIT09IG51bGwpIHt9XG59XG5cbi8vIHdyYXAgYW4gb2xkLXN0eWxlIHN0cmVhbSBhcyB0aGUgYXN5bmMgZGF0YSBzb3VyY2UuXG4vLyBUaGlzIGlzICpub3QqIHBhcnQgb2YgdGhlIHJlYWRhYmxlIHN0cmVhbSBpbnRlcmZhY2UuXG4vLyBJdCBpcyBhbiB1Z2x5IHVuZm9ydHVuYXRlIG1lc3Mgb2YgaGlzdG9yeS5cblJlYWRhYmxlLnByb3RvdHlwZS53cmFwID0gZnVuY3Rpb24gKHN0cmVhbSkge1xuICB2YXIgX3RoaXMgPSB0aGlzO1xuXG4gIHZhciBzdGF0ZSA9IHRoaXMuX3JlYWRhYmxlU3RhdGU7XG4gIHZhciBwYXVzZWQgPSBmYWxzZTtcblxuICBzdHJlYW0ub24oJ2VuZCcsIGZ1bmN0aW9uICgpIHtcbiAgICBkZWJ1Zygnd3JhcHBlZCBlbmQnKTtcbiAgICBpZiAoc3RhdGUuZGVjb2RlciAmJiAhc3RhdGUuZW5kZWQpIHtcbiAgICAgIHZhciBjaHVuayA9IHN0YXRlLmRlY29kZXIuZW5kKCk7XG4gICAgICBpZiAoY2h1bmsgJiYgY2h1bmsubGVuZ3RoKSBfdGhpcy5wdXNoKGNodW5rKTtcbiAgICB9XG5cbiAgICBfdGhpcy5wdXNoKG51bGwpO1xuICB9KTtcblxuICBzdHJlYW0ub24oJ2RhdGEnLCBmdW5jdGlvbiAoY2h1bmspIHtcbiAgICBkZWJ1Zygnd3JhcHBlZCBkYXRhJyk7XG4gICAgaWYgKHN0YXRlLmRlY29kZXIpIGNodW5rID0gc3RhdGUuZGVjb2Rlci53cml0ZShjaHVuayk7XG5cbiAgICAvLyBkb24ndCBza2lwIG92ZXIgZmFsc3kgdmFsdWVzIGluIG9iamVjdE1vZGVcbiAgICBpZiAoc3RhdGUub2JqZWN0TW9kZSAmJiAoY2h1bmsgPT09IG51bGwgfHwgY2h1bmsgPT09IHVuZGVmaW5lZCkpIHJldHVybjtlbHNlIGlmICghc3RhdGUub2JqZWN0TW9kZSAmJiAoIWNodW5rIHx8ICFjaHVuay5sZW5ndGgpKSByZXR1cm47XG5cbiAgICB2YXIgcmV0ID0gX3RoaXMucHVzaChjaHVuayk7XG4gICAgaWYgKCFyZXQpIHtcbiAgICAgIHBhdXNlZCA9IHRydWU7XG4gICAgICBzdHJlYW0ucGF1c2UoKTtcbiAgICB9XG4gIH0pO1xuXG4gIC8vIHByb3h5IGFsbCB0aGUgb3RoZXIgbWV0aG9kcy5cbiAgLy8gaW1wb3J0YW50IHdoZW4gd3JhcHBpbmcgZmlsdGVycyBhbmQgZHVwbGV4ZXMuXG4gIGZvciAodmFyIGkgaW4gc3RyZWFtKSB7XG4gICAgaWYgKHRoaXNbaV0gPT09IHVuZGVmaW5lZCAmJiB0eXBlb2Ygc3RyZWFtW2ldID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICB0aGlzW2ldID0gZnVuY3Rpb24gKG1ldGhvZCkge1xuICAgICAgICByZXR1cm4gZnVuY3Rpb24gKCkge1xuICAgICAgICAgIHJldHVybiBzdHJlYW1bbWV0aG9kXS5hcHBseShzdHJlYW0sIGFyZ3VtZW50cyk7XG4gICAgICAgIH07XG4gICAgICB9KGkpO1xuICAgIH1cbiAgfVxuXG4gIC8vIHByb3h5IGNlcnRhaW4gaW1wb3J0YW50IGV2ZW50cy5cbiAgZm9yICh2YXIgbiA9IDA7IG4gPCBrUHJveHlFdmVudHMubGVuZ3RoOyBuKyspIHtcbiAgICBzdHJlYW0ub24oa1Byb3h5RXZlbnRzW25dLCB0aGlzLmVtaXQuYmluZCh0aGlzLCBrUHJveHlFdmVudHNbbl0pKTtcbiAgfVxuXG4gIC8vIHdoZW4gd2UgdHJ5IHRvIGNvbnN1bWUgc29tZSBtb3JlIGJ5dGVzLCBzaW1wbHkgdW5wYXVzZSB0aGVcbiAgLy8gdW5kZXJseWluZyBzdHJlYW0uXG4gIHRoaXMuX3JlYWQgPSBmdW5jdGlvbiAobikge1xuICAgIGRlYnVnKCd3cmFwcGVkIF9yZWFkJywgbik7XG4gICAgaWYgKHBhdXNlZCkge1xuICAgICAgcGF1c2VkID0gZmFsc2U7XG4gICAgICBzdHJlYW0ucmVzdW1lKCk7XG4gICAgfVxuICB9O1xuXG4gIHJldHVybiB0aGlzO1xufTtcblxuT2JqZWN0LmRlZmluZVByb3BlcnR5KFJlYWRhYmxlLnByb3RvdHlwZSwgJ3JlYWRhYmxlSGlnaFdhdGVyTWFyaycsIHtcbiAgLy8gbWFraW5nIGl0IGV4cGxpY2l0IHRoaXMgcHJvcGVydHkgaXMgbm90IGVudW1lcmFibGVcbiAgLy8gYmVjYXVzZSBvdGhlcndpc2Ugc29tZSBwcm90b3R5cGUgbWFuaXB1bGF0aW9uIGluXG4gIC8vIHVzZXJsYW5kIHdpbGwgZmFpbFxuICBlbnVtZXJhYmxlOiBmYWxzZSxcbiAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIHRoaXMuX3JlYWRhYmxlU3RhdGUuaGlnaFdhdGVyTWFyaztcbiAgfVxufSk7XG5cbi8vIGV4cG9zZWQgZm9yIHRlc3RpbmcgcHVycG9zZXMgb25seS5cblJlYWRhYmxlLl9mcm9tTGlzdCA9IGZyb21MaXN0O1xuXG4vLyBQbHVjayBvZmYgbiBieXRlcyBmcm9tIGFuIGFycmF5IG9mIGJ1ZmZlcnMuXG4vLyBMZW5ndGggaXMgdGhlIGNvbWJpbmVkIGxlbmd0aHMgb2YgYWxsIHRoZSBidWZmZXJzIGluIHRoZSBsaXN0LlxuLy8gVGhpcyBmdW5jdGlvbiBpcyBkZXNpZ25lZCB0byBiZSBpbmxpbmFibGUsIHNvIHBsZWFzZSB0YWtlIGNhcmUgd2hlbiBtYWtpbmdcbi8vIGNoYW5nZXMgdG8gdGhlIGZ1bmN0aW9uIGJvZHkuXG5mdW5jdGlvbiBmcm9tTGlzdChuLCBzdGF0ZSkge1xuICAvLyBub3RoaW5nIGJ1ZmZlcmVkXG4gIGlmIChzdGF0ZS5sZW5ndGggPT09IDApIHJldHVybiBudWxsO1xuXG4gIHZhciByZXQ7XG4gIGlmIChzdGF0ZS5vYmplY3RNb2RlKSByZXQgPSBzdGF0ZS5idWZmZXIuc2hpZnQoKTtlbHNlIGlmICghbiB8fCBuID49IHN0YXRlLmxlbmd0aCkge1xuICAgIC8vIHJlYWQgaXQgYWxsLCB0cnVuY2F0ZSB0aGUgbGlzdFxuICAgIGlmIChzdGF0ZS5kZWNvZGVyKSByZXQgPSBzdGF0ZS5idWZmZXIuam9pbignJyk7ZWxzZSBpZiAoc3RhdGUuYnVmZmVyLmxlbmd0aCA9PT0gMSkgcmV0ID0gc3RhdGUuYnVmZmVyLmhlYWQuZGF0YTtlbHNlIHJldCA9IHN0YXRlLmJ1ZmZlci5jb25jYXQoc3RhdGUubGVuZ3RoKTtcbiAgICBzdGF0ZS5idWZmZXIuY2xlYXIoKTtcbiAgfSBlbHNlIHtcbiAgICAvLyByZWFkIHBhcnQgb2YgbGlzdFxuICAgIHJldCA9IGZyb21MaXN0UGFydGlhbChuLCBzdGF0ZS5idWZmZXIsIHN0YXRlLmRlY29kZXIpO1xuICB9XG5cbiAgcmV0dXJuIHJldDtcbn1cblxuLy8gRXh0cmFjdHMgb25seSBlbm91Z2ggYnVmZmVyZWQgZGF0YSB0byBzYXRpc2Z5IHRoZSBhbW91bnQgcmVxdWVzdGVkLlxuLy8gVGhpcyBmdW5jdGlvbiBpcyBkZXNpZ25lZCB0byBiZSBpbmxpbmFibGUsIHNvIHBsZWFzZSB0YWtlIGNhcmUgd2hlbiBtYWtpbmdcbi8vIGNoYW5nZXMgdG8gdGhlIGZ1bmN0aW9uIGJvZHkuXG5mdW5jdGlvbiBmcm9tTGlzdFBhcnRpYWwobiwgbGlzdCwgaGFzU3RyaW5ncykge1xuICB2YXIgcmV0O1xuICBpZiAobiA8IGxpc3QuaGVhZC5kYXRhLmxlbmd0aCkge1xuICAgIC8vIHNsaWNlIGlzIHRoZSBzYW1lIGZvciBidWZmZXJzIGFuZCBzdHJpbmdzXG4gICAgcmV0ID0gbGlzdC5oZWFkLmRhdGEuc2xpY2UoMCwgbik7XG4gICAgbGlzdC5oZWFkLmRhdGEgPSBsaXN0LmhlYWQuZGF0YS5zbGljZShuKTtcbiAgfSBlbHNlIGlmIChuID09PSBsaXN0LmhlYWQuZGF0YS5sZW5ndGgpIHtcbiAgICAvLyBmaXJzdCBjaHVuayBpcyBhIHBlcmZlY3QgbWF0Y2hcbiAgICByZXQgPSBsaXN0LnNoaWZ0KCk7XG4gIH0gZWxzZSB7XG4gICAgLy8gcmVzdWx0IHNwYW5zIG1vcmUgdGhhbiBvbmUgYnVmZmVyXG4gICAgcmV0ID0gaGFzU3RyaW5ncyA/IGNvcHlGcm9tQnVmZmVyU3RyaW5nKG4sIGxpc3QpIDogY29weUZyb21CdWZmZXIobiwgbGlzdCk7XG4gIH1cbiAgcmV0dXJuIHJldDtcbn1cblxuLy8gQ29waWVzIGEgc3BlY2lmaWVkIGFtb3VudCBvZiBjaGFyYWN0ZXJzIGZyb20gdGhlIGxpc3Qgb2YgYnVmZmVyZWQgZGF0YVxuLy8gY2h1bmtzLlxuLy8gVGhpcyBmdW5jdGlvbiBpcyBkZXNpZ25lZCB0byBiZSBpbmxpbmFibGUsIHNvIHBsZWFzZSB0YWtlIGNhcmUgd2hlbiBtYWtpbmdcbi8vIGNoYW5nZXMgdG8gdGhlIGZ1bmN0aW9uIGJvZHkuXG5mdW5jdGlvbiBjb3B5RnJvbUJ1ZmZlclN0cmluZyhuLCBsaXN0KSB7XG4gIHZhciBwID0gbGlzdC5oZWFkO1xuICB2YXIgYyA9IDE7XG4gIHZhciByZXQgPSBwLmRhdGE7XG4gIG4gLT0gcmV0Lmxlbmd0aDtcbiAgd2hpbGUgKHAgPSBwLm5leHQpIHtcbiAgICB2YXIgc3RyID0gcC5kYXRhO1xuICAgIHZhciBuYiA9IG4gPiBzdHIubGVuZ3RoID8gc3RyLmxlbmd0aCA6IG47XG4gICAgaWYgKG5iID09PSBzdHIubGVuZ3RoKSByZXQgKz0gc3RyO2Vsc2UgcmV0ICs9IHN0ci5zbGljZSgwLCBuKTtcbiAgICBuIC09IG5iO1xuICAgIGlmIChuID09PSAwKSB7XG4gICAgICBpZiAobmIgPT09IHN0ci5sZW5ndGgpIHtcbiAgICAgICAgKytjO1xuICAgICAgICBpZiAocC5uZXh0KSBsaXN0LmhlYWQgPSBwLm5leHQ7ZWxzZSBsaXN0LmhlYWQgPSBsaXN0LnRhaWwgPSBudWxsO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgbGlzdC5oZWFkID0gcDtcbiAgICAgICAgcC5kYXRhID0gc3RyLnNsaWNlKG5iKTtcbiAgICAgIH1cbiAgICAgIGJyZWFrO1xuICAgIH1cbiAgICArK2M7XG4gIH1cbiAgbGlzdC5sZW5ndGggLT0gYztcbiAgcmV0dXJuIHJldDtcbn1cblxuLy8gQ29waWVzIGEgc3BlY2lmaWVkIGFtb3VudCBvZiBieXRlcyBmcm9tIHRoZSBsaXN0IG9mIGJ1ZmZlcmVkIGRhdGEgY2h1bmtzLlxuLy8gVGhpcyBmdW5jdGlvbiBpcyBkZXNpZ25lZCB0byBiZSBpbmxpbmFibGUsIHNvIHBsZWFzZSB0YWtlIGNhcmUgd2hlbiBtYWtpbmdcbi8vIGNoYW5nZXMgdG8gdGhlIGZ1bmN0aW9uIGJvZHkuXG5mdW5jdGlvbiBjb3B5RnJvbUJ1ZmZlcihuLCBsaXN0KSB7XG4gIHZhciByZXQgPSBCdWZmZXIuYWxsb2NVbnNhZmUobik7XG4gIHZhciBwID0gbGlzdC5oZWFkO1xuICB2YXIgYyA9IDE7XG4gIHAuZGF0YS5jb3B5KHJldCk7XG4gIG4gLT0gcC5kYXRhLmxlbmd0aDtcbiAgd2hpbGUgKHAgPSBwLm5leHQpIHtcbiAgICB2YXIgYnVmID0gcC5kYXRhO1xuICAgIHZhciBuYiA9IG4gPiBidWYubGVuZ3RoID8gYnVmLmxlbmd0aCA6IG47XG4gICAgYnVmLmNvcHkocmV0LCByZXQubGVuZ3RoIC0gbiwgMCwgbmIpO1xuICAgIG4gLT0gbmI7XG4gICAgaWYgKG4gPT09IDApIHtcbiAgICAgIGlmIChuYiA9PT0gYnVmLmxlbmd0aCkge1xuICAgICAgICArK2M7XG4gICAgICAgIGlmIChwLm5leHQpIGxpc3QuaGVhZCA9IHAubmV4dDtlbHNlIGxpc3QuaGVhZCA9IGxpc3QudGFpbCA9IG51bGw7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBsaXN0LmhlYWQgPSBwO1xuICAgICAgICBwLmRhdGEgPSBidWYuc2xpY2UobmIpO1xuICAgICAgfVxuICAgICAgYnJlYWs7XG4gICAgfVxuICAgICsrYztcbiAgfVxuICBsaXN0Lmxlbmd0aCAtPSBjO1xuICByZXR1cm4gcmV0O1xufVxuXG5mdW5jdGlvbiBlbmRSZWFkYWJsZShzdHJlYW0pIHtcbiAgdmFyIHN0YXRlID0gc3RyZWFtLl9yZWFkYWJsZVN0YXRlO1xuXG4gIC8vIElmIHdlIGdldCBoZXJlIGJlZm9yZSBjb25zdW1pbmcgYWxsIHRoZSBieXRlcywgdGhlbiB0aGF0IGlzIGFcbiAgLy8gYnVnIGluIG5vZGUuICBTaG91bGQgbmV2ZXIgaGFwcGVuLlxuICBpZiAoc3RhdGUubGVuZ3RoID4gMCkgdGhyb3cgbmV3IEVycm9yKCdcImVuZFJlYWRhYmxlKClcIiBjYWxsZWQgb24gbm9uLWVtcHR5IHN0cmVhbScpO1xuXG4gIGlmICghc3RhdGUuZW5kRW1pdHRlZCkge1xuICAgIHN0YXRlLmVuZGVkID0gdHJ1ZTtcbiAgICBwbmEubmV4dFRpY2soZW5kUmVhZGFibGVOVCwgc3RhdGUsIHN0cmVhbSk7XG4gIH1cbn1cblxuZnVuY3Rpb24gZW5kUmVhZGFibGVOVChzdGF0ZSwgc3RyZWFtKSB7XG4gIC8vIENoZWNrIHRoYXQgd2UgZGlkbid0IGdldCBvbmUgbGFzdCB1bnNoaWZ0LlxuICBpZiAoIXN0YXRlLmVuZEVtaXR0ZWQgJiYgc3RhdGUubGVuZ3RoID09PSAwKSB7XG4gICAgc3RhdGUuZW5kRW1pdHRlZCA9IHRydWU7XG4gICAgc3RyZWFtLnJlYWRhYmxlID0gZmFsc2U7XG4gICAgc3RyZWFtLmVtaXQoJ2VuZCcpO1xuICB9XG59XG5cbmZ1bmN0aW9uIGluZGV4T2YoeHMsIHgpIHtcbiAgZm9yICh2YXIgaSA9IDAsIGwgPSB4cy5sZW5ndGg7IGkgPCBsOyBpKyspIHtcbiAgICBpZiAoeHNbaV0gPT09IHgpIHJldHVybiBpO1xuICB9XG4gIHJldHVybiAtMTtcbn0iLCIvLyBDb3B5cmlnaHQgSm95ZW50LCBJbmMuIGFuZCBvdGhlciBOb2RlIGNvbnRyaWJ1dG9ycy5cbi8vXG4vLyBQZXJtaXNzaW9uIGlzIGhlcmVieSBncmFudGVkLCBmcmVlIG9mIGNoYXJnZSwgdG8gYW55IHBlcnNvbiBvYnRhaW5pbmcgYVxuLy8gY29weSBvZiB0aGlzIHNvZnR3YXJlIGFuZCBhc3NvY2lhdGVkIGRvY3VtZW50YXRpb24gZmlsZXMgKHRoZVxuLy8gXCJTb2Z0d2FyZVwiKSwgdG8gZGVhbCBpbiB0aGUgU29mdHdhcmUgd2l0aG91dCByZXN0cmljdGlvbiwgaW5jbHVkaW5nXG4vLyB3aXRob3V0IGxpbWl0YXRpb24gdGhlIHJpZ2h0cyB0byB1c2UsIGNvcHksIG1vZGlmeSwgbWVyZ2UsIHB1Ymxpc2gsXG4vLyBkaXN0cmlidXRlLCBzdWJsaWNlbnNlLCBhbmQvb3Igc2VsbCBjb3BpZXMgb2YgdGhlIFNvZnR3YXJlLCBhbmQgdG8gcGVybWl0XG4vLyBwZXJzb25zIHRvIHdob20gdGhlIFNvZnR3YXJlIGlzIGZ1cm5pc2hlZCB0byBkbyBzbywgc3ViamVjdCB0byB0aGVcbi8vIGZvbGxvd2luZyBjb25kaXRpb25zOlxuLy9cbi8vIFRoZSBhYm92ZSBjb3B5cmlnaHQgbm90aWNlIGFuZCB0aGlzIHBlcm1pc3Npb24gbm90aWNlIHNoYWxsIGJlIGluY2x1ZGVkXG4vLyBpbiBhbGwgY29waWVzIG9yIHN1YnN0YW50aWFsIHBvcnRpb25zIG9mIHRoZSBTb2Z0d2FyZS5cbi8vXG4vLyBUSEUgU09GVFdBUkUgSVMgUFJPVklERUQgXCJBUyBJU1wiLCBXSVRIT1VUIFdBUlJBTlRZIE9GIEFOWSBLSU5ELCBFWFBSRVNTXG4vLyBPUiBJTVBMSUVELCBJTkNMVURJTkcgQlVUIE5PVCBMSU1JVEVEIFRPIFRIRSBXQVJSQU5USUVTIE9GXG4vLyBNRVJDSEFOVEFCSUxJVFksIEZJVE5FU1MgRk9SIEEgUEFSVElDVUxBUiBQVVJQT1NFIEFORCBOT05JTkZSSU5HRU1FTlQuIElOXG4vLyBOTyBFVkVOVCBTSEFMTCBUSEUgQVVUSE9SUyBPUiBDT1BZUklHSFQgSE9MREVSUyBCRSBMSUFCTEUgRk9SIEFOWSBDTEFJTSxcbi8vIERBTUFHRVMgT1IgT1RIRVIgTElBQklMSVRZLCBXSEVUSEVSIElOIEFOIEFDVElPTiBPRiBDT05UUkFDVCwgVE9SVCBPUlxuLy8gT1RIRVJXSVNFLCBBUklTSU5HIEZST00sIE9VVCBPRiBPUiBJTiBDT05ORUNUSU9OIFdJVEggVEhFIFNPRlRXQVJFIE9SIFRIRVxuLy8gVVNFIE9SIE9USEVSIERFQUxJTkdTIElOIFRIRSBTT0ZUV0FSRS5cblxuLy8gYSB0cmFuc2Zvcm0gc3RyZWFtIGlzIGEgcmVhZGFibGUvd3JpdGFibGUgc3RyZWFtIHdoZXJlIHlvdSBkb1xuLy8gc29tZXRoaW5nIHdpdGggdGhlIGRhdGEuICBTb21ldGltZXMgaXQncyBjYWxsZWQgYSBcImZpbHRlclwiLFxuLy8gYnV0IHRoYXQncyBub3QgYSBncmVhdCBuYW1lIGZvciBpdCwgc2luY2UgdGhhdCBpbXBsaWVzIGEgdGhpbmcgd2hlcmVcbi8vIHNvbWUgYml0cyBwYXNzIHRocm91Z2gsIGFuZCBvdGhlcnMgYXJlIHNpbXBseSBpZ25vcmVkLiAgKFRoYXQgd291bGRcbi8vIGJlIGEgdmFsaWQgZXhhbXBsZSBvZiBhIHRyYW5zZm9ybSwgb2YgY291cnNlLilcbi8vXG4vLyBXaGlsZSB0aGUgb3V0cHV0IGlzIGNhdXNhbGx5IHJlbGF0ZWQgdG8gdGhlIGlucHV0LCBpdCdzIG5vdCBhXG4vLyBuZWNlc3NhcmlseSBzeW1tZXRyaWMgb3Igc3luY2hyb25vdXMgdHJhbnNmb3JtYXRpb24uICBGb3IgZXhhbXBsZSxcbi8vIGEgemxpYiBzdHJlYW0gbWlnaHQgdGFrZSBtdWx0aXBsZSBwbGFpbi10ZXh0IHdyaXRlcygpLCBhbmQgdGhlblxuLy8gZW1pdCBhIHNpbmdsZSBjb21wcmVzc2VkIGNodW5rIHNvbWUgdGltZSBpbiB0aGUgZnV0dXJlLlxuLy9cbi8vIEhlcmUncyBob3cgdGhpcyB3b3Jrczpcbi8vXG4vLyBUaGUgVHJhbnNmb3JtIHN0cmVhbSBoYXMgYWxsIHRoZSBhc3BlY3RzIG9mIHRoZSByZWFkYWJsZSBhbmQgd3JpdGFibGVcbi8vIHN0cmVhbSBjbGFzc2VzLiAgV2hlbiB5b3Ugd3JpdGUoY2h1bmspLCB0aGF0IGNhbGxzIF93cml0ZShjaHVuayxjYilcbi8vIGludGVybmFsbHksIGFuZCByZXR1cm5zIGZhbHNlIGlmIHRoZXJlJ3MgYSBsb3Qgb2YgcGVuZGluZyB3cml0ZXNcbi8vIGJ1ZmZlcmVkIHVwLiAgV2hlbiB5b3UgY2FsbCByZWFkKCksIHRoYXQgY2FsbHMgX3JlYWQobikgdW50aWxcbi8vIHRoZXJlJ3MgZW5vdWdoIHBlbmRpbmcgcmVhZGFibGUgZGF0YSBidWZmZXJlZCB1cC5cbi8vXG4vLyBJbiBhIHRyYW5zZm9ybSBzdHJlYW0sIHRoZSB3cml0dGVuIGRhdGEgaXMgcGxhY2VkIGluIGEgYnVmZmVyLiAgV2hlblxuLy8gX3JlYWQobikgaXMgY2FsbGVkLCBpdCB0cmFuc2Zvcm1zIHRoZSBxdWV1ZWQgdXAgZGF0YSwgY2FsbGluZyB0aGVcbi8vIGJ1ZmZlcmVkIF93cml0ZSBjYidzIGFzIGl0IGNvbnN1bWVzIGNodW5rcy4gIElmIGNvbnN1bWluZyBhIHNpbmdsZVxuLy8gd3JpdHRlbiBjaHVuayB3b3VsZCByZXN1bHQgaW4gbXVsdGlwbGUgb3V0cHV0IGNodW5rcywgdGhlbiB0aGUgZmlyc3Rcbi8vIG91dHB1dHRlZCBiaXQgY2FsbHMgdGhlIHJlYWRjYiwgYW5kIHN1YnNlcXVlbnQgY2h1bmtzIGp1c3QgZ28gaW50b1xuLy8gdGhlIHJlYWQgYnVmZmVyLCBhbmQgd2lsbCBjYXVzZSBpdCB0byBlbWl0ICdyZWFkYWJsZScgaWYgbmVjZXNzYXJ5LlxuLy9cbi8vIFRoaXMgd2F5LCBiYWNrLXByZXNzdXJlIGlzIGFjdHVhbGx5IGRldGVybWluZWQgYnkgdGhlIHJlYWRpbmcgc2lkZSxcbi8vIHNpbmNlIF9yZWFkIGhhcyB0byBiZSBjYWxsZWQgdG8gc3RhcnQgcHJvY2Vzc2luZyBhIG5ldyBjaHVuay4gIEhvd2V2ZXIsXG4vLyBhIHBhdGhvbG9naWNhbCBpbmZsYXRlIHR5cGUgb2YgdHJhbnNmb3JtIGNhbiBjYXVzZSBleGNlc3NpdmUgYnVmZmVyaW5nXG4vLyBoZXJlLiAgRm9yIGV4YW1wbGUsIGltYWdpbmUgYSBzdHJlYW0gd2hlcmUgZXZlcnkgYnl0ZSBvZiBpbnB1dCBpc1xuLy8gaW50ZXJwcmV0ZWQgYXMgYW4gaW50ZWdlciBmcm9tIDAtMjU1LCBhbmQgdGhlbiByZXN1bHRzIGluIHRoYXQgbWFueVxuLy8gYnl0ZXMgb2Ygb3V0cHV0LiAgV3JpdGluZyB0aGUgNCBieXRlcyB7ZmYsZmYsZmYsZmZ9IHdvdWxkIHJlc3VsdCBpblxuLy8gMWtiIG9mIGRhdGEgYmVpbmcgb3V0cHV0LiAgSW4gdGhpcyBjYXNlLCB5b3UgY291bGQgd3JpdGUgYSB2ZXJ5IHNtYWxsXG4vLyBhbW91bnQgb2YgaW5wdXQsIGFuZCBlbmQgdXAgd2l0aCBhIHZlcnkgbGFyZ2UgYW1vdW50IG9mIG91dHB1dC4gIEluXG4vLyBzdWNoIGEgcGF0aG9sb2dpY2FsIGluZmxhdGluZyBtZWNoYW5pc20sIHRoZXJlJ2QgYmUgbm8gd2F5IHRvIHRlbGxcbi8vIHRoZSBzeXN0ZW0gdG8gc3RvcCBkb2luZyB0aGUgdHJhbnNmb3JtLiAgQSBzaW5nbGUgNE1CIHdyaXRlIGNvdWxkXG4vLyBjYXVzZSB0aGUgc3lzdGVtIHRvIHJ1biBvdXQgb2YgbWVtb3J5LlxuLy9cbi8vIEhvd2V2ZXIsIGV2ZW4gaW4gc3VjaCBhIHBhdGhvbG9naWNhbCBjYXNlLCBvbmx5IGEgc2luZ2xlIHdyaXR0ZW4gY2h1bmtcbi8vIHdvdWxkIGJlIGNvbnN1bWVkLCBhbmQgdGhlbiB0aGUgcmVzdCB3b3VsZCB3YWl0ICh1bi10cmFuc2Zvcm1lZCkgdW50aWxcbi8vIHRoZSByZXN1bHRzIG9mIHRoZSBwcmV2aW91cyB0cmFuc2Zvcm1lZCBjaHVuayB3ZXJlIGNvbnN1bWVkLlxuXG4ndXNlIHN0cmljdCc7XG5cbm1vZHVsZS5leHBvcnRzID0gVHJhbnNmb3JtO1xuXG52YXIgRHVwbGV4ID0gcmVxdWlyZSgnLi9fc3RyZWFtX2R1cGxleCcpO1xuXG4vKjxyZXBsYWNlbWVudD4qL1xudmFyIHV0aWwgPSByZXF1aXJlKCdjb3JlLXV0aWwtaXMnKTtcbnV0aWwuaW5oZXJpdHMgPSByZXF1aXJlKCdpbmhlcml0cycpO1xuLyo8L3JlcGxhY2VtZW50PiovXG5cbnV0aWwuaW5oZXJpdHMoVHJhbnNmb3JtLCBEdXBsZXgpO1xuXG5mdW5jdGlvbiBhZnRlclRyYW5zZm9ybShlciwgZGF0YSkge1xuICB2YXIgdHMgPSB0aGlzLl90cmFuc2Zvcm1TdGF0ZTtcbiAgdHMudHJhbnNmb3JtaW5nID0gZmFsc2U7XG5cbiAgdmFyIGNiID0gdHMud3JpdGVjYjtcblxuICBpZiAoIWNiKSB7XG4gICAgcmV0dXJuIHRoaXMuZW1pdCgnZXJyb3InLCBuZXcgRXJyb3IoJ3dyaXRlIGNhbGxiYWNrIGNhbGxlZCBtdWx0aXBsZSB0aW1lcycpKTtcbiAgfVxuXG4gIHRzLndyaXRlY2h1bmsgPSBudWxsO1xuICB0cy53cml0ZWNiID0gbnVsbDtcblxuICBpZiAoZGF0YSAhPSBudWxsKSAvLyBzaW5nbGUgZXF1YWxzIGNoZWNrIGZvciBib3RoIGBudWxsYCBhbmQgYHVuZGVmaW5lZGBcbiAgICB0aGlzLnB1c2goZGF0YSk7XG5cbiAgY2IoZXIpO1xuXG4gIHZhciBycyA9IHRoaXMuX3JlYWRhYmxlU3RhdGU7XG4gIHJzLnJlYWRpbmcgPSBmYWxzZTtcbiAgaWYgKHJzLm5lZWRSZWFkYWJsZSB8fCBycy5sZW5ndGggPCBycy5oaWdoV2F0ZXJNYXJrKSB7XG4gICAgdGhpcy5fcmVhZChycy5oaWdoV2F0ZXJNYXJrKTtcbiAgfVxufVxuXG5mdW5jdGlvbiBUcmFuc2Zvcm0ob3B0aW9ucykge1xuICBpZiAoISh0aGlzIGluc3RhbmNlb2YgVHJhbnNmb3JtKSkgcmV0dXJuIG5ldyBUcmFuc2Zvcm0ob3B0aW9ucyk7XG5cbiAgRHVwbGV4LmNhbGwodGhpcywgb3B0aW9ucyk7XG5cbiAgdGhpcy5fdHJhbnNmb3JtU3RhdGUgPSB7XG4gICAgYWZ0ZXJUcmFuc2Zvcm06IGFmdGVyVHJhbnNmb3JtLmJpbmQodGhpcyksXG4gICAgbmVlZFRyYW5zZm9ybTogZmFsc2UsXG4gICAgdHJhbnNmb3JtaW5nOiBmYWxzZSxcbiAgICB3cml0ZWNiOiBudWxsLFxuICAgIHdyaXRlY2h1bms6IG51bGwsXG4gICAgd3JpdGVlbmNvZGluZzogbnVsbFxuICB9O1xuXG4gIC8vIHN0YXJ0IG91dCBhc2tpbmcgZm9yIGEgcmVhZGFibGUgZXZlbnQgb25jZSBkYXRhIGlzIHRyYW5zZm9ybWVkLlxuICB0aGlzLl9yZWFkYWJsZVN0YXRlLm5lZWRSZWFkYWJsZSA9IHRydWU7XG5cbiAgLy8gd2UgaGF2ZSBpbXBsZW1lbnRlZCB0aGUgX3JlYWQgbWV0aG9kLCBhbmQgZG9uZSB0aGUgb3RoZXIgdGhpbmdzXG4gIC8vIHRoYXQgUmVhZGFibGUgd2FudHMgYmVmb3JlIHRoZSBmaXJzdCBfcmVhZCBjYWxsLCBzbyB1bnNldCB0aGVcbiAgLy8gc3luYyBndWFyZCBmbGFnLlxuICB0aGlzLl9yZWFkYWJsZVN0YXRlLnN5bmMgPSBmYWxzZTtcblxuICBpZiAob3B0aW9ucykge1xuICAgIGlmICh0eXBlb2Ygb3B0aW9ucy50cmFuc2Zvcm0gPT09ICdmdW5jdGlvbicpIHRoaXMuX3RyYW5zZm9ybSA9IG9wdGlvbnMudHJhbnNmb3JtO1xuXG4gICAgaWYgKHR5cGVvZiBvcHRpb25zLmZsdXNoID09PSAnZnVuY3Rpb24nKSB0aGlzLl9mbHVzaCA9IG9wdGlvbnMuZmx1c2g7XG4gIH1cblxuICAvLyBXaGVuIHRoZSB3cml0YWJsZSBzaWRlIGZpbmlzaGVzLCB0aGVuIGZsdXNoIG91dCBhbnl0aGluZyByZW1haW5pbmcuXG4gIHRoaXMub24oJ3ByZWZpbmlzaCcsIHByZWZpbmlzaCk7XG59XG5cbmZ1bmN0aW9uIHByZWZpbmlzaCgpIHtcbiAgdmFyIF90aGlzID0gdGhpcztcblxuICBpZiAodHlwZW9mIHRoaXMuX2ZsdXNoID09PSAnZnVuY3Rpb24nKSB7XG4gICAgdGhpcy5fZmx1c2goZnVuY3Rpb24gKGVyLCBkYXRhKSB7XG4gICAgICBkb25lKF90aGlzLCBlciwgZGF0YSk7XG4gICAgfSk7XG4gIH0gZWxzZSB7XG4gICAgZG9uZSh0aGlzLCBudWxsLCBudWxsKTtcbiAgfVxufVxuXG5UcmFuc2Zvcm0ucHJvdG90eXBlLnB1c2ggPSBmdW5jdGlvbiAoY2h1bmssIGVuY29kaW5nKSB7XG4gIHRoaXMuX3RyYW5zZm9ybVN0YXRlLm5lZWRUcmFuc2Zvcm0gPSBmYWxzZTtcbiAgcmV0dXJuIER1cGxleC5wcm90b3R5cGUucHVzaC5jYWxsKHRoaXMsIGNodW5rLCBlbmNvZGluZyk7XG59O1xuXG4vLyBUaGlzIGlzIHRoZSBwYXJ0IHdoZXJlIHlvdSBkbyBzdHVmZiFcbi8vIG92ZXJyaWRlIHRoaXMgZnVuY3Rpb24gaW4gaW1wbGVtZW50YXRpb24gY2xhc3Nlcy5cbi8vICdjaHVuaycgaXMgYW4gaW5wdXQgY2h1bmsuXG4vL1xuLy8gQ2FsbCBgcHVzaChuZXdDaHVuaylgIHRvIHBhc3MgYWxvbmcgdHJhbnNmb3JtZWQgb3V0cHV0XG4vLyB0byB0aGUgcmVhZGFibGUgc2lkZS4gIFlvdSBtYXkgY2FsbCAncHVzaCcgemVybyBvciBtb3JlIHRpbWVzLlxuLy9cbi8vIENhbGwgYGNiKGVycilgIHdoZW4geW91IGFyZSBkb25lIHdpdGggdGhpcyBjaHVuay4gIElmIHlvdSBwYXNzXG4vLyBhbiBlcnJvciwgdGhlbiB0aGF0J2xsIHB1dCB0aGUgaHVydCBvbiB0aGUgd2hvbGUgb3BlcmF0aW9uLiAgSWYgeW91XG4vLyBuZXZlciBjYWxsIGNiKCksIHRoZW4geW91J2xsIG5ldmVyIGdldCBhbm90aGVyIGNodW5rLlxuVHJhbnNmb3JtLnByb3RvdHlwZS5fdHJhbnNmb3JtID0gZnVuY3Rpb24gKGNodW5rLCBlbmNvZGluZywgY2IpIHtcbiAgdGhyb3cgbmV3IEVycm9yKCdfdHJhbnNmb3JtKCkgaXMgbm90IGltcGxlbWVudGVkJyk7XG59O1xuXG5UcmFuc2Zvcm0ucHJvdG90eXBlLl93cml0ZSA9IGZ1bmN0aW9uIChjaHVuaywgZW5jb2RpbmcsIGNiKSB7XG4gIHZhciB0cyA9IHRoaXMuX3RyYW5zZm9ybVN0YXRlO1xuICB0cy53cml0ZWNiID0gY2I7XG4gIHRzLndyaXRlY2h1bmsgPSBjaHVuaztcbiAgdHMud3JpdGVlbmNvZGluZyA9IGVuY29kaW5nO1xuICBpZiAoIXRzLnRyYW5zZm9ybWluZykge1xuICAgIHZhciBycyA9IHRoaXMuX3JlYWRhYmxlU3RhdGU7XG4gICAgaWYgKHRzLm5lZWRUcmFuc2Zvcm0gfHwgcnMubmVlZFJlYWRhYmxlIHx8IHJzLmxlbmd0aCA8IHJzLmhpZ2hXYXRlck1hcmspIHRoaXMuX3JlYWQocnMuaGlnaFdhdGVyTWFyayk7XG4gIH1cbn07XG5cbi8vIERvZXNuJ3QgbWF0dGVyIHdoYXQgdGhlIGFyZ3MgYXJlIGhlcmUuXG4vLyBfdHJhbnNmb3JtIGRvZXMgYWxsIHRoZSB3b3JrLlxuLy8gVGhhdCB3ZSBnb3QgaGVyZSBtZWFucyB0aGF0IHRoZSByZWFkYWJsZSBzaWRlIHdhbnRzIG1vcmUgZGF0YS5cblRyYW5zZm9ybS5wcm90b3R5cGUuX3JlYWQgPSBmdW5jdGlvbiAobikge1xuICB2YXIgdHMgPSB0aGlzLl90cmFuc2Zvcm1TdGF0ZTtcblxuICBpZiAodHMud3JpdGVjaHVuayAhPT0gbnVsbCAmJiB0cy53cml0ZWNiICYmICF0cy50cmFuc2Zvcm1pbmcpIHtcbiAgICB0cy50cmFuc2Zvcm1pbmcgPSB0cnVlO1xuICAgIHRoaXMuX3RyYW5zZm9ybSh0cy53cml0ZWNodW5rLCB0cy53cml0ZWVuY29kaW5nLCB0cy5hZnRlclRyYW5zZm9ybSk7XG4gIH0gZWxzZSB7XG4gICAgLy8gbWFyayB0aGF0IHdlIG5lZWQgYSB0cmFuc2Zvcm0sIHNvIHRoYXQgYW55IGRhdGEgdGhhdCBjb21lcyBpblxuICAgIC8vIHdpbGwgZ2V0IHByb2Nlc3NlZCwgbm93IHRoYXQgd2UndmUgYXNrZWQgZm9yIGl0LlxuICAgIHRzLm5lZWRUcmFuc2Zvcm0gPSB0cnVlO1xuICB9XG59O1xuXG5UcmFuc2Zvcm0ucHJvdG90eXBlLl9kZXN0cm95ID0gZnVuY3Rpb24gKGVyciwgY2IpIHtcbiAgdmFyIF90aGlzMiA9IHRoaXM7XG5cbiAgRHVwbGV4LnByb3RvdHlwZS5fZGVzdHJveS5jYWxsKHRoaXMsIGVyciwgZnVuY3Rpb24gKGVycjIpIHtcbiAgICBjYihlcnIyKTtcbiAgICBfdGhpczIuZW1pdCgnY2xvc2UnKTtcbiAgfSk7XG59O1xuXG5mdW5jdGlvbiBkb25lKHN0cmVhbSwgZXIsIGRhdGEpIHtcbiAgaWYgKGVyKSByZXR1cm4gc3RyZWFtLmVtaXQoJ2Vycm9yJywgZXIpO1xuXG4gIGlmIChkYXRhICE9IG51bGwpIC8vIHNpbmdsZSBlcXVhbHMgY2hlY2sgZm9yIGJvdGggYG51bGxgIGFuZCBgdW5kZWZpbmVkYFxuICAgIHN0cmVhbS5wdXNoKGRhdGEpO1xuXG4gIC8vIGlmIHRoZXJlJ3Mgbm90aGluZyBpbiB0aGUgd3JpdGUgYnVmZmVyLCB0aGVuIHRoYXQgbWVhbnNcbiAgLy8gdGhhdCBub3RoaW5nIG1vcmUgd2lsbCBldmVyIGJlIHByb3ZpZGVkXG4gIGlmIChzdHJlYW0uX3dyaXRhYmxlU3RhdGUubGVuZ3RoKSB0aHJvdyBuZXcgRXJyb3IoJ0NhbGxpbmcgdHJhbnNmb3JtIGRvbmUgd2hlbiB3cy5sZW5ndGggIT0gMCcpO1xuXG4gIGlmIChzdHJlYW0uX3RyYW5zZm9ybVN0YXRlLnRyYW5zZm9ybWluZykgdGhyb3cgbmV3IEVycm9yKCdDYWxsaW5nIHRyYW5zZm9ybSBkb25lIHdoZW4gc3RpbGwgdHJhbnNmb3JtaW5nJyk7XG5cbiAgcmV0dXJuIHN0cmVhbS5wdXNoKG51bGwpO1xufSIsIi8vIENvcHlyaWdodCBKb3llbnQsIEluYy4gYW5kIG90aGVyIE5vZGUgY29udHJpYnV0b3JzLlxuLy9cbi8vIFBlcm1pc3Npb24gaXMgaGVyZWJ5IGdyYW50ZWQsIGZyZWUgb2YgY2hhcmdlLCB0byBhbnkgcGVyc29uIG9idGFpbmluZyBhXG4vLyBjb3B5IG9mIHRoaXMgc29mdHdhcmUgYW5kIGFzc29jaWF0ZWQgZG9jdW1lbnRhdGlvbiBmaWxlcyAodGhlXG4vLyBcIlNvZnR3YXJlXCIpLCB0byBkZWFsIGluIHRoZSBTb2Z0d2FyZSB3aXRob3V0IHJlc3RyaWN0aW9uLCBpbmNsdWRpbmdcbi8vIHdpdGhvdXQgbGltaXRhdGlvbiB0aGUgcmlnaHRzIHRvIHVzZSwgY29weSwgbW9kaWZ5LCBtZXJnZSwgcHVibGlzaCxcbi8vIGRpc3RyaWJ1dGUsIHN1YmxpY2Vuc2UsIGFuZC9vciBzZWxsIGNvcGllcyBvZiB0aGUgU29mdHdhcmUsIGFuZCB0byBwZXJtaXRcbi8vIHBlcnNvbnMgdG8gd2hvbSB0aGUgU29mdHdhcmUgaXMgZnVybmlzaGVkIHRvIGRvIHNvLCBzdWJqZWN0IHRvIHRoZVxuLy8gZm9sbG93aW5nIGNvbmRpdGlvbnM6XG4vL1xuLy8gVGhlIGFib3ZlIGNvcHlyaWdodCBub3RpY2UgYW5kIHRoaXMgcGVybWlzc2lvbiBub3RpY2Ugc2hhbGwgYmUgaW5jbHVkZWRcbi8vIGluIGFsbCBjb3BpZXMgb3Igc3Vic3RhbnRpYWwgcG9ydGlvbnMgb2YgdGhlIFNvZnR3YXJlLlxuLy9cbi8vIFRIRSBTT0ZUV0FSRSBJUyBQUk9WSURFRCBcIkFTIElTXCIsIFdJVEhPVVQgV0FSUkFOVFkgT0YgQU5ZIEtJTkQsIEVYUFJFU1Ncbi8vIE9SIElNUExJRUQsIElOQ0xVRElORyBCVVQgTk9UIExJTUlURUQgVE8gVEhFIFdBUlJBTlRJRVMgT0Zcbi8vIE1FUkNIQU5UQUJJTElUWSwgRklUTkVTUyBGT1IgQSBQQVJUSUNVTEFSIFBVUlBPU0UgQU5EIE5PTklORlJJTkdFTUVOVC4gSU5cbi8vIE5PIEVWRU5UIFNIQUxMIFRIRSBBVVRIT1JTIE9SIENPUFlSSUdIVCBIT0xERVJTIEJFIExJQUJMRSBGT1IgQU5ZIENMQUlNLFxuLy8gREFNQUdFUyBPUiBPVEhFUiBMSUFCSUxJVFksIFdIRVRIRVIgSU4gQU4gQUNUSU9OIE9GIENPTlRSQUNULCBUT1JUIE9SXG4vLyBPVEhFUldJU0UsIEFSSVNJTkcgRlJPTSwgT1VUIE9GIE9SIElOIENPTk5FQ1RJT04gV0lUSCBUSEUgU09GVFdBUkUgT1IgVEhFXG4vLyBVU0UgT1IgT1RIRVIgREVBTElOR1MgSU4gVEhFIFNPRlRXQVJFLlxuXG4vLyBBIGJpdCBzaW1wbGVyIHRoYW4gcmVhZGFibGUgc3RyZWFtcy5cbi8vIEltcGxlbWVudCBhbiBhc3luYyAuX3dyaXRlKGNodW5rLCBlbmNvZGluZywgY2IpLCBhbmQgaXQnbGwgaGFuZGxlIGFsbFxuLy8gdGhlIGRyYWluIGV2ZW50IGVtaXNzaW9uIGFuZCBidWZmZXJpbmcuXG5cbid1c2Ugc3RyaWN0JztcblxuLyo8cmVwbGFjZW1lbnQ+Ki9cblxudmFyIHBuYSA9IHJlcXVpcmUoJ3Byb2Nlc3MtbmV4dGljay1hcmdzJyk7XG4vKjwvcmVwbGFjZW1lbnQ+Ki9cblxubW9kdWxlLmV4cG9ydHMgPSBXcml0YWJsZTtcblxuLyogPHJlcGxhY2VtZW50PiAqL1xuZnVuY3Rpb24gV3JpdGVSZXEoY2h1bmssIGVuY29kaW5nLCBjYikge1xuICB0aGlzLmNodW5rID0gY2h1bms7XG4gIHRoaXMuZW5jb2RpbmcgPSBlbmNvZGluZztcbiAgdGhpcy5jYWxsYmFjayA9IGNiO1xuICB0aGlzLm5leHQgPSBudWxsO1xufVxuXG4vLyBJdCBzZWVtcyBhIGxpbmtlZCBsaXN0IGJ1dCBpdCBpcyBub3Rcbi8vIHRoZXJlIHdpbGwgYmUgb25seSAyIG9mIHRoZXNlIGZvciBlYWNoIHN0cmVhbVxuZnVuY3Rpb24gQ29ya2VkUmVxdWVzdChzdGF0ZSkge1xuICB2YXIgX3RoaXMgPSB0aGlzO1xuXG4gIHRoaXMubmV4dCA9IG51bGw7XG4gIHRoaXMuZW50cnkgPSBudWxsO1xuICB0aGlzLmZpbmlzaCA9IGZ1bmN0aW9uICgpIHtcbiAgICBvbkNvcmtlZEZpbmlzaChfdGhpcywgc3RhdGUpO1xuICB9O1xufVxuLyogPC9yZXBsYWNlbWVudD4gKi9cblxuLyo8cmVwbGFjZW1lbnQ+Ki9cbnZhciBhc3luY1dyaXRlID0gIXByb2Nlc3MuYnJvd3NlciAmJiBbJ3YwLjEwJywgJ3YwLjkuJ10uaW5kZXhPZihwcm9jZXNzLnZlcnNpb24uc2xpY2UoMCwgNSkpID4gLTEgPyBzZXRJbW1lZGlhdGUgOiBwbmEubmV4dFRpY2s7XG4vKjwvcmVwbGFjZW1lbnQ+Ki9cblxuLyo8cmVwbGFjZW1lbnQ+Ki9cbnZhciBEdXBsZXg7XG4vKjwvcmVwbGFjZW1lbnQ+Ki9cblxuV3JpdGFibGUuV3JpdGFibGVTdGF0ZSA9IFdyaXRhYmxlU3RhdGU7XG5cbi8qPHJlcGxhY2VtZW50PiovXG52YXIgdXRpbCA9IHJlcXVpcmUoJ2NvcmUtdXRpbC1pcycpO1xudXRpbC5pbmhlcml0cyA9IHJlcXVpcmUoJ2luaGVyaXRzJyk7XG4vKjwvcmVwbGFjZW1lbnQ+Ki9cblxuLyo8cmVwbGFjZW1lbnQ+Ki9cbnZhciBpbnRlcm5hbFV0aWwgPSB7XG4gIGRlcHJlY2F0ZTogcmVxdWlyZSgndXRpbC1kZXByZWNhdGUnKVxufTtcbi8qPC9yZXBsYWNlbWVudD4qL1xuXG4vKjxyZXBsYWNlbWVudD4qL1xudmFyIFN0cmVhbSA9IHJlcXVpcmUoJy4vaW50ZXJuYWwvc3RyZWFtcy9zdHJlYW0nKTtcbi8qPC9yZXBsYWNlbWVudD4qL1xuXG4vKjxyZXBsYWNlbWVudD4qL1xuXG52YXIgQnVmZmVyID0gcmVxdWlyZSgnc2FmZS1idWZmZXInKS5CdWZmZXI7XG52YXIgT3VyVWludDhBcnJheSA9IGdsb2JhbC5VaW50OEFycmF5IHx8IGZ1bmN0aW9uICgpIHt9O1xuZnVuY3Rpb24gX3VpbnQ4QXJyYXlUb0J1ZmZlcihjaHVuaykge1xuICByZXR1cm4gQnVmZmVyLmZyb20oY2h1bmspO1xufVxuZnVuY3Rpb24gX2lzVWludDhBcnJheShvYmopIHtcbiAgcmV0dXJuIEJ1ZmZlci5pc0J1ZmZlcihvYmopIHx8IG9iaiBpbnN0YW5jZW9mIE91clVpbnQ4QXJyYXk7XG59XG5cbi8qPC9yZXBsYWNlbWVudD4qL1xuXG52YXIgZGVzdHJveUltcGwgPSByZXF1aXJlKCcuL2ludGVybmFsL3N0cmVhbXMvZGVzdHJveScpO1xuXG51dGlsLmluaGVyaXRzKFdyaXRhYmxlLCBTdHJlYW0pO1xuXG5mdW5jdGlvbiBub3AoKSB7fVxuXG5mdW5jdGlvbiBXcml0YWJsZVN0YXRlKG9wdGlvbnMsIHN0cmVhbSkge1xuICBEdXBsZXggPSBEdXBsZXggfHwgcmVxdWlyZSgnLi9fc3RyZWFtX2R1cGxleCcpO1xuXG4gIG9wdGlvbnMgPSBvcHRpb25zIHx8IHt9O1xuXG4gIC8vIER1cGxleCBzdHJlYW1zIGFyZSBib3RoIHJlYWRhYmxlIGFuZCB3cml0YWJsZSwgYnV0IHNoYXJlXG4gIC8vIHRoZSBzYW1lIG9wdGlvbnMgb2JqZWN0LlxuICAvLyBIb3dldmVyLCBzb21lIGNhc2VzIHJlcXVpcmUgc2V0dGluZyBvcHRpb25zIHRvIGRpZmZlcmVudFxuICAvLyB2YWx1ZXMgZm9yIHRoZSByZWFkYWJsZSBhbmQgdGhlIHdyaXRhYmxlIHNpZGVzIG9mIHRoZSBkdXBsZXggc3RyZWFtLlxuICAvLyBUaGVzZSBvcHRpb25zIGNhbiBiZSBwcm92aWRlZCBzZXBhcmF0ZWx5IGFzIHJlYWRhYmxlWFhYIGFuZCB3cml0YWJsZVhYWC5cbiAgdmFyIGlzRHVwbGV4ID0gc3RyZWFtIGluc3RhbmNlb2YgRHVwbGV4O1xuXG4gIC8vIG9iamVjdCBzdHJlYW0gZmxhZyB0byBpbmRpY2F0ZSB3aGV0aGVyIG9yIG5vdCB0aGlzIHN0cmVhbVxuICAvLyBjb250YWlucyBidWZmZXJzIG9yIG9iamVjdHMuXG4gIHRoaXMub2JqZWN0TW9kZSA9ICEhb3B0aW9ucy5vYmplY3RNb2RlO1xuXG4gIGlmIChpc0R1cGxleCkgdGhpcy5vYmplY3RNb2RlID0gdGhpcy5vYmplY3RNb2RlIHx8ICEhb3B0aW9ucy53cml0YWJsZU9iamVjdE1vZGU7XG5cbiAgLy8gdGhlIHBvaW50IGF0IHdoaWNoIHdyaXRlKCkgc3RhcnRzIHJldHVybmluZyBmYWxzZVxuICAvLyBOb3RlOiAwIGlzIGEgdmFsaWQgdmFsdWUsIG1lYW5zIHRoYXQgd2UgYWx3YXlzIHJldHVybiBmYWxzZSBpZlxuICAvLyB0aGUgZW50aXJlIGJ1ZmZlciBpcyBub3QgZmx1c2hlZCBpbW1lZGlhdGVseSBvbiB3cml0ZSgpXG4gIHZhciBod20gPSBvcHRpb25zLmhpZ2hXYXRlck1hcms7XG4gIHZhciB3cml0YWJsZUh3bSA9IG9wdGlvbnMud3JpdGFibGVIaWdoV2F0ZXJNYXJrO1xuICB2YXIgZGVmYXVsdEh3bSA9IHRoaXMub2JqZWN0TW9kZSA/IDE2IDogMTYgKiAxMDI0O1xuXG4gIGlmIChod20gfHwgaHdtID09PSAwKSB0aGlzLmhpZ2hXYXRlck1hcmsgPSBod207ZWxzZSBpZiAoaXNEdXBsZXggJiYgKHdyaXRhYmxlSHdtIHx8IHdyaXRhYmxlSHdtID09PSAwKSkgdGhpcy5oaWdoV2F0ZXJNYXJrID0gd3JpdGFibGVId207ZWxzZSB0aGlzLmhpZ2hXYXRlck1hcmsgPSBkZWZhdWx0SHdtO1xuXG4gIC8vIGNhc3QgdG8gaW50cy5cbiAgdGhpcy5oaWdoV2F0ZXJNYXJrID0gTWF0aC5mbG9vcih0aGlzLmhpZ2hXYXRlck1hcmspO1xuXG4gIC8vIGlmIF9maW5hbCBoYXMgYmVlbiBjYWxsZWRcbiAgdGhpcy5maW5hbENhbGxlZCA9IGZhbHNlO1xuXG4gIC8vIGRyYWluIGV2ZW50IGZsYWcuXG4gIHRoaXMubmVlZERyYWluID0gZmFsc2U7XG4gIC8vIGF0IHRoZSBzdGFydCBvZiBjYWxsaW5nIGVuZCgpXG4gIHRoaXMuZW5kaW5nID0gZmFsc2U7XG4gIC8vIHdoZW4gZW5kKCkgaGFzIGJlZW4gY2FsbGVkLCBhbmQgcmV0dXJuZWRcbiAgdGhpcy5lbmRlZCA9IGZhbHNlO1xuICAvLyB3aGVuICdmaW5pc2gnIGlzIGVtaXR0ZWRcbiAgdGhpcy5maW5pc2hlZCA9IGZhbHNlO1xuXG4gIC8vIGhhcyBpdCBiZWVuIGRlc3Ryb3llZFxuICB0aGlzLmRlc3Ryb3llZCA9IGZhbHNlO1xuXG4gIC8vIHNob3VsZCB3ZSBkZWNvZGUgc3RyaW5ncyBpbnRvIGJ1ZmZlcnMgYmVmb3JlIHBhc3NpbmcgdG8gX3dyaXRlP1xuICAvLyB0aGlzIGlzIGhlcmUgc28gdGhhdCBzb21lIG5vZGUtY29yZSBzdHJlYW1zIGNhbiBvcHRpbWl6ZSBzdHJpbmdcbiAgLy8gaGFuZGxpbmcgYXQgYSBsb3dlciBsZXZlbC5cbiAgdmFyIG5vRGVjb2RlID0gb3B0aW9ucy5kZWNvZGVTdHJpbmdzID09PSBmYWxzZTtcbiAgdGhpcy5kZWNvZGVTdHJpbmdzID0gIW5vRGVjb2RlO1xuXG4gIC8vIENyeXB0byBpcyBraW5kIG9mIG9sZCBhbmQgY3J1c3R5LiAgSGlzdG9yaWNhbGx5LCBpdHMgZGVmYXVsdCBzdHJpbmdcbiAgLy8gZW5jb2RpbmcgaXMgJ2JpbmFyeScgc28gd2UgaGF2ZSB0byBtYWtlIHRoaXMgY29uZmlndXJhYmxlLlxuICAvLyBFdmVyeXRoaW5nIGVsc2UgaW4gdGhlIHVuaXZlcnNlIHVzZXMgJ3V0ZjgnLCB0aG91Z2guXG4gIHRoaXMuZGVmYXVsdEVuY29kaW5nID0gb3B0aW9ucy5kZWZhdWx0RW5jb2RpbmcgfHwgJ3V0ZjgnO1xuXG4gIC8vIG5vdCBhbiBhY3R1YWwgYnVmZmVyIHdlIGtlZXAgdHJhY2sgb2YsIGJ1dCBhIG1lYXN1cmVtZW50XG4gIC8vIG9mIGhvdyBtdWNoIHdlJ3JlIHdhaXRpbmcgdG8gZ2V0IHB1c2hlZCB0byBzb21lIHVuZGVybHlpbmdcbiAgLy8gc29ja2V0IG9yIGZpbGUuXG4gIHRoaXMubGVuZ3RoID0gMDtcblxuICAvLyBhIGZsYWcgdG8gc2VlIHdoZW4gd2UncmUgaW4gdGhlIG1pZGRsZSBvZiBhIHdyaXRlLlxuICB0aGlzLndyaXRpbmcgPSBmYWxzZTtcblxuICAvLyB3aGVuIHRydWUgYWxsIHdyaXRlcyB3aWxsIGJlIGJ1ZmZlcmVkIHVudGlsIC51bmNvcmsoKSBjYWxsXG4gIHRoaXMuY29ya2VkID0gMDtcblxuICAvLyBhIGZsYWcgdG8gYmUgYWJsZSB0byB0ZWxsIGlmIHRoZSBvbndyaXRlIGNiIGlzIGNhbGxlZCBpbW1lZGlhdGVseSxcbiAgLy8gb3Igb24gYSBsYXRlciB0aWNrLiAgV2Ugc2V0IHRoaXMgdG8gdHJ1ZSBhdCBmaXJzdCwgYmVjYXVzZSBhbnlcbiAgLy8gYWN0aW9ucyB0aGF0IHNob3VsZG4ndCBoYXBwZW4gdW50aWwgXCJsYXRlclwiIHNob3VsZCBnZW5lcmFsbHkgYWxzb1xuICAvLyBub3QgaGFwcGVuIGJlZm9yZSB0aGUgZmlyc3Qgd3JpdGUgY2FsbC5cbiAgdGhpcy5zeW5jID0gdHJ1ZTtcblxuICAvLyBhIGZsYWcgdG8ga25vdyBpZiB3ZSdyZSBwcm9jZXNzaW5nIHByZXZpb3VzbHkgYnVmZmVyZWQgaXRlbXMsIHdoaWNoXG4gIC8vIG1heSBjYWxsIHRoZSBfd3JpdGUoKSBjYWxsYmFjayBpbiB0aGUgc2FtZSB0aWNrLCBzbyB0aGF0IHdlIGRvbid0XG4gIC8vIGVuZCB1cCBpbiBhbiBvdmVybGFwcGVkIG9ud3JpdGUgc2l0dWF0aW9uLlxuICB0aGlzLmJ1ZmZlclByb2Nlc3NpbmcgPSBmYWxzZTtcblxuICAvLyB0aGUgY2FsbGJhY2sgdGhhdCdzIHBhc3NlZCB0byBfd3JpdGUoY2h1bmssY2IpXG4gIHRoaXMub253cml0ZSA9IGZ1bmN0aW9uIChlcikge1xuICAgIG9ud3JpdGUoc3RyZWFtLCBlcik7XG4gIH07XG5cbiAgLy8gdGhlIGNhbGxiYWNrIHRoYXQgdGhlIHVzZXIgc3VwcGxpZXMgdG8gd3JpdGUoY2h1bmssZW5jb2RpbmcsY2IpXG4gIHRoaXMud3JpdGVjYiA9IG51bGw7XG5cbiAgLy8gdGhlIGFtb3VudCB0aGF0IGlzIGJlaW5nIHdyaXR0ZW4gd2hlbiBfd3JpdGUgaXMgY2FsbGVkLlxuICB0aGlzLndyaXRlbGVuID0gMDtcblxuICB0aGlzLmJ1ZmZlcmVkUmVxdWVzdCA9IG51bGw7XG4gIHRoaXMubGFzdEJ1ZmZlcmVkUmVxdWVzdCA9IG51bGw7XG5cbiAgLy8gbnVtYmVyIG9mIHBlbmRpbmcgdXNlci1zdXBwbGllZCB3cml0ZSBjYWxsYmFja3NcbiAgLy8gdGhpcyBtdXN0IGJlIDAgYmVmb3JlICdmaW5pc2gnIGNhbiBiZSBlbWl0dGVkXG4gIHRoaXMucGVuZGluZ2NiID0gMDtcblxuICAvLyBlbWl0IHByZWZpbmlzaCBpZiB0aGUgb25seSB0aGluZyB3ZSdyZSB3YWl0aW5nIGZvciBpcyBfd3JpdGUgY2JzXG4gIC8vIFRoaXMgaXMgcmVsZXZhbnQgZm9yIHN5bmNocm9ub3VzIFRyYW5zZm9ybSBzdHJlYW1zXG4gIHRoaXMucHJlZmluaXNoZWQgPSBmYWxzZTtcblxuICAvLyBUcnVlIGlmIHRoZSBlcnJvciB3YXMgYWxyZWFkeSBlbWl0dGVkIGFuZCBzaG91bGQgbm90IGJlIHRocm93biBhZ2FpblxuICB0aGlzLmVycm9yRW1pdHRlZCA9IGZhbHNlO1xuXG4gIC8vIGNvdW50IGJ1ZmZlcmVkIHJlcXVlc3RzXG4gIHRoaXMuYnVmZmVyZWRSZXF1ZXN0Q291bnQgPSAwO1xuXG4gIC8vIGFsbG9jYXRlIHRoZSBmaXJzdCBDb3JrZWRSZXF1ZXN0LCB0aGVyZSBpcyBhbHdheXNcbiAgLy8gb25lIGFsbG9jYXRlZCBhbmQgZnJlZSB0byB1c2UsIGFuZCB3ZSBtYWludGFpbiBhdCBtb3N0IHR3b1xuICB0aGlzLmNvcmtlZFJlcXVlc3RzRnJlZSA9IG5ldyBDb3JrZWRSZXF1ZXN0KHRoaXMpO1xufVxuXG5Xcml0YWJsZVN0YXRlLnByb3RvdHlwZS5nZXRCdWZmZXIgPSBmdW5jdGlvbiBnZXRCdWZmZXIoKSB7XG4gIHZhciBjdXJyZW50ID0gdGhpcy5idWZmZXJlZFJlcXVlc3Q7XG4gIHZhciBvdXQgPSBbXTtcbiAgd2hpbGUgKGN1cnJlbnQpIHtcbiAgICBvdXQucHVzaChjdXJyZW50KTtcbiAgICBjdXJyZW50ID0gY3VycmVudC5uZXh0O1xuICB9XG4gIHJldHVybiBvdXQ7XG59O1xuXG4oZnVuY3Rpb24gKCkge1xuICB0cnkge1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShXcml0YWJsZVN0YXRlLnByb3RvdHlwZSwgJ2J1ZmZlcicsIHtcbiAgICAgIGdldDogaW50ZXJuYWxVdGlsLmRlcHJlY2F0ZShmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmdldEJ1ZmZlcigpO1xuICAgICAgfSwgJ193cml0YWJsZVN0YXRlLmJ1ZmZlciBpcyBkZXByZWNhdGVkLiBVc2UgX3dyaXRhYmxlU3RhdGUuZ2V0QnVmZmVyICcgKyAnaW5zdGVhZC4nLCAnREVQMDAwMycpXG4gICAgfSk7XG4gIH0gY2F0Y2ggKF8pIHt9XG59KSgpO1xuXG4vLyBUZXN0IF93cml0YWJsZVN0YXRlIGZvciBpbmhlcml0YW5jZSB0byBhY2NvdW50IGZvciBEdXBsZXggc3RyZWFtcyxcbi8vIHdob3NlIHByb3RvdHlwZSBjaGFpbiBvbmx5IHBvaW50cyB0byBSZWFkYWJsZS5cbnZhciByZWFsSGFzSW5zdGFuY2U7XG5pZiAodHlwZW9mIFN5bWJvbCA9PT0gJ2Z1bmN0aW9uJyAmJiBTeW1ib2wuaGFzSW5zdGFuY2UgJiYgdHlwZW9mIEZ1bmN0aW9uLnByb3RvdHlwZVtTeW1ib2wuaGFzSW5zdGFuY2VdID09PSAnZnVuY3Rpb24nKSB7XG4gIHJlYWxIYXNJbnN0YW5jZSA9IEZ1bmN0aW9uLnByb3RvdHlwZVtTeW1ib2wuaGFzSW5zdGFuY2VdO1xuICBPYmplY3QuZGVmaW5lUHJvcGVydHkoV3JpdGFibGUsIFN5bWJvbC5oYXNJbnN0YW5jZSwge1xuICAgIHZhbHVlOiBmdW5jdGlvbiAob2JqZWN0KSB7XG4gICAgICBpZiAocmVhbEhhc0luc3RhbmNlLmNhbGwodGhpcywgb2JqZWN0KSkgcmV0dXJuIHRydWU7XG4gICAgICBpZiAodGhpcyAhPT0gV3JpdGFibGUpIHJldHVybiBmYWxzZTtcblxuICAgICAgcmV0dXJuIG9iamVjdCAmJiBvYmplY3QuX3dyaXRhYmxlU3RhdGUgaW5zdGFuY2VvZiBXcml0YWJsZVN0YXRlO1xuICAgIH1cbiAgfSk7XG59IGVsc2Uge1xuICByZWFsSGFzSW5zdGFuY2UgPSBmdW5jdGlvbiAob2JqZWN0KSB7XG4gICAgcmV0dXJuIG9iamVjdCBpbnN0YW5jZW9mIHRoaXM7XG4gIH07XG59XG5cbmZ1bmN0aW9uIFdyaXRhYmxlKG9wdGlvbnMpIHtcbiAgRHVwbGV4ID0gRHVwbGV4IHx8IHJlcXVpcmUoJy4vX3N0cmVhbV9kdXBsZXgnKTtcblxuICAvLyBXcml0YWJsZSBjdG9yIGlzIGFwcGxpZWQgdG8gRHVwbGV4ZXMsIHRvby5cbiAgLy8gYHJlYWxIYXNJbnN0YW5jZWAgaXMgbmVjZXNzYXJ5IGJlY2F1c2UgdXNpbmcgcGxhaW4gYGluc3RhbmNlb2ZgXG4gIC8vIHdvdWxkIHJldHVybiBmYWxzZSwgYXMgbm8gYF93cml0YWJsZVN0YXRlYCBwcm9wZXJ0eSBpcyBhdHRhY2hlZC5cblxuICAvLyBUcnlpbmcgdG8gdXNlIHRoZSBjdXN0b20gYGluc3RhbmNlb2ZgIGZvciBXcml0YWJsZSBoZXJlIHdpbGwgYWxzbyBicmVhayB0aGVcbiAgLy8gTm9kZS5qcyBMYXp5VHJhbnNmb3JtIGltcGxlbWVudGF0aW9uLCB3aGljaCBoYXMgYSBub24tdHJpdmlhbCBnZXR0ZXIgZm9yXG4gIC8vIGBfd3JpdGFibGVTdGF0ZWAgdGhhdCB3b3VsZCBsZWFkIHRvIGluZmluaXRlIHJlY3Vyc2lvbi5cbiAgaWYgKCFyZWFsSGFzSW5zdGFuY2UuY2FsbChXcml0YWJsZSwgdGhpcykgJiYgISh0aGlzIGluc3RhbmNlb2YgRHVwbGV4KSkge1xuICAgIHJldHVybiBuZXcgV3JpdGFibGUob3B0aW9ucyk7XG4gIH1cblxuICB0aGlzLl93cml0YWJsZVN0YXRlID0gbmV3IFdyaXRhYmxlU3RhdGUob3B0aW9ucywgdGhpcyk7XG5cbiAgLy8gbGVnYWN5LlxuICB0aGlzLndyaXRhYmxlID0gdHJ1ZTtcblxuICBpZiAob3B0aW9ucykge1xuICAgIGlmICh0eXBlb2Ygb3B0aW9ucy53cml0ZSA9PT0gJ2Z1bmN0aW9uJykgdGhpcy5fd3JpdGUgPSBvcHRpb25zLndyaXRlO1xuXG4gICAgaWYgKHR5cGVvZiBvcHRpb25zLndyaXRldiA9PT0gJ2Z1bmN0aW9uJykgdGhpcy5fd3JpdGV2ID0gb3B0aW9ucy53cml0ZXY7XG5cbiAgICBpZiAodHlwZW9mIG9wdGlvbnMuZGVzdHJveSA9PT0gJ2Z1bmN0aW9uJykgdGhpcy5fZGVzdHJveSA9IG9wdGlvbnMuZGVzdHJveTtcblxuICAgIGlmICh0eXBlb2Ygb3B0aW9ucy5maW5hbCA9PT0gJ2Z1bmN0aW9uJykgdGhpcy5fZmluYWwgPSBvcHRpb25zLmZpbmFsO1xuICB9XG5cbiAgU3RyZWFtLmNhbGwodGhpcyk7XG59XG5cbi8vIE90aGVyd2lzZSBwZW9wbGUgY2FuIHBpcGUgV3JpdGFibGUgc3RyZWFtcywgd2hpY2ggaXMganVzdCB3cm9uZy5cbldyaXRhYmxlLnByb3RvdHlwZS5waXBlID0gZnVuY3Rpb24gKCkge1xuICB0aGlzLmVtaXQoJ2Vycm9yJywgbmV3IEVycm9yKCdDYW5ub3QgcGlwZSwgbm90IHJlYWRhYmxlJykpO1xufTtcblxuZnVuY3Rpb24gd3JpdGVBZnRlckVuZChzdHJlYW0sIGNiKSB7XG4gIHZhciBlciA9IG5ldyBFcnJvcignd3JpdGUgYWZ0ZXIgZW5kJyk7XG4gIC8vIFRPRE86IGRlZmVyIGVycm9yIGV2ZW50cyBjb25zaXN0ZW50bHkgZXZlcnl3aGVyZSwgbm90IGp1c3QgdGhlIGNiXG4gIHN0cmVhbS5lbWl0KCdlcnJvcicsIGVyKTtcbiAgcG5hLm5leHRUaWNrKGNiLCBlcik7XG59XG5cbi8vIENoZWNrcyB0aGF0IGEgdXNlci1zdXBwbGllZCBjaHVuayBpcyB2YWxpZCwgZXNwZWNpYWxseSBmb3IgdGhlIHBhcnRpY3VsYXJcbi8vIG1vZGUgdGhlIHN0cmVhbSBpcyBpbi4gQ3VycmVudGx5IHRoaXMgbWVhbnMgdGhhdCBgbnVsbGAgaXMgbmV2ZXIgYWNjZXB0ZWRcbi8vIGFuZCB1bmRlZmluZWQvbm9uLXN0cmluZyB2YWx1ZXMgYXJlIG9ubHkgYWxsb3dlZCBpbiBvYmplY3QgbW9kZS5cbmZ1bmN0aW9uIHZhbGlkQ2h1bmsoc3RyZWFtLCBzdGF0ZSwgY2h1bmssIGNiKSB7XG4gIHZhciB2YWxpZCA9IHRydWU7XG4gIHZhciBlciA9IGZhbHNlO1xuXG4gIGlmIChjaHVuayA9PT0gbnVsbCkge1xuICAgIGVyID0gbmV3IFR5cGVFcnJvcignTWF5IG5vdCB3cml0ZSBudWxsIHZhbHVlcyB0byBzdHJlYW0nKTtcbiAgfSBlbHNlIGlmICh0eXBlb2YgY2h1bmsgIT09ICdzdHJpbmcnICYmIGNodW5rICE9PSB1bmRlZmluZWQgJiYgIXN0YXRlLm9iamVjdE1vZGUpIHtcbiAgICBlciA9IG5ldyBUeXBlRXJyb3IoJ0ludmFsaWQgbm9uLXN0cmluZy9idWZmZXIgY2h1bmsnKTtcbiAgfVxuICBpZiAoZXIpIHtcbiAgICBzdHJlYW0uZW1pdCgnZXJyb3InLCBlcik7XG4gICAgcG5hLm5leHRUaWNrKGNiLCBlcik7XG4gICAgdmFsaWQgPSBmYWxzZTtcbiAgfVxuICByZXR1cm4gdmFsaWQ7XG59XG5cbldyaXRhYmxlLnByb3RvdHlwZS53cml0ZSA9IGZ1bmN0aW9uIChjaHVuaywgZW5jb2RpbmcsIGNiKSB7XG4gIHZhciBzdGF0ZSA9IHRoaXMuX3dyaXRhYmxlU3RhdGU7XG4gIHZhciByZXQgPSBmYWxzZTtcbiAgdmFyIGlzQnVmID0gIXN0YXRlLm9iamVjdE1vZGUgJiYgX2lzVWludDhBcnJheShjaHVuayk7XG5cbiAgaWYgKGlzQnVmICYmICFCdWZmZXIuaXNCdWZmZXIoY2h1bmspKSB7XG4gICAgY2h1bmsgPSBfdWludDhBcnJheVRvQnVmZmVyKGNodW5rKTtcbiAgfVxuXG4gIGlmICh0eXBlb2YgZW5jb2RpbmcgPT09ICdmdW5jdGlvbicpIHtcbiAgICBjYiA9IGVuY29kaW5nO1xuICAgIGVuY29kaW5nID0gbnVsbDtcbiAgfVxuXG4gIGlmIChpc0J1ZikgZW5jb2RpbmcgPSAnYnVmZmVyJztlbHNlIGlmICghZW5jb2RpbmcpIGVuY29kaW5nID0gc3RhdGUuZGVmYXVsdEVuY29kaW5nO1xuXG4gIGlmICh0eXBlb2YgY2IgIT09ICdmdW5jdGlvbicpIGNiID0gbm9wO1xuXG4gIGlmIChzdGF0ZS5lbmRlZCkgd3JpdGVBZnRlckVuZCh0aGlzLCBjYik7ZWxzZSBpZiAoaXNCdWYgfHwgdmFsaWRDaHVuayh0aGlzLCBzdGF0ZSwgY2h1bmssIGNiKSkge1xuICAgIHN0YXRlLnBlbmRpbmdjYisrO1xuICAgIHJldCA9IHdyaXRlT3JCdWZmZXIodGhpcywgc3RhdGUsIGlzQnVmLCBjaHVuaywgZW5jb2RpbmcsIGNiKTtcbiAgfVxuXG4gIHJldHVybiByZXQ7XG59O1xuXG5Xcml0YWJsZS5wcm90b3R5cGUuY29yayA9IGZ1bmN0aW9uICgpIHtcbiAgdmFyIHN0YXRlID0gdGhpcy5fd3JpdGFibGVTdGF0ZTtcblxuICBzdGF0ZS5jb3JrZWQrKztcbn07XG5cbldyaXRhYmxlLnByb3RvdHlwZS51bmNvcmsgPSBmdW5jdGlvbiAoKSB7XG4gIHZhciBzdGF0ZSA9IHRoaXMuX3dyaXRhYmxlU3RhdGU7XG5cbiAgaWYgKHN0YXRlLmNvcmtlZCkge1xuICAgIHN0YXRlLmNvcmtlZC0tO1xuXG4gICAgaWYgKCFzdGF0ZS53cml0aW5nICYmICFzdGF0ZS5jb3JrZWQgJiYgIXN0YXRlLmZpbmlzaGVkICYmICFzdGF0ZS5idWZmZXJQcm9jZXNzaW5nICYmIHN0YXRlLmJ1ZmZlcmVkUmVxdWVzdCkgY2xlYXJCdWZmZXIodGhpcywgc3RhdGUpO1xuICB9XG59O1xuXG5Xcml0YWJsZS5wcm90b3R5cGUuc2V0RGVmYXVsdEVuY29kaW5nID0gZnVuY3Rpb24gc2V0RGVmYXVsdEVuY29kaW5nKGVuY29kaW5nKSB7XG4gIC8vIG5vZGU6OlBhcnNlRW5jb2RpbmcoKSByZXF1aXJlcyBsb3dlciBjYXNlLlxuICBpZiAodHlwZW9mIGVuY29kaW5nID09PSAnc3RyaW5nJykgZW5jb2RpbmcgPSBlbmNvZGluZy50b0xvd2VyQ2FzZSgpO1xuICBpZiAoIShbJ2hleCcsICd1dGY4JywgJ3V0Zi04JywgJ2FzY2lpJywgJ2JpbmFyeScsICdiYXNlNjQnLCAndWNzMicsICd1Y3MtMicsICd1dGYxNmxlJywgJ3V0Zi0xNmxlJywgJ3JhdyddLmluZGV4T2YoKGVuY29kaW5nICsgJycpLnRvTG93ZXJDYXNlKCkpID4gLTEpKSB0aHJvdyBuZXcgVHlwZUVycm9yKCdVbmtub3duIGVuY29kaW5nOiAnICsgZW5jb2RpbmcpO1xuICB0aGlzLl93cml0YWJsZVN0YXRlLmRlZmF1bHRFbmNvZGluZyA9IGVuY29kaW5nO1xuICByZXR1cm4gdGhpcztcbn07XG5cbmZ1bmN0aW9uIGRlY29kZUNodW5rKHN0YXRlLCBjaHVuaywgZW5jb2RpbmcpIHtcbiAgaWYgKCFzdGF0ZS5vYmplY3RNb2RlICYmIHN0YXRlLmRlY29kZVN0cmluZ3MgIT09IGZhbHNlICYmIHR5cGVvZiBjaHVuayA9PT0gJ3N0cmluZycpIHtcbiAgICBjaHVuayA9IEJ1ZmZlci5mcm9tKGNodW5rLCBlbmNvZGluZyk7XG4gIH1cbiAgcmV0dXJuIGNodW5rO1xufVxuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoV3JpdGFibGUucHJvdG90eXBlLCAnd3JpdGFibGVIaWdoV2F0ZXJNYXJrJywge1xuICAvLyBtYWtpbmcgaXQgZXhwbGljaXQgdGhpcyBwcm9wZXJ0eSBpcyBub3QgZW51bWVyYWJsZVxuICAvLyBiZWNhdXNlIG90aGVyd2lzZSBzb21lIHByb3RvdHlwZSBtYW5pcHVsYXRpb24gaW5cbiAgLy8gdXNlcmxhbmQgd2lsbCBmYWlsXG4gIGVudW1lcmFibGU6IGZhbHNlLFxuICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gdGhpcy5fd3JpdGFibGVTdGF0ZS5oaWdoV2F0ZXJNYXJrO1xuICB9XG59KTtcblxuLy8gaWYgd2UncmUgYWxyZWFkeSB3cml0aW5nIHNvbWV0aGluZywgdGhlbiBqdXN0IHB1dCB0aGlzXG4vLyBpbiB0aGUgcXVldWUsIGFuZCB3YWl0IG91ciB0dXJuLiAgT3RoZXJ3aXNlLCBjYWxsIF93cml0ZVxuLy8gSWYgd2UgcmV0dXJuIGZhbHNlLCB0aGVuIHdlIG5lZWQgYSBkcmFpbiBldmVudCwgc28gc2V0IHRoYXQgZmxhZy5cbmZ1bmN0aW9uIHdyaXRlT3JCdWZmZXIoc3RyZWFtLCBzdGF0ZSwgaXNCdWYsIGNodW5rLCBlbmNvZGluZywgY2IpIHtcbiAgaWYgKCFpc0J1Zikge1xuICAgIHZhciBuZXdDaHVuayA9IGRlY29kZUNodW5rKHN0YXRlLCBjaHVuaywgZW5jb2RpbmcpO1xuICAgIGlmIChjaHVuayAhPT0gbmV3Q2h1bmspIHtcbiAgICAgIGlzQnVmID0gdHJ1ZTtcbiAgICAgIGVuY29kaW5nID0gJ2J1ZmZlcic7XG4gICAgICBjaHVuayA9IG5ld0NodW5rO1xuICAgIH1cbiAgfVxuICB2YXIgbGVuID0gc3RhdGUub2JqZWN0TW9kZSA/IDEgOiBjaHVuay5sZW5ndGg7XG5cbiAgc3RhdGUubGVuZ3RoICs9IGxlbjtcblxuICB2YXIgcmV0ID0gc3RhdGUubGVuZ3RoIDwgc3RhdGUuaGlnaFdhdGVyTWFyaztcbiAgLy8gd2UgbXVzdCBlbnN1cmUgdGhhdCBwcmV2aW91cyBuZWVkRHJhaW4gd2lsbCBub3QgYmUgcmVzZXQgdG8gZmFsc2UuXG4gIGlmICghcmV0KSBzdGF0ZS5uZWVkRHJhaW4gPSB0cnVlO1xuXG4gIGlmIChzdGF0ZS53cml0aW5nIHx8IHN0YXRlLmNvcmtlZCkge1xuICAgIHZhciBsYXN0ID0gc3RhdGUubGFzdEJ1ZmZlcmVkUmVxdWVzdDtcbiAgICBzdGF0ZS5sYXN0QnVmZmVyZWRSZXF1ZXN0ID0ge1xuICAgICAgY2h1bms6IGNodW5rLFxuICAgICAgZW5jb2Rpbmc6IGVuY29kaW5nLFxuICAgICAgaXNCdWY6IGlzQnVmLFxuICAgICAgY2FsbGJhY2s6IGNiLFxuICAgICAgbmV4dDogbnVsbFxuICAgIH07XG4gICAgaWYgKGxhc3QpIHtcbiAgICAgIGxhc3QubmV4dCA9IHN0YXRlLmxhc3RCdWZmZXJlZFJlcXVlc3Q7XG4gICAgfSBlbHNlIHtcbiAgICAgIHN0YXRlLmJ1ZmZlcmVkUmVxdWVzdCA9IHN0YXRlLmxhc3RCdWZmZXJlZFJlcXVlc3Q7XG4gICAgfVxuICAgIHN0YXRlLmJ1ZmZlcmVkUmVxdWVzdENvdW50ICs9IDE7XG4gIH0gZWxzZSB7XG4gICAgZG9Xcml0ZShzdHJlYW0sIHN0YXRlLCBmYWxzZSwgbGVuLCBjaHVuaywgZW5jb2RpbmcsIGNiKTtcbiAgfVxuXG4gIHJldHVybiByZXQ7XG59XG5cbmZ1bmN0aW9uIGRvV3JpdGUoc3RyZWFtLCBzdGF0ZSwgd3JpdGV2LCBsZW4sIGNodW5rLCBlbmNvZGluZywgY2IpIHtcbiAgc3RhdGUud3JpdGVsZW4gPSBsZW47XG4gIHN0YXRlLndyaXRlY2IgPSBjYjtcbiAgc3RhdGUud3JpdGluZyA9IHRydWU7XG4gIHN0YXRlLnN5bmMgPSB0cnVlO1xuICBpZiAod3JpdGV2KSBzdHJlYW0uX3dyaXRldihjaHVuaywgc3RhdGUub253cml0ZSk7ZWxzZSBzdHJlYW0uX3dyaXRlKGNodW5rLCBlbmNvZGluZywgc3RhdGUub253cml0ZSk7XG4gIHN0YXRlLnN5bmMgPSBmYWxzZTtcbn1cblxuZnVuY3Rpb24gb253cml0ZUVycm9yKHN0cmVhbSwgc3RhdGUsIHN5bmMsIGVyLCBjYikge1xuICAtLXN0YXRlLnBlbmRpbmdjYjtcblxuICBpZiAoc3luYykge1xuICAgIC8vIGRlZmVyIHRoZSBjYWxsYmFjayBpZiB3ZSBhcmUgYmVpbmcgY2FsbGVkIHN5bmNocm9ub3VzbHlcbiAgICAvLyB0byBhdm9pZCBwaWxpbmcgdXAgdGhpbmdzIG9uIHRoZSBzdGFja1xuICAgIHBuYS5uZXh0VGljayhjYiwgZXIpO1xuICAgIC8vIHRoaXMgY2FuIGVtaXQgZmluaXNoLCBhbmQgaXQgd2lsbCBhbHdheXMgaGFwcGVuXG4gICAgLy8gYWZ0ZXIgZXJyb3JcbiAgICBwbmEubmV4dFRpY2soZmluaXNoTWF5YmUsIHN0cmVhbSwgc3RhdGUpO1xuICAgIHN0cmVhbS5fd3JpdGFibGVTdGF0ZS5lcnJvckVtaXR0ZWQgPSB0cnVlO1xuICAgIHN0cmVhbS5lbWl0KCdlcnJvcicsIGVyKTtcbiAgfSBlbHNlIHtcbiAgICAvLyB0aGUgY2FsbGVyIGV4cGVjdCB0aGlzIHRvIGhhcHBlbiBiZWZvcmUgaWZcbiAgICAvLyBpdCBpcyBhc3luY1xuICAgIGNiKGVyKTtcbiAgICBzdHJlYW0uX3dyaXRhYmxlU3RhdGUuZXJyb3JFbWl0dGVkID0gdHJ1ZTtcbiAgICBzdHJlYW0uZW1pdCgnZXJyb3InLCBlcik7XG4gICAgLy8gdGhpcyBjYW4gZW1pdCBmaW5pc2gsIGJ1dCBmaW5pc2ggbXVzdFxuICAgIC8vIGFsd2F5cyBmb2xsb3cgZXJyb3JcbiAgICBmaW5pc2hNYXliZShzdHJlYW0sIHN0YXRlKTtcbiAgfVxufVxuXG5mdW5jdGlvbiBvbndyaXRlU3RhdGVVcGRhdGUoc3RhdGUpIHtcbiAgc3RhdGUud3JpdGluZyA9IGZhbHNlO1xuICBzdGF0ZS53cml0ZWNiID0gbnVsbDtcbiAgc3RhdGUubGVuZ3RoIC09IHN0YXRlLndyaXRlbGVuO1xuICBzdGF0ZS53cml0ZWxlbiA9IDA7XG59XG5cbmZ1bmN0aW9uIG9ud3JpdGUoc3RyZWFtLCBlcikge1xuICB2YXIgc3RhdGUgPSBzdHJlYW0uX3dyaXRhYmxlU3RhdGU7XG4gIHZhciBzeW5jID0gc3RhdGUuc3luYztcbiAgdmFyIGNiID0gc3RhdGUud3JpdGVjYjtcblxuICBvbndyaXRlU3RhdGVVcGRhdGUoc3RhdGUpO1xuXG4gIGlmIChlcikgb253cml0ZUVycm9yKHN0cmVhbSwgc3RhdGUsIHN5bmMsIGVyLCBjYik7ZWxzZSB7XG4gICAgLy8gQ2hlY2sgaWYgd2UncmUgYWN0dWFsbHkgcmVhZHkgdG8gZmluaXNoLCBidXQgZG9uJ3QgZW1pdCB5ZXRcbiAgICB2YXIgZmluaXNoZWQgPSBuZWVkRmluaXNoKHN0YXRlKTtcblxuICAgIGlmICghZmluaXNoZWQgJiYgIXN0YXRlLmNvcmtlZCAmJiAhc3RhdGUuYnVmZmVyUHJvY2Vzc2luZyAmJiBzdGF0ZS5idWZmZXJlZFJlcXVlc3QpIHtcbiAgICAgIGNsZWFyQnVmZmVyKHN0cmVhbSwgc3RhdGUpO1xuICAgIH1cblxuICAgIGlmIChzeW5jKSB7XG4gICAgICAvKjxyZXBsYWNlbWVudD4qL1xuICAgICAgYXN5bmNXcml0ZShhZnRlcldyaXRlLCBzdHJlYW0sIHN0YXRlLCBmaW5pc2hlZCwgY2IpO1xuICAgICAgLyo8L3JlcGxhY2VtZW50PiovXG4gICAgfSBlbHNlIHtcbiAgICAgIGFmdGVyV3JpdGUoc3RyZWFtLCBzdGF0ZSwgZmluaXNoZWQsIGNiKTtcbiAgICB9XG4gIH1cbn1cblxuZnVuY3Rpb24gYWZ0ZXJXcml0ZShzdHJlYW0sIHN0YXRlLCBmaW5pc2hlZCwgY2IpIHtcbiAgaWYgKCFmaW5pc2hlZCkgb253cml0ZURyYWluKHN0cmVhbSwgc3RhdGUpO1xuICBzdGF0ZS5wZW5kaW5nY2ItLTtcbiAgY2IoKTtcbiAgZmluaXNoTWF5YmUoc3RyZWFtLCBzdGF0ZSk7XG59XG5cbi8vIE11c3QgZm9yY2UgY2FsbGJhY2sgdG8gYmUgY2FsbGVkIG9uIG5leHRUaWNrLCBzbyB0aGF0IHdlIGRvbid0XG4vLyBlbWl0ICdkcmFpbicgYmVmb3JlIHRoZSB3cml0ZSgpIGNvbnN1bWVyIGdldHMgdGhlICdmYWxzZScgcmV0dXJuXG4vLyB2YWx1ZSwgYW5kIGhhcyBhIGNoYW5jZSB0byBhdHRhY2ggYSAnZHJhaW4nIGxpc3RlbmVyLlxuZnVuY3Rpb24gb253cml0ZURyYWluKHN0cmVhbSwgc3RhdGUpIHtcbiAgaWYgKHN0YXRlLmxlbmd0aCA9PT0gMCAmJiBzdGF0ZS5uZWVkRHJhaW4pIHtcbiAgICBzdGF0ZS5uZWVkRHJhaW4gPSBmYWxzZTtcbiAgICBzdHJlYW0uZW1pdCgnZHJhaW4nKTtcbiAgfVxufVxuXG4vLyBpZiB0aGVyZSdzIHNvbWV0aGluZyBpbiB0aGUgYnVmZmVyIHdhaXRpbmcsIHRoZW4gcHJvY2VzcyBpdFxuZnVuY3Rpb24gY2xlYXJCdWZmZXIoc3RyZWFtLCBzdGF0ZSkge1xuICBzdGF0ZS5idWZmZXJQcm9jZXNzaW5nID0gdHJ1ZTtcbiAgdmFyIGVudHJ5ID0gc3RhdGUuYnVmZmVyZWRSZXF1ZXN0O1xuXG4gIGlmIChzdHJlYW0uX3dyaXRldiAmJiBlbnRyeSAmJiBlbnRyeS5uZXh0KSB7XG4gICAgLy8gRmFzdCBjYXNlLCB3cml0ZSBldmVyeXRoaW5nIHVzaW5nIF93cml0ZXYoKVxuICAgIHZhciBsID0gc3RhdGUuYnVmZmVyZWRSZXF1ZXN0Q291bnQ7XG4gICAgdmFyIGJ1ZmZlciA9IG5ldyBBcnJheShsKTtcbiAgICB2YXIgaG9sZGVyID0gc3RhdGUuY29ya2VkUmVxdWVzdHNGcmVlO1xuICAgIGhvbGRlci5lbnRyeSA9IGVudHJ5O1xuXG4gICAgdmFyIGNvdW50ID0gMDtcbiAgICB2YXIgYWxsQnVmZmVycyA9IHRydWU7XG4gICAgd2hpbGUgKGVudHJ5KSB7XG4gICAgICBidWZmZXJbY291bnRdID0gZW50cnk7XG4gICAgICBpZiAoIWVudHJ5LmlzQnVmKSBhbGxCdWZmZXJzID0gZmFsc2U7XG4gICAgICBlbnRyeSA9IGVudHJ5Lm5leHQ7XG4gICAgICBjb3VudCArPSAxO1xuICAgIH1cbiAgICBidWZmZXIuYWxsQnVmZmVycyA9IGFsbEJ1ZmZlcnM7XG5cbiAgICBkb1dyaXRlKHN0cmVhbSwgc3RhdGUsIHRydWUsIHN0YXRlLmxlbmd0aCwgYnVmZmVyLCAnJywgaG9sZGVyLmZpbmlzaCk7XG5cbiAgICAvLyBkb1dyaXRlIGlzIGFsbW9zdCBhbHdheXMgYXN5bmMsIGRlZmVyIHRoZXNlIHRvIHNhdmUgYSBiaXQgb2YgdGltZVxuICAgIC8vIGFzIHRoZSBob3QgcGF0aCBlbmRzIHdpdGggZG9Xcml0ZVxuICAgIHN0YXRlLnBlbmRpbmdjYisrO1xuICAgIHN0YXRlLmxhc3RCdWZmZXJlZFJlcXVlc3QgPSBudWxsO1xuICAgIGlmIChob2xkZXIubmV4dCkge1xuICAgICAgc3RhdGUuY29ya2VkUmVxdWVzdHNGcmVlID0gaG9sZGVyLm5leHQ7XG4gICAgICBob2xkZXIubmV4dCA9IG51bGw7XG4gICAgfSBlbHNlIHtcbiAgICAgIHN0YXRlLmNvcmtlZFJlcXVlc3RzRnJlZSA9IG5ldyBDb3JrZWRSZXF1ZXN0KHN0YXRlKTtcbiAgICB9XG4gICAgc3RhdGUuYnVmZmVyZWRSZXF1ZXN0Q291bnQgPSAwO1xuICB9IGVsc2Uge1xuICAgIC8vIFNsb3cgY2FzZSwgd3JpdGUgY2h1bmtzIG9uZS1ieS1vbmVcbiAgICB3aGlsZSAoZW50cnkpIHtcbiAgICAgIHZhciBjaHVuayA9IGVudHJ5LmNodW5rO1xuICAgICAgdmFyIGVuY29kaW5nID0gZW50cnkuZW5jb2Rpbmc7XG4gICAgICB2YXIgY2IgPSBlbnRyeS5jYWxsYmFjaztcbiAgICAgIHZhciBsZW4gPSBzdGF0ZS5vYmplY3RNb2RlID8gMSA6IGNodW5rLmxlbmd0aDtcblxuICAgICAgZG9Xcml0ZShzdHJlYW0sIHN0YXRlLCBmYWxzZSwgbGVuLCBjaHVuaywgZW5jb2RpbmcsIGNiKTtcbiAgICAgIGVudHJ5ID0gZW50cnkubmV4dDtcbiAgICAgIHN0YXRlLmJ1ZmZlcmVkUmVxdWVzdENvdW50LS07XG4gICAgICAvLyBpZiB3ZSBkaWRuJ3QgY2FsbCB0aGUgb253cml0ZSBpbW1lZGlhdGVseSwgdGhlblxuICAgICAgLy8gaXQgbWVhbnMgdGhhdCB3ZSBuZWVkIHRvIHdhaXQgdW50aWwgaXQgZG9lcy5cbiAgICAgIC8vIGFsc28sIHRoYXQgbWVhbnMgdGhhdCB0aGUgY2h1bmsgYW5kIGNiIGFyZSBjdXJyZW50bHlcbiAgICAgIC8vIGJlaW5nIHByb2Nlc3NlZCwgc28gbW92ZSB0aGUgYnVmZmVyIGNvdW50ZXIgcGFzdCB0aGVtLlxuICAgICAgaWYgKHN0YXRlLndyaXRpbmcpIHtcbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKGVudHJ5ID09PSBudWxsKSBzdGF0ZS5sYXN0QnVmZmVyZWRSZXF1ZXN0ID0gbnVsbDtcbiAgfVxuXG4gIHN0YXRlLmJ1ZmZlcmVkUmVxdWVzdCA9IGVudHJ5O1xuICBzdGF0ZS5idWZmZXJQcm9jZXNzaW5nID0gZmFsc2U7XG59XG5cbldyaXRhYmxlLnByb3RvdHlwZS5fd3JpdGUgPSBmdW5jdGlvbiAoY2h1bmssIGVuY29kaW5nLCBjYikge1xuICBjYihuZXcgRXJyb3IoJ193cml0ZSgpIGlzIG5vdCBpbXBsZW1lbnRlZCcpKTtcbn07XG5cbldyaXRhYmxlLnByb3RvdHlwZS5fd3JpdGV2ID0gbnVsbDtcblxuV3JpdGFibGUucHJvdG90eXBlLmVuZCA9IGZ1bmN0aW9uIChjaHVuaywgZW5jb2RpbmcsIGNiKSB7XG4gIHZhciBzdGF0ZSA9IHRoaXMuX3dyaXRhYmxlU3RhdGU7XG5cbiAgaWYgKHR5cGVvZiBjaHVuayA9PT0gJ2Z1bmN0aW9uJykge1xuICAgIGNiID0gY2h1bms7XG4gICAgY2h1bmsgPSBudWxsO1xuICAgIGVuY29kaW5nID0gbnVsbDtcbiAgfSBlbHNlIGlmICh0eXBlb2YgZW5jb2RpbmcgPT09ICdmdW5jdGlvbicpIHtcbiAgICBjYiA9IGVuY29kaW5nO1xuICAgIGVuY29kaW5nID0gbnVsbDtcbiAgfVxuXG4gIGlmIChjaHVuayAhPT0gbnVsbCAmJiBjaHVuayAhPT0gdW5kZWZpbmVkKSB0aGlzLndyaXRlKGNodW5rLCBlbmNvZGluZyk7XG5cbiAgLy8gLmVuZCgpIGZ1bGx5IHVuY29ya3NcbiAgaWYgKHN0YXRlLmNvcmtlZCkge1xuICAgIHN0YXRlLmNvcmtlZCA9IDE7XG4gICAgdGhpcy51bmNvcmsoKTtcbiAgfVxuXG4gIC8vIGlnbm9yZSB1bm5lY2Vzc2FyeSBlbmQoKSBjYWxscy5cbiAgaWYgKCFzdGF0ZS5lbmRpbmcgJiYgIXN0YXRlLmZpbmlzaGVkKSBlbmRXcml0YWJsZSh0aGlzLCBzdGF0ZSwgY2IpO1xufTtcblxuZnVuY3Rpb24gbmVlZEZpbmlzaChzdGF0ZSkge1xuICByZXR1cm4gc3RhdGUuZW5kaW5nICYmIHN0YXRlLmxlbmd0aCA9PT0gMCAmJiBzdGF0ZS5idWZmZXJlZFJlcXVlc3QgPT09IG51bGwgJiYgIXN0YXRlLmZpbmlzaGVkICYmICFzdGF0ZS53cml0aW5nO1xufVxuZnVuY3Rpb24gY2FsbEZpbmFsKHN0cmVhbSwgc3RhdGUpIHtcbiAgc3RyZWFtLl9maW5hbChmdW5jdGlvbiAoZXJyKSB7XG4gICAgc3RhdGUucGVuZGluZ2NiLS07XG4gICAgaWYgKGVycikge1xuICAgICAgc3RyZWFtLmVtaXQoJ2Vycm9yJywgZXJyKTtcbiAgICB9XG4gICAgc3RhdGUucHJlZmluaXNoZWQgPSB0cnVlO1xuICAgIHN0cmVhbS5lbWl0KCdwcmVmaW5pc2gnKTtcbiAgICBmaW5pc2hNYXliZShzdHJlYW0sIHN0YXRlKTtcbiAgfSk7XG59XG5mdW5jdGlvbiBwcmVmaW5pc2goc3RyZWFtLCBzdGF0ZSkge1xuICBpZiAoIXN0YXRlLnByZWZpbmlzaGVkICYmICFzdGF0ZS5maW5hbENhbGxlZCkge1xuICAgIGlmICh0eXBlb2Ygc3RyZWFtLl9maW5hbCA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgc3RhdGUucGVuZGluZ2NiKys7XG4gICAgICBzdGF0ZS5maW5hbENhbGxlZCA9IHRydWU7XG4gICAgICBwbmEubmV4dFRpY2soY2FsbEZpbmFsLCBzdHJlYW0sIHN0YXRlKTtcbiAgICB9IGVsc2Uge1xuICAgICAgc3RhdGUucHJlZmluaXNoZWQgPSB0cnVlO1xuICAgICAgc3RyZWFtLmVtaXQoJ3ByZWZpbmlzaCcpO1xuICAgIH1cbiAgfVxufVxuXG5mdW5jdGlvbiBmaW5pc2hNYXliZShzdHJlYW0sIHN0YXRlKSB7XG4gIHZhciBuZWVkID0gbmVlZEZpbmlzaChzdGF0ZSk7XG4gIGlmIChuZWVkKSB7XG4gICAgcHJlZmluaXNoKHN0cmVhbSwgc3RhdGUpO1xuICAgIGlmIChzdGF0ZS5wZW5kaW5nY2IgPT09IDApIHtcbiAgICAgIHN0YXRlLmZpbmlzaGVkID0gdHJ1ZTtcbiAgICAgIHN0cmVhbS5lbWl0KCdmaW5pc2gnKTtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIG5lZWQ7XG59XG5cbmZ1bmN0aW9uIGVuZFdyaXRhYmxlKHN0cmVhbSwgc3RhdGUsIGNiKSB7XG4gIHN0YXRlLmVuZGluZyA9IHRydWU7XG4gIGZpbmlzaE1heWJlKHN0cmVhbSwgc3RhdGUpO1xuICBpZiAoY2IpIHtcbiAgICBpZiAoc3RhdGUuZmluaXNoZWQpIHBuYS5uZXh0VGljayhjYik7ZWxzZSBzdHJlYW0ub25jZSgnZmluaXNoJywgY2IpO1xuICB9XG4gIHN0YXRlLmVuZGVkID0gdHJ1ZTtcbiAgc3RyZWFtLndyaXRhYmxlID0gZmFsc2U7XG59XG5cbmZ1bmN0aW9uIG9uQ29ya2VkRmluaXNoKGNvcmtSZXEsIHN0YXRlLCBlcnIpIHtcbiAgdmFyIGVudHJ5ID0gY29ya1JlcS5lbnRyeTtcbiAgY29ya1JlcS5lbnRyeSA9IG51bGw7XG4gIHdoaWxlIChlbnRyeSkge1xuICAgIHZhciBjYiA9IGVudHJ5LmNhbGxiYWNrO1xuICAgIHN0YXRlLnBlbmRpbmdjYi0tO1xuICAgIGNiKGVycik7XG4gICAgZW50cnkgPSBlbnRyeS5uZXh0O1xuICB9XG4gIGlmIChzdGF0ZS5jb3JrZWRSZXF1ZXN0c0ZyZWUpIHtcbiAgICBzdGF0ZS5jb3JrZWRSZXF1ZXN0c0ZyZWUubmV4dCA9IGNvcmtSZXE7XG4gIH0gZWxzZSB7XG4gICAgc3RhdGUuY29ya2VkUmVxdWVzdHNGcmVlID0gY29ya1JlcTtcbiAgfVxufVxuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoV3JpdGFibGUucHJvdG90eXBlLCAnZGVzdHJveWVkJywge1xuICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICBpZiAodGhpcy5fd3JpdGFibGVTdGF0ZSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIHJldHVybiB0aGlzLl93cml0YWJsZVN0YXRlLmRlc3Ryb3llZDtcbiAgfSxcbiAgc2V0OiBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAvLyB3ZSBpZ25vcmUgdGhlIHZhbHVlIGlmIHRoZSBzdHJlYW1cbiAgICAvLyBoYXMgbm90IGJlZW4gaW5pdGlhbGl6ZWQgeWV0XG4gICAgaWYgKCF0aGlzLl93cml0YWJsZVN0YXRlKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgLy8gYmFja3dhcmQgY29tcGF0aWJpbGl0eSwgdGhlIHVzZXIgaXMgZXhwbGljaXRseVxuICAgIC8vIG1hbmFnaW5nIGRlc3Ryb3llZFxuICAgIHRoaXMuX3dyaXRhYmxlU3RhdGUuZGVzdHJveWVkID0gdmFsdWU7XG4gIH1cbn0pO1xuXG5Xcml0YWJsZS5wcm90b3R5cGUuZGVzdHJveSA9IGRlc3Ryb3lJbXBsLmRlc3Ryb3k7XG5Xcml0YWJsZS5wcm90b3R5cGUuX3VuZGVzdHJveSA9IGRlc3Ryb3lJbXBsLnVuZGVzdHJveTtcbldyaXRhYmxlLnByb3RvdHlwZS5fZGVzdHJveSA9IGZ1bmN0aW9uIChlcnIsIGNiKSB7XG4gIHRoaXMuZW5kKCk7XG4gIGNiKGVycik7XG59OyIsIid1c2Ugc3RyaWN0JztcblxuZnVuY3Rpb24gX2NsYXNzQ2FsbENoZWNrKGluc3RhbmNlLCBDb25zdHJ1Y3RvcikgeyBpZiAoIShpbnN0YW5jZSBpbnN0YW5jZW9mIENvbnN0cnVjdG9yKSkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpOyB9IH1cblxudmFyIEJ1ZmZlciA9IHJlcXVpcmUoJ3NhZmUtYnVmZmVyJykuQnVmZmVyO1xudmFyIHV0aWwgPSByZXF1aXJlKCd1dGlsJyk7XG5cbmZ1bmN0aW9uIGNvcHlCdWZmZXIoc3JjLCB0YXJnZXQsIG9mZnNldCkge1xuICBzcmMuY29weSh0YXJnZXQsIG9mZnNldCk7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKCkge1xuICBmdW5jdGlvbiBCdWZmZXJMaXN0KCkge1xuICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBCdWZmZXJMaXN0KTtcblxuICAgIHRoaXMuaGVhZCA9IG51bGw7XG4gICAgdGhpcy50YWlsID0gbnVsbDtcbiAgICB0aGlzLmxlbmd0aCA9IDA7XG4gIH1cblxuICBCdWZmZXJMaXN0LnByb3RvdHlwZS5wdXNoID0gZnVuY3Rpb24gcHVzaCh2KSB7XG4gICAgdmFyIGVudHJ5ID0geyBkYXRhOiB2LCBuZXh0OiBudWxsIH07XG4gICAgaWYgKHRoaXMubGVuZ3RoID4gMCkgdGhpcy50YWlsLm5leHQgPSBlbnRyeTtlbHNlIHRoaXMuaGVhZCA9IGVudHJ5O1xuICAgIHRoaXMudGFpbCA9IGVudHJ5O1xuICAgICsrdGhpcy5sZW5ndGg7XG4gIH07XG5cbiAgQnVmZmVyTGlzdC5wcm90b3R5cGUudW5zaGlmdCA9IGZ1bmN0aW9uIHVuc2hpZnQodikge1xuICAgIHZhciBlbnRyeSA9IHsgZGF0YTogdiwgbmV4dDogdGhpcy5oZWFkIH07XG4gICAgaWYgKHRoaXMubGVuZ3RoID09PSAwKSB0aGlzLnRhaWwgPSBlbnRyeTtcbiAgICB0aGlzLmhlYWQgPSBlbnRyeTtcbiAgICArK3RoaXMubGVuZ3RoO1xuICB9O1xuXG4gIEJ1ZmZlckxpc3QucHJvdG90eXBlLnNoaWZ0ID0gZnVuY3Rpb24gc2hpZnQoKSB7XG4gICAgaWYgKHRoaXMubGVuZ3RoID09PSAwKSByZXR1cm47XG4gICAgdmFyIHJldCA9IHRoaXMuaGVhZC5kYXRhO1xuICAgIGlmICh0aGlzLmxlbmd0aCA9PT0gMSkgdGhpcy5oZWFkID0gdGhpcy50YWlsID0gbnVsbDtlbHNlIHRoaXMuaGVhZCA9IHRoaXMuaGVhZC5uZXh0O1xuICAgIC0tdGhpcy5sZW5ndGg7XG4gICAgcmV0dXJuIHJldDtcbiAgfTtcblxuICBCdWZmZXJMaXN0LnByb3RvdHlwZS5jbGVhciA9IGZ1bmN0aW9uIGNsZWFyKCkge1xuICAgIHRoaXMuaGVhZCA9IHRoaXMudGFpbCA9IG51bGw7XG4gICAgdGhpcy5sZW5ndGggPSAwO1xuICB9O1xuXG4gIEJ1ZmZlckxpc3QucHJvdG90eXBlLmpvaW4gPSBmdW5jdGlvbiBqb2luKHMpIHtcbiAgICBpZiAodGhpcy5sZW5ndGggPT09IDApIHJldHVybiAnJztcbiAgICB2YXIgcCA9IHRoaXMuaGVhZDtcbiAgICB2YXIgcmV0ID0gJycgKyBwLmRhdGE7XG4gICAgd2hpbGUgKHAgPSBwLm5leHQpIHtcbiAgICAgIHJldCArPSBzICsgcC5kYXRhO1xuICAgIH1yZXR1cm4gcmV0O1xuICB9O1xuXG4gIEJ1ZmZlckxpc3QucHJvdG90eXBlLmNvbmNhdCA9IGZ1bmN0aW9uIGNvbmNhdChuKSB7XG4gICAgaWYgKHRoaXMubGVuZ3RoID09PSAwKSByZXR1cm4gQnVmZmVyLmFsbG9jKDApO1xuICAgIGlmICh0aGlzLmxlbmd0aCA9PT0gMSkgcmV0dXJuIHRoaXMuaGVhZC5kYXRhO1xuICAgIHZhciByZXQgPSBCdWZmZXIuYWxsb2NVbnNhZmUobiA+Pj4gMCk7XG4gICAgdmFyIHAgPSB0aGlzLmhlYWQ7XG4gICAgdmFyIGkgPSAwO1xuICAgIHdoaWxlIChwKSB7XG4gICAgICBjb3B5QnVmZmVyKHAuZGF0YSwgcmV0LCBpKTtcbiAgICAgIGkgKz0gcC5kYXRhLmxlbmd0aDtcbiAgICAgIHAgPSBwLm5leHQ7XG4gICAgfVxuICAgIHJldHVybiByZXQ7XG4gIH07XG5cbiAgcmV0dXJuIEJ1ZmZlckxpc3Q7XG59KCk7XG5cbmlmICh1dGlsICYmIHV0aWwuaW5zcGVjdCAmJiB1dGlsLmluc3BlY3QuY3VzdG9tKSB7XG4gIG1vZHVsZS5leHBvcnRzLnByb3RvdHlwZVt1dGlsLmluc3BlY3QuY3VzdG9tXSA9IGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgb2JqID0gdXRpbC5pbnNwZWN0KHsgbGVuZ3RoOiB0aGlzLmxlbmd0aCB9KTtcbiAgICByZXR1cm4gdGhpcy5jb25zdHJ1Y3Rvci5uYW1lICsgJyAnICsgb2JqO1xuICB9O1xufSIsIid1c2Ugc3RyaWN0JztcblxuLyo8cmVwbGFjZW1lbnQ+Ki9cblxudmFyIHBuYSA9IHJlcXVpcmUoJ3Byb2Nlc3MtbmV4dGljay1hcmdzJyk7XG4vKjwvcmVwbGFjZW1lbnQ+Ki9cblxuLy8gdW5kb2N1bWVudGVkIGNiKCkgQVBJLCBuZWVkZWQgZm9yIGNvcmUsIG5vdCBmb3IgcHVibGljIEFQSVxuZnVuY3Rpb24gZGVzdHJveShlcnIsIGNiKSB7XG4gIHZhciBfdGhpcyA9IHRoaXM7XG5cbiAgdmFyIHJlYWRhYmxlRGVzdHJveWVkID0gdGhpcy5fcmVhZGFibGVTdGF0ZSAmJiB0aGlzLl9yZWFkYWJsZVN0YXRlLmRlc3Ryb3llZDtcbiAgdmFyIHdyaXRhYmxlRGVzdHJveWVkID0gdGhpcy5fd3JpdGFibGVTdGF0ZSAmJiB0aGlzLl93cml0YWJsZVN0YXRlLmRlc3Ryb3llZDtcblxuICBpZiAocmVhZGFibGVEZXN0cm95ZWQgfHwgd3JpdGFibGVEZXN0cm95ZWQpIHtcbiAgICBpZiAoY2IpIHtcbiAgICAgIGNiKGVycik7XG4gICAgfSBlbHNlIGlmIChlcnIgJiYgKCF0aGlzLl93cml0YWJsZVN0YXRlIHx8ICF0aGlzLl93cml0YWJsZVN0YXRlLmVycm9yRW1pdHRlZCkpIHtcbiAgICAgIHBuYS5uZXh0VGljayhlbWl0RXJyb3JOVCwgdGhpcywgZXJyKTtcbiAgICB9XG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cblxuICAvLyB3ZSBzZXQgZGVzdHJveWVkIHRvIHRydWUgYmVmb3JlIGZpcmluZyBlcnJvciBjYWxsYmFja3MgaW4gb3JkZXJcbiAgLy8gdG8gbWFrZSBpdCByZS1lbnRyYW5jZSBzYWZlIGluIGNhc2UgZGVzdHJveSgpIGlzIGNhbGxlZCB3aXRoaW4gY2FsbGJhY2tzXG5cbiAgaWYgKHRoaXMuX3JlYWRhYmxlU3RhdGUpIHtcbiAgICB0aGlzLl9yZWFkYWJsZVN0YXRlLmRlc3Ryb3llZCA9IHRydWU7XG4gIH1cblxuICAvLyBpZiB0aGlzIGlzIGEgZHVwbGV4IHN0cmVhbSBtYXJrIHRoZSB3cml0YWJsZSBwYXJ0IGFzIGRlc3Ryb3llZCBhcyB3ZWxsXG4gIGlmICh0aGlzLl93cml0YWJsZVN0YXRlKSB7XG4gICAgdGhpcy5fd3JpdGFibGVTdGF0ZS5kZXN0cm95ZWQgPSB0cnVlO1xuICB9XG5cbiAgdGhpcy5fZGVzdHJveShlcnIgfHwgbnVsbCwgZnVuY3Rpb24gKGVycikge1xuICAgIGlmICghY2IgJiYgZXJyKSB7XG4gICAgICBwbmEubmV4dFRpY2soZW1pdEVycm9yTlQsIF90aGlzLCBlcnIpO1xuICAgICAgaWYgKF90aGlzLl93cml0YWJsZVN0YXRlKSB7XG4gICAgICAgIF90aGlzLl93cml0YWJsZVN0YXRlLmVycm9yRW1pdHRlZCA9IHRydWU7XG4gICAgICB9XG4gICAgfSBlbHNlIGlmIChjYikge1xuICAgICAgY2IoZXJyKTtcbiAgICB9XG4gIH0pO1xuXG4gIHJldHVybiB0aGlzO1xufVxuXG5mdW5jdGlvbiB1bmRlc3Ryb3koKSB7XG4gIGlmICh0aGlzLl9yZWFkYWJsZVN0YXRlKSB7XG4gICAgdGhpcy5fcmVhZGFibGVTdGF0ZS5kZXN0cm95ZWQgPSBmYWxzZTtcbiAgICB0aGlzLl9yZWFkYWJsZVN0YXRlLnJlYWRpbmcgPSBmYWxzZTtcbiAgICB0aGlzLl9yZWFkYWJsZVN0YXRlLmVuZGVkID0gZmFsc2U7XG4gICAgdGhpcy5fcmVhZGFibGVTdGF0ZS5lbmRFbWl0dGVkID0gZmFsc2U7XG4gIH1cblxuICBpZiAodGhpcy5fd3JpdGFibGVTdGF0ZSkge1xuICAgIHRoaXMuX3dyaXRhYmxlU3RhdGUuZGVzdHJveWVkID0gZmFsc2U7XG4gICAgdGhpcy5fd3JpdGFibGVTdGF0ZS5lbmRlZCA9IGZhbHNlO1xuICAgIHRoaXMuX3dyaXRhYmxlU3RhdGUuZW5kaW5nID0gZmFsc2U7XG4gICAgdGhpcy5fd3JpdGFibGVTdGF0ZS5maW5pc2hlZCA9IGZhbHNlO1xuICAgIHRoaXMuX3dyaXRhYmxlU3RhdGUuZXJyb3JFbWl0dGVkID0gZmFsc2U7XG4gIH1cbn1cblxuZnVuY3Rpb24gZW1pdEVycm9yTlQoc2VsZiwgZXJyKSB7XG4gIHNlbGYuZW1pdCgnZXJyb3InLCBlcnIpO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IHtcbiAgZGVzdHJveTogZGVzdHJveSxcbiAgdW5kZXN0cm95OiB1bmRlc3Ryb3lcbn07IiwibW9kdWxlLmV4cG9ydHMgPSByZXF1aXJlKCdldmVudHMnKS5FdmVudEVtaXR0ZXI7XG4iLCJtb2R1bGUuZXhwb3J0cyA9IHJlcXVpcmUoJy4vcmVhZGFibGUnKS5QYXNzVGhyb3VnaFxuIiwiZXhwb3J0cyA9IG1vZHVsZS5leHBvcnRzID0gcmVxdWlyZSgnLi9saWIvX3N0cmVhbV9yZWFkYWJsZS5qcycpO1xuZXhwb3J0cy5TdHJlYW0gPSBleHBvcnRzO1xuZXhwb3J0cy5SZWFkYWJsZSA9IGV4cG9ydHM7XG5leHBvcnRzLldyaXRhYmxlID0gcmVxdWlyZSgnLi9saWIvX3N0cmVhbV93cml0YWJsZS5qcycpO1xuZXhwb3J0cy5EdXBsZXggPSByZXF1aXJlKCcuL2xpYi9fc3RyZWFtX2R1cGxleC5qcycpO1xuZXhwb3J0cy5UcmFuc2Zvcm0gPSByZXF1aXJlKCcuL2xpYi9fc3RyZWFtX3RyYW5zZm9ybS5qcycpO1xuZXhwb3J0cy5QYXNzVGhyb3VnaCA9IHJlcXVpcmUoJy4vbGliL19zdHJlYW1fcGFzc3Rocm91Z2guanMnKTtcbiIsIm1vZHVsZS5leHBvcnRzID0gcmVxdWlyZSgnLi9yZWFkYWJsZScpLlRyYW5zZm9ybVxuIiwibW9kdWxlLmV4cG9ydHMgPSByZXF1aXJlKCcuL2xpYi9fc3RyZWFtX3dyaXRhYmxlLmpzJyk7XG4iLCIvKiBlc2xpbnQtZGlzYWJsZSBub2RlL25vLWRlcHJlY2F0ZWQtYXBpICovXG52YXIgYnVmZmVyID0gcmVxdWlyZSgnYnVmZmVyJylcbnZhciBCdWZmZXIgPSBidWZmZXIuQnVmZmVyXG5cbi8vIGFsdGVybmF0aXZlIHRvIHVzaW5nIE9iamVjdC5rZXlzIGZvciBvbGQgYnJvd3NlcnNcbmZ1bmN0aW9uIGNvcHlQcm9wcyAoc3JjLCBkc3QpIHtcbiAgZm9yICh2YXIga2V5IGluIHNyYykge1xuICAgIGRzdFtrZXldID0gc3JjW2tleV1cbiAgfVxufVxuaWYgKEJ1ZmZlci5mcm9tICYmIEJ1ZmZlci5hbGxvYyAmJiBCdWZmZXIuYWxsb2NVbnNhZmUgJiYgQnVmZmVyLmFsbG9jVW5zYWZlU2xvdykge1xuICBtb2R1bGUuZXhwb3J0cyA9IGJ1ZmZlclxufSBlbHNlIHtcbiAgLy8gQ29weSBwcm9wZXJ0aWVzIGZyb20gcmVxdWlyZSgnYnVmZmVyJylcbiAgY29weVByb3BzKGJ1ZmZlciwgZXhwb3J0cylcbiAgZXhwb3J0cy5CdWZmZXIgPSBTYWZlQnVmZmVyXG59XG5cbmZ1bmN0aW9uIFNhZmVCdWZmZXIgKGFyZywgZW5jb2RpbmdPck9mZnNldCwgbGVuZ3RoKSB7XG4gIHJldHVybiBCdWZmZXIoYXJnLCBlbmNvZGluZ09yT2Zmc2V0LCBsZW5ndGgpXG59XG5cbi8vIENvcHkgc3RhdGljIG1ldGhvZHMgZnJvbSBCdWZmZXJcbmNvcHlQcm9wcyhCdWZmZXIsIFNhZmVCdWZmZXIpXG5cblNhZmVCdWZmZXIuZnJvbSA9IGZ1bmN0aW9uIChhcmcsIGVuY29kaW5nT3JPZmZzZXQsIGxlbmd0aCkge1xuICBpZiAodHlwZW9mIGFyZyA9PT0gJ251bWJlcicpIHtcbiAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdBcmd1bWVudCBtdXN0IG5vdCBiZSBhIG51bWJlcicpXG4gIH1cbiAgcmV0dXJuIEJ1ZmZlcihhcmcsIGVuY29kaW5nT3JPZmZzZXQsIGxlbmd0aClcbn1cblxuU2FmZUJ1ZmZlci5hbGxvYyA9IGZ1bmN0aW9uIChzaXplLCBmaWxsLCBlbmNvZGluZykge1xuICBpZiAodHlwZW9mIHNpemUgIT09ICdudW1iZXInKSB7XG4gICAgdGhyb3cgbmV3IFR5cGVFcnJvcignQXJndW1lbnQgbXVzdCBiZSBhIG51bWJlcicpXG4gIH1cbiAgdmFyIGJ1ZiA9IEJ1ZmZlcihzaXplKVxuICBpZiAoZmlsbCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgaWYgKHR5cGVvZiBlbmNvZGluZyA9PT0gJ3N0cmluZycpIHtcbiAgICAgIGJ1Zi5maWxsKGZpbGwsIGVuY29kaW5nKVxuICAgIH0gZWxzZSB7XG4gICAgICBidWYuZmlsbChmaWxsKVxuICAgIH1cbiAgfSBlbHNlIHtcbiAgICBidWYuZmlsbCgwKVxuICB9XG4gIHJldHVybiBidWZcbn1cblxuU2FmZUJ1ZmZlci5hbGxvY1Vuc2FmZSA9IGZ1bmN0aW9uIChzaXplKSB7XG4gIGlmICh0eXBlb2Ygc2l6ZSAhPT0gJ251bWJlcicpIHtcbiAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdBcmd1bWVudCBtdXN0IGJlIGEgbnVtYmVyJylcbiAgfVxuICByZXR1cm4gQnVmZmVyKHNpemUpXG59XG5cblNhZmVCdWZmZXIuYWxsb2NVbnNhZmVTbG93ID0gZnVuY3Rpb24gKHNpemUpIHtcbiAgaWYgKHR5cGVvZiBzaXplICE9PSAnbnVtYmVyJykge1xuICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ0FyZ3VtZW50IG11c3QgYmUgYSBudW1iZXInKVxuICB9XG4gIHJldHVybiBidWZmZXIuU2xvd0J1ZmZlcihzaXplKVxufVxuIiwiOyhmdW5jdGlvbiAoc2F4KSB7IC8vIHdyYXBwZXIgZm9yIG5vbi1ub2RlIGVudnNcbiAgc2F4LnBhcnNlciA9IGZ1bmN0aW9uIChzdHJpY3QsIG9wdCkgeyByZXR1cm4gbmV3IFNBWFBhcnNlcihzdHJpY3QsIG9wdCkgfVxuICBzYXguU0FYUGFyc2VyID0gU0FYUGFyc2VyXG4gIHNheC5TQVhTdHJlYW0gPSBTQVhTdHJlYW1cbiAgc2F4LmNyZWF0ZVN0cmVhbSA9IGNyZWF0ZVN0cmVhbVxuXG4gIC8vIFdoZW4gd2UgcGFzcyB0aGUgTUFYX0JVRkZFUl9MRU5HVEggcG9zaXRpb24sIHN0YXJ0IGNoZWNraW5nIGZvciBidWZmZXIgb3ZlcnJ1bnMuXG4gIC8vIFdoZW4gd2UgY2hlY2ssIHNjaGVkdWxlIHRoZSBuZXh0IGNoZWNrIGZvciBNQVhfQlVGRkVSX0xFTkdUSCAtIChtYXgoYnVmZmVyIGxlbmd0aHMpKSxcbiAgLy8gc2luY2UgdGhhdCdzIHRoZSBlYXJsaWVzdCB0aGF0IGEgYnVmZmVyIG92ZXJydW4gY291bGQgb2NjdXIuICBUaGlzIHdheSwgY2hlY2tzIGFyZVxuICAvLyBhcyByYXJlIGFzIHJlcXVpcmVkLCBidXQgYXMgb2Z0ZW4gYXMgbmVjZXNzYXJ5IHRvIGVuc3VyZSBuZXZlciBjcm9zc2luZyB0aGlzIGJvdW5kLlxuICAvLyBGdXJ0aGVybW9yZSwgYnVmZmVycyBhcmUgb25seSB0ZXN0ZWQgYXQgbW9zdCBvbmNlIHBlciB3cml0ZSgpLCBzbyBwYXNzaW5nIGEgdmVyeVxuICAvLyBsYXJnZSBzdHJpbmcgaW50byB3cml0ZSgpIG1pZ2h0IGhhdmUgdW5kZXNpcmFibGUgZWZmZWN0cywgYnV0IHRoaXMgaXMgbWFuYWdlYWJsZSBieVxuICAvLyB0aGUgY2FsbGVyLCBzbyBpdCBpcyBhc3N1bWVkIHRvIGJlIHNhZmUuICBUaHVzLCBhIGNhbGwgdG8gd3JpdGUoKSBtYXksIGluIHRoZSBleHRyZW1lXG4gIC8vIGVkZ2UgY2FzZSwgcmVzdWx0IGluIGNyZWF0aW5nIGF0IG1vc3Qgb25lIGNvbXBsZXRlIGNvcHkgb2YgdGhlIHN0cmluZyBwYXNzZWQgaW4uXG4gIC8vIFNldCB0byBJbmZpbml0eSB0byBoYXZlIHVubGltaXRlZCBidWZmZXJzLlxuICBzYXguTUFYX0JVRkZFUl9MRU5HVEggPSA2NCAqIDEwMjRcblxuICB2YXIgYnVmZmVycyA9IFtcbiAgICAnY29tbWVudCcsICdzZ21sRGVjbCcsICd0ZXh0Tm9kZScsICd0YWdOYW1lJywgJ2RvY3R5cGUnLFxuICAgICdwcm9jSW5zdE5hbWUnLCAncHJvY0luc3RCb2R5JywgJ2VudGl0eScsICdhdHRyaWJOYW1lJyxcbiAgICAnYXR0cmliVmFsdWUnLCAnY2RhdGEnLCAnc2NyaXB0J1xuICBdXG5cbiAgc2F4LkVWRU5UUyA9IFtcbiAgICAndGV4dCcsXG4gICAgJ3Byb2Nlc3NpbmdpbnN0cnVjdGlvbicsXG4gICAgJ3NnbWxkZWNsYXJhdGlvbicsXG4gICAgJ2RvY3R5cGUnLFxuICAgICdjb21tZW50JyxcbiAgICAnb3BlbnRhZ3N0YXJ0JyxcbiAgICAnYXR0cmlidXRlJyxcbiAgICAnb3BlbnRhZycsXG4gICAgJ2Nsb3NldGFnJyxcbiAgICAnb3BlbmNkYXRhJyxcbiAgICAnY2RhdGEnLFxuICAgICdjbG9zZWNkYXRhJyxcbiAgICAnZXJyb3InLFxuICAgICdlbmQnLFxuICAgICdyZWFkeScsXG4gICAgJ3NjcmlwdCcsXG4gICAgJ29wZW5uYW1lc3BhY2UnLFxuICAgICdjbG9zZW5hbWVzcGFjZSdcbiAgXVxuXG4gIGZ1bmN0aW9uIFNBWFBhcnNlciAoc3RyaWN0LCBvcHQpIHtcbiAgICBpZiAoISh0aGlzIGluc3RhbmNlb2YgU0FYUGFyc2VyKSkge1xuICAgICAgcmV0dXJuIG5ldyBTQVhQYXJzZXIoc3RyaWN0LCBvcHQpXG4gICAgfVxuXG4gICAgdmFyIHBhcnNlciA9IHRoaXNcbiAgICBjbGVhckJ1ZmZlcnMocGFyc2VyKVxuICAgIHBhcnNlci5xID0gcGFyc2VyLmMgPSAnJ1xuICAgIHBhcnNlci5idWZmZXJDaGVja1Bvc2l0aW9uID0gc2F4Lk1BWF9CVUZGRVJfTEVOR1RIXG4gICAgcGFyc2VyLm9wdCA9IG9wdCB8fCB7fVxuICAgIHBhcnNlci5vcHQubG93ZXJjYXNlID0gcGFyc2VyLm9wdC5sb3dlcmNhc2UgfHwgcGFyc2VyLm9wdC5sb3dlcmNhc2V0YWdzXG4gICAgcGFyc2VyLmxvb3NlQ2FzZSA9IHBhcnNlci5vcHQubG93ZXJjYXNlID8gJ3RvTG93ZXJDYXNlJyA6ICd0b1VwcGVyQ2FzZSdcbiAgICBwYXJzZXIudGFncyA9IFtdXG4gICAgcGFyc2VyLmNsb3NlZCA9IHBhcnNlci5jbG9zZWRSb290ID0gcGFyc2VyLnNhd1Jvb3QgPSBmYWxzZVxuICAgIHBhcnNlci50YWcgPSBwYXJzZXIuZXJyb3IgPSBudWxsXG4gICAgcGFyc2VyLnN0cmljdCA9ICEhc3RyaWN0XG4gICAgcGFyc2VyLm5vc2NyaXB0ID0gISEoc3RyaWN0IHx8IHBhcnNlci5vcHQubm9zY3JpcHQpXG4gICAgcGFyc2VyLnN0YXRlID0gUy5CRUdJTlxuICAgIHBhcnNlci5zdHJpY3RFbnRpdGllcyA9IHBhcnNlci5vcHQuc3RyaWN0RW50aXRpZXNcbiAgICBwYXJzZXIuRU5USVRJRVMgPSBwYXJzZXIuc3RyaWN0RW50aXRpZXMgPyBPYmplY3QuY3JlYXRlKHNheC5YTUxfRU5USVRJRVMpIDogT2JqZWN0LmNyZWF0ZShzYXguRU5USVRJRVMpXG4gICAgcGFyc2VyLmF0dHJpYkxpc3QgPSBbXVxuXG4gICAgLy8gbmFtZXNwYWNlcyBmb3JtIGEgcHJvdG90eXBlIGNoYWluLlxuICAgIC8vIGl0IGFsd2F5cyBwb2ludHMgYXQgdGhlIGN1cnJlbnQgdGFnLFxuICAgIC8vIHdoaWNoIHByb3RvcyB0byBpdHMgcGFyZW50IHRhZy5cbiAgICBpZiAocGFyc2VyLm9wdC54bWxucykge1xuICAgICAgcGFyc2VyLm5zID0gT2JqZWN0LmNyZWF0ZShyb290TlMpXG4gICAgfVxuXG4gICAgLy8gbW9zdGx5IGp1c3QgZm9yIGVycm9yIHJlcG9ydGluZ1xuICAgIHBhcnNlci50cmFja1Bvc2l0aW9uID0gcGFyc2VyLm9wdC5wb3NpdGlvbiAhPT0gZmFsc2VcbiAgICBpZiAocGFyc2VyLnRyYWNrUG9zaXRpb24pIHtcbiAgICAgIHBhcnNlci5wb3NpdGlvbiA9IHBhcnNlci5saW5lID0gcGFyc2VyLmNvbHVtbiA9IDBcbiAgICB9XG4gICAgZW1pdChwYXJzZXIsICdvbnJlYWR5JylcbiAgfVxuXG4gIGlmICghT2JqZWN0LmNyZWF0ZSkge1xuICAgIE9iamVjdC5jcmVhdGUgPSBmdW5jdGlvbiAobykge1xuICAgICAgZnVuY3Rpb24gRiAoKSB7fVxuICAgICAgRi5wcm90b3R5cGUgPSBvXG4gICAgICB2YXIgbmV3ZiA9IG5ldyBGKClcbiAgICAgIHJldHVybiBuZXdmXG4gICAgfVxuICB9XG5cbiAgaWYgKCFPYmplY3Qua2V5cykge1xuICAgIE9iamVjdC5rZXlzID0gZnVuY3Rpb24gKG8pIHtcbiAgICAgIHZhciBhID0gW11cbiAgICAgIGZvciAodmFyIGkgaW4gbykgaWYgKG8uaGFzT3duUHJvcGVydHkoaSkpIGEucHVzaChpKVxuICAgICAgcmV0dXJuIGFcbiAgICB9XG4gIH1cblxuICBmdW5jdGlvbiBjaGVja0J1ZmZlckxlbmd0aCAocGFyc2VyKSB7XG4gICAgdmFyIG1heEFsbG93ZWQgPSBNYXRoLm1heChzYXguTUFYX0JVRkZFUl9MRU5HVEgsIDEwKVxuICAgIHZhciBtYXhBY3R1YWwgPSAwXG4gICAgZm9yICh2YXIgaSA9IDAsIGwgPSBidWZmZXJzLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuICAgICAgdmFyIGxlbiA9IHBhcnNlcltidWZmZXJzW2ldXS5sZW5ndGhcbiAgICAgIGlmIChsZW4gPiBtYXhBbGxvd2VkKSB7XG4gICAgICAgIC8vIFRleHQvY2RhdGEgbm9kZXMgY2FuIGdldCBiaWcsIGFuZCBzaW5jZSB0aGV5J3JlIGJ1ZmZlcmVkLFxuICAgICAgICAvLyB3ZSBjYW4gZ2V0IGhlcmUgdW5kZXIgbm9ybWFsIGNvbmRpdGlvbnMuXG4gICAgICAgIC8vIEF2b2lkIGlzc3VlcyBieSBlbWl0dGluZyB0aGUgdGV4dCBub2RlIG5vdyxcbiAgICAgICAgLy8gc28gYXQgbGVhc3QgaXQgd29uJ3QgZ2V0IGFueSBiaWdnZXIuXG4gICAgICAgIHN3aXRjaCAoYnVmZmVyc1tpXSkge1xuICAgICAgICAgIGNhc2UgJ3RleHROb2RlJzpcbiAgICAgICAgICAgIGNsb3NlVGV4dChwYXJzZXIpXG4gICAgICAgICAgICBicmVha1xuXG4gICAgICAgICAgY2FzZSAnY2RhdGEnOlxuICAgICAgICAgICAgZW1pdE5vZGUocGFyc2VyLCAnb25jZGF0YScsIHBhcnNlci5jZGF0YSlcbiAgICAgICAgICAgIHBhcnNlci5jZGF0YSA9ICcnXG4gICAgICAgICAgICBicmVha1xuXG4gICAgICAgICAgY2FzZSAnc2NyaXB0JzpcbiAgICAgICAgICAgIGVtaXROb2RlKHBhcnNlciwgJ29uc2NyaXB0JywgcGFyc2VyLnNjcmlwdClcbiAgICAgICAgICAgIHBhcnNlci5zY3JpcHQgPSAnJ1xuICAgICAgICAgICAgYnJlYWtcblxuICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICBlcnJvcihwYXJzZXIsICdNYXggYnVmZmVyIGxlbmd0aCBleGNlZWRlZDogJyArIGJ1ZmZlcnNbaV0pXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIG1heEFjdHVhbCA9IE1hdGgubWF4KG1heEFjdHVhbCwgbGVuKVxuICAgIH1cbiAgICAvLyBzY2hlZHVsZSB0aGUgbmV4dCBjaGVjayBmb3IgdGhlIGVhcmxpZXN0IHBvc3NpYmxlIGJ1ZmZlciBvdmVycnVuLlxuICAgIHZhciBtID0gc2F4Lk1BWF9CVUZGRVJfTEVOR1RIIC0gbWF4QWN0dWFsXG4gICAgcGFyc2VyLmJ1ZmZlckNoZWNrUG9zaXRpb24gPSBtICsgcGFyc2VyLnBvc2l0aW9uXG4gIH1cblxuICBmdW5jdGlvbiBjbGVhckJ1ZmZlcnMgKHBhcnNlcikge1xuICAgIGZvciAodmFyIGkgPSAwLCBsID0gYnVmZmVycy5sZW5ndGg7IGkgPCBsOyBpKyspIHtcbiAgICAgIHBhcnNlcltidWZmZXJzW2ldXSA9ICcnXG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gZmx1c2hCdWZmZXJzIChwYXJzZXIpIHtcbiAgICBjbG9zZVRleHQocGFyc2VyKVxuICAgIGlmIChwYXJzZXIuY2RhdGEgIT09ICcnKSB7XG4gICAgICBlbWl0Tm9kZShwYXJzZXIsICdvbmNkYXRhJywgcGFyc2VyLmNkYXRhKVxuICAgICAgcGFyc2VyLmNkYXRhID0gJydcbiAgICB9XG4gICAgaWYgKHBhcnNlci5zY3JpcHQgIT09ICcnKSB7XG4gICAgICBlbWl0Tm9kZShwYXJzZXIsICdvbnNjcmlwdCcsIHBhcnNlci5zY3JpcHQpXG4gICAgICBwYXJzZXIuc2NyaXB0ID0gJydcbiAgICB9XG4gIH1cblxuICBTQVhQYXJzZXIucHJvdG90eXBlID0ge1xuICAgIGVuZDogZnVuY3Rpb24gKCkgeyBlbmQodGhpcykgfSxcbiAgICB3cml0ZTogd3JpdGUsXG4gICAgcmVzdW1lOiBmdW5jdGlvbiAoKSB7IHRoaXMuZXJyb3IgPSBudWxsOyByZXR1cm4gdGhpcyB9LFxuICAgIGNsb3NlOiBmdW5jdGlvbiAoKSB7IHJldHVybiB0aGlzLndyaXRlKG51bGwpIH0sXG4gICAgZmx1c2g6IGZ1bmN0aW9uICgpIHsgZmx1c2hCdWZmZXJzKHRoaXMpIH1cbiAgfVxuXG4gIHZhciBTdHJlYW1cbiAgdHJ5IHtcbiAgICBTdHJlYW0gPSByZXF1aXJlKCdzdHJlYW0nKS5TdHJlYW1cbiAgfSBjYXRjaCAoZXgpIHtcbiAgICBTdHJlYW0gPSBmdW5jdGlvbiAoKSB7fVxuICB9XG5cbiAgdmFyIHN0cmVhbVdyYXBzID0gc2F4LkVWRU5UUy5maWx0ZXIoZnVuY3Rpb24gKGV2KSB7XG4gICAgcmV0dXJuIGV2ICE9PSAnZXJyb3InICYmIGV2ICE9PSAnZW5kJ1xuICB9KVxuXG4gIGZ1bmN0aW9uIGNyZWF0ZVN0cmVhbSAoc3RyaWN0LCBvcHQpIHtcbiAgICByZXR1cm4gbmV3IFNBWFN0cmVhbShzdHJpY3QsIG9wdClcbiAgfVxuXG4gIGZ1bmN0aW9uIFNBWFN0cmVhbSAoc3RyaWN0LCBvcHQpIHtcbiAgICBpZiAoISh0aGlzIGluc3RhbmNlb2YgU0FYU3RyZWFtKSkge1xuICAgICAgcmV0dXJuIG5ldyBTQVhTdHJlYW0oc3RyaWN0LCBvcHQpXG4gICAgfVxuXG4gICAgU3RyZWFtLmFwcGx5KHRoaXMpXG5cbiAgICB0aGlzLl9wYXJzZXIgPSBuZXcgU0FYUGFyc2VyKHN0cmljdCwgb3B0KVxuICAgIHRoaXMud3JpdGFibGUgPSB0cnVlXG4gICAgdGhpcy5yZWFkYWJsZSA9IHRydWVcblxuICAgIHZhciBtZSA9IHRoaXNcblxuICAgIHRoaXMuX3BhcnNlci5vbmVuZCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgIG1lLmVtaXQoJ2VuZCcpXG4gICAgfVxuXG4gICAgdGhpcy5fcGFyc2VyLm9uZXJyb3IgPSBmdW5jdGlvbiAoZXIpIHtcbiAgICAgIG1lLmVtaXQoJ2Vycm9yJywgZXIpXG5cbiAgICAgIC8vIGlmIGRpZG4ndCB0aHJvdywgdGhlbiBtZWFucyBlcnJvciB3YXMgaGFuZGxlZC5cbiAgICAgIC8vIGdvIGFoZWFkIGFuZCBjbGVhciBlcnJvciwgc28gd2UgY2FuIHdyaXRlIGFnYWluLlxuICAgICAgbWUuX3BhcnNlci5lcnJvciA9IG51bGxcbiAgICB9XG5cbiAgICB0aGlzLl9kZWNvZGVyID0gbnVsbFxuXG4gICAgc3RyZWFtV3JhcHMuZm9yRWFjaChmdW5jdGlvbiAoZXYpIHtcbiAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShtZSwgJ29uJyArIGV2LCB7XG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgIHJldHVybiBtZS5fcGFyc2VyWydvbicgKyBldl1cbiAgICAgICAgfSxcbiAgICAgICAgc2V0OiBmdW5jdGlvbiAoaCkge1xuICAgICAgICAgIGlmICghaCkge1xuICAgICAgICAgICAgbWUucmVtb3ZlQWxsTGlzdGVuZXJzKGV2KVxuICAgICAgICAgICAgbWUuX3BhcnNlclsnb24nICsgZXZdID0gaFxuICAgICAgICAgICAgcmV0dXJuIGhcbiAgICAgICAgICB9XG4gICAgICAgICAgbWUub24oZXYsIGgpXG4gICAgICAgIH0sXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogZmFsc2VcbiAgICAgIH0pXG4gICAgfSlcbiAgfVxuXG4gIFNBWFN0cmVhbS5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKFN0cmVhbS5wcm90b3R5cGUsIHtcbiAgICBjb25zdHJ1Y3Rvcjoge1xuICAgICAgdmFsdWU6IFNBWFN0cmVhbVxuICAgIH1cbiAgfSlcblxuICBTQVhTdHJlYW0ucHJvdG90eXBlLndyaXRlID0gZnVuY3Rpb24gKGRhdGEpIHtcbiAgICBpZiAodHlwZW9mIEJ1ZmZlciA9PT0gJ2Z1bmN0aW9uJyAmJlxuICAgICAgdHlwZW9mIEJ1ZmZlci5pc0J1ZmZlciA9PT0gJ2Z1bmN0aW9uJyAmJlxuICAgICAgQnVmZmVyLmlzQnVmZmVyKGRhdGEpKSB7XG4gICAgICBpZiAoIXRoaXMuX2RlY29kZXIpIHtcbiAgICAgICAgdmFyIFNEID0gcmVxdWlyZSgnc3RyaW5nX2RlY29kZXInKS5TdHJpbmdEZWNvZGVyXG4gICAgICAgIHRoaXMuX2RlY29kZXIgPSBuZXcgU0QoJ3V0ZjgnKVxuICAgICAgfVxuICAgICAgZGF0YSA9IHRoaXMuX2RlY29kZXIud3JpdGUoZGF0YSlcbiAgICB9XG5cbiAgICB0aGlzLl9wYXJzZXIud3JpdGUoZGF0YS50b1N0cmluZygpKVxuICAgIHRoaXMuZW1pdCgnZGF0YScsIGRhdGEpXG4gICAgcmV0dXJuIHRydWVcbiAgfVxuXG4gIFNBWFN0cmVhbS5wcm90b3R5cGUuZW5kID0gZnVuY3Rpb24gKGNodW5rKSB7XG4gICAgaWYgKGNodW5rICYmIGNodW5rLmxlbmd0aCkge1xuICAgICAgdGhpcy53cml0ZShjaHVuaylcbiAgICB9XG4gICAgdGhpcy5fcGFyc2VyLmVuZCgpXG4gICAgcmV0dXJuIHRydWVcbiAgfVxuXG4gIFNBWFN0cmVhbS5wcm90b3R5cGUub24gPSBmdW5jdGlvbiAoZXYsIGhhbmRsZXIpIHtcbiAgICB2YXIgbWUgPSB0aGlzXG4gICAgaWYgKCFtZS5fcGFyc2VyWydvbicgKyBldl0gJiYgc3RyZWFtV3JhcHMuaW5kZXhPZihldikgIT09IC0xKSB7XG4gICAgICBtZS5fcGFyc2VyWydvbicgKyBldl0gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBhcmdzID0gYXJndW1lbnRzLmxlbmd0aCA9PT0gMSA/IFthcmd1bWVudHNbMF1dIDogQXJyYXkuYXBwbHkobnVsbCwgYXJndW1lbnRzKVxuICAgICAgICBhcmdzLnNwbGljZSgwLCAwLCBldilcbiAgICAgICAgbWUuZW1pdC5hcHBseShtZSwgYXJncylcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gU3RyZWFtLnByb3RvdHlwZS5vbi5jYWxsKG1lLCBldiwgaGFuZGxlcilcbiAgfVxuXG4gIC8vIHRoaXMgcmVhbGx5IG5lZWRzIHRvIGJlIHJlcGxhY2VkIHdpdGggY2hhcmFjdGVyIGNsYXNzZXMuXG4gIC8vIFhNTCBhbGxvd3MgYWxsIG1hbm5lciBvZiByaWRpY3Vsb3VzIG51bWJlcnMgYW5kIGRpZ2l0cy5cbiAgdmFyIENEQVRBID0gJ1tDREFUQVsnXG4gIHZhciBET0NUWVBFID0gJ0RPQ1RZUEUnXG4gIHZhciBYTUxfTkFNRVNQQUNFID0gJ2h0dHA6Ly93d3cudzMub3JnL1hNTC8xOTk4L25hbWVzcGFjZSdcbiAgdmFyIFhNTE5TX05BTUVTUEFDRSA9ICdodHRwOi8vd3d3LnczLm9yZy8yMDAwL3htbG5zLydcbiAgdmFyIHJvb3ROUyA9IHsgeG1sOiBYTUxfTkFNRVNQQUNFLCB4bWxuczogWE1MTlNfTkFNRVNQQUNFIH1cblxuICAvLyBodHRwOi8vd3d3LnczLm9yZy9UUi9SRUMteG1sLyNOVC1OYW1lU3RhcnRDaGFyXG4gIC8vIFRoaXMgaW1wbGVtZW50YXRpb24gd29ya3Mgb24gc3RyaW5ncywgYSBzaW5nbGUgY2hhcmFjdGVyIGF0IGEgdGltZVxuICAvLyBhcyBzdWNoLCBpdCBjYW5ub3QgZXZlciBzdXBwb3J0IGFzdHJhbC1wbGFuZSBjaGFyYWN0ZXJzICgxMDAwMC1FRkZGRilcbiAgLy8gd2l0aG91dCBhIHNpZ25pZmljYW50IGJyZWFraW5nIGNoYW5nZSB0byBlaXRoZXIgdGhpcyAgcGFyc2VyLCBvciB0aGVcbiAgLy8gSmF2YVNjcmlwdCBsYW5ndWFnZS4gIEltcGxlbWVudGF0aW9uIG9mIGFuIGVtb2ppLWNhcGFibGUgeG1sIHBhcnNlclxuICAvLyBpcyBsZWZ0IGFzIGFuIGV4ZXJjaXNlIGZvciB0aGUgcmVhZGVyLlxuICB2YXIgbmFtZVN0YXJ0ID0gL1s6X0EtWmEtelxcdTAwQzAtXFx1MDBENlxcdTAwRDgtXFx1MDBGNlxcdTAwRjgtXFx1MDJGRlxcdTAzNzAtXFx1MDM3RFxcdTAzN0YtXFx1MUZGRlxcdTIwMEMtXFx1MjAwRFxcdTIwNzAtXFx1MjE4RlxcdTJDMDAtXFx1MkZFRlxcdTMwMDEtXFx1RDdGRlxcdUY5MDAtXFx1RkRDRlxcdUZERjAtXFx1RkZGRF0vXG5cbiAgdmFyIG5hbWVCb2R5ID0gL1s6X0EtWmEtelxcdTAwQzAtXFx1MDBENlxcdTAwRDgtXFx1MDBGNlxcdTAwRjgtXFx1MDJGRlxcdTAzNzAtXFx1MDM3RFxcdTAzN0YtXFx1MUZGRlxcdTIwMEMtXFx1MjAwRFxcdTIwNzAtXFx1MjE4RlxcdTJDMDAtXFx1MkZFRlxcdTMwMDEtXFx1RDdGRlxcdUY5MDAtXFx1RkRDRlxcdUZERjAtXFx1RkZGRFxcdTAwQjdcXHUwMzAwLVxcdTAzNkZcXHUyMDNGLVxcdTIwNDAuXFxkLV0vXG5cbiAgdmFyIGVudGl0eVN0YXJ0ID0gL1sjOl9BLVphLXpcXHUwMEMwLVxcdTAwRDZcXHUwMEQ4LVxcdTAwRjZcXHUwMEY4LVxcdTAyRkZcXHUwMzcwLVxcdTAzN0RcXHUwMzdGLVxcdTFGRkZcXHUyMDBDLVxcdTIwMERcXHUyMDcwLVxcdTIxOEZcXHUyQzAwLVxcdTJGRUZcXHUzMDAxLVxcdUQ3RkZcXHVGOTAwLVxcdUZEQ0ZcXHVGREYwLVxcdUZGRkRdL1xuICB2YXIgZW50aXR5Qm9keSA9IC9bIzpfQS1aYS16XFx1MDBDMC1cXHUwMEQ2XFx1MDBEOC1cXHUwMEY2XFx1MDBGOC1cXHUwMkZGXFx1MDM3MC1cXHUwMzdEXFx1MDM3Ri1cXHUxRkZGXFx1MjAwQy1cXHUyMDBEXFx1MjA3MC1cXHUyMThGXFx1MkMwMC1cXHUyRkVGXFx1MzAwMS1cXHVEN0ZGXFx1RjkwMC1cXHVGRENGXFx1RkRGMC1cXHVGRkZEXFx1MDBCN1xcdTAzMDAtXFx1MDM2RlxcdTIwM0YtXFx1MjA0MC5cXGQtXS9cblxuICBmdW5jdGlvbiBpc1doaXRlc3BhY2UgKGMpIHtcbiAgICByZXR1cm4gYyA9PT0gJyAnIHx8IGMgPT09ICdcXG4nIHx8IGMgPT09ICdcXHInIHx8IGMgPT09ICdcXHQnXG4gIH1cblxuICBmdW5jdGlvbiBpc1F1b3RlIChjKSB7XG4gICAgcmV0dXJuIGMgPT09ICdcIicgfHwgYyA9PT0gJ1xcJydcbiAgfVxuXG4gIGZ1bmN0aW9uIGlzQXR0cmliRW5kIChjKSB7XG4gICAgcmV0dXJuIGMgPT09ICc+JyB8fCBpc1doaXRlc3BhY2UoYylcbiAgfVxuXG4gIGZ1bmN0aW9uIGlzTWF0Y2ggKHJlZ2V4LCBjKSB7XG4gICAgcmV0dXJuIHJlZ2V4LnRlc3QoYylcbiAgfVxuXG4gIGZ1bmN0aW9uIG5vdE1hdGNoIChyZWdleCwgYykge1xuICAgIHJldHVybiAhaXNNYXRjaChyZWdleCwgYylcbiAgfVxuXG4gIHZhciBTID0gMFxuICBzYXguU1RBVEUgPSB7XG4gICAgQkVHSU46IFMrKywgLy8gbGVhZGluZyBieXRlIG9yZGVyIG1hcmsgb3Igd2hpdGVzcGFjZVxuICAgIEJFR0lOX1dISVRFU1BBQ0U6IFMrKywgLy8gbGVhZGluZyB3aGl0ZXNwYWNlXG4gICAgVEVYVDogUysrLCAvLyBnZW5lcmFsIHN0dWZmXG4gICAgVEVYVF9FTlRJVFk6IFMrKywgLy8gJmFtcCBhbmQgc3VjaC5cbiAgICBPUEVOX1dBS0E6IFMrKywgLy8gPFxuICAgIFNHTUxfREVDTDogUysrLCAvLyA8IUJMQVJHXG4gICAgU0dNTF9ERUNMX1FVT1RFRDogUysrLCAvLyA8IUJMQVJHIGZvbyBcImJhclxuICAgIERPQ1RZUEU6IFMrKywgLy8gPCFET0NUWVBFXG4gICAgRE9DVFlQRV9RVU9URUQ6IFMrKywgLy8gPCFET0NUWVBFIFwiLy9ibGFoXG4gICAgRE9DVFlQRV9EVEQ6IFMrKywgLy8gPCFET0NUWVBFIFwiLy9ibGFoXCIgWyAuLi5cbiAgICBET0NUWVBFX0RURF9RVU9URUQ6IFMrKywgLy8gPCFET0NUWVBFIFwiLy9ibGFoXCIgWyBcImZvb1xuICAgIENPTU1FTlRfU1RBUlRJTkc6IFMrKywgLy8gPCEtXG4gICAgQ09NTUVOVDogUysrLCAvLyA8IS0tXG4gICAgQ09NTUVOVF9FTkRJTkc6IFMrKywgLy8gPCEtLSBibGFoIC1cbiAgICBDT01NRU5UX0VOREVEOiBTKyssIC8vIDwhLS0gYmxhaCAtLVxuICAgIENEQVRBOiBTKyssIC8vIDwhW0NEQVRBWyBzb21ldGhpbmdcbiAgICBDREFUQV9FTkRJTkc6IFMrKywgLy8gXVxuICAgIENEQVRBX0VORElOR18yOiBTKyssIC8vIF1dXG4gICAgUFJPQ19JTlNUOiBTKyssIC8vIDw/aGlcbiAgICBQUk9DX0lOU1RfQk9EWTogUysrLCAvLyA8P2hpIHRoZXJlXG4gICAgUFJPQ19JTlNUX0VORElORzogUysrLCAvLyA8P2hpIFwidGhlcmVcIiA/XG4gICAgT1BFTl9UQUc6IFMrKywgLy8gPHN0cm9uZ1xuICAgIE9QRU5fVEFHX1NMQVNIOiBTKyssIC8vIDxzdHJvbmcgL1xuICAgIEFUVFJJQjogUysrLCAvLyA8YVxuICAgIEFUVFJJQl9OQU1FOiBTKyssIC8vIDxhIGZvb1xuICAgIEFUVFJJQl9OQU1FX1NBV19XSElURTogUysrLCAvLyA8YSBmb28gX1xuICAgIEFUVFJJQl9WQUxVRTogUysrLCAvLyA8YSBmb289XG4gICAgQVRUUklCX1ZBTFVFX1FVT1RFRDogUysrLCAvLyA8YSBmb289XCJiYXJcbiAgICBBVFRSSUJfVkFMVUVfQ0xPU0VEOiBTKyssIC8vIDxhIGZvbz1cImJhclwiXG4gICAgQVRUUklCX1ZBTFVFX1VOUVVPVEVEOiBTKyssIC8vIDxhIGZvbz1iYXJcbiAgICBBVFRSSUJfVkFMVUVfRU5USVRZX1E6IFMrKywgLy8gPGZvbyBiYXI9XCImcXVvdDtcIlxuICAgIEFUVFJJQl9WQUxVRV9FTlRJVFlfVTogUysrLCAvLyA8Zm9vIGJhcj0mcXVvdFxuICAgIENMT1NFX1RBRzogUysrLCAvLyA8L2FcbiAgICBDTE9TRV9UQUdfU0FXX1dISVRFOiBTKyssIC8vIDwvYSAgID5cbiAgICBTQ1JJUFQ6IFMrKywgLy8gPHNjcmlwdD4gLi4uXG4gICAgU0NSSVBUX0VORElORzogUysrIC8vIDxzY3JpcHQ+IC4uLiA8XG4gIH1cblxuICBzYXguWE1MX0VOVElUSUVTID0ge1xuICAgICdhbXAnOiAnJicsXG4gICAgJ2d0JzogJz4nLFxuICAgICdsdCc6ICc8JyxcbiAgICAncXVvdCc6ICdcIicsXG4gICAgJ2Fwb3MnOiBcIidcIlxuICB9XG5cbiAgc2F4LkVOVElUSUVTID0ge1xuICAgICdhbXAnOiAnJicsXG4gICAgJ2d0JzogJz4nLFxuICAgICdsdCc6ICc8JyxcbiAgICAncXVvdCc6ICdcIicsXG4gICAgJ2Fwb3MnOiBcIidcIixcbiAgICAnQUVsaWcnOiAxOTgsXG4gICAgJ0FhY3V0ZSc6IDE5MyxcbiAgICAnQWNpcmMnOiAxOTQsXG4gICAgJ0FncmF2ZSc6IDE5MixcbiAgICAnQXJpbmcnOiAxOTcsXG4gICAgJ0F0aWxkZSc6IDE5NSxcbiAgICAnQXVtbCc6IDE5NixcbiAgICAnQ2NlZGlsJzogMTk5LFxuICAgICdFVEgnOiAyMDgsXG4gICAgJ0VhY3V0ZSc6IDIwMSxcbiAgICAnRWNpcmMnOiAyMDIsXG4gICAgJ0VncmF2ZSc6IDIwMCxcbiAgICAnRXVtbCc6IDIwMyxcbiAgICAnSWFjdXRlJzogMjA1LFxuICAgICdJY2lyYyc6IDIwNixcbiAgICAnSWdyYXZlJzogMjA0LFxuICAgICdJdW1sJzogMjA3LFxuICAgICdOdGlsZGUnOiAyMDksXG4gICAgJ09hY3V0ZSc6IDIxMSxcbiAgICAnT2NpcmMnOiAyMTIsXG4gICAgJ09ncmF2ZSc6IDIxMCxcbiAgICAnT3NsYXNoJzogMjE2LFxuICAgICdPdGlsZGUnOiAyMTMsXG4gICAgJ091bWwnOiAyMTQsXG4gICAgJ1RIT1JOJzogMjIyLFxuICAgICdVYWN1dGUnOiAyMTgsXG4gICAgJ1VjaXJjJzogMjE5LFxuICAgICdVZ3JhdmUnOiAyMTcsXG4gICAgJ1V1bWwnOiAyMjAsXG4gICAgJ1lhY3V0ZSc6IDIyMSxcbiAgICAnYWFjdXRlJzogMjI1LFxuICAgICdhY2lyYyc6IDIyNixcbiAgICAnYWVsaWcnOiAyMzAsXG4gICAgJ2FncmF2ZSc6IDIyNCxcbiAgICAnYXJpbmcnOiAyMjksXG4gICAgJ2F0aWxkZSc6IDIyNyxcbiAgICAnYXVtbCc6IDIyOCxcbiAgICAnY2NlZGlsJzogMjMxLFxuICAgICdlYWN1dGUnOiAyMzMsXG4gICAgJ2VjaXJjJzogMjM0LFxuICAgICdlZ3JhdmUnOiAyMzIsXG4gICAgJ2V0aCc6IDI0MCxcbiAgICAnZXVtbCc6IDIzNSxcbiAgICAnaWFjdXRlJzogMjM3LFxuICAgICdpY2lyYyc6IDIzOCxcbiAgICAnaWdyYXZlJzogMjM2LFxuICAgICdpdW1sJzogMjM5LFxuICAgICdudGlsZGUnOiAyNDEsXG4gICAgJ29hY3V0ZSc6IDI0MyxcbiAgICAnb2NpcmMnOiAyNDQsXG4gICAgJ29ncmF2ZSc6IDI0MixcbiAgICAnb3NsYXNoJzogMjQ4LFxuICAgICdvdGlsZGUnOiAyNDUsXG4gICAgJ291bWwnOiAyNDYsXG4gICAgJ3N6bGlnJzogMjIzLFxuICAgICd0aG9ybic6IDI1NCxcbiAgICAndWFjdXRlJzogMjUwLFxuICAgICd1Y2lyYyc6IDI1MSxcbiAgICAndWdyYXZlJzogMjQ5LFxuICAgICd1dW1sJzogMjUyLFxuICAgICd5YWN1dGUnOiAyNTMsXG4gICAgJ3l1bWwnOiAyNTUsXG4gICAgJ2NvcHknOiAxNjksXG4gICAgJ3JlZyc6IDE3NCxcbiAgICAnbmJzcCc6IDE2MCxcbiAgICAnaWV4Y2wnOiAxNjEsXG4gICAgJ2NlbnQnOiAxNjIsXG4gICAgJ3BvdW5kJzogMTYzLFxuICAgICdjdXJyZW4nOiAxNjQsXG4gICAgJ3llbic6IDE2NSxcbiAgICAnYnJ2YmFyJzogMTY2LFxuICAgICdzZWN0JzogMTY3LFxuICAgICd1bWwnOiAxNjgsXG4gICAgJ29yZGYnOiAxNzAsXG4gICAgJ2xhcXVvJzogMTcxLFxuICAgICdub3QnOiAxNzIsXG4gICAgJ3NoeSc6IDE3MyxcbiAgICAnbWFjcic6IDE3NSxcbiAgICAnZGVnJzogMTc2LFxuICAgICdwbHVzbW4nOiAxNzcsXG4gICAgJ3N1cDEnOiAxODUsXG4gICAgJ3N1cDInOiAxNzgsXG4gICAgJ3N1cDMnOiAxNzksXG4gICAgJ2FjdXRlJzogMTgwLFxuICAgICdtaWNybyc6IDE4MSxcbiAgICAncGFyYSc6IDE4MixcbiAgICAnbWlkZG90JzogMTgzLFxuICAgICdjZWRpbCc6IDE4NCxcbiAgICAnb3JkbSc6IDE4NixcbiAgICAncmFxdW8nOiAxODcsXG4gICAgJ2ZyYWMxNCc6IDE4OCxcbiAgICAnZnJhYzEyJzogMTg5LFxuICAgICdmcmFjMzQnOiAxOTAsXG4gICAgJ2lxdWVzdCc6IDE5MSxcbiAgICAndGltZXMnOiAyMTUsXG4gICAgJ2RpdmlkZSc6IDI0NyxcbiAgICAnT0VsaWcnOiAzMzgsXG4gICAgJ29lbGlnJzogMzM5LFxuICAgICdTY2Fyb24nOiAzNTIsXG4gICAgJ3NjYXJvbic6IDM1MyxcbiAgICAnWXVtbCc6IDM3NixcbiAgICAnZm5vZic6IDQwMixcbiAgICAnY2lyYyc6IDcxMCxcbiAgICAndGlsZGUnOiA3MzIsXG4gICAgJ0FscGhhJzogOTEzLFxuICAgICdCZXRhJzogOTE0LFxuICAgICdHYW1tYSc6IDkxNSxcbiAgICAnRGVsdGEnOiA5MTYsXG4gICAgJ0Vwc2lsb24nOiA5MTcsXG4gICAgJ1pldGEnOiA5MTgsXG4gICAgJ0V0YSc6IDkxOSxcbiAgICAnVGhldGEnOiA5MjAsXG4gICAgJ0lvdGEnOiA5MjEsXG4gICAgJ0thcHBhJzogOTIyLFxuICAgICdMYW1iZGEnOiA5MjMsXG4gICAgJ011JzogOTI0LFxuICAgICdOdSc6IDkyNSxcbiAgICAnWGknOiA5MjYsXG4gICAgJ09taWNyb24nOiA5MjcsXG4gICAgJ1BpJzogOTI4LFxuICAgICdSaG8nOiA5MjksXG4gICAgJ1NpZ21hJzogOTMxLFxuICAgICdUYXUnOiA5MzIsXG4gICAgJ1Vwc2lsb24nOiA5MzMsXG4gICAgJ1BoaSc6IDkzNCxcbiAgICAnQ2hpJzogOTM1LFxuICAgICdQc2knOiA5MzYsXG4gICAgJ09tZWdhJzogOTM3LFxuICAgICdhbHBoYSc6IDk0NSxcbiAgICAnYmV0YSc6IDk0NixcbiAgICAnZ2FtbWEnOiA5NDcsXG4gICAgJ2RlbHRhJzogOTQ4LFxuICAgICdlcHNpbG9uJzogOTQ5LFxuICAgICd6ZXRhJzogOTUwLFxuICAgICdldGEnOiA5NTEsXG4gICAgJ3RoZXRhJzogOTUyLFxuICAgICdpb3RhJzogOTUzLFxuICAgICdrYXBwYSc6IDk1NCxcbiAgICAnbGFtYmRhJzogOTU1LFxuICAgICdtdSc6IDk1NixcbiAgICAnbnUnOiA5NTcsXG4gICAgJ3hpJzogOTU4LFxuICAgICdvbWljcm9uJzogOTU5LFxuICAgICdwaSc6IDk2MCxcbiAgICAncmhvJzogOTYxLFxuICAgICdzaWdtYWYnOiA5NjIsXG4gICAgJ3NpZ21hJzogOTYzLFxuICAgICd0YXUnOiA5NjQsXG4gICAgJ3Vwc2lsb24nOiA5NjUsXG4gICAgJ3BoaSc6IDk2NixcbiAgICAnY2hpJzogOTY3LFxuICAgICdwc2knOiA5NjgsXG4gICAgJ29tZWdhJzogOTY5LFxuICAgICd0aGV0YXN5bSc6IDk3NyxcbiAgICAndXBzaWgnOiA5NzgsXG4gICAgJ3Bpdic6IDk4MixcbiAgICAnZW5zcCc6IDgxOTQsXG4gICAgJ2Vtc3AnOiA4MTk1LFxuICAgICd0aGluc3AnOiA4MjAxLFxuICAgICd6d25qJzogODIwNCxcbiAgICAnendqJzogODIwNSxcbiAgICAnbHJtJzogODIwNixcbiAgICAncmxtJzogODIwNyxcbiAgICAnbmRhc2gnOiA4MjExLFxuICAgICdtZGFzaCc6IDgyMTIsXG4gICAgJ2xzcXVvJzogODIxNixcbiAgICAncnNxdW8nOiA4MjE3LFxuICAgICdzYnF1byc6IDgyMTgsXG4gICAgJ2xkcXVvJzogODIyMCxcbiAgICAncmRxdW8nOiA4MjIxLFxuICAgICdiZHF1byc6IDgyMjIsXG4gICAgJ2RhZ2dlcic6IDgyMjQsXG4gICAgJ0RhZ2dlcic6IDgyMjUsXG4gICAgJ2J1bGwnOiA4MjI2LFxuICAgICdoZWxsaXAnOiA4MjMwLFxuICAgICdwZXJtaWwnOiA4MjQwLFxuICAgICdwcmltZSc6IDgyNDIsXG4gICAgJ1ByaW1lJzogODI0MyxcbiAgICAnbHNhcXVvJzogODI0OSxcbiAgICAncnNhcXVvJzogODI1MCxcbiAgICAnb2xpbmUnOiA4MjU0LFxuICAgICdmcmFzbCc6IDgyNjAsXG4gICAgJ2V1cm8nOiA4MzY0LFxuICAgICdpbWFnZSc6IDg0NjUsXG4gICAgJ3dlaWVycCc6IDg0NzIsXG4gICAgJ3JlYWwnOiA4NDc2LFxuICAgICd0cmFkZSc6IDg0ODIsXG4gICAgJ2FsZWZzeW0nOiA4NTAxLFxuICAgICdsYXJyJzogODU5MixcbiAgICAndWFycic6IDg1OTMsXG4gICAgJ3JhcnInOiA4NTk0LFxuICAgICdkYXJyJzogODU5NSxcbiAgICAnaGFycic6IDg1OTYsXG4gICAgJ2NyYXJyJzogODYyOSxcbiAgICAnbEFycic6IDg2NTYsXG4gICAgJ3VBcnInOiA4NjU3LFxuICAgICdyQXJyJzogODY1OCxcbiAgICAnZEFycic6IDg2NTksXG4gICAgJ2hBcnInOiA4NjYwLFxuICAgICdmb3JhbGwnOiA4NzA0LFxuICAgICdwYXJ0JzogODcwNixcbiAgICAnZXhpc3QnOiA4NzA3LFxuICAgICdlbXB0eSc6IDg3MDksXG4gICAgJ25hYmxhJzogODcxMSxcbiAgICAnaXNpbic6IDg3MTIsXG4gICAgJ25vdGluJzogODcxMyxcbiAgICAnbmknOiA4NzE1LFxuICAgICdwcm9kJzogODcxOSxcbiAgICAnc3VtJzogODcyMSxcbiAgICAnbWludXMnOiA4NzIyLFxuICAgICdsb3dhc3QnOiA4NzI3LFxuICAgICdyYWRpYyc6IDg3MzAsXG4gICAgJ3Byb3AnOiA4NzMzLFxuICAgICdpbmZpbic6IDg3MzQsXG4gICAgJ2FuZyc6IDg3MzYsXG4gICAgJ2FuZCc6IDg3NDMsXG4gICAgJ29yJzogODc0NCxcbiAgICAnY2FwJzogODc0NSxcbiAgICAnY3VwJzogODc0NixcbiAgICAnaW50JzogODc0NyxcbiAgICAndGhlcmU0JzogODc1NixcbiAgICAnc2ltJzogODc2NCxcbiAgICAnY29uZyc6IDg3NzMsXG4gICAgJ2FzeW1wJzogODc3NixcbiAgICAnbmUnOiA4ODAwLFxuICAgICdlcXVpdic6IDg4MDEsXG4gICAgJ2xlJzogODgwNCxcbiAgICAnZ2UnOiA4ODA1LFxuICAgICdzdWInOiA4ODM0LFxuICAgICdzdXAnOiA4ODM1LFxuICAgICduc3ViJzogODgzNixcbiAgICAnc3ViZSc6IDg4MzgsXG4gICAgJ3N1cGUnOiA4ODM5LFxuICAgICdvcGx1cyc6IDg4NTMsXG4gICAgJ290aW1lcyc6IDg4NTUsXG4gICAgJ3BlcnAnOiA4ODY5LFxuICAgICdzZG90JzogODkwMSxcbiAgICAnbGNlaWwnOiA4OTY4LFxuICAgICdyY2VpbCc6IDg5NjksXG4gICAgJ2xmbG9vcic6IDg5NzAsXG4gICAgJ3JmbG9vcic6IDg5NzEsXG4gICAgJ2xhbmcnOiA5MDAxLFxuICAgICdyYW5nJzogOTAwMixcbiAgICAnbG96JzogOTY3NCxcbiAgICAnc3BhZGVzJzogOTgyNCxcbiAgICAnY2x1YnMnOiA5ODI3LFxuICAgICdoZWFydHMnOiA5ODI5LFxuICAgICdkaWFtcyc6IDk4MzBcbiAgfVxuXG4gIE9iamVjdC5rZXlzKHNheC5FTlRJVElFUykuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7XG4gICAgdmFyIGUgPSBzYXguRU5USVRJRVNba2V5XVxuICAgIHZhciBzID0gdHlwZW9mIGUgPT09ICdudW1iZXInID8gU3RyaW5nLmZyb21DaGFyQ29kZShlKSA6IGVcbiAgICBzYXguRU5USVRJRVNba2V5XSA9IHNcbiAgfSlcblxuICBmb3IgKHZhciBzIGluIHNheC5TVEFURSkge1xuICAgIHNheC5TVEFURVtzYXguU1RBVEVbc11dID0gc1xuICB9XG5cbiAgLy8gc2hvcnRoYW5kXG4gIFMgPSBzYXguU1RBVEVcblxuICBmdW5jdGlvbiBlbWl0IChwYXJzZXIsIGV2ZW50LCBkYXRhKSB7XG4gICAgcGFyc2VyW2V2ZW50XSAmJiBwYXJzZXJbZXZlbnRdKGRhdGEpXG4gIH1cblxuICBmdW5jdGlvbiBlbWl0Tm9kZSAocGFyc2VyLCBub2RlVHlwZSwgZGF0YSkge1xuICAgIGlmIChwYXJzZXIudGV4dE5vZGUpIGNsb3NlVGV4dChwYXJzZXIpXG4gICAgZW1pdChwYXJzZXIsIG5vZGVUeXBlLCBkYXRhKVxuICB9XG5cbiAgZnVuY3Rpb24gY2xvc2VUZXh0IChwYXJzZXIpIHtcbiAgICBwYXJzZXIudGV4dE5vZGUgPSB0ZXh0b3B0cyhwYXJzZXIub3B0LCBwYXJzZXIudGV4dE5vZGUpXG4gICAgaWYgKHBhcnNlci50ZXh0Tm9kZSkgZW1pdChwYXJzZXIsICdvbnRleHQnLCBwYXJzZXIudGV4dE5vZGUpXG4gICAgcGFyc2VyLnRleHROb2RlID0gJydcbiAgfVxuXG4gIGZ1bmN0aW9uIHRleHRvcHRzIChvcHQsIHRleHQpIHtcbiAgICBpZiAob3B0LnRyaW0pIHRleHQgPSB0ZXh0LnRyaW0oKVxuICAgIGlmIChvcHQubm9ybWFsaXplKSB0ZXh0ID0gdGV4dC5yZXBsYWNlKC9cXHMrL2csICcgJylcbiAgICByZXR1cm4gdGV4dFxuICB9XG5cbiAgZnVuY3Rpb24gZXJyb3IgKHBhcnNlciwgZXIpIHtcbiAgICBjbG9zZVRleHQocGFyc2VyKVxuICAgIGlmIChwYXJzZXIudHJhY2tQb3NpdGlvbikge1xuICAgICAgZXIgKz0gJ1xcbkxpbmU6ICcgKyBwYXJzZXIubGluZSArXG4gICAgICAgICdcXG5Db2x1bW46ICcgKyBwYXJzZXIuY29sdW1uICtcbiAgICAgICAgJ1xcbkNoYXI6ICcgKyBwYXJzZXIuY1xuICAgIH1cbiAgICBlciA9IG5ldyBFcnJvcihlcilcbiAgICBwYXJzZXIuZXJyb3IgPSBlclxuICAgIGVtaXQocGFyc2VyLCAnb25lcnJvcicsIGVyKVxuICAgIHJldHVybiBwYXJzZXJcbiAgfVxuXG4gIGZ1bmN0aW9uIGVuZCAocGFyc2VyKSB7XG4gICAgaWYgKHBhcnNlci5zYXdSb290ICYmICFwYXJzZXIuY2xvc2VkUm9vdCkgc3RyaWN0RmFpbChwYXJzZXIsICdVbmNsb3NlZCByb290IHRhZycpXG4gICAgaWYgKChwYXJzZXIuc3RhdGUgIT09IFMuQkVHSU4pICYmXG4gICAgICAocGFyc2VyLnN0YXRlICE9PSBTLkJFR0lOX1dISVRFU1BBQ0UpICYmXG4gICAgICAocGFyc2VyLnN0YXRlICE9PSBTLlRFWFQpKSB7XG4gICAgICBlcnJvcihwYXJzZXIsICdVbmV4cGVjdGVkIGVuZCcpXG4gICAgfVxuICAgIGNsb3NlVGV4dChwYXJzZXIpXG4gICAgcGFyc2VyLmMgPSAnJ1xuICAgIHBhcnNlci5jbG9zZWQgPSB0cnVlXG4gICAgZW1pdChwYXJzZXIsICdvbmVuZCcpXG4gICAgU0FYUGFyc2VyLmNhbGwocGFyc2VyLCBwYXJzZXIuc3RyaWN0LCBwYXJzZXIub3B0KVxuICAgIHJldHVybiBwYXJzZXJcbiAgfVxuXG4gIGZ1bmN0aW9uIHN0cmljdEZhaWwgKHBhcnNlciwgbWVzc2FnZSkge1xuICAgIGlmICh0eXBlb2YgcGFyc2VyICE9PSAnb2JqZWN0JyB8fCAhKHBhcnNlciBpbnN0YW5jZW9mIFNBWFBhcnNlcikpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignYmFkIGNhbGwgdG8gc3RyaWN0RmFpbCcpXG4gICAgfVxuICAgIGlmIChwYXJzZXIuc3RyaWN0KSB7XG4gICAgICBlcnJvcihwYXJzZXIsIG1lc3NhZ2UpXG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gbmV3VGFnIChwYXJzZXIpIHtcbiAgICBpZiAoIXBhcnNlci5zdHJpY3QpIHBhcnNlci50YWdOYW1lID0gcGFyc2VyLnRhZ05hbWVbcGFyc2VyLmxvb3NlQ2FzZV0oKVxuICAgIHZhciBwYXJlbnQgPSBwYXJzZXIudGFnc1twYXJzZXIudGFncy5sZW5ndGggLSAxXSB8fCBwYXJzZXJcbiAgICB2YXIgdGFnID0gcGFyc2VyLnRhZyA9IHsgbmFtZTogcGFyc2VyLnRhZ05hbWUsIGF0dHJpYnV0ZXM6IHt9IH1cblxuICAgIC8vIHdpbGwgYmUgb3ZlcnJpZGRlbiBpZiB0YWcgY29udGFpbHMgYW4geG1sbnM9XCJmb29cIiBvciB4bWxuczpmb289XCJiYXJcIlxuICAgIGlmIChwYXJzZXIub3B0LnhtbG5zKSB7XG4gICAgICB0YWcubnMgPSBwYXJlbnQubnNcbiAgICB9XG4gICAgcGFyc2VyLmF0dHJpYkxpc3QubGVuZ3RoID0gMFxuICAgIGVtaXROb2RlKHBhcnNlciwgJ29ub3BlbnRhZ3N0YXJ0JywgdGFnKVxuICB9XG5cbiAgZnVuY3Rpb24gcW5hbWUgKG5hbWUsIGF0dHJpYnV0ZSkge1xuICAgIHZhciBpID0gbmFtZS5pbmRleE9mKCc6JylcbiAgICB2YXIgcXVhbE5hbWUgPSBpIDwgMCA/IFsgJycsIG5hbWUgXSA6IG5hbWUuc3BsaXQoJzonKVxuICAgIHZhciBwcmVmaXggPSBxdWFsTmFtZVswXVxuICAgIHZhciBsb2NhbCA9IHF1YWxOYW1lWzFdXG5cbiAgICAvLyA8eCBcInhtbG5zXCI9XCJodHRwOi8vZm9vXCI+XG4gICAgaWYgKGF0dHJpYnV0ZSAmJiBuYW1lID09PSAneG1sbnMnKSB7XG4gICAgICBwcmVmaXggPSAneG1sbnMnXG4gICAgICBsb2NhbCA9ICcnXG4gICAgfVxuXG4gICAgcmV0dXJuIHsgcHJlZml4OiBwcmVmaXgsIGxvY2FsOiBsb2NhbCB9XG4gIH1cblxuICBmdW5jdGlvbiBhdHRyaWIgKHBhcnNlcikge1xuICAgIGlmICghcGFyc2VyLnN0cmljdCkge1xuICAgICAgcGFyc2VyLmF0dHJpYk5hbWUgPSBwYXJzZXIuYXR0cmliTmFtZVtwYXJzZXIubG9vc2VDYXNlXSgpXG4gICAgfVxuXG4gICAgaWYgKHBhcnNlci5hdHRyaWJMaXN0LmluZGV4T2YocGFyc2VyLmF0dHJpYk5hbWUpICE9PSAtMSB8fFxuICAgICAgcGFyc2VyLnRhZy5hdHRyaWJ1dGVzLmhhc093blByb3BlcnR5KHBhcnNlci5hdHRyaWJOYW1lKSkge1xuICAgICAgcGFyc2VyLmF0dHJpYk5hbWUgPSBwYXJzZXIuYXR0cmliVmFsdWUgPSAnJ1xuICAgICAgcmV0dXJuXG4gICAgfVxuXG4gICAgaWYgKHBhcnNlci5vcHQueG1sbnMpIHtcbiAgICAgIHZhciBxbiA9IHFuYW1lKHBhcnNlci5hdHRyaWJOYW1lLCB0cnVlKVxuICAgICAgdmFyIHByZWZpeCA9IHFuLnByZWZpeFxuICAgICAgdmFyIGxvY2FsID0gcW4ubG9jYWxcblxuICAgICAgaWYgKHByZWZpeCA9PT0gJ3htbG5zJykge1xuICAgICAgICAvLyBuYW1lc3BhY2UgYmluZGluZyBhdHRyaWJ1dGUuIHB1c2ggdGhlIGJpbmRpbmcgaW50byBzY29wZVxuICAgICAgICBpZiAobG9jYWwgPT09ICd4bWwnICYmIHBhcnNlci5hdHRyaWJWYWx1ZSAhPT0gWE1MX05BTUVTUEFDRSkge1xuICAgICAgICAgIHN0cmljdEZhaWwocGFyc2VyLFxuICAgICAgICAgICAgJ3htbDogcHJlZml4IG11c3QgYmUgYm91bmQgdG8gJyArIFhNTF9OQU1FU1BBQ0UgKyAnXFxuJyArXG4gICAgICAgICAgICAnQWN0dWFsOiAnICsgcGFyc2VyLmF0dHJpYlZhbHVlKVxuICAgICAgICB9IGVsc2UgaWYgKGxvY2FsID09PSAneG1sbnMnICYmIHBhcnNlci5hdHRyaWJWYWx1ZSAhPT0gWE1MTlNfTkFNRVNQQUNFKSB7XG4gICAgICAgICAgc3RyaWN0RmFpbChwYXJzZXIsXG4gICAgICAgICAgICAneG1sbnM6IHByZWZpeCBtdXN0IGJlIGJvdW5kIHRvICcgKyBYTUxOU19OQU1FU1BBQ0UgKyAnXFxuJyArXG4gICAgICAgICAgICAnQWN0dWFsOiAnICsgcGFyc2VyLmF0dHJpYlZhbHVlKVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHZhciB0YWcgPSBwYXJzZXIudGFnXG4gICAgICAgICAgdmFyIHBhcmVudCA9IHBhcnNlci50YWdzW3BhcnNlci50YWdzLmxlbmd0aCAtIDFdIHx8IHBhcnNlclxuICAgICAgICAgIGlmICh0YWcubnMgPT09IHBhcmVudC5ucykge1xuICAgICAgICAgICAgdGFnLm5zID0gT2JqZWN0LmNyZWF0ZShwYXJlbnQubnMpXG4gICAgICAgICAgfVxuICAgICAgICAgIHRhZy5uc1tsb2NhbF0gPSBwYXJzZXIuYXR0cmliVmFsdWVcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICAvLyBkZWZlciBvbmF0dHJpYnV0ZSBldmVudHMgdW50aWwgYWxsIGF0dHJpYnV0ZXMgaGF2ZSBiZWVuIHNlZW5cbiAgICAgIC8vIHNvIGFueSBuZXcgYmluZGluZ3MgY2FuIHRha2UgZWZmZWN0LiBwcmVzZXJ2ZSBhdHRyaWJ1dGUgb3JkZXJcbiAgICAgIC8vIHNvIGRlZmVycmVkIGV2ZW50cyBjYW4gYmUgZW1pdHRlZCBpbiBkb2N1bWVudCBvcmRlclxuICAgICAgcGFyc2VyLmF0dHJpYkxpc3QucHVzaChbcGFyc2VyLmF0dHJpYk5hbWUsIHBhcnNlci5hdHRyaWJWYWx1ZV0pXG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIGluIG5vbi14bWxucyBtb2RlLCB3ZSBjYW4gZW1pdCB0aGUgZXZlbnQgcmlnaHQgYXdheVxuICAgICAgcGFyc2VyLnRhZy5hdHRyaWJ1dGVzW3BhcnNlci5hdHRyaWJOYW1lXSA9IHBhcnNlci5hdHRyaWJWYWx1ZVxuICAgICAgZW1pdE5vZGUocGFyc2VyLCAnb25hdHRyaWJ1dGUnLCB7XG4gICAgICAgIG5hbWU6IHBhcnNlci5hdHRyaWJOYW1lLFxuICAgICAgICB2YWx1ZTogcGFyc2VyLmF0dHJpYlZhbHVlXG4gICAgICB9KVxuICAgIH1cblxuICAgIHBhcnNlci5hdHRyaWJOYW1lID0gcGFyc2VyLmF0dHJpYlZhbHVlID0gJydcbiAgfVxuXG4gIGZ1bmN0aW9uIG9wZW5UYWcgKHBhcnNlciwgc2VsZkNsb3NpbmcpIHtcbiAgICBpZiAocGFyc2VyLm9wdC54bWxucykge1xuICAgICAgLy8gZW1pdCBuYW1lc3BhY2UgYmluZGluZyBldmVudHNcbiAgICAgIHZhciB0YWcgPSBwYXJzZXIudGFnXG5cbiAgICAgIC8vIGFkZCBuYW1lc3BhY2UgaW5mbyB0byB0YWdcbiAgICAgIHZhciBxbiA9IHFuYW1lKHBhcnNlci50YWdOYW1lKVxuICAgICAgdGFnLnByZWZpeCA9IHFuLnByZWZpeFxuICAgICAgdGFnLmxvY2FsID0gcW4ubG9jYWxcbiAgICAgIHRhZy51cmkgPSB0YWcubnNbcW4ucHJlZml4XSB8fCAnJ1xuXG4gICAgICBpZiAodGFnLnByZWZpeCAmJiAhdGFnLnVyaSkge1xuICAgICAgICBzdHJpY3RGYWlsKHBhcnNlciwgJ1VuYm91bmQgbmFtZXNwYWNlIHByZWZpeDogJyArXG4gICAgICAgICAgSlNPTi5zdHJpbmdpZnkocGFyc2VyLnRhZ05hbWUpKVxuICAgICAgICB0YWcudXJpID0gcW4ucHJlZml4XG4gICAgICB9XG5cbiAgICAgIHZhciBwYXJlbnQgPSBwYXJzZXIudGFnc1twYXJzZXIudGFncy5sZW5ndGggLSAxXSB8fCBwYXJzZXJcbiAgICAgIGlmICh0YWcubnMgJiYgcGFyZW50Lm5zICE9PSB0YWcubnMpIHtcbiAgICAgICAgT2JqZWN0LmtleXModGFnLm5zKS5mb3JFYWNoKGZ1bmN0aW9uIChwKSB7XG4gICAgICAgICAgZW1pdE5vZGUocGFyc2VyLCAnb25vcGVubmFtZXNwYWNlJywge1xuICAgICAgICAgICAgcHJlZml4OiBwLFxuICAgICAgICAgICAgdXJpOiB0YWcubnNbcF1cbiAgICAgICAgICB9KVxuICAgICAgICB9KVxuICAgICAgfVxuXG4gICAgICAvLyBoYW5kbGUgZGVmZXJyZWQgb25hdHRyaWJ1dGUgZXZlbnRzXG4gICAgICAvLyBOb3RlOiBkbyBub3QgYXBwbHkgZGVmYXVsdCBucyB0byBhdHRyaWJ1dGVzOlxuICAgICAgLy8gICBodHRwOi8vd3d3LnczLm9yZy9UUi9SRUMteG1sLW5hbWVzLyNkZWZhdWx0aW5nXG4gICAgICBmb3IgKHZhciBpID0gMCwgbCA9IHBhcnNlci5hdHRyaWJMaXN0Lmxlbmd0aDsgaSA8IGw7IGkrKykge1xuICAgICAgICB2YXIgbnYgPSBwYXJzZXIuYXR0cmliTGlzdFtpXVxuICAgICAgICB2YXIgbmFtZSA9IG52WzBdXG4gICAgICAgIHZhciB2YWx1ZSA9IG52WzFdXG4gICAgICAgIHZhciBxdWFsTmFtZSA9IHFuYW1lKG5hbWUsIHRydWUpXG4gICAgICAgIHZhciBwcmVmaXggPSBxdWFsTmFtZS5wcmVmaXhcbiAgICAgICAgdmFyIGxvY2FsID0gcXVhbE5hbWUubG9jYWxcbiAgICAgICAgdmFyIHVyaSA9IHByZWZpeCA9PT0gJycgPyAnJyA6ICh0YWcubnNbcHJlZml4XSB8fCAnJylcbiAgICAgICAgdmFyIGEgPSB7XG4gICAgICAgICAgbmFtZTogbmFtZSxcbiAgICAgICAgICB2YWx1ZTogdmFsdWUsXG4gICAgICAgICAgcHJlZml4OiBwcmVmaXgsXG4gICAgICAgICAgbG9jYWw6IGxvY2FsLFxuICAgICAgICAgIHVyaTogdXJpXG4gICAgICAgIH1cblxuICAgICAgICAvLyBpZiB0aGVyZSdzIGFueSBhdHRyaWJ1dGVzIHdpdGggYW4gdW5kZWZpbmVkIG5hbWVzcGFjZSxcbiAgICAgICAgLy8gdGhlbiBmYWlsIG9uIHRoZW0gbm93LlxuICAgICAgICBpZiAocHJlZml4ICYmIHByZWZpeCAhPT0gJ3htbG5zJyAmJiAhdXJpKSB7XG4gICAgICAgICAgc3RyaWN0RmFpbChwYXJzZXIsICdVbmJvdW5kIG5hbWVzcGFjZSBwcmVmaXg6ICcgK1xuICAgICAgICAgICAgSlNPTi5zdHJpbmdpZnkocHJlZml4KSlcbiAgICAgICAgICBhLnVyaSA9IHByZWZpeFxuICAgICAgICB9XG4gICAgICAgIHBhcnNlci50YWcuYXR0cmlidXRlc1tuYW1lXSA9IGFcbiAgICAgICAgZW1pdE5vZGUocGFyc2VyLCAnb25hdHRyaWJ1dGUnLCBhKVxuICAgICAgfVxuICAgICAgcGFyc2VyLmF0dHJpYkxpc3QubGVuZ3RoID0gMFxuICAgIH1cblxuICAgIHBhcnNlci50YWcuaXNTZWxmQ2xvc2luZyA9ICEhc2VsZkNsb3NpbmdcblxuICAgIC8vIHByb2Nlc3MgdGhlIHRhZ1xuICAgIHBhcnNlci5zYXdSb290ID0gdHJ1ZVxuICAgIHBhcnNlci50YWdzLnB1c2gocGFyc2VyLnRhZylcbiAgICBlbWl0Tm9kZShwYXJzZXIsICdvbm9wZW50YWcnLCBwYXJzZXIudGFnKVxuICAgIGlmICghc2VsZkNsb3NpbmcpIHtcbiAgICAgIC8vIHNwZWNpYWwgY2FzZSBmb3IgPHNjcmlwdD4gaW4gbm9uLXN0cmljdCBtb2RlLlxuICAgICAgaWYgKCFwYXJzZXIubm9zY3JpcHQgJiYgcGFyc2VyLnRhZ05hbWUudG9Mb3dlckNhc2UoKSA9PT0gJ3NjcmlwdCcpIHtcbiAgICAgICAgcGFyc2VyLnN0YXRlID0gUy5TQ1JJUFRcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHBhcnNlci5zdGF0ZSA9IFMuVEVYVFxuICAgICAgfVxuICAgICAgcGFyc2VyLnRhZyA9IG51bGxcbiAgICAgIHBhcnNlci50YWdOYW1lID0gJydcbiAgICB9XG4gICAgcGFyc2VyLmF0dHJpYk5hbWUgPSBwYXJzZXIuYXR0cmliVmFsdWUgPSAnJ1xuICAgIHBhcnNlci5hdHRyaWJMaXN0Lmxlbmd0aCA9IDBcbiAgfVxuXG4gIGZ1bmN0aW9uIGNsb3NlVGFnIChwYXJzZXIpIHtcbiAgICBpZiAoIXBhcnNlci50YWdOYW1lKSB7XG4gICAgICBzdHJpY3RGYWlsKHBhcnNlciwgJ1dlaXJkIGVtcHR5IGNsb3NlIHRhZy4nKVxuICAgICAgcGFyc2VyLnRleHROb2RlICs9ICc8Lz4nXG4gICAgICBwYXJzZXIuc3RhdGUgPSBTLlRFWFRcbiAgICAgIHJldHVyblxuICAgIH1cblxuICAgIGlmIChwYXJzZXIuc2NyaXB0KSB7XG4gICAgICBpZiAocGFyc2VyLnRhZ05hbWUgIT09ICdzY3JpcHQnKSB7XG4gICAgICAgIHBhcnNlci5zY3JpcHQgKz0gJzwvJyArIHBhcnNlci50YWdOYW1lICsgJz4nXG4gICAgICAgIHBhcnNlci50YWdOYW1lID0gJydcbiAgICAgICAgcGFyc2VyLnN0YXRlID0gUy5TQ1JJUFRcbiAgICAgICAgcmV0dXJuXG4gICAgICB9XG4gICAgICBlbWl0Tm9kZShwYXJzZXIsICdvbnNjcmlwdCcsIHBhcnNlci5zY3JpcHQpXG4gICAgICBwYXJzZXIuc2NyaXB0ID0gJydcbiAgICB9XG5cbiAgICAvLyBmaXJzdCBtYWtlIHN1cmUgdGhhdCB0aGUgY2xvc2luZyB0YWcgYWN0dWFsbHkgZXhpc3RzLlxuICAgIC8vIDxhPjxiPjwvYz48L2I+PC9hPiB3aWxsIGNsb3NlIGV2ZXJ5dGhpbmcsIG90aGVyd2lzZS5cbiAgICB2YXIgdCA9IHBhcnNlci50YWdzLmxlbmd0aFxuICAgIHZhciB0YWdOYW1lID0gcGFyc2VyLnRhZ05hbWVcbiAgICBpZiAoIXBhcnNlci5zdHJpY3QpIHtcbiAgICAgIHRhZ05hbWUgPSB0YWdOYW1lW3BhcnNlci5sb29zZUNhc2VdKClcbiAgICB9XG4gICAgdmFyIGNsb3NlVG8gPSB0YWdOYW1lXG4gICAgd2hpbGUgKHQtLSkge1xuICAgICAgdmFyIGNsb3NlID0gcGFyc2VyLnRhZ3NbdF1cbiAgICAgIGlmIChjbG9zZS5uYW1lICE9PSBjbG9zZVRvKSB7XG4gICAgICAgIC8vIGZhaWwgdGhlIGZpcnN0IHRpbWUgaW4gc3RyaWN0IG1vZGVcbiAgICAgICAgc3RyaWN0RmFpbChwYXJzZXIsICdVbmV4cGVjdGVkIGNsb3NlIHRhZycpXG4gICAgICB9IGVsc2Uge1xuICAgICAgICBicmVha1xuICAgICAgfVxuICAgIH1cblxuICAgIC8vIGRpZG4ndCBmaW5kIGl0LiAgd2UgYWxyZWFkeSBmYWlsZWQgZm9yIHN0cmljdCwgc28ganVzdCBhYm9ydC5cbiAgICBpZiAodCA8IDApIHtcbiAgICAgIHN0cmljdEZhaWwocGFyc2VyLCAnVW5tYXRjaGVkIGNsb3NpbmcgdGFnOiAnICsgcGFyc2VyLnRhZ05hbWUpXG4gICAgICBwYXJzZXIudGV4dE5vZGUgKz0gJzwvJyArIHBhcnNlci50YWdOYW1lICsgJz4nXG4gICAgICBwYXJzZXIuc3RhdGUgPSBTLlRFWFRcbiAgICAgIHJldHVyblxuICAgIH1cbiAgICBwYXJzZXIudGFnTmFtZSA9IHRhZ05hbWVcbiAgICB2YXIgcyA9IHBhcnNlci50YWdzLmxlbmd0aFxuICAgIHdoaWxlIChzLS0gPiB0KSB7XG4gICAgICB2YXIgdGFnID0gcGFyc2VyLnRhZyA9IHBhcnNlci50YWdzLnBvcCgpXG4gICAgICBwYXJzZXIudGFnTmFtZSA9IHBhcnNlci50YWcubmFtZVxuICAgICAgZW1pdE5vZGUocGFyc2VyLCAnb25jbG9zZXRhZycsIHBhcnNlci50YWdOYW1lKVxuXG4gICAgICB2YXIgeCA9IHt9XG4gICAgICBmb3IgKHZhciBpIGluIHRhZy5ucykge1xuICAgICAgICB4W2ldID0gdGFnLm5zW2ldXG4gICAgICB9XG5cbiAgICAgIHZhciBwYXJlbnQgPSBwYXJzZXIudGFnc1twYXJzZXIudGFncy5sZW5ndGggLSAxXSB8fCBwYXJzZXJcbiAgICAgIGlmIChwYXJzZXIub3B0LnhtbG5zICYmIHRhZy5ucyAhPT0gcGFyZW50Lm5zKSB7XG4gICAgICAgIC8vIHJlbW92ZSBuYW1lc3BhY2UgYmluZGluZ3MgaW50cm9kdWNlZCBieSB0YWdcbiAgICAgICAgT2JqZWN0LmtleXModGFnLm5zKS5mb3JFYWNoKGZ1bmN0aW9uIChwKSB7XG4gICAgICAgICAgdmFyIG4gPSB0YWcubnNbcF1cbiAgICAgICAgICBlbWl0Tm9kZShwYXJzZXIsICdvbmNsb3NlbmFtZXNwYWNlJywgeyBwcmVmaXg6IHAsIHVyaTogbiB9KVxuICAgICAgICB9KVxuICAgICAgfVxuICAgIH1cbiAgICBpZiAodCA9PT0gMCkgcGFyc2VyLmNsb3NlZFJvb3QgPSB0cnVlXG4gICAgcGFyc2VyLnRhZ05hbWUgPSBwYXJzZXIuYXR0cmliVmFsdWUgPSBwYXJzZXIuYXR0cmliTmFtZSA9ICcnXG4gICAgcGFyc2VyLmF0dHJpYkxpc3QubGVuZ3RoID0gMFxuICAgIHBhcnNlci5zdGF0ZSA9IFMuVEVYVFxuICB9XG5cbiAgZnVuY3Rpb24gcGFyc2VFbnRpdHkgKHBhcnNlcikge1xuICAgIHZhciBlbnRpdHkgPSBwYXJzZXIuZW50aXR5XG4gICAgdmFyIGVudGl0eUxDID0gZW50aXR5LnRvTG93ZXJDYXNlKClcbiAgICB2YXIgbnVtXG4gICAgdmFyIG51bVN0ciA9ICcnXG5cbiAgICBpZiAocGFyc2VyLkVOVElUSUVTW2VudGl0eV0pIHtcbiAgICAgIHJldHVybiBwYXJzZXIuRU5USVRJRVNbZW50aXR5XVxuICAgIH1cbiAgICBpZiAocGFyc2VyLkVOVElUSUVTW2VudGl0eUxDXSkge1xuICAgICAgcmV0dXJuIHBhcnNlci5FTlRJVElFU1tlbnRpdHlMQ11cbiAgICB9XG4gICAgZW50aXR5ID0gZW50aXR5TENcbiAgICBpZiAoZW50aXR5LmNoYXJBdCgwKSA9PT0gJyMnKSB7XG4gICAgICBpZiAoZW50aXR5LmNoYXJBdCgxKSA9PT0gJ3gnKSB7XG4gICAgICAgIGVudGl0eSA9IGVudGl0eS5zbGljZSgyKVxuICAgICAgICBudW0gPSBwYXJzZUludChlbnRpdHksIDE2KVxuICAgICAgICBudW1TdHIgPSBudW0udG9TdHJpbmcoMTYpXG4gICAgICB9IGVsc2Uge1xuICAgICAgICBlbnRpdHkgPSBlbnRpdHkuc2xpY2UoMSlcbiAgICAgICAgbnVtID0gcGFyc2VJbnQoZW50aXR5LCAxMClcbiAgICAgICAgbnVtU3RyID0gbnVtLnRvU3RyaW5nKDEwKVxuICAgICAgfVxuICAgIH1cbiAgICBlbnRpdHkgPSBlbnRpdHkucmVwbGFjZSgvXjArLywgJycpXG4gICAgaWYgKGlzTmFOKG51bSkgfHwgbnVtU3RyLnRvTG93ZXJDYXNlKCkgIT09IGVudGl0eSkge1xuICAgICAgc3RyaWN0RmFpbChwYXJzZXIsICdJbnZhbGlkIGNoYXJhY3RlciBlbnRpdHknKVxuICAgICAgcmV0dXJuICcmJyArIHBhcnNlci5lbnRpdHkgKyAnOydcbiAgICB9XG5cbiAgICByZXR1cm4gU3RyaW5nLmZyb21Db2RlUG9pbnQobnVtKVxuICB9XG5cbiAgZnVuY3Rpb24gYmVnaW5XaGl0ZVNwYWNlIChwYXJzZXIsIGMpIHtcbiAgICBpZiAoYyA9PT0gJzwnKSB7XG4gICAgICBwYXJzZXIuc3RhdGUgPSBTLk9QRU5fV0FLQVxuICAgICAgcGFyc2VyLnN0YXJ0VGFnUG9zaXRpb24gPSBwYXJzZXIucG9zaXRpb25cbiAgICB9IGVsc2UgaWYgKCFpc1doaXRlc3BhY2UoYykpIHtcbiAgICAgIC8vIGhhdmUgdG8gcHJvY2VzcyB0aGlzIGFzIGEgdGV4dCBub2RlLlxuICAgICAgLy8gd2VpcmQsIGJ1dCBoYXBwZW5zLlxuICAgICAgc3RyaWN0RmFpbChwYXJzZXIsICdOb24td2hpdGVzcGFjZSBiZWZvcmUgZmlyc3QgdGFnLicpXG4gICAgICBwYXJzZXIudGV4dE5vZGUgPSBjXG4gICAgICBwYXJzZXIuc3RhdGUgPSBTLlRFWFRcbiAgICB9XG4gIH1cblxuICBmdW5jdGlvbiBjaGFyQXQgKGNodW5rLCBpKSB7XG4gICAgdmFyIHJlc3VsdCA9ICcnXG4gICAgaWYgKGkgPCBjaHVuay5sZW5ndGgpIHtcbiAgICAgIHJlc3VsdCA9IGNodW5rLmNoYXJBdChpKVxuICAgIH1cbiAgICByZXR1cm4gcmVzdWx0XG4gIH1cblxuICBmdW5jdGlvbiB3cml0ZSAoY2h1bmspIHtcbiAgICB2YXIgcGFyc2VyID0gdGhpc1xuICAgIGlmICh0aGlzLmVycm9yKSB7XG4gICAgICB0aHJvdyB0aGlzLmVycm9yXG4gICAgfVxuICAgIGlmIChwYXJzZXIuY2xvc2VkKSB7XG4gICAgICByZXR1cm4gZXJyb3IocGFyc2VyLFxuICAgICAgICAnQ2Fubm90IHdyaXRlIGFmdGVyIGNsb3NlLiBBc3NpZ24gYW4gb25yZWFkeSBoYW5kbGVyLicpXG4gICAgfVxuICAgIGlmIChjaHVuayA9PT0gbnVsbCkge1xuICAgICAgcmV0dXJuIGVuZChwYXJzZXIpXG4gICAgfVxuICAgIGlmICh0eXBlb2YgY2h1bmsgPT09ICdvYmplY3QnKSB7XG4gICAgICBjaHVuayA9IGNodW5rLnRvU3RyaW5nKClcbiAgICB9XG4gICAgdmFyIGkgPSAwXG4gICAgdmFyIGMgPSAnJ1xuICAgIHdoaWxlICh0cnVlKSB7XG4gICAgICBjID0gY2hhckF0KGNodW5rLCBpKyspXG4gICAgICBwYXJzZXIuYyA9IGNcblxuICAgICAgaWYgKCFjKSB7XG4gICAgICAgIGJyZWFrXG4gICAgICB9XG5cbiAgICAgIGlmIChwYXJzZXIudHJhY2tQb3NpdGlvbikge1xuICAgICAgICBwYXJzZXIucG9zaXRpb24rK1xuICAgICAgICBpZiAoYyA9PT0gJ1xcbicpIHtcbiAgICAgICAgICBwYXJzZXIubGluZSsrXG4gICAgICAgICAgcGFyc2VyLmNvbHVtbiA9IDBcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBwYXJzZXIuY29sdW1uKytcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBzd2l0Y2ggKHBhcnNlci5zdGF0ZSkge1xuICAgICAgICBjYXNlIFMuQkVHSU46XG4gICAgICAgICAgcGFyc2VyLnN0YXRlID0gUy5CRUdJTl9XSElURVNQQUNFXG4gICAgICAgICAgaWYgKGMgPT09ICdcXHVGRUZGJykge1xuICAgICAgICAgICAgY29udGludWVcbiAgICAgICAgICB9XG4gICAgICAgICAgYmVnaW5XaGl0ZVNwYWNlKHBhcnNlciwgYylcbiAgICAgICAgICBjb250aW51ZVxuXG4gICAgICAgIGNhc2UgUy5CRUdJTl9XSElURVNQQUNFOlxuICAgICAgICAgIGJlZ2luV2hpdGVTcGFjZShwYXJzZXIsIGMpXG4gICAgICAgICAgY29udGludWVcblxuICAgICAgICBjYXNlIFMuVEVYVDpcbiAgICAgICAgICBpZiAocGFyc2VyLnNhd1Jvb3QgJiYgIXBhcnNlci5jbG9zZWRSb290KSB7XG4gICAgICAgICAgICB2YXIgc3RhcnRpID0gaSAtIDFcbiAgICAgICAgICAgIHdoaWxlIChjICYmIGMgIT09ICc8JyAmJiBjICE9PSAnJicpIHtcbiAgICAgICAgICAgICAgYyA9IGNoYXJBdChjaHVuaywgaSsrKVxuICAgICAgICAgICAgICBpZiAoYyAmJiBwYXJzZXIudHJhY2tQb3NpdGlvbikge1xuICAgICAgICAgICAgICAgIHBhcnNlci5wb3NpdGlvbisrXG4gICAgICAgICAgICAgICAgaWYgKGMgPT09ICdcXG4nKSB7XG4gICAgICAgICAgICAgICAgICBwYXJzZXIubGluZSsrXG4gICAgICAgICAgICAgICAgICBwYXJzZXIuY29sdW1uID0gMFxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICBwYXJzZXIuY29sdW1uKytcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHBhcnNlci50ZXh0Tm9kZSArPSBjaHVuay5zdWJzdHJpbmcoc3RhcnRpLCBpIC0gMSlcbiAgICAgICAgICB9XG4gICAgICAgICAgaWYgKGMgPT09ICc8JyAmJiAhKHBhcnNlci5zYXdSb290ICYmIHBhcnNlci5jbG9zZWRSb290ICYmICFwYXJzZXIuc3RyaWN0KSkge1xuICAgICAgICAgICAgcGFyc2VyLnN0YXRlID0gUy5PUEVOX1dBS0FcbiAgICAgICAgICAgIHBhcnNlci5zdGFydFRhZ1Bvc2l0aW9uID0gcGFyc2VyLnBvc2l0aW9uXG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGlmICghaXNXaGl0ZXNwYWNlKGMpICYmICghcGFyc2VyLnNhd1Jvb3QgfHwgcGFyc2VyLmNsb3NlZFJvb3QpKSB7XG4gICAgICAgICAgICAgIHN0cmljdEZhaWwocGFyc2VyLCAnVGV4dCBkYXRhIG91dHNpZGUgb2Ygcm9vdCBub2RlLicpXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoYyA9PT0gJyYnKSB7XG4gICAgICAgICAgICAgIHBhcnNlci5zdGF0ZSA9IFMuVEVYVF9FTlRJVFlcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIHBhcnNlci50ZXh0Tm9kZSArPSBjXG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICAgIGNvbnRpbnVlXG5cbiAgICAgICAgY2FzZSBTLlNDUklQVDpcbiAgICAgICAgICAvLyBvbmx5IG5vbi1zdHJpY3RcbiAgICAgICAgICBpZiAoYyA9PT0gJzwnKSB7XG4gICAgICAgICAgICBwYXJzZXIuc3RhdGUgPSBTLlNDUklQVF9FTkRJTkdcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcGFyc2VyLnNjcmlwdCArPSBjXG4gICAgICAgICAgfVxuICAgICAgICAgIGNvbnRpbnVlXG5cbiAgICAgICAgY2FzZSBTLlNDUklQVF9FTkRJTkc6XG4gICAgICAgICAgaWYgKGMgPT09ICcvJykge1xuICAgICAgICAgICAgcGFyc2VyLnN0YXRlID0gUy5DTE9TRV9UQUdcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcGFyc2VyLnNjcmlwdCArPSAnPCcgKyBjXG4gICAgICAgICAgICBwYXJzZXIuc3RhdGUgPSBTLlNDUklQVFxuICAgICAgICAgIH1cbiAgICAgICAgICBjb250aW51ZVxuXG4gICAgICAgIGNhc2UgUy5PUEVOX1dBS0E6XG4gICAgICAgICAgLy8gZWl0aGVyIGEgLywgPywgISwgb3IgdGV4dCBpcyBjb21pbmcgbmV4dC5cbiAgICAgICAgICBpZiAoYyA9PT0gJyEnKSB7XG4gICAgICAgICAgICBwYXJzZXIuc3RhdGUgPSBTLlNHTUxfREVDTFxuICAgICAgICAgICAgcGFyc2VyLnNnbWxEZWNsID0gJydcbiAgICAgICAgICB9IGVsc2UgaWYgKGlzV2hpdGVzcGFjZShjKSkge1xuICAgICAgICAgICAgLy8gd2FpdCBmb3IgaXQuLi5cbiAgICAgICAgICB9IGVsc2UgaWYgKGlzTWF0Y2gobmFtZVN0YXJ0LCBjKSkge1xuICAgICAgICAgICAgcGFyc2VyLnN0YXRlID0gUy5PUEVOX1RBR1xuICAgICAgICAgICAgcGFyc2VyLnRhZ05hbWUgPSBjXG4gICAgICAgICAgfSBlbHNlIGlmIChjID09PSAnLycpIHtcbiAgICAgICAgICAgIHBhcnNlci5zdGF0ZSA9IFMuQ0xPU0VfVEFHXG4gICAgICAgICAgICBwYXJzZXIudGFnTmFtZSA9ICcnXG4gICAgICAgICAgfSBlbHNlIGlmIChjID09PSAnPycpIHtcbiAgICAgICAgICAgIHBhcnNlci5zdGF0ZSA9IFMuUFJPQ19JTlNUXG4gICAgICAgICAgICBwYXJzZXIucHJvY0luc3ROYW1lID0gcGFyc2VyLnByb2NJbnN0Qm9keSA9ICcnXG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHN0cmljdEZhaWwocGFyc2VyLCAnVW5lbmNvZGVkIDwnKVxuICAgICAgICAgICAgLy8gaWYgdGhlcmUgd2FzIHNvbWUgd2hpdGVzcGFjZSwgdGhlbiBhZGQgdGhhdCBpbi5cbiAgICAgICAgICAgIGlmIChwYXJzZXIuc3RhcnRUYWdQb3NpdGlvbiArIDEgPCBwYXJzZXIucG9zaXRpb24pIHtcbiAgICAgICAgICAgICAgdmFyIHBhZCA9IHBhcnNlci5wb3NpdGlvbiAtIHBhcnNlci5zdGFydFRhZ1Bvc2l0aW9uXG4gICAgICAgICAgICAgIGMgPSBuZXcgQXJyYXkocGFkKS5qb2luKCcgJykgKyBjXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBwYXJzZXIudGV4dE5vZGUgKz0gJzwnICsgY1xuICAgICAgICAgICAgcGFyc2VyLnN0YXRlID0gUy5URVhUXG4gICAgICAgICAgfVxuICAgICAgICAgIGNvbnRpbnVlXG5cbiAgICAgICAgY2FzZSBTLlNHTUxfREVDTDpcbiAgICAgICAgICBpZiAoKHBhcnNlci5zZ21sRGVjbCArIGMpLnRvVXBwZXJDYXNlKCkgPT09IENEQVRBKSB7XG4gICAgICAgICAgICBlbWl0Tm9kZShwYXJzZXIsICdvbm9wZW5jZGF0YScpXG4gICAgICAgICAgICBwYXJzZXIuc3RhdGUgPSBTLkNEQVRBXG4gICAgICAgICAgICBwYXJzZXIuc2dtbERlY2wgPSAnJ1xuICAgICAgICAgICAgcGFyc2VyLmNkYXRhID0gJydcbiAgICAgICAgICB9IGVsc2UgaWYgKHBhcnNlci5zZ21sRGVjbCArIGMgPT09ICctLScpIHtcbiAgICAgICAgICAgIHBhcnNlci5zdGF0ZSA9IFMuQ09NTUVOVFxuICAgICAgICAgICAgcGFyc2VyLmNvbW1lbnQgPSAnJ1xuICAgICAgICAgICAgcGFyc2VyLnNnbWxEZWNsID0gJydcbiAgICAgICAgICB9IGVsc2UgaWYgKChwYXJzZXIuc2dtbERlY2wgKyBjKS50b1VwcGVyQ2FzZSgpID09PSBET0NUWVBFKSB7XG4gICAgICAgICAgICBwYXJzZXIuc3RhdGUgPSBTLkRPQ1RZUEVcbiAgICAgICAgICAgIGlmIChwYXJzZXIuZG9jdHlwZSB8fCBwYXJzZXIuc2F3Um9vdCkge1xuICAgICAgICAgICAgICBzdHJpY3RGYWlsKHBhcnNlcixcbiAgICAgICAgICAgICAgICAnSW5hcHByb3ByaWF0ZWx5IGxvY2F0ZWQgZG9jdHlwZSBkZWNsYXJhdGlvbicpXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBwYXJzZXIuZG9jdHlwZSA9ICcnXG4gICAgICAgICAgICBwYXJzZXIuc2dtbERlY2wgPSAnJ1xuICAgICAgICAgIH0gZWxzZSBpZiAoYyA9PT0gJz4nKSB7XG4gICAgICAgICAgICBlbWl0Tm9kZShwYXJzZXIsICdvbnNnbWxkZWNsYXJhdGlvbicsIHBhcnNlci5zZ21sRGVjbClcbiAgICAgICAgICAgIHBhcnNlci5zZ21sRGVjbCA9ICcnXG4gICAgICAgICAgICBwYXJzZXIuc3RhdGUgPSBTLlRFWFRcbiAgICAgICAgICB9IGVsc2UgaWYgKGlzUXVvdGUoYykpIHtcbiAgICAgICAgICAgIHBhcnNlci5zdGF0ZSA9IFMuU0dNTF9ERUNMX1FVT1RFRFxuICAgICAgICAgICAgcGFyc2VyLnNnbWxEZWNsICs9IGNcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcGFyc2VyLnNnbWxEZWNsICs9IGNcbiAgICAgICAgICB9XG4gICAgICAgICAgY29udGludWVcblxuICAgICAgICBjYXNlIFMuU0dNTF9ERUNMX1FVT1RFRDpcbiAgICAgICAgICBpZiAoYyA9PT0gcGFyc2VyLnEpIHtcbiAgICAgICAgICAgIHBhcnNlci5zdGF0ZSA9IFMuU0dNTF9ERUNMXG4gICAgICAgICAgICBwYXJzZXIucSA9ICcnXG4gICAgICAgICAgfVxuICAgICAgICAgIHBhcnNlci5zZ21sRGVjbCArPSBjXG4gICAgICAgICAgY29udGludWVcblxuICAgICAgICBjYXNlIFMuRE9DVFlQRTpcbiAgICAgICAgICBpZiAoYyA9PT0gJz4nKSB7XG4gICAgICAgICAgICBwYXJzZXIuc3RhdGUgPSBTLlRFWFRcbiAgICAgICAgICAgIGVtaXROb2RlKHBhcnNlciwgJ29uZG9jdHlwZScsIHBhcnNlci5kb2N0eXBlKVxuICAgICAgICAgICAgcGFyc2VyLmRvY3R5cGUgPSB0cnVlIC8vIGp1c3QgcmVtZW1iZXIgdGhhdCB3ZSBzYXcgaXQuXG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHBhcnNlci5kb2N0eXBlICs9IGNcbiAgICAgICAgICAgIGlmIChjID09PSAnWycpIHtcbiAgICAgICAgICAgICAgcGFyc2VyLnN0YXRlID0gUy5ET0NUWVBFX0RURFxuICAgICAgICAgICAgfSBlbHNlIGlmIChpc1F1b3RlKGMpKSB7XG4gICAgICAgICAgICAgIHBhcnNlci5zdGF0ZSA9IFMuRE9DVFlQRV9RVU9URURcbiAgICAgICAgICAgICAgcGFyc2VyLnEgPSBjXG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICAgIGNvbnRpbnVlXG5cbiAgICAgICAgY2FzZSBTLkRPQ1RZUEVfUVVPVEVEOlxuICAgICAgICAgIHBhcnNlci5kb2N0eXBlICs9IGNcbiAgICAgICAgICBpZiAoYyA9PT0gcGFyc2VyLnEpIHtcbiAgICAgICAgICAgIHBhcnNlci5xID0gJydcbiAgICAgICAgICAgIHBhcnNlci5zdGF0ZSA9IFMuRE9DVFlQRVxuICAgICAgICAgIH1cbiAgICAgICAgICBjb250aW51ZVxuXG4gICAgICAgIGNhc2UgUy5ET0NUWVBFX0RURDpcbiAgICAgICAgICBwYXJzZXIuZG9jdHlwZSArPSBjXG4gICAgICAgICAgaWYgKGMgPT09ICddJykge1xuICAgICAgICAgICAgcGFyc2VyLnN0YXRlID0gUy5ET0NUWVBFXG4gICAgICAgICAgfSBlbHNlIGlmIChpc1F1b3RlKGMpKSB7XG4gICAgICAgICAgICBwYXJzZXIuc3RhdGUgPSBTLkRPQ1RZUEVfRFREX1FVT1RFRFxuICAgICAgICAgICAgcGFyc2VyLnEgPSBjXG4gICAgICAgICAgfVxuICAgICAgICAgIGNvbnRpbnVlXG5cbiAgICAgICAgY2FzZSBTLkRPQ1RZUEVfRFREX1FVT1RFRDpcbiAgICAgICAgICBwYXJzZXIuZG9jdHlwZSArPSBjXG4gICAgICAgICAgaWYgKGMgPT09IHBhcnNlci5xKSB7XG4gICAgICAgICAgICBwYXJzZXIuc3RhdGUgPSBTLkRPQ1RZUEVfRFREXG4gICAgICAgICAgICBwYXJzZXIucSA9ICcnXG4gICAgICAgICAgfVxuICAgICAgICAgIGNvbnRpbnVlXG5cbiAgICAgICAgY2FzZSBTLkNPTU1FTlQ6XG4gICAgICAgICAgaWYgKGMgPT09ICctJykge1xuICAgICAgICAgICAgcGFyc2VyLnN0YXRlID0gUy5DT01NRU5UX0VORElOR1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBwYXJzZXIuY29tbWVudCArPSBjXG4gICAgICAgICAgfVxuICAgICAgICAgIGNvbnRpbnVlXG5cbiAgICAgICAgY2FzZSBTLkNPTU1FTlRfRU5ESU5HOlxuICAgICAgICAgIGlmIChjID09PSAnLScpIHtcbiAgICAgICAgICAgIHBhcnNlci5zdGF0ZSA9IFMuQ09NTUVOVF9FTkRFRFxuICAgICAgICAgICAgcGFyc2VyLmNvbW1lbnQgPSB0ZXh0b3B0cyhwYXJzZXIub3B0LCBwYXJzZXIuY29tbWVudClcbiAgICAgICAgICAgIGlmIChwYXJzZXIuY29tbWVudCkge1xuICAgICAgICAgICAgICBlbWl0Tm9kZShwYXJzZXIsICdvbmNvbW1lbnQnLCBwYXJzZXIuY29tbWVudClcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHBhcnNlci5jb21tZW50ID0gJydcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcGFyc2VyLmNvbW1lbnQgKz0gJy0nICsgY1xuICAgICAgICAgICAgcGFyc2VyLnN0YXRlID0gUy5DT01NRU5UXG4gICAgICAgICAgfVxuICAgICAgICAgIGNvbnRpbnVlXG5cbiAgICAgICAgY2FzZSBTLkNPTU1FTlRfRU5ERUQ6XG4gICAgICAgICAgaWYgKGMgIT09ICc+Jykge1xuICAgICAgICAgICAgc3RyaWN0RmFpbChwYXJzZXIsICdNYWxmb3JtZWQgY29tbWVudCcpXG4gICAgICAgICAgICAvLyBhbGxvdyA8IS0tIGJsYWggLS0gYmxvbyAtLT4gaW4gbm9uLXN0cmljdCBtb2RlLFxuICAgICAgICAgICAgLy8gd2hpY2ggaXMgYSBjb21tZW50IG9mIFwiIGJsYWggLS0gYmxvbyBcIlxuICAgICAgICAgICAgcGFyc2VyLmNvbW1lbnQgKz0gJy0tJyArIGNcbiAgICAgICAgICAgIHBhcnNlci5zdGF0ZSA9IFMuQ09NTUVOVFxuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBwYXJzZXIuc3RhdGUgPSBTLlRFWFRcbiAgICAgICAgICB9XG4gICAgICAgICAgY29udGludWVcblxuICAgICAgICBjYXNlIFMuQ0RBVEE6XG4gICAgICAgICAgaWYgKGMgPT09ICddJykge1xuICAgICAgICAgICAgcGFyc2VyLnN0YXRlID0gUy5DREFUQV9FTkRJTkdcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcGFyc2VyLmNkYXRhICs9IGNcbiAgICAgICAgICB9XG4gICAgICAgICAgY29udGludWVcblxuICAgICAgICBjYXNlIFMuQ0RBVEFfRU5ESU5HOlxuICAgICAgICAgIGlmIChjID09PSAnXScpIHtcbiAgICAgICAgICAgIHBhcnNlci5zdGF0ZSA9IFMuQ0RBVEFfRU5ESU5HXzJcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcGFyc2VyLmNkYXRhICs9ICddJyArIGNcbiAgICAgICAgICAgIHBhcnNlci5zdGF0ZSA9IFMuQ0RBVEFcbiAgICAgICAgICB9XG4gICAgICAgICAgY29udGludWVcblxuICAgICAgICBjYXNlIFMuQ0RBVEFfRU5ESU5HXzI6XG4gICAgICAgICAgaWYgKGMgPT09ICc+Jykge1xuICAgICAgICAgICAgaWYgKHBhcnNlci5jZGF0YSkge1xuICAgICAgICAgICAgICBlbWl0Tm9kZShwYXJzZXIsICdvbmNkYXRhJywgcGFyc2VyLmNkYXRhKVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZW1pdE5vZGUocGFyc2VyLCAnb25jbG9zZWNkYXRhJylcbiAgICAgICAgICAgIHBhcnNlci5jZGF0YSA9ICcnXG4gICAgICAgICAgICBwYXJzZXIuc3RhdGUgPSBTLlRFWFRcbiAgICAgICAgICB9IGVsc2UgaWYgKGMgPT09ICddJykge1xuICAgICAgICAgICAgcGFyc2VyLmNkYXRhICs9ICddJ1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBwYXJzZXIuY2RhdGEgKz0gJ11dJyArIGNcbiAgICAgICAgICAgIHBhcnNlci5zdGF0ZSA9IFMuQ0RBVEFcbiAgICAgICAgICB9XG4gICAgICAgICAgY29udGludWVcblxuICAgICAgICBjYXNlIFMuUFJPQ19JTlNUOlxuICAgICAgICAgIGlmIChjID09PSAnPycpIHtcbiAgICAgICAgICAgIHBhcnNlci5zdGF0ZSA9IFMuUFJPQ19JTlNUX0VORElOR1xuICAgICAgICAgIH0gZWxzZSBpZiAoaXNXaGl0ZXNwYWNlKGMpKSB7XG4gICAgICAgICAgICBwYXJzZXIuc3RhdGUgPSBTLlBST0NfSU5TVF9CT0RZXG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHBhcnNlci5wcm9jSW5zdE5hbWUgKz0gY1xuICAgICAgICAgIH1cbiAgICAgICAgICBjb250aW51ZVxuXG4gICAgICAgIGNhc2UgUy5QUk9DX0lOU1RfQk9EWTpcbiAgICAgICAgICBpZiAoIXBhcnNlci5wcm9jSW5zdEJvZHkgJiYgaXNXaGl0ZXNwYWNlKGMpKSB7XG4gICAgICAgICAgICBjb250aW51ZVxuICAgICAgICAgIH0gZWxzZSBpZiAoYyA9PT0gJz8nKSB7XG4gICAgICAgICAgICBwYXJzZXIuc3RhdGUgPSBTLlBST0NfSU5TVF9FTkRJTkdcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcGFyc2VyLnByb2NJbnN0Qm9keSArPSBjXG4gICAgICAgICAgfVxuICAgICAgICAgIGNvbnRpbnVlXG5cbiAgICAgICAgY2FzZSBTLlBST0NfSU5TVF9FTkRJTkc6XG4gICAgICAgICAgaWYgKGMgPT09ICc+Jykge1xuICAgICAgICAgICAgZW1pdE5vZGUocGFyc2VyLCAnb25wcm9jZXNzaW5naW5zdHJ1Y3Rpb24nLCB7XG4gICAgICAgICAgICAgIG5hbWU6IHBhcnNlci5wcm9jSW5zdE5hbWUsXG4gICAgICAgICAgICAgIGJvZHk6IHBhcnNlci5wcm9jSW5zdEJvZHlcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICBwYXJzZXIucHJvY0luc3ROYW1lID0gcGFyc2VyLnByb2NJbnN0Qm9keSA9ICcnXG4gICAgICAgICAgICBwYXJzZXIuc3RhdGUgPSBTLlRFWFRcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcGFyc2VyLnByb2NJbnN0Qm9keSArPSAnPycgKyBjXG4gICAgICAgICAgICBwYXJzZXIuc3RhdGUgPSBTLlBST0NfSU5TVF9CT0RZXG4gICAgICAgICAgfVxuICAgICAgICAgIGNvbnRpbnVlXG5cbiAgICAgICAgY2FzZSBTLk9QRU5fVEFHOlxuICAgICAgICAgIGlmIChpc01hdGNoKG5hbWVCb2R5LCBjKSkge1xuICAgICAgICAgICAgcGFyc2VyLnRhZ05hbWUgKz0gY1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBuZXdUYWcocGFyc2VyKVxuICAgICAgICAgICAgaWYgKGMgPT09ICc+Jykge1xuICAgICAgICAgICAgICBvcGVuVGFnKHBhcnNlcilcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoYyA9PT0gJy8nKSB7XG4gICAgICAgICAgICAgIHBhcnNlci5zdGF0ZSA9IFMuT1BFTl9UQUdfU0xBU0hcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIGlmICghaXNXaGl0ZXNwYWNlKGMpKSB7XG4gICAgICAgICAgICAgICAgc3RyaWN0RmFpbChwYXJzZXIsICdJbnZhbGlkIGNoYXJhY3RlciBpbiB0YWcgbmFtZScpXG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgcGFyc2VyLnN0YXRlID0gUy5BVFRSSUJcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgICAgY29udGludWVcblxuICAgICAgICBjYXNlIFMuT1BFTl9UQUdfU0xBU0g6XG4gICAgICAgICAgaWYgKGMgPT09ICc+Jykge1xuICAgICAgICAgICAgb3BlblRhZyhwYXJzZXIsIHRydWUpXG4gICAgICAgICAgICBjbG9zZVRhZyhwYXJzZXIpXG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHN0cmljdEZhaWwocGFyc2VyLCAnRm9yd2FyZC1zbGFzaCBpbiBvcGVuaW5nIHRhZyBub3QgZm9sbG93ZWQgYnkgPicpXG4gICAgICAgICAgICBwYXJzZXIuc3RhdGUgPSBTLkFUVFJJQlxuICAgICAgICAgIH1cbiAgICAgICAgICBjb250aW51ZVxuXG4gICAgICAgIGNhc2UgUy5BVFRSSUI6XG4gICAgICAgICAgLy8gaGF2ZW4ndCByZWFkIHRoZSBhdHRyaWJ1dGUgbmFtZSB5ZXQuXG4gICAgICAgICAgaWYgKGlzV2hpdGVzcGFjZShjKSkge1xuICAgICAgICAgICAgY29udGludWVcbiAgICAgICAgICB9IGVsc2UgaWYgKGMgPT09ICc+Jykge1xuICAgICAgICAgICAgb3BlblRhZyhwYXJzZXIpXG4gICAgICAgICAgfSBlbHNlIGlmIChjID09PSAnLycpIHtcbiAgICAgICAgICAgIHBhcnNlci5zdGF0ZSA9IFMuT1BFTl9UQUdfU0xBU0hcbiAgICAgICAgICB9IGVsc2UgaWYgKGlzTWF0Y2gobmFtZVN0YXJ0LCBjKSkge1xuICAgICAgICAgICAgcGFyc2VyLmF0dHJpYk5hbWUgPSBjXG4gICAgICAgICAgICBwYXJzZXIuYXR0cmliVmFsdWUgPSAnJ1xuICAgICAgICAgICAgcGFyc2VyLnN0YXRlID0gUy5BVFRSSUJfTkFNRVxuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBzdHJpY3RGYWlsKHBhcnNlciwgJ0ludmFsaWQgYXR0cmlidXRlIG5hbWUnKVxuICAgICAgICAgIH1cbiAgICAgICAgICBjb250aW51ZVxuXG4gICAgICAgIGNhc2UgUy5BVFRSSUJfTkFNRTpcbiAgICAgICAgICBpZiAoYyA9PT0gJz0nKSB7XG4gICAgICAgICAgICBwYXJzZXIuc3RhdGUgPSBTLkFUVFJJQl9WQUxVRVxuICAgICAgICAgIH0gZWxzZSBpZiAoYyA9PT0gJz4nKSB7XG4gICAgICAgICAgICBzdHJpY3RGYWlsKHBhcnNlciwgJ0F0dHJpYnV0ZSB3aXRob3V0IHZhbHVlJylcbiAgICAgICAgICAgIHBhcnNlci5hdHRyaWJWYWx1ZSA9IHBhcnNlci5hdHRyaWJOYW1lXG4gICAgICAgICAgICBhdHRyaWIocGFyc2VyKVxuICAgICAgICAgICAgb3BlblRhZyhwYXJzZXIpXG4gICAgICAgICAgfSBlbHNlIGlmIChpc1doaXRlc3BhY2UoYykpIHtcbiAgICAgICAgICAgIHBhcnNlci5zdGF0ZSA9IFMuQVRUUklCX05BTUVfU0FXX1dISVRFXG4gICAgICAgICAgfSBlbHNlIGlmIChpc01hdGNoKG5hbWVCb2R5LCBjKSkge1xuICAgICAgICAgICAgcGFyc2VyLmF0dHJpYk5hbWUgKz0gY1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBzdHJpY3RGYWlsKHBhcnNlciwgJ0ludmFsaWQgYXR0cmlidXRlIG5hbWUnKVxuICAgICAgICAgIH1cbiAgICAgICAgICBjb250aW51ZVxuXG4gICAgICAgIGNhc2UgUy5BVFRSSUJfTkFNRV9TQVdfV0hJVEU6XG4gICAgICAgICAgaWYgKGMgPT09ICc9Jykge1xuICAgICAgICAgICAgcGFyc2VyLnN0YXRlID0gUy5BVFRSSUJfVkFMVUVcbiAgICAgICAgICB9IGVsc2UgaWYgKGlzV2hpdGVzcGFjZShjKSkge1xuICAgICAgICAgICAgY29udGludWVcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgc3RyaWN0RmFpbChwYXJzZXIsICdBdHRyaWJ1dGUgd2l0aG91dCB2YWx1ZScpXG4gICAgICAgICAgICBwYXJzZXIudGFnLmF0dHJpYnV0ZXNbcGFyc2VyLmF0dHJpYk5hbWVdID0gJydcbiAgICAgICAgICAgIHBhcnNlci5hdHRyaWJWYWx1ZSA9ICcnXG4gICAgICAgICAgICBlbWl0Tm9kZShwYXJzZXIsICdvbmF0dHJpYnV0ZScsIHtcbiAgICAgICAgICAgICAgbmFtZTogcGFyc2VyLmF0dHJpYk5hbWUsXG4gICAgICAgICAgICAgIHZhbHVlOiAnJ1xuICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIHBhcnNlci5hdHRyaWJOYW1lID0gJydcbiAgICAgICAgICAgIGlmIChjID09PSAnPicpIHtcbiAgICAgICAgICAgICAgb3BlblRhZyhwYXJzZXIpXG4gICAgICAgICAgICB9IGVsc2UgaWYgKGlzTWF0Y2gobmFtZVN0YXJ0LCBjKSkge1xuICAgICAgICAgICAgICBwYXJzZXIuYXR0cmliTmFtZSA9IGNcbiAgICAgICAgICAgICAgcGFyc2VyLnN0YXRlID0gUy5BVFRSSUJfTkFNRVxuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgc3RyaWN0RmFpbChwYXJzZXIsICdJbnZhbGlkIGF0dHJpYnV0ZSBuYW1lJylcbiAgICAgICAgICAgICAgcGFyc2VyLnN0YXRlID0gUy5BVFRSSUJcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgICAgY29udGludWVcblxuICAgICAgICBjYXNlIFMuQVRUUklCX1ZBTFVFOlxuICAgICAgICAgIGlmIChpc1doaXRlc3BhY2UoYykpIHtcbiAgICAgICAgICAgIGNvbnRpbnVlXG4gICAgICAgICAgfSBlbHNlIGlmIChpc1F1b3RlKGMpKSB7XG4gICAgICAgICAgICBwYXJzZXIucSA9IGNcbiAgICAgICAgICAgIHBhcnNlci5zdGF0ZSA9IFMuQVRUUklCX1ZBTFVFX1FVT1RFRFxuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBzdHJpY3RGYWlsKHBhcnNlciwgJ1VucXVvdGVkIGF0dHJpYnV0ZSB2YWx1ZScpXG4gICAgICAgICAgICBwYXJzZXIuc3RhdGUgPSBTLkFUVFJJQl9WQUxVRV9VTlFVT1RFRFxuICAgICAgICAgICAgcGFyc2VyLmF0dHJpYlZhbHVlID0gY1xuICAgICAgICAgIH1cbiAgICAgICAgICBjb250aW51ZVxuXG4gICAgICAgIGNhc2UgUy5BVFRSSUJfVkFMVUVfUVVPVEVEOlxuICAgICAgICAgIGlmIChjICE9PSBwYXJzZXIucSkge1xuICAgICAgICAgICAgaWYgKGMgPT09ICcmJykge1xuICAgICAgICAgICAgICBwYXJzZXIuc3RhdGUgPSBTLkFUVFJJQl9WQUxVRV9FTlRJVFlfUVxuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgcGFyc2VyLmF0dHJpYlZhbHVlICs9IGNcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnRpbnVlXG4gICAgICAgICAgfVxuICAgICAgICAgIGF0dHJpYihwYXJzZXIpXG4gICAgICAgICAgcGFyc2VyLnEgPSAnJ1xuICAgICAgICAgIHBhcnNlci5zdGF0ZSA9IFMuQVRUUklCX1ZBTFVFX0NMT1NFRFxuICAgICAgICAgIGNvbnRpbnVlXG5cbiAgICAgICAgY2FzZSBTLkFUVFJJQl9WQUxVRV9DTE9TRUQ6XG4gICAgICAgICAgaWYgKGlzV2hpdGVzcGFjZShjKSkge1xuICAgICAgICAgICAgcGFyc2VyLnN0YXRlID0gUy5BVFRSSUJcbiAgICAgICAgICB9IGVsc2UgaWYgKGMgPT09ICc+Jykge1xuICAgICAgICAgICAgb3BlblRhZyhwYXJzZXIpXG4gICAgICAgICAgfSBlbHNlIGlmIChjID09PSAnLycpIHtcbiAgICAgICAgICAgIHBhcnNlci5zdGF0ZSA9IFMuT1BFTl9UQUdfU0xBU0hcbiAgICAgICAgICB9IGVsc2UgaWYgKGlzTWF0Y2gobmFtZVN0YXJ0LCBjKSkge1xuICAgICAgICAgICAgc3RyaWN0RmFpbChwYXJzZXIsICdObyB3aGl0ZXNwYWNlIGJldHdlZW4gYXR0cmlidXRlcycpXG4gICAgICAgICAgICBwYXJzZXIuYXR0cmliTmFtZSA9IGNcbiAgICAgICAgICAgIHBhcnNlci5hdHRyaWJWYWx1ZSA9ICcnXG4gICAgICAgICAgICBwYXJzZXIuc3RhdGUgPSBTLkFUVFJJQl9OQU1FXG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHN0cmljdEZhaWwocGFyc2VyLCAnSW52YWxpZCBhdHRyaWJ1dGUgbmFtZScpXG4gICAgICAgICAgfVxuICAgICAgICAgIGNvbnRpbnVlXG5cbiAgICAgICAgY2FzZSBTLkFUVFJJQl9WQUxVRV9VTlFVT1RFRDpcbiAgICAgICAgICBpZiAoIWlzQXR0cmliRW5kKGMpKSB7XG4gICAgICAgICAgICBpZiAoYyA9PT0gJyYnKSB7XG4gICAgICAgICAgICAgIHBhcnNlci5zdGF0ZSA9IFMuQVRUUklCX1ZBTFVFX0VOVElUWV9VXG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICBwYXJzZXIuYXR0cmliVmFsdWUgKz0gY1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29udGludWVcbiAgICAgICAgICB9XG4gICAgICAgICAgYXR0cmliKHBhcnNlcilcbiAgICAgICAgICBpZiAoYyA9PT0gJz4nKSB7XG4gICAgICAgICAgICBvcGVuVGFnKHBhcnNlcilcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcGFyc2VyLnN0YXRlID0gUy5BVFRSSUJcbiAgICAgICAgICB9XG4gICAgICAgICAgY29udGludWVcblxuICAgICAgICBjYXNlIFMuQ0xPU0VfVEFHOlxuICAgICAgICAgIGlmICghcGFyc2VyLnRhZ05hbWUpIHtcbiAgICAgICAgICAgIGlmIChpc1doaXRlc3BhY2UoYykpIHtcbiAgICAgICAgICAgICAgY29udGludWVcbiAgICAgICAgICAgIH0gZWxzZSBpZiAobm90TWF0Y2gobmFtZVN0YXJ0LCBjKSkge1xuICAgICAgICAgICAgICBpZiAocGFyc2VyLnNjcmlwdCkge1xuICAgICAgICAgICAgICAgIHBhcnNlci5zY3JpcHQgKz0gJzwvJyArIGNcbiAgICAgICAgICAgICAgICBwYXJzZXIuc3RhdGUgPSBTLlNDUklQVFxuICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHN0cmljdEZhaWwocGFyc2VyLCAnSW52YWxpZCB0YWduYW1lIGluIGNsb3NpbmcgdGFnLicpXG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIHBhcnNlci50YWdOYW1lID0gY1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0gZWxzZSBpZiAoYyA9PT0gJz4nKSB7XG4gICAgICAgICAgICBjbG9zZVRhZyhwYXJzZXIpXG4gICAgICAgICAgfSBlbHNlIGlmIChpc01hdGNoKG5hbWVCb2R5LCBjKSkge1xuICAgICAgICAgICAgcGFyc2VyLnRhZ05hbWUgKz0gY1xuICAgICAgICAgIH0gZWxzZSBpZiAocGFyc2VyLnNjcmlwdCkge1xuICAgICAgICAgICAgcGFyc2VyLnNjcmlwdCArPSAnPC8nICsgcGFyc2VyLnRhZ05hbWVcbiAgICAgICAgICAgIHBhcnNlci50YWdOYW1lID0gJydcbiAgICAgICAgICAgIHBhcnNlci5zdGF0ZSA9IFMuU0NSSVBUXG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGlmICghaXNXaGl0ZXNwYWNlKGMpKSB7XG4gICAgICAgICAgICAgIHN0cmljdEZhaWwocGFyc2VyLCAnSW52YWxpZCB0YWduYW1lIGluIGNsb3NpbmcgdGFnJylcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHBhcnNlci5zdGF0ZSA9IFMuQ0xPU0VfVEFHX1NBV19XSElURVxuICAgICAgICAgIH1cbiAgICAgICAgICBjb250aW51ZVxuXG4gICAgICAgIGNhc2UgUy5DTE9TRV9UQUdfU0FXX1dISVRFOlxuICAgICAgICAgIGlmIChpc1doaXRlc3BhY2UoYykpIHtcbiAgICAgICAgICAgIGNvbnRpbnVlXG4gICAgICAgICAgfVxuICAgICAgICAgIGlmIChjID09PSAnPicpIHtcbiAgICAgICAgICAgIGNsb3NlVGFnKHBhcnNlcilcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgc3RyaWN0RmFpbChwYXJzZXIsICdJbnZhbGlkIGNoYXJhY3RlcnMgaW4gY2xvc2luZyB0YWcnKVxuICAgICAgICAgIH1cbiAgICAgICAgICBjb250aW51ZVxuXG4gICAgICAgIGNhc2UgUy5URVhUX0VOVElUWTpcbiAgICAgICAgY2FzZSBTLkFUVFJJQl9WQUxVRV9FTlRJVFlfUTpcbiAgICAgICAgY2FzZSBTLkFUVFJJQl9WQUxVRV9FTlRJVFlfVTpcbiAgICAgICAgICB2YXIgcmV0dXJuU3RhdGVcbiAgICAgICAgICB2YXIgYnVmZmVyXG4gICAgICAgICAgc3dpdGNoIChwYXJzZXIuc3RhdGUpIHtcbiAgICAgICAgICAgIGNhc2UgUy5URVhUX0VOVElUWTpcbiAgICAgICAgICAgICAgcmV0dXJuU3RhdGUgPSBTLlRFWFRcbiAgICAgICAgICAgICAgYnVmZmVyID0gJ3RleHROb2RlJ1xuICAgICAgICAgICAgICBicmVha1xuXG4gICAgICAgICAgICBjYXNlIFMuQVRUUklCX1ZBTFVFX0VOVElUWV9ROlxuICAgICAgICAgICAgICByZXR1cm5TdGF0ZSA9IFMuQVRUUklCX1ZBTFVFX1FVT1RFRFxuICAgICAgICAgICAgICBidWZmZXIgPSAnYXR0cmliVmFsdWUnXG4gICAgICAgICAgICAgIGJyZWFrXG5cbiAgICAgICAgICAgIGNhc2UgUy5BVFRSSUJfVkFMVUVfRU5USVRZX1U6XG4gICAgICAgICAgICAgIHJldHVyblN0YXRlID0gUy5BVFRSSUJfVkFMVUVfVU5RVU9URURcbiAgICAgICAgICAgICAgYnVmZmVyID0gJ2F0dHJpYlZhbHVlJ1xuICAgICAgICAgICAgICBicmVha1xuICAgICAgICAgIH1cblxuICAgICAgICAgIGlmIChjID09PSAnOycpIHtcbiAgICAgICAgICAgIHBhcnNlcltidWZmZXJdICs9IHBhcnNlRW50aXR5KHBhcnNlcilcbiAgICAgICAgICAgIHBhcnNlci5lbnRpdHkgPSAnJ1xuICAgICAgICAgICAgcGFyc2VyLnN0YXRlID0gcmV0dXJuU3RhdGVcbiAgICAgICAgICB9IGVsc2UgaWYgKGlzTWF0Y2gocGFyc2VyLmVudGl0eS5sZW5ndGggPyBlbnRpdHlCb2R5IDogZW50aXR5U3RhcnQsIGMpKSB7XG4gICAgICAgICAgICBwYXJzZXIuZW50aXR5ICs9IGNcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgc3RyaWN0RmFpbChwYXJzZXIsICdJbnZhbGlkIGNoYXJhY3RlciBpbiBlbnRpdHkgbmFtZScpXG4gICAgICAgICAgICBwYXJzZXJbYnVmZmVyXSArPSAnJicgKyBwYXJzZXIuZW50aXR5ICsgY1xuICAgICAgICAgICAgcGFyc2VyLmVudGl0eSA9ICcnXG4gICAgICAgICAgICBwYXJzZXIuc3RhdGUgPSByZXR1cm5TdGF0ZVxuICAgICAgICAgIH1cblxuICAgICAgICAgIGNvbnRpbnVlXG5cbiAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IocGFyc2VyLCAnVW5rbm93biBzdGF0ZTogJyArIHBhcnNlci5zdGF0ZSlcbiAgICAgIH1cbiAgICB9IC8vIHdoaWxlXG5cbiAgICBpZiAocGFyc2VyLnBvc2l0aW9uID49IHBhcnNlci5idWZmZXJDaGVja1Bvc2l0aW9uKSB7XG4gICAgICBjaGVja0J1ZmZlckxlbmd0aChwYXJzZXIpXG4gICAgfVxuICAgIHJldHVybiBwYXJzZXJcbiAgfVxuXG4gIC8qISBodHRwOi8vbXRocy5iZS9mcm9tY29kZXBvaW50IHYwLjEuMCBieSBAbWF0aGlhcyAqL1xuICAvKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAqL1xuICBpZiAoIVN0cmluZy5mcm9tQ29kZVBvaW50KSB7XG4gICAgKGZ1bmN0aW9uICgpIHtcbiAgICAgIHZhciBzdHJpbmdGcm9tQ2hhckNvZGUgPSBTdHJpbmcuZnJvbUNoYXJDb2RlXG4gICAgICB2YXIgZmxvb3IgPSBNYXRoLmZsb29yXG4gICAgICB2YXIgZnJvbUNvZGVQb2ludCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIE1BWF9TSVpFID0gMHg0MDAwXG4gICAgICAgIHZhciBjb2RlVW5pdHMgPSBbXVxuICAgICAgICB2YXIgaGlnaFN1cnJvZ2F0ZVxuICAgICAgICB2YXIgbG93U3Vycm9nYXRlXG4gICAgICAgIHZhciBpbmRleCA9IC0xXG4gICAgICAgIHZhciBsZW5ndGggPSBhcmd1bWVudHMubGVuZ3RoXG4gICAgICAgIGlmICghbGVuZ3RoKSB7XG4gICAgICAgICAgcmV0dXJuICcnXG4gICAgICAgIH1cbiAgICAgICAgdmFyIHJlc3VsdCA9ICcnXG4gICAgICAgIHdoaWxlICgrK2luZGV4IDwgbGVuZ3RoKSB7XG4gICAgICAgICAgdmFyIGNvZGVQb2ludCA9IE51bWJlcihhcmd1bWVudHNbaW5kZXhdKVxuICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICFpc0Zpbml0ZShjb2RlUG9pbnQpIHx8IC8vIGBOYU5gLCBgK0luZmluaXR5YCwgb3IgYC1JbmZpbml0eWBcbiAgICAgICAgICAgIGNvZGVQb2ludCA8IDAgfHwgLy8gbm90IGEgdmFsaWQgVW5pY29kZSBjb2RlIHBvaW50XG4gICAgICAgICAgICBjb2RlUG9pbnQgPiAweDEwRkZGRiB8fCAvLyBub3QgYSB2YWxpZCBVbmljb2RlIGNvZGUgcG9pbnRcbiAgICAgICAgICAgIGZsb29yKGNvZGVQb2ludCkgIT09IGNvZGVQb2ludCAvLyBub3QgYW4gaW50ZWdlclxuICAgICAgICAgICkge1xuICAgICAgICAgICAgdGhyb3cgUmFuZ2VFcnJvcignSW52YWxpZCBjb2RlIHBvaW50OiAnICsgY29kZVBvaW50KVxuICAgICAgICAgIH1cbiAgICAgICAgICBpZiAoY29kZVBvaW50IDw9IDB4RkZGRikgeyAvLyBCTVAgY29kZSBwb2ludFxuICAgICAgICAgICAgY29kZVVuaXRzLnB1c2goY29kZVBvaW50KVxuICAgICAgICAgIH0gZWxzZSB7IC8vIEFzdHJhbCBjb2RlIHBvaW50OyBzcGxpdCBpbiBzdXJyb2dhdGUgaGFsdmVzXG4gICAgICAgICAgICAvLyBodHRwOi8vbWF0aGlhc2J5bmVucy5iZS9ub3Rlcy9qYXZhc2NyaXB0LWVuY29kaW5nI3N1cnJvZ2F0ZS1mb3JtdWxhZVxuICAgICAgICAgICAgY29kZVBvaW50IC09IDB4MTAwMDBcbiAgICAgICAgICAgIGhpZ2hTdXJyb2dhdGUgPSAoY29kZVBvaW50ID4+IDEwKSArIDB4RDgwMFxuICAgICAgICAgICAgbG93U3Vycm9nYXRlID0gKGNvZGVQb2ludCAlIDB4NDAwKSArIDB4REMwMFxuICAgICAgICAgICAgY29kZVVuaXRzLnB1c2goaGlnaFN1cnJvZ2F0ZSwgbG93U3Vycm9nYXRlKVxuICAgICAgICAgIH1cbiAgICAgICAgICBpZiAoaW5kZXggKyAxID09PSBsZW5ndGggfHwgY29kZVVuaXRzLmxlbmd0aCA+IE1BWF9TSVpFKSB7XG4gICAgICAgICAgICByZXN1bHQgKz0gc3RyaW5nRnJvbUNoYXJDb2RlLmFwcGx5KG51bGwsIGNvZGVVbml0cylcbiAgICAgICAgICAgIGNvZGVVbml0cy5sZW5ndGggPSAwXG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiByZXN1bHRcbiAgICAgIH1cbiAgICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovXG4gICAgICBpZiAoT2JqZWN0LmRlZmluZVByb3BlcnR5KSB7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShTdHJpbmcsICdmcm9tQ29kZVBvaW50Jywge1xuICAgICAgICAgIHZhbHVlOiBmcm9tQ29kZVBvaW50LFxuICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICB3cml0YWJsZTogdHJ1ZVxuICAgICAgICB9KVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgU3RyaW5nLmZyb21Db2RlUG9pbnQgPSBmcm9tQ29kZVBvaW50XG4gICAgICB9XG4gICAgfSgpKVxuICB9XG59KSh0eXBlb2YgZXhwb3J0cyA9PT0gJ3VuZGVmaW5lZCcgPyB0aGlzLnNheCA9IHt9IDogZXhwb3J0cylcbiIsIihmdW5jdGlvbiAoZ2xvYmFsLCB1bmRlZmluZWQpIHtcbiAgICBcInVzZSBzdHJpY3RcIjtcblxuICAgIGlmIChnbG9iYWwuc2V0SW1tZWRpYXRlKSB7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICB2YXIgbmV4dEhhbmRsZSA9IDE7IC8vIFNwZWMgc2F5cyBncmVhdGVyIHRoYW4gemVyb1xuICAgIHZhciB0YXNrc0J5SGFuZGxlID0ge307XG4gICAgdmFyIGN1cnJlbnRseVJ1bm5pbmdBVGFzayA9IGZhbHNlO1xuICAgIHZhciBkb2MgPSBnbG9iYWwuZG9jdW1lbnQ7XG4gICAgdmFyIHJlZ2lzdGVySW1tZWRpYXRlO1xuXG4gICAgZnVuY3Rpb24gc2V0SW1tZWRpYXRlKGNhbGxiYWNrKSB7XG4gICAgICAvLyBDYWxsYmFjayBjYW4gZWl0aGVyIGJlIGEgZnVuY3Rpb24gb3IgYSBzdHJpbmdcbiAgICAgIGlmICh0eXBlb2YgY2FsbGJhY2sgIT09IFwiZnVuY3Rpb25cIikge1xuICAgICAgICBjYWxsYmFjayA9IG5ldyBGdW5jdGlvbihcIlwiICsgY2FsbGJhY2spO1xuICAgICAgfVxuICAgICAgLy8gQ29weSBmdW5jdGlvbiBhcmd1bWVudHNcbiAgICAgIHZhciBhcmdzID0gbmV3IEFycmF5KGFyZ3VtZW50cy5sZW5ndGggLSAxKTtcbiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgYXJncy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgIGFyZ3NbaV0gPSBhcmd1bWVudHNbaSArIDFdO1xuICAgICAgfVxuICAgICAgLy8gU3RvcmUgYW5kIHJlZ2lzdGVyIHRoZSB0YXNrXG4gICAgICB2YXIgdGFzayA9IHsgY2FsbGJhY2s6IGNhbGxiYWNrLCBhcmdzOiBhcmdzIH07XG4gICAgICB0YXNrc0J5SGFuZGxlW25leHRIYW5kbGVdID0gdGFzaztcbiAgICAgIHJlZ2lzdGVySW1tZWRpYXRlKG5leHRIYW5kbGUpO1xuICAgICAgcmV0dXJuIG5leHRIYW5kbGUrKztcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBjbGVhckltbWVkaWF0ZShoYW5kbGUpIHtcbiAgICAgICAgZGVsZXRlIHRhc2tzQnlIYW5kbGVbaGFuZGxlXTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBydW4odGFzaykge1xuICAgICAgICB2YXIgY2FsbGJhY2sgPSB0YXNrLmNhbGxiYWNrO1xuICAgICAgICB2YXIgYXJncyA9IHRhc2suYXJncztcbiAgICAgICAgc3dpdGNoIChhcmdzLmxlbmd0aCkge1xuICAgICAgICBjYXNlIDA6XG4gICAgICAgICAgICBjYWxsYmFjaygpO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgMTpcbiAgICAgICAgICAgIGNhbGxiYWNrKGFyZ3NbMF0pO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgMjpcbiAgICAgICAgICAgIGNhbGxiYWNrKGFyZ3NbMF0sIGFyZ3NbMV0pO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgMzpcbiAgICAgICAgICAgIGNhbGxiYWNrKGFyZ3NbMF0sIGFyZ3NbMV0sIGFyZ3NbMl0pO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICBjYWxsYmFjay5hcHBseSh1bmRlZmluZWQsIGFyZ3MpO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBmdW5jdGlvbiBydW5JZlByZXNlbnQoaGFuZGxlKSB7XG4gICAgICAgIC8vIEZyb20gdGhlIHNwZWM6IFwiV2FpdCB1bnRpbCBhbnkgaW52b2NhdGlvbnMgb2YgdGhpcyBhbGdvcml0aG0gc3RhcnRlZCBiZWZvcmUgdGhpcyBvbmUgaGF2ZSBjb21wbGV0ZWQuXCJcbiAgICAgICAgLy8gU28gaWYgd2UncmUgY3VycmVudGx5IHJ1bm5pbmcgYSB0YXNrLCB3ZSdsbCBuZWVkIHRvIGRlbGF5IHRoaXMgaW52b2NhdGlvbi5cbiAgICAgICAgaWYgKGN1cnJlbnRseVJ1bm5pbmdBVGFzaykge1xuICAgICAgICAgICAgLy8gRGVsYXkgYnkgZG9pbmcgYSBzZXRUaW1lb3V0LiBzZXRJbW1lZGlhdGUgd2FzIHRyaWVkIGluc3RlYWQsIGJ1dCBpbiBGaXJlZm94IDcgaXQgZ2VuZXJhdGVkIGFcbiAgICAgICAgICAgIC8vIFwidG9vIG11Y2ggcmVjdXJzaW9uXCIgZXJyb3IuXG4gICAgICAgICAgICBzZXRUaW1lb3V0KHJ1bklmUHJlc2VudCwgMCwgaGFuZGxlKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHZhciB0YXNrID0gdGFza3NCeUhhbmRsZVtoYW5kbGVdO1xuICAgICAgICAgICAgaWYgKHRhc2spIHtcbiAgICAgICAgICAgICAgICBjdXJyZW50bHlSdW5uaW5nQVRhc2sgPSB0cnVlO1xuICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgIHJ1bih0YXNrKTtcbiAgICAgICAgICAgICAgICB9IGZpbmFsbHkge1xuICAgICAgICAgICAgICAgICAgICBjbGVhckltbWVkaWF0ZShoYW5kbGUpO1xuICAgICAgICAgICAgICAgICAgICBjdXJyZW50bHlSdW5uaW5nQVRhc2sgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBmdW5jdGlvbiBpbnN0YWxsTmV4dFRpY2tJbXBsZW1lbnRhdGlvbigpIHtcbiAgICAgICAgcmVnaXN0ZXJJbW1lZGlhdGUgPSBmdW5jdGlvbihoYW5kbGUpIHtcbiAgICAgICAgICAgIHByb2Nlc3MubmV4dFRpY2soZnVuY3Rpb24gKCkgeyBydW5JZlByZXNlbnQoaGFuZGxlKTsgfSk7XG4gICAgICAgIH07XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gY2FuVXNlUG9zdE1lc3NhZ2UoKSB7XG4gICAgICAgIC8vIFRoZSB0ZXN0IGFnYWluc3QgYGltcG9ydFNjcmlwdHNgIHByZXZlbnRzIHRoaXMgaW1wbGVtZW50YXRpb24gZnJvbSBiZWluZyBpbnN0YWxsZWQgaW5zaWRlIGEgd2ViIHdvcmtlcixcbiAgICAgICAgLy8gd2hlcmUgYGdsb2JhbC5wb3N0TWVzc2FnZWAgbWVhbnMgc29tZXRoaW5nIGNvbXBsZXRlbHkgZGlmZmVyZW50IGFuZCBjYW4ndCBiZSB1c2VkIGZvciB0aGlzIHB1cnBvc2UuXG4gICAgICAgIGlmIChnbG9iYWwucG9zdE1lc3NhZ2UgJiYgIWdsb2JhbC5pbXBvcnRTY3JpcHRzKSB7XG4gICAgICAgICAgICB2YXIgcG9zdE1lc3NhZ2VJc0FzeW5jaHJvbm91cyA9IHRydWU7XG4gICAgICAgICAgICB2YXIgb2xkT25NZXNzYWdlID0gZ2xvYmFsLm9ubWVzc2FnZTtcbiAgICAgICAgICAgIGdsb2JhbC5vbm1lc3NhZ2UgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICBwb3N0TWVzc2FnZUlzQXN5bmNocm9ub3VzID0gZmFsc2U7XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgZ2xvYmFsLnBvc3RNZXNzYWdlKFwiXCIsIFwiKlwiKTtcbiAgICAgICAgICAgIGdsb2JhbC5vbm1lc3NhZ2UgPSBvbGRPbk1lc3NhZ2U7XG4gICAgICAgICAgICByZXR1cm4gcG9zdE1lc3NhZ2VJc0FzeW5jaHJvbm91cztcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGZ1bmN0aW9uIGluc3RhbGxQb3N0TWVzc2FnZUltcGxlbWVudGF0aW9uKCkge1xuICAgICAgICAvLyBJbnN0YWxscyBhbiBldmVudCBoYW5kbGVyIG9uIGBnbG9iYWxgIGZvciB0aGUgYG1lc3NhZ2VgIGV2ZW50OiBzZWVcbiAgICAgICAgLy8gKiBodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi9ET00vd2luZG93LnBvc3RNZXNzYWdlXG4gICAgICAgIC8vICogaHR0cDovL3d3dy53aGF0d2cub3JnL3NwZWNzL3dlYi1hcHBzL2N1cnJlbnQtd29yay9tdWx0aXBhZ2UvY29tbXMuaHRtbCNjcm9zc0RvY3VtZW50TWVzc2FnZXNcblxuICAgICAgICB2YXIgbWVzc2FnZVByZWZpeCA9IFwic2V0SW1tZWRpYXRlJFwiICsgTWF0aC5yYW5kb20oKSArIFwiJFwiO1xuICAgICAgICB2YXIgb25HbG9iYWxNZXNzYWdlID0gZnVuY3Rpb24oZXZlbnQpIHtcbiAgICAgICAgICAgIGlmIChldmVudC5zb3VyY2UgPT09IGdsb2JhbCAmJlxuICAgICAgICAgICAgICAgIHR5cGVvZiBldmVudC5kYXRhID09PSBcInN0cmluZ1wiICYmXG4gICAgICAgICAgICAgICAgZXZlbnQuZGF0YS5pbmRleE9mKG1lc3NhZ2VQcmVmaXgpID09PSAwKSB7XG4gICAgICAgICAgICAgICAgcnVuSWZQcmVzZW50KCtldmVudC5kYXRhLnNsaWNlKG1lc3NhZ2VQcmVmaXgubGVuZ3RoKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG5cbiAgICAgICAgaWYgKGdsb2JhbC5hZGRFdmVudExpc3RlbmVyKSB7XG4gICAgICAgICAgICBnbG9iYWwuYWRkRXZlbnRMaXN0ZW5lcihcIm1lc3NhZ2VcIiwgb25HbG9iYWxNZXNzYWdlLCBmYWxzZSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBnbG9iYWwuYXR0YWNoRXZlbnQoXCJvbm1lc3NhZ2VcIiwgb25HbG9iYWxNZXNzYWdlKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJlZ2lzdGVySW1tZWRpYXRlID0gZnVuY3Rpb24oaGFuZGxlKSB7XG4gICAgICAgICAgICBnbG9iYWwucG9zdE1lc3NhZ2UobWVzc2FnZVByZWZpeCArIGhhbmRsZSwgXCIqXCIpO1xuICAgICAgICB9O1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGluc3RhbGxNZXNzYWdlQ2hhbm5lbEltcGxlbWVudGF0aW9uKCkge1xuICAgICAgICB2YXIgY2hhbm5lbCA9IG5ldyBNZXNzYWdlQ2hhbm5lbCgpO1xuICAgICAgICBjaGFubmVsLnBvcnQxLm9ubWVzc2FnZSA9IGZ1bmN0aW9uKGV2ZW50KSB7XG4gICAgICAgICAgICB2YXIgaGFuZGxlID0gZXZlbnQuZGF0YTtcbiAgICAgICAgICAgIHJ1bklmUHJlc2VudChoYW5kbGUpO1xuICAgICAgICB9O1xuXG4gICAgICAgIHJlZ2lzdGVySW1tZWRpYXRlID0gZnVuY3Rpb24oaGFuZGxlKSB7XG4gICAgICAgICAgICBjaGFubmVsLnBvcnQyLnBvc3RNZXNzYWdlKGhhbmRsZSk7XG4gICAgICAgIH07XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gaW5zdGFsbFJlYWR5U3RhdGVDaGFuZ2VJbXBsZW1lbnRhdGlvbigpIHtcbiAgICAgICAgdmFyIGh0bWwgPSBkb2MuZG9jdW1lbnRFbGVtZW50O1xuICAgICAgICByZWdpc3RlckltbWVkaWF0ZSA9IGZ1bmN0aW9uKGhhbmRsZSkge1xuICAgICAgICAgICAgLy8gQ3JlYXRlIGEgPHNjcmlwdD4gZWxlbWVudDsgaXRzIHJlYWR5c3RhdGVjaGFuZ2UgZXZlbnQgd2lsbCBiZSBmaXJlZCBhc3luY2hyb25vdXNseSBvbmNlIGl0IGlzIGluc2VydGVkXG4gICAgICAgICAgICAvLyBpbnRvIHRoZSBkb2N1bWVudC4gRG8gc28sIHRodXMgcXVldWluZyB1cCB0aGUgdGFzay4gUmVtZW1iZXIgdG8gY2xlYW4gdXAgb25jZSBpdCdzIGJlZW4gY2FsbGVkLlxuICAgICAgICAgICAgdmFyIHNjcmlwdCA9IGRvYy5jcmVhdGVFbGVtZW50KFwic2NyaXB0XCIpO1xuICAgICAgICAgICAgc2NyaXB0Lm9ucmVhZHlzdGF0ZWNoYW5nZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICBydW5JZlByZXNlbnQoaGFuZGxlKTtcbiAgICAgICAgICAgICAgICBzY3JpcHQub25yZWFkeXN0YXRlY2hhbmdlID0gbnVsbDtcbiAgICAgICAgICAgICAgICBodG1sLnJlbW92ZUNoaWxkKHNjcmlwdCk7XG4gICAgICAgICAgICAgICAgc2NyaXB0ID0gbnVsbDtcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBodG1sLmFwcGVuZENoaWxkKHNjcmlwdCk7XG4gICAgICAgIH07XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gaW5zdGFsbFNldFRpbWVvdXRJbXBsZW1lbnRhdGlvbigpIHtcbiAgICAgICAgcmVnaXN0ZXJJbW1lZGlhdGUgPSBmdW5jdGlvbihoYW5kbGUpIHtcbiAgICAgICAgICAgIHNldFRpbWVvdXQocnVuSWZQcmVzZW50LCAwLCBoYW5kbGUpO1xuICAgICAgICB9O1xuICAgIH1cblxuICAgIC8vIElmIHN1cHBvcnRlZCwgd2Ugc2hvdWxkIGF0dGFjaCB0byB0aGUgcHJvdG90eXBlIG9mIGdsb2JhbCwgc2luY2UgdGhhdCBpcyB3aGVyZSBzZXRUaW1lb3V0IGV0IGFsLiBsaXZlLlxuICAgIHZhciBhdHRhY2hUbyA9IE9iamVjdC5nZXRQcm90b3R5cGVPZiAmJiBPYmplY3QuZ2V0UHJvdG90eXBlT2YoZ2xvYmFsKTtcbiAgICBhdHRhY2hUbyA9IGF0dGFjaFRvICYmIGF0dGFjaFRvLnNldFRpbWVvdXQgPyBhdHRhY2hUbyA6IGdsb2JhbDtcblxuICAgIC8vIERvbid0IGdldCBmb29sZWQgYnkgZS5nLiBicm93c2VyaWZ5IGVudmlyb25tZW50cy5cbiAgICBpZiAoe30udG9TdHJpbmcuY2FsbChnbG9iYWwucHJvY2VzcykgPT09IFwiW29iamVjdCBwcm9jZXNzXVwiKSB7XG4gICAgICAgIC8vIEZvciBOb2RlLmpzIGJlZm9yZSAwLjlcbiAgICAgICAgaW5zdGFsbE5leHRUaWNrSW1wbGVtZW50YXRpb24oKTtcblxuICAgIH0gZWxzZSBpZiAoY2FuVXNlUG9zdE1lc3NhZ2UoKSkge1xuICAgICAgICAvLyBGb3Igbm9uLUlFMTAgbW9kZXJuIGJyb3dzZXJzXG4gICAgICAgIGluc3RhbGxQb3N0TWVzc2FnZUltcGxlbWVudGF0aW9uKCk7XG5cbiAgICB9IGVsc2UgaWYgKGdsb2JhbC5NZXNzYWdlQ2hhbm5lbCkge1xuICAgICAgICAvLyBGb3Igd2ViIHdvcmtlcnMsIHdoZXJlIHN1cHBvcnRlZFxuICAgICAgICBpbnN0YWxsTWVzc2FnZUNoYW5uZWxJbXBsZW1lbnRhdGlvbigpO1xuXG4gICAgfSBlbHNlIGlmIChkb2MgJiYgXCJvbnJlYWR5c3RhdGVjaGFuZ2VcIiBpbiBkb2MuY3JlYXRlRWxlbWVudChcInNjcmlwdFwiKSkge1xuICAgICAgICAvLyBGb3IgSUUgNuKAkzhcbiAgICAgICAgaW5zdGFsbFJlYWR5U3RhdGVDaGFuZ2VJbXBsZW1lbnRhdGlvbigpO1xuXG4gICAgfSBlbHNlIHtcbiAgICAgICAgLy8gRm9yIG9sZGVyIGJyb3dzZXJzXG4gICAgICAgIGluc3RhbGxTZXRUaW1lb3V0SW1wbGVtZW50YXRpb24oKTtcbiAgICB9XG5cbiAgICBhdHRhY2hUby5zZXRJbW1lZGlhdGUgPSBzZXRJbW1lZGlhdGU7XG4gICAgYXR0YWNoVG8uY2xlYXJJbW1lZGlhdGUgPSBjbGVhckltbWVkaWF0ZTtcbn0odHlwZW9mIHNlbGYgPT09IFwidW5kZWZpbmVkXCIgPyB0eXBlb2YgZ2xvYmFsID09PSBcInVuZGVmaW5lZFwiID8gdGhpcyA6IGdsb2JhbCA6IHNlbGYpKTtcbiIsIi8vIENvcHlyaWdodCBKb3llbnQsIEluYy4gYW5kIG90aGVyIE5vZGUgY29udHJpYnV0b3JzLlxuLy9cbi8vIFBlcm1pc3Npb24gaXMgaGVyZWJ5IGdyYW50ZWQsIGZyZWUgb2YgY2hhcmdlLCB0byBhbnkgcGVyc29uIG9idGFpbmluZyBhXG4vLyBjb3B5IG9mIHRoaXMgc29mdHdhcmUgYW5kIGFzc29jaWF0ZWQgZG9jdW1lbnRhdGlvbiBmaWxlcyAodGhlXG4vLyBcIlNvZnR3YXJlXCIpLCB0byBkZWFsIGluIHRoZSBTb2Z0d2FyZSB3aXRob3V0IHJlc3RyaWN0aW9uLCBpbmNsdWRpbmdcbi8vIHdpdGhvdXQgbGltaXRhdGlvbiB0aGUgcmlnaHRzIHRvIHVzZSwgY29weSwgbW9kaWZ5LCBtZXJnZSwgcHVibGlzaCxcbi8vIGRpc3RyaWJ1dGUsIHN1YmxpY2Vuc2UsIGFuZC9vciBzZWxsIGNvcGllcyBvZiB0aGUgU29mdHdhcmUsIGFuZCB0byBwZXJtaXRcbi8vIHBlcnNvbnMgdG8gd2hvbSB0aGUgU29mdHdhcmUgaXMgZnVybmlzaGVkIHRvIGRvIHNvLCBzdWJqZWN0IHRvIHRoZVxuLy8gZm9sbG93aW5nIGNvbmRpdGlvbnM6XG4vL1xuLy8gVGhlIGFib3ZlIGNvcHlyaWdodCBub3RpY2UgYW5kIHRoaXMgcGVybWlzc2lvbiBub3RpY2Ugc2hhbGwgYmUgaW5jbHVkZWRcbi8vIGluIGFsbCBjb3BpZXMgb3Igc3Vic3RhbnRpYWwgcG9ydGlvbnMgb2YgdGhlIFNvZnR3YXJlLlxuLy9cbi8vIFRIRSBTT0ZUV0FSRSBJUyBQUk9WSURFRCBcIkFTIElTXCIsIFdJVEhPVVQgV0FSUkFOVFkgT0YgQU5ZIEtJTkQsIEVYUFJFU1Ncbi8vIE9SIElNUExJRUQsIElOQ0xVRElORyBCVVQgTk9UIExJTUlURUQgVE8gVEhFIFdBUlJBTlRJRVMgT0Zcbi8vIE1FUkNIQU5UQUJJTElUWSwgRklUTkVTUyBGT1IgQSBQQVJUSUNVTEFSIFBVUlBPU0UgQU5EIE5PTklORlJJTkdFTUVOVC4gSU5cbi8vIE5PIEVWRU5UIFNIQUxMIFRIRSBBVVRIT1JTIE9SIENPUFlSSUdIVCBIT0xERVJTIEJFIExJQUJMRSBGT1IgQU5ZIENMQUlNLFxuLy8gREFNQUdFUyBPUiBPVEhFUiBMSUFCSUxJVFksIFdIRVRIRVIgSU4gQU4gQUNUSU9OIE9GIENPTlRSQUNULCBUT1JUIE9SXG4vLyBPVEhFUldJU0UsIEFSSVNJTkcgRlJPTSwgT1VUIE9GIE9SIElOIENPTk5FQ1RJT04gV0lUSCBUSEUgU09GVFdBUkUgT1IgVEhFXG4vLyBVU0UgT1IgT1RIRVIgREVBTElOR1MgSU4gVEhFIFNPRlRXQVJFLlxuXG5tb2R1bGUuZXhwb3J0cyA9IFN0cmVhbTtcblxudmFyIEVFID0gcmVxdWlyZSgnZXZlbnRzJykuRXZlbnRFbWl0dGVyO1xudmFyIGluaGVyaXRzID0gcmVxdWlyZSgnaW5oZXJpdHMnKTtcblxuaW5oZXJpdHMoU3RyZWFtLCBFRSk7XG5TdHJlYW0uUmVhZGFibGUgPSByZXF1aXJlKCdyZWFkYWJsZS1zdHJlYW0vcmVhZGFibGUuanMnKTtcblN0cmVhbS5Xcml0YWJsZSA9IHJlcXVpcmUoJ3JlYWRhYmxlLXN0cmVhbS93cml0YWJsZS5qcycpO1xuU3RyZWFtLkR1cGxleCA9IHJlcXVpcmUoJ3JlYWRhYmxlLXN0cmVhbS9kdXBsZXguanMnKTtcblN0cmVhbS5UcmFuc2Zvcm0gPSByZXF1aXJlKCdyZWFkYWJsZS1zdHJlYW0vdHJhbnNmb3JtLmpzJyk7XG5TdHJlYW0uUGFzc1Rocm91Z2ggPSByZXF1aXJlKCdyZWFkYWJsZS1zdHJlYW0vcGFzc3Rocm91Z2guanMnKTtcblxuLy8gQmFja3dhcmRzLWNvbXBhdCB3aXRoIG5vZGUgMC40LnhcblN0cmVhbS5TdHJlYW0gPSBTdHJlYW07XG5cblxuXG4vLyBvbGQtc3R5bGUgc3RyZWFtcy4gIE5vdGUgdGhhdCB0aGUgcGlwZSBtZXRob2QgKHRoZSBvbmx5IHJlbGV2YW50XG4vLyBwYXJ0IG9mIHRoaXMgY2xhc3MpIGlzIG92ZXJyaWRkZW4gaW4gdGhlIFJlYWRhYmxlIGNsYXNzLlxuXG5mdW5jdGlvbiBTdHJlYW0oKSB7XG4gIEVFLmNhbGwodGhpcyk7XG59XG5cblN0cmVhbS5wcm90b3R5cGUucGlwZSA9IGZ1bmN0aW9uKGRlc3QsIG9wdGlvbnMpIHtcbiAgdmFyIHNvdXJjZSA9IHRoaXM7XG5cbiAgZnVuY3Rpb24gb25kYXRhKGNodW5rKSB7XG4gICAgaWYgKGRlc3Qud3JpdGFibGUpIHtcbiAgICAgIGlmIChmYWxzZSA9PT0gZGVzdC53cml0ZShjaHVuaykgJiYgc291cmNlLnBhdXNlKSB7XG4gICAgICAgIHNvdXJjZS5wYXVzZSgpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIHNvdXJjZS5vbignZGF0YScsIG9uZGF0YSk7XG5cbiAgZnVuY3Rpb24gb25kcmFpbigpIHtcbiAgICBpZiAoc291cmNlLnJlYWRhYmxlICYmIHNvdXJjZS5yZXN1bWUpIHtcbiAgICAgIHNvdXJjZS5yZXN1bWUoKTtcbiAgICB9XG4gIH1cblxuICBkZXN0Lm9uKCdkcmFpbicsIG9uZHJhaW4pO1xuXG4gIC8vIElmIHRoZSAnZW5kJyBvcHRpb24gaXMgbm90IHN1cHBsaWVkLCBkZXN0LmVuZCgpIHdpbGwgYmUgY2FsbGVkIHdoZW5cbiAgLy8gc291cmNlIGdldHMgdGhlICdlbmQnIG9yICdjbG9zZScgZXZlbnRzLiAgT25seSBkZXN0LmVuZCgpIG9uY2UuXG4gIGlmICghZGVzdC5faXNTdGRpbyAmJiAoIW9wdGlvbnMgfHwgb3B0aW9ucy5lbmQgIT09IGZhbHNlKSkge1xuICAgIHNvdXJjZS5vbignZW5kJywgb25lbmQpO1xuICAgIHNvdXJjZS5vbignY2xvc2UnLCBvbmNsb3NlKTtcbiAgfVxuXG4gIHZhciBkaWRPbkVuZCA9IGZhbHNlO1xuICBmdW5jdGlvbiBvbmVuZCgpIHtcbiAgICBpZiAoZGlkT25FbmQpIHJldHVybjtcbiAgICBkaWRPbkVuZCA9IHRydWU7XG5cbiAgICBkZXN0LmVuZCgpO1xuICB9XG5cblxuICBmdW5jdGlvbiBvbmNsb3NlKCkge1xuICAgIGlmIChkaWRPbkVuZCkgcmV0dXJuO1xuICAgIGRpZE9uRW5kID0gdHJ1ZTtcblxuICAgIGlmICh0eXBlb2YgZGVzdC5kZXN0cm95ID09PSAnZnVuY3Rpb24nKSBkZXN0LmRlc3Ryb3koKTtcbiAgfVxuXG4gIC8vIGRvbid0IGxlYXZlIGRhbmdsaW5nIHBpcGVzIHdoZW4gdGhlcmUgYXJlIGVycm9ycy5cbiAgZnVuY3Rpb24gb25lcnJvcihlcikge1xuICAgIGNsZWFudXAoKTtcbiAgICBpZiAoRUUubGlzdGVuZXJDb3VudCh0aGlzLCAnZXJyb3InKSA9PT0gMCkge1xuICAgICAgdGhyb3cgZXI7IC8vIFVuaGFuZGxlZCBzdHJlYW0gZXJyb3IgaW4gcGlwZS5cbiAgICB9XG4gIH1cblxuICBzb3VyY2Uub24oJ2Vycm9yJywgb25lcnJvcik7XG4gIGRlc3Qub24oJ2Vycm9yJywgb25lcnJvcik7XG5cbiAgLy8gcmVtb3ZlIGFsbCB0aGUgZXZlbnQgbGlzdGVuZXJzIHRoYXQgd2VyZSBhZGRlZC5cbiAgZnVuY3Rpb24gY2xlYW51cCgpIHtcbiAgICBzb3VyY2UucmVtb3ZlTGlzdGVuZXIoJ2RhdGEnLCBvbmRhdGEpO1xuICAgIGRlc3QucmVtb3ZlTGlzdGVuZXIoJ2RyYWluJywgb25kcmFpbik7XG5cbiAgICBzb3VyY2UucmVtb3ZlTGlzdGVuZXIoJ2VuZCcsIG9uZW5kKTtcbiAgICBzb3VyY2UucmVtb3ZlTGlzdGVuZXIoJ2Nsb3NlJywgb25jbG9zZSk7XG5cbiAgICBzb3VyY2UucmVtb3ZlTGlzdGVuZXIoJ2Vycm9yJywgb25lcnJvcik7XG4gICAgZGVzdC5yZW1vdmVMaXN0ZW5lcignZXJyb3InLCBvbmVycm9yKTtcblxuICAgIHNvdXJjZS5yZW1vdmVMaXN0ZW5lcignZW5kJywgY2xlYW51cCk7XG4gICAgc291cmNlLnJlbW92ZUxpc3RlbmVyKCdjbG9zZScsIGNsZWFudXApO1xuXG4gICAgZGVzdC5yZW1vdmVMaXN0ZW5lcignY2xvc2UnLCBjbGVhbnVwKTtcbiAgfVxuXG4gIHNvdXJjZS5vbignZW5kJywgY2xlYW51cCk7XG4gIHNvdXJjZS5vbignY2xvc2UnLCBjbGVhbnVwKTtcblxuICBkZXN0Lm9uKCdjbG9zZScsIGNsZWFudXApO1xuXG4gIGRlc3QuZW1pdCgncGlwZScsIHNvdXJjZSk7XG5cbiAgLy8gQWxsb3cgZm9yIHVuaXgtbGlrZSB1c2FnZTogQS5waXBlKEIpLnBpcGUoQylcbiAgcmV0dXJuIGRlc3Q7XG59O1xuIiwiLy8gQ29weXJpZ2h0IEpveWVudCwgSW5jLiBhbmQgb3RoZXIgTm9kZSBjb250cmlidXRvcnMuXG4vL1xuLy8gUGVybWlzc2lvbiBpcyBoZXJlYnkgZ3JhbnRlZCwgZnJlZSBvZiBjaGFyZ2UsIHRvIGFueSBwZXJzb24gb2J0YWluaW5nIGFcbi8vIGNvcHkgb2YgdGhpcyBzb2Z0d2FyZSBhbmQgYXNzb2NpYXRlZCBkb2N1bWVudGF0aW9uIGZpbGVzICh0aGVcbi8vIFwiU29mdHdhcmVcIiksIHRvIGRlYWwgaW4gdGhlIFNvZnR3YXJlIHdpdGhvdXQgcmVzdHJpY3Rpb24sIGluY2x1ZGluZ1xuLy8gd2l0aG91dCBsaW1pdGF0aW9uIHRoZSByaWdodHMgdG8gdXNlLCBjb3B5LCBtb2RpZnksIG1lcmdlLCBwdWJsaXNoLFxuLy8gZGlzdHJpYnV0ZSwgc3VibGljZW5zZSwgYW5kL29yIHNlbGwgY29waWVzIG9mIHRoZSBTb2Z0d2FyZSwgYW5kIHRvIHBlcm1pdFxuLy8gcGVyc29ucyB0byB3aG9tIHRoZSBTb2Z0d2FyZSBpcyBmdXJuaXNoZWQgdG8gZG8gc28sIHN1YmplY3QgdG8gdGhlXG4vLyBmb2xsb3dpbmcgY29uZGl0aW9uczpcbi8vXG4vLyBUaGUgYWJvdmUgY29weXJpZ2h0IG5vdGljZSBhbmQgdGhpcyBwZXJtaXNzaW9uIG5vdGljZSBzaGFsbCBiZSBpbmNsdWRlZFxuLy8gaW4gYWxsIGNvcGllcyBvciBzdWJzdGFudGlhbCBwb3J0aW9ucyBvZiB0aGUgU29mdHdhcmUuXG4vL1xuLy8gVEhFIFNPRlRXQVJFIElTIFBST1ZJREVEIFwiQVMgSVNcIiwgV0lUSE9VVCBXQVJSQU5UWSBPRiBBTlkgS0lORCwgRVhQUkVTU1xuLy8gT1IgSU1QTElFRCwgSU5DTFVESU5HIEJVVCBOT1QgTElNSVRFRCBUTyBUSEUgV0FSUkFOVElFUyBPRlxuLy8gTUVSQ0hBTlRBQklMSVRZLCBGSVRORVNTIEZPUiBBIFBBUlRJQ1VMQVIgUFVSUE9TRSBBTkQgTk9OSU5GUklOR0VNRU5ULiBJTlxuLy8gTk8gRVZFTlQgU0hBTEwgVEhFIEFVVEhPUlMgT1IgQ09QWVJJR0hUIEhPTERFUlMgQkUgTElBQkxFIEZPUiBBTlkgQ0xBSU0sXG4vLyBEQU1BR0VTIE9SIE9USEVSIExJQUJJTElUWSwgV0hFVEhFUiBJTiBBTiBBQ1RJT04gT0YgQ09OVFJBQ1QsIFRPUlQgT1Jcbi8vIE9USEVSV0lTRSwgQVJJU0lORyBGUk9NLCBPVVQgT0YgT1IgSU4gQ09OTkVDVElPTiBXSVRIIFRIRSBTT0ZUV0FSRSBPUiBUSEVcbi8vIFVTRSBPUiBPVEhFUiBERUFMSU5HUyBJTiBUSEUgU09GVFdBUkUuXG5cbid1c2Ugc3RyaWN0JztcblxuLyo8cmVwbGFjZW1lbnQ+Ki9cblxudmFyIEJ1ZmZlciA9IHJlcXVpcmUoJ3NhZmUtYnVmZmVyJykuQnVmZmVyO1xuLyo8L3JlcGxhY2VtZW50PiovXG5cbnZhciBpc0VuY29kaW5nID0gQnVmZmVyLmlzRW5jb2RpbmcgfHwgZnVuY3Rpb24gKGVuY29kaW5nKSB7XG4gIGVuY29kaW5nID0gJycgKyBlbmNvZGluZztcbiAgc3dpdGNoIChlbmNvZGluZyAmJiBlbmNvZGluZy50b0xvd2VyQ2FzZSgpKSB7XG4gICAgY2FzZSAnaGV4JzpjYXNlICd1dGY4JzpjYXNlICd1dGYtOCc6Y2FzZSAnYXNjaWknOmNhc2UgJ2JpbmFyeSc6Y2FzZSAnYmFzZTY0JzpjYXNlICd1Y3MyJzpjYXNlICd1Y3MtMic6Y2FzZSAndXRmMTZsZSc6Y2FzZSAndXRmLTE2bGUnOmNhc2UgJ3Jhdyc6XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICBkZWZhdWx0OlxuICAgICAgcmV0dXJuIGZhbHNlO1xuICB9XG59O1xuXG5mdW5jdGlvbiBfbm9ybWFsaXplRW5jb2RpbmcoZW5jKSB7XG4gIGlmICghZW5jKSByZXR1cm4gJ3V0ZjgnO1xuICB2YXIgcmV0cmllZDtcbiAgd2hpbGUgKHRydWUpIHtcbiAgICBzd2l0Y2ggKGVuYykge1xuICAgICAgY2FzZSAndXRmOCc6XG4gICAgICBjYXNlICd1dGYtOCc6XG4gICAgICAgIHJldHVybiAndXRmOCc7XG4gICAgICBjYXNlICd1Y3MyJzpcbiAgICAgIGNhc2UgJ3Vjcy0yJzpcbiAgICAgIGNhc2UgJ3V0ZjE2bGUnOlxuICAgICAgY2FzZSAndXRmLTE2bGUnOlxuICAgICAgICByZXR1cm4gJ3V0ZjE2bGUnO1xuICAgICAgY2FzZSAnbGF0aW4xJzpcbiAgICAgIGNhc2UgJ2JpbmFyeSc6XG4gICAgICAgIHJldHVybiAnbGF0aW4xJztcbiAgICAgIGNhc2UgJ2Jhc2U2NCc6XG4gICAgICBjYXNlICdhc2NpaSc6XG4gICAgICBjYXNlICdoZXgnOlxuICAgICAgICByZXR1cm4gZW5jO1xuICAgICAgZGVmYXVsdDpcbiAgICAgICAgaWYgKHJldHJpZWQpIHJldHVybjsgLy8gdW5kZWZpbmVkXG4gICAgICAgIGVuYyA9ICgnJyArIGVuYykudG9Mb3dlckNhc2UoKTtcbiAgICAgICAgcmV0cmllZCA9IHRydWU7XG4gICAgfVxuICB9XG59O1xuXG4vLyBEbyBub3QgY2FjaGUgYEJ1ZmZlci5pc0VuY29kaW5nYCB3aGVuIGNoZWNraW5nIGVuY29kaW5nIG5hbWVzIGFzIHNvbWVcbi8vIG1vZHVsZXMgbW9ua2V5LXBhdGNoIGl0IHRvIHN1cHBvcnQgYWRkaXRpb25hbCBlbmNvZGluZ3NcbmZ1bmN0aW9uIG5vcm1hbGl6ZUVuY29kaW5nKGVuYykge1xuICB2YXIgbmVuYyA9IF9ub3JtYWxpemVFbmNvZGluZyhlbmMpO1xuICBpZiAodHlwZW9mIG5lbmMgIT09ICdzdHJpbmcnICYmIChCdWZmZXIuaXNFbmNvZGluZyA9PT0gaXNFbmNvZGluZyB8fCAhaXNFbmNvZGluZyhlbmMpKSkgdGhyb3cgbmV3IEVycm9yKCdVbmtub3duIGVuY29kaW5nOiAnICsgZW5jKTtcbiAgcmV0dXJuIG5lbmMgfHwgZW5jO1xufVxuXG4vLyBTdHJpbmdEZWNvZGVyIHByb3ZpZGVzIGFuIGludGVyZmFjZSBmb3IgZWZmaWNpZW50bHkgc3BsaXR0aW5nIGEgc2VyaWVzIG9mXG4vLyBidWZmZXJzIGludG8gYSBzZXJpZXMgb2YgSlMgc3RyaW5ncyB3aXRob3V0IGJyZWFraW5nIGFwYXJ0IG11bHRpLWJ5dGVcbi8vIGNoYXJhY3RlcnMuXG5leHBvcnRzLlN0cmluZ0RlY29kZXIgPSBTdHJpbmdEZWNvZGVyO1xuZnVuY3Rpb24gU3RyaW5nRGVjb2RlcihlbmNvZGluZykge1xuICB0aGlzLmVuY29kaW5nID0gbm9ybWFsaXplRW5jb2RpbmcoZW5jb2RpbmcpO1xuICB2YXIgbmI7XG4gIHN3aXRjaCAodGhpcy5lbmNvZGluZykge1xuICAgIGNhc2UgJ3V0ZjE2bGUnOlxuICAgICAgdGhpcy50ZXh0ID0gdXRmMTZUZXh0O1xuICAgICAgdGhpcy5lbmQgPSB1dGYxNkVuZDtcbiAgICAgIG5iID0gNDtcbiAgICAgIGJyZWFrO1xuICAgIGNhc2UgJ3V0ZjgnOlxuICAgICAgdGhpcy5maWxsTGFzdCA9IHV0ZjhGaWxsTGFzdDtcbiAgICAgIG5iID0gNDtcbiAgICAgIGJyZWFrO1xuICAgIGNhc2UgJ2Jhc2U2NCc6XG4gICAgICB0aGlzLnRleHQgPSBiYXNlNjRUZXh0O1xuICAgICAgdGhpcy5lbmQgPSBiYXNlNjRFbmQ7XG4gICAgICBuYiA9IDM7XG4gICAgICBicmVhaztcbiAgICBkZWZhdWx0OlxuICAgICAgdGhpcy53cml0ZSA9IHNpbXBsZVdyaXRlO1xuICAgICAgdGhpcy5lbmQgPSBzaW1wbGVFbmQ7XG4gICAgICByZXR1cm47XG4gIH1cbiAgdGhpcy5sYXN0TmVlZCA9IDA7XG4gIHRoaXMubGFzdFRvdGFsID0gMDtcbiAgdGhpcy5sYXN0Q2hhciA9IEJ1ZmZlci5hbGxvY1Vuc2FmZShuYik7XG59XG5cblN0cmluZ0RlY29kZXIucHJvdG90eXBlLndyaXRlID0gZnVuY3Rpb24gKGJ1Zikge1xuICBpZiAoYnVmLmxlbmd0aCA9PT0gMCkgcmV0dXJuICcnO1xuICB2YXIgcjtcbiAgdmFyIGk7XG4gIGlmICh0aGlzLmxhc3ROZWVkKSB7XG4gICAgciA9IHRoaXMuZmlsbExhc3QoYnVmKTtcbiAgICBpZiAociA9PT0gdW5kZWZpbmVkKSByZXR1cm4gJyc7XG4gICAgaSA9IHRoaXMubGFzdE5lZWQ7XG4gICAgdGhpcy5sYXN0TmVlZCA9IDA7XG4gIH0gZWxzZSB7XG4gICAgaSA9IDA7XG4gIH1cbiAgaWYgKGkgPCBidWYubGVuZ3RoKSByZXR1cm4gciA/IHIgKyB0aGlzLnRleHQoYnVmLCBpKSA6IHRoaXMudGV4dChidWYsIGkpO1xuICByZXR1cm4gciB8fCAnJztcbn07XG5cblN0cmluZ0RlY29kZXIucHJvdG90eXBlLmVuZCA9IHV0ZjhFbmQ7XG5cbi8vIFJldHVybnMgb25seSBjb21wbGV0ZSBjaGFyYWN0ZXJzIGluIGEgQnVmZmVyXG5TdHJpbmdEZWNvZGVyLnByb3RvdHlwZS50ZXh0ID0gdXRmOFRleHQ7XG5cbi8vIEF0dGVtcHRzIHRvIGNvbXBsZXRlIGEgcGFydGlhbCBub24tVVRGLTggY2hhcmFjdGVyIHVzaW5nIGJ5dGVzIGZyb20gYSBCdWZmZXJcblN0cmluZ0RlY29kZXIucHJvdG90eXBlLmZpbGxMYXN0ID0gZnVuY3Rpb24gKGJ1Zikge1xuICBpZiAodGhpcy5sYXN0TmVlZCA8PSBidWYubGVuZ3RoKSB7XG4gICAgYnVmLmNvcHkodGhpcy5sYXN0Q2hhciwgdGhpcy5sYXN0VG90YWwgLSB0aGlzLmxhc3ROZWVkLCAwLCB0aGlzLmxhc3ROZWVkKTtcbiAgICByZXR1cm4gdGhpcy5sYXN0Q2hhci50b1N0cmluZyh0aGlzLmVuY29kaW5nLCAwLCB0aGlzLmxhc3RUb3RhbCk7XG4gIH1cbiAgYnVmLmNvcHkodGhpcy5sYXN0Q2hhciwgdGhpcy5sYXN0VG90YWwgLSB0aGlzLmxhc3ROZWVkLCAwLCBidWYubGVuZ3RoKTtcbiAgdGhpcy5sYXN0TmVlZCAtPSBidWYubGVuZ3RoO1xufTtcblxuLy8gQ2hlY2tzIHRoZSB0eXBlIG9mIGEgVVRGLTggYnl0ZSwgd2hldGhlciBpdCdzIEFTQ0lJLCBhIGxlYWRpbmcgYnl0ZSwgb3IgYVxuLy8gY29udGludWF0aW9uIGJ5dGUuIElmIGFuIGludmFsaWQgYnl0ZSBpcyBkZXRlY3RlZCwgLTIgaXMgcmV0dXJuZWQuXG5mdW5jdGlvbiB1dGY4Q2hlY2tCeXRlKGJ5dGUpIHtcbiAgaWYgKGJ5dGUgPD0gMHg3RikgcmV0dXJuIDA7ZWxzZSBpZiAoYnl0ZSA+PiA1ID09PSAweDA2KSByZXR1cm4gMjtlbHNlIGlmIChieXRlID4+IDQgPT09IDB4MEUpIHJldHVybiAzO2Vsc2UgaWYgKGJ5dGUgPj4gMyA9PT0gMHgxRSkgcmV0dXJuIDQ7XG4gIHJldHVybiBieXRlID4+IDYgPT09IDB4MDIgPyAtMSA6IC0yO1xufVxuXG4vLyBDaGVja3MgYXQgbW9zdCAzIGJ5dGVzIGF0IHRoZSBlbmQgb2YgYSBCdWZmZXIgaW4gb3JkZXIgdG8gZGV0ZWN0IGFuXG4vLyBpbmNvbXBsZXRlIG11bHRpLWJ5dGUgVVRGLTggY2hhcmFjdGVyLiBUaGUgdG90YWwgbnVtYmVyIG9mIGJ5dGVzICgyLCAzLCBvciA0KVxuLy8gbmVlZGVkIHRvIGNvbXBsZXRlIHRoZSBVVEYtOCBjaGFyYWN0ZXIgKGlmIGFwcGxpY2FibGUpIGFyZSByZXR1cm5lZC5cbmZ1bmN0aW9uIHV0ZjhDaGVja0luY29tcGxldGUoc2VsZiwgYnVmLCBpKSB7XG4gIHZhciBqID0gYnVmLmxlbmd0aCAtIDE7XG4gIGlmIChqIDwgaSkgcmV0dXJuIDA7XG4gIHZhciBuYiA9IHV0ZjhDaGVja0J5dGUoYnVmW2pdKTtcbiAgaWYgKG5iID49IDApIHtcbiAgICBpZiAobmIgPiAwKSBzZWxmLmxhc3ROZWVkID0gbmIgLSAxO1xuICAgIHJldHVybiBuYjtcbiAgfVxuICBpZiAoLS1qIDwgaSB8fCBuYiA9PT0gLTIpIHJldHVybiAwO1xuICBuYiA9IHV0ZjhDaGVja0J5dGUoYnVmW2pdKTtcbiAgaWYgKG5iID49IDApIHtcbiAgICBpZiAobmIgPiAwKSBzZWxmLmxhc3ROZWVkID0gbmIgLSAyO1xuICAgIHJldHVybiBuYjtcbiAgfVxuICBpZiAoLS1qIDwgaSB8fCBuYiA9PT0gLTIpIHJldHVybiAwO1xuICBuYiA9IHV0ZjhDaGVja0J5dGUoYnVmW2pdKTtcbiAgaWYgKG5iID49IDApIHtcbiAgICBpZiAobmIgPiAwKSB7XG4gICAgICBpZiAobmIgPT09IDIpIG5iID0gMDtlbHNlIHNlbGYubGFzdE5lZWQgPSBuYiAtIDM7XG4gICAgfVxuICAgIHJldHVybiBuYjtcbiAgfVxuICByZXR1cm4gMDtcbn1cblxuLy8gVmFsaWRhdGVzIGFzIG1hbnkgY29udGludWF0aW9uIGJ5dGVzIGZvciBhIG11bHRpLWJ5dGUgVVRGLTggY2hhcmFjdGVyIGFzXG4vLyBuZWVkZWQgb3IgYXJlIGF2YWlsYWJsZS4gSWYgd2Ugc2VlIGEgbm9uLWNvbnRpbnVhdGlvbiBieXRlIHdoZXJlIHdlIGV4cGVjdFxuLy8gb25lLCB3ZSBcInJlcGxhY2VcIiB0aGUgdmFsaWRhdGVkIGNvbnRpbnVhdGlvbiBieXRlcyB3ZSd2ZSBzZWVuIHNvIGZhciB3aXRoXG4vLyBhIHNpbmdsZSBVVEYtOCByZXBsYWNlbWVudCBjaGFyYWN0ZXIgKCdcXHVmZmZkJyksIHRvIG1hdGNoIHY4J3MgVVRGLTggZGVjb2Rpbmdcbi8vIGJlaGF2aW9yLiBUaGUgY29udGludWF0aW9uIGJ5dGUgY2hlY2sgaXMgaW5jbHVkZWQgdGhyZWUgdGltZXMgaW4gdGhlIGNhc2Vcbi8vIHdoZXJlIGFsbCBvZiB0aGUgY29udGludWF0aW9uIGJ5dGVzIGZvciBhIGNoYXJhY3RlciBleGlzdCBpbiB0aGUgc2FtZSBidWZmZXIuXG4vLyBJdCBpcyBhbHNvIGRvbmUgdGhpcyB3YXkgYXMgYSBzbGlnaHQgcGVyZm9ybWFuY2UgaW5jcmVhc2UgaW5zdGVhZCBvZiB1c2luZyBhXG4vLyBsb29wLlxuZnVuY3Rpb24gdXRmOENoZWNrRXh0cmFCeXRlcyhzZWxmLCBidWYsIHApIHtcbiAgaWYgKChidWZbMF0gJiAweEMwKSAhPT0gMHg4MCkge1xuICAgIHNlbGYubGFzdE5lZWQgPSAwO1xuICAgIHJldHVybiAnXFx1ZmZmZCc7XG4gIH1cbiAgaWYgKHNlbGYubGFzdE5lZWQgPiAxICYmIGJ1Zi5sZW5ndGggPiAxKSB7XG4gICAgaWYgKChidWZbMV0gJiAweEMwKSAhPT0gMHg4MCkge1xuICAgICAgc2VsZi5sYXN0TmVlZCA9IDE7XG4gICAgICByZXR1cm4gJ1xcdWZmZmQnO1xuICAgIH1cbiAgICBpZiAoc2VsZi5sYXN0TmVlZCA+IDIgJiYgYnVmLmxlbmd0aCA+IDIpIHtcbiAgICAgIGlmICgoYnVmWzJdICYgMHhDMCkgIT09IDB4ODApIHtcbiAgICAgICAgc2VsZi5sYXN0TmVlZCA9IDI7XG4gICAgICAgIHJldHVybiAnXFx1ZmZmZCc7XG4gICAgICB9XG4gICAgfVxuICB9XG59XG5cbi8vIEF0dGVtcHRzIHRvIGNvbXBsZXRlIGEgbXVsdGktYnl0ZSBVVEYtOCBjaGFyYWN0ZXIgdXNpbmcgYnl0ZXMgZnJvbSBhIEJ1ZmZlci5cbmZ1bmN0aW9uIHV0ZjhGaWxsTGFzdChidWYpIHtcbiAgdmFyIHAgPSB0aGlzLmxhc3RUb3RhbCAtIHRoaXMubGFzdE5lZWQ7XG4gIHZhciByID0gdXRmOENoZWNrRXh0cmFCeXRlcyh0aGlzLCBidWYsIHApO1xuICBpZiAociAhPT0gdW5kZWZpbmVkKSByZXR1cm4gcjtcbiAgaWYgKHRoaXMubGFzdE5lZWQgPD0gYnVmLmxlbmd0aCkge1xuICAgIGJ1Zi5jb3B5KHRoaXMubGFzdENoYXIsIHAsIDAsIHRoaXMubGFzdE5lZWQpO1xuICAgIHJldHVybiB0aGlzLmxhc3RDaGFyLnRvU3RyaW5nKHRoaXMuZW5jb2RpbmcsIDAsIHRoaXMubGFzdFRvdGFsKTtcbiAgfVxuICBidWYuY29weSh0aGlzLmxhc3RDaGFyLCBwLCAwLCBidWYubGVuZ3RoKTtcbiAgdGhpcy5sYXN0TmVlZCAtPSBidWYubGVuZ3RoO1xufVxuXG4vLyBSZXR1cm5zIGFsbCBjb21wbGV0ZSBVVEYtOCBjaGFyYWN0ZXJzIGluIGEgQnVmZmVyLiBJZiB0aGUgQnVmZmVyIGVuZGVkIG9uIGFcbi8vIHBhcnRpYWwgY2hhcmFjdGVyLCB0aGUgY2hhcmFjdGVyJ3MgYnl0ZXMgYXJlIGJ1ZmZlcmVkIHVudGlsIHRoZSByZXF1aXJlZFxuLy8gbnVtYmVyIG9mIGJ5dGVzIGFyZSBhdmFpbGFibGUuXG5mdW5jdGlvbiB1dGY4VGV4dChidWYsIGkpIHtcbiAgdmFyIHRvdGFsID0gdXRmOENoZWNrSW5jb21wbGV0ZSh0aGlzLCBidWYsIGkpO1xuICBpZiAoIXRoaXMubGFzdE5lZWQpIHJldHVybiBidWYudG9TdHJpbmcoJ3V0ZjgnLCBpKTtcbiAgdGhpcy5sYXN0VG90YWwgPSB0b3RhbDtcbiAgdmFyIGVuZCA9IGJ1Zi5sZW5ndGggLSAodG90YWwgLSB0aGlzLmxhc3ROZWVkKTtcbiAgYnVmLmNvcHkodGhpcy5sYXN0Q2hhciwgMCwgZW5kKTtcbiAgcmV0dXJuIGJ1Zi50b1N0cmluZygndXRmOCcsIGksIGVuZCk7XG59XG5cbi8vIEZvciBVVEYtOCwgYSByZXBsYWNlbWVudCBjaGFyYWN0ZXIgaXMgYWRkZWQgd2hlbiBlbmRpbmcgb24gYSBwYXJ0aWFsXG4vLyBjaGFyYWN0ZXIuXG5mdW5jdGlvbiB1dGY4RW5kKGJ1Zikge1xuICB2YXIgciA9IGJ1ZiAmJiBidWYubGVuZ3RoID8gdGhpcy53cml0ZShidWYpIDogJyc7XG4gIGlmICh0aGlzLmxhc3ROZWVkKSByZXR1cm4gciArICdcXHVmZmZkJztcbiAgcmV0dXJuIHI7XG59XG5cbi8vIFVURi0xNkxFIHR5cGljYWxseSBuZWVkcyB0d28gYnl0ZXMgcGVyIGNoYXJhY3RlciwgYnV0IGV2ZW4gaWYgd2UgaGF2ZSBhbiBldmVuXG4vLyBudW1iZXIgb2YgYnl0ZXMgYXZhaWxhYmxlLCB3ZSBuZWVkIHRvIGNoZWNrIGlmIHdlIGVuZCBvbiBhIGxlYWRpbmcvaGlnaFxuLy8gc3Vycm9nYXRlLiBJbiB0aGF0IGNhc2UsIHdlIG5lZWQgdG8gd2FpdCBmb3IgdGhlIG5leHQgdHdvIGJ5dGVzIGluIG9yZGVyIHRvXG4vLyBkZWNvZGUgdGhlIGxhc3QgY2hhcmFjdGVyIHByb3Blcmx5LlxuZnVuY3Rpb24gdXRmMTZUZXh0KGJ1ZiwgaSkge1xuICBpZiAoKGJ1Zi5sZW5ndGggLSBpKSAlIDIgPT09IDApIHtcbiAgICB2YXIgciA9IGJ1Zi50b1N0cmluZygndXRmMTZsZScsIGkpO1xuICAgIGlmIChyKSB7XG4gICAgICB2YXIgYyA9IHIuY2hhckNvZGVBdChyLmxlbmd0aCAtIDEpO1xuICAgICAgaWYgKGMgPj0gMHhEODAwICYmIGMgPD0gMHhEQkZGKSB7XG4gICAgICAgIHRoaXMubGFzdE5lZWQgPSAyO1xuICAgICAgICB0aGlzLmxhc3RUb3RhbCA9IDQ7XG4gICAgICAgIHRoaXMubGFzdENoYXJbMF0gPSBidWZbYnVmLmxlbmd0aCAtIDJdO1xuICAgICAgICB0aGlzLmxhc3RDaGFyWzFdID0gYnVmW2J1Zi5sZW5ndGggLSAxXTtcbiAgICAgICAgcmV0dXJuIHIuc2xpY2UoMCwgLTEpO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gcjtcbiAgfVxuICB0aGlzLmxhc3ROZWVkID0gMTtcbiAgdGhpcy5sYXN0VG90YWwgPSAyO1xuICB0aGlzLmxhc3RDaGFyWzBdID0gYnVmW2J1Zi5sZW5ndGggLSAxXTtcbiAgcmV0dXJuIGJ1Zi50b1N0cmluZygndXRmMTZsZScsIGksIGJ1Zi5sZW5ndGggLSAxKTtcbn1cblxuLy8gRm9yIFVURi0xNkxFIHdlIGRvIG5vdCBleHBsaWNpdGx5IGFwcGVuZCBzcGVjaWFsIHJlcGxhY2VtZW50IGNoYXJhY3RlcnMgaWYgd2Vcbi8vIGVuZCBvbiBhIHBhcnRpYWwgY2hhcmFjdGVyLCB3ZSBzaW1wbHkgbGV0IHY4IGhhbmRsZSB0aGF0LlxuZnVuY3Rpb24gdXRmMTZFbmQoYnVmKSB7XG4gIHZhciByID0gYnVmICYmIGJ1Zi5sZW5ndGggPyB0aGlzLndyaXRlKGJ1ZikgOiAnJztcbiAgaWYgKHRoaXMubGFzdE5lZWQpIHtcbiAgICB2YXIgZW5kID0gdGhpcy5sYXN0VG90YWwgLSB0aGlzLmxhc3ROZWVkO1xuICAgIHJldHVybiByICsgdGhpcy5sYXN0Q2hhci50b1N0cmluZygndXRmMTZsZScsIDAsIGVuZCk7XG4gIH1cbiAgcmV0dXJuIHI7XG59XG5cbmZ1bmN0aW9uIGJhc2U2NFRleHQoYnVmLCBpKSB7XG4gIHZhciBuID0gKGJ1Zi5sZW5ndGggLSBpKSAlIDM7XG4gIGlmIChuID09PSAwKSByZXR1cm4gYnVmLnRvU3RyaW5nKCdiYXNlNjQnLCBpKTtcbiAgdGhpcy5sYXN0TmVlZCA9IDMgLSBuO1xuICB0aGlzLmxhc3RUb3RhbCA9IDM7XG4gIGlmIChuID09PSAxKSB7XG4gICAgdGhpcy5sYXN0Q2hhclswXSA9IGJ1ZltidWYubGVuZ3RoIC0gMV07XG4gIH0gZWxzZSB7XG4gICAgdGhpcy5sYXN0Q2hhclswXSA9IGJ1ZltidWYubGVuZ3RoIC0gMl07XG4gICAgdGhpcy5sYXN0Q2hhclsxXSA9IGJ1ZltidWYubGVuZ3RoIC0gMV07XG4gIH1cbiAgcmV0dXJuIGJ1Zi50b1N0cmluZygnYmFzZTY0JywgaSwgYnVmLmxlbmd0aCAtIG4pO1xufVxuXG5mdW5jdGlvbiBiYXNlNjRFbmQoYnVmKSB7XG4gIHZhciByID0gYnVmICYmIGJ1Zi5sZW5ndGggPyB0aGlzLndyaXRlKGJ1ZikgOiAnJztcbiAgaWYgKHRoaXMubGFzdE5lZWQpIHJldHVybiByICsgdGhpcy5sYXN0Q2hhci50b1N0cmluZygnYmFzZTY0JywgMCwgMyAtIHRoaXMubGFzdE5lZWQpO1xuICByZXR1cm4gcjtcbn1cblxuLy8gUGFzcyBieXRlcyBvbiB0aHJvdWdoIGZvciBzaW5nbGUtYnl0ZSBlbmNvZGluZ3MgKGUuZy4gYXNjaWksIGxhdGluMSwgaGV4KVxuZnVuY3Rpb24gc2ltcGxlV3JpdGUoYnVmKSB7XG4gIHJldHVybiBidWYudG9TdHJpbmcodGhpcy5lbmNvZGluZyk7XG59XG5cbmZ1bmN0aW9uIHNpbXBsZUVuZChidWYpIHtcbiAgcmV0dXJuIGJ1ZiAmJiBidWYubGVuZ3RoID8gdGhpcy53cml0ZShidWYpIDogJyc7XG59IiwidmFyIHNjb3BlID0gKHR5cGVvZiBnbG9iYWwgIT09IFwidW5kZWZpbmVkXCIgJiYgZ2xvYmFsKSB8fFxuICAgICAgICAgICAgKHR5cGVvZiBzZWxmICE9PSBcInVuZGVmaW5lZFwiICYmIHNlbGYpIHx8XG4gICAgICAgICAgICB3aW5kb3c7XG52YXIgYXBwbHkgPSBGdW5jdGlvbi5wcm90b3R5cGUuYXBwbHk7XG5cbi8vIERPTSBBUElzLCBmb3IgY29tcGxldGVuZXNzXG5cbmV4cG9ydHMuc2V0VGltZW91dCA9IGZ1bmN0aW9uKCkge1xuICByZXR1cm4gbmV3IFRpbWVvdXQoYXBwbHkuY2FsbChzZXRUaW1lb3V0LCBzY29wZSwgYXJndW1lbnRzKSwgY2xlYXJUaW1lb3V0KTtcbn07XG5leHBvcnRzLnNldEludGVydmFsID0gZnVuY3Rpb24oKSB7XG4gIHJldHVybiBuZXcgVGltZW91dChhcHBseS5jYWxsKHNldEludGVydmFsLCBzY29wZSwgYXJndW1lbnRzKSwgY2xlYXJJbnRlcnZhbCk7XG59O1xuZXhwb3J0cy5jbGVhclRpbWVvdXQgPVxuZXhwb3J0cy5jbGVhckludGVydmFsID0gZnVuY3Rpb24odGltZW91dCkge1xuICBpZiAodGltZW91dCkge1xuICAgIHRpbWVvdXQuY2xvc2UoKTtcbiAgfVxufTtcblxuZnVuY3Rpb24gVGltZW91dChpZCwgY2xlYXJGbikge1xuICB0aGlzLl9pZCA9IGlkO1xuICB0aGlzLl9jbGVhckZuID0gY2xlYXJGbjtcbn1cblRpbWVvdXQucHJvdG90eXBlLnVucmVmID0gVGltZW91dC5wcm90b3R5cGUucmVmID0gZnVuY3Rpb24oKSB7fTtcblRpbWVvdXQucHJvdG90eXBlLmNsb3NlID0gZnVuY3Rpb24oKSB7XG4gIHRoaXMuX2NsZWFyRm4uY2FsbChzY29wZSwgdGhpcy5faWQpO1xufTtcblxuLy8gRG9lcyBub3Qgc3RhcnQgdGhlIHRpbWUsIGp1c3Qgc2V0cyB1cCB0aGUgbWVtYmVycyBuZWVkZWQuXG5leHBvcnRzLmVucm9sbCA9IGZ1bmN0aW9uKGl0ZW0sIG1zZWNzKSB7XG4gIGNsZWFyVGltZW91dChpdGVtLl9pZGxlVGltZW91dElkKTtcbiAgaXRlbS5faWRsZVRpbWVvdXQgPSBtc2Vjcztcbn07XG5cbmV4cG9ydHMudW5lbnJvbGwgPSBmdW5jdGlvbihpdGVtKSB7XG4gIGNsZWFyVGltZW91dChpdGVtLl9pZGxlVGltZW91dElkKTtcbiAgaXRlbS5faWRsZVRpbWVvdXQgPSAtMTtcbn07XG5cbmV4cG9ydHMuX3VucmVmQWN0aXZlID0gZXhwb3J0cy5hY3RpdmUgPSBmdW5jdGlvbihpdGVtKSB7XG4gIGNsZWFyVGltZW91dChpdGVtLl9pZGxlVGltZW91dElkKTtcblxuICB2YXIgbXNlY3MgPSBpdGVtLl9pZGxlVGltZW91dDtcbiAgaWYgKG1zZWNzID49IDApIHtcbiAgICBpdGVtLl9pZGxlVGltZW91dElkID0gc2V0VGltZW91dChmdW5jdGlvbiBvblRpbWVvdXQoKSB7XG4gICAgICBpZiAoaXRlbS5fb25UaW1lb3V0KVxuICAgICAgICBpdGVtLl9vblRpbWVvdXQoKTtcbiAgICB9LCBtc2Vjcyk7XG4gIH1cbn07XG5cbi8vIHNldGltbWVkaWF0ZSBhdHRhY2hlcyBpdHNlbGYgdG8gdGhlIGdsb2JhbCBvYmplY3RcbnJlcXVpcmUoXCJzZXRpbW1lZGlhdGVcIik7XG4vLyBPbiBzb21lIGV4b3RpYyBlbnZpcm9ubWVudHMsIGl0J3Mgbm90IGNsZWFyIHdoaWNoIG9iamVjdCBgc2V0aW1tZWRpYXRlYCB3YXNcbi8vIGFibGUgdG8gaW5zdGFsbCBvbnRvLiAgU2VhcmNoIGVhY2ggcG9zc2liaWxpdHkgaW4gdGhlIHNhbWUgb3JkZXIgYXMgdGhlXG4vLyBgc2V0aW1tZWRpYXRlYCBsaWJyYXJ5LlxuZXhwb3J0cy5zZXRJbW1lZGlhdGUgPSAodHlwZW9mIHNlbGYgIT09IFwidW5kZWZpbmVkXCIgJiYgc2VsZi5zZXRJbW1lZGlhdGUpIHx8XG4gICAgICAgICAgICAgICAgICAgICAgICh0eXBlb2YgZ2xvYmFsICE9PSBcInVuZGVmaW5lZFwiICYmIGdsb2JhbC5zZXRJbW1lZGlhdGUpIHx8XG4gICAgICAgICAgICAgICAgICAgICAgICh0aGlzICYmIHRoaXMuc2V0SW1tZWRpYXRlKTtcbmV4cG9ydHMuY2xlYXJJbW1lZGlhdGUgPSAodHlwZW9mIHNlbGYgIT09IFwidW5kZWZpbmVkXCIgJiYgc2VsZi5jbGVhckltbWVkaWF0ZSkgfHxcbiAgICAgICAgICAgICAgICAgICAgICAgICAodHlwZW9mIGdsb2JhbCAhPT0gXCJ1bmRlZmluZWRcIiAmJiBnbG9iYWwuY2xlYXJJbW1lZGlhdGUpIHx8XG4gICAgICAgICAgICAgICAgICAgICAgICAgKHRoaXMgJiYgdGhpcy5jbGVhckltbWVkaWF0ZSk7XG4iLCIhZnVuY3Rpb24odCxlKXtcIm9iamVjdFwiPT10eXBlb2YgZXhwb3J0cyYmXCJvYmplY3RcIj09dHlwZW9mIG1vZHVsZT9tb2R1bGUuZXhwb3J0cz1lKCk6XCJmdW5jdGlvblwiPT10eXBlb2YgZGVmaW5lJiZkZWZpbmUuYW1kP2RlZmluZShbXSxlKTpcIm9iamVjdFwiPT10eXBlb2YgZXhwb3J0cz9leHBvcnRzLlRvbmU9ZSgpOnQuVG9uZT1lKCl9KFwidW5kZWZpbmVkXCIhPXR5cGVvZiBzZWxmP3NlbGY6dGhpcyxmdW5jdGlvbigpe3JldHVybiBmdW5jdGlvbih0KXt2YXIgZT17fTtmdW5jdGlvbiBpKHMpe2lmKGVbc10pcmV0dXJuIGVbc10uZXhwb3J0czt2YXIgbj1lW3NdPXtpOnMsbDohMSxleHBvcnRzOnt9fTtyZXR1cm4gdFtzXS5jYWxsKG4uZXhwb3J0cyxuLG4uZXhwb3J0cyxpKSxuLmw9ITAsbi5leHBvcnRzfXJldHVybiBpLm09dCxpLmM9ZSxpLmQ9ZnVuY3Rpb24odCxlLHMpe2kubyh0LGUpfHxPYmplY3QuZGVmaW5lUHJvcGVydHkodCxlLHtjb25maWd1cmFibGU6ITEsZW51bWVyYWJsZTohMCxnZXQ6c30pfSxpLnI9ZnVuY3Rpb24odCl7T2JqZWN0LmRlZmluZVByb3BlcnR5KHQsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOiEwfSl9LGkubj1mdW5jdGlvbih0KXt2YXIgZT10JiZ0Ll9fZXNNb2R1bGU/ZnVuY3Rpb24oKXtyZXR1cm4gdC5kZWZhdWx0fTpmdW5jdGlvbigpe3JldHVybiB0fTtyZXR1cm4gaS5kKGUsXCJhXCIsZSksZX0saS5vPWZ1bmN0aW9uKHQsZSl7cmV0dXJuIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbCh0LGUpfSxpLnA9XCJcIixpKGkucz0xNDgpfShbZnVuY3Rpb24odCxlLGkpe1widXNlIHN0cmljdFwiO2kucihlKSxmdW5jdGlvbih0KXt2YXIgcz1pKDkzKSxuPWZ1bmN0aW9uKCl7aWYoISh0aGlzIGluc3RhbmNlb2YgbikpdGhyb3cgbmV3IEVycm9yKFwiY29uc3RydWN0b3IgbmVlZHMgdG8gYmUgY2FsbGVkIHdpdGggdGhlICduZXcnIGtleXdvcmRcIil9O1xuLyoqXG4gKiAgVG9uZS5qc1xuICogIEBhdXRob3IgWW90YW0gTWFublxuICogIEBsaWNlbnNlIGh0dHA6Ly9vcGVuc291cmNlLm9yZy9saWNlbnNlcy9NSVQgTUlUIExpY2Vuc2VcbiAqICBAY29weXJpZ2h0IDIwMTQtMjAxOSBZb3RhbSBNYW5uXG4gKi9uLnByb3RvdHlwZS50b1N0cmluZz1mdW5jdGlvbigpe2Zvcih2YXIgdCBpbiBuKXt2YXIgZT10WzBdLm1hdGNoKC9eW0EtWl0kLyksaT1uW3RdPT09dGhpcy5jb25zdHJ1Y3RvcjtpZihuLmlzRnVuY3Rpb24oblt0XSkmJmUmJmkpcmV0dXJuIHR9cmV0dXJuXCJUb25lXCJ9LG4ucHJvdG90eXBlLmRpc3Bvc2U9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpc30sbi5wcm90b3R5cGUuc2V0PWZ1bmN0aW9uKHQsZSl7aWYobi5pc1N0cmluZyh0KSl7dmFyIGk9e307aVt0XT1lLHQ9aX10OmZvcih2YXIgcyBpbiB0KXtlPXRbc107dmFyIG89dGhpcztpZigtMSE9PXMuaW5kZXhPZihcIi5cIikpe2Zvcih2YXIgYT1zLnNwbGl0KFwiLlwiKSxyPTA7cjxhLmxlbmd0aC0xO3IrKylpZigobz1vW2Fbcl1dKWluc3RhbmNlb2Ygbil7YS5zcGxpY2UoMCxyKzEpO3ZhciBsPWEuam9pbihcIi5cIik7by5zZXQobCxlKTtjb250aW51ZSB0fXM9YVthLmxlbmd0aC0xXX12YXIgdT1vW3NdO24uaXNVbmRlZih1KXx8KG4uU2lnbmFsJiZ1IGluc3RhbmNlb2Ygbi5TaWduYWx8fG4uUGFyYW0mJnUgaW5zdGFuY2VvZiBuLlBhcmFtP3UudmFsdWUhPT1lJiYodS52YWx1ZT1lKTp1IGluc3RhbmNlb2YgQXVkaW9QYXJhbT91LnZhbHVlIT09ZSYmKHUudmFsdWU9ZSk6bi5UaW1lQmFzZSYmdSBpbnN0YW5jZW9mIG4uVGltZUJhc2U/b1tzXT1lOnUgaW5zdGFuY2VvZiBuP3Uuc2V0KGUpOnUhPT1lJiYob1tzXT1lKSl9cmV0dXJuIHRoaXN9LG4ucHJvdG90eXBlLmdldD1mdW5jdGlvbih0KXtuLmlzVW5kZWYodCk/dD10aGlzLl9jb2xsZWN0RGVmYXVsdHModGhpcy5jb25zdHJ1Y3Rvcik6bi5pc1N0cmluZyh0KSYmKHQ9W3RdKTtmb3IodmFyIGU9e30saT0wO2k8dC5sZW5ndGg7aSsrKXt2YXIgcz10W2ldLG89dGhpcyxhPWU7aWYoLTEhPT1zLmluZGV4T2YoXCIuXCIpKXtmb3IodmFyIHI9cy5zcGxpdChcIi5cIiksbD0wO2w8ci5sZW5ndGgtMTtsKyspe3ZhciB1PXJbbF07YVt1XT1hW3VdfHx7fSxhPWFbdV0sbz1vW3VdfXM9cltyLmxlbmd0aC0xXX12YXIgZD1vW3NdO24uaXNPYmplY3QodFtzXSk/YVtzXT1kLmdldCgpOm4uU2lnbmFsJiZkIGluc3RhbmNlb2Ygbi5TaWduYWw/YVtzXT1kLnZhbHVlOm4uUGFyYW0mJmQgaW5zdGFuY2VvZiBuLlBhcmFtP2Fbc109ZC52YWx1ZTpkIGluc3RhbmNlb2YgQXVkaW9QYXJhbT9hW3NdPWQudmFsdWU6ZCBpbnN0YW5jZW9mIG4/YVtzXT1kLmdldCgpOiFuLmlzRnVuY3Rpb24oZCkmJm4uaXNEZWZpbmVkKGQpJiYoYVtzXT1kKX1yZXR1cm4gZX0sbi5wcm90b3R5cGUuX2NvbGxlY3REZWZhdWx0cz1mdW5jdGlvbih0KXt2YXIgZT1bXTtpZihuLmlzRGVmaW5lZCh0LmRlZmF1bHRzKSYmKGU9T2JqZWN0LmtleXModC5kZWZhdWx0cykpLG4uaXNEZWZpbmVkKHQuX3N1cGVyKSlmb3IodmFyIGk9dGhpcy5fY29sbGVjdERlZmF1bHRzKHQuX3N1cGVyKSxzPTA7czxpLmxlbmd0aDtzKyspLTE9PT1lLmluZGV4T2YoaVtzXSkmJmUucHVzaChpW3NdKTtyZXR1cm4gZX0sbi5kZWZhdWx0cz1mdW5jdGlvbih0LGUsaSl7dmFyIHM9e307aWYoMT09PXQubGVuZ3RoJiZuLmlzT2JqZWN0KHRbMF0pKXM9dFswXTtlbHNlIGZvcih2YXIgbz0wO288ZS5sZW5ndGg7bysrKXNbZVtvXV09dFtvXTtyZXR1cm4gbi5pc0RlZmluZWQoaS5kZWZhdWx0cyk/bi5kZWZhdWx0QXJnKHMsaS5kZWZhdWx0cyk6bi5pc09iamVjdChpKT9uLmRlZmF1bHRBcmcocyxpKTpzfSxuLmRlZmF1bHRBcmc9ZnVuY3Rpb24odCxlKXtpZihuLmlzT2JqZWN0KHQpJiZuLmlzT2JqZWN0KGUpKXt2YXIgaT17fTtmb3IodmFyIHMgaW4gdClpW3NdPW4uZGVmYXVsdEFyZyhlW3NdLHRbc10pO2Zvcih2YXIgbyBpbiBlKWlbb109bi5kZWZhdWx0QXJnKHRbb10sZVtvXSk7cmV0dXJuIGl9cmV0dXJuIG4uaXNVbmRlZih0KT9lOnR9LG4ucHJvdG90eXBlLmxvZz1mdW5jdGlvbigpe2lmKHRoaXMuZGVidWd8fHRoaXMudG9TdHJpbmcoKT09PW4uZ2xvYmFsLlRPTkVfREVCVUdfQ0xBU1Mpe3ZhciB0PUFycmF5LmZyb20oYXJndW1lbnRzKTt0LnVuc2hpZnQodGhpcy50b1N0cmluZygpK1wiOlwiKSxjb25zb2xlLmxvZy5hcHBseSh2b2lkIDAsdCl9fSxuLnByb3RvdHlwZS5hc3NlcnQ9ZnVuY3Rpb24odCxlKXtpZighdCl0aHJvdyBuZXcgRXJyb3IoZSl9LG4uY29ubmVjdFNlcmllcz1mdW5jdGlvbigpe2Zvcih2YXIgdD1hcmd1bWVudHNbMF0sZT0xO2U8YXJndW1lbnRzLmxlbmd0aDtlKyspe3ZhciBpPWFyZ3VtZW50c1tlXTtuLmNvbm5lY3QodCxpKSx0PWl9cmV0dXJuIG59LG4uY29ubmVjdD1mdW5jdGlvbih0LGUsaSxzKXtmb3IoO24uaXNEZWZpbmVkKGUuaW5wdXQpOyluLmlzQXJyYXkoZS5pbnB1dCk/KHM9bi5kZWZhdWx0QXJnKHMsMCksZT1lLmlucHV0W3NdLHM9MCk6ZS5pbnB1dCYmKGU9ZS5pbnB1dCk7cmV0dXJuIGUgaW5zdGFuY2VvZiBBdWRpb1BhcmFtP3QuY29ubmVjdChlLGkpOmUgaW5zdGFuY2VvZiBBdWRpb05vZGUmJnQuY29ubmVjdChlLGkscyksbn0sbi5kaXNjb25uZWN0PWZ1bmN0aW9uKHQsZSxpLHMpe2lmKGUpe2Zvcih2YXIgbz0hMTshbzspbi5pc0FycmF5KGUuaW5wdXQpPyhuLmlzRGVmaW5lZChzKT9uLmRpc2Nvbm5lY3QodCxlLmlucHV0W3NdLGkpOmUuaW5wdXQuZm9yRWFjaChmdW5jdGlvbihlKXt0cnl7bi5kaXNjb25uZWN0KHQsZSxpKX1jYXRjaCh0KXt9fSksbz0hMCk6ZS5pbnB1dD9lPWUuaW5wdXQ6bz0hMDtlIGluc3RhbmNlb2YgQXVkaW9QYXJhbT90LmRpc2Nvbm5lY3QoZSxpKTplIGluc3RhbmNlb2YgQXVkaW9Ob2RlJiZ0LmRpc2Nvbm5lY3QoZSxpLHMpfWVsc2UgdC5kaXNjb25uZWN0KCk7cmV0dXJuIG59LG4uaXNVbmRlZj1mdW5jdGlvbih0KXtyZXR1cm4gdm9pZCAwPT09dH0sbi5pc0RlZmluZWQ9ZnVuY3Rpb24odCl7cmV0dXJuIW4uaXNVbmRlZih0KX0sbi5pc0Z1bmN0aW9uPWZ1bmN0aW9uKHQpe3JldHVyblwiZnVuY3Rpb25cIj09dHlwZW9mIHR9LG4uaXNOdW1iZXI9ZnVuY3Rpb24odCl7cmV0dXJuXCJudW1iZXJcIj09dHlwZW9mIHR9LG4uaXNPYmplY3Q9ZnVuY3Rpb24odCl7cmV0dXJuXCJbb2JqZWN0IE9iamVjdF1cIj09PU9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbCh0KSYmdC5jb25zdHJ1Y3Rvcj09PU9iamVjdH0sbi5pc0Jvb2xlYW49ZnVuY3Rpb24odCl7cmV0dXJuXCJib29sZWFuXCI9PXR5cGVvZiB0fSxuLmlzQXJyYXk9ZnVuY3Rpb24odCl7cmV0dXJuIEFycmF5LmlzQXJyYXkodCl9LG4uaXNTdHJpbmc9ZnVuY3Rpb24odCl7cmV0dXJuXCJzdHJpbmdcIj09dHlwZW9mIHR9LG4uaXNOb3RlPWZ1bmN0aW9uKHQpe3JldHVybiBuLmlzU3RyaW5nKHQpJiYvXihbYS1nXXsxfSg/OmJ8I3x4fGJiKT8pKC0/WzAtOV0rKS9pLnRlc3QodCl9LG4ubm9PcD1mdW5jdGlvbigpe30sbi5wcm90b3R5cGUuX3JlYWRPbmx5PWZ1bmN0aW9uKHQpe2lmKEFycmF5LmlzQXJyYXkodCkpZm9yKHZhciBlPTA7ZTx0Lmxlbmd0aDtlKyspdGhpcy5fcmVhZE9ubHkodFtlXSk7ZWxzZSBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcyx0LHt3cml0YWJsZTohMSxlbnVtZXJhYmxlOiEwfSl9LG4ucHJvdG90eXBlLl93cml0YWJsZT1mdW5jdGlvbih0KXtpZihBcnJheS5pc0FycmF5KHQpKWZvcih2YXIgZT0wO2U8dC5sZW5ndGg7ZSsrKXRoaXMuX3dyaXRhYmxlKHRbZV0pO2Vsc2UgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsdCx7d3JpdGFibGU6ITB9KX0sbi5TdGF0ZT17U3RhcnRlZDpcInN0YXJ0ZWRcIixTdG9wcGVkOlwic3RvcHBlZFwiLFBhdXNlZDpcInBhdXNlZFwifSxuLmdsb2JhbD1uLmlzVW5kZWYodCk/d2luZG93OnQsbi5lcXVhbFBvd2VyU2NhbGU9ZnVuY3Rpb24odCl7dmFyIGU9LjUqTWF0aC5QSTtyZXR1cm4gTWF0aC5zaW4odCplKX0sbi5kYlRvR2Fpbj1mdW5jdGlvbih0KXtyZXR1cm4gTWF0aC5wb3coMTAsdC8yMCl9LG4uZ2FpblRvRGI9ZnVuY3Rpb24odCl7cmV0dXJuIE1hdGgubG9nKHQpL01hdGguTE4xMCoyMH0sbi5pbnRlcnZhbFRvRnJlcXVlbmN5UmF0aW89ZnVuY3Rpb24odCl7cmV0dXJuIE1hdGgucG93KDIsdC8xMil9LG4ucHJvdG90eXBlLm5vdz1mdW5jdGlvbigpe3JldHVybiBuLmNvbnRleHQubm93KCl9LG4ubm93PWZ1bmN0aW9uKCl7cmV0dXJuIG4uY29udGV4dC5ub3coKX0sbi5wcm90b3R5cGUuaW1tZWRpYXRlPWZ1bmN0aW9uKCl7cmV0dXJuIG4uY29udGV4dC5jdXJyZW50VGltZX0sbi5pbW1lZGlhdGU9ZnVuY3Rpb24oKXtyZXR1cm4gbi5jb250ZXh0LmN1cnJlbnRUaW1lfSxuLmV4dGVuZD1mdW5jdGlvbih0LGUpe2Z1bmN0aW9uIGkoKXt9bi5pc1VuZGVmKGUpJiYoZT1uKSxpLnByb3RvdHlwZT1lLnByb3RvdHlwZSx0LnByb3RvdHlwZT1uZXcgaSx0LnByb3RvdHlwZS5jb25zdHJ1Y3Rvcj10LHQuX3N1cGVyPWV9LG4uX2F1ZGlvQ29udGV4dD1udWxsLG4uc3RhcnQ9ZnVuY3Rpb24oKXtyZXR1cm4gbi5jb250ZXh0LnJlc3VtZSgpfSxPYmplY3QuZGVmaW5lUHJvcGVydHkobixcImNvbnRleHRcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIG4uX2F1ZGlvQ29udGV4dH0sc2V0OmZ1bmN0aW9uKHQpe3QuaXNDb250ZXh0P24uX2F1ZGlvQ29udGV4dD10Om4uX2F1ZGlvQ29udGV4dD1uZXcgbi5Db250ZXh0KHQpLG4uQ29udGV4dC5lbWl0KFwiaW5pdFwiLG4uX2F1ZGlvQ29udGV4dCl9fSksT2JqZWN0LmRlZmluZVByb3BlcnR5KG4ucHJvdG90eXBlLFwiY29udGV4dFwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gbi5jb250ZXh0fX0pLG4uc2V0Q29udGV4dD1mdW5jdGlvbih0KXtuLmNvbnRleHQ9dH0sT2JqZWN0LmRlZmluZVByb3BlcnR5KG4ucHJvdG90eXBlLFwiYmxvY2tUaW1lXCIse2dldDpmdW5jdGlvbigpe3JldHVybiAxMjgvdGhpcy5jb250ZXh0LnNhbXBsZVJhdGV9fSksT2JqZWN0LmRlZmluZVByb3BlcnR5KG4ucHJvdG90eXBlLFwic2FtcGxlVGltZVwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gMS90aGlzLmNvbnRleHQuc2FtcGxlUmF0ZX19KSxPYmplY3QuZGVmaW5lUHJvcGVydHkobixcInN1cHBvcnRlZFwiLHtnZXQ6ZnVuY3Rpb24oKXt2YXIgdD1uLmdsb2JhbC5oYXNPd25Qcm9wZXJ0eShcIkF1ZGlvQ29udGV4dFwiKXx8bi5nbG9iYWwuaGFzT3duUHJvcGVydHkoXCJ3ZWJraXRBdWRpb0NvbnRleHRcIiksZT1uLmdsb2JhbC5oYXNPd25Qcm9wZXJ0eShcIlByb21pc2VcIik7cmV0dXJuIHQmJmV9fSksT2JqZWN0LmRlZmluZVByb3BlcnR5KG4sXCJpbml0aWFsaXplZFwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gQm9vbGVhbihuLmNvbnRleHQpfX0pLG4uZ2V0Q29udGV4dD1mdW5jdGlvbih0KXtpZihuLmluaXRpYWxpemVkKXQobi5jb250ZXh0KTtlbHNle3ZhciBlPWZ1bmN0aW9uKCl7dChuLmNvbnRleHQpLG4uQ29udGV4dC5vZmYoXCJpbml0XCIsZSl9O24uQ29udGV4dC5vbihcImluaXRcIixlKX1yZXR1cm4gbn0sbi52ZXJzaW9uPXMuYSxlLmRlZmF1bHQ9bn0uY2FsbCh0aGlzLGkoMTQ3KSl9LGZ1bmN0aW9uKHQsZSxpKXtcInVzZSBzdHJpY3RcIjtpLnIoZSk7dmFyIHM9aSgwKTtpKDIwKTtpZihzLmRlZmF1bHQuc3VwcG9ydGVkKXt2YXIgbj1uZXcgT2ZmbGluZUF1ZGlvQ29udGV4dCgyLDEsNDQxMDApLG89bi5jcmVhdGVHYWluKCksYT1uLmNyZWF0ZUdhaW4oKTtpZihvLmNvbm5lY3QoYSkhPT1hKXt2YXIgcj1BdWRpb05vZGUucHJvdG90eXBlLmNvbm5lY3Q7QXVkaW9Ob2RlLnByb3RvdHlwZS5jb25uZWN0PWZ1bmN0aW9uKCl7cmV0dXJuIHIuYXBwbHkodGhpcyxhcmd1bWVudHMpLGFyZ3VtZW50c1swXX19fXMuZGVmYXVsdC5BdWRpb05vZGU9ZnVuY3Rpb24oKXtzLmRlZmF1bHQuY2FsbCh0aGlzKTt2YXIgdD1zLmRlZmF1bHQuZGVmYXVsdHMoYXJndW1lbnRzLFtcImNvbnRleHRcIl0se2NvbnRleHQ6cy5kZWZhdWx0LmNvbnRleHR9KTt0aGlzLl9jb250ZXh0PXQuY29udGV4dH0scy5kZWZhdWx0LmV4dGVuZChzLmRlZmF1bHQuQXVkaW9Ob2RlKSxPYmplY3QuZGVmaW5lUHJvcGVydHkocy5kZWZhdWx0LkF1ZGlvTm9kZS5wcm90b3R5cGUsXCJjb250ZXh0XCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9jb250ZXh0fX0pLHMuZGVmYXVsdC5BdWRpb05vZGUucHJvdG90eXBlLmNyZWF0ZUluc091dHM9ZnVuY3Rpb24odCxlKXsxPT09dD90aGlzLmlucHV0PXRoaXMuY29udGV4dC5jcmVhdGVHYWluKCk6dD4xJiYodGhpcy5pbnB1dD1uZXcgQXJyYXkodCkpLDE9PT1lP3RoaXMub3V0cHV0PXRoaXMuY29udGV4dC5jcmVhdGVHYWluKCk6ZT4xJiYodGhpcy5vdXRwdXQ9bmV3IEFycmF5KGUpKX0sT2JqZWN0LmRlZmluZVByb3BlcnR5KHMuZGVmYXVsdC5BdWRpb05vZGUucHJvdG90eXBlLFwiY2hhbm5lbENvdW50XCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLm91dHB1dC5jaGFubmVsQ291bnR9LHNldDpmdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5vdXRwdXQuY2hhbm5lbENvdW50PXR9fSksT2JqZWN0LmRlZmluZVByb3BlcnR5KHMuZGVmYXVsdC5BdWRpb05vZGUucHJvdG90eXBlLFwiY2hhbm5lbENvdW50TW9kZVwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5vdXRwdXQuY2hhbm5lbENvdW50TW9kZX0sc2V0OmZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLm91dHB1dC5jaGFubmVsQ291bnRNb2RlPXR9fSksT2JqZWN0LmRlZmluZVByb3BlcnR5KHMuZGVmYXVsdC5BdWRpb05vZGUucHJvdG90eXBlLFwiY2hhbm5lbEludGVycHJldGF0aW9uXCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLm91dHB1dC5jaGFubmVsSW50ZXJwcmV0YXRpb259LHNldDpmdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5vdXRwdXQuY2hhbm5lbEludGVycHJldGF0aW9uPXR9fSksT2JqZWN0LmRlZmluZVByb3BlcnR5KHMuZGVmYXVsdC5BdWRpb05vZGUucHJvdG90eXBlLFwibnVtYmVyT2ZJbnB1dHNcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuaW5wdXQ/cy5kZWZhdWx0LmlzQXJyYXkodGhpcy5pbnB1dCk/dGhpcy5pbnB1dC5sZW5ndGg6MTowfX0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShzLmRlZmF1bHQuQXVkaW9Ob2RlLnByb3RvdHlwZSxcIm51bWJlck9mT3V0cHV0c1wiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5vdXRwdXQ/cy5kZWZhdWx0LmlzQXJyYXkodGhpcy5vdXRwdXQpP3RoaXMub3V0cHV0Lmxlbmd0aDoxOjB9fSkscy5kZWZhdWx0LkF1ZGlvTm9kZS5wcm90b3R5cGUuY29ubmVjdD1mdW5jdGlvbih0LGUsaSl7cmV0dXJuIHMuZGVmYXVsdC5pc0FycmF5KHRoaXMub3V0cHV0KT8oZT1zLmRlZmF1bHQuZGVmYXVsdEFyZyhlLDApLHRoaXMub3V0cHV0W2VdLmNvbm5lY3QodCwwLGkpKTpzLmRlZmF1bHQuY29ubmVjdCh0aGlzLm91dHB1dCx0LGUsaSksdGhpc30scy5kZWZhdWx0LkF1ZGlvTm9kZS5wcm90b3R5cGUuZGlzY29ubmVjdD1mdW5jdGlvbih0LGUsaSl7cmV0dXJuIHMuZGVmYXVsdC5pc0FycmF5KHRoaXMub3V0cHV0KT8oZT1zLmRlZmF1bHQuZGVmYXVsdEFyZyhlLDApLHRoaXMub3V0cHV0W2VdLmRpc2Nvbm5lY3QodCwwLGkpKTpzLmRlZmF1bHQuZGlzY29ubmVjdCh0aGlzLm91dHB1dCx0LGUsaSksdGhpc30scy5kZWZhdWx0LkF1ZGlvTm9kZS5wcm90b3R5cGUuY2hhaW49ZnVuY3Rpb24oKXt2YXIgdD1BcnJheS5mcm9tKGFyZ3VtZW50cyk7cmV0dXJuIHQudW5zaGlmdCh0aGlzKSxzLmRlZmF1bHQuY29ubmVjdFNlcmllcy5hcHBseSh2b2lkIDAsdCksdGhpc30scy5kZWZhdWx0LkF1ZGlvTm9kZS5wcm90b3R5cGUuZmFuPWZ1bmN0aW9uKCl7Zm9yKHZhciB0PTA7dDxhcmd1bWVudHMubGVuZ3RoO3QrKyl0aGlzLmNvbm5lY3QoYXJndW1lbnRzW3RdKTtyZXR1cm4gdGhpc30scy5kZWZhdWx0LkF1ZGlvTm9kZS5wcm90b3R5cGUuZGlzcG9zZT1mdW5jdGlvbigpe3JldHVybiBzLmRlZmF1bHQuaXNEZWZpbmVkKHRoaXMuaW5wdXQpJiYodGhpcy5pbnB1dCBpbnN0YW5jZW9mIEF1ZGlvTm9kZSYmdGhpcy5pbnB1dC5kaXNjb25uZWN0KCksdGhpcy5pbnB1dD1udWxsKSxzLmRlZmF1bHQuaXNEZWZpbmVkKHRoaXMub3V0cHV0KSYmKHRoaXMub3V0cHV0IGluc3RhbmNlb2YgQXVkaW9Ob2RlJiZ0aGlzLm91dHB1dC5kaXNjb25uZWN0KCksdGhpcy5vdXRwdXQ9bnVsbCksdGhpcy5fY29udGV4dD1udWxsLHRoaXN9O2UuZGVmYXVsdD1zLmRlZmF1bHQuQXVkaW9Ob2RlfSxmdW5jdGlvbih0LGUsaSl7XCJ1c2Ugc3RyaWN0XCI7aS5yKGUpO3ZhciBzPWkoMCk7aSg0KSxpKDE0KSxpKDMwKSxpKDQ0KSxpKDIwKSxpKDMpO2lmKHMuZGVmYXVsdC5zdXBwb3J0ZWQmJiFzLmRlZmF1bHQuZ2xvYmFsLkF1ZGlvQ29udGV4dC5wcm90b3R5cGUuY3JlYXRlQ29uc3RhbnRTb3VyY2Upe3ZhciBuPWZ1bmN0aW9uKHQpe3RoaXMuY29udGV4dD10O2Zvcih2YXIgZT10LmNyZWF0ZUJ1ZmZlcigxLDEyOCx0LnNhbXBsZVJhdGUpLGk9ZS5nZXRDaGFubmVsRGF0YSgwKSxzPTA7czxpLmxlbmd0aDtzKyspaVtzXT0xO3RoaXMuX2J1ZmZlclNvdXJjZT10LmNyZWF0ZUJ1ZmZlclNvdXJjZSgpLHRoaXMuX2J1ZmZlclNvdXJjZS5jaGFubmVsQ291bnQ9MSx0aGlzLl9idWZmZXJTb3VyY2UuY2hhbm5lbENvdW50TW9kZT1cImV4cGxpY2l0XCIsdGhpcy5fYnVmZmVyU291cmNlLmJ1ZmZlcj1lLHRoaXMuX2J1ZmZlclNvdXJjZS5sb29wPSEwO3ZhciBuPXRoaXMuX291dHB1dD10LmNyZWF0ZUdhaW4oKTt0aGlzLm9mZnNldD1uLmdhaW4sdGhpcy5fYnVmZmVyU291cmNlLmNvbm5lY3Qobil9O24ucHJvdG90eXBlLnN0YXJ0PWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLl9idWZmZXJTb3VyY2Uuc3RhcnQodCksdGhpc30sbi5wcm90b3R5cGUuc3RvcD1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5fYnVmZmVyU291cmNlLnN0b3AodCksdGhpc30sbi5wcm90b3R5cGUuY29ubmVjdD1mdW5jdGlvbigpe3JldHVybiB0aGlzLl9vdXRwdXQuY29ubmVjdC5hcHBseSh0aGlzLl9vdXRwdXQsYXJndW1lbnRzKSx0aGlzfSxuLnByb3RvdHlwZS5kaXNjb25uZWN0PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX291dHB1dC5kaXNjb25uZWN0LmFwcGx5KHRoaXMuX291dHB1dCxhcmd1bWVudHMpLHRoaXN9LEF1ZGlvQ29udGV4dC5wcm90b3R5cGUuY3JlYXRlQ29uc3RhbnRTb3VyY2U9ZnVuY3Rpb24oKXtyZXR1cm4gbmV3IG4odGhpcyl9LHMuZGVmYXVsdC5Db250ZXh0LnByb3RvdHlwZS5jcmVhdGVDb25zdGFudFNvdXJjZT1mdW5jdGlvbigpe3JldHVybiBuZXcgbih0aGlzKX19cy5kZWZhdWx0LlNpZ25hbD1mdW5jdGlvbigpe3ZhciB0PXMuZGVmYXVsdC5kZWZhdWx0cyhhcmd1bWVudHMsW1widmFsdWVcIixcInVuaXRzXCJdLHMuZGVmYXVsdC5TaWduYWwpO3MuZGVmYXVsdC5QYXJhbS5jYWxsKHRoaXMsdCksdGhpcy5fY29uc3RhbnRTb3VyY2U9dGhpcy5jb250ZXh0LmNyZWF0ZUNvbnN0YW50U291cmNlKCksdGhpcy5fY29uc3RhbnRTb3VyY2Uuc3RhcnQoMCksdGhpcy5fcGFyYW09dGhpcy5fY29uc3RhbnRTb3VyY2Uub2Zmc2V0LHRoaXMudmFsdWU9dC52YWx1ZSx0aGlzLm91dHB1dD10aGlzLl9jb25zdGFudFNvdXJjZSx0aGlzLmlucHV0PXRoaXMuX3BhcmFtPXRoaXMub3V0cHV0Lm9mZnNldH0scy5kZWZhdWx0LmV4dGVuZChzLmRlZmF1bHQuU2lnbmFsLHMuZGVmYXVsdC5QYXJhbSkscy5kZWZhdWx0LlNpZ25hbC5kZWZhdWx0cz17dmFsdWU6MCx1bml0czpzLmRlZmF1bHQuVHlwZS5EZWZhdWx0LGNvbnZlcnQ6ITB9LHMuZGVmYXVsdC5TaWduYWwucHJvdG90eXBlLmNvbm5lY3Q9cy5kZWZhdWx0LlNpZ25hbEJhc2UucHJvdG90eXBlLmNvbm5lY3Qscy5kZWZhdWx0LlNpZ25hbC5wcm90b3R5cGUuZGlzY29ubmVjdD1zLmRlZmF1bHQuU2lnbmFsQmFzZS5wcm90b3R5cGUuZGlzY29ubmVjdCxzLmRlZmF1bHQuU2lnbmFsLnByb3RvdHlwZS5nZXRWYWx1ZUF0VGltZT1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5fcGFyYW0uZ2V0VmFsdWVBdFRpbWU/dGhpcy5fcGFyYW0uZ2V0VmFsdWVBdFRpbWUodCk6cy5kZWZhdWx0LlBhcmFtLnByb3RvdHlwZS5nZXRWYWx1ZUF0VGltZS5jYWxsKHRoaXMsdCl9LHMuZGVmYXVsdC5TaWduYWwucHJvdG90eXBlLmRpc3Bvc2U9ZnVuY3Rpb24oKXtyZXR1cm4gcy5kZWZhdWx0LlBhcmFtLnByb3RvdHlwZS5kaXNwb3NlLmNhbGwodGhpcyksdGhpcy5fY29uc3RhbnRTb3VyY2Uuc3RvcCgpLHRoaXMuX2NvbnN0YW50U291cmNlLmRpc2Nvbm5lY3QoKSx0aGlzLl9jb25zdGFudFNvdXJjZT1udWxsLHRoaXN9O2UuZGVmYXVsdD1zLmRlZmF1bHQuU2lnbmFsfSxmdW5jdGlvbih0LGUsaSl7XCJ1c2Ugc3RyaWN0XCI7aS5yKGUpO3ZhciBzPWkoMCk7aSgxNCksaSg0KSxpKDEpO3MuZGVmYXVsdC5HYWluPWZ1bmN0aW9uKCl7dmFyIHQ9cy5kZWZhdWx0LmRlZmF1bHRzKGFyZ3VtZW50cyxbXCJnYWluXCIsXCJ1bml0c1wiXSxzLmRlZmF1bHQuR2Fpbik7cy5kZWZhdWx0LkF1ZGlvTm9kZS5jYWxsKHRoaXMsdCksdGhpcy5pbnB1dD10aGlzLm91dHB1dD10aGlzLl9nYWluTm9kZT10aGlzLmNvbnRleHQuY3JlYXRlR2FpbigpLHRoaXMuZ2Fpbj1uZXcgcy5kZWZhdWx0LlBhcmFtKHtwYXJhbTp0aGlzLl9nYWluTm9kZS5nYWluLHVuaXRzOnQudW5pdHMsdmFsdWU6dC5nYWluLGNvbnZlcnQ6dC5jb252ZXJ0fSksdGhpcy5fcmVhZE9ubHkoXCJnYWluXCIpfSxzLmRlZmF1bHQuZXh0ZW5kKHMuZGVmYXVsdC5HYWluLHMuZGVmYXVsdC5BdWRpb05vZGUpLHMuZGVmYXVsdC5HYWluLmRlZmF1bHRzPXtnYWluOjEsY29udmVydDohMH0scy5kZWZhdWx0LkdhaW4ucHJvdG90eXBlLmRpc3Bvc2U9ZnVuY3Rpb24oKXtzLmRlZmF1bHQuQXVkaW9Ob2RlLnByb3RvdHlwZS5kaXNwb3NlLmNhbGwodGhpcyksdGhpcy5fZ2Fpbk5vZGUuZGlzY29ubmVjdCgpLHRoaXMuX2dhaW5Ob2RlPW51bGwsdGhpcy5fd3JpdGFibGUoXCJnYWluXCIpLHRoaXMuZ2Fpbi5kaXNwb3NlKCksdGhpcy5nYWluPW51bGx9LGUuZGVmYXVsdD1zLmRlZmF1bHQuR2Fpbn0sZnVuY3Rpb24odCxlLGkpe1widXNlIHN0cmljdFwiO2kucihlKTt2YXIgcz1pKDApO2koNjMpLGkoNDYpLGkoNDUpLGkoMjApO3MuZGVmYXVsdC5UeXBlPXtEZWZhdWx0OlwibnVtYmVyXCIsVGltZTpcInRpbWVcIixGcmVxdWVuY3k6XCJmcmVxdWVuY3lcIixUcmFuc3BvcnRUaW1lOlwidHJhbnNwb3J0VGltZVwiLFRpY2tzOlwidGlja3NcIixOb3JtYWxSYW5nZTpcIm5vcm1hbFJhbmdlXCIsQXVkaW9SYW5nZTpcImF1ZGlvUmFuZ2VcIixEZWNpYmVsczpcImRiXCIsSW50ZXJ2YWw6XCJpbnRlcnZhbFwiLEJQTTpcImJwbVwiLFBvc2l0aXZlOlwicG9zaXRpdmVcIixHYWluOlwiZ2FpblwiLENlbnRzOlwiY2VudHNcIixEZWdyZWVzOlwiZGVncmVlc1wiLE1JREk6XCJtaWRpXCIsQmFyc0JlYXRzU2l4dGVlbnRoczpcImJhcnNCZWF0c1NpeHRlZW50aHNcIixTYW1wbGVzOlwic2FtcGxlc1wiLEhlcnR6OlwiaGVydHpcIixOb3RlOlwibm90ZVwiLE1pbGxpc2Vjb25kczpcIm1pbGxpc2Vjb25kc1wiLFNlY29uZHM6XCJzZWNvbmRzXCIsTm90YXRpb246XCJub3RhdGlvblwifSxzLmRlZmF1bHQucHJvdG90eXBlLnRvU2Vjb25kcz1mdW5jdGlvbih0KXtyZXR1cm4gcy5kZWZhdWx0LmlzTnVtYmVyKHQpP3Q6cy5kZWZhdWx0LmlzVW5kZWYodCk/dGhpcy5ub3coKTpzLmRlZmF1bHQuaXNTdHJpbmcodCl8fHMuZGVmYXVsdC5pc09iamVjdCh0KT9uZXcgcy5kZWZhdWx0LlRpbWUodCkudG9TZWNvbmRzKCk6dCBpbnN0YW5jZW9mIHMuZGVmYXVsdC5UaW1lQmFzZT90LnRvU2Vjb25kcygpOnZvaWQgMH0scy5kZWZhdWx0LnByb3RvdHlwZS50b0ZyZXF1ZW5jeT1mdW5jdGlvbih0KXtyZXR1cm4gcy5kZWZhdWx0LmlzTnVtYmVyKHQpP3Q6cy5kZWZhdWx0LmlzU3RyaW5nKHQpfHxzLmRlZmF1bHQuaXNVbmRlZih0KXx8cy5kZWZhdWx0LmlzT2JqZWN0KHQpP25ldyBzLmRlZmF1bHQuRnJlcXVlbmN5KHQpLnZhbHVlT2YoKTp0IGluc3RhbmNlb2Ygcy5kZWZhdWx0LlRpbWVCYXNlP3QudG9GcmVxdWVuY3koKTp2b2lkIDB9LHMuZGVmYXVsdC5wcm90b3R5cGUudG9UaWNrcz1mdW5jdGlvbih0KXtyZXR1cm4gcy5kZWZhdWx0LmlzTnVtYmVyKHQpfHxzLmRlZmF1bHQuaXNTdHJpbmcodCl8fHMuZGVmYXVsdC5pc09iamVjdCh0KT9uZXcgcy5kZWZhdWx0LlRyYW5zcG9ydFRpbWUodCkudG9UaWNrcygpOnMuZGVmYXVsdC5pc1VuZGVmKHQpP3MuZGVmYXVsdC5UcmFuc3BvcnQudGlja3M6dCBpbnN0YW5jZW9mIHMuZGVmYXVsdC5UaW1lQmFzZT90LnRvVGlja3MoKTp2b2lkIDB9LGUuZGVmYXVsdD1zLmRlZmF1bHR9LGZ1bmN0aW9uKHQsZSxpKXtcInVzZSBzdHJpY3RcIjtpLnIoZSk7dmFyIHM9aSgwKTtpKDE0KSxpKDMpLGkoMzApO3MuZGVmYXVsdC5NdWx0aXBseT1mdW5jdGlvbih0KXtzLmRlZmF1bHQuU2lnbmFsLmNhbGwodGhpcyksdGhpcy5jcmVhdGVJbnNPdXRzKDIsMCksdGhpcy5fbXVsdD10aGlzLmlucHV0WzBdPXRoaXMub3V0cHV0PW5ldyBzLmRlZmF1bHQuR2Fpbix0aGlzLl9wYXJhbT10aGlzLmlucHV0WzFdPXRoaXMub3V0cHV0LmdhaW4sdGhpcy52YWx1ZT1zLmRlZmF1bHQuZGVmYXVsdEFyZyh0LDApfSxzLmRlZmF1bHQuZXh0ZW5kKHMuZGVmYXVsdC5NdWx0aXBseSxzLmRlZmF1bHQuU2lnbmFsKSxzLmRlZmF1bHQuTXVsdGlwbHkucHJvdG90eXBlLmRpc3Bvc2U9ZnVuY3Rpb24oKXtyZXR1cm4gcy5kZWZhdWx0LlNpZ25hbC5wcm90b3R5cGUuZGlzcG9zZS5jYWxsKHRoaXMpLHRoaXMuX211bHQuZGlzcG9zZSgpLHRoaXMuX211bHQ9bnVsbCx0aGlzLl9wYXJhbT1udWxsLHRoaXN9LGUuZGVmYXVsdD1zLmRlZmF1bHQuTXVsdGlwbHl9LGZ1bmN0aW9uKHQsZSxpKXtcInVzZSBzdHJpY3RcIjtpLnIoZSk7dmFyIHM9aSgwKTtpKDE2KSxpKDI3KSxpKDQwKSxpKDQpLGkoMzQpLGkoMiksaSgxKTtzLmRlZmF1bHQuU291cmNlPWZ1bmN0aW9uKHQpe3Q9cy5kZWZhdWx0LmRlZmF1bHRBcmcodCxzLmRlZmF1bHQuU291cmNlLmRlZmF1bHRzKSxzLmRlZmF1bHQuQXVkaW9Ob2RlLmNhbGwodGhpcyksdGhpcy5fdm9sdW1lPXRoaXMub3V0cHV0PW5ldyBzLmRlZmF1bHQuVm9sdW1lKHQudm9sdW1lKSx0aGlzLnZvbHVtZT10aGlzLl92b2x1bWUudm9sdW1lLHRoaXMuX3JlYWRPbmx5KFwidm9sdW1lXCIpLHRoaXMuX3N0YXRlPW5ldyBzLmRlZmF1bHQuVGltZWxpbmVTdGF0ZShzLmRlZmF1bHQuU3RhdGUuU3RvcHBlZCksdGhpcy5fc3RhdGUubWVtb3J5PTEwMCx0aGlzLl9zeW5jZWQ9ITEsdGhpcy5fc2NoZWR1bGVkPVtdLHRoaXMuX3ZvbHVtZS5vdXRwdXQub3V0cHV0LmNoYW5uZWxDb3VudD0yLHRoaXMuX3ZvbHVtZS5vdXRwdXQub3V0cHV0LmNoYW5uZWxDb3VudE1vZGU9XCJleHBsaWNpdFwiLHRoaXMubXV0ZT10Lm11dGV9LHMuZGVmYXVsdC5leHRlbmQocy5kZWZhdWx0LlNvdXJjZSxzLmRlZmF1bHQuQXVkaW9Ob2RlKSxzLmRlZmF1bHQuU291cmNlLmRlZmF1bHRzPXt2b2x1bWU6MCxtdXRlOiExfSxPYmplY3QuZGVmaW5lUHJvcGVydHkocy5kZWZhdWx0LlNvdXJjZS5wcm90b3R5cGUsXCJzdGF0ZVwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fc3luY2VkP3MuZGVmYXVsdC5UcmFuc3BvcnQuc3RhdGU9PT1zLmRlZmF1bHQuU3RhdGUuU3RhcnRlZD90aGlzLl9zdGF0ZS5nZXRWYWx1ZUF0VGltZShzLmRlZmF1bHQuVHJhbnNwb3J0LnNlY29uZHMpOnMuZGVmYXVsdC5TdGF0ZS5TdG9wcGVkOnRoaXMuX3N0YXRlLmdldFZhbHVlQXRUaW1lKHRoaXMubm93KCkpfX0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShzLmRlZmF1bHQuU291cmNlLnByb3RvdHlwZSxcIm11dGVcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3ZvbHVtZS5tdXRlfSxzZXQ6ZnVuY3Rpb24odCl7dGhpcy5fdm9sdW1lLm11dGU9dH19KSxzLmRlZmF1bHQuU291cmNlLnByb3RvdHlwZS5fc3RhcnQ9cy5kZWZhdWx0Lm5vT3Ascy5kZWZhdWx0LlNvdXJjZS5wcm90b3R5cGUucmVzdGFydD1zLmRlZmF1bHQubm9PcCxzLmRlZmF1bHQuU291cmNlLnByb3RvdHlwZS5fc3RvcD1zLmRlZmF1bHQubm9PcCxzLmRlZmF1bHQuU291cmNlLnByb3RvdHlwZS5zdGFydD1mdW5jdGlvbih0LGUsaSl7aWYocy5kZWZhdWx0LmlzVW5kZWYodCkmJnRoaXMuX3N5bmNlZD90PXMuZGVmYXVsdC5UcmFuc3BvcnQuc2Vjb25kczoodD10aGlzLnRvU2Vjb25kcyh0KSx0PU1hdGgubWF4KHQsdGhpcy5jb250ZXh0LmN1cnJlbnRUaW1lKSksdGhpcy5fc3RhdGUuZ2V0VmFsdWVBdFRpbWUodCk9PT1zLmRlZmF1bHQuU3RhdGUuU3RhcnRlZCl0aGlzLl9zdGF0ZS5jYW5jZWwodCksdGhpcy5fc3RhdGUuc2V0U3RhdGVBdFRpbWUocy5kZWZhdWx0LlN0YXRlLlN0YXJ0ZWQsdCksdGhpcy5yZXN0YXJ0KHQsZSxpKTtlbHNlIGlmKHRoaXMuX3N0YXRlLnNldFN0YXRlQXRUaW1lKHMuZGVmYXVsdC5TdGF0ZS5TdGFydGVkLHQpLHRoaXMuX3N5bmNlZCl7dmFyIG49dGhpcy5fc3RhdGUuZ2V0KHQpO24ub2Zmc2V0PXMuZGVmYXVsdC5kZWZhdWx0QXJnKGUsMCksbi5kdXJhdGlvbj1pO3ZhciBvPXMuZGVmYXVsdC5UcmFuc3BvcnQuc2NoZWR1bGUoZnVuY3Rpb24odCl7dGhpcy5fc3RhcnQodCxlLGkpfS5iaW5kKHRoaXMpLHQpO3RoaXMuX3NjaGVkdWxlZC5wdXNoKG8pLHMuZGVmYXVsdC5UcmFuc3BvcnQuc3RhdGU9PT1zLmRlZmF1bHQuU3RhdGUuU3RhcnRlZCYmdGhpcy5fc3luY2VkU3RhcnQodGhpcy5ub3coKSxzLmRlZmF1bHQuVHJhbnNwb3J0LnNlY29uZHMpfWVsc2UgdGhpcy5fc3RhcnQuYXBwbHkodGhpcyxhcmd1bWVudHMpO3JldHVybiB0aGlzfSxzLmRlZmF1bHQuU291cmNlLnByb3RvdHlwZS5zdG9wPWZ1bmN0aW9uKHQpe2lmKHMuZGVmYXVsdC5pc1VuZGVmKHQpJiZ0aGlzLl9zeW5jZWQ/dD1zLmRlZmF1bHQuVHJhbnNwb3J0LnNlY29uZHM6KHQ9dGhpcy50b1NlY29uZHModCksdD1NYXRoLm1heCh0LHRoaXMuY29udGV4dC5jdXJyZW50VGltZSkpLHRoaXMuX3N5bmNlZCl7dmFyIGU9cy5kZWZhdWx0LlRyYW5zcG9ydC5zY2hlZHVsZSh0aGlzLl9zdG9wLmJpbmQodGhpcyksdCk7dGhpcy5fc2NoZWR1bGVkLnB1c2goZSl9ZWxzZSB0aGlzLl9zdG9wLmFwcGx5KHRoaXMsYXJndW1lbnRzKTtyZXR1cm4gdGhpcy5fc3RhdGUuY2FuY2VsKHQpLHRoaXMuX3N0YXRlLnNldFN0YXRlQXRUaW1lKHMuZGVmYXVsdC5TdGF0ZS5TdG9wcGVkLHQpLHRoaXN9LHMuZGVmYXVsdC5Tb3VyY2UucHJvdG90eXBlLnN5bmM9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fc3luY2VkPSEwLHRoaXMuX3N5bmNlZFN0YXJ0PWZ1bmN0aW9uKHQsZSl7aWYoZT4wKXt2YXIgaT10aGlzLl9zdGF0ZS5nZXQoZSk7aWYoaSYmaS5zdGF0ZT09PXMuZGVmYXVsdC5TdGF0ZS5TdGFydGVkJiZpLnRpbWUhPT1lKXt2YXIgbixvPWUtdGhpcy50b1NlY29uZHMoaS50aW1lKTtpLmR1cmF0aW9uJiYobj10aGlzLnRvU2Vjb25kcyhpLmR1cmF0aW9uKS1vKSx0aGlzLl9zdGFydCh0LHRoaXMudG9TZWNvbmRzKGkub2Zmc2V0KStvLG4pfX19LmJpbmQodGhpcyksdGhpcy5fc3luY2VkU3RvcD1mdW5jdGlvbih0KXt2YXIgZT1zLmRlZmF1bHQuVHJhbnNwb3J0LmdldFNlY29uZHNBdFRpbWUoTWF0aC5tYXgodC10aGlzLnNhbXBsZVRpbWUsMCkpO3RoaXMuX3N0YXRlLmdldFZhbHVlQXRUaW1lKGUpPT09cy5kZWZhdWx0LlN0YXRlLlN0YXJ0ZWQmJnRoaXMuX3N0b3AodCl9LmJpbmQodGhpcykscy5kZWZhdWx0LlRyYW5zcG9ydC5vbihcInN0YXJ0IGxvb3BTdGFydFwiLHRoaXMuX3N5bmNlZFN0YXJ0KSxzLmRlZmF1bHQuVHJhbnNwb3J0Lm9uKFwic3RvcCBwYXVzZSBsb29wRW5kXCIsdGhpcy5fc3luY2VkU3RvcCksdGhpc30scy5kZWZhdWx0LlNvdXJjZS5wcm90b3R5cGUudW5zeW5jPWZ1bmN0aW9uKCl7dGhpcy5fc3luY2VkJiYocy5kZWZhdWx0LlRyYW5zcG9ydC5vZmYoXCJzdG9wIHBhdXNlIGxvb3BFbmRcIix0aGlzLl9zeW5jZWRTdG9wKSxzLmRlZmF1bHQuVHJhbnNwb3J0Lm9mZihcInN0YXJ0IGxvb3BTdGFydFwiLHRoaXMuX3N5bmNlZFN0YXJ0KSksdGhpcy5fc3luY2VkPSExO2Zvcih2YXIgdD0wO3Q8dGhpcy5fc2NoZWR1bGVkLmxlbmd0aDt0Kyspe3ZhciBlPXRoaXMuX3NjaGVkdWxlZFt0XTtzLmRlZmF1bHQuVHJhbnNwb3J0LmNsZWFyKGUpfXJldHVybiB0aGlzLl9zY2hlZHVsZWQ9W10sdGhpcy5fc3RhdGUuY2FuY2VsKDApLHRoaXN9LHMuZGVmYXVsdC5Tb3VyY2UucHJvdG90eXBlLmRpc3Bvc2U9ZnVuY3Rpb24oKXtzLmRlZmF1bHQuQXVkaW9Ob2RlLnByb3RvdHlwZS5kaXNwb3NlLmNhbGwodGhpcyksdGhpcy51bnN5bmMoKSx0aGlzLl9zY2hlZHVsZWQ9bnVsbCx0aGlzLl93cml0YWJsZShcInZvbHVtZVwiKSx0aGlzLl92b2x1bWUuZGlzcG9zZSgpLHRoaXMuX3ZvbHVtZT1udWxsLHRoaXMudm9sdW1lPW51bGwsdGhpcy5fc3RhdGUuZGlzcG9zZSgpLHRoaXMuX3N0YXRlPW51bGx9LGUuZGVmYXVsdD1zLmRlZmF1bHQuU291cmNlfSxmdW5jdGlvbih0LGUsaSl7XCJ1c2Ugc3RyaWN0XCI7aS5yKGUpO3ZhciBzPWkoMCk7aSgzMCksaSg0NCk7aWYocy5kZWZhdWx0LnN1cHBvcnRlZCYmIXMuZGVmYXVsdC5nbG9iYWwuQXVkaW9Db250ZXh0LnByb3RvdHlwZS5fbmF0aXZlX2NyZWF0ZVdhdmVTaGFwZXIpe3ZhciBuPW5hdmlnYXRvci51c2VyQWdlbnQudG9Mb3dlckNhc2UoKTtpZihuLmluY2x1ZGVzKFwic2FmYXJpXCIpJiYhbi5pbmNsdWRlcyhcImNocm9tZVwiKSl7dmFyIG89ZnVuY3Rpb24odCl7Zm9yKHZhciBlIGluIHRoaXMuX2ludGVybmFsTm9kZT10aGlzLmlucHV0PXRoaXMub3V0cHV0PXQuX25hdGl2ZV9jcmVhdGVXYXZlU2hhcGVyKCksdGhpcy5fY3VydmU9bnVsbCx0aGlzLl9pbnRlcm5hbE5vZGUpdGhpcy5fZGVmaW5lUHJvcGVydHkodGhpcy5faW50ZXJuYWxOb2RlLGUpfTtPYmplY3QuZGVmaW5lUHJvcGVydHkoby5wcm90b3R5cGUsXCJjdXJ2ZVwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fY3VydmV9LHNldDpmdW5jdGlvbih0KXt0aGlzLl9jdXJ2ZT10O3ZhciBlPW5ldyBGbG9hdDMyQXJyYXkodC5sZW5ndGgrMSk7ZS5zZXQodCwxKSxlWzBdPXRbMF0sdGhpcy5faW50ZXJuYWxOb2RlLmN1cnZlPWV9fSksby5wcm90b3R5cGUuX2RlZmluZVByb3BlcnR5PWZ1bmN0aW9uKHQsZSl7cy5kZWZhdWx0LmlzVW5kZWYodGhpc1tlXSkmJk9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLGUse2dldDpmdW5jdGlvbigpe3JldHVyblwiZnVuY3Rpb25cIj09dHlwZW9mIHRbZV0/dFtlXS5iaW5kKHQpOnRbZV19LHNldDpmdW5jdGlvbihpKXt0W2VdPWl9fSl9LHMuZGVmYXVsdC5nbG9iYWwuQXVkaW9Db250ZXh0LnByb3RvdHlwZS5fbmF0aXZlX2NyZWF0ZVdhdmVTaGFwZXI9cy5kZWZhdWx0Lmdsb2JhbC5BdWRpb0NvbnRleHQucHJvdG90eXBlLmNyZWF0ZVdhdmVTaGFwZXIscy5kZWZhdWx0Lmdsb2JhbC5BdWRpb0NvbnRleHQucHJvdG90eXBlLmNyZWF0ZVdhdmVTaGFwZXI9ZnVuY3Rpb24oKXtyZXR1cm4gbmV3IG8odGhpcyl9fX1zLmRlZmF1bHQuV2F2ZVNoYXBlcj1mdW5jdGlvbih0LGUpe3MuZGVmYXVsdC5TaWduYWxCYXNlLmNhbGwodGhpcyksdGhpcy5fc2hhcGVyPXRoaXMuaW5wdXQ9dGhpcy5vdXRwdXQ9dGhpcy5jb250ZXh0LmNyZWF0ZVdhdmVTaGFwZXIoKSx0aGlzLl9jdXJ2ZT1udWxsLEFycmF5LmlzQXJyYXkodCk/dGhpcy5jdXJ2ZT10OmlzRmluaXRlKHQpfHxzLmRlZmF1bHQuaXNVbmRlZih0KT90aGlzLl9jdXJ2ZT1uZXcgRmxvYXQzMkFycmF5KHMuZGVmYXVsdC5kZWZhdWx0QXJnKHQsMTAyNCkpOnMuZGVmYXVsdC5pc0Z1bmN0aW9uKHQpJiYodGhpcy5fY3VydmU9bmV3IEZsb2F0MzJBcnJheShzLmRlZmF1bHQuZGVmYXVsdEFyZyhlLDEwMjQpKSx0aGlzLnNldE1hcCh0KSl9LHMuZGVmYXVsdC5leHRlbmQocy5kZWZhdWx0LldhdmVTaGFwZXIscy5kZWZhdWx0LlNpZ25hbEJhc2UpLHMuZGVmYXVsdC5XYXZlU2hhcGVyLnByb3RvdHlwZS5zZXRNYXA9ZnVuY3Rpb24odCl7Zm9yKHZhciBlPW5ldyBBcnJheSh0aGlzLl9jdXJ2ZS5sZW5ndGgpLGk9MCxzPXRoaXMuX2N1cnZlLmxlbmd0aDtpPHM7aSsrKXt2YXIgbj1pLyhzLTEpKjItMTtlW2ldPXQobixpKX1yZXR1cm4gdGhpcy5jdXJ2ZT1lLHRoaXN9LE9iamVjdC5kZWZpbmVQcm9wZXJ0eShzLmRlZmF1bHQuV2F2ZVNoYXBlci5wcm90b3R5cGUsXCJjdXJ2ZVwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fc2hhcGVyLmN1cnZlfSxzZXQ6ZnVuY3Rpb24odCl7dGhpcy5fY3VydmU9bmV3IEZsb2F0MzJBcnJheSh0KSx0aGlzLl9zaGFwZXIuY3VydmU9dGhpcy5fY3VydmV9fSksT2JqZWN0LmRlZmluZVByb3BlcnR5KHMuZGVmYXVsdC5XYXZlU2hhcGVyLnByb3RvdHlwZSxcIm92ZXJzYW1wbGVcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3NoYXBlci5vdmVyc2FtcGxlfSxzZXQ6ZnVuY3Rpb24odCl7aWYoIVtcIm5vbmVcIixcIjJ4XCIsXCI0eFwiXS5pbmNsdWRlcyh0KSl0aHJvdyBuZXcgUmFuZ2VFcnJvcihcIlRvbmUuV2F2ZVNoYXBlcjogb3ZlcnNhbXBsaW5nIG11c3QgYmUgZWl0aGVyICdub25lJywgJzJ4Jywgb3IgJzR4J1wiKTt0aGlzLl9zaGFwZXIub3ZlcnNhbXBsZT10fX0pLHMuZGVmYXVsdC5XYXZlU2hhcGVyLnByb3RvdHlwZS5kaXNwb3NlPWZ1bmN0aW9uKCl7cmV0dXJuIHMuZGVmYXVsdC5TaWduYWxCYXNlLnByb3RvdHlwZS5kaXNwb3NlLmNhbGwodGhpcyksdGhpcy5fc2hhcGVyLmRpc2Nvbm5lY3QoKSx0aGlzLl9zaGFwZXI9bnVsbCx0aGlzLl9jdXJ2ZT1udWxsLHRoaXN9O2UuZGVmYXVsdD1zLmRlZmF1bHQuV2F2ZVNoYXBlcn0sZnVuY3Rpb24odCxlLGkpe1widXNlIHN0cmljdFwiO2kucihlKTt2YXIgcz1pKDApO2koMjMpLGkoMSk7cy5kZWZhdWx0LkVmZmVjdD1mdW5jdGlvbigpe3ZhciB0PXMuZGVmYXVsdC5kZWZhdWx0cyhhcmd1bWVudHMsW1wid2V0XCJdLHMuZGVmYXVsdC5FZmZlY3QpO3MuZGVmYXVsdC5BdWRpb05vZGUuY2FsbCh0aGlzKSx0aGlzLmNyZWF0ZUluc091dHMoMSwxKSx0aGlzLl9kcnlXZXQ9bmV3IHMuZGVmYXVsdC5Dcm9zc0ZhZGUodC53ZXQpLHRoaXMud2V0PXRoaXMuX2RyeVdldC5mYWRlLHRoaXMuZWZmZWN0U2VuZD1uZXcgcy5kZWZhdWx0LkdhaW4sdGhpcy5lZmZlY3RSZXR1cm49bmV3IHMuZGVmYXVsdC5HYWluLHMuZGVmYXVsdC5jb25uZWN0KHRoaXMuaW5wdXQsdGhpcy5fZHJ5V2V0LmEpLHMuZGVmYXVsdC5jb25uZWN0KHRoaXMuaW5wdXQsdGhpcy5lZmZlY3RTZW5kKSx0aGlzLmVmZmVjdFJldHVybi5jb25uZWN0KHRoaXMuX2RyeVdldC5iKSx0aGlzLl9kcnlXZXQuY29ubmVjdCh0aGlzLm91dHB1dCksdGhpcy5fcmVhZE9ubHkoW1wid2V0XCJdKX0scy5kZWZhdWx0LmV4dGVuZChzLmRlZmF1bHQuRWZmZWN0LHMuZGVmYXVsdC5BdWRpb05vZGUpLHMuZGVmYXVsdC5FZmZlY3QuZGVmYXVsdHM9e3dldDoxfSxzLmRlZmF1bHQuRWZmZWN0LnByb3RvdHlwZS5jb25uZWN0RWZmZWN0PWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLmVmZmVjdFNlbmQuY2hhaW4odCx0aGlzLmVmZmVjdFJldHVybiksdGhpc30scy5kZWZhdWx0LkVmZmVjdC5wcm90b3R5cGUuZGlzcG9zZT1mdW5jdGlvbigpe3JldHVybiBzLmRlZmF1bHQuQXVkaW9Ob2RlLnByb3RvdHlwZS5kaXNwb3NlLmNhbGwodGhpcyksdGhpcy5fZHJ5V2V0LmRpc3Bvc2UoKSx0aGlzLl9kcnlXZXQ9bnVsbCx0aGlzLmVmZmVjdFNlbmQuZGlzcG9zZSgpLHRoaXMuZWZmZWN0U2VuZD1udWxsLHRoaXMuZWZmZWN0UmV0dXJuLmRpc3Bvc2UoKSx0aGlzLmVmZmVjdFJldHVybj1udWxsLHRoaXMuX3dyaXRhYmxlKFtcIndldFwiXSksdGhpcy53ZXQ9bnVsbCx0aGlzfSxlLmRlZmF1bHQ9cy5kZWZhdWx0LkVmZmVjdH0sZnVuY3Rpb24odCxlLGkpe1widXNlIHN0cmljdFwiO2kucihlKTt2YXIgcz1pKDApO2koMiksaSgxKTtzLmRlZmF1bHQuRmlsdGVyPWZ1bmN0aW9uKCl7dmFyIHQ9cy5kZWZhdWx0LmRlZmF1bHRzKGFyZ3VtZW50cyxbXCJmcmVxdWVuY3lcIixcInR5cGVcIixcInJvbGxvZmZcIl0scy5kZWZhdWx0LkZpbHRlcik7cy5kZWZhdWx0LkF1ZGlvTm9kZS5jYWxsKHRoaXMpLHRoaXMuY3JlYXRlSW5zT3V0cygxLDEpLHRoaXMuX2ZpbHRlcnM9W10sdGhpcy5mcmVxdWVuY3k9bmV3IHMuZGVmYXVsdC5TaWduYWwodC5mcmVxdWVuY3kscy5kZWZhdWx0LlR5cGUuRnJlcXVlbmN5KSx0aGlzLmRldHVuZT1uZXcgcy5kZWZhdWx0LlNpZ25hbCgwLHMuZGVmYXVsdC5UeXBlLkNlbnRzKSx0aGlzLmdhaW49bmV3IHMuZGVmYXVsdC5TaWduYWwoe3ZhbHVlOnQuZ2Fpbixjb252ZXJ0OiEwLHR5cGU6cy5kZWZhdWx0LlR5cGUuRGVjaWJlbHN9KSx0aGlzLlE9bmV3IHMuZGVmYXVsdC5TaWduYWwodC5RKSx0aGlzLl90eXBlPXQudHlwZSx0aGlzLl9yb2xsb2ZmPXQucm9sbG9mZix0aGlzLnJvbGxvZmY9dC5yb2xsb2ZmLHRoaXMuX3JlYWRPbmx5KFtcImRldHVuZVwiLFwiZnJlcXVlbmN5XCIsXCJnYWluXCIsXCJRXCJdKX0scy5kZWZhdWx0LmV4dGVuZChzLmRlZmF1bHQuRmlsdGVyLHMuZGVmYXVsdC5BdWRpb05vZGUpLHMuZGVmYXVsdC5GaWx0ZXIuZGVmYXVsdHM9e3R5cGU6XCJsb3dwYXNzXCIsZnJlcXVlbmN5OjM1MCxyb2xsb2ZmOi0xMixROjEsZ2FpbjowfSxPYmplY3QuZGVmaW5lUHJvcGVydHkocy5kZWZhdWx0LkZpbHRlci5wcm90b3R5cGUsXCJ0eXBlXCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl90eXBlfSxzZXQ6ZnVuY3Rpb24odCl7aWYoLTE9PT1bXCJsb3dwYXNzXCIsXCJoaWdocGFzc1wiLFwiYmFuZHBhc3NcIixcImxvd3NoZWxmXCIsXCJoaWdoc2hlbGZcIixcIm5vdGNoXCIsXCJhbGxwYXNzXCIsXCJwZWFraW5nXCJdLmluZGV4T2YodCkpdGhyb3cgbmV3IFR5cGVFcnJvcihcIlRvbmUuRmlsdGVyOiBpbnZhbGlkIHR5cGUgXCIrdCk7dGhpcy5fdHlwZT10O2Zvcih2YXIgZT0wO2U8dGhpcy5fZmlsdGVycy5sZW5ndGg7ZSsrKXRoaXMuX2ZpbHRlcnNbZV0udHlwZT10fX0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShzLmRlZmF1bHQuRmlsdGVyLnByb3RvdHlwZSxcInJvbGxvZmZcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3JvbGxvZmZ9LHNldDpmdW5jdGlvbih0KXt0PXBhcnNlSW50KHQsMTApO3ZhciBlPVstMTIsLTI0LC00OCwtOTZdLmluZGV4T2YodCk7aWYoLTE9PT1lKXRocm93IG5ldyBSYW5nZUVycm9yKFwiVG9uZS5GaWx0ZXI6IHJvbGxvZmYgY2FuIG9ubHkgYmUgLTEyLCAtMjQsIC00OCBvciAtOTZcIik7ZSs9MSx0aGlzLl9yb2xsb2ZmPXQsdGhpcy5pbnB1dC5kaXNjb25uZWN0KCk7Zm9yKHZhciBpPTA7aTx0aGlzLl9maWx0ZXJzLmxlbmd0aDtpKyspdGhpcy5fZmlsdGVyc1tpXS5kaXNjb25uZWN0KCksdGhpcy5fZmlsdGVyc1tpXT1udWxsO3RoaXMuX2ZpbHRlcnM9bmV3IEFycmF5KGUpO2Zvcih2YXIgbj0wO248ZTtuKyspe3ZhciBvPXRoaXMuY29udGV4dC5jcmVhdGVCaXF1YWRGaWx0ZXIoKTtvLnR5cGU9dGhpcy5fdHlwZSx0aGlzLmZyZXF1ZW5jeS5jb25uZWN0KG8uZnJlcXVlbmN5KSx0aGlzLmRldHVuZS5jb25uZWN0KG8uZGV0dW5lKSx0aGlzLlEuY29ubmVjdChvLlEpLHRoaXMuZ2Fpbi5jb25uZWN0KG8uZ2FpbiksdGhpcy5fZmlsdGVyc1tuXT1vfXZhciBhPVt0aGlzLmlucHV0XS5jb25jYXQodGhpcy5fZmlsdGVycykuY29uY2F0KFt0aGlzLm91dHB1dF0pO3MuZGVmYXVsdC5jb25uZWN0U2VyaWVzLmFwcGx5KHMuZGVmYXVsdCxhKX19KSxzLmRlZmF1bHQuRmlsdGVyLnByb3RvdHlwZS5nZXRGcmVxdWVuY3lSZXNwb25zZT1mdW5jdGlvbih0KXt0PXMuZGVmYXVsdC5kZWZhdWx0QXJnKHQsMTI4KTtmb3IodmFyIGU9bmV3IEZsb2F0MzJBcnJheSh0KS5tYXAoZnVuY3Rpb24oKXtyZXR1cm4gMX0pLGk9bmV3IEZsb2F0MzJBcnJheSh0KSxuPTA7bjx0O24rKyl7dmFyIG89MTk5ODAqTWF0aC5wb3cobi90LDIpKzIwO2lbbl09b312YXIgYT1uZXcgRmxvYXQzMkFycmF5KHQpLHI9bmV3IEZsb2F0MzJBcnJheSh0KTtyZXR1cm4gdGhpcy5fZmlsdGVycy5mb3JFYWNoKGZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy5jb250ZXh0LmNyZWF0ZUJpcXVhZEZpbHRlcigpO3QudHlwZT10aGlzLl90eXBlLHQuUS52YWx1ZT10aGlzLlEudmFsdWUsdC5mcmVxdWVuY3kudmFsdWU9dGhpcy5mcmVxdWVuY3kudmFsdWUsdC5nYWluLnZhbHVlPXRoaXMuZ2Fpbi52YWx1ZSx0LmdldEZyZXF1ZW5jeVJlc3BvbnNlKGksYSxyKSxhLmZvckVhY2goZnVuY3Rpb24odCxpKXtlW2ldKj10fSl9LmJpbmQodGhpcykpLGV9LHMuZGVmYXVsdC5GaWx0ZXIucHJvdG90eXBlLmRpc3Bvc2U9ZnVuY3Rpb24oKXtzLmRlZmF1bHQuQXVkaW9Ob2RlLnByb3RvdHlwZS5kaXNwb3NlLmNhbGwodGhpcyk7Zm9yKHZhciB0PTA7dDx0aGlzLl9maWx0ZXJzLmxlbmd0aDt0KyspdGhpcy5fZmlsdGVyc1t0XS5kaXNjb25uZWN0KCksdGhpcy5fZmlsdGVyc1t0XT1udWxsO3JldHVybiB0aGlzLl9maWx0ZXJzPW51bGwsdGhpcy5fd3JpdGFibGUoW1wiZGV0dW5lXCIsXCJmcmVxdWVuY3lcIixcImdhaW5cIixcIlFcIl0pLHRoaXMuZnJlcXVlbmN5LmRpc3Bvc2UoKSx0aGlzLlEuZGlzcG9zZSgpLHRoaXMuZnJlcXVlbmN5PW51bGwsdGhpcy5RPW51bGwsdGhpcy5kZXR1bmUuZGlzcG9zZSgpLHRoaXMuZGV0dW5lPW51bGwsdGhpcy5nYWluLmRpc3Bvc2UoKSx0aGlzLmdhaW49bnVsbCx0aGlzfSxlLmRlZmF1bHQ9cy5kZWZhdWx0LkZpbHRlcn0sZnVuY3Rpb24odCxlLGkpe1widXNlIHN0cmljdFwiO2kucihlKTt2YXIgcz1pKDApO2koMSk7cy5kZWZhdWx0Lk1lcmdlPWZ1bmN0aW9uKHQpe3Q9cy5kZWZhdWx0LmRlZmF1bHRBcmcodCwyKSxzLmRlZmF1bHQuQXVkaW9Ob2RlLmNhbGwodGhpcyksdGhpcy5jcmVhdGVJbnNPdXRzKHQsMCksdGhpcy5fbWVyZ2VyPXRoaXMub3V0cHV0PXRoaXMuY29udGV4dC5jcmVhdGVDaGFubmVsTWVyZ2VyKHQpO2Zvcih2YXIgZT0wO2U8dDtlKyspdGhpcy5pbnB1dFtlXT1uZXcgcy5kZWZhdWx0LkdhaW4sdGhpcy5pbnB1dFtlXS5jb25uZWN0KHRoaXMuX21lcmdlciwwLGUpLHRoaXMuaW5wdXRbZV0uY2hhbm5lbENvdW50PTEsdGhpcy5pbnB1dFtlXS5jaGFubmVsQ291bnRNb2RlPVwiZXhwbGljaXRcIjt0aGlzLmxlZnQ9dGhpcy5pbnB1dFswXSx0aGlzLnJpZ2h0PXRoaXMuaW5wdXRbMV19LHMuZGVmYXVsdC5leHRlbmQocy5kZWZhdWx0Lk1lcmdlLHMuZGVmYXVsdC5BdWRpb05vZGUpLHMuZGVmYXVsdC5NZXJnZS5wcm90b3R5cGUuZGlzcG9zZT1mdW5jdGlvbigpe3JldHVybiB0aGlzLmlucHV0LmZvckVhY2goZnVuY3Rpb24odCl7dC5kaXNwb3NlKCl9KSxzLmRlZmF1bHQuQXVkaW9Ob2RlLnByb3RvdHlwZS5kaXNwb3NlLmNhbGwodGhpcyksdGhpcy5sZWZ0PW51bGwsdGhpcy5yaWdodD1udWxsLHRoaXMuX21lcmdlci5kaXNjb25uZWN0KCksdGhpcy5fbWVyZ2VyPW51bGwsdGhpc30sZS5kZWZhdWx0PXMuZGVmYXVsdC5NZXJnZX0sZnVuY3Rpb24odCxlLGkpe1widXNlIHN0cmljdFwiO2kucihlKTt2YXIgcz1pKDApO2koMzUpLGkoNCk7cy5kZWZhdWx0LnN1cHBvcnRlZCYmKEF1ZGlvQnVmZmVyLnByb3RvdHlwZS5jb3B5VG9DaGFubmVsfHwoQXVkaW9CdWZmZXIucHJvdG90eXBlLmNvcHlUb0NoYW5uZWw9ZnVuY3Rpb24odCxlLGkpe3ZhciBzPXRoaXMuZ2V0Q2hhbm5lbERhdGEoZSk7aT1pfHwwO2Zvcih2YXIgbj0wO248cy5sZW5ndGg7bisrKXNbbitpXT10W25dfSxBdWRpb0J1ZmZlci5wcm90b3R5cGUuY29weUZyb21DaGFubmVsPWZ1bmN0aW9uKHQsZSxpKXt2YXIgcz10aGlzLmdldENoYW5uZWxEYXRhKGUpO2k9aXx8MDtmb3IodmFyIG49MDtuPHQubGVuZ3RoO24rKyl0W25dPXNbbitpXX0pKSxzLmRlZmF1bHQuQnVmZmVyPWZ1bmN0aW9uKCl7dmFyIHQ9cy5kZWZhdWx0LmRlZmF1bHRzKGFyZ3VtZW50cyxbXCJ1cmxcIixcIm9ubG9hZFwiLFwib25lcnJvclwiXSxzLmRlZmF1bHQuQnVmZmVyKTtzLmRlZmF1bHQuY2FsbCh0aGlzKSx0aGlzLl9idWZmZXI9bnVsbCx0aGlzLl9yZXZlcnNlZD10LnJldmVyc2UsdGhpcy5feGhyPW51bGwsdGhpcy5vbmxvYWQ9cy5kZWZhdWx0Lm5vT3AsdC51cmwgaW5zdGFuY2VvZiBBdWRpb0J1ZmZlcnx8dC51cmwgaW5zdGFuY2VvZiBzLmRlZmF1bHQuQnVmZmVyPyh0aGlzLnNldCh0LnVybCksdGhpcy5sb2FkZWR8fCh0aGlzLm9ubG9hZD10Lm9ubG9hZCkpOnMuZGVmYXVsdC5pc1N0cmluZyh0LnVybCkmJnRoaXMubG9hZCh0LnVybCkudGhlbih0Lm9ubG9hZCkuY2F0Y2godC5vbmVycm9yKX0scy5kZWZhdWx0LmV4dGVuZChzLmRlZmF1bHQuQnVmZmVyKSxzLmRlZmF1bHQuQnVmZmVyLmRlZmF1bHRzPXt1cmw6dm9pZCAwLHJldmVyc2U6ITEsb25sb2FkOnMuZGVmYXVsdC5ub09wLG9uZXJyb3I6cy5kZWZhdWx0Lm5vT3B9LHMuZGVmYXVsdC5CdWZmZXIucHJvdG90eXBlLnNldD1mdW5jdGlvbih0KXtyZXR1cm4gdCBpbnN0YW5jZW9mIHMuZGVmYXVsdC5CdWZmZXI/dC5sb2FkZWQ/dGhpcy5fYnVmZmVyPXQuZ2V0KCk6dC5vbmxvYWQ9ZnVuY3Rpb24oKXt0aGlzLnNldCh0KSx0aGlzLm9ubG9hZCh0aGlzKX0uYmluZCh0aGlzKTp0aGlzLl9idWZmZXI9dCx0aGlzLl9yZXZlcnNlZCYmdGhpcy5fcmV2ZXJzZSgpLHRoaXN9LHMuZGVmYXVsdC5CdWZmZXIucHJvdG90eXBlLmdldD1mdW5jdGlvbigpe3JldHVybiB0aGlzLl9idWZmZXJ9LHMuZGVmYXVsdC5CdWZmZXIucHJvdG90eXBlLmxvYWQ9ZnVuY3Rpb24odCxlLGkpe3JldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbihuLG8pe3RoaXMuX3hocj1zLmRlZmF1bHQuQnVmZmVyLmxvYWQodCxmdW5jdGlvbih0KXt0aGlzLl94aHI9bnVsbCx0aGlzLnNldCh0KSxuKHRoaXMpLHRoaXMub25sb2FkKHRoaXMpLGUmJmUodGhpcyl9LmJpbmQodGhpcyksZnVuY3Rpb24odCl7dGhpcy5feGhyPW51bGwsbyh0KSxpJiZpKHQpfS5iaW5kKHRoaXMpKX0uYmluZCh0aGlzKSl9LHMuZGVmYXVsdC5CdWZmZXIucHJvdG90eXBlLmRpc3Bvc2U9ZnVuY3Rpb24oKXtyZXR1cm4gcy5kZWZhdWx0LnByb3RvdHlwZS5kaXNwb3NlLmNhbGwodGhpcyksdGhpcy5fYnVmZmVyPW51bGwsdGhpcy5feGhyJiYocy5kZWZhdWx0LkJ1ZmZlci5fcmVtb3ZlRnJvbURvd25sb2FkUXVldWUodGhpcy5feGhyKSx0aGlzLl94aHIuYWJvcnQoKSx0aGlzLl94aHI9bnVsbCksdGhpc30sT2JqZWN0LmRlZmluZVByb3BlcnR5KHMuZGVmYXVsdC5CdWZmZXIucHJvdG90eXBlLFwibG9hZGVkXCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLmxlbmd0aD4wfX0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShzLmRlZmF1bHQuQnVmZmVyLnByb3RvdHlwZSxcImR1cmF0aW9uXCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9idWZmZXI/dGhpcy5fYnVmZmVyLmR1cmF0aW9uOjB9fSksT2JqZWN0LmRlZmluZVByb3BlcnR5KHMuZGVmYXVsdC5CdWZmZXIucHJvdG90eXBlLFwibGVuZ3RoXCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9idWZmZXI/dGhpcy5fYnVmZmVyLmxlbmd0aDowfX0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShzLmRlZmF1bHQuQnVmZmVyLnByb3RvdHlwZSxcIm51bWJlck9mQ2hhbm5lbHNcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2J1ZmZlcj90aGlzLl9idWZmZXIubnVtYmVyT2ZDaGFubmVsczowfX0pLHMuZGVmYXVsdC5CdWZmZXIucHJvdG90eXBlLmZyb21BcnJheT1mdW5jdGlvbih0KXt2YXIgZT10WzBdLmxlbmd0aD4wLGk9ZT90Lmxlbmd0aDoxLHM9ZT90WzBdLmxlbmd0aDp0Lmxlbmd0aCxuPXRoaXMuY29udGV4dC5jcmVhdGVCdWZmZXIoaSxzLHRoaXMuY29udGV4dC5zYW1wbGVSYXRlKTtlfHwxIT09aXx8KHQ9W3RdKTtmb3IodmFyIG89MDtvPGk7bysrKW4uY29weVRvQ2hhbm5lbCh0W29dLG8pO3JldHVybiB0aGlzLl9idWZmZXI9bix0aGlzfSxzLmRlZmF1bHQuQnVmZmVyLnByb3RvdHlwZS50b01vbm89ZnVuY3Rpb24odCl7aWYocy5kZWZhdWx0LmlzTnVtYmVyKHQpKXRoaXMuZnJvbUFycmF5KHRoaXMudG9BcnJheSh0KSk7ZWxzZXtmb3IodmFyIGU9bmV3IEZsb2F0MzJBcnJheSh0aGlzLmxlbmd0aCksaT10aGlzLm51bWJlck9mQ2hhbm5lbHMsbj0wO248aTtuKyspZm9yKHZhciBvPXRoaXMudG9BcnJheShuKSxhPTA7YTxvLmxlbmd0aDthKyspZVthXSs9b1thXTtlPWUubWFwKGZ1bmN0aW9uKHQpe3JldHVybiB0L2l9KSx0aGlzLmZyb21BcnJheShlKX1yZXR1cm4gdGhpc30scy5kZWZhdWx0LkJ1ZmZlci5wcm90b3R5cGUudG9BcnJheT1mdW5jdGlvbih0KXtpZihzLmRlZmF1bHQuaXNOdW1iZXIodCkpcmV0dXJuIHRoaXMuZ2V0Q2hhbm5lbERhdGEodCk7aWYoMT09PXRoaXMubnVtYmVyT2ZDaGFubmVscylyZXR1cm4gdGhpcy50b0FycmF5KDApO2Zvcih2YXIgZT1bXSxpPTA7aTx0aGlzLm51bWJlck9mQ2hhbm5lbHM7aSsrKWVbaV09dGhpcy5nZXRDaGFubmVsRGF0YShpKTtyZXR1cm4gZX0scy5kZWZhdWx0LkJ1ZmZlci5wcm90b3R5cGUuZ2V0Q2hhbm5lbERhdGE9ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuX2J1ZmZlci5nZXRDaGFubmVsRGF0YSh0KX0scy5kZWZhdWx0LkJ1ZmZlci5wcm90b3R5cGUuc2xpY2U9ZnVuY3Rpb24odCxlKXtlPXMuZGVmYXVsdC5kZWZhdWx0QXJnKGUsdGhpcy5kdXJhdGlvbik7Zm9yKHZhciBpPU1hdGguZmxvb3IodGhpcy5jb250ZXh0LnNhbXBsZVJhdGUqdGhpcy50b1NlY29uZHModCkpLG49TWF0aC5mbG9vcih0aGlzLmNvbnRleHQuc2FtcGxlUmF0ZSp0aGlzLnRvU2Vjb25kcyhlKSksbz1bXSxhPTA7YTx0aGlzLm51bWJlck9mQ2hhbm5lbHM7YSsrKW9bYV09dGhpcy50b0FycmF5KGEpLnNsaWNlKGksbik7cmV0dXJuKG5ldyBzLmRlZmF1bHQuQnVmZmVyKS5mcm9tQXJyYXkobyl9LHMuZGVmYXVsdC5CdWZmZXIucHJvdG90eXBlLl9yZXZlcnNlPWZ1bmN0aW9uKCl7aWYodGhpcy5sb2FkZWQpZm9yKHZhciB0PTA7dDx0aGlzLm51bWJlck9mQ2hhbm5lbHM7dCsrKUFycmF5LnByb3RvdHlwZS5yZXZlcnNlLmNhbGwodGhpcy5nZXRDaGFubmVsRGF0YSh0KSk7cmV0dXJuIHRoaXN9LE9iamVjdC5kZWZpbmVQcm9wZXJ0eShzLmRlZmF1bHQuQnVmZmVyLnByb3RvdHlwZSxcInJldmVyc2VcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3JldmVyc2VkfSxzZXQ6ZnVuY3Rpb24odCl7dGhpcy5fcmV2ZXJzZWQhPT10JiYodGhpcy5fcmV2ZXJzZWQ9dCx0aGlzLl9yZXZlcnNlKCkpfX0pLHMuZGVmYXVsdC5FbWl0dGVyLm1peGluKHMuZGVmYXVsdC5CdWZmZXIpLHMuZGVmYXVsdC5CdWZmZXIuX2Rvd25sb2FkUXVldWU9W10scy5kZWZhdWx0LkJ1ZmZlci5iYXNlVXJsPVwiXCIscy5kZWZhdWx0LkJ1ZmZlci5mcm9tQXJyYXk9ZnVuY3Rpb24odCl7cmV0dXJuKG5ldyBzLmRlZmF1bHQuQnVmZmVyKS5mcm9tQXJyYXkodCl9LHMuZGVmYXVsdC5CdWZmZXIuZnJvbVVybD1mdW5jdGlvbih0KXt2YXIgZT1uZXcgcy5kZWZhdWx0LkJ1ZmZlcjtyZXR1cm4gZS5sb2FkKHQpLnRoZW4oZnVuY3Rpb24oKXtyZXR1cm4gZX0pfSxzLmRlZmF1bHQuQnVmZmVyLl9yZW1vdmVGcm9tRG93bmxvYWRRdWV1ZT1mdW5jdGlvbih0KXt2YXIgZT1zLmRlZmF1bHQuQnVmZmVyLl9kb3dubG9hZFF1ZXVlLmluZGV4T2YodCk7LTEhPT1lJiZzLmRlZmF1bHQuQnVmZmVyLl9kb3dubG9hZFF1ZXVlLnNwbGljZShlLDEpfSxzLmRlZmF1bHQuQnVmZmVyLmxvYWQ9ZnVuY3Rpb24odCxlLGkpe2U9cy5kZWZhdWx0LmRlZmF1bHRBcmcoZSxzLmRlZmF1bHQubm9PcCk7dmFyIG49dC5tYXRjaCgvXFxbKC4rXFx8PykrXFxdJC8pO2lmKG4pe2Zvcih2YXIgbz1uWzFdLnNwbGl0KFwifFwiKSxhPW9bMF0scj0wO3I8by5sZW5ndGg7cisrKWlmKHMuZGVmYXVsdC5CdWZmZXIuc3VwcG9ydHNUeXBlKG9bcl0pKXthPW9bcl07YnJlYWt9dD10LnJlcGxhY2UoblswXSxhKX1mdW5jdGlvbiBsKHQpe2lmKHMuZGVmYXVsdC5CdWZmZXIuX3JlbW92ZUZyb21Eb3dubG9hZFF1ZXVlKGQpLHMuZGVmYXVsdC5CdWZmZXIuZW1pdChcImVycm9yXCIsdCksIWkpdGhyb3cgdDtpKHQpfWZ1bmN0aW9uIHUoKXtmb3IodmFyIHQ9MCxlPTA7ZTxzLmRlZmF1bHQuQnVmZmVyLl9kb3dubG9hZFF1ZXVlLmxlbmd0aDtlKyspdCs9cy5kZWZhdWx0LkJ1ZmZlci5fZG93bmxvYWRRdWV1ZVtlXS5wcm9ncmVzcztzLmRlZmF1bHQuQnVmZmVyLmVtaXQoXCJwcm9ncmVzc1wiLHQvcy5kZWZhdWx0LkJ1ZmZlci5fZG93bmxvYWRRdWV1ZS5sZW5ndGgpfXZhciBkPW5ldyBYTUxIdHRwUmVxdWVzdDtyZXR1cm4gZC5vcGVuKFwiR0VUXCIscy5kZWZhdWx0LkJ1ZmZlci5iYXNlVXJsK3QsITApLGQucmVzcG9uc2VUeXBlPVwiYXJyYXlidWZmZXJcIixkLnByb2dyZXNzPTAscy5kZWZhdWx0LkJ1ZmZlci5fZG93bmxvYWRRdWV1ZS5wdXNoKGQpLGQuYWRkRXZlbnRMaXN0ZW5lcihcImxvYWRcIixmdW5jdGlvbigpezIwMD09PWQuc3RhdHVzP3MuZGVmYXVsdC5jb250ZXh0LmRlY29kZUF1ZGlvRGF0YShkLnJlc3BvbnNlKS50aGVuKGZ1bmN0aW9uKHQpe2QucHJvZ3Jlc3M9MSx1KCksZSh0KSxzLmRlZmF1bHQuQnVmZmVyLl9yZW1vdmVGcm9tRG93bmxvYWRRdWV1ZShkKSwwPT09cy5kZWZhdWx0LkJ1ZmZlci5fZG93bmxvYWRRdWV1ZS5sZW5ndGgmJnMuZGVmYXVsdC5CdWZmZXIuZW1pdChcImxvYWRcIil9KS5jYXRjaChmdW5jdGlvbigpe3MuZGVmYXVsdC5CdWZmZXIuX3JlbW92ZUZyb21Eb3dubG9hZFF1ZXVlKGQpLGwoXCJUb25lLkJ1ZmZlcjogY291bGQgbm90IGRlY29kZSBhdWRpbyBkYXRhOiBcIit0KX0pOmwoXCJUb25lLkJ1ZmZlcjogY291bGQgbm90IGxvY2F0ZSBmaWxlOiBcIit0KX0pLGQuYWRkRXZlbnRMaXN0ZW5lcihcImVycm9yXCIsbCksZC5hZGRFdmVudExpc3RlbmVyKFwicHJvZ3Jlc3NcIixmdW5jdGlvbih0KXt0Lmxlbmd0aENvbXB1dGFibGUmJihkLnByb2dyZXNzPXQubG9hZGVkL3QudG90YWwqLjk1LHUoKSl9KSxkLnNlbmQoKSxkfSxzLmRlZmF1bHQuQnVmZmVyLmNhbmNlbERvd25sb2Fkcz1mdW5jdGlvbigpe3JldHVybiBzLmRlZmF1bHQuQnVmZmVyLl9kb3dubG9hZFF1ZXVlLnNsaWNlKCkuZm9yRWFjaChmdW5jdGlvbih0KXtzLmRlZmF1bHQuQnVmZmVyLl9yZW1vdmVGcm9tRG93bmxvYWRRdWV1ZSh0KSx0LmFib3J0KCl9KSxzLmRlZmF1bHQuQnVmZmVyfSxzLmRlZmF1bHQuQnVmZmVyLnN1cHBvcnRzVHlwZT1mdW5jdGlvbih0KXt2YXIgZT10LnNwbGl0KFwiLlwiKTtyZXR1cm4gZT1lW2UubGVuZ3RoLTFdLFwiXCIhPT1kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiYXVkaW9cIikuY2FuUGxheVR5cGUoXCJhdWRpby9cIitlKX0scy5kZWZhdWx0LmxvYWRlZD1mdW5jdGlvbigpe3ZhciB0LGU7ZnVuY3Rpb24gaSgpe3MuZGVmYXVsdC5CdWZmZXIub2ZmKFwibG9hZFwiLHQpLHMuZGVmYXVsdC5CdWZmZXIub2ZmKFwiZXJyb3JcIixlKX1yZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24oaSxuKXt0PWZ1bmN0aW9uKCl7aSgpfSxlPWZ1bmN0aW9uKCl7bigpfSxzLmRlZmF1bHQuQnVmZmVyLm9uKFwibG9hZFwiLHQpLHMuZGVmYXVsdC5CdWZmZXIub24oXCJlcnJvclwiLGUpfSkudGhlbihpKS5jYXRjaChmdW5jdGlvbih0KXt0aHJvdyBpKCksbmV3IEVycm9yKHQpfSl9O2UuZGVmYXVsdD1zLmRlZmF1bHQuQnVmZmVyfSxmdW5jdGlvbih0LGUsaSl7XCJ1c2Ugc3RyaWN0XCI7aS5yKGUpO3ZhciBzPWkoMCk7aSgxNyksaSgyNiksaSgxKSxpKDIpLGkoMjIpLGkoNCksaSgyOCk7cy5kZWZhdWx0LkxGTz1mdW5jdGlvbigpe3ZhciB0PXMuZGVmYXVsdC5kZWZhdWx0cyhhcmd1bWVudHMsW1wiZnJlcXVlbmN5XCIsXCJtaW5cIixcIm1heFwiXSxzLmRlZmF1bHQuTEZPKTtzLmRlZmF1bHQuQXVkaW9Ob2RlLmNhbGwodGhpcyksdGhpcy5fb3NjaWxsYXRvcj1uZXcgcy5kZWZhdWx0Lk9zY2lsbGF0b3Ioe2ZyZXF1ZW5jeTp0LmZyZXF1ZW5jeSx0eXBlOnQudHlwZX0pLHRoaXMuZnJlcXVlbmN5PXRoaXMuX29zY2lsbGF0b3IuZnJlcXVlbmN5LHRoaXMuYW1wbGl0dWRlPXRoaXMuX29zY2lsbGF0b3Iudm9sdW1lLHRoaXMuYW1wbGl0dWRlLnVuaXRzPXMuZGVmYXVsdC5UeXBlLk5vcm1hbFJhbmdlLHRoaXMuYW1wbGl0dWRlLnZhbHVlPXQuYW1wbGl0dWRlLHRoaXMuX3N0b3BwZWRTaWduYWw9bmV3IHMuZGVmYXVsdC5TaWduYWwoMCxzLmRlZmF1bHQuVHlwZS5BdWRpb1JhbmdlKSx0aGlzLl96ZXJvcz1uZXcgcy5kZWZhdWx0Llplcm8sdGhpcy5fc3RvcHBlZFZhbHVlPTAsdGhpcy5fYTJnPW5ldyBzLmRlZmF1bHQuQXVkaW9Ub0dhaW4sdGhpcy5fc2NhbGVyPXRoaXMub3V0cHV0PW5ldyBzLmRlZmF1bHQuU2NhbGUodC5taW4sdC5tYXgpLHRoaXMuX3VuaXRzPXMuZGVmYXVsdC5UeXBlLkRlZmF1bHQsdGhpcy51bml0cz10LnVuaXRzLHRoaXMuX29zY2lsbGF0b3IuY2hhaW4odGhpcy5fYTJnLHRoaXMuX3NjYWxlciksdGhpcy5femVyb3MuY29ubmVjdCh0aGlzLl9hMmcpLHRoaXMuX3N0b3BwZWRTaWduYWwuY29ubmVjdCh0aGlzLl9hMmcpLHRoaXMuX3JlYWRPbmx5KFtcImFtcGxpdHVkZVwiLFwiZnJlcXVlbmN5XCJdKSx0aGlzLnBoYXNlPXQucGhhc2V9LHMuZGVmYXVsdC5leHRlbmQocy5kZWZhdWx0LkxGTyxzLmRlZmF1bHQuQXVkaW9Ob2RlKSxzLmRlZmF1bHQuTEZPLmRlZmF1bHRzPXt0eXBlOlwic2luZVwiLG1pbjowLG1heDoxLHBoYXNlOjAsZnJlcXVlbmN5OlwiNG5cIixhbXBsaXR1ZGU6MSx1bml0czpzLmRlZmF1bHQuVHlwZS5EZWZhdWx0fSxzLmRlZmF1bHQuTEZPLnByb3RvdHlwZS5zdGFydD1mdW5jdGlvbih0KXtyZXR1cm4gdD10aGlzLnRvU2Vjb25kcyh0KSx0aGlzLl9zdG9wcGVkU2lnbmFsLnNldFZhbHVlQXRUaW1lKDAsdCksdGhpcy5fb3NjaWxsYXRvci5zdGFydCh0KSx0aGlzfSxzLmRlZmF1bHQuTEZPLnByb3RvdHlwZS5zdG9wPWZ1bmN0aW9uKHQpe3JldHVybiB0PXRoaXMudG9TZWNvbmRzKHQpLHRoaXMuX3N0b3BwZWRTaWduYWwuc2V0VmFsdWVBdFRpbWUodGhpcy5fc3RvcHBlZFZhbHVlLHQpLHRoaXMuX29zY2lsbGF0b3Iuc3RvcCh0KSx0aGlzfSxzLmRlZmF1bHQuTEZPLnByb3RvdHlwZS5zeW5jPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX29zY2lsbGF0b3Iuc3luYygpLHRoaXMuX29zY2lsbGF0b3Iuc3luY0ZyZXF1ZW5jeSgpLHRoaXN9LHMuZGVmYXVsdC5MRk8ucHJvdG90eXBlLnVuc3luYz1mdW5jdGlvbigpe3JldHVybiB0aGlzLl9vc2NpbGxhdG9yLnVuc3luYygpLHRoaXMuX29zY2lsbGF0b3IudW5zeW5jRnJlcXVlbmN5KCksdGhpc30sT2JqZWN0LmRlZmluZVByb3BlcnR5KHMuZGVmYXVsdC5MRk8ucHJvdG90eXBlLFwibWluXCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl90b1VuaXRzKHRoaXMuX3NjYWxlci5taW4pfSxzZXQ6ZnVuY3Rpb24odCl7dD10aGlzLl9mcm9tVW5pdHModCksdGhpcy5fc2NhbGVyLm1pbj10fX0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShzLmRlZmF1bHQuTEZPLnByb3RvdHlwZSxcIm1heFwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fdG9Vbml0cyh0aGlzLl9zY2FsZXIubWF4KX0sc2V0OmZ1bmN0aW9uKHQpe3Q9dGhpcy5fZnJvbVVuaXRzKHQpLHRoaXMuX3NjYWxlci5tYXg9dH19KSxPYmplY3QuZGVmaW5lUHJvcGVydHkocy5kZWZhdWx0LkxGTy5wcm90b3R5cGUsXCJ0eXBlXCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9vc2NpbGxhdG9yLnR5cGV9LHNldDpmdW5jdGlvbih0KXt0aGlzLl9vc2NpbGxhdG9yLnR5cGU9dCx0aGlzLl9zdG9wcGVkVmFsdWU9dGhpcy5fb3NjaWxsYXRvci5fZ2V0SW5pdGlhbFZhbHVlKCksdGhpcy5fc3RvcHBlZFNpZ25hbC52YWx1ZT10aGlzLl9zdG9wcGVkVmFsdWV9fSksT2JqZWN0LmRlZmluZVByb3BlcnR5KHMuZGVmYXVsdC5MRk8ucHJvdG90eXBlLFwicGhhc2VcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX29zY2lsbGF0b3IucGhhc2V9LHNldDpmdW5jdGlvbih0KXt0aGlzLl9vc2NpbGxhdG9yLnBoYXNlPXQsdGhpcy5fc3RvcHBlZFZhbHVlPXRoaXMuX29zY2lsbGF0b3IuX2dldEluaXRpYWxWYWx1ZSgpLHRoaXMuX3N0b3BwZWRTaWduYWwudmFsdWU9dGhpcy5fc3RvcHBlZFZhbHVlfX0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShzLmRlZmF1bHQuTEZPLnByb3RvdHlwZSxcInVuaXRzXCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl91bml0c30sc2V0OmZ1bmN0aW9uKHQpe3ZhciBlPXRoaXMubWluLGk9dGhpcy5tYXg7dGhpcy5fdW5pdHM9dCx0aGlzLm1pbj1lLHRoaXMubWF4PWl9fSksT2JqZWN0LmRlZmluZVByb3BlcnR5KHMuZGVmYXVsdC5MRk8ucHJvdG90eXBlLFwic3RhdGVcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX29zY2lsbGF0b3Iuc3RhdGV9fSkscy5kZWZhdWx0LkxGTy5wcm90b3R5cGUuY29ubmVjdD1mdW5jdGlvbih0KXtyZXR1cm4gdC5jb25zdHJ1Y3RvciE9PXMuZGVmYXVsdC5TaWduYWwmJnQuY29uc3RydWN0b3IhPT1zLmRlZmF1bHQuUGFyYW18fCh0aGlzLmNvbnZlcnQ9dC5jb252ZXJ0LHRoaXMudW5pdHM9dC51bml0cykscy5kZWZhdWx0LlNpZ25hbEJhc2UucHJvdG90eXBlLmNvbm5lY3QuYXBwbHkodGhpcyxhcmd1bWVudHMpLHRoaXN9LHMuZGVmYXVsdC5MRk8ucHJvdG90eXBlLl9mcm9tVW5pdHM9cy5kZWZhdWx0LlBhcmFtLnByb3RvdHlwZS5fZnJvbVVuaXRzLHMuZGVmYXVsdC5MRk8ucHJvdG90eXBlLl90b1VuaXRzPXMuZGVmYXVsdC5QYXJhbS5wcm90b3R5cGUuX3RvVW5pdHMscy5kZWZhdWx0LkxGTy5wcm90b3R5cGUuZGlzcG9zZT1mdW5jdGlvbigpe3JldHVybiBzLmRlZmF1bHQuQXVkaW9Ob2RlLnByb3RvdHlwZS5kaXNwb3NlLmNhbGwodGhpcyksdGhpcy5fd3JpdGFibGUoW1wiYW1wbGl0dWRlXCIsXCJmcmVxdWVuY3lcIl0pLHRoaXMuX29zY2lsbGF0b3IuZGlzcG9zZSgpLHRoaXMuX29zY2lsbGF0b3I9bnVsbCx0aGlzLl9zdG9wcGVkU2lnbmFsLmRpc3Bvc2UoKSx0aGlzLl9zdG9wcGVkU2lnbmFsPW51bGwsdGhpcy5femVyb3MuZGlzcG9zZSgpLHRoaXMuX3plcm9zPW51bGwsdGhpcy5fc2NhbGVyLmRpc3Bvc2UoKSx0aGlzLl9zY2FsZXI9bnVsbCx0aGlzLl9hMmcuZGlzcG9zZSgpLHRoaXMuX2EyZz1udWxsLHRoaXMuZnJlcXVlbmN5PW51bGwsdGhpcy5hbXBsaXR1ZGU9bnVsbCx0aGlzfSxlLmRlZmF1bHQ9cy5kZWZhdWx0LkxGT30sZnVuY3Rpb24odCxlLGkpe1widXNlIHN0cmljdFwiO2kucihlKTt2YXIgcz1pKDApO2koMjkpLGkoOTApLGkoMiksaSgzKTtzLmRlZmF1bHQuU3VidHJhY3Q9ZnVuY3Rpb24odCl7cy5kZWZhdWx0LlNpZ25hbC5jYWxsKHRoaXMpLHRoaXMuY3JlYXRlSW5zT3V0cygyLDApLHRoaXMuX3N1bT10aGlzLmlucHV0WzBdPXRoaXMub3V0cHV0PW5ldyBzLmRlZmF1bHQuR2Fpbix0aGlzLl9uZWc9bmV3IHMuZGVmYXVsdC5OZWdhdGUsdGhpcy5fcGFyYW09dGhpcy5pbnB1dFsxXT1uZXcgcy5kZWZhdWx0LlNpZ25hbCh0KSx0aGlzLl9wYXJhbS5jaGFpbih0aGlzLl9uZWcsdGhpcy5fc3VtKX0scy5kZWZhdWx0LmV4dGVuZChzLmRlZmF1bHQuU3VidHJhY3Qscy5kZWZhdWx0LlNpZ25hbCkscy5kZWZhdWx0LlN1YnRyYWN0LnByb3RvdHlwZS5kaXNwb3NlPWZ1bmN0aW9uKCl7cmV0dXJuIHMuZGVmYXVsdC5TaWduYWwucHJvdG90eXBlLmRpc3Bvc2UuY2FsbCh0aGlzKSx0aGlzLl9uZWcuZGlzcG9zZSgpLHRoaXMuX25lZz1udWxsLHRoaXMuX3N1bS5kaXNjb25uZWN0KCksdGhpcy5fc3VtPW51bGwsdGhpc30sZS5kZWZhdWx0PXMuZGVmYXVsdC5TdWJ0cmFjdH0sZnVuY3Rpb24odCxlLGkpe1widXNlIHN0cmljdFwiO2kucihlKTt2YXIgcz1pKDApO2koNCksaSgxKSxpKDI0KTtzLmRlZmF1bHQuUGFyYW09ZnVuY3Rpb24oKXt2YXIgdD1zLmRlZmF1bHQuZGVmYXVsdHMoYXJndW1lbnRzLFtcInBhcmFtXCIsXCJ1bml0c1wiLFwiY29udmVydFwiXSxzLmRlZmF1bHQuUGFyYW0pO3MuZGVmYXVsdC5BdWRpb05vZGUuY2FsbCh0aGlzLHQpLHRoaXMuX3BhcmFtPXRoaXMuaW5wdXQ9dC5wYXJhbSx0aGlzLnVuaXRzPXQudW5pdHMsdGhpcy5jb252ZXJ0PXQuY29udmVydCx0aGlzLm92ZXJyaWRkZW49ITEsdGhpcy5fZXZlbnRzPW5ldyBzLmRlZmF1bHQuVGltZWxpbmUoMWUzKSxzLmRlZmF1bHQuaXNEZWZpbmVkKHQudmFsdWUpJiZ0aGlzLl9wYXJhbSYmdGhpcy5zZXRWYWx1ZUF0VGltZSh0LnZhbHVlLDApfSxzLmRlZmF1bHQuZXh0ZW5kKHMuZGVmYXVsdC5QYXJhbSxzLmRlZmF1bHQuQXVkaW9Ob2RlKSxzLmRlZmF1bHQuUGFyYW0uZGVmYXVsdHM9e3VuaXRzOnMuZGVmYXVsdC5UeXBlLkRlZmF1bHQsY29udmVydDohMCxwYXJhbTp2b2lkIDB9LE9iamVjdC5kZWZpbmVQcm9wZXJ0eShzLmRlZmF1bHQuUGFyYW0ucHJvdG90eXBlLFwidmFsdWVcIix7Z2V0OmZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy5ub3coKTtyZXR1cm4gdGhpcy5fdG9Vbml0cyh0aGlzLmdldFZhbHVlQXRUaW1lKHQpKX0sc2V0OmZ1bmN0aW9uKHQpe3RoaXMuX2luaXRpYWxWYWx1ZT10aGlzLl9mcm9tVW5pdHModCksdGhpcy5jYW5jZWxTY2hlZHVsZWRWYWx1ZXModGhpcy5ub3coKSksdGhpcy5zZXRWYWx1ZUF0VGltZSh0LHRoaXMubm93KCkpfX0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShzLmRlZmF1bHQuUGFyYW0ucHJvdG90eXBlLFwibWluVmFsdWVcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMudW5pdHM9PT1zLmRlZmF1bHQuVHlwZS5UaW1lfHx0aGlzLnVuaXRzPT09cy5kZWZhdWx0LlR5cGUuRnJlcXVlbmN5fHx0aGlzLnVuaXRzPT09cy5kZWZhdWx0LlR5cGUuTm9ybWFsUmFuZ2V8fHRoaXMudW5pdHM9PT1zLmRlZmF1bHQuVHlwZS5Qb3NpdGl2ZXx8dGhpcy51bml0cz09PXMuZGVmYXVsdC5UeXBlLkJQTT8wOnRoaXMudW5pdHM9PT1zLmRlZmF1bHQuVHlwZS5BdWRpb1JhbmdlPy0xOnRoaXMudW5pdHM9PT1zLmRlZmF1bHQuVHlwZS5EZWNpYmVscz8tMS8wOnRoaXMuX3BhcmFtLm1pblZhbHVlfX0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShzLmRlZmF1bHQuUGFyYW0ucHJvdG90eXBlLFwibWF4VmFsdWVcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMudW5pdHM9PT1zLmRlZmF1bHQuVHlwZS5Ob3JtYWxSYW5nZXx8dGhpcy51bml0cz09PXMuZGVmYXVsdC5UeXBlLkF1ZGlvUmFuZ2U/MTp0aGlzLl9wYXJhbS5tYXhWYWx1ZX19KSxzLmRlZmF1bHQuUGFyYW0ucHJvdG90eXBlLl9mcm9tVW5pdHM9ZnVuY3Rpb24odCl7aWYoIXRoaXMuY29udmVydCYmIXMuZGVmYXVsdC5pc1VuZGVmKHRoaXMuY29udmVydCl8fHRoaXMub3ZlcnJpZGRlbilyZXR1cm4gdDtzd2l0Y2godGhpcy51bml0cyl7Y2FzZSBzLmRlZmF1bHQuVHlwZS5UaW1lOnJldHVybiB0aGlzLnRvU2Vjb25kcyh0KTtjYXNlIHMuZGVmYXVsdC5UeXBlLkZyZXF1ZW5jeTpyZXR1cm4gdGhpcy50b0ZyZXF1ZW5jeSh0KTtjYXNlIHMuZGVmYXVsdC5UeXBlLkRlY2liZWxzOnJldHVybiBzLmRlZmF1bHQuZGJUb0dhaW4odCk7Y2FzZSBzLmRlZmF1bHQuVHlwZS5Ob3JtYWxSYW5nZTpyZXR1cm4gTWF0aC5taW4oTWF0aC5tYXgodCwwKSwxKTtjYXNlIHMuZGVmYXVsdC5UeXBlLkF1ZGlvUmFuZ2U6cmV0dXJuIE1hdGgubWluKE1hdGgubWF4KHQsLTEpLDEpO2Nhc2Ugcy5kZWZhdWx0LlR5cGUuUG9zaXRpdmU6cmV0dXJuIE1hdGgubWF4KHQsMCk7ZGVmYXVsdDpyZXR1cm4gdH19LHMuZGVmYXVsdC5QYXJhbS5wcm90b3R5cGUuX3RvVW5pdHM9ZnVuY3Rpb24odCl7aWYoIXRoaXMuY29udmVydCYmIXMuZGVmYXVsdC5pc1VuZGVmKHRoaXMuY29udmVydCkpcmV0dXJuIHQ7c3dpdGNoKHRoaXMudW5pdHMpe2Nhc2Ugcy5kZWZhdWx0LlR5cGUuRGVjaWJlbHM6cmV0dXJuIHMuZGVmYXVsdC5nYWluVG9EYih0KTtkZWZhdWx0OnJldHVybiB0fX0scy5kZWZhdWx0LlBhcmFtLnByb3RvdHlwZS5fbWluT3V0cHV0PTFlLTUscy5kZWZhdWx0LlBhcmFtLkF1dG9tYXRpb25UeXBlPXtMaW5lYXI6XCJsaW5lYXJSYW1wVG9WYWx1ZUF0VGltZVwiLEV4cG9uZW50aWFsOlwiZXhwb25lbnRpYWxSYW1wVG9WYWx1ZUF0VGltZVwiLFRhcmdldDpcInNldFRhcmdldEF0VGltZVwiLFNldFZhbHVlOlwic2V0VmFsdWVBdFRpbWVcIixDYW5jZWw6XCJjYW5jZWxTY2hlZHVsZWRWYWx1ZXNcIn0scy5kZWZhdWx0LlBhcmFtLnByb3RvdHlwZS5zZXRWYWx1ZUF0VGltZT1mdW5jdGlvbih0LGUpe3JldHVybiBlPXRoaXMudG9TZWNvbmRzKGUpLHQ9dGhpcy5fZnJvbVVuaXRzKHQpLHRoaXMuX2V2ZW50cy5hZGQoe3R5cGU6cy5kZWZhdWx0LlBhcmFtLkF1dG9tYXRpb25UeXBlLlNldFZhbHVlLHZhbHVlOnQsdGltZTplfSksdGhpcy5sb2cocy5kZWZhdWx0LlBhcmFtLkF1dG9tYXRpb25UeXBlLlNldFZhbHVlLHQsZSksdGhpcy5fcGFyYW0uc2V0VmFsdWVBdFRpbWUodCxlKSx0aGlzfSxzLmRlZmF1bHQuUGFyYW0ucHJvdG90eXBlLmdldFZhbHVlQXRUaW1lPWZ1bmN0aW9uKHQpe3Q9dGhpcy50b1NlY29uZHModCk7dmFyIGU9dGhpcy5fZXZlbnRzLmdldEFmdGVyKHQpLGk9dGhpcy5fZXZlbnRzLmdldCh0KSxuPXMuZGVmYXVsdC5kZWZhdWx0QXJnKHRoaXMuX2luaXRpYWxWYWx1ZSx0aGlzLl9wYXJhbS5kZWZhdWx0VmFsdWUpLG89bjtpZihudWxsPT09aSlvPW47ZWxzZSBpZihpLnR5cGU9PT1zLmRlZmF1bHQuUGFyYW0uQXV0b21hdGlvblR5cGUuVGFyZ2V0KXt2YXIgYSxyPXRoaXMuX2V2ZW50cy5nZXRCZWZvcmUoaS50aW1lKTthPW51bGw9PT1yP246ci52YWx1ZSxvPXRoaXMuX2V4cG9uZW50aWFsQXBwcm9hY2goaS50aW1lLGEsaS52YWx1ZSxpLmNvbnN0YW50LHQpfWVsc2Ugbz1udWxsPT09ZT9pLnZhbHVlOmUudHlwZT09PXMuZGVmYXVsdC5QYXJhbS5BdXRvbWF0aW9uVHlwZS5MaW5lYXI/dGhpcy5fbGluZWFySW50ZXJwb2xhdGUoaS50aW1lLGkudmFsdWUsZS50aW1lLGUudmFsdWUsdCk6ZS50eXBlPT09cy5kZWZhdWx0LlBhcmFtLkF1dG9tYXRpb25UeXBlLkV4cG9uZW50aWFsP3RoaXMuX2V4cG9uZW50aWFsSW50ZXJwb2xhdGUoaS50aW1lLGkudmFsdWUsZS50aW1lLGUudmFsdWUsdCk6aS52YWx1ZTtyZXR1cm4gb30scy5kZWZhdWx0LlBhcmFtLnByb3RvdHlwZS5zZXRSYW1wUG9pbnQ9ZnVuY3Rpb24odCl7dD10aGlzLnRvU2Vjb25kcyh0KTt2YXIgZT10aGlzLmdldFZhbHVlQXRUaW1lKHQpO3JldHVybiB0aGlzLmNhbmNlbEFuZEhvbGRBdFRpbWUodCksMD09PWUmJihlPXRoaXMuX21pbk91dHB1dCksdGhpcy5zZXRWYWx1ZUF0VGltZSh0aGlzLl90b1VuaXRzKGUpLHQpLHRoaXN9LHMuZGVmYXVsdC5QYXJhbS5wcm90b3R5cGUubGluZWFyUmFtcFRvVmFsdWVBdFRpbWU9ZnVuY3Rpb24odCxlKXtyZXR1cm4gdD10aGlzLl9mcm9tVW5pdHModCksZT10aGlzLnRvU2Vjb25kcyhlKSx0aGlzLl9ldmVudHMuYWRkKHt0eXBlOnMuZGVmYXVsdC5QYXJhbS5BdXRvbWF0aW9uVHlwZS5MaW5lYXIsdmFsdWU6dCx0aW1lOmV9KSx0aGlzLmxvZyhzLmRlZmF1bHQuUGFyYW0uQXV0b21hdGlvblR5cGUuTGluZWFyLHQsZSksdGhpcy5fcGFyYW0ubGluZWFyUmFtcFRvVmFsdWVBdFRpbWUodCxlKSx0aGlzfSxzLmRlZmF1bHQuUGFyYW0ucHJvdG90eXBlLmV4cG9uZW50aWFsUmFtcFRvVmFsdWVBdFRpbWU9ZnVuY3Rpb24odCxlKXtyZXR1cm4gdD10aGlzLl9mcm9tVW5pdHModCksdD1NYXRoLm1heCh0aGlzLl9taW5PdXRwdXQsdCksZT10aGlzLnRvU2Vjb25kcyhlKSx0aGlzLl9ldmVudHMuYWRkKHt0eXBlOnMuZGVmYXVsdC5QYXJhbS5BdXRvbWF0aW9uVHlwZS5FeHBvbmVudGlhbCx0aW1lOmUsdmFsdWU6dH0pLHRoaXMubG9nKHMuZGVmYXVsdC5QYXJhbS5BdXRvbWF0aW9uVHlwZS5FeHBvbmVudGlhbCx0LGUpLHRoaXMuX3BhcmFtLmV4cG9uZW50aWFsUmFtcFRvVmFsdWVBdFRpbWUodCxlKSx0aGlzfSxzLmRlZmF1bHQuUGFyYW0ucHJvdG90eXBlLmV4cG9uZW50aWFsUmFtcFRvPWZ1bmN0aW9uKHQsZSxpKXtyZXR1cm4gaT10aGlzLnRvU2Vjb25kcyhpKSx0aGlzLnNldFJhbXBQb2ludChpKSx0aGlzLmV4cG9uZW50aWFsUmFtcFRvVmFsdWVBdFRpbWUodCxpK3RoaXMudG9TZWNvbmRzKGUpKSx0aGlzfSxzLmRlZmF1bHQuUGFyYW0ucHJvdG90eXBlLmxpbmVhclJhbXBUbz1mdW5jdGlvbih0LGUsaSl7cmV0dXJuIGk9dGhpcy50b1NlY29uZHMoaSksdGhpcy5zZXRSYW1wUG9pbnQoaSksdGhpcy5saW5lYXJSYW1wVG9WYWx1ZUF0VGltZSh0LGkrdGhpcy50b1NlY29uZHMoZSkpLHRoaXN9LHMuZGVmYXVsdC5QYXJhbS5wcm90b3R5cGUudGFyZ2V0UmFtcFRvPWZ1bmN0aW9uKHQsZSxpKXtyZXR1cm4gaT10aGlzLnRvU2Vjb25kcyhpKSx0aGlzLnNldFJhbXBQb2ludChpKSx0aGlzLmV4cG9uZW50aWFsQXBwcm9hY2hWYWx1ZUF0VGltZSh0LGksZSksdGhpc30scy5kZWZhdWx0LlBhcmFtLnByb3RvdHlwZS5leHBvbmVudGlhbEFwcHJvYWNoVmFsdWVBdFRpbWU9ZnVuY3Rpb24odCxlLGkpe3ZhciBzPU1hdGgubG9nKHRoaXMudG9TZWNvbmRzKGkpKzEpL01hdGgubG9nKDIwMCk7cmV0dXJuIGU9dGhpcy50b1NlY29uZHMoZSksdGhpcy5zZXRUYXJnZXRBdFRpbWUodCxlLHMpLHRoaXMuY2FuY2VsQW5kSG9sZEF0VGltZShlKy45KmkpLHRoaXMubGluZWFyUmFtcFRvVmFsdWVBdFRpbWUodCxlK2kpLHRoaXN9LHMuZGVmYXVsdC5QYXJhbS5wcm90b3R5cGUuc2V0VGFyZ2V0QXRUaW1lPWZ1bmN0aW9uKHQsZSxpKXtpZih0PXRoaXMuX2Zyb21Vbml0cyh0KSxpPD0wKXRocm93IG5ldyBFcnJvcihcInRpbWVDb25zdGFudCBtdXN0IGJlIGdyZWF0ZXIgdGhhbiAwXCIpO3JldHVybiBlPXRoaXMudG9TZWNvbmRzKGUpLHRoaXMuX2V2ZW50cy5hZGQoe3R5cGU6cy5kZWZhdWx0LlBhcmFtLkF1dG9tYXRpb25UeXBlLlRhcmdldCx2YWx1ZTp0LHRpbWU6ZSxjb25zdGFudDppfSksdGhpcy5sb2cocy5kZWZhdWx0LlBhcmFtLkF1dG9tYXRpb25UeXBlLlRhcmdldCx0LGUsaSksdGhpcy5fcGFyYW0uc2V0VGFyZ2V0QXRUaW1lKHQsZSxpKSx0aGlzfSxzLmRlZmF1bHQuUGFyYW0ucHJvdG90eXBlLnNldFZhbHVlQ3VydmVBdFRpbWU9ZnVuY3Rpb24odCxlLGksbil7bj1zLmRlZmF1bHQuZGVmYXVsdEFyZyhuLDEpLGk9dGhpcy50b1NlY29uZHMoaSksZT10aGlzLnRvU2Vjb25kcyhlKSx0aGlzLnNldFZhbHVlQXRUaW1lKHRbMF0qbixlKTtmb3IodmFyIG89aS8odC5sZW5ndGgtMSksYT0xO2E8dC5sZW5ndGg7YSsrKXRoaXMubGluZWFyUmFtcFRvVmFsdWVBdFRpbWUodFthXSpuLGUrYSpvKTtyZXR1cm4gdGhpc30scy5kZWZhdWx0LlBhcmFtLnByb3RvdHlwZS5jYW5jZWxTY2hlZHVsZWRWYWx1ZXM9ZnVuY3Rpb24odCl7cmV0dXJuIHQ9dGhpcy50b1NlY29uZHModCksdGhpcy5fZXZlbnRzLmNhbmNlbCh0KSx0aGlzLl9wYXJhbS5jYW5jZWxTY2hlZHVsZWRWYWx1ZXModCksdGhpcy5sb2cocy5kZWZhdWx0LlBhcmFtLkF1dG9tYXRpb25UeXBlLkNhbmNlbCx0KSx0aGlzfSxzLmRlZmF1bHQuUGFyYW0ucHJvdG90eXBlLmNhbmNlbEFuZEhvbGRBdFRpbWU9ZnVuY3Rpb24odCl7dD10aGlzLnRvU2Vjb25kcyh0KTt2YXIgZT10aGlzLmdldFZhbHVlQXRUaW1lKHQpO3RoaXMubG9nKFwiY2FuY2VsQW5kSG9sZEF0VGltZVwiLHQsXCJ2YWx1ZT1cIitlKSx0aGlzLl9wYXJhbS5jYW5jZWxTY2hlZHVsZWRWYWx1ZXModCk7dmFyIGk9dGhpcy5fZXZlbnRzLmdldCh0KSxuPXRoaXMuX2V2ZW50cy5nZXRBZnRlcih0KTtyZXR1cm4gaSYmaS50aW1lPT09dD9uP3RoaXMuX2V2ZW50cy5jYW5jZWwobi50aW1lKTp0aGlzLl9ldmVudHMuY2FuY2VsKHQrdGhpcy5zYW1wbGVUaW1lKTpuJiYodGhpcy5fZXZlbnRzLmNhbmNlbChuLnRpbWUpLG4udHlwZT09PXMuZGVmYXVsdC5QYXJhbS5BdXRvbWF0aW9uVHlwZS5MaW5lYXI/dGhpcy5saW5lYXJSYW1wVG9WYWx1ZUF0VGltZShlLHQpOm4udHlwZT09PXMuZGVmYXVsdC5QYXJhbS5BdXRvbWF0aW9uVHlwZS5FeHBvbmVudGlhbCYmdGhpcy5leHBvbmVudGlhbFJhbXBUb1ZhbHVlQXRUaW1lKGUsdCkpLHRoaXMuX2V2ZW50cy5hZGQoe3R5cGU6cy5kZWZhdWx0LlBhcmFtLkF1dG9tYXRpb25UeXBlLlNldFZhbHVlLHZhbHVlOmUsdGltZTp0fSksdGhpcy5fcGFyYW0uc2V0VmFsdWVBdFRpbWUoZSx0KSx0aGlzfSxzLmRlZmF1bHQuUGFyYW0ucHJvdG90eXBlLnJhbXBUbz1mdW5jdGlvbih0LGUsaSl7cmV0dXJuIGU9cy5kZWZhdWx0LmRlZmF1bHRBcmcoZSwuMSksdGhpcy51bml0cz09PXMuZGVmYXVsdC5UeXBlLkZyZXF1ZW5jeXx8dGhpcy51bml0cz09PXMuZGVmYXVsdC5UeXBlLkJQTXx8dGhpcy51bml0cz09PXMuZGVmYXVsdC5UeXBlLkRlY2liZWxzP3RoaXMuZXhwb25lbnRpYWxSYW1wVG8odCxlLGkpOnRoaXMubGluZWFyUmFtcFRvKHQsZSxpKSx0aGlzfSxzLmRlZmF1bHQuUGFyYW0ucHJvdG90eXBlLl9leHBvbmVudGlhbEFwcHJvYWNoPWZ1bmN0aW9uKHQsZSxpLHMsbil7cmV0dXJuIGkrKGUtaSkqTWF0aC5leHAoLShuLXQpL3MpfSxzLmRlZmF1bHQuUGFyYW0ucHJvdG90eXBlLl9saW5lYXJJbnRlcnBvbGF0ZT1mdW5jdGlvbih0LGUsaSxzLG4pe3JldHVybiBlKyhuLXQpLyhpLXQpKihzLWUpfSxzLmRlZmF1bHQuUGFyYW0ucHJvdG90eXBlLl9leHBvbmVudGlhbEludGVycG9sYXRlPWZ1bmN0aW9uKHQsZSxpLHMsbil7cmV0dXJuIGUqTWF0aC5wb3cocy9lLChuLXQpLyhpLXQpKX0scy5kZWZhdWx0LlBhcmFtLnByb3RvdHlwZS5kaXNwb3NlPWZ1bmN0aW9uKCl7cmV0dXJuIHMuZGVmYXVsdC5BdWRpb05vZGUucHJvdG90eXBlLmRpc3Bvc2UuY2FsbCh0aGlzKSx0aGlzLl9wYXJhbT1udWxsLHRoaXMuX2V2ZW50cz1udWxsLHRoaXN9LGUuZGVmYXVsdD1zLmRlZmF1bHQuUGFyYW19LGZ1bmN0aW9uKHQsZSxpKXtcInVzZSBzdHJpY3RcIjtpLnIoZSk7dmFyIHM9aSgwKTtpKDgpLGkoMTkpLGkoMTApLGkoMjMpO3MuZGVmYXVsdC5TdGVyZW9FZmZlY3Q9ZnVuY3Rpb24oKXtzLmRlZmF1bHQuQXVkaW9Ob2RlLmNhbGwodGhpcyk7dmFyIHQ9cy5kZWZhdWx0LmRlZmF1bHRzKGFyZ3VtZW50cyxbXCJ3ZXRcIl0scy5kZWZhdWx0LkVmZmVjdCk7dGhpcy5jcmVhdGVJbnNPdXRzKDEsMSksdGhpcy5fZHJ5V2V0PW5ldyBzLmRlZmF1bHQuQ3Jvc3NGYWRlKHQud2V0KSx0aGlzLndldD10aGlzLl9kcnlXZXQuZmFkZSx0aGlzLl9zcGxpdD1uZXcgcy5kZWZhdWx0LlNwbGl0LHRoaXMuZWZmZWN0U2VuZEw9dGhpcy5fc3BsaXQubGVmdCx0aGlzLmVmZmVjdFNlbmRSPXRoaXMuX3NwbGl0LnJpZ2h0LHRoaXMuX21lcmdlPW5ldyBzLmRlZmF1bHQuTWVyZ2UsdGhpcy5lZmZlY3RSZXR1cm5MPXRoaXMuX21lcmdlLmxlZnQsdGhpcy5lZmZlY3RSZXR1cm5SPXRoaXMuX21lcmdlLnJpZ2h0LHMuZGVmYXVsdC5jb25uZWN0KHRoaXMuaW5wdXQsdGhpcy5fc3BsaXQpLHMuZGVmYXVsdC5jb25uZWN0KHRoaXMuaW5wdXQsdGhpcy5fZHJ5V2V0LDAsMCksdGhpcy5fbWVyZ2UuY29ubmVjdCh0aGlzLl9kcnlXZXQsMCwxKSx0aGlzLl9kcnlXZXQuY29ubmVjdCh0aGlzLm91dHB1dCksdGhpcy5fcmVhZE9ubHkoW1wid2V0XCJdKX0scy5kZWZhdWx0LmV4dGVuZChzLmRlZmF1bHQuU3RlcmVvRWZmZWN0LHMuZGVmYXVsdC5FZmZlY3QpLHMuZGVmYXVsdC5TdGVyZW9FZmZlY3QucHJvdG90eXBlLmRpc3Bvc2U9ZnVuY3Rpb24oKXtyZXR1cm4gcy5kZWZhdWx0LkF1ZGlvTm9kZS5wcm90b3R5cGUuZGlzcG9zZS5jYWxsKHRoaXMpLHRoaXMuX2RyeVdldC5kaXNwb3NlKCksdGhpcy5fZHJ5V2V0PW51bGwsdGhpcy5fc3BsaXQuZGlzcG9zZSgpLHRoaXMuX3NwbGl0PW51bGwsdGhpcy5fbWVyZ2UuZGlzcG9zZSgpLHRoaXMuX21lcmdlPW51bGwsdGhpcy5lZmZlY3RTZW5kTD1udWxsLHRoaXMuZWZmZWN0U2VuZFI9bnVsbCx0aGlzLmVmZmVjdFJldHVybkw9bnVsbCx0aGlzLmVmZmVjdFJldHVyblI9bnVsbCx0aGlzLl93cml0YWJsZShbXCJ3ZXRcIl0pLHRoaXMud2V0PW51bGwsdGhpc30sZS5kZWZhdWx0PXMuZGVmYXVsdC5TdGVyZW9FZmZlY3R9LGZ1bmN0aW9uKHQsZSxpKXtcInVzZSBzdHJpY3RcIjtpLnIoZSk7dmFyIHM9aSgwKTtpKDgzKSxpKDQpLGkoMjQpLGkoMzUpLGkoMyksaSg4MSksaSg4MCksaSg1Nik7cy5kZWZhdWx0LlRyYW5zcG9ydD1mdW5jdGlvbigpe3MuZGVmYXVsdC5FbWl0dGVyLmNhbGwodGhpcykscy5kZWZhdWx0LmdldENvbnRleHQoZnVuY3Rpb24oKXt0aGlzLmxvb3A9ITEsdGhpcy5fbG9vcFN0YXJ0PTAsdGhpcy5fbG9vcEVuZD0wLHRoaXMuX3BwcT1uLmRlZmF1bHRzLlBQUSx0aGlzLl9jbG9jaz1uZXcgcy5kZWZhdWx0LkNsb2NrKHtjYWxsYmFjazp0aGlzLl9wcm9jZXNzVGljay5iaW5kKHRoaXMpLGZyZXF1ZW5jeTowfSksdGhpcy5fYmluZENsb2NrRXZlbnRzKCksdGhpcy5icG09dGhpcy5fY2xvY2suZnJlcXVlbmN5LHRoaXMuYnBtLl90b1VuaXRzPXRoaXMuX3RvVW5pdHMuYmluZCh0aGlzKSx0aGlzLmJwbS5fZnJvbVVuaXRzPXRoaXMuX2Zyb21Vbml0cy5iaW5kKHRoaXMpLHRoaXMuYnBtLnVuaXRzPXMuZGVmYXVsdC5UeXBlLkJQTSx0aGlzLmJwbS52YWx1ZT1uLmRlZmF1bHRzLmJwbSx0aGlzLl9yZWFkT25seShcImJwbVwiKSx0aGlzLl90aW1lU2lnbmF0dXJlPW4uZGVmYXVsdHMudGltZVNpZ25hdHVyZSx0aGlzLl9zY2hlZHVsZWRFdmVudHM9e30sdGhpcy5fdGltZWxpbmU9bmV3IHMuZGVmYXVsdC5UaW1lbGluZSx0aGlzLl9yZXBlYXRlZEV2ZW50cz1uZXcgcy5kZWZhdWx0LkludGVydmFsVGltZWxpbmUsdGhpcy5fc3luY2VkU2lnbmFscz1bXSx0aGlzLl9zd2luZ1RpY2tzPW4uZGVmYXVsdHMuUFBRLzIsdGhpcy5fc3dpbmdBbW91bnQ9MCx0aGlzLmNvbnRleHQudHJhbnNwb3J0PXRoaXN9LmJpbmQodGhpcykpfSxzLmRlZmF1bHQuZXh0ZW5kKHMuZGVmYXVsdC5UcmFuc3BvcnQscy5kZWZhdWx0LkVtaXR0ZXIpLHMuZGVmYXVsdC5UcmFuc3BvcnQuZGVmYXVsdHM9e2JwbToxMjAsc3dpbmc6MCxzd2luZ1N1YmRpdmlzaW9uOlwiOG5cIix0aW1lU2lnbmF0dXJlOjQsbG9vcFN0YXJ0OjAsbG9vcEVuZDpcIjRtXCIsUFBROjE5Mn0scy5kZWZhdWx0LlRyYW5zcG9ydC5wcm90b3R5cGUuaXNUcmFuc3BvcnQ9ITAscy5kZWZhdWx0LlRyYW5zcG9ydC5wcm90b3R5cGUuX3Byb2Nlc3NUaWNrPWZ1bmN0aW9uKHQsZSl7aWYodGhpcy5fc3dpbmdBbW91bnQ+MCYmZSV0aGlzLl9wcHEhPTAmJmUlKDIqdGhpcy5fc3dpbmdUaWNrcykhPTApe3ZhciBpPWUlKDIqdGhpcy5fc3dpbmdUaWNrcykvKDIqdGhpcy5fc3dpbmdUaWNrcyksbj1NYXRoLnNpbihpKk1hdGguUEkpKnRoaXMuX3N3aW5nQW1vdW50O3QrPXMuZGVmYXVsdC5UaWNrcygyKnRoaXMuX3N3aW5nVGlja3MvMykudG9TZWNvbmRzKCkqbn10aGlzLmxvb3AmJmU+PXRoaXMuX2xvb3BFbmQmJih0aGlzLmVtaXQoXCJsb29wRW5kXCIsdCksdGhpcy5fY2xvY2suc2V0VGlja3NBdFRpbWUodGhpcy5fbG9vcFN0YXJ0LHQpLGU9dGhpcy5fbG9vcFN0YXJ0LHRoaXMuZW1pdChcImxvb3BTdGFydFwiLHQsdGhpcy5fY2xvY2suZ2V0U2Vjb25kc0F0VGltZSh0KSksdGhpcy5lbWl0KFwibG9vcFwiLHQpKSx0aGlzLl90aW1lbGluZS5mb3JFYWNoQXRUaW1lKGUsZnVuY3Rpb24oZSl7ZS5pbnZva2UodCl9KX0scy5kZWZhdWx0LlRyYW5zcG9ydC5wcm90b3R5cGUuc2NoZWR1bGU9ZnVuY3Rpb24odCxlKXt2YXIgaT1uZXcgcy5kZWZhdWx0LlRyYW5zcG9ydEV2ZW50KHRoaXMse3RpbWU6cy5kZWZhdWx0LlRyYW5zcG9ydFRpbWUoZSksY2FsbGJhY2s6dH0pO3JldHVybiB0aGlzLl9hZGRFdmVudChpLHRoaXMuX3RpbWVsaW5lKX0scy5kZWZhdWx0LlRyYW5zcG9ydC5wcm90b3R5cGUuc2NoZWR1bGVSZXBlYXQ9ZnVuY3Rpb24odCxlLGksbil7dmFyIG89bmV3IHMuZGVmYXVsdC5UcmFuc3BvcnRSZXBlYXRFdmVudCh0aGlzLHtjYWxsYmFjazp0LGludGVydmFsOnMuZGVmYXVsdC5UaW1lKGUpLHRpbWU6cy5kZWZhdWx0LlRyYW5zcG9ydFRpbWUoaSksZHVyYXRpb246cy5kZWZhdWx0LlRpbWUocy5kZWZhdWx0LmRlZmF1bHRBcmcobiwxLzApKX0pO3JldHVybiB0aGlzLl9hZGRFdmVudChvLHRoaXMuX3JlcGVhdGVkRXZlbnRzKX0scy5kZWZhdWx0LlRyYW5zcG9ydC5wcm90b3R5cGUuc2NoZWR1bGVPbmNlPWZ1bmN0aW9uKHQsZSl7dmFyIGk9bmV3IHMuZGVmYXVsdC5UcmFuc3BvcnRFdmVudCh0aGlzLHt0aW1lOnMuZGVmYXVsdC5UcmFuc3BvcnRUaW1lKGUpLGNhbGxiYWNrOnQsb25jZTohMH0pO3JldHVybiB0aGlzLl9hZGRFdmVudChpLHRoaXMuX3RpbWVsaW5lKX0scy5kZWZhdWx0LlRyYW5zcG9ydC5wcm90b3R5cGUuY2xlYXI9ZnVuY3Rpb24odCl7aWYodGhpcy5fc2NoZWR1bGVkRXZlbnRzLmhhc093blByb3BlcnR5KHQpKXt2YXIgZT10aGlzLl9zY2hlZHVsZWRFdmVudHNbdC50b1N0cmluZygpXTtlLnRpbWVsaW5lLnJlbW92ZShlLmV2ZW50KSxlLmV2ZW50LmRpc3Bvc2UoKSxkZWxldGUgdGhpcy5fc2NoZWR1bGVkRXZlbnRzW3QudG9TdHJpbmcoKV19cmV0dXJuIHRoaXN9LHMuZGVmYXVsdC5UcmFuc3BvcnQucHJvdG90eXBlLl9hZGRFdmVudD1mdW5jdGlvbih0LGUpe3JldHVybiB0aGlzLl9zY2hlZHVsZWRFdmVudHNbdC5pZC50b1N0cmluZygpXT17ZXZlbnQ6dCx0aW1lbGluZTplfSxlLmFkZCh0KSx0LmlkfSxzLmRlZmF1bHQuVHJhbnNwb3J0LnByb3RvdHlwZS5jYW5jZWw9ZnVuY3Rpb24odCl7cmV0dXJuIHQ9cy5kZWZhdWx0LmRlZmF1bHRBcmcodCwwKSx0PXRoaXMudG9UaWNrcyh0KSx0aGlzLl90aW1lbGluZS5mb3JFYWNoRnJvbSh0LGZ1bmN0aW9uKHQpe3RoaXMuY2xlYXIodC5pZCl9LmJpbmQodGhpcykpLHRoaXMuX3JlcGVhdGVkRXZlbnRzLmZvckVhY2hGcm9tKHQsZnVuY3Rpb24odCl7dGhpcy5jbGVhcih0LmlkKX0uYmluZCh0aGlzKSksdGhpc30scy5kZWZhdWx0LlRyYW5zcG9ydC5wcm90b3R5cGUuX2JpbmRDbG9ja0V2ZW50cz1mdW5jdGlvbigpe3RoaXMuX2Nsb2NrLm9uKFwic3RhcnRcIixmdW5jdGlvbih0LGUpe2U9cy5kZWZhdWx0LlRpY2tzKGUpLnRvU2Vjb25kcygpLHRoaXMuZW1pdChcInN0YXJ0XCIsdCxlKX0uYmluZCh0aGlzKSksdGhpcy5fY2xvY2sub24oXCJzdG9wXCIsZnVuY3Rpb24odCl7dGhpcy5lbWl0KFwic3RvcFwiLHQpfS5iaW5kKHRoaXMpKSx0aGlzLl9jbG9jay5vbihcInBhdXNlXCIsZnVuY3Rpb24odCl7dGhpcy5lbWl0KFwicGF1c2VcIix0KX0uYmluZCh0aGlzKSl9LE9iamVjdC5kZWZpbmVQcm9wZXJ0eShzLmRlZmF1bHQuVHJhbnNwb3J0LnByb3RvdHlwZSxcInN0YXRlXCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9jbG9jay5nZXRTdGF0ZUF0VGltZSh0aGlzLm5vdygpKX19KSxzLmRlZmF1bHQuVHJhbnNwb3J0LnByb3RvdHlwZS5zdGFydD1mdW5jdGlvbih0LGUpe3JldHVybiBzLmRlZmF1bHQuaXNEZWZpbmVkKGUpJiYoZT10aGlzLnRvVGlja3MoZSkpLHRoaXMuX2Nsb2NrLnN0YXJ0KHQsZSksdGhpc30scy5kZWZhdWx0LlRyYW5zcG9ydC5wcm90b3R5cGUuc3RvcD1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5fY2xvY2suc3RvcCh0KSx0aGlzfSxzLmRlZmF1bHQuVHJhbnNwb3J0LnByb3RvdHlwZS5wYXVzZT1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5fY2xvY2sucGF1c2UodCksdGhpc30scy5kZWZhdWx0LlRyYW5zcG9ydC5wcm90b3R5cGUudG9nZ2xlPWZ1bmN0aW9uKHQpe3JldHVybiB0PXRoaXMudG9TZWNvbmRzKHQpLHRoaXMuX2Nsb2NrLmdldFN0YXRlQXRUaW1lKHQpIT09cy5kZWZhdWx0LlN0YXRlLlN0YXJ0ZWQ/dGhpcy5zdGFydCh0KTp0aGlzLnN0b3AodCksdGhpc30sT2JqZWN0LmRlZmluZVByb3BlcnR5KHMuZGVmYXVsdC5UcmFuc3BvcnQucHJvdG90eXBlLFwidGltZVNpZ25hdHVyZVwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fdGltZVNpZ25hdHVyZX0sc2V0OmZ1bmN0aW9uKHQpe3MuZGVmYXVsdC5pc0FycmF5KHQpJiYodD10WzBdL3RbMV0qNCksdGhpcy5fdGltZVNpZ25hdHVyZT10fX0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShzLmRlZmF1bHQuVHJhbnNwb3J0LnByb3RvdHlwZSxcImxvb3BTdGFydFwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gcy5kZWZhdWx0LlRpY2tzKHRoaXMuX2xvb3BTdGFydCkudG9TZWNvbmRzKCl9LHNldDpmdW5jdGlvbih0KXt0aGlzLl9sb29wU3RhcnQ9dGhpcy50b1RpY2tzKHQpfX0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShzLmRlZmF1bHQuVHJhbnNwb3J0LnByb3RvdHlwZSxcImxvb3BFbmRcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHMuZGVmYXVsdC5UaWNrcyh0aGlzLl9sb29wRW5kKS50b1NlY29uZHMoKX0sc2V0OmZ1bmN0aW9uKHQpe3RoaXMuX2xvb3BFbmQ9dGhpcy50b1RpY2tzKHQpfX0pLHMuZGVmYXVsdC5UcmFuc3BvcnQucHJvdG90eXBlLnNldExvb3BQb2ludHM9ZnVuY3Rpb24odCxlKXtyZXR1cm4gdGhpcy5sb29wU3RhcnQ9dCx0aGlzLmxvb3BFbmQ9ZSx0aGlzfSxPYmplY3QuZGVmaW5lUHJvcGVydHkocy5kZWZhdWx0LlRyYW5zcG9ydC5wcm90b3R5cGUsXCJzd2luZ1wiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fc3dpbmdBbW91bnR9LHNldDpmdW5jdGlvbih0KXt0aGlzLl9zd2luZ0Ftb3VudD10fX0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShzLmRlZmF1bHQuVHJhbnNwb3J0LnByb3RvdHlwZSxcInN3aW5nU3ViZGl2aXNpb25cIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHMuZGVmYXVsdC5UaWNrcyh0aGlzLl9zd2luZ1RpY2tzKS50b05vdGF0aW9uKCl9LHNldDpmdW5jdGlvbih0KXt0aGlzLl9zd2luZ1RpY2tzPXRoaXMudG9UaWNrcyh0KX19KSxPYmplY3QuZGVmaW5lUHJvcGVydHkocy5kZWZhdWx0LlRyYW5zcG9ydC5wcm90b3R5cGUsXCJwb3NpdGlvblwiLHtnZXQ6ZnVuY3Rpb24oKXt2YXIgdD10aGlzLm5vdygpLGU9dGhpcy5fY2xvY2suZ2V0VGlja3NBdFRpbWUodCk7cmV0dXJuIHMuZGVmYXVsdC5UaWNrcyhlKS50b0JhcnNCZWF0c1NpeHRlZW50aHMoKX0sc2V0OmZ1bmN0aW9uKHQpe3ZhciBlPXRoaXMudG9UaWNrcyh0KTt0aGlzLnRpY2tzPWV9fSksT2JqZWN0LmRlZmluZVByb3BlcnR5KHMuZGVmYXVsdC5UcmFuc3BvcnQucHJvdG90eXBlLFwic2Vjb25kc1wiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fY2xvY2suc2Vjb25kc30sc2V0OmZ1bmN0aW9uKHQpe3ZhciBlPXRoaXMubm93KCksaT10aGlzLmJwbS50aW1lVG9UaWNrcyh0LGUpO3RoaXMudGlja3M9aX19KSxPYmplY3QuZGVmaW5lUHJvcGVydHkocy5kZWZhdWx0LlRyYW5zcG9ydC5wcm90b3R5cGUsXCJwcm9ncmVzc1wiLHtnZXQ6ZnVuY3Rpb24oKXtpZih0aGlzLmxvb3Ape3ZhciB0PXRoaXMubm93KCk7cmV0dXJuKHRoaXMuX2Nsb2NrLmdldFRpY2tzQXRUaW1lKHQpLXRoaXMuX2xvb3BTdGFydCkvKHRoaXMuX2xvb3BFbmQtdGhpcy5fbG9vcFN0YXJ0KX1yZXR1cm4gMH19KSxPYmplY3QuZGVmaW5lUHJvcGVydHkocy5kZWZhdWx0LlRyYW5zcG9ydC5wcm90b3R5cGUsXCJ0aWNrc1wiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fY2xvY2sudGlja3N9LHNldDpmdW5jdGlvbih0KXtpZih0aGlzLl9jbG9jay50aWNrcyE9PXQpe3ZhciBlPXRoaXMubm93KCk7dGhpcy5zdGF0ZT09PXMuZGVmYXVsdC5TdGF0ZS5TdGFydGVkPyh0aGlzLmVtaXQoXCJzdG9wXCIsZSksdGhpcy5fY2xvY2suc2V0VGlja3NBdFRpbWUodCxlKSx0aGlzLmVtaXQoXCJzdGFydFwiLGUsdGhpcy5zZWNvbmRzKSk6dGhpcy5fY2xvY2suc2V0VGlja3NBdFRpbWUodCxlKX19fSkscy5kZWZhdWx0LlRyYW5zcG9ydC5wcm90b3R5cGUuZ2V0VGlja3NBdFRpbWU9ZnVuY3Rpb24odCl7cmV0dXJuIE1hdGgucm91bmQodGhpcy5fY2xvY2suZ2V0VGlja3NBdFRpbWUodCkpfSxzLmRlZmF1bHQuVHJhbnNwb3J0LnByb3RvdHlwZS5nZXRTZWNvbmRzQXRUaW1lPWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLl9jbG9jay5nZXRTZWNvbmRzQXRUaW1lKHQpfSxPYmplY3QuZGVmaW5lUHJvcGVydHkocy5kZWZhdWx0LlRyYW5zcG9ydC5wcm90b3R5cGUsXCJQUFFcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3BwcX0sc2V0OmZ1bmN0aW9uKHQpe3ZhciBlPXRoaXMuYnBtLnZhbHVlO3RoaXMuX3BwcT10LHRoaXMuYnBtLnZhbHVlPWV9fSkscy5kZWZhdWx0LlRyYW5zcG9ydC5wcm90b3R5cGUuX2Zyb21Vbml0cz1mdW5jdGlvbih0KXtyZXR1cm4gMS8oNjAvdC90aGlzLlBQUSl9LHMuZGVmYXVsdC5UcmFuc3BvcnQucHJvdG90eXBlLl90b1VuaXRzPWZ1bmN0aW9uKHQpe3JldHVybiB0L3RoaXMuUFBRKjYwfSxzLmRlZmF1bHQuVHJhbnNwb3J0LnByb3RvdHlwZS5uZXh0U3ViZGl2aXNpb249ZnVuY3Rpb24odCl7aWYodD10aGlzLnRvVGlja3ModCksdGhpcy5zdGF0ZSE9PXMuZGVmYXVsdC5TdGF0ZS5TdGFydGVkKXJldHVybiAwO3ZhciBlPXRoaXMubm93KCksaT10LXRoaXMuZ2V0VGlja3NBdFRpbWUoZSkldDtyZXR1cm4gdGhpcy5fY2xvY2submV4dFRpY2tUaW1lKGksZSl9LHMuZGVmYXVsdC5UcmFuc3BvcnQucHJvdG90eXBlLnN5bmNTaWduYWw9ZnVuY3Rpb24odCxlKXtpZighZSl7dmFyIGk9dGhpcy5ub3coKTtlPTAhPT10LmdldFZhbHVlQXRUaW1lKGkpP3QuZ2V0VmFsdWVBdFRpbWUoaSkvdGhpcy5icG0uZ2V0VmFsdWVBdFRpbWUoaSk6MH12YXIgbj1uZXcgcy5kZWZhdWx0LkdhaW4oZSk7cmV0dXJuIHRoaXMuYnBtLmNoYWluKG4sdC5fcGFyYW0pLHRoaXMuX3N5bmNlZFNpZ25hbHMucHVzaCh7cmF0aW86bixzaWduYWw6dCxpbml0aWFsOnQudmFsdWV9KSx0LnZhbHVlPTAsdGhpc30scy5kZWZhdWx0LlRyYW5zcG9ydC5wcm90b3R5cGUudW5zeW5jU2lnbmFsPWZ1bmN0aW9uKHQpe2Zvcih2YXIgZT10aGlzLl9zeW5jZWRTaWduYWxzLmxlbmd0aC0xO2U+PTA7ZS0tKXt2YXIgaT10aGlzLl9zeW5jZWRTaWduYWxzW2VdO2kuc2lnbmFsPT09dCYmKGkucmF0aW8uZGlzcG9zZSgpLGkuc2lnbmFsLnZhbHVlPWkuaW5pdGlhbCx0aGlzLl9zeW5jZWRTaWduYWxzLnNwbGljZShlLDEpKX1yZXR1cm4gdGhpc30scy5kZWZhdWx0LlRyYW5zcG9ydC5wcm90b3R5cGUuZGlzcG9zZT1mdW5jdGlvbigpe3JldHVybiBzLmRlZmF1bHQuRW1pdHRlci5wcm90b3R5cGUuZGlzcG9zZS5jYWxsKHRoaXMpLHRoaXMuX2Nsb2NrLmRpc3Bvc2UoKSx0aGlzLl9jbG9jaz1udWxsLHRoaXMuX3dyaXRhYmxlKFwiYnBtXCIpLHRoaXMuYnBtPW51bGwsdGhpcy5fdGltZWxpbmUuZGlzcG9zZSgpLHRoaXMuX3RpbWVsaW5lPW51bGwsdGhpcy5fcmVwZWF0ZWRFdmVudHMuZGlzcG9zZSgpLHRoaXMuX3JlcGVhdGVkRXZlbnRzPW51bGwsdGhpc307dmFyIG49cy5kZWZhdWx0LlRyYW5zcG9ydDtzLmRlZmF1bHQuVHJhbnNwb3J0PW5ldyBuLHMuZGVmYXVsdC5Db250ZXh0Lm9uKFwiaW5pdFwiLGZ1bmN0aW9uKHQpe3QudHJhbnNwb3J0JiZ0LnRyYW5zcG9ydC5pc1RyYW5zcG9ydD9zLmRlZmF1bHQuVHJhbnNwb3J0PXQudHJhbnNwb3J0OnMuZGVmYXVsdC5UcmFuc3BvcnQ9bmV3IG59KSxzLmRlZmF1bHQuQ29udGV4dC5vbihcImNsb3NlXCIsZnVuY3Rpb24odCl7dC50cmFuc3BvcnQmJnQudHJhbnNwb3J0LmlzVHJhbnNwb3J0JiZ0LnRyYW5zcG9ydC5kaXNwb3NlKCl9KSxlLmRlZmF1bHQ9cy5kZWZhdWx0LlRyYW5zcG9ydH0sZnVuY3Rpb24odCxlLGkpe1widXNlIHN0cmljdFwiO2kucihlKTt2YXIgcz1pKDApO2koMiksaSg2KSxpKDE2KSxpKDY0KTtzLmRlZmF1bHQuT3NjaWxsYXRvcj1mdW5jdGlvbigpe3ZhciB0PXMuZGVmYXVsdC5kZWZhdWx0cyhhcmd1bWVudHMsW1wiZnJlcXVlbmN5XCIsXCJ0eXBlXCJdLHMuZGVmYXVsdC5Pc2NpbGxhdG9yKTtzLmRlZmF1bHQuU291cmNlLmNhbGwodGhpcyx0KSx0aGlzLl9vc2NpbGxhdG9yPW51bGwsdGhpcy5mcmVxdWVuY3k9bmV3IHMuZGVmYXVsdC5TaWduYWwodC5mcmVxdWVuY3kscy5kZWZhdWx0LlR5cGUuRnJlcXVlbmN5KSx0aGlzLmRldHVuZT1uZXcgcy5kZWZhdWx0LlNpZ25hbCh0LmRldHVuZSxzLmRlZmF1bHQuVHlwZS5DZW50cyksdGhpcy5fd2F2ZT1udWxsLHRoaXMuX3BhcnRpYWxzPXQucGFydGlhbHMsdGhpcy5fcGFydGlhbENvdW50PXQucGFydGlhbENvdW50LHRoaXMuX3BoYXNlPXQucGhhc2UsdGhpcy5fdHlwZT10LnR5cGUsdC5wYXJ0aWFsQ291bnQmJnQudHlwZSE9PXMuZGVmYXVsdC5Pc2NpbGxhdG9yLlR5cGUuQ3VzdG9tJiYodGhpcy5fdHlwZT10aGlzLmJhc2VUeXBlK3QucGFydGlhbENvdW50LnRvU3RyaW5nKCkpLHRoaXMucGhhc2U9dGhpcy5fcGhhc2UsdGhpcy5fcmVhZE9ubHkoW1wiZnJlcXVlbmN5XCIsXCJkZXR1bmVcIl0pfSxzLmRlZmF1bHQuZXh0ZW5kKHMuZGVmYXVsdC5Pc2NpbGxhdG9yLHMuZGVmYXVsdC5Tb3VyY2UpLHMuZGVmYXVsdC5Pc2NpbGxhdG9yLmRlZmF1bHRzPXt0eXBlOlwic2luZVwiLGZyZXF1ZW5jeTo0NDAsZGV0dW5lOjAscGhhc2U6MCxwYXJ0aWFsczpbXSxwYXJ0aWFsQ291bnQ6MH0scy5kZWZhdWx0Lk9zY2lsbGF0b3IuVHlwZT17U2luZTpcInNpbmVcIixUcmlhbmdsZTpcInRyaWFuZ2xlXCIsU2F3dG9vdGg6XCJzYXd0b290aFwiLFNxdWFyZTpcInNxdWFyZVwiLEN1c3RvbTpcImN1c3RvbVwifSxzLmRlZmF1bHQuT3NjaWxsYXRvci5wcm90b3R5cGUuX3N0YXJ0PWZ1bmN0aW9uKHQpe3RoaXMubG9nKFwic3RhcnRcIix0KTt2YXIgZT1uZXcgcy5kZWZhdWx0Lk9zY2lsbGF0b3JOb2RlO3RoaXMuX29zY2lsbGF0b3I9ZSx0aGlzLl93YXZlP3RoaXMuX29zY2lsbGF0b3Iuc2V0UGVyaW9kaWNXYXZlKHRoaXMuX3dhdmUpOnRoaXMuX29zY2lsbGF0b3IudHlwZT10aGlzLl90eXBlLHRoaXMuX29zY2lsbGF0b3IuY29ubmVjdCh0aGlzLm91dHB1dCksdGhpcy5mcmVxdWVuY3kuY29ubmVjdCh0aGlzLl9vc2NpbGxhdG9yLmZyZXF1ZW5jeSksdGhpcy5kZXR1bmUuY29ubmVjdCh0aGlzLl9vc2NpbGxhdG9yLmRldHVuZSksdD10aGlzLnRvU2Vjb25kcyh0KSx0aGlzLl9vc2NpbGxhdG9yLnN0YXJ0KHQpfSxzLmRlZmF1bHQuT3NjaWxsYXRvci5wcm90b3R5cGUuX3N0b3A9ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMubG9nKFwic3RvcFwiLHQpLHRoaXMuX29zY2lsbGF0b3ImJih0PXRoaXMudG9TZWNvbmRzKHQpLHRoaXMuX29zY2lsbGF0b3Iuc3RvcCh0KSksdGhpc30scy5kZWZhdWx0Lk9zY2lsbGF0b3IucHJvdG90eXBlLnJlc3RhcnQ9ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuX29zY2lsbGF0b3ImJnRoaXMuX29zY2lsbGF0b3IuY2FuY2VsU3RvcCgpLHRoaXMuX3N0YXRlLmNhbmNlbCh0aGlzLnRvU2Vjb25kcyh0KSksdGhpc30scy5kZWZhdWx0Lk9zY2lsbGF0b3IucHJvdG90eXBlLnN5bmNGcmVxdWVuY3k9ZnVuY3Rpb24oKXtyZXR1cm4gcy5kZWZhdWx0LlRyYW5zcG9ydC5zeW5jU2lnbmFsKHRoaXMuZnJlcXVlbmN5KSx0aGlzfSxzLmRlZmF1bHQuT3NjaWxsYXRvci5wcm90b3R5cGUudW5zeW5jRnJlcXVlbmN5PWZ1bmN0aW9uKCl7cmV0dXJuIHMuZGVmYXVsdC5UcmFuc3BvcnQudW5zeW5jU2lnbmFsKHRoaXMuZnJlcXVlbmN5KSx0aGlzfSxPYmplY3QuZGVmaW5lUHJvcGVydHkocy5kZWZhdWx0Lk9zY2lsbGF0b3IucHJvdG90eXBlLFwidHlwZVwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fdHlwZX0sc2V0OmZ1bmN0aW9uKHQpe3ZhciBlPVtzLmRlZmF1bHQuT3NjaWxsYXRvci5UeXBlLlNpbmUscy5kZWZhdWx0Lk9zY2lsbGF0b3IuVHlwZS5TcXVhcmUscy5kZWZhdWx0Lk9zY2lsbGF0b3IuVHlwZS5UcmlhbmdsZSxzLmRlZmF1bHQuT3NjaWxsYXRvci5UeXBlLlNhd3Rvb3RoXS5pbmNsdWRlcyh0KTtpZigwPT09dGhpcy5fcGhhc2UmJmUpdGhpcy5fd2F2ZT1udWxsLHRoaXMuX3BhcnRpYWxDb3VudD0wLG51bGwhPT10aGlzLl9vc2NpbGxhdG9yJiYodGhpcy5fb3NjaWxsYXRvci50eXBlPXQpO2Vsc2V7dmFyIGk9dGhpcy5fZ2V0UmVhbEltYWdpbmFyeSh0LHRoaXMuX3BoYXNlKSxuPXRoaXMuY29udGV4dC5jcmVhdGVQZXJpb2RpY1dhdmUoaVswXSxpWzFdKTt0aGlzLl93YXZlPW4sbnVsbCE9PXRoaXMuX29zY2lsbGF0b3ImJnRoaXMuX29zY2lsbGF0b3Iuc2V0UGVyaW9kaWNXYXZlKHRoaXMuX3dhdmUpfXRoaXMuX3R5cGU9dH19KSxPYmplY3QuZGVmaW5lUHJvcGVydHkocy5kZWZhdWx0Lk9zY2lsbGF0b3IucHJvdG90eXBlLFwiYmFzZVR5cGVcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3R5cGUucmVwbGFjZSh0aGlzLnBhcnRpYWxDb3VudCxcIlwiKX0sc2V0OmZ1bmN0aW9uKHQpe3RoaXMucGFydGlhbENvdW50JiZ0aGlzLl90eXBlIT09cy5kZWZhdWx0Lk9zY2lsbGF0b3IuVHlwZS5DdXN0b20mJnQhPT1zLmRlZmF1bHQuT3NjaWxsYXRvci5UeXBlLkN1c3RvbT90aGlzLnR5cGU9dCt0aGlzLnBhcnRpYWxDb3VudDp0aGlzLnR5cGU9dH19KSxPYmplY3QuZGVmaW5lUHJvcGVydHkocy5kZWZhdWx0Lk9zY2lsbGF0b3IucHJvdG90eXBlLFwicGFydGlhbENvdW50XCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9wYXJ0aWFsQ291bnR9LHNldDpmdW5jdGlvbih0KXt2YXIgZT10aGlzLl90eXBlLGk9L14oc2luZXx0cmlhbmdsZXxzcXVhcmV8c2F3dG9vdGgpKFxcZCspJC8uZXhlYyh0aGlzLl90eXBlKTtpJiYoZT1pWzFdKSx0aGlzLl90eXBlIT09cy5kZWZhdWx0Lk9zY2lsbGF0b3IuVHlwZS5DdXN0b20mJih0aGlzLnR5cGU9MD09PXQ/ZTplK3QudG9TdHJpbmcoKSl9fSkscy5kZWZhdWx0Lk9zY2lsbGF0b3IucHJvdG90eXBlLmdldD1mdW5jdGlvbigpe3ZhciB0PXMuZGVmYXVsdC5wcm90b3R5cGUuZ2V0LmFwcGx5KHRoaXMsYXJndW1lbnRzKTtyZXR1cm4gdC50eXBlIT09cy5kZWZhdWx0Lk9zY2lsbGF0b3IuVHlwZS5DdXN0b20mJmRlbGV0ZSB0LnBhcnRpYWxzLHR9LHMuZGVmYXVsdC5Pc2NpbGxhdG9yLnByb3RvdHlwZS5fZ2V0UmVhbEltYWdpbmFyeT1mdW5jdGlvbih0LGUpe3ZhciBpPTIwNDgsbj1uZXcgRmxvYXQzMkFycmF5KGkpLG89bmV3IEZsb2F0MzJBcnJheShpKSxhPTE7aWYodD09PXMuZGVmYXVsdC5Pc2NpbGxhdG9yLlR5cGUuQ3VzdG9tKWE9dGhpcy5fcGFydGlhbHMubGVuZ3RoKzEsdGhpcy5fcGFydGlhbENvdW50PXRoaXMuX3BhcnRpYWxzLmxlbmd0aCxpPWE7ZWxzZXt2YXIgcj0vXihzaW5lfHRyaWFuZ2xlfHNxdWFyZXxzYXd0b290aCkoXFxkKykkLy5leGVjKHQpO3I/KGE9cGFyc2VJbnQoclsyXSkrMSx0aGlzLl9wYXJ0aWFsQ291bnQ9cGFyc2VJbnQoclsyXSksdD1yWzFdLGk9YT1NYXRoLm1heChhLDIpKTp0aGlzLl9wYXJ0aWFsQ291bnQ9MCx0aGlzLl9wYXJ0aWFscz1bXX1mb3IodmFyIGw9MTtsPGk7KytsKXt2YXIgdSxkPTIvKGwqTWF0aC5QSSk7c3dpdGNoKHQpe2Nhc2Ugcy5kZWZhdWx0Lk9zY2lsbGF0b3IuVHlwZS5TaW5lOnU9bDw9YT8xOjAsdGhpcy5fcGFydGlhbHNbbC0xXT11O2JyZWFrO2Nhc2Ugcy5kZWZhdWx0Lk9zY2lsbGF0b3IuVHlwZS5TcXVhcmU6dT0xJmw/MipkOjAsdGhpcy5fcGFydGlhbHNbbC0xXT11O2JyZWFrO2Nhc2Ugcy5kZWZhdWx0Lk9zY2lsbGF0b3IuVHlwZS5TYXd0b290aDp1PWQqKDEmbD8xOi0xKSx0aGlzLl9wYXJ0aWFsc1tsLTFdPXU7YnJlYWs7Y2FzZSBzLmRlZmF1bHQuT3NjaWxsYXRvci5UeXBlLlRyaWFuZ2xlOnU9MSZsP2QqZCoyKihsLTE+PjEmMT8tMToxKTowLHRoaXMuX3BhcnRpYWxzW2wtMV09dTticmVhaztjYXNlIHMuZGVmYXVsdC5Pc2NpbGxhdG9yLlR5cGUuQ3VzdG9tOnU9dGhpcy5fcGFydGlhbHNbbC0xXTticmVhaztkZWZhdWx0OnRocm93IG5ldyBUeXBlRXJyb3IoXCJUb25lLk9zY2lsbGF0b3I6IGludmFsaWQgdHlwZTogXCIrdCl9MCE9PXU/KG5bbF09LXUqTWF0aC5zaW4oZSpsKSxvW2xdPXUqTWF0aC5jb3MoZSpsKSk6KG5bbF09MCxvW2xdPTApfXJldHVybltuLG9dfSxzLmRlZmF1bHQuT3NjaWxsYXRvci5wcm90b3R5cGUuX2ludmVyc2VGRlQ9ZnVuY3Rpb24odCxlLGkpe2Zvcih2YXIgcz0wLG49dC5sZW5ndGgsbz0wO288bjtvKyspcys9dFtvXSpNYXRoLmNvcyhvKmkpK2Vbb10qTWF0aC5zaW4obyppKTtyZXR1cm4gc30scy5kZWZhdWx0Lk9zY2lsbGF0b3IucHJvdG90eXBlLl9nZXRJbml0aWFsVmFsdWU9ZnVuY3Rpb24oKXtmb3IodmFyIHQ9dGhpcy5fZ2V0UmVhbEltYWdpbmFyeSh0aGlzLl90eXBlLDApLGU9dFswXSxpPXRbMV0scz0wLG49MipNYXRoLlBJLG89MDtvPDg7bysrKXM9TWF0aC5tYXgodGhpcy5faW52ZXJzZUZGVChlLGksby84Km4pLHMpO3JldHVybi10aGlzLl9pbnZlcnNlRkZUKGUsaSx0aGlzLl9waGFzZSkvc30sT2JqZWN0LmRlZmluZVByb3BlcnR5KHMuZGVmYXVsdC5Pc2NpbGxhdG9yLnByb3RvdHlwZSxcInBhcnRpYWxzXCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9wYXJ0aWFsc30sc2V0OmZ1bmN0aW9uKHQpe3RoaXMuX3BhcnRpYWxzPXQsdGhpcy50eXBlPXMuZGVmYXVsdC5Pc2NpbGxhdG9yLlR5cGUuQ3VzdG9tfX0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShzLmRlZmF1bHQuT3NjaWxsYXRvci5wcm90b3R5cGUsXCJwaGFzZVwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fcGhhc2UqKDE4MC9NYXRoLlBJKX0sc2V0OmZ1bmN0aW9uKHQpe3RoaXMuX3BoYXNlPXQqTWF0aC5QSS8xODAsdGhpcy50eXBlPXRoaXMuX3R5cGV9fSkscy5kZWZhdWx0Lk9zY2lsbGF0b3IucHJvdG90eXBlLmRpc3Bvc2U9ZnVuY3Rpb24oKXtyZXR1cm4gcy5kZWZhdWx0LlNvdXJjZS5wcm90b3R5cGUuZGlzcG9zZS5jYWxsKHRoaXMpLG51bGwhPT10aGlzLl9vc2NpbGxhdG9yJiYodGhpcy5fb3NjaWxsYXRvci5kaXNwb3NlKCksdGhpcy5fb3NjaWxsYXRvcj1udWxsKSx0aGlzLl93YXZlPW51bGwsdGhpcy5fd3JpdGFibGUoW1wiZnJlcXVlbmN5XCIsXCJkZXR1bmVcIl0pLHRoaXMuZnJlcXVlbmN5LmRpc3Bvc2UoKSx0aGlzLmZyZXF1ZW5jeT1udWxsLHRoaXMuZGV0dW5lLmRpc3Bvc2UoKSx0aGlzLmRldHVuZT1udWxsLHRoaXMuX3BhcnRpYWxzPW51bGwsdGhpc30sZS5kZWZhdWx0PXMuZGVmYXVsdC5Pc2NpbGxhdG9yfSxmdW5jdGlvbih0LGUsaSl7XCJ1c2Ugc3RyaWN0XCI7aS5yKGUpO3ZhciBzPWkoMCk7aSgxNCksaSgxKTtzLmRlZmF1bHQuRGVsYXk9ZnVuY3Rpb24oKXt2YXIgdD1zLmRlZmF1bHQuZGVmYXVsdHMoYXJndW1lbnRzLFtcImRlbGF5VGltZVwiLFwibWF4RGVsYXlcIl0scy5kZWZhdWx0LkRlbGF5KTtzLmRlZmF1bHQuQXVkaW9Ob2RlLmNhbGwodGhpcyx0KSx0aGlzLl9tYXhEZWxheT1NYXRoLm1heCh0aGlzLnRvU2Vjb25kcyh0Lm1heERlbGF5KSx0aGlzLnRvU2Vjb25kcyh0LmRlbGF5VGltZSkpLHRoaXMuX2RlbGF5Tm9kZT10aGlzLmlucHV0PXRoaXMub3V0cHV0PXRoaXMuY29udGV4dC5jcmVhdGVEZWxheSh0aGlzLl9tYXhEZWxheSksdGhpcy5kZWxheVRpbWU9bmV3IHMuZGVmYXVsdC5QYXJhbSh7cGFyYW06dGhpcy5fZGVsYXlOb2RlLmRlbGF5VGltZSx1bml0czpzLmRlZmF1bHQuVHlwZS5UaW1lLHZhbHVlOnQuZGVsYXlUaW1lfSksdGhpcy5fcmVhZE9ubHkoXCJkZWxheVRpbWVcIil9LHMuZGVmYXVsdC5leHRlbmQocy5kZWZhdWx0LkRlbGF5LHMuZGVmYXVsdC5BdWRpb05vZGUpLHMuZGVmYXVsdC5EZWxheS5kZWZhdWx0cz17bWF4RGVsYXk6MSxkZWxheVRpbWU6MH0sT2JqZWN0LmRlZmluZVByb3BlcnR5KHMuZGVmYXVsdC5EZWxheS5wcm90b3R5cGUsXCJtYXhEZWxheVwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fbWF4RGVsYXl9fSkscy5kZWZhdWx0LkRlbGF5LnByb3RvdHlwZS5kaXNwb3NlPWZ1bmN0aW9uKCl7cmV0dXJuIHMuZGVmYXVsdC5BdWRpb05vZGUucHJvdG90eXBlLmRpc3Bvc2UuY2FsbCh0aGlzKSx0aGlzLl9kZWxheU5vZGUuZGlzY29ubmVjdCgpLHRoaXMuX2RlbGF5Tm9kZT1udWxsLHRoaXMuX3dyaXRhYmxlKFwiZGVsYXlUaW1lXCIpLHRoaXMuZGVsYXlUaW1lPW51bGwsdGhpc30sZS5kZWZhdWx0PXMuZGVmYXVsdC5EZWxheX0sZnVuY3Rpb24odCxlLGkpe1widXNlIHN0cmljdFwiO2kucihlKTt2YXIgcz1pKDApO2koMyksaSgxKTtzLmRlZmF1bHQuU3BsaXQ9ZnVuY3Rpb24odCl7dD1zLmRlZmF1bHQuZGVmYXVsdEFyZyh0LDIpLHMuZGVmYXVsdC5BdWRpb05vZGUuY2FsbCh0aGlzKSx0aGlzLmNyZWF0ZUluc091dHMoMCx0KSx0aGlzLl9zcGxpdHRlcj10aGlzLmlucHV0PXRoaXMuY29udGV4dC5jcmVhdGVDaGFubmVsU3BsaXR0ZXIodCk7Zm9yKHZhciBlPTA7ZTx0O2UrKyl0aGlzLm91dHB1dFtlXT1uZXcgcy5kZWZhdWx0LkdhaW4scy5kZWZhdWx0LmNvbm5lY3QodGhpcy5fc3BsaXR0ZXIsdGhpcy5vdXRwdXRbZV0sZSwwKSx0aGlzLm91dHB1dFtlXS5jaGFubmVsQ291bnQ9MSx0aGlzLm91dHB1dFtlXS5jaGFubmVsQ291bnRNb2RlPVwiZXhwbGljaXRcIjt0aGlzLmxlZnQ9dGhpcy5vdXRwdXRbMF0sdGhpcy5yaWdodD10aGlzLm91dHB1dFsxXX0scy5kZWZhdWx0LmV4dGVuZChzLmRlZmF1bHQuU3BsaXQscy5kZWZhdWx0LkF1ZGlvTm9kZSkscy5kZWZhdWx0LlNwbGl0LnByb3RvdHlwZS5kaXNwb3NlPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMub3V0cHV0LmZvckVhY2goZnVuY3Rpb24odCl7dC5kaXNwb3NlKCl9KSxzLmRlZmF1bHQuQXVkaW9Ob2RlLnByb3RvdHlwZS5kaXNwb3NlLmNhbGwodGhpcyksdGhpcy5fc3BsaXR0ZXIuZGlzY29ubmVjdCgpLHRoaXMubGVmdD1udWxsLHRoaXMucmlnaHQ9bnVsbCx0aGlzLl9zcGxpdHRlcj1udWxsLHRoaXN9LGUuZGVmYXVsdD1zLmRlZmF1bHQuU3BsaXR9LGZ1bmN0aW9uKHQsZSxpKXtcInVzZSBzdHJpY3RcIjtpLnIoZSk7dmFyIHM9aSgwKSxuPShpKDM1KSxpKDI0KSxpKDQ0KSxbXCJiYXNlTGF0ZW5jeVwiLFwiZGVzdGluYXRpb25cIixcImN1cnJlbnRUaW1lXCIsXCJzYW1wbGVSYXRlXCIsXCJsaXN0ZW5lclwiLFwic3RhdGVcIl0pLG89W1wic3VzcGVuZFwiLFwiY2xvc2VcIixcInJlc3VtZVwiLFwiZ2V0T3V0cHV0VGltZXN0YW1wXCIsXCJjcmVhdGVNZWRpYUVsZW1lbnRTb3VyY2VcIixcImNyZWF0ZU1lZGlhU3RyZWFtU291cmNlXCIsXCJjcmVhdGVNZWRpYVN0cmVhbURlc3RpbmF0aW9uXCIsXCJjcmVhdGVCdWZmZXJcIixcImRlY29kZUF1ZGlvRGF0YVwiLFwiY3JlYXRlQnVmZmVyU291cmNlXCIsXCJjcmVhdGVDb25zdGFudFNvdXJjZVwiLFwiY3JlYXRlR2FpblwiLFwiY3JlYXRlRGVsYXlcIixcImNyZWF0ZUJpcXVhZEZpbHRlclwiLFwiY3JlYXRlSUlSRmlsdGVyXCIsXCJjcmVhdGVXYXZlU2hhcGVyXCIsXCJjcmVhdGVQYW5uZXJcIixcImNyZWF0ZUNvbnZvbHZlclwiLFwiY3JlYXRlRHluYW1pY3NDb21wcmVzc29yXCIsXCJjcmVhdGVBbmFseXNlclwiLFwiY3JlYXRlU2NyaXB0UHJvY2Vzc29yXCIsXCJjcmVhdGVTdGVyZW9QYW5uZXJcIixcImNyZWF0ZU9zY2lsbGF0b3JcIixcImNyZWF0ZVBlcmlvZGljV2F2ZVwiLFwiY3JlYXRlQ2hhbm5lbFNwbGl0dGVyXCIsXCJjcmVhdGVDaGFubmVsTWVyZ2VyXCIsXCJhdWRpb1dvcmtsZXRcIl07cy5kZWZhdWx0LkNvbnRleHQ9ZnVuY3Rpb24oKXtzLmRlZmF1bHQuRW1pdHRlci5jYWxsKHRoaXMpO3ZhciB0PXMuZGVmYXVsdC5kZWZhdWx0cyhhcmd1bWVudHMsW1wiY29udGV4dFwiXSxzLmRlZmF1bHQuQ29udGV4dCk7aWYoIXQuY29udGV4dCYmKHQuY29udGV4dD1uZXcgcy5kZWZhdWx0Lmdsb2JhbC5BdWRpb0NvbnRleHQsIXQuY29udGV4dCkpdGhyb3cgbmV3IEVycm9yKFwiY291bGQgbm90IGNyZWF0ZSBBdWRpb0NvbnRleHQuIFBvc3NpYmx5IHRvbyBtYW55IEF1ZGlvQ29udGV4dHMgcnVubmluZyBhbHJlYWR5LlwiKTtmb3IodGhpcy5fY29udGV4dD10LmNvbnRleHQ7dGhpcy5fY29udGV4dC5yYXdDb250ZXh0Oyl0aGlzLl9jb250ZXh0PXRoaXMuX2NvbnRleHQucmF3Q29udGV4dDtuLmZvckVhY2goZnVuY3Rpb24odCl7dGhpcy5fZGVmaW5lUHJvcGVydHkodGhpcy5fY29udGV4dCx0KX0uYmluZCh0aGlzKSksby5mb3JFYWNoKGZ1bmN0aW9uKHQpe3RoaXMuX2RlZmluZU1ldGhvZCh0aGlzLl9jb250ZXh0LHQpfS5iaW5kKHRoaXMpKSx0aGlzLl9sYXRlbmN5SGludD10LmxhdGVuY3lIaW50LHRoaXMuX2NvbnN0YW50cz17fSx0aGlzLmxvb2tBaGVhZD10Lmxvb2tBaGVhZCx0aGlzLl9jb21wdXRlZFVwZGF0ZUludGVydmFsPTAsdGhpcy5fdGlja2VyPW5ldyBhKHRoaXMuZW1pdC5iaW5kKHRoaXMsXCJ0aWNrXCIpLHQuY2xvY2tTb3VyY2UsdC51cGRhdGVJbnRlcnZhbCksdGhpcy5fdGltZW91dHM9bmV3IHMuZGVmYXVsdC5UaW1lbGluZSx0aGlzLl90aW1lb3V0SWRzPTAsdGhpcy5vbihcInRpY2tcIix0aGlzLl90aW1lb3V0TG9vcC5iaW5kKHRoaXMpKSx0aGlzLl9jb250ZXh0Lm9uc3RhdGVjaGFuZ2U9ZnVuY3Rpb24odCl7dGhpcy5lbWl0KFwic3RhdGVjaGFuZ2VcIix0KX0uYmluZCh0aGlzKX0scy5kZWZhdWx0LmV4dGVuZChzLmRlZmF1bHQuQ29udGV4dCxzLmRlZmF1bHQuRW1pdHRlcikscy5kZWZhdWx0LkVtaXR0ZXIubWl4aW4ocy5kZWZhdWx0LkNvbnRleHQpLHMuZGVmYXVsdC5Db250ZXh0LmRlZmF1bHRzPXtjbG9ja1NvdXJjZTpcIndvcmtlclwiLGxhdGVuY3lIaW50OlwiaW50ZXJhY3RpdmVcIixsb29rQWhlYWQ6LjEsdXBkYXRlSW50ZXJ2YWw6LjAzfSxzLmRlZmF1bHQuQ29udGV4dC5wcm90b3R5cGUuaXNDb250ZXh0PSEwLHMuZGVmYXVsdC5Db250ZXh0LnByb3RvdHlwZS5fZGVmaW5lUHJvcGVydHk9ZnVuY3Rpb24odCxlKXtzLmRlZmF1bHQuaXNVbmRlZih0aGlzW2VdKSYmT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsZSx7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRbZV19LHNldDpmdW5jdGlvbihpKXt0W2VdPWl9fSl9LHMuZGVmYXVsdC5Db250ZXh0LnByb3RvdHlwZS5fZGVmaW5lTWV0aG9kPWZ1bmN0aW9uKHQsZSl7cy5kZWZhdWx0LmlzVW5kZWYodGhpc1tlXSkmJk9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLGUse2dldDpmdW5jdGlvbigpe3JldHVybiB0W2VdLmJpbmQodCl9fSl9LHMuZGVmYXVsdC5Db250ZXh0LnByb3RvdHlwZS5ub3c9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fY29udGV4dC5jdXJyZW50VGltZSt0aGlzLmxvb2tBaGVhZH0sT2JqZWN0LmRlZmluZVByb3BlcnR5KHMuZGVmYXVsdC5Db250ZXh0LnByb3RvdHlwZSxcImRlc3RpbmF0aW9uXCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLm1hc3Rlcj90aGlzLm1hc3Rlcjp0aGlzLl9jb250ZXh0LmRlc3RpbmF0aW9ufX0pLHMuZGVmYXVsdC5Db250ZXh0LnByb3RvdHlwZS5yZXN1bWU9ZnVuY3Rpb24oKXtyZXR1cm5cInN1c3BlbmRlZFwiPT09dGhpcy5fY29udGV4dC5zdGF0ZSYmdGhpcy5fY29udGV4dCBpbnN0YW5jZW9mIEF1ZGlvQ29udGV4dD90aGlzLl9jb250ZXh0LnJlc3VtZSgpOlByb21pc2UucmVzb2x2ZSgpfSxzLmRlZmF1bHQuQ29udGV4dC5wcm90b3R5cGUuY2xvc2U9ZnVuY3Rpb24oKXt2YXIgdD1Qcm9taXNlLnJlc29sdmUoKTtyZXR1cm4gdGhpcyE9PXMuZGVmYXVsdC5nbG9iYWwuVE9ORV9BVURJT19DT05URVhUJiYodD10aGlzLnJhd0NvbnRleHQuY2xvc2UoKSksdC50aGVuKGZ1bmN0aW9uKCl7cy5kZWZhdWx0LkNvbnRleHQuZW1pdChcImNsb3NlXCIsdGhpcyl9LmJpbmQodGhpcykpfSxzLmRlZmF1bHQuQ29udGV4dC5wcm90b3R5cGUuZ2V0Q29uc3RhbnQ9ZnVuY3Rpb24odCl7aWYodGhpcy5fY29uc3RhbnRzW3RdKXJldHVybiB0aGlzLl9jb25zdGFudHNbdF07Zm9yKHZhciBlPXRoaXMuX2NvbnRleHQuY3JlYXRlQnVmZmVyKDEsMTI4LHRoaXMuX2NvbnRleHQuc2FtcGxlUmF0ZSksaT1lLmdldENoYW5uZWxEYXRhKDApLHM9MDtzPGkubGVuZ3RoO3MrKylpW3NdPXQ7dmFyIG49dGhpcy5fY29udGV4dC5jcmVhdGVCdWZmZXJTb3VyY2UoKTtyZXR1cm4gbi5jaGFubmVsQ291bnQ9MSxuLmNoYW5uZWxDb3VudE1vZGU9XCJleHBsaWNpdFwiLG4uYnVmZmVyPWUsbi5sb29wPSEwLG4uc3RhcnQoMCksdGhpcy5fY29uc3RhbnRzW3RdPW4sbn0scy5kZWZhdWx0LkNvbnRleHQucHJvdG90eXBlLl90aW1lb3V0TG9vcD1mdW5jdGlvbigpe2Zvcih2YXIgdD10aGlzLm5vdygpO3RoaXMuX3RpbWVvdXRzJiZ0aGlzLl90aW1lb3V0cy5sZW5ndGgmJnRoaXMuX3RpbWVvdXRzLnBlZWsoKS50aW1lPD10Oyl0aGlzLl90aW1lb3V0cy5zaGlmdCgpLmNhbGxiYWNrKCl9LHMuZGVmYXVsdC5Db250ZXh0LnByb3RvdHlwZS5zZXRUaW1lb3V0PWZ1bmN0aW9uKHQsZSl7dGhpcy5fdGltZW91dElkcysrO3ZhciBpPXRoaXMubm93KCk7cmV0dXJuIHRoaXMuX3RpbWVvdXRzLmFkZCh7Y2FsbGJhY2s6dCx0aW1lOmkrZSxpZDp0aGlzLl90aW1lb3V0SWRzfSksdGhpcy5fdGltZW91dElkc30scy5kZWZhdWx0LkNvbnRleHQucHJvdG90eXBlLmNsZWFyVGltZW91dD1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5fdGltZW91dHMuZm9yRWFjaChmdW5jdGlvbihlKXtlLmlkPT09dCYmdGhpcy5yZW1vdmUoZSl9KSx0aGlzfSxPYmplY3QuZGVmaW5lUHJvcGVydHkocy5kZWZhdWx0LkNvbnRleHQucHJvdG90eXBlLFwidXBkYXRlSW50ZXJ2YWxcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3RpY2tlci51cGRhdGVJbnRlcnZhbH0sc2V0OmZ1bmN0aW9uKHQpe3RoaXMuX3RpY2tlci51cGRhdGVJbnRlcnZhbD10fX0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShzLmRlZmF1bHQuQ29udGV4dC5wcm90b3R5cGUsXCJyYXdDb250ZXh0XCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9jb250ZXh0fX0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShzLmRlZmF1bHQuQ29udGV4dC5wcm90b3R5cGUsXCJjbG9ja1NvdXJjZVwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fdGlja2VyLnR5cGV9LHNldDpmdW5jdGlvbih0KXt0aGlzLl90aWNrZXIudHlwZT10fX0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShzLmRlZmF1bHQuQ29udGV4dC5wcm90b3R5cGUsXCJsYXRlbmN5SGludFwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fbGF0ZW5jeUhpbnR9LHNldDpmdW5jdGlvbih0KXt2YXIgZT10O2lmKHRoaXMuX2xhdGVuY3lIaW50PXQscy5kZWZhdWx0LmlzU3RyaW5nKHQpKXN3aXRjaCh0KXtjYXNlXCJpbnRlcmFjdGl2ZVwiOmU9LjEsdGhpcy5fY29udGV4dC5sYXRlbmN5SGludD10O2JyZWFrO2Nhc2VcInBsYXliYWNrXCI6ZT0uOCx0aGlzLl9jb250ZXh0LmxhdGVuY3lIaW50PXQ7YnJlYWs7Y2FzZVwiYmFsYW5jZWRcIjplPS4yNSx0aGlzLl9jb250ZXh0LmxhdGVuY3lIaW50PXQ7YnJlYWs7Y2FzZVwiZmFzdGVzdFwiOnRoaXMuX2NvbnRleHQubGF0ZW5jeUhpbnQ9XCJpbnRlcmFjdGl2ZVwiLGU9LjAxfXRoaXMubG9va0FoZWFkPWUsdGhpcy51cGRhdGVJbnRlcnZhbD1lLzN9fSkscy5kZWZhdWx0LkNvbnRleHQucHJvdG90eXBlLmRpc3Bvc2U9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5jbG9zZSgpLnRoZW4oZnVuY3Rpb24oKXtmb3IodmFyIHQgaW4gcy5kZWZhdWx0LkVtaXR0ZXIucHJvdG90eXBlLmRpc3Bvc2UuY2FsbCh0aGlzKSx0aGlzLl90aWNrZXIuZGlzcG9zZSgpLHRoaXMuX3RpY2tlcj1udWxsLHRoaXMuX3RpbWVvdXRzLmRpc3Bvc2UoKSx0aGlzLl90aW1lb3V0cz1udWxsLHRoaXMuX2NvbnN0YW50cyl0aGlzLl9jb25zdGFudHNbdF0uZGlzY29ubmVjdCgpO3RoaXMuX2NvbnN0YW50cz1udWxsfS5iaW5kKHRoaXMpKX07dmFyIGE9ZnVuY3Rpb24odCxlLGkpe3RoaXMuX3R5cGU9ZSx0aGlzLl91cGRhdGVJbnRlcnZhbD1pLHRoaXMuX2NhbGxiYWNrPXMuZGVmYXVsdC5kZWZhdWx0QXJnKHQscy5kZWZhdWx0Lm5vT3ApLHRoaXMuX2NyZWF0ZUNsb2NrKCl9O2lmKGEuVHlwZT17V29ya2VyOlwid29ya2VyXCIsVGltZW91dDpcInRpbWVvdXRcIixPZmZsaW5lOlwib2ZmbGluZVwifSxhLnByb3RvdHlwZS5fY3JlYXRlV29ya2VyPWZ1bmN0aW9uKCl7cy5kZWZhdWx0Lmdsb2JhbC5VUkw9cy5kZWZhdWx0Lmdsb2JhbC5VUkx8fHMuZGVmYXVsdC5nbG9iYWwud2Via2l0VVJMO3ZhciB0PW5ldyBCbG9iKFtcInZhciB0aW1lb3V0VGltZSA9IFwiKygxZTMqdGhpcy5fdXBkYXRlSW50ZXJ2YWwpLnRvRml4ZWQoMSkrXCI7c2VsZi5vbm1lc3NhZ2UgPSBmdW5jdGlvbihtc2cpe1xcdHRpbWVvdXRUaW1lID0gcGFyc2VJbnQobXNnLmRhdGEpO307ZnVuY3Rpb24gdGljaygpe1xcdHNldFRpbWVvdXQodGljaywgdGltZW91dFRpbWUpO1xcdHNlbGYucG9zdE1lc3NhZ2UoJ3RpY2snKTt9dGljaygpO1wiXSksZT1VUkwuY3JlYXRlT2JqZWN0VVJMKHQpLGk9bmV3IFdvcmtlcihlKTtpLm9ubWVzc2FnZT10aGlzLl9jYWxsYmFjay5iaW5kKHRoaXMpLHRoaXMuX3dvcmtlcj1pfSxhLnByb3RvdHlwZS5fY3JlYXRlVGltZW91dD1mdW5jdGlvbigpe3RoaXMuX3RpbWVvdXQ9c2V0VGltZW91dChmdW5jdGlvbigpe3RoaXMuX2NyZWF0ZVRpbWVvdXQoKSx0aGlzLl9jYWxsYmFjaygpfS5iaW5kKHRoaXMpLDFlMyp0aGlzLl91cGRhdGVJbnRlcnZhbCl9LGEucHJvdG90eXBlLl9jcmVhdGVDbG9jaz1mdW5jdGlvbigpe2lmKHRoaXMuX3R5cGU9PT1hLlR5cGUuV29ya2VyKXRyeXt0aGlzLl9jcmVhdGVXb3JrZXIoKX1jYXRjaCh0KXt0aGlzLl90eXBlPWEuVHlwZS5UaW1lb3V0LHRoaXMuX2NyZWF0ZUNsb2NrKCl9ZWxzZSB0aGlzLl90eXBlPT09YS5UeXBlLlRpbWVvdXQmJnRoaXMuX2NyZWF0ZVRpbWVvdXQoKX0sT2JqZWN0LmRlZmluZVByb3BlcnR5KGEucHJvdG90eXBlLFwidXBkYXRlSW50ZXJ2YWxcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3VwZGF0ZUludGVydmFsfSxzZXQ6ZnVuY3Rpb24odCl7dGhpcy5fdXBkYXRlSW50ZXJ2YWw9TWF0aC5tYXgodCwxMjgvNDQxMDApLHRoaXMuX3R5cGU9PT1hLlR5cGUuV29ya2VyJiZ0aGlzLl93b3JrZXIucG9zdE1lc3NhZ2UoTWF0aC5tYXgoMWUzKnQsMSkpfX0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShhLnByb3RvdHlwZSxcInR5cGVcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3R5cGV9LHNldDpmdW5jdGlvbih0KXt0aGlzLl9kaXNwb3NlQ2xvY2soKSx0aGlzLl90eXBlPXQsdGhpcy5fY3JlYXRlQ2xvY2soKX19KSxhLnByb3RvdHlwZS5fZGlzcG9zZUNsb2NrPWZ1bmN0aW9uKCl7dGhpcy5fdGltZW91dCYmKGNsZWFyVGltZW91dCh0aGlzLl90aW1lb3V0KSx0aGlzLl90aW1lb3V0PW51bGwpLHRoaXMuX3dvcmtlciYmKHRoaXMuX3dvcmtlci50ZXJtaW5hdGUoKSx0aGlzLl93b3JrZXIub25tZXNzYWdlPW51bGwsdGhpcy5fd29ya2VyPW51bGwpfSxhLnByb3RvdHlwZS5kaXNwb3NlPWZ1bmN0aW9uKCl7dGhpcy5fZGlzcG9zZUNsb2NrKCksdGhpcy5fY2FsbGJhY2s9bnVsbH0scy5kZWZhdWx0LnN1cHBvcnRlZCYmIXMuZGVmYXVsdC5pbml0aWFsaXplZCl7aWYocy5kZWZhdWx0Lmdsb2JhbC5UT05FX0FVRElPX0NPTlRFWFR8fChzLmRlZmF1bHQuZ2xvYmFsLlRPTkVfQVVESU9fQ09OVEVYVD1uZXcgcy5kZWZhdWx0LkNvbnRleHQpLHMuZGVmYXVsdC5jb250ZXh0PXMuZGVmYXVsdC5nbG9iYWwuVE9ORV9BVURJT19DT05URVhULCFzLmRlZmF1bHQuZ2xvYmFsLlRPTkVfU0lMRU5DRV9MT0dHSU5HKXt2YXIgcj1cInZcIjtcImRldlwiPT09cy5kZWZhdWx0LnZlcnNpb24mJihyPVwiXCIpO3ZhciBsPVwiICogVG9uZS5qcyBcIityK3MuZGVmYXVsdC52ZXJzaW9uK1wiICogXCI7Y29uc29sZS5sb2coXCIlY1wiK2wsXCJiYWNrZ3JvdW5kOiAjMDAwOyBjb2xvcjogI2ZmZlwiKX19ZWxzZSBzLmRlZmF1bHQuc3VwcG9ydGVkfHxzLmRlZmF1bHQuZ2xvYmFsLlRPTkVfU0lMRU5DRV9MT0dHSU5HfHxjb25zb2xlLndhcm4oXCJUaGlzIGJyb3dzZXIgZG9lcyBub3Qgc3VwcG9ydCBUb25lLmpzXCIpO2UuZGVmYXVsdD1zLmRlZmF1bHQuQ29udGV4dH0sZnVuY3Rpb24odCxlLGkpe1widXNlIHN0cmljdFwiO2kucihlKTt2YXIgcz1pKDApO2koNCksaSg0MCk7cy5kZWZhdWx0Lkluc3RydW1lbnQ9ZnVuY3Rpb24odCl7dD1zLmRlZmF1bHQuZGVmYXVsdEFyZyh0LHMuZGVmYXVsdC5JbnN0cnVtZW50LmRlZmF1bHRzKSxzLmRlZmF1bHQuQXVkaW9Ob2RlLmNhbGwodGhpcyksdGhpcy5fdm9sdW1lPXRoaXMub3V0cHV0PW5ldyBzLmRlZmF1bHQuVm9sdW1lKHQudm9sdW1lKSx0aGlzLnZvbHVtZT10aGlzLl92b2x1bWUudm9sdW1lLHRoaXMuX3JlYWRPbmx5KFwidm9sdW1lXCIpLHRoaXMuX3NjaGVkdWxlZEV2ZW50cz1bXX0scy5kZWZhdWx0LmV4dGVuZChzLmRlZmF1bHQuSW5zdHJ1bWVudCxzLmRlZmF1bHQuQXVkaW9Ob2RlKSxzLmRlZmF1bHQuSW5zdHJ1bWVudC5kZWZhdWx0cz17dm9sdW1lOjB9LHMuZGVmYXVsdC5JbnN0cnVtZW50LnByb3RvdHlwZS50cmlnZ2VyQXR0YWNrPXMuZGVmYXVsdC5ub09wLHMuZGVmYXVsdC5JbnN0cnVtZW50LnByb3RvdHlwZS50cmlnZ2VyUmVsZWFzZT1zLmRlZmF1bHQubm9PcCxzLmRlZmF1bHQuSW5zdHJ1bWVudC5wcm90b3R5cGUuc3luYz1mdW5jdGlvbigpe3JldHVybiB0aGlzLl9zeW5jTWV0aG9kKFwidHJpZ2dlckF0dGFja1wiLDEpLHRoaXMuX3N5bmNNZXRob2QoXCJ0cmlnZ2VyUmVsZWFzZVwiLDApLHRoaXN9LHMuZGVmYXVsdC5JbnN0cnVtZW50LnByb3RvdHlwZS5fc3luY01ldGhvZD1mdW5jdGlvbih0LGUpe3ZhciBpPXRoaXNbXCJfb3JpZ2luYWxfXCIrdF09dGhpc1t0XTt0aGlzW3RdPWZ1bmN0aW9uKCl7dmFyIHQ9QXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYXJndW1lbnRzKSxuPXRbZV0sbz1zLmRlZmF1bHQuVHJhbnNwb3J0LnNjaGVkdWxlKGZ1bmN0aW9uKHMpe3RbZV09cyxpLmFwcGx5KHRoaXMsdCl9LmJpbmQodGhpcyksbik7dGhpcy5fc2NoZWR1bGVkRXZlbnRzLnB1c2gobyl9LmJpbmQodGhpcyl9LHMuZGVmYXVsdC5JbnN0cnVtZW50LnByb3RvdHlwZS51bnN5bmM9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fc2NoZWR1bGVkRXZlbnRzLmZvckVhY2goZnVuY3Rpb24odCl7cy5kZWZhdWx0LlRyYW5zcG9ydC5jbGVhcih0KX0pLHRoaXMuX3NjaGVkdWxlZEV2ZW50cz1bXSx0aGlzLl9vcmlnaW5hbF90cmlnZ2VyQXR0YWNrJiYodGhpcy50cmlnZ2VyQXR0YWNrPXRoaXMuX29yaWdpbmFsX3RyaWdnZXJBdHRhY2ssdGhpcy50cmlnZ2VyUmVsZWFzZT10aGlzLl9vcmlnaW5hbF90cmlnZ2VyUmVsZWFzZSksdGhpc30scy5kZWZhdWx0Lkluc3RydW1lbnQucHJvdG90eXBlLnRyaWdnZXJBdHRhY2tSZWxlYXNlPWZ1bmN0aW9uKHQsZSxpLHMpe3JldHVybiBpPXRoaXMudG9TZWNvbmRzKGkpLGU9dGhpcy50b1NlY29uZHMoZSksdGhpcy50cmlnZ2VyQXR0YWNrKHQsaSxzKSx0aGlzLnRyaWdnZXJSZWxlYXNlKGkrZSksdGhpc30scy5kZWZhdWx0Lkluc3RydW1lbnQucHJvdG90eXBlLmRpc3Bvc2U9ZnVuY3Rpb24oKXtyZXR1cm4gcy5kZWZhdWx0LkF1ZGlvTm9kZS5wcm90b3R5cGUuZGlzcG9zZS5jYWxsKHRoaXMpLHRoaXMuX3ZvbHVtZS5kaXNwb3NlKCksdGhpcy5fdm9sdW1lPW51bGwsdGhpcy5fd3JpdGFibGUoW1widm9sdW1lXCJdKSx0aGlzLnZvbHVtZT1udWxsLHRoaXMudW5zeW5jKCksdGhpcy5fc2NoZWR1bGVkRXZlbnRzPW51bGwsdGhpc30sZS5kZWZhdWx0PXMuZGVmYXVsdC5JbnN0cnVtZW50fSxmdW5jdGlvbih0LGUsaSl7XCJ1c2Ugc3RyaWN0XCI7aS5yKGUpO3ZhciBzPWkoMCk7aSg3KSxpKDIpO3MuZGVmYXVsdC5BdWRpb1RvR2Fpbj1mdW5jdGlvbigpe3MuZGVmYXVsdC5TaWduYWxCYXNlLmNhbGwodGhpcyksdGhpcy5fbm9ybT10aGlzLmlucHV0PXRoaXMub3V0cHV0PW5ldyBzLmRlZmF1bHQuV2F2ZVNoYXBlcihmdW5jdGlvbih0KXtyZXR1cm4odCsxKS8yfSl9LHMuZGVmYXVsdC5leHRlbmQocy5kZWZhdWx0LkF1ZGlvVG9HYWluLHMuZGVmYXVsdC5TaWduYWxCYXNlKSxzLmRlZmF1bHQuQXVkaW9Ub0dhaW4ucHJvdG90eXBlLmRpc3Bvc2U9ZnVuY3Rpb24oKXtyZXR1cm4gcy5kZWZhdWx0LlNpZ25hbEJhc2UucHJvdG90eXBlLmRpc3Bvc2UuY2FsbCh0aGlzKSx0aGlzLl9ub3JtLmRpc3Bvc2UoKSx0aGlzLl9ub3JtPW51bGwsdGhpc30sZS5kZWZhdWx0PXMuZGVmYXVsdC5BdWRpb1RvR2Fpbn0sZnVuY3Rpb24odCxlLGkpe1widXNlIHN0cmljdFwiO2kucihlKTt2YXIgcz1pKDApO2koMiksaSgxMyksaSg4OSksaSgzKSxpKDEpO3MuZGVmYXVsdC5Dcm9zc0ZhZGU9ZnVuY3Rpb24odCl7cy5kZWZhdWx0LkF1ZGlvTm9kZS5jYWxsKHRoaXMpLHRoaXMuY3JlYXRlSW5zT3V0cygyLDEpLHRoaXMuYT10aGlzLmlucHV0WzBdPW5ldyBzLmRlZmF1bHQuR2Fpbix0aGlzLmI9dGhpcy5pbnB1dFsxXT1uZXcgcy5kZWZhdWx0LkdhaW4sdGhpcy5mYWRlPW5ldyBzLmRlZmF1bHQuU2lnbmFsKHMuZGVmYXVsdC5kZWZhdWx0QXJnKHQsLjUpLHMuZGVmYXVsdC5UeXBlLk5vcm1hbFJhbmdlKSx0aGlzLl9lcXVhbFBvd2VyQT1uZXcgcy5kZWZhdWx0LkVxdWFsUG93ZXJHYWluLHRoaXMuX2VxdWFsUG93ZXJCPW5ldyBzLmRlZmF1bHQuRXF1YWxQb3dlckdhaW4sdGhpcy5fb25lPXRoaXMuY29udGV4dC5nZXRDb25zdGFudCgxKSx0aGlzLl9pbnZlcnQ9bmV3IHMuZGVmYXVsdC5TdWJ0cmFjdCx0aGlzLmEuY29ubmVjdCh0aGlzLm91dHB1dCksdGhpcy5iLmNvbm5lY3QodGhpcy5vdXRwdXQpLHRoaXMuZmFkZS5jaGFpbih0aGlzLl9lcXVhbFBvd2VyQix0aGlzLmIuZ2Fpbikscy5kZWZhdWx0LmNvbm5lY3QodGhpcy5fb25lLHRoaXMuX2ludmVydCwwLDApLHRoaXMuZmFkZS5jb25uZWN0KHRoaXMuX2ludmVydCwwLDEpLHRoaXMuX2ludmVydC5jaGFpbih0aGlzLl9lcXVhbFBvd2VyQSx0aGlzLmEuZ2FpbiksdGhpcy5fcmVhZE9ubHkoXCJmYWRlXCIpfSxzLmRlZmF1bHQuZXh0ZW5kKHMuZGVmYXVsdC5Dcm9zc0ZhZGUscy5kZWZhdWx0LkF1ZGlvTm9kZSkscy5kZWZhdWx0LkNyb3NzRmFkZS5wcm90b3R5cGUuZGlzcG9zZT1mdW5jdGlvbigpe3JldHVybiBzLmRlZmF1bHQuQXVkaW9Ob2RlLnByb3RvdHlwZS5kaXNwb3NlLmNhbGwodGhpcyksdGhpcy5fd3JpdGFibGUoXCJmYWRlXCIpLHRoaXMuX2VxdWFsUG93ZXJBLmRpc3Bvc2UoKSx0aGlzLl9lcXVhbFBvd2VyQT1udWxsLHRoaXMuX2VxdWFsUG93ZXJCLmRpc3Bvc2UoKSx0aGlzLl9lcXVhbFBvd2VyQj1udWxsLHRoaXMuZmFkZS5kaXNwb3NlKCksdGhpcy5mYWRlPW51bGwsdGhpcy5faW52ZXJ0LmRpc3Bvc2UoKSx0aGlzLl9pbnZlcnQ9bnVsbCx0aGlzLl9vbmU9bnVsbCx0aGlzLmEuZGlzcG9zZSgpLHRoaXMuYT1udWxsLHRoaXMuYi5kaXNwb3NlKCksdGhpcy5iPW51bGwsdGhpc30sZS5kZWZhdWx0PXMuZGVmYXVsdC5Dcm9zc0ZhZGV9LGZ1bmN0aW9uKHQsZSxpKXtcInVzZSBzdHJpY3RcIjtpLnIoZSk7dmFyIHM9aSgwKTtzLmRlZmF1bHQuVGltZWxpbmU9ZnVuY3Rpb24oKXt2YXIgdD1zLmRlZmF1bHQuZGVmYXVsdHMoYXJndW1lbnRzLFtcIm1lbW9yeVwiXSxzLmRlZmF1bHQuVGltZWxpbmUpO3MuZGVmYXVsdC5jYWxsKHRoaXMpLHRoaXMuX3RpbWVsaW5lPVtdLHRoaXMubWVtb3J5PXQubWVtb3J5fSxzLmRlZmF1bHQuZXh0ZW5kKHMuZGVmYXVsdC5UaW1lbGluZSkscy5kZWZhdWx0LlRpbWVsaW5lLmRlZmF1bHRzPXttZW1vcnk6MS8wfSxPYmplY3QuZGVmaW5lUHJvcGVydHkocy5kZWZhdWx0LlRpbWVsaW5lLnByb3RvdHlwZSxcImxlbmd0aFwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fdGltZWxpbmUubGVuZ3RofX0pLHMuZGVmYXVsdC5UaW1lbGluZS5wcm90b3R5cGUuYWRkPWZ1bmN0aW9uKHQpe2lmKHMuZGVmYXVsdC5pc1VuZGVmKHQudGltZSkpdGhyb3cgbmV3IEVycm9yKFwiVG9uZS5UaW1lbGluZTogZXZlbnRzIG11c3QgaGF2ZSBhIHRpbWUgYXR0cmlidXRlXCIpO3QudGltZT10LnRpbWUudmFsdWVPZigpO3ZhciBlPXRoaXMuX3NlYXJjaCh0LnRpbWUpO2lmKHRoaXMuX3RpbWVsaW5lLnNwbGljZShlKzEsMCx0KSx0aGlzLmxlbmd0aD50aGlzLm1lbW9yeSl7dmFyIGk9dGhpcy5sZW5ndGgtdGhpcy5tZW1vcnk7dGhpcy5fdGltZWxpbmUuc3BsaWNlKDAsaSl9cmV0dXJuIHRoaXN9LHMuZGVmYXVsdC5UaW1lbGluZS5wcm90b3R5cGUucmVtb3ZlPWZ1bmN0aW9uKHQpe3ZhciBlPXRoaXMuX3RpbWVsaW5lLmluZGV4T2YodCk7cmV0dXJuLTEhPT1lJiZ0aGlzLl90aW1lbGluZS5zcGxpY2UoZSwxKSx0aGlzfSxzLmRlZmF1bHQuVGltZWxpbmUucHJvdG90eXBlLmdldD1mdW5jdGlvbih0LGUpe2U9cy5kZWZhdWx0LmRlZmF1bHRBcmcoZSxcInRpbWVcIik7dmFyIGk9dGhpcy5fc2VhcmNoKHQsZSk7cmV0dXJuLTEhPT1pP3RoaXMuX3RpbWVsaW5lW2ldOm51bGx9LHMuZGVmYXVsdC5UaW1lbGluZS5wcm90b3R5cGUucGVlaz1mdW5jdGlvbigpe3JldHVybiB0aGlzLl90aW1lbGluZVswXX0scy5kZWZhdWx0LlRpbWVsaW5lLnByb3RvdHlwZS5zaGlmdD1mdW5jdGlvbigpe3JldHVybiB0aGlzLl90aW1lbGluZS5zaGlmdCgpfSxzLmRlZmF1bHQuVGltZWxpbmUucHJvdG90eXBlLmdldEFmdGVyPWZ1bmN0aW9uKHQsZSl7ZT1zLmRlZmF1bHQuZGVmYXVsdEFyZyhlLFwidGltZVwiKTt2YXIgaT10aGlzLl9zZWFyY2godCxlKTtyZXR1cm4gaSsxPHRoaXMuX3RpbWVsaW5lLmxlbmd0aD90aGlzLl90aW1lbGluZVtpKzFdOm51bGx9LHMuZGVmYXVsdC5UaW1lbGluZS5wcm90b3R5cGUuZ2V0QmVmb3JlPWZ1bmN0aW9uKHQsZSl7ZT1zLmRlZmF1bHQuZGVmYXVsdEFyZyhlLFwidGltZVwiKTt2YXIgaT10aGlzLl90aW1lbGluZS5sZW5ndGg7aWYoaT4wJiZ0aGlzLl90aW1lbGluZVtpLTFdW2VdPHQpcmV0dXJuIHRoaXMuX3RpbWVsaW5lW2ktMV07dmFyIG49dGhpcy5fc2VhcmNoKHQsZSk7cmV0dXJuIG4tMT49MD90aGlzLl90aW1lbGluZVtuLTFdOm51bGx9LHMuZGVmYXVsdC5UaW1lbGluZS5wcm90b3R5cGUuY2FuY2VsPWZ1bmN0aW9uKHQpe2lmKHRoaXMuX3RpbWVsaW5lLmxlbmd0aD4xKXt2YXIgZT10aGlzLl9zZWFyY2godCk7aWYoZT49MClpZih0aGlzLl90aW1lbGluZVtlXS50aW1lPT09dCl7Zm9yKHZhciBpPWU7aT49MCYmdGhpcy5fdGltZWxpbmVbaV0udGltZT09PXQ7aS0tKWU9aTt0aGlzLl90aW1lbGluZT10aGlzLl90aW1lbGluZS5zbGljZSgwLGUpfWVsc2UgdGhpcy5fdGltZWxpbmU9dGhpcy5fdGltZWxpbmUuc2xpY2UoMCxlKzEpO2Vsc2UgdGhpcy5fdGltZWxpbmU9W119ZWxzZSAxPT09dGhpcy5fdGltZWxpbmUubGVuZ3RoJiZ0aGlzLl90aW1lbGluZVswXS50aW1lPj10JiYodGhpcy5fdGltZWxpbmU9W10pO3JldHVybiB0aGlzfSxzLmRlZmF1bHQuVGltZWxpbmUucHJvdG90eXBlLmNhbmNlbEJlZm9yZT1mdW5jdGlvbih0KXt2YXIgZT10aGlzLl9zZWFyY2godCk7cmV0dXJuIGU+PTAmJih0aGlzLl90aW1lbGluZT10aGlzLl90aW1lbGluZS5zbGljZShlKzEpKSx0aGlzfSxzLmRlZmF1bHQuVGltZWxpbmUucHJvdG90eXBlLnByZXZpb3VzRXZlbnQ9ZnVuY3Rpb24odCl7dmFyIGU9dGhpcy5fdGltZWxpbmUuaW5kZXhPZih0KTtyZXR1cm4gZT4wP3RoaXMuX3RpbWVsaW5lW2UtMV06bnVsbH0scy5kZWZhdWx0LlRpbWVsaW5lLnByb3RvdHlwZS5fc2VhcmNoPWZ1bmN0aW9uKHQsZSl7aWYoMD09PXRoaXMuX3RpbWVsaW5lLmxlbmd0aClyZXR1cm4tMTtlPXMuZGVmYXVsdC5kZWZhdWx0QXJnKGUsXCJ0aW1lXCIpO3ZhciBpPTAsbj10aGlzLl90aW1lbGluZS5sZW5ndGgsbz1uO2lmKG4+MCYmdGhpcy5fdGltZWxpbmVbbi0xXVtlXTw9dClyZXR1cm4gbi0xO2Zvcig7aTxvOyl7dmFyIGE9TWF0aC5mbG9vcihpKyhvLWkpLzIpLHI9dGhpcy5fdGltZWxpbmVbYV0sbD10aGlzLl90aW1lbGluZVthKzFdO2lmKHJbZV09PT10KXtmb3IodmFyIHU9YTt1PHRoaXMuX3RpbWVsaW5lLmxlbmd0aDt1Kyspe3RoaXMuX3RpbWVsaW5lW3VdW2VdPT09dCYmKGE9dSl9cmV0dXJuIGF9aWYocltlXTx0JiZsW2VdPnQpcmV0dXJuIGE7cltlXT50P289YTppPWErMX1yZXR1cm4tMX0scy5kZWZhdWx0LlRpbWVsaW5lLnByb3RvdHlwZS5faXRlcmF0ZT1mdW5jdGlvbih0LGUsaSl7ZT1zLmRlZmF1bHQuZGVmYXVsdEFyZyhlLDApLGk9cy5kZWZhdWx0LmRlZmF1bHRBcmcoaSx0aGlzLl90aW1lbGluZS5sZW5ndGgtMSksdGhpcy5fdGltZWxpbmUuc2xpY2UoZSxpKzEpLmZvckVhY2goZnVuY3Rpb24oZSl7dC5jYWxsKHRoaXMsZSl9LmJpbmQodGhpcykpfSxzLmRlZmF1bHQuVGltZWxpbmUucHJvdG90eXBlLmZvckVhY2g9ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuX2l0ZXJhdGUodCksdGhpc30scy5kZWZhdWx0LlRpbWVsaW5lLnByb3RvdHlwZS5mb3JFYWNoQmVmb3JlPWZ1bmN0aW9uKHQsZSl7dmFyIGk9dGhpcy5fc2VhcmNoKHQpO3JldHVybi0xIT09aSYmdGhpcy5faXRlcmF0ZShlLDAsaSksdGhpc30scy5kZWZhdWx0LlRpbWVsaW5lLnByb3RvdHlwZS5mb3JFYWNoQWZ0ZXI9ZnVuY3Rpb24odCxlKXt2YXIgaT10aGlzLl9zZWFyY2godCk7cmV0dXJuIHRoaXMuX2l0ZXJhdGUoZSxpKzEpLHRoaXN9LHMuZGVmYXVsdC5UaW1lbGluZS5wcm90b3R5cGUuZm9yRWFjaEJldHdlZW49ZnVuY3Rpb24odCxlLGkpe3ZhciBzPXRoaXMuX3NlYXJjaCh0KSxuPXRoaXMuX3NlYXJjaChlKTtyZXR1cm4tMSE9PXMmJi0xIT09bj8odGhpcy5fdGltZWxpbmVbc10udGltZSE9PXQmJihzKz0xKSx0aGlzLl90aW1lbGluZVtuXS50aW1lPT09ZSYmKG4tPTEpLHRoaXMuX2l0ZXJhdGUoaSxzLG4pKTotMT09PXMmJnRoaXMuX2l0ZXJhdGUoaSwwLG4pLHRoaXN9LHMuZGVmYXVsdC5UaW1lbGluZS5wcm90b3R5cGUuZm9yRWFjaEZyb209ZnVuY3Rpb24odCxlKXtmb3IodmFyIGk9dGhpcy5fc2VhcmNoKHQpO2k+PTAmJnRoaXMuX3RpbWVsaW5lW2ldLnRpbWU+PXQ7KWktLTtyZXR1cm4gdGhpcy5faXRlcmF0ZShlLGkrMSksdGhpc30scy5kZWZhdWx0LlRpbWVsaW5lLnByb3RvdHlwZS5mb3JFYWNoQXRUaW1lPWZ1bmN0aW9uKHQsZSl7dmFyIGk9dGhpcy5fc2VhcmNoKHQpO3JldHVybi0xIT09aSYmdGhpcy5faXRlcmF0ZShmdW5jdGlvbihpKXtpLnRpbWU9PT10JiZlLmNhbGwodGhpcyxpKX0sMCxpKSx0aGlzfSxzLmRlZmF1bHQuVGltZWxpbmUucHJvdG90eXBlLmRpc3Bvc2U9ZnVuY3Rpb24oKXtyZXR1cm4gcy5kZWZhdWx0LnByb3RvdHlwZS5kaXNwb3NlLmNhbGwodGhpcyksdGhpcy5fdGltZWxpbmU9bnVsbCx0aGlzfSxlLmRlZmF1bHQ9cy5kZWZhdWx0LlRpbWVsaW5lfSxmdW5jdGlvbih0LGUsaSl7XCJ1c2Ugc3RyaWN0XCI7aS5yKGUpO3ZhciBzPWkoMCk7aSgyMSksaSgyKTtzLmRlZmF1bHQuTW9ub3Bob25pYz1mdW5jdGlvbih0KXt0PXMuZGVmYXVsdC5kZWZhdWx0QXJnKHQscy5kZWZhdWx0Lk1vbm9waG9uaWMuZGVmYXVsdHMpLHMuZGVmYXVsdC5JbnN0cnVtZW50LmNhbGwodGhpcyx0KSx0aGlzLnBvcnRhbWVudG89dC5wb3J0YW1lbnRvfSxzLmRlZmF1bHQuZXh0ZW5kKHMuZGVmYXVsdC5Nb25vcGhvbmljLHMuZGVmYXVsdC5JbnN0cnVtZW50KSxzLmRlZmF1bHQuTW9ub3Bob25pYy5kZWZhdWx0cz17cG9ydGFtZW50bzowfSxzLmRlZmF1bHQuTW9ub3Bob25pYy5wcm90b3R5cGUudHJpZ2dlckF0dGFjaz1mdW5jdGlvbih0LGUsaSl7cmV0dXJuIHRoaXMubG9nKFwidHJpZ2dlckF0dGFja1wiLHQsZSxpKSxlPXRoaXMudG9TZWNvbmRzKGUpLHRoaXMuX3RyaWdnZXJFbnZlbG9wZUF0dGFjayhlLGkpLHRoaXMuc2V0Tm90ZSh0LGUpLHRoaXN9LHMuZGVmYXVsdC5Nb25vcGhvbmljLnByb3RvdHlwZS50cmlnZ2VyUmVsZWFzZT1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5sb2coXCJ0cmlnZ2VyUmVsZWFzZVwiLHQpLHQ9dGhpcy50b1NlY29uZHModCksdGhpcy5fdHJpZ2dlckVudmVsb3BlUmVsZWFzZSh0KSx0aGlzfSxzLmRlZmF1bHQuTW9ub3Bob25pYy5wcm90b3R5cGUuX3RyaWdnZXJFbnZlbG9wZUF0dGFjaz1mdW5jdGlvbigpe30scy5kZWZhdWx0Lk1vbm9waG9uaWMucHJvdG90eXBlLl90cmlnZ2VyRW52ZWxvcGVSZWxlYXNlPWZ1bmN0aW9uKCl7fSxzLmRlZmF1bHQuTW9ub3Bob25pYy5wcm90b3R5cGUuZ2V0TGV2ZWxBdFRpbWU9ZnVuY3Rpb24odCl7cmV0dXJuIHQ9dGhpcy50b1NlY29uZHModCksdGhpcy5lbnZlbG9wZS5nZXRWYWx1ZUF0VGltZSh0KX0scy5kZWZhdWx0Lk1vbm9waG9uaWMucHJvdG90eXBlLnNldE5vdGU9ZnVuY3Rpb24odCxlKXtpZihlPXRoaXMudG9TZWNvbmRzKGUpLHRoaXMucG9ydGFtZW50bz4wJiZ0aGlzLmdldExldmVsQXRUaW1lKGUpPi4wNSl7dmFyIGk9dGhpcy50b1NlY29uZHModGhpcy5wb3J0YW1lbnRvKTt0aGlzLmZyZXF1ZW5jeS5leHBvbmVudGlhbFJhbXBUbyh0LGksZSl9ZWxzZSB0aGlzLmZyZXF1ZW5jeS5zZXRWYWx1ZUF0VGltZSh0LGUpO3JldHVybiB0aGlzfSxlLmRlZmF1bHQ9cy5kZWZhdWx0Lk1vbm9waG9uaWN9LGZ1bmN0aW9uKHQsZSxpKXtcInVzZSBzdHJpY3RcIjtpLnIoZSk7dmFyIHM9aSgwKTtpKDI5KSxpKDUpLGkoMik7cy5kZWZhdWx0LlNjYWxlPWZ1bmN0aW9uKHQsZSl7cy5kZWZhdWx0LlNpZ25hbEJhc2UuY2FsbCh0aGlzKSx0aGlzLl9vdXRwdXRNaW49cy5kZWZhdWx0LmRlZmF1bHRBcmcodCwwKSx0aGlzLl9vdXRwdXRNYXg9cy5kZWZhdWx0LmRlZmF1bHRBcmcoZSwxKSx0aGlzLl9zY2FsZT10aGlzLmlucHV0PW5ldyBzLmRlZmF1bHQuTXVsdGlwbHkoMSksdGhpcy5fYWRkPXRoaXMub3V0cHV0PW5ldyBzLmRlZmF1bHQuQWRkKDApLHRoaXMuX3NjYWxlLmNvbm5lY3QodGhpcy5fYWRkKSx0aGlzLl9zZXRSYW5nZSgpfSxzLmRlZmF1bHQuZXh0ZW5kKHMuZGVmYXVsdC5TY2FsZSxzLmRlZmF1bHQuU2lnbmFsQmFzZSksT2JqZWN0LmRlZmluZVByb3BlcnR5KHMuZGVmYXVsdC5TY2FsZS5wcm90b3R5cGUsXCJtaW5cIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX291dHB1dE1pbn0sc2V0OmZ1bmN0aW9uKHQpe3RoaXMuX291dHB1dE1pbj10LHRoaXMuX3NldFJhbmdlKCl9fSksT2JqZWN0LmRlZmluZVByb3BlcnR5KHMuZGVmYXVsdC5TY2FsZS5wcm90b3R5cGUsXCJtYXhcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX291dHB1dE1heH0sc2V0OmZ1bmN0aW9uKHQpe3RoaXMuX291dHB1dE1heD10LHRoaXMuX3NldFJhbmdlKCl9fSkscy5kZWZhdWx0LlNjYWxlLnByb3RvdHlwZS5fc2V0UmFuZ2U9ZnVuY3Rpb24oKXt0aGlzLl9hZGQudmFsdWU9dGhpcy5fb3V0cHV0TWluLHRoaXMuX3NjYWxlLnZhbHVlPXRoaXMuX291dHB1dE1heC10aGlzLl9vdXRwdXRNaW59LHMuZGVmYXVsdC5TY2FsZS5wcm90b3R5cGUuZGlzcG9zZT1mdW5jdGlvbigpe3JldHVybiBzLmRlZmF1bHQuU2lnbmFsQmFzZS5wcm90b3R5cGUuZGlzcG9zZS5jYWxsKHRoaXMpLHRoaXMuX2FkZC5kaXNwb3NlKCksdGhpcy5fYWRkPW51bGwsdGhpcy5fc2NhbGUuZGlzcG9zZSgpLHRoaXMuX3NjYWxlPW51bGwsdGhpc30sZS5kZWZhdWx0PXMuZGVmYXVsdC5TY2FsZX0sZnVuY3Rpb24odCxlLGkpe1widXNlIHN0cmljdFwiO2kucihlKTt2YXIgcz1pKDApO2koMiksaSgzKSxpKDEpO3MuZGVmYXVsdC5Wb2x1bWU9ZnVuY3Rpb24oKXt2YXIgdD1zLmRlZmF1bHQuZGVmYXVsdHMoYXJndW1lbnRzLFtcInZvbHVtZVwiXSxzLmRlZmF1bHQuVm9sdW1lKTtzLmRlZmF1bHQuQXVkaW9Ob2RlLmNhbGwodGhpcyx0KSx0aGlzLm91dHB1dD10aGlzLmlucHV0PW5ldyBzLmRlZmF1bHQuR2Fpbih0LnZvbHVtZSxzLmRlZmF1bHQuVHlwZS5EZWNpYmVscyksdGhpcy5fdW5tdXRlZFZvbHVtZT10LnZvbHVtZSx0aGlzLnZvbHVtZT10aGlzLm91dHB1dC5nYWluLHRoaXMuX3JlYWRPbmx5KFwidm9sdW1lXCIpLHRoaXMubXV0ZT10Lm11dGV9LHMuZGVmYXVsdC5leHRlbmQocy5kZWZhdWx0LlZvbHVtZSxzLmRlZmF1bHQuQXVkaW9Ob2RlKSxzLmRlZmF1bHQuVm9sdW1lLmRlZmF1bHRzPXt2b2x1bWU6MCxtdXRlOiExfSxPYmplY3QuZGVmaW5lUHJvcGVydHkocy5kZWZhdWx0LlZvbHVtZS5wcm90b3R5cGUsXCJtdXRlXCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLnZvbHVtZS52YWx1ZT09PS0xLzB9LHNldDpmdW5jdGlvbih0KXshdGhpcy5tdXRlJiZ0Pyh0aGlzLl91bm11dGVkVm9sdW1lPXRoaXMudm9sdW1lLnZhbHVlLHRoaXMudm9sdW1lLnZhbHVlPS0xLzApOnRoaXMubXV0ZSYmIXQmJih0aGlzLnZvbHVtZS52YWx1ZT10aGlzLl91bm11dGVkVm9sdW1lKX19KSxzLmRlZmF1bHQuVm9sdW1lLnByb3RvdHlwZS5kaXNwb3NlPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuaW5wdXQuZGlzcG9zZSgpLHMuZGVmYXVsdC5BdWRpb05vZGUucHJvdG90eXBlLmRpc3Bvc2UuY2FsbCh0aGlzKSx0aGlzLl93cml0YWJsZShcInZvbHVtZVwiKSx0aGlzLnZvbHVtZS5kaXNwb3NlKCksdGhpcy52b2x1bWU9bnVsbCx0aGlzfSxlLmRlZmF1bHQ9cy5kZWZhdWx0LlZvbHVtZX0sZnVuY3Rpb24odCxlLGkpe1widXNlIHN0cmljdFwiO2kucihlKTt2YXIgcz1pKDApO2koMyksaSgzMCk7cy5kZWZhdWx0Llplcm89ZnVuY3Rpb24oKXtzLmRlZmF1bHQuU2lnbmFsQmFzZS5jYWxsKHRoaXMpLHRoaXMuX2dhaW49dGhpcy5pbnB1dD10aGlzLm91dHB1dD1uZXcgcy5kZWZhdWx0LkdhaW4scy5kZWZhdWx0LmNvbm5lY3QodGhpcy5jb250ZXh0LmdldENvbnN0YW50KDApLHRoaXMuX2dhaW4pfSxzLmRlZmF1bHQuZXh0ZW5kKHMuZGVmYXVsdC5aZXJvLHMuZGVmYXVsdC5TaWduYWxCYXNlKSxzLmRlZmF1bHQuWmVyby5wcm90b3R5cGUuZGlzcG9zZT1mdW5jdGlvbigpe3JldHVybiBzLmRlZmF1bHQuU2lnbmFsQmFzZS5wcm90b3R5cGUuZGlzcG9zZS5jYWxsKHRoaXMpLHRoaXMuX2dhaW4uZGlzcG9zZSgpLHRoaXMuX2dhaW49bnVsbCx0aGlzfSxlLmRlZmF1bHQ9cy5kZWZhdWx0Llplcm99LGZ1bmN0aW9uKHQsZSxpKXtcInVzZSBzdHJpY3RcIjtpLnIoZSk7dmFyIHM9aSgwKTtpKDIpLGkoMyk7cy5kZWZhdWx0LkFkZD1mdW5jdGlvbih0KXtzLmRlZmF1bHQuU2lnbmFsLmNhbGwodGhpcyksdGhpcy5jcmVhdGVJbnNPdXRzKDIsMCksdGhpcy5fc3VtPXRoaXMuaW5wdXRbMF09dGhpcy5pbnB1dFsxXT10aGlzLm91dHB1dD1uZXcgcy5kZWZhdWx0LkdhaW4sdGhpcy5fcGFyYW09dGhpcy5pbnB1dFsxXT1uZXcgcy5kZWZhdWx0LlNpZ25hbCh0KSx0aGlzLl9wYXJhbS5jb25uZWN0KHRoaXMuX3N1bSl9LHMuZGVmYXVsdC5leHRlbmQocy5kZWZhdWx0LkFkZCxzLmRlZmF1bHQuU2lnbmFsKSxzLmRlZmF1bHQuQWRkLnByb3RvdHlwZS5kaXNwb3NlPWZ1bmN0aW9uKCl7cmV0dXJuIHMuZGVmYXVsdC5TaWduYWwucHJvdG90eXBlLmRpc3Bvc2UuY2FsbCh0aGlzKSx0aGlzLl9zdW0uZGlzcG9zZSgpLHRoaXMuX3N1bT1udWxsLHRoaXN9LGUuZGVmYXVsdD1zLmRlZmF1bHQuQWRkfSxmdW5jdGlvbih0LGUsaSl7XCJ1c2Ugc3RyaWN0XCI7aS5yKGUpO3ZhciBzPWkoMCk7aSgxKTtzLmRlZmF1bHQuU2lnbmFsQmFzZT1mdW5jdGlvbigpe3MuZGVmYXVsdC5BdWRpb05vZGUuY2FsbCh0aGlzKX0scy5kZWZhdWx0LmV4dGVuZChzLmRlZmF1bHQuU2lnbmFsQmFzZSxzLmRlZmF1bHQuQXVkaW9Ob2RlKSxzLmRlZmF1bHQuU2lnbmFsQmFzZS5wcm90b3R5cGUuY29ubmVjdD1mdW5jdGlvbih0LGUsaSl7cmV0dXJuIHMuZGVmYXVsdC5TaWduYWwmJnMuZGVmYXVsdC5TaWduYWw9PT10LmNvbnN0cnVjdG9yfHxzLmRlZmF1bHQuUGFyYW0mJnMuZGVmYXVsdC5QYXJhbT09PXQuY29uc3RydWN0b3I/KHQuX3BhcmFtLmNhbmNlbFNjaGVkdWxlZFZhbHVlcygwKSx0Ll9wYXJhbS5zZXRWYWx1ZUF0VGltZSgwLDApLHQub3ZlcnJpZGRlbj0hMCk6dCBpbnN0YW5jZW9mIEF1ZGlvUGFyYW0mJih0LmNhbmNlbFNjaGVkdWxlZFZhbHVlcygwKSx0LnNldFZhbHVlQXRUaW1lKDAsMCkpLHMuZGVmYXVsdC5BdWRpb05vZGUucHJvdG90eXBlLmNvbm5lY3QuY2FsbCh0aGlzLHQsZSxpKSx0aGlzfSxlLmRlZmF1bHQ9cy5kZWZhdWx0LlNpZ25hbEJhc2V9LGZ1bmN0aW9uKHQsZSxpKXtcInVzZSBzdHJpY3RcIjtpLnIoZSk7dmFyIHM9aSgwKTtpKDQ3KSxpKDMpO3MuZGVmYXVsdC5BbXBsaXR1ZGVFbnZlbG9wZT1mdW5jdGlvbigpe3MuZGVmYXVsdC5FbnZlbG9wZS5hcHBseSh0aGlzLGFyZ3VtZW50cyksdGhpcy5pbnB1dD10aGlzLm91dHB1dD1uZXcgcy5kZWZhdWx0LkdhaW4sdGhpcy5fc2lnLmNvbm5lY3QodGhpcy5vdXRwdXQuZ2Fpbil9LHMuZGVmYXVsdC5leHRlbmQocy5kZWZhdWx0LkFtcGxpdHVkZUVudmVsb3BlLHMuZGVmYXVsdC5FbnZlbG9wZSkscy5kZWZhdWx0LkFtcGxpdHVkZUVudmVsb3BlLnByb3RvdHlwZS5kaXNwb3NlPWZ1bmN0aW9uKCl7cmV0dXJuIHMuZGVmYXVsdC5FbnZlbG9wZS5wcm90b3R5cGUuZGlzcG9zZS5jYWxsKHRoaXMpLHRoaXN9LGUuZGVmYXVsdD1zLmRlZmF1bHQuQW1wbGl0dWRlRW52ZWxvcGV9LGZ1bmN0aW9uKHQsZSxpKXtcInVzZSBzdHJpY3RcIjtpLnIoZSk7dmFyIHM9aSgwKTtpKDExKSxpKDYpLGkoMyksaSgxKTtzLmRlZmF1bHQuQnVmZmVyU291cmNlPWZ1bmN0aW9uKCl7dmFyIHQ9cy5kZWZhdWx0LmRlZmF1bHRzKGFyZ3VtZW50cyxbXCJidWZmZXJcIixcIm9ubG9hZFwiXSxzLmRlZmF1bHQuQnVmZmVyU291cmNlKTtzLmRlZmF1bHQuQXVkaW9Ob2RlLmNhbGwodGhpcyx0KSx0aGlzLm9uZW5kZWQ9dC5vbmVuZGVkLHRoaXMuX3N0YXJ0VGltZT0tMSx0aGlzLl9zb3VyY2VTdGFydGVkPSExLHRoaXMuX3NvdXJjZVN0b3BwZWQ9ITEsdGhpcy5fc3RvcFRpbWU9LTEsdGhpcy5fZ2Fpbk5vZGU9dGhpcy5vdXRwdXQ9bmV3IHMuZGVmYXVsdC5HYWluKDApLHRoaXMuX3NvdXJjZT10aGlzLmNvbnRleHQuY3JlYXRlQnVmZmVyU291cmNlKCkscy5kZWZhdWx0LmNvbm5lY3QodGhpcy5fc291cmNlLHRoaXMuX2dhaW5Ob2RlKSx0aGlzLl9zb3VyY2Uub25lbmRlZD10aGlzLl9vbmVuZGVkLmJpbmQodGhpcyksdGhpcy5fYnVmZmVyPW5ldyBzLmRlZmF1bHQuQnVmZmVyKHQuYnVmZmVyLHQub25sb2FkKSx0aGlzLnBsYXliYWNrUmF0ZT1uZXcgcy5kZWZhdWx0LlBhcmFtKHtwYXJhbTp0aGlzLl9zb3VyY2UucGxheWJhY2tSYXRlLHVuaXRzOnMuZGVmYXVsdC5UeXBlLlBvc2l0aXZlLHZhbHVlOnQucGxheWJhY2tSYXRlfSksdGhpcy5mYWRlSW49dC5mYWRlSW4sdGhpcy5mYWRlT3V0PXQuZmFkZU91dCx0aGlzLmN1cnZlPXQuY3VydmUsdGhpcy5fb25lbmRlZFRpbWVvdXQ9LTEsdGhpcy5sb29wPXQubG9vcCx0aGlzLmxvb3BTdGFydD10Lmxvb3BTdGFydCx0aGlzLmxvb3BFbmQ9dC5sb29wRW5kfSxzLmRlZmF1bHQuZXh0ZW5kKHMuZGVmYXVsdC5CdWZmZXJTb3VyY2Uscy5kZWZhdWx0LkF1ZGlvTm9kZSkscy5kZWZhdWx0LkJ1ZmZlclNvdXJjZS5kZWZhdWx0cz17b25lbmRlZDpzLmRlZmF1bHQubm9PcCxvbmxvYWQ6cy5kZWZhdWx0Lm5vT3AsbG9vcDohMSxsb29wU3RhcnQ6MCxsb29wRW5kOjAsZmFkZUluOjAsZmFkZU91dDowLGN1cnZlOlwibGluZWFyXCIscGxheWJhY2tSYXRlOjF9LE9iamVjdC5kZWZpbmVQcm9wZXJ0eShzLmRlZmF1bHQuQnVmZmVyU291cmNlLnByb3RvdHlwZSxcInN0YXRlXCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLmdldFN0YXRlQXRUaW1lKHRoaXMubm93KCkpfX0pLHMuZGVmYXVsdC5CdWZmZXJTb3VyY2UucHJvdG90eXBlLmdldFN0YXRlQXRUaW1lPWZ1bmN0aW9uKHQpe3JldHVybiB0PXRoaXMudG9TZWNvbmRzKHQpLC0xIT09dGhpcy5fc3RhcnRUaW1lJiZ0aGlzLl9zdGFydFRpbWU8PXQmJigtMT09PXRoaXMuX3N0b3BUaW1lfHx0PHRoaXMuX3N0b3BUaW1lKSYmIXRoaXMuX3NvdXJjZVN0b3BwZWQ/cy5kZWZhdWx0LlN0YXRlLlN0YXJ0ZWQ6cy5kZWZhdWx0LlN0YXRlLlN0b3BwZWR9LHMuZGVmYXVsdC5CdWZmZXJTb3VyY2UucHJvdG90eXBlLnN0YXJ0PWZ1bmN0aW9uKHQsZSxpLG4pe3RoaXMubG9nKFwic3RhcnRcIix0LGUsaSxuKSx0aGlzLmFzc2VydCgtMT09PXRoaXMuX3N0YXJ0VGltZSxcImNhbiBvbmx5IGJlIHN0YXJ0ZWQgb25jZVwiKSx0aGlzLmFzc2VydCh0aGlzLmJ1ZmZlci5sb2FkZWQsXCJidWZmZXIgaXMgZWl0aGVyIG5vdCBzZXQgb3Igbm90IGxvYWRlZFwiKSx0aGlzLmFzc2VydCghdGhpcy5fc291cmNlU3RvcHBlZCxcInNvdXJjZSBpcyBhbHJlYWR5IHN0b3BwZWRcIiksdD10aGlzLnRvU2Vjb25kcyh0KSxlPXRoaXMubG9vcD9zLmRlZmF1bHQuZGVmYXVsdEFyZyhlLHRoaXMubG9vcFN0YXJ0KTpzLmRlZmF1bHQuZGVmYXVsdEFyZyhlLDApLGU9dGhpcy50b1NlY29uZHMoZSksZT1NYXRoLm1heChlLDApLG49cy5kZWZhdWx0LmRlZmF1bHRBcmcobiwxKTt2YXIgbz10aGlzLnRvU2Vjb25kcyh0aGlzLmZhZGVJbik7aWYobz4wPyh0aGlzLl9nYWluTm9kZS5nYWluLnNldFZhbHVlQXRUaW1lKDAsdCksXCJsaW5lYXJcIj09PXRoaXMuY3VydmU/dGhpcy5fZ2Fpbk5vZGUuZ2Fpbi5saW5lYXJSYW1wVG9WYWx1ZUF0VGltZShuLHQrbyk6dGhpcy5fZ2Fpbk5vZGUuZ2Fpbi5leHBvbmVudGlhbEFwcHJvYWNoVmFsdWVBdFRpbWUobix0LG8pKTp0aGlzLl9nYWluTm9kZS5nYWluLnNldFZhbHVlQXRUaW1lKG4sdCksdGhpcy5fc3RhcnRUaW1lPXQscy5kZWZhdWx0LmlzRGVmaW5lZChpKSl7dmFyIGE9dGhpcy50b1NlY29uZHMoaSk7YT1NYXRoLm1heChhLDApLHRoaXMuc3RvcCh0K2EpfWlmKHRoaXMubG9vcCl7dmFyIHI9dGhpcy5sb29wRW5kfHx0aGlzLmJ1ZmZlci5kdXJhdGlvbixsPXRoaXMubG9vcFN0YXJ0O2U+PXImJihlPShlLWwpJShyLWwpK2wpfXJldHVybiB0aGlzLl9zb3VyY2UuYnVmZmVyPXRoaXMuYnVmZmVyLmdldCgpLHRoaXMuX3NvdXJjZS5sb29wRW5kPXRoaXMubG9vcEVuZHx8dGhpcy5idWZmZXIuZHVyYXRpb24sZTx0aGlzLmJ1ZmZlci5kdXJhdGlvbiYmKHRoaXMuX3NvdXJjZVN0YXJ0ZWQ9ITAsdGhpcy5fc291cmNlLnN0YXJ0KHQsZSkpLHRoaXN9LHMuZGVmYXVsdC5CdWZmZXJTb3VyY2UucHJvdG90eXBlLnN0b3A9ZnVuY3Rpb24odCl7dGhpcy5sb2coXCJzdG9wXCIsdCksdGhpcy5hc3NlcnQodGhpcy5idWZmZXIubG9hZGVkLFwiYnVmZmVyIGlzIGVpdGhlciBub3Qgc2V0IG9yIG5vdCBsb2FkZWRcIiksdGhpcy5hc3NlcnQoIXRoaXMuX3NvdXJjZVN0b3BwZWQsXCJzb3VyY2UgaXMgYWxyZWFkeSBzdG9wcGVkXCIpLHQ9dGhpcy50b1NlY29uZHModCksLTEhPT10aGlzLl9zdG9wVGltZSYmdGhpcy5jYW5jZWxTdG9wKCk7dmFyIGU9dGhpcy50b1NlY29uZHModGhpcy5mYWRlT3V0KTtyZXR1cm4gdGhpcy5fc3RvcFRpbWU9dCtlLGU+MD9cImxpbmVhclwiPT09dGhpcy5jdXJ2ZT90aGlzLl9nYWluTm9kZS5nYWluLmxpbmVhclJhbXBUbygwLGUsdCk6dGhpcy5fZ2Fpbk5vZGUuZ2Fpbi50YXJnZXRSYW1wVG8oMCxlLHQpOih0aGlzLl9nYWluTm9kZS5nYWluLmNhbmNlbEFuZEhvbGRBdFRpbWUodCksdGhpcy5fZ2Fpbk5vZGUuZ2Fpbi5zZXRWYWx1ZUF0VGltZSgwLHQpKSxzLmRlZmF1bHQuY29udGV4dC5jbGVhclRpbWVvdXQodGhpcy5fb25lbmRlZFRpbWVvdXQpLHRoaXMuX29uZW5kZWRUaW1lb3V0PXMuZGVmYXVsdC5jb250ZXh0LnNldFRpbWVvdXQodGhpcy5fb25lbmRlZC5iaW5kKHRoaXMpLHRoaXMuX3N0b3BUaW1lLXRoaXMubm93KCkpLHRoaXN9LHMuZGVmYXVsdC5CdWZmZXJTb3VyY2UucHJvdG90eXBlLmNhbmNlbFN0b3A9ZnVuY3Rpb24oKXtpZigtMSE9PXRoaXMuX3N0YXJ0VGltZSYmIXRoaXMuX3NvdXJjZVN0b3BwZWQpe3ZhciB0PXRoaXMudG9TZWNvbmRzKHRoaXMuZmFkZUluKTt0aGlzLl9nYWluTm9kZS5nYWluLmNhbmNlbFNjaGVkdWxlZFZhbHVlcyh0aGlzLl9zdGFydFRpbWUrdCt0aGlzLnNhbXBsZVRpbWUpLHRoaXMuY29udGV4dC5jbGVhclRpbWVvdXQodGhpcy5fb25lbmRlZFRpbWVvdXQpLHRoaXMuX3N0b3BUaW1lPS0xfXJldHVybiB0aGlzfSxzLmRlZmF1bHQuQnVmZmVyU291cmNlLnByb3RvdHlwZS5fb25lbmRlZD1mdW5jdGlvbigpe2lmKCF0aGlzLl9zb3VyY2VTdG9wcGVkKXt0aGlzLl9zb3VyY2VTdG9wcGVkPSEwO3ZhciB0PVwiZXhwb25lbnRpYWxcIj09PXRoaXMuY3VydmU/Mip0aGlzLmZhZGVPdXQ6MDt0aGlzLl9zb3VyY2VTdGFydGVkJiYtMSE9PXRoaXMuX3N0b3BUaW1lJiZ0aGlzLl9zb3VyY2Uuc3RvcCh0aGlzLl9zdG9wVGltZSt0KSx0aGlzLm9uZW5kZWQodGhpcyksc2V0VGltZW91dChmdW5jdGlvbigpe3RoaXMuX3NvdXJjZSYmKHRoaXMuX3NvdXJjZS5kaXNjb25uZWN0KCksdGhpcy5fZ2Fpbk5vZGUuZGlzY29ubmVjdCgpKX0uYmluZCh0aGlzKSwxZTMqdCsxMDApfX0sT2JqZWN0LmRlZmluZVByb3BlcnR5KHMuZGVmYXVsdC5CdWZmZXJTb3VyY2UucHJvdG90eXBlLFwibG9vcFN0YXJ0XCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9zb3VyY2UubG9vcFN0YXJ0fSxzZXQ6ZnVuY3Rpb24odCl7dGhpcy5fc291cmNlLmxvb3BTdGFydD10aGlzLnRvU2Vjb25kcyh0KX19KSxPYmplY3QuZGVmaW5lUHJvcGVydHkocy5kZWZhdWx0LkJ1ZmZlclNvdXJjZS5wcm90b3R5cGUsXCJsb29wRW5kXCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9zb3VyY2UubG9vcEVuZH0sc2V0OmZ1bmN0aW9uKHQpe3RoaXMuX3NvdXJjZS5sb29wRW5kPXRoaXMudG9TZWNvbmRzKHQpfX0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShzLmRlZmF1bHQuQnVmZmVyU291cmNlLnByb3RvdHlwZSxcImJ1ZmZlclwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fYnVmZmVyfSxzZXQ6ZnVuY3Rpb24odCl7dGhpcy5fYnVmZmVyLnNldCh0KX19KSxPYmplY3QuZGVmaW5lUHJvcGVydHkocy5kZWZhdWx0LkJ1ZmZlclNvdXJjZS5wcm90b3R5cGUsXCJsb29wXCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9zb3VyY2UubG9vcH0sc2V0OmZ1bmN0aW9uKHQpe3RoaXMuX3NvdXJjZS5sb29wPXQsdGhpcy5jYW5jZWxTdG9wKCl9fSkscy5kZWZhdWx0LkJ1ZmZlclNvdXJjZS5wcm90b3R5cGUuZGlzcG9zZT1mdW5jdGlvbigpe3JldHVybiB0aGlzLl93YXNEaXNwb3NlZHx8KHRoaXMuX3dhc0Rpc3Bvc2VkPSEwLHMuZGVmYXVsdC5BdWRpb05vZGUucHJvdG90eXBlLmRpc3Bvc2UuY2FsbCh0aGlzKSx0aGlzLm9uZW5kZWQ9bnVsbCx0aGlzLl9zb3VyY2Uub25lbmRlZD1udWxsLHRoaXMuX3NvdXJjZS5kaXNjb25uZWN0KCksdGhpcy5fc291cmNlPW51bGwsdGhpcy5fZ2Fpbk5vZGUuZGlzcG9zZSgpLHRoaXMuX2dhaW5Ob2RlPW51bGwsdGhpcy5fYnVmZmVyLmRpc3Bvc2UoKSx0aGlzLl9idWZmZXI9bnVsbCx0aGlzLl9zdGFydFRpbWU9LTEsdGhpcy5wbGF5YmFja1JhdGU9bnVsbCxzLmRlZmF1bHQuY29udGV4dC5jbGVhclRpbWVvdXQodGhpcy5fb25lbmRlZFRpbWVvdXQpKSx0aGlzfSxlLmRlZmF1bHQ9cy5kZWZhdWx0LkJ1ZmZlclNvdXJjZX0sZnVuY3Rpb24odCxlLGkpe1widXNlIHN0cmljdFwiO2kucihlKTt2YXIgcz1pKDApO2koOCksaSgyKSxpKDUpLGkoMyk7cy5kZWZhdWx0LkZlZWRiYWNrRWZmZWN0PWZ1bmN0aW9uKCl7dmFyIHQ9cy5kZWZhdWx0LmRlZmF1bHRzKGFyZ3VtZW50cyxbXCJmZWVkYmFja1wiXSxzLmRlZmF1bHQuRmVlZGJhY2tFZmZlY3QpO3MuZGVmYXVsdC5FZmZlY3QuY2FsbCh0aGlzLHQpLHRoaXMuX2ZlZWRiYWNrR2Fpbj1uZXcgcy5kZWZhdWx0LkdhaW4odC5mZWVkYmFjayxzLmRlZmF1bHQuVHlwZS5Ob3JtYWxSYW5nZSksdGhpcy5mZWVkYmFjaz10aGlzLl9mZWVkYmFja0dhaW4uZ2Fpbix0aGlzLmVmZmVjdFJldHVybi5jaGFpbih0aGlzLl9mZWVkYmFja0dhaW4sdGhpcy5lZmZlY3RTZW5kKSx0aGlzLl9yZWFkT25seShbXCJmZWVkYmFja1wiXSl9LHMuZGVmYXVsdC5leHRlbmQocy5kZWZhdWx0LkZlZWRiYWNrRWZmZWN0LHMuZGVmYXVsdC5FZmZlY3QpLHMuZGVmYXVsdC5GZWVkYmFja0VmZmVjdC5kZWZhdWx0cz17ZmVlZGJhY2s6LjEyNX0scy5kZWZhdWx0LkZlZWRiYWNrRWZmZWN0LnByb3RvdHlwZS5kaXNwb3NlPWZ1bmN0aW9uKCl7cmV0dXJuIHMuZGVmYXVsdC5FZmZlY3QucHJvdG90eXBlLmRpc3Bvc2UuY2FsbCh0aGlzKSx0aGlzLl93cml0YWJsZShbXCJmZWVkYmFja1wiXSksdGhpcy5fZmVlZGJhY2tHYWluLmRpc3Bvc2UoKSx0aGlzLl9mZWVkYmFja0dhaW49bnVsbCx0aGlzLmZlZWRiYWNrPW51bGwsdGhpc30sZS5kZWZhdWx0PXMuZGVmYXVsdC5GZWVkYmFja0VmZmVjdH0sZnVuY3Rpb24odCxlLGkpe1widXNlIHN0cmljdFwiO2kucihlKTt2YXIgcz1pKDApO2koMjQpLGkoNCk7cy5kZWZhdWx0LlRpbWVsaW5lU3RhdGU9ZnVuY3Rpb24odCl7cy5kZWZhdWx0LlRpbWVsaW5lLmNhbGwodGhpcyksdGhpcy5faW5pdGlhbD10fSxzLmRlZmF1bHQuZXh0ZW5kKHMuZGVmYXVsdC5UaW1lbGluZVN0YXRlLHMuZGVmYXVsdC5UaW1lbGluZSkscy5kZWZhdWx0LlRpbWVsaW5lU3RhdGUucHJvdG90eXBlLmdldFZhbHVlQXRUaW1lPWZ1bmN0aW9uKHQpe3ZhciBlPXRoaXMuZ2V0KHQpO3JldHVybiBudWxsIT09ZT9lLnN0YXRlOnRoaXMuX2luaXRpYWx9LHMuZGVmYXVsdC5UaW1lbGluZVN0YXRlLnByb3RvdHlwZS5zZXRTdGF0ZUF0VGltZT1mdW5jdGlvbih0LGUpe3JldHVybiB0aGlzLmFkZCh7c3RhdGU6dCx0aW1lOmV9KSx0aGlzfSxzLmRlZmF1bHQuVGltZWxpbmVTdGF0ZS5wcm90b3R5cGUuZ2V0TGFzdFN0YXRlPWZ1bmN0aW9uKHQsZSl7ZT10aGlzLnRvU2Vjb25kcyhlKTtmb3IodmFyIGk9dGhpcy5fc2VhcmNoKGUpO2k+PTA7aS0tKXt2YXIgcz10aGlzLl90aW1lbGluZVtpXTtpZihzLnN0YXRlPT09dClyZXR1cm4gc319LHMuZGVmYXVsdC5UaW1lbGluZVN0YXRlLnByb3RvdHlwZS5nZXROZXh0U3RhdGU9ZnVuY3Rpb24odCxlKXtlPXRoaXMudG9TZWNvbmRzKGUpO3ZhciBpPXRoaXMuX3NlYXJjaChlKTtpZigtMSE9PWkpZm9yKHZhciBzPWk7czx0aGlzLl90aW1lbGluZS5sZW5ndGg7cysrKXt2YXIgbj10aGlzLl90aW1lbGluZVtzXTtpZihuLnN0YXRlPT09dClyZXR1cm4gbn19LGUuZGVmYXVsdD1zLmRlZmF1bHQuVGltZWxpbmVTdGF0ZX0sZnVuY3Rpb24odCxlLGkpe1widXNlIHN0cmljdFwiO2kucihlKTt2YXIgcz1pKDApO3MuZGVmYXVsdC5FbWl0dGVyPWZ1bmN0aW9uKCl7cy5kZWZhdWx0LmNhbGwodGhpcyksdGhpcy5fZXZlbnRzPXt9fSxzLmRlZmF1bHQuZXh0ZW5kKHMuZGVmYXVsdC5FbWl0dGVyKSxzLmRlZmF1bHQuRW1pdHRlci5wcm90b3R5cGUub249ZnVuY3Rpb24odCxlKXtmb3IodmFyIGk9dC5zcGxpdCgvXFxXKy8pLHM9MDtzPGkubGVuZ3RoO3MrKyl7dmFyIG49aVtzXTt0aGlzLl9ldmVudHMuaGFzT3duUHJvcGVydHkobil8fCh0aGlzLl9ldmVudHNbbl09W10pLHRoaXMuX2V2ZW50c1tuXS5wdXNoKGUpfXJldHVybiB0aGlzfSxzLmRlZmF1bHQuRW1pdHRlci5wcm90b3R5cGUub25jZT1mdW5jdGlvbih0LGUpe3ZhciBpPWZ1bmN0aW9uKCl7ZS5hcHBseSh0aGlzLGFyZ3VtZW50cyksdGhpcy5vZmYodCxpKX0uYmluZCh0aGlzKTtyZXR1cm4gdGhpcy5vbih0LGkpLHRoaXN9LHMuZGVmYXVsdC5FbWl0dGVyLnByb3RvdHlwZS5vZmY9ZnVuY3Rpb24odCxlKXtmb3IodmFyIGk9dC5zcGxpdCgvXFxXKy8pLG49MDtuPGkubGVuZ3RoO24rKylpZih0PWlbbl0sdGhpcy5fZXZlbnRzLmhhc093blByb3BlcnR5KHQpKWlmKHMuZGVmYXVsdC5pc1VuZGVmKGUpKXRoaXMuX2V2ZW50c1t0XT1bXTtlbHNlIGZvcih2YXIgbz10aGlzLl9ldmVudHNbdF0sYT0wO2E8by5sZW5ndGg7YSsrKW9bYV09PT1lJiZvLnNwbGljZShhLDEpO3JldHVybiB0aGlzfSxzLmRlZmF1bHQuRW1pdHRlci5wcm90b3R5cGUuZW1pdD1mdW5jdGlvbih0KXtpZih0aGlzLl9ldmVudHMpe3ZhciBlPUFycmF5LmFwcGx5KG51bGwsYXJndW1lbnRzKS5zbGljZSgxKTtpZih0aGlzLl9ldmVudHMuaGFzT3duUHJvcGVydHkodCkpZm9yKHZhciBpPXRoaXMuX2V2ZW50c1t0XS5zbGljZSgwKSxzPTAsbj1pLmxlbmd0aDtzPG47cysrKWlbc10uYXBwbHkodGhpcyxlKX1yZXR1cm4gdGhpc30scy5kZWZhdWx0LkVtaXR0ZXIubWl4aW49ZnVuY3Rpb24odCl7dmFyIGU9W1wib25cIixcIm9uY2VcIixcIm9mZlwiLFwiZW1pdFwiXTt0Ll9ldmVudHM9e307Zm9yKHZhciBpPTA7aTxlLmxlbmd0aDtpKyspe3ZhciBuPWVbaV0sbz1zLmRlZmF1bHQuRW1pdHRlci5wcm90b3R5cGVbbl07dFtuXT1vfXJldHVybiBzLmRlZmF1bHQuRW1pdHRlcn0scy5kZWZhdWx0LkVtaXR0ZXIucHJvdG90eXBlLmRpc3Bvc2U9ZnVuY3Rpb24oKXtyZXR1cm4gcy5kZWZhdWx0LnByb3RvdHlwZS5kaXNwb3NlLmNhbGwodGhpcyksdGhpcy5fZXZlbnRzPW51bGwsdGhpc30sZS5kZWZhdWx0PXMuZGVmYXVsdC5FbWl0dGVyfSxmdW5jdGlvbih0LGUsaSl7XCJ1c2Ugc3RyaWN0XCI7aS5yKGUpO3ZhciBzPWkoMCk7aSgxKSxpKDQ0KTtzLmRlZmF1bHQuc3VwcG9ydGVkJiYoQW5hbHlzZXJOb2RlLnByb3RvdHlwZS5nZXRGbG9hdFRpbWVEb21haW5EYXRhfHwoQW5hbHlzZXJOb2RlLnByb3RvdHlwZS5nZXRGbG9hdFRpbWVEb21haW5EYXRhPWZ1bmN0aW9uKHQpe3ZhciBlPW5ldyBVaW50OEFycmF5KHQubGVuZ3RoKTt0aGlzLmdldEJ5dGVUaW1lRG9tYWluRGF0YShlKTtmb3IodmFyIGk9MDtpPGUubGVuZ3RoO2krKyl0W2ldPShlW2ldLTEyOCkvMTI4fSkpLHMuZGVmYXVsdC5BbmFseXNlcj1mdW5jdGlvbigpe3ZhciB0PXMuZGVmYXVsdC5kZWZhdWx0cyhhcmd1bWVudHMsW1widHlwZVwiLFwic2l6ZVwiXSxzLmRlZmF1bHQuQW5hbHlzZXIpO3MuZGVmYXVsdC5BdWRpb05vZGUuY2FsbCh0aGlzKSx0aGlzLl9hbmFseXNlcj10aGlzLmlucHV0PXRoaXMub3V0cHV0PXRoaXMuY29udGV4dC5jcmVhdGVBbmFseXNlcigpLHRoaXMuX3R5cGU9dC50eXBlLHRoaXMuX2J1ZmZlcj1udWxsLHRoaXMuc2l6ZT10LnNpemUsdGhpcy50eXBlPXQudHlwZX0scy5kZWZhdWx0LmV4dGVuZChzLmRlZmF1bHQuQW5hbHlzZXIscy5kZWZhdWx0LkF1ZGlvTm9kZSkscy5kZWZhdWx0LkFuYWx5c2VyLmRlZmF1bHRzPXtzaXplOjEwMjQsdHlwZTpcImZmdFwiLHNtb290aGluZzouOH0scy5kZWZhdWx0LkFuYWx5c2VyLlR5cGU9e1dhdmVmb3JtOlwid2F2ZWZvcm1cIixGRlQ6XCJmZnRcIn0scy5kZWZhdWx0LkFuYWx5c2VyLnByb3RvdHlwZS5nZXRWYWx1ZT1mdW5jdGlvbigpe3JldHVybiB0aGlzLl90eXBlPT09cy5kZWZhdWx0LkFuYWx5c2VyLlR5cGUuRkZUP3RoaXMuX2FuYWx5c2VyLmdldEZsb2F0RnJlcXVlbmN5RGF0YSh0aGlzLl9idWZmZXIpOnRoaXMuX3R5cGU9PT1zLmRlZmF1bHQuQW5hbHlzZXIuVHlwZS5XYXZlZm9ybSYmdGhpcy5fYW5hbHlzZXIuZ2V0RmxvYXRUaW1lRG9tYWluRGF0YSh0aGlzLl9idWZmZXIpLHRoaXMuX2J1ZmZlcn0sT2JqZWN0LmRlZmluZVByb3BlcnR5KHMuZGVmYXVsdC5BbmFseXNlci5wcm90b3R5cGUsXCJzaXplXCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9hbmFseXNlci5mcmVxdWVuY3lCaW5Db3VudH0sc2V0OmZ1bmN0aW9uKHQpe3RoaXMuX2FuYWx5c2VyLmZmdFNpemU9Mip0LHRoaXMuX2J1ZmZlcj1uZXcgRmxvYXQzMkFycmF5KHQpfX0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShzLmRlZmF1bHQuQW5hbHlzZXIucHJvdG90eXBlLFwidHlwZVwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fdHlwZX0sc2V0OmZ1bmN0aW9uKHQpe2lmKHQhPT1zLmRlZmF1bHQuQW5hbHlzZXIuVHlwZS5XYXZlZm9ybSYmdCE9PXMuZGVmYXVsdC5BbmFseXNlci5UeXBlLkZGVCl0aHJvdyBuZXcgVHlwZUVycm9yKFwiVG9uZS5BbmFseXNlcjogaW52YWxpZCB0eXBlOiBcIit0KTt0aGlzLl90eXBlPXR9fSksT2JqZWN0LmRlZmluZVByb3BlcnR5KHMuZGVmYXVsdC5BbmFseXNlci5wcm90b3R5cGUsXCJzbW9vdGhpbmdcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2FuYWx5c2VyLnNtb290aGluZ1RpbWVDb25zdGFudH0sc2V0OmZ1bmN0aW9uKHQpe3RoaXMuX2FuYWx5c2VyLnNtb290aGluZ1RpbWVDb25zdGFudD10fX0pLHMuZGVmYXVsdC5BbmFseXNlci5wcm90b3R5cGUuZGlzcG9zZT1mdW5jdGlvbigpe3MuZGVmYXVsdC5BdWRpb05vZGUucHJvdG90eXBlLmRpc3Bvc2UuY2FsbCh0aGlzKSx0aGlzLl9hbmFseXNlci5kaXNjb25uZWN0KCksdGhpcy5fYW5hbHlzZXI9bnVsbCx0aGlzLl9idWZmZXI9bnVsbH07ZS5kZWZhdWx0PXMuZGVmYXVsdC5BbmFseXNlcn0sZnVuY3Rpb24odCxlLGkpe1widXNlIHN0cmljdFwiO2kucihlKTt2YXIgcz1pKDApO2koNiksaSgxNyksaSg1MCksaSg2OSksaSg0OSksaSg2OCksaSg2Nyk7cy5kZWZhdWx0Lk9tbmlPc2NpbGxhdG9yPWZ1bmN0aW9uKCl7dmFyIHQ9cy5kZWZhdWx0LmRlZmF1bHRzKGFyZ3VtZW50cyxbXCJmcmVxdWVuY3lcIixcInR5cGVcIl0scy5kZWZhdWx0Lk9tbmlPc2NpbGxhdG9yKTtzLmRlZmF1bHQuU291cmNlLmNhbGwodGhpcyx0KSx0aGlzLmZyZXF1ZW5jeT1uZXcgcy5kZWZhdWx0LlNpZ25hbCh0LmZyZXF1ZW5jeSxzLmRlZmF1bHQuVHlwZS5GcmVxdWVuY3kpLHRoaXMuZGV0dW5lPW5ldyBzLmRlZmF1bHQuU2lnbmFsKHQuZGV0dW5lLHMuZGVmYXVsdC5UeXBlLkNlbnRzKSx0aGlzLl9zb3VyY2VUeXBlPXZvaWQgMCx0aGlzLl9vc2NpbGxhdG9yPW51bGwsdGhpcy50eXBlPXQudHlwZSx0aGlzLl9yZWFkT25seShbXCJmcmVxdWVuY3lcIixcImRldHVuZVwiXSksdGhpcy5zZXQodCl9LHMuZGVmYXVsdC5leHRlbmQocy5kZWZhdWx0Lk9tbmlPc2NpbGxhdG9yLHMuZGVmYXVsdC5Tb3VyY2UpLHMuZGVmYXVsdC5PbW5pT3NjaWxsYXRvci5kZWZhdWx0cz17ZnJlcXVlbmN5OjQ0MCxkZXR1bmU6MCx0eXBlOlwic2luZVwiLHBoYXNlOjB9O3ZhciBuPVwiUHVsc2VPc2NpbGxhdG9yXCIsbz1cIlBXTU9zY2lsbGF0b3JcIixhPVwiT3NjaWxsYXRvclwiLHI9XCJGTU9zY2lsbGF0b3JcIixsPVwiQU1Pc2NpbGxhdG9yXCIsdT1cIkZhdE9zY2lsbGF0b3JcIjtzLmRlZmF1bHQuT21uaU9zY2lsbGF0b3IucHJvdG90eXBlLl9zdGFydD1mdW5jdGlvbih0KXt0aGlzLl9vc2NpbGxhdG9yLnN0YXJ0KHQpfSxzLmRlZmF1bHQuT21uaU9zY2lsbGF0b3IucHJvdG90eXBlLl9zdG9wPWZ1bmN0aW9uKHQpe3RoaXMuX29zY2lsbGF0b3Iuc3RvcCh0KX0scy5kZWZhdWx0Lk9tbmlPc2NpbGxhdG9yLnByb3RvdHlwZS5yZXN0YXJ0PWZ1bmN0aW9uKHQpe3RoaXMuX29zY2lsbGF0b3IucmVzdGFydCh0KX0sT2JqZWN0LmRlZmluZVByb3BlcnR5KHMuZGVmYXVsdC5PbW5pT3NjaWxsYXRvci5wcm90b3R5cGUsXCJ0eXBlXCIse2dldDpmdW5jdGlvbigpe3ZhciB0PVwiXCI7cmV0dXJuIHRoaXMuX3NvdXJjZVR5cGU9PT1yP3Q9XCJmbVwiOnRoaXMuX3NvdXJjZVR5cGU9PT1sP3Q9XCJhbVwiOnRoaXMuX3NvdXJjZVR5cGU9PT11JiYodD1cImZhdFwiKSx0K3RoaXMuX29zY2lsbGF0b3IudHlwZX0sc2V0OmZ1bmN0aW9uKHQpe1wiZm1cIj09PXQuc3Vic3RyKDAsMik/KHRoaXMuX2NyZWF0ZU5ld09zY2lsbGF0b3IociksdGhpcy5fb3NjaWxsYXRvci50eXBlPXQuc3Vic3RyKDIpKTpcImFtXCI9PT10LnN1YnN0cigwLDIpPyh0aGlzLl9jcmVhdGVOZXdPc2NpbGxhdG9yKGwpLHRoaXMuX29zY2lsbGF0b3IudHlwZT10LnN1YnN0cigyKSk6XCJmYXRcIj09PXQuc3Vic3RyKDAsMyk/KHRoaXMuX2NyZWF0ZU5ld09zY2lsbGF0b3IodSksdGhpcy5fb3NjaWxsYXRvci50eXBlPXQuc3Vic3RyKDMpKTpcInB3bVwiPT09dD90aGlzLl9jcmVhdGVOZXdPc2NpbGxhdG9yKG8pOlwicHVsc2VcIj09PXQ/dGhpcy5fY3JlYXRlTmV3T3NjaWxsYXRvcihuKToodGhpcy5fY3JlYXRlTmV3T3NjaWxsYXRvcihhKSx0aGlzLl9vc2NpbGxhdG9yLnR5cGU9dCl9fSksT2JqZWN0LmRlZmluZVByb3BlcnR5KHMuZGVmYXVsdC5PbW5pT3NjaWxsYXRvci5wcm90b3R5cGUsXCJwYXJ0aWFsc1wiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fb3NjaWxsYXRvci5wYXJ0aWFsc30sc2V0OmZ1bmN0aW9uKHQpe3RoaXMuX29zY2lsbGF0b3IucGFydGlhbHM9dH19KSxPYmplY3QuZGVmaW5lUHJvcGVydHkocy5kZWZhdWx0Lk9tbmlPc2NpbGxhdG9yLnByb3RvdHlwZSxcInBhcnRpYWxDb3VudFwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fb3NjaWxsYXRvci5wYXJ0aWFsQ291bnR9LHNldDpmdW5jdGlvbih0KXt0aGlzLl9vc2NpbGxhdG9yLnBhcnRpYWxDb3VudD10fX0pLHMuZGVmYXVsdC5PbW5pT3NjaWxsYXRvci5wcm90b3R5cGUuc2V0PWZ1bmN0aW9uKHQsZSl7cmV0dXJuXCJ0eXBlXCI9PT10P3RoaXMudHlwZT1lOnMuZGVmYXVsdC5pc09iamVjdCh0KSYmdC5oYXNPd25Qcm9wZXJ0eShcInR5cGVcIikmJih0aGlzLnR5cGU9dC50eXBlKSxzLmRlZmF1bHQucHJvdG90eXBlLnNldC5hcHBseSh0aGlzLGFyZ3VtZW50cyksdGhpc30scy5kZWZhdWx0Lk9tbmlPc2NpbGxhdG9yLnByb3RvdHlwZS5nZXQ9ZnVuY3Rpb24odCl7dmFyIGU9dGhpcy5fb3NjaWxsYXRvci5nZXQodCk7cmV0dXJuIGUudHlwZT10aGlzLnR5cGUsZX0scy5kZWZhdWx0Lk9tbmlPc2NpbGxhdG9yLnByb3RvdHlwZS5fY3JlYXRlTmV3T3NjaWxsYXRvcj1mdW5jdGlvbih0KXtpZih0IT09dGhpcy5fc291cmNlVHlwZSl7dGhpcy5fc291cmNlVHlwZT10O3ZhciBlPXMuZGVmYXVsdFt0XSxpPXRoaXMubm93KCk7aWYobnVsbCE9PXRoaXMuX29zY2lsbGF0b3Ipe3ZhciBuPXRoaXMuX29zY2lsbGF0b3I7bi5zdG9wKGkpLHRoaXMuY29udGV4dC5zZXRUaW1lb3V0KGZ1bmN0aW9uKCl7bi5kaXNwb3NlKCksbj1udWxsfSx0aGlzLmJsb2NrVGltZSl9dGhpcy5fb3NjaWxsYXRvcj1uZXcgZSx0aGlzLmZyZXF1ZW5jeS5jb25uZWN0KHRoaXMuX29zY2lsbGF0b3IuZnJlcXVlbmN5KSx0aGlzLmRldHVuZS5jb25uZWN0KHRoaXMuX29zY2lsbGF0b3IuZGV0dW5lKSx0aGlzLl9vc2NpbGxhdG9yLmNvbm5lY3QodGhpcy5vdXRwdXQpLHRoaXMuc3RhdGU9PT1zLmRlZmF1bHQuU3RhdGUuU3RhcnRlZCYmdGhpcy5fb3NjaWxsYXRvci5zdGFydChpKX19LE9iamVjdC5kZWZpbmVQcm9wZXJ0eShzLmRlZmF1bHQuT21uaU9zY2lsbGF0b3IucHJvdG90eXBlLFwicGhhc2VcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX29zY2lsbGF0b3IucGhhc2V9LHNldDpmdW5jdGlvbih0KXt0aGlzLl9vc2NpbGxhdG9yLnBoYXNlPXR9fSk7dmFyIGQ9e1B1bHNlT3NjaWxsYXRvcjpcInB1bHNlXCIsUFdNT3NjaWxsYXRvcjpcInB3bVwiLE9zY2lsbGF0b3I6XCJvc2NpbGxhdG9yXCIsRk1Pc2NpbGxhdG9yOlwiZm1cIixBTU9zY2lsbGF0b3I6XCJhbVwiLEZhdE9zY2lsbGF0b3I6XCJmYXRcIn07T2JqZWN0LmRlZmluZVByb3BlcnR5KHMuZGVmYXVsdC5PbW5pT3NjaWxsYXRvci5wcm90b3R5cGUsXCJzb3VyY2VUeXBlXCIse2dldDpmdW5jdGlvbigpe3JldHVybiBkW3RoaXMuX3NvdXJjZVR5cGVdfSxzZXQ6ZnVuY3Rpb24odCl7dmFyIGU9XCJzaW5lXCI7XCJwd21cIiE9PXRoaXMuX29zY2lsbGF0b3IudHlwZSYmXCJwdWxzZVwiIT09dGhpcy5fb3NjaWxsYXRvci50eXBlJiYoZT10aGlzLl9vc2NpbGxhdG9yLnR5cGUpLHQ9PT1kLkZNT3NjaWxsYXRvcj90aGlzLnR5cGU9XCJmbVwiK2U6dD09PWQuQU1Pc2NpbGxhdG9yP3RoaXMudHlwZT1cImFtXCIrZTp0PT09ZC5GYXRPc2NpbGxhdG9yP3RoaXMudHlwZT1cImZhdFwiK2U6dD09PWQuT3NjaWxsYXRvcj90aGlzLnR5cGU9ZTp0PT09ZC5QdWxzZU9zY2lsbGF0b3I/dGhpcy50eXBlPVwicHVsc2VcIjp0PT09ZC5QV01Pc2NpbGxhdG9yJiYodGhpcy50eXBlPVwicHdtXCIpfX0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShzLmRlZmF1bHQuT21uaU9zY2lsbGF0b3IucHJvdG90eXBlLFwiYmFzZVR5cGVcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX29zY2lsbGF0b3IuYmFzZVR5cGV9LHNldDpmdW5jdGlvbih0KXt0aGlzLnNvdXJjZVR5cGUhPT1kLlB1bHNlT3NjaWxsYXRvciYmdGhpcy5zb3VyY2VUeXBlIT09ZC5QV01Pc2NpbGxhdG9yJiYodGhpcy5fb3NjaWxsYXRvci5iYXNlVHlwZT10KX19KSxPYmplY3QuZGVmaW5lUHJvcGVydHkocy5kZWZhdWx0Lk9tbmlPc2NpbGxhdG9yLnByb3RvdHlwZSxcIndpZHRoXCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9zb3VyY2VUeXBlPT09bj90aGlzLl9vc2NpbGxhdG9yLndpZHRoOnZvaWQgMH19KSxPYmplY3QuZGVmaW5lUHJvcGVydHkocy5kZWZhdWx0Lk9tbmlPc2NpbGxhdG9yLnByb3RvdHlwZSxcImNvdW50XCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9zb3VyY2VUeXBlPT09dT90aGlzLl9vc2NpbGxhdG9yLmNvdW50OnZvaWQgMH0sc2V0OmZ1bmN0aW9uKHQpe3RoaXMuX3NvdXJjZVR5cGU9PT11JiYodGhpcy5fb3NjaWxsYXRvci5jb3VudD10KX19KSxPYmplY3QuZGVmaW5lUHJvcGVydHkocy5kZWZhdWx0Lk9tbmlPc2NpbGxhdG9yLnByb3RvdHlwZSxcInNwcmVhZFwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fc291cmNlVHlwZT09PXU/dGhpcy5fb3NjaWxsYXRvci5zcHJlYWQ6dm9pZCAwfSxzZXQ6ZnVuY3Rpb24odCl7dGhpcy5fc291cmNlVHlwZT09PXUmJih0aGlzLl9vc2NpbGxhdG9yLnNwcmVhZD10KX19KSxPYmplY3QuZGVmaW5lUHJvcGVydHkocy5kZWZhdWx0Lk9tbmlPc2NpbGxhdG9yLnByb3RvdHlwZSxcIm1vZHVsYXRpb25UeXBlXCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9zb3VyY2VUeXBlPT09cnx8dGhpcy5fc291cmNlVHlwZT09PWw/dGhpcy5fb3NjaWxsYXRvci5tb2R1bGF0aW9uVHlwZTp2b2lkIDB9LHNldDpmdW5jdGlvbih0KXt0aGlzLl9zb3VyY2VUeXBlIT09ciYmdGhpcy5fc291cmNlVHlwZSE9PWx8fCh0aGlzLl9vc2NpbGxhdG9yLm1vZHVsYXRpb25UeXBlPXQpfX0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShzLmRlZmF1bHQuT21uaU9zY2lsbGF0b3IucHJvdG90eXBlLFwibW9kdWxhdGlvbkluZGV4XCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9zb3VyY2VUeXBlPT09cj90aGlzLl9vc2NpbGxhdG9yLm1vZHVsYXRpb25JbmRleDp2b2lkIDB9fSksT2JqZWN0LmRlZmluZVByb3BlcnR5KHMuZGVmYXVsdC5PbW5pT3NjaWxsYXRvci5wcm90b3R5cGUsXCJoYXJtb25pY2l0eVwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fc291cmNlVHlwZT09PXJ8fHRoaXMuX3NvdXJjZVR5cGU9PT1sP3RoaXMuX29zY2lsbGF0b3IuaGFybW9uaWNpdHk6dm9pZCAwfX0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShzLmRlZmF1bHQuT21uaU9zY2lsbGF0b3IucHJvdG90eXBlLFwibW9kdWxhdGlvbkZyZXF1ZW5jeVwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fc291cmNlVHlwZT09PW8/dGhpcy5fb3NjaWxsYXRvci5tb2R1bGF0aW9uRnJlcXVlbmN5OnZvaWQgMH19KSxzLmRlZmF1bHQuT21uaU9zY2lsbGF0b3IucHJvdG90eXBlLmRpc3Bvc2U9ZnVuY3Rpb24oKXtyZXR1cm4gcy5kZWZhdWx0LlNvdXJjZS5wcm90b3R5cGUuZGlzcG9zZS5jYWxsKHRoaXMpLHRoaXMuX3dyaXRhYmxlKFtcImZyZXF1ZW5jeVwiLFwiZGV0dW5lXCJdKSx0aGlzLmRldHVuZS5kaXNwb3NlKCksdGhpcy5kZXR1bmU9bnVsbCx0aGlzLmZyZXF1ZW5jeS5kaXNwb3NlKCksdGhpcy5mcmVxdWVuY3k9bnVsbCx0aGlzLl9vc2NpbGxhdG9yLmRpc3Bvc2UoKSx0aGlzLl9vc2NpbGxhdG9yPW51bGwsdGhpcy5fc291cmNlVHlwZT1udWxsLHRoaXN9LGUuZGVmYXVsdD1zLmRlZmF1bHQuT21uaU9zY2lsbGF0b3J9LGZ1bmN0aW9uKHQsZSxpKXtcInVzZSBzdHJpY3RcIjtpLnIoZSk7dmFyIHM9aSgwKTtpKDMxKSxpKDM3KSxpKDI1KTtzLmRlZmF1bHQuU3ludGg9ZnVuY3Rpb24odCl7dD1zLmRlZmF1bHQuZGVmYXVsdEFyZyh0LHMuZGVmYXVsdC5TeW50aC5kZWZhdWx0cykscy5kZWZhdWx0Lk1vbm9waG9uaWMuY2FsbCh0aGlzLHQpLHRoaXMub3NjaWxsYXRvcj1uZXcgcy5kZWZhdWx0Lk9tbmlPc2NpbGxhdG9yKHQub3NjaWxsYXRvciksdGhpcy5mcmVxdWVuY3k9dGhpcy5vc2NpbGxhdG9yLmZyZXF1ZW5jeSx0aGlzLmRldHVuZT10aGlzLm9zY2lsbGF0b3IuZGV0dW5lLHRoaXMuZW52ZWxvcGU9bmV3IHMuZGVmYXVsdC5BbXBsaXR1ZGVFbnZlbG9wZSh0LmVudmVsb3BlKSx0aGlzLm9zY2lsbGF0b3IuY2hhaW4odGhpcy5lbnZlbG9wZSx0aGlzLm91dHB1dCksdGhpcy5fcmVhZE9ubHkoW1wib3NjaWxsYXRvclwiLFwiZnJlcXVlbmN5XCIsXCJkZXR1bmVcIixcImVudmVsb3BlXCJdKX0scy5kZWZhdWx0LmV4dGVuZChzLmRlZmF1bHQuU3ludGgscy5kZWZhdWx0Lk1vbm9waG9uaWMpLHMuZGVmYXVsdC5TeW50aC5kZWZhdWx0cz17b3NjaWxsYXRvcjp7dHlwZTpcInRyaWFuZ2xlXCJ9LGVudmVsb3BlOnthdHRhY2s6LjAwNSxkZWNheTouMSxzdXN0YWluOi4zLHJlbGVhc2U6MX19LHMuZGVmYXVsdC5TeW50aC5wcm90b3R5cGUuX3RyaWdnZXJFbnZlbG9wZUF0dGFjaz1mdW5jdGlvbih0LGUpe3JldHVybiB0aGlzLmVudmVsb3BlLnRyaWdnZXJBdHRhY2sodCxlKSx0aGlzLm9zY2lsbGF0b3Iuc3RhcnQodCksMD09PXRoaXMuZW52ZWxvcGUuc3VzdGFpbiYmdGhpcy5vc2NpbGxhdG9yLnN0b3AodCt0aGlzLnRvU2Vjb25kcyh0aGlzLmVudmVsb3BlLmF0dGFjaykrdGhpcy50b1NlY29uZHModGhpcy5lbnZlbG9wZS5kZWNheSkpLHRoaXN9LHMuZGVmYXVsdC5TeW50aC5wcm90b3R5cGUuX3RyaWdnZXJFbnZlbG9wZVJlbGVhc2U9ZnVuY3Rpb24odCl7cmV0dXJuIHQ9dGhpcy50b1NlY29uZHModCksdGhpcy5lbnZlbG9wZS50cmlnZ2VyUmVsZWFzZSh0KSx0aGlzLm9zY2lsbGF0b3Iuc3RvcCh0K3RoaXMudG9TZWNvbmRzKHRoaXMuZW52ZWxvcGUucmVsZWFzZSkpLHRoaXN9LHMuZGVmYXVsdC5TeW50aC5wcm90b3R5cGUuZGlzcG9zZT1mdW5jdGlvbigpe3JldHVybiBzLmRlZmF1bHQuTW9ub3Bob25pYy5wcm90b3R5cGUuZGlzcG9zZS5jYWxsKHRoaXMpLHRoaXMuX3dyaXRhYmxlKFtcIm9zY2lsbGF0b3JcIixcImZyZXF1ZW5jeVwiLFwiZGV0dW5lXCIsXCJlbnZlbG9wZVwiXSksdGhpcy5vc2NpbGxhdG9yLmRpc3Bvc2UoKSx0aGlzLm9zY2lsbGF0b3I9bnVsbCx0aGlzLmVudmVsb3BlLmRpc3Bvc2UoKSx0aGlzLmVudmVsb3BlPW51bGwsdGhpcy5mcmVxdWVuY3k9bnVsbCx0aGlzLmRldHVuZT1udWxsLHRoaXN9LGUuZGVmYXVsdD1zLmRlZmF1bHQuU3ludGh9LGZ1bmN0aW9uKHQsZSxpKXtcInVzZSBzdHJpY3RcIjtpLnIoZSk7dmFyIHM9aSgwKTtpKDYpLGkoMTEpLGkoMzIpO3MuZGVmYXVsdC5Ob2lzZT1mdW5jdGlvbigpe3ZhciB0PXMuZGVmYXVsdC5kZWZhdWx0cyhhcmd1bWVudHMsW1widHlwZVwiXSxzLmRlZmF1bHQuTm9pc2UpO3MuZGVmYXVsdC5Tb3VyY2UuY2FsbCh0aGlzLHQpLHRoaXMuX3NvdXJjZT1udWxsLHRoaXMuX3R5cGU9dC50eXBlLHRoaXMuX3BsYXliYWNrUmF0ZT10LnBsYXliYWNrUmF0ZX0scy5kZWZhdWx0LmV4dGVuZChzLmRlZmF1bHQuTm9pc2Uscy5kZWZhdWx0LlNvdXJjZSkscy5kZWZhdWx0Lk5vaXNlLmRlZmF1bHRzPXt0eXBlOlwid2hpdGVcIixwbGF5YmFja1JhdGU6MX0sT2JqZWN0LmRlZmluZVByb3BlcnR5KHMuZGVmYXVsdC5Ob2lzZS5wcm90b3R5cGUsXCJ0eXBlXCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl90eXBlfSxzZXQ6ZnVuY3Rpb24odCl7aWYodGhpcy5fdHlwZSE9PXQpe2lmKCEodCBpbiBuKSl0aHJvdyBuZXcgVHlwZUVycm9yKFwiVG9uZS5Ob2lzZTogaW52YWxpZCB0eXBlOiBcIit0KTtpZih0aGlzLl90eXBlPXQsdGhpcy5zdGF0ZT09PXMuZGVmYXVsdC5TdGF0ZS5TdGFydGVkKXt2YXIgZT10aGlzLm5vdygpO3RoaXMuX3N0b3AoZSksdGhpcy5fc3RhcnQoZSl9fX19KSxPYmplY3QuZGVmaW5lUHJvcGVydHkocy5kZWZhdWx0Lk5vaXNlLnByb3RvdHlwZSxcInBsYXliYWNrUmF0ZVwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fcGxheWJhY2tSYXRlfSxzZXQ6ZnVuY3Rpb24odCl7dGhpcy5fcGxheWJhY2tSYXRlPXQsdGhpcy5fc291cmNlJiYodGhpcy5fc291cmNlLnBsYXliYWNrUmF0ZS52YWx1ZT10KX19KSxzLmRlZmF1bHQuTm9pc2UucHJvdG90eXBlLl9zdGFydD1mdW5jdGlvbih0KXt2YXIgZT1uW3RoaXMuX3R5cGVdO3RoaXMuX3NvdXJjZT1uZXcgcy5kZWZhdWx0LkJ1ZmZlclNvdXJjZShlKS5jb25uZWN0KHRoaXMub3V0cHV0KSx0aGlzLl9zb3VyY2UubG9vcD0hMCx0aGlzLl9zb3VyY2UucGxheWJhY2tSYXRlLnZhbHVlPXRoaXMuX3BsYXliYWNrUmF0ZSx0aGlzLl9zb3VyY2Uuc3RhcnQodGhpcy50b1NlY29uZHModCksTWF0aC5yYW5kb20oKSooZS5kdXJhdGlvbi0uMDAxKSl9LHMuZGVmYXVsdC5Ob2lzZS5wcm90b3R5cGUuX3N0b3A9ZnVuY3Rpb24odCl7dGhpcy5fc291cmNlJiYodGhpcy5fc291cmNlLnN0b3AodGhpcy50b1NlY29uZHModCkpLHRoaXMuX3NvdXJjZT1udWxsKX0scy5kZWZhdWx0Lk5vaXNlLnByb3RvdHlwZS5yZXN0YXJ0PWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLl9zdG9wKHQpLHRoaXMuX3N0YXJ0KHQpLHRoaXN9LHMuZGVmYXVsdC5Ob2lzZS5wcm90b3R5cGUuZGlzcG9zZT1mdW5jdGlvbigpe3JldHVybiBzLmRlZmF1bHQuU291cmNlLnByb3RvdHlwZS5kaXNwb3NlLmNhbGwodGhpcyksbnVsbCE9PXRoaXMuX3NvdXJjZSYmKHRoaXMuX3NvdXJjZS5kaXNjb25uZWN0KCksdGhpcy5fc291cmNlPW51bGwpLHRoaXMuX2J1ZmZlcj1udWxsLHRoaXN9O3ZhciBuPXt9LG89e307T2JqZWN0LmRlZmluZVByb3BlcnR5KG4sXCJwaW5rXCIse2dldDpmdW5jdGlvbigpe2lmKCFvLnBpbmspe2Zvcih2YXIgdD1bXSxlPTA7ZTwyO2UrKyl7dmFyIGksbixhLHIsbCx1LGQsZj1uZXcgRmxvYXQzMkFycmF5KDIyMDUwMCk7dFtlXT1mLGk9bj1hPXI9bD11PWQ9MDtmb3IodmFyIGg9MDtoPDIyMDUwMDtoKyspe3ZhciBjPTIqTWF0aC5yYW5kb20oKS0xO2k9Ljk5ODg2KmkrLjA1NTUxNzkqYyxuPS45OTMzMipuKy4wNzUwNzU5KmMsYT0uOTY5KmErLjE1Mzg1MipjLHI9Ljg2NjUqcisuMzEwNDg1NipjLGw9LjU1KmwrLjUzMjk1MjIqYyx1PS0uNzYxNip1LS4wMTY4OTgqYyxmW2hdPWkrbithK3IrbCt1K2QrLjUzNjIqYyxmW2hdKj0uMTEsZD0uMTE1OTI2KmN9fW8ucGluaz0obmV3IHMuZGVmYXVsdC5CdWZmZXIpLmZyb21BcnJheSh0KX1yZXR1cm4gby5waW5rfX0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShuLFwiYnJvd25cIix7Z2V0OmZ1bmN0aW9uKCl7aWYoIW8uYnJvd24pe2Zvcih2YXIgdD1bXSxlPTA7ZTwyO2UrKyl7dmFyIGk9bmV3IEZsb2F0MzJBcnJheSgyMjA1MDApO3RbZV09aTtmb3IodmFyIG49MCxhPTA7YTwyMjA1MDA7YSsrKXt2YXIgcj0yKk1hdGgucmFuZG9tKCktMTtpW2FdPShuKy4wMipyKS8xLjAyLG49aVthXSxpW2FdKj0zLjV9fW8uYnJvd249KG5ldyBzLmRlZmF1bHQuQnVmZmVyKS5mcm9tQXJyYXkodCl9cmV0dXJuIG8uYnJvd259fSksT2JqZWN0LmRlZmluZVByb3BlcnR5KG4sXCJ3aGl0ZVwiLHtnZXQ6ZnVuY3Rpb24oKXtpZighby53aGl0ZSl7Zm9yKHZhciB0PVtdLGU9MDtlPDI7ZSsrKXt2YXIgaT1uZXcgRmxvYXQzMkFycmF5KDIyMDUwMCk7dFtlXT1pO2Zvcih2YXIgbj0wO248MjIwNTAwO24rKylpW25dPTIqTWF0aC5yYW5kb20oKS0xfW8ud2hpdGU9KG5ldyBzLmRlZmF1bHQuQnVmZmVyKS5mcm9tQXJyYXkodCl9cmV0dXJuIG8ud2hpdGV9fSksZS5kZWZhdWx0PXMuZGVmYXVsdC5Ob2lzZX0sZnVuY3Rpb24odCxlLGkpe1widXNlIHN0cmljdFwiO2kucihlKTt2YXIgcz1pKDApO2koMjcpLGkoMjApLGkoMSk7cy5kZWZhdWx0Lk1hc3Rlcj1mdW5jdGlvbigpe3MuZGVmYXVsdC5BdWRpb05vZGUuY2FsbCh0aGlzKSxzLmRlZmF1bHQuZ2V0Q29udGV4dChmdW5jdGlvbigpe3RoaXMuY3JlYXRlSW5zT3V0cygxLDApLHRoaXMuX3ZvbHVtZT10aGlzLm91dHB1dD1uZXcgcy5kZWZhdWx0LlZvbHVtZSx0aGlzLnZvbHVtZT10aGlzLl92b2x1bWUudm9sdW1lLHRoaXMuX3JlYWRPbmx5KFwidm9sdW1lXCIpLHMuZGVmYXVsdC5jb25uZWN0U2VyaWVzKHRoaXMuaW5wdXQsdGhpcy5vdXRwdXQsdGhpcy5jb250ZXh0LmRlc3RpbmF0aW9uKSx0aGlzLmNvbnRleHQubWFzdGVyPXRoaXN9LmJpbmQodGhpcykpfSxzLmRlZmF1bHQuZXh0ZW5kKHMuZGVmYXVsdC5NYXN0ZXIscy5kZWZhdWx0LkF1ZGlvTm9kZSkscy5kZWZhdWx0Lk1hc3Rlci5kZWZhdWx0cz17dm9sdW1lOjAsbXV0ZTohMX0scy5kZWZhdWx0Lk1hc3Rlci5wcm90b3R5cGUuaXNNYXN0ZXI9ITAsT2JqZWN0LmRlZmluZVByb3BlcnR5KHMuZGVmYXVsdC5NYXN0ZXIucHJvdG90eXBlLFwibXV0ZVwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fdm9sdW1lLm11dGV9LHNldDpmdW5jdGlvbih0KXt0aGlzLl92b2x1bWUubXV0ZT10fX0pLHMuZGVmYXVsdC5NYXN0ZXIucHJvdG90eXBlLmNoYWluPWZ1bmN0aW9uKCl7dGhpcy5pbnB1dC5kaXNjb25uZWN0KCk7dmFyIHQ9QXJyYXkuZnJvbShhcmd1bWVudHMpO3QudW5zaGlmdCh0aGlzLmlucHV0KSx0LnB1c2godGhpcy5vdXRwdXQpLHMuZGVmYXVsdC5jb25uZWN0U2VyaWVzLmFwcGx5KHZvaWQgMCx0KX0scy5kZWZhdWx0Lk1hc3Rlci5wcm90b3R5cGUuZGlzcG9zZT1mdW5jdGlvbigpe3MuZGVmYXVsdC5BdWRpb05vZGUucHJvdG90eXBlLmRpc3Bvc2UuY2FsbCh0aGlzKSx0aGlzLl93cml0YWJsZShcInZvbHVtZVwiKSx0aGlzLl92b2x1bWUuZGlzcG9zZSgpLHRoaXMuX3ZvbHVtZT1udWxsLHRoaXMudm9sdW1lPW51bGx9LHMuZGVmYXVsdC5BdWRpb05vZGUucHJvdG90eXBlLnRvTWFzdGVyPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuY29ubmVjdCh0aGlzLmNvbnRleHQubWFzdGVyKSx0aGlzfTt2YXIgbj1zLmRlZmF1bHQuTWFzdGVyO3MuZGVmYXVsdC5NYXN0ZXI9bmV3IG4scy5kZWZhdWx0LkNvbnRleHQub24oXCJpbml0XCIsZnVuY3Rpb24odCl7dC5tYXN0ZXImJnQubWFzdGVyLmlzTWFzdGVyP3MuZGVmYXVsdC5NYXN0ZXI9dC5tYXN0ZXI6cy5kZWZhdWx0Lk1hc3Rlcj1uZXcgbn0pLHMuZGVmYXVsdC5Db250ZXh0Lm9uKFwiY2xvc2VcIixmdW5jdGlvbih0KXt0Lm1hc3RlciYmdC5tYXN0ZXIuaXNNYXN0ZXImJnQubWFzdGVyLmRpc3Bvc2UoKX0pLGUuZGVmYXVsdD1zLmRlZmF1bHQuTWFzdGVyfSxmdW5jdGlvbih0LGUsaSl7XCJ1c2Ugc3RyaWN0XCI7aS5yKGUpO3ZhciBzPWkoMCk7aSg4NiksaSg0Nyk7cy5kZWZhdWx0LkZyZXF1ZW5jeUVudmVsb3BlPWZ1bmN0aW9uKCl7dmFyIHQ9cy5kZWZhdWx0LmRlZmF1bHRzKGFyZ3VtZW50cyxbXCJhdHRhY2tcIixcImRlY2F5XCIsXCJzdXN0YWluXCIsXCJyZWxlYXNlXCJdLHMuZGVmYXVsdC5FbnZlbG9wZSk7dD1zLmRlZmF1bHQuZGVmYXVsdEFyZyh0LHMuZGVmYXVsdC5GcmVxdWVuY3lFbnZlbG9wZS5kZWZhdWx0cykscy5kZWZhdWx0LlNjYWxlZEVudmVsb3BlLmNhbGwodGhpcyx0KSx0aGlzLl9vY3RhdmVzPXQub2N0YXZlcyx0aGlzLmJhc2VGcmVxdWVuY3k9dC5iYXNlRnJlcXVlbmN5LHRoaXMub2N0YXZlcz10Lm9jdGF2ZXMsdGhpcy5leHBvbmVudD10LmV4cG9uZW50fSxzLmRlZmF1bHQuZXh0ZW5kKHMuZGVmYXVsdC5GcmVxdWVuY3lFbnZlbG9wZSxzLmRlZmF1bHQuRW52ZWxvcGUpLHMuZGVmYXVsdC5GcmVxdWVuY3lFbnZlbG9wZS5kZWZhdWx0cz17YmFzZUZyZXF1ZW5jeToyMDAsb2N0YXZlczo0LGV4cG9uZW50OjF9LE9iamVjdC5kZWZpbmVQcm9wZXJ0eShzLmRlZmF1bHQuRnJlcXVlbmN5RW52ZWxvcGUucHJvdG90eXBlLFwiYmFzZUZyZXF1ZW5jeVwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fc2NhbGUubWlufSxzZXQ6ZnVuY3Rpb24odCl7dGhpcy5fc2NhbGUubWluPXRoaXMudG9GcmVxdWVuY3kodCksdGhpcy5vY3RhdmVzPXRoaXMuX29jdGF2ZXN9fSksT2JqZWN0LmRlZmluZVByb3BlcnR5KHMuZGVmYXVsdC5GcmVxdWVuY3lFbnZlbG9wZS5wcm90b3R5cGUsXCJvY3RhdmVzXCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9vY3RhdmVzfSxzZXQ6ZnVuY3Rpb24odCl7dGhpcy5fb2N0YXZlcz10LHRoaXMuX3NjYWxlLm1heD10aGlzLmJhc2VGcmVxdWVuY3kqTWF0aC5wb3coMix0KX19KSxPYmplY3QuZGVmaW5lUHJvcGVydHkocy5kZWZhdWx0LkZyZXF1ZW5jeUVudmVsb3BlLnByb3RvdHlwZSxcImV4cG9uZW50XCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9leHAudmFsdWV9LHNldDpmdW5jdGlvbih0KXt0aGlzLl9leHAudmFsdWU9dH19KSxzLmRlZmF1bHQuRnJlcXVlbmN5RW52ZWxvcGUucHJvdG90eXBlLmRpc3Bvc2U9ZnVuY3Rpb24oKXtyZXR1cm4gcy5kZWZhdWx0LlNjYWxlZEVudmVsb3BlLnByb3RvdHlwZS5kaXNwb3NlLmNhbGwodGhpcyksdGhpc30sZS5kZWZhdWx0PXMuZGVmYXVsdC5GcmVxdWVuY3lFbnZlbG9wZX0sZnVuY3Rpb24odCxlLGkpe1widXNlIHN0cmljdFwiO2kucihlKTt2YXIgcz1pKDApO2koMjYpLGkoNjEpO3MuZGVmYXVsdC5TY2FsZUV4cD1mdW5jdGlvbih0LGUsaSl7cy5kZWZhdWx0LlNpZ25hbEJhc2UuY2FsbCh0aGlzKSx0aGlzLl9zY2FsZT10aGlzLm91dHB1dD1uZXcgcy5kZWZhdWx0LlNjYWxlKHQsZSksdGhpcy5fZXhwPXRoaXMuaW5wdXQ9bmV3IHMuZGVmYXVsdC5Qb3cocy5kZWZhdWx0LmRlZmF1bHRBcmcoaSwyKSksdGhpcy5fZXhwLmNvbm5lY3QodGhpcy5fc2NhbGUpfSxzLmRlZmF1bHQuZXh0ZW5kKHMuZGVmYXVsdC5TY2FsZUV4cCxzLmRlZmF1bHQuU2lnbmFsQmFzZSksT2JqZWN0LmRlZmluZVByb3BlcnR5KHMuZGVmYXVsdC5TY2FsZUV4cC5wcm90b3R5cGUsXCJleHBvbmVudFwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fZXhwLnZhbHVlfSxzZXQ6ZnVuY3Rpb24odCl7dGhpcy5fZXhwLnZhbHVlPXR9fSksT2JqZWN0LmRlZmluZVByb3BlcnR5KHMuZGVmYXVsdC5TY2FsZUV4cC5wcm90b3R5cGUsXCJtaW5cIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3NjYWxlLm1pbn0sc2V0OmZ1bmN0aW9uKHQpe3RoaXMuX3NjYWxlLm1pbj10fX0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShzLmRlZmF1bHQuU2NhbGVFeHAucHJvdG90eXBlLFwibWF4XCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9zY2FsZS5tYXh9LHNldDpmdW5jdGlvbih0KXt0aGlzLl9zY2FsZS5tYXg9dH19KSxzLmRlZmF1bHQuU2NhbGVFeHAucHJvdG90eXBlLmRpc3Bvc2U9ZnVuY3Rpb24oKXtyZXR1cm4gcy5kZWZhdWx0LlNpZ25hbEJhc2UucHJvdG90eXBlLmRpc3Bvc2UuY2FsbCh0aGlzKSx0aGlzLl9zY2FsZS5kaXNwb3NlKCksdGhpcy5fc2NhbGU9bnVsbCx0aGlzLl9leHAuZGlzcG9zZSgpLHRoaXMuX2V4cD1udWxsLHRoaXN9LGUuZGVmYXVsdD1zLmRlZmF1bHQuU2NhbGVFeHB9LGZ1bmN0aW9uKHQsZSxpKXtcInVzZSBzdHJpY3RcIjtpLnIoZSk7dmFyIHM9aSgwKTtpKDE0KSxpKDEpO3MuZGVmYXVsdC5Db21wcmVzc29yPWZ1bmN0aW9uKCl7dmFyIHQ9cy5kZWZhdWx0LmRlZmF1bHRzKGFyZ3VtZW50cyxbXCJ0aHJlc2hvbGRcIixcInJhdGlvXCJdLHMuZGVmYXVsdC5Db21wcmVzc29yKTtzLmRlZmF1bHQuQXVkaW9Ob2RlLmNhbGwodGhpcyksdGhpcy5fY29tcHJlc3Nvcj10aGlzLmlucHV0PXRoaXMub3V0cHV0PXRoaXMuY29udGV4dC5jcmVhdGVEeW5hbWljc0NvbXByZXNzb3IoKSx0aGlzLnRocmVzaG9sZD1uZXcgcy5kZWZhdWx0LlBhcmFtKHtwYXJhbTp0aGlzLl9jb21wcmVzc29yLnRocmVzaG9sZCx1bml0czpzLmRlZmF1bHQuVHlwZS5EZWNpYmVscyxjb252ZXJ0OiExfSksdGhpcy5hdHRhY2s9bmV3IHMuZGVmYXVsdC5QYXJhbSh0aGlzLl9jb21wcmVzc29yLmF0dGFjayxzLmRlZmF1bHQuVHlwZS5UaW1lKSx0aGlzLnJlbGVhc2U9bmV3IHMuZGVmYXVsdC5QYXJhbSh0aGlzLl9jb21wcmVzc29yLnJlbGVhc2Uscy5kZWZhdWx0LlR5cGUuVGltZSksdGhpcy5rbmVlPW5ldyBzLmRlZmF1bHQuUGFyYW0oe3BhcmFtOnRoaXMuX2NvbXByZXNzb3Iua25lZSx1bml0czpzLmRlZmF1bHQuVHlwZS5EZWNpYmVscyxjb252ZXJ0OiExfSksdGhpcy5yYXRpbz1uZXcgcy5kZWZhdWx0LlBhcmFtKHtwYXJhbTp0aGlzLl9jb21wcmVzc29yLnJhdGlvLGNvbnZlcnQ6ITF9KSx0aGlzLl9yZWFkT25seShbXCJrbmVlXCIsXCJyZWxlYXNlXCIsXCJhdHRhY2tcIixcInJhdGlvXCIsXCJ0aHJlc2hvbGRcIl0pLHRoaXMuc2V0KHQpfSxzLmRlZmF1bHQuZXh0ZW5kKHMuZGVmYXVsdC5Db21wcmVzc29yLHMuZGVmYXVsdC5BdWRpb05vZGUpLHMuZGVmYXVsdC5Db21wcmVzc29yLmRlZmF1bHRzPXtyYXRpbzoxMix0aHJlc2hvbGQ6LTI0LHJlbGVhc2U6LjI1LGF0dGFjazouMDAzLGtuZWU6MzB9LHMuZGVmYXVsdC5Db21wcmVzc29yLnByb3RvdHlwZS5kaXNwb3NlPWZ1bmN0aW9uKCl7cmV0dXJuIHMuZGVmYXVsdC5BdWRpb05vZGUucHJvdG90eXBlLmRpc3Bvc2UuY2FsbCh0aGlzKSx0aGlzLl93cml0YWJsZShbXCJrbmVlXCIsXCJyZWxlYXNlXCIsXCJhdHRhY2tcIixcInJhdGlvXCIsXCJ0aHJlc2hvbGRcIl0pLHRoaXMuX2NvbXByZXNzb3IuZGlzY29ubmVjdCgpLHRoaXMuX2NvbXByZXNzb3I9bnVsbCx0aGlzLmF0dGFjay5kaXNwb3NlKCksdGhpcy5hdHRhY2s9bnVsbCx0aGlzLnJlbGVhc2UuZGlzcG9zZSgpLHRoaXMucmVsZWFzZT1udWxsLHRoaXMudGhyZXNob2xkLmRpc3Bvc2UoKSx0aGlzLnRocmVzaG9sZD1udWxsLHRoaXMucmF0aW8uZGlzcG9zZSgpLHRoaXMucmF0aW89bnVsbCx0aGlzLmtuZWUuZGlzcG9zZSgpLHRoaXMua25lZT1udWxsLHRoaXN9LGUuZGVmYXVsdD1zLmRlZmF1bHQuQ29tcHJlc3Nvcn0sZnVuY3Rpb24odCxlLGkpe1widXNlIHN0cmljdFwiO3ZhciBzPWkoMCk7aSg5Mik7aWYocy5kZWZhdWx0LnN1cHBvcnRlZCl7IXMuZGVmYXVsdC5nbG9iYWwuaGFzT3duUHJvcGVydHkoXCJBdWRpb0NvbnRleHRcIikmJnMuZGVmYXVsdC5nbG9iYWwuaGFzT3duUHJvcGVydHkoXCJ3ZWJraXRBdWRpb0NvbnRleHRcIikmJihzLmRlZmF1bHQuZ2xvYmFsLkF1ZGlvQ29udGV4dD1zLmRlZmF1bHQuZ2xvYmFsLndlYmtpdEF1ZGlvQ29udGV4dCksQXVkaW9Db250ZXh0LnByb3RvdHlwZS5jbG9zZXx8KEF1ZGlvQ29udGV4dC5wcm90b3R5cGUuY2xvc2U9ZnVuY3Rpb24oKXtyZXR1cm4gcy5kZWZhdWx0LmlzRnVuY3Rpb24odGhpcy5zdXNwZW5kKSYmdGhpcy5zdXNwZW5kKCksUHJvbWlzZS5yZXNvbHZlKCl9KSxBdWRpb0NvbnRleHQucHJvdG90eXBlLnJlc3VtZXx8KEF1ZGlvQ29udGV4dC5wcm90b3R5cGUucmVzdW1lPWZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy5jcmVhdGVCdWZmZXIoMSwxLHRoaXMuc2FtcGxlUmF0ZSksZT10aGlzLmNyZWF0ZUJ1ZmZlclNvdXJjZSgpO3JldHVybiBlLmJ1ZmZlcj10LGUuY29ubmVjdCh0aGlzLmRlc3RpbmF0aW9uKSxlLnN0YXJ0KDApLFByb21pc2UucmVzb2x2ZSgpfSksIUF1ZGlvQ29udGV4dC5wcm90b3R5cGUuY3JlYXRlR2FpbiYmQXVkaW9Db250ZXh0LnByb3RvdHlwZS5jcmVhdGVHYWluTm9kZSYmKEF1ZGlvQ29udGV4dC5wcm90b3R5cGUuY3JlYXRlR2Fpbj1BdWRpb0NvbnRleHQucHJvdG90eXBlLmNyZWF0ZUdhaW5Ob2RlKSwhQXVkaW9Db250ZXh0LnByb3RvdHlwZS5jcmVhdGVEZWxheSYmQXVkaW9Db250ZXh0LnByb3RvdHlwZS5jcmVhdGVEZWxheU5vZGUmJihBdWRpb0NvbnRleHQucHJvdG90eXBlLmNyZWF0ZURlbGF5PUF1ZGlvQ29udGV4dC5wcm90b3R5cGUuY3JlYXRlRGVsYXlOb2RlKTt2YXIgbj0hMSxvPW5ldyBPZmZsaW5lQXVkaW9Db250ZXh0KDEsMSw0NDEwMCksYT1uZXcgVWludDMyQXJyYXkoWzExNzkwMTE0MTAsNDgsMTE2MzI4MDcyNyw1NDQ1MDEwOTQsMTYsMTMxMDczLDQ0MTAwLDE3NjQwMCwxMDQ4NTgwLDE2MzUwMTcwNjAsOCwwLDAsMCwwXSkuYnVmZmVyO3RyeXt2YXIgcj1vLmRlY29kZUF1ZGlvRGF0YShhKTtyJiZzLmRlZmF1bHQuaXNGdW5jdGlvbihyLnRoZW4pJiYobj0hMCl9Y2F0Y2godCl7bj0hMX1ufHwoQXVkaW9Db250ZXh0LnByb3RvdHlwZS5fbmF0aXZlX2RlY29kZUF1ZGlvRGF0YT1BdWRpb0NvbnRleHQucHJvdG90eXBlLmRlY29kZUF1ZGlvRGF0YSxBdWRpb0NvbnRleHQucHJvdG90eXBlLmRlY29kZUF1ZGlvRGF0YT1mdW5jdGlvbih0KXtyZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24oZSxpKXt0aGlzLl9uYXRpdmVfZGVjb2RlQXVkaW9EYXRhKHQsZSxpKX0uYmluZCh0aGlzKSl9KX19LGZ1bmN0aW9uKHQsZSxpKXtcInVzZSBzdHJpY3RcIjtpLnIoZSk7dmFyIHM9aSgwKTtpKDYzKTtzLmRlZmF1bHQuVHJhbnNwb3J0VGltZT1mdW5jdGlvbih0LGUpe2lmKCEodGhpcyBpbnN0YW5jZW9mIHMuZGVmYXVsdC5UcmFuc3BvcnRUaW1lKSlyZXR1cm4gbmV3IHMuZGVmYXVsdC5UcmFuc3BvcnRUaW1lKHQsZSk7cy5kZWZhdWx0LlRpbWUuY2FsbCh0aGlzLHQsZSl9LHMuZGVmYXVsdC5leHRlbmQocy5kZWZhdWx0LlRyYW5zcG9ydFRpbWUscy5kZWZhdWx0LlRpbWUpLHMuZGVmYXVsdC5UcmFuc3BvcnRUaW1lLnByb3RvdHlwZS5fbm93PWZ1bmN0aW9uKCl7cmV0dXJuIHMuZGVmYXVsdC5UcmFuc3BvcnQuc2Vjb25kc30sZS5kZWZhdWx0PXMuZGVmYXVsdC5UcmFuc3BvcnRUaW1lfSxmdW5jdGlvbih0LGUsaSl7XCJ1c2Ugc3RyaWN0XCI7aS5yKGUpO3ZhciBzPWkoMCk7aSg2Mik7cy5kZWZhdWx0LkZyZXF1ZW5jeT1mdW5jdGlvbih0LGUpe2lmKCEodGhpcyBpbnN0YW5jZW9mIHMuZGVmYXVsdC5GcmVxdWVuY3kpKXJldHVybiBuZXcgcy5kZWZhdWx0LkZyZXF1ZW5jeSh0LGUpO3MuZGVmYXVsdC5UaW1lQmFzZS5jYWxsKHRoaXMsdCxlKX0scy5kZWZhdWx0LmV4dGVuZChzLmRlZmF1bHQuRnJlcXVlbmN5LHMuZGVmYXVsdC5UaW1lQmFzZSkscy5kZWZhdWx0LkZyZXF1ZW5jeS5wcm90b3R5cGUuX2V4cHJlc3Npb25zPU9iamVjdC5hc3NpZ24oe30scy5kZWZhdWx0LlRpbWVCYXNlLnByb3RvdHlwZS5fZXhwcmVzc2lvbnMse21pZGk6e3JlZ2V4cDovXihcXGQrKD86XFwuXFxkKyk/bWlkaSkvLG1ldGhvZDpmdW5jdGlvbih0KXtyZXR1cm5cIm1pZGlcIj09PXRoaXMuX2RlZmF1bHRVbml0cz90OnMuZGVmYXVsdC5GcmVxdWVuY3kubXRvZih0KX19LG5vdGU6e3JlZ2V4cDovXihbYS1nXXsxfSg/OmJ8I3x4fGJiKT8pKC0/WzAtOV0rKS9pLG1ldGhvZDpmdW5jdGlvbih0LGUpe3ZhciBpPW5bdC50b0xvd2VyQ2FzZSgpXSsxMioocGFyc2VJbnQoZSkrMSk7cmV0dXJuXCJtaWRpXCI9PT10aGlzLl9kZWZhdWx0VW5pdHM/aTpzLmRlZmF1bHQuRnJlcXVlbmN5Lm10b2YoaSl9fSx0cjp7cmVnZXhwOi9eKFxcZCsoPzpcXC5cXGQrKT8pOihcXGQrKD86XFwuXFxkKyk/KTo/KFxcZCsoPzpcXC5cXGQrKT8pPy8sbWV0aG9kOmZ1bmN0aW9uKHQsZSxpKXt2YXIgcz0xO3JldHVybiB0JiZcIjBcIiE9PXQmJihzKj10aGlzLl9iZWF0c1RvVW5pdHModGhpcy5fZ2V0VGltZVNpZ25hdHVyZSgpKnBhcnNlRmxvYXQodCkpKSxlJiZcIjBcIiE9PWUmJihzKj10aGlzLl9iZWF0c1RvVW5pdHMocGFyc2VGbG9hdChlKSkpLGkmJlwiMFwiIT09aSYmKHMqPXRoaXMuX2JlYXRzVG9Vbml0cyhwYXJzZUZsb2F0KGkpLzQpKSxzfX19KSxzLmRlZmF1bHQuRnJlcXVlbmN5LnByb3RvdHlwZS50cmFuc3Bvc2U9ZnVuY3Rpb24odCl7cmV0dXJuIG5ldyB0aGlzLmNvbnN0cnVjdG9yKHRoaXMudmFsdWVPZigpKnMuZGVmYXVsdC5pbnRlcnZhbFRvRnJlcXVlbmN5UmF0aW8odCkpfSxzLmRlZmF1bHQuRnJlcXVlbmN5LnByb3RvdHlwZS5oYXJtb25pemU9ZnVuY3Rpb24odCl7cmV0dXJuIHQubWFwKGZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLnRyYW5zcG9zZSh0KX0uYmluZCh0aGlzKSl9LHMuZGVmYXVsdC5GcmVxdWVuY3kucHJvdG90eXBlLnRvTWlkaT1mdW5jdGlvbigpe3JldHVybiBzLmRlZmF1bHQuRnJlcXVlbmN5LmZ0b20odGhpcy52YWx1ZU9mKCkpfSxzLmRlZmF1bHQuRnJlcXVlbmN5LnByb3RvdHlwZS50b05vdGU9ZnVuY3Rpb24oKXt2YXIgdD10aGlzLnRvRnJlcXVlbmN5KCksZT1NYXRoLmxvZzIodC9zLmRlZmF1bHQuRnJlcXVlbmN5LkE0KSxpPU1hdGgucm91bmQoMTIqZSkrNTcsbj1NYXRoLmZsb29yKGkvMTIpO3JldHVybiBuPDAmJihpKz0tMTIqbiksb1tpJTEyXStuLnRvU3RyaW5nKCl9LHMuZGVmYXVsdC5GcmVxdWVuY3kucHJvdG90eXBlLnRvU2Vjb25kcz1mdW5jdGlvbigpe3JldHVybiAxL3MuZGVmYXVsdC5UaW1lQmFzZS5wcm90b3R5cGUudG9TZWNvbmRzLmNhbGwodGhpcyl9LHMuZGVmYXVsdC5GcmVxdWVuY3kucHJvdG90eXBlLnRvRnJlcXVlbmN5PWZ1bmN0aW9uKCl7cmV0dXJuIHMuZGVmYXVsdC5UaW1lQmFzZS5wcm90b3R5cGUudG9GcmVxdWVuY3kuY2FsbCh0aGlzKX0scy5kZWZhdWx0LkZyZXF1ZW5jeS5wcm90b3R5cGUudG9UaWNrcz1mdW5jdGlvbigpe3ZhciB0PXRoaXMuX2JlYXRzVG9Vbml0cygxKSxlPXRoaXMudmFsdWVPZigpL3Q7cmV0dXJuIE1hdGguZmxvb3IoZSpzLmRlZmF1bHQuVHJhbnNwb3J0LlBQUSl9LHMuZGVmYXVsdC5GcmVxdWVuY3kucHJvdG90eXBlLl9ub0FyZz1mdW5jdGlvbigpe3JldHVybiAwfSxzLmRlZmF1bHQuRnJlcXVlbmN5LnByb3RvdHlwZS5fZnJlcXVlbmN5VG9Vbml0cz1mdW5jdGlvbih0KXtyZXR1cm4gdH0scy5kZWZhdWx0LkZyZXF1ZW5jeS5wcm90b3R5cGUuX3RpY2tzVG9Vbml0cz1mdW5jdGlvbih0KXtyZXR1cm4gMS8oNjAqdC8ocy5kZWZhdWx0LlRyYW5zcG9ydC5icG0udmFsdWUqcy5kZWZhdWx0LlRyYW5zcG9ydC5QUFEpKX0scy5kZWZhdWx0LkZyZXF1ZW5jeS5wcm90b3R5cGUuX2JlYXRzVG9Vbml0cz1mdW5jdGlvbih0KXtyZXR1cm4gMS9zLmRlZmF1bHQuVGltZUJhc2UucHJvdG90eXBlLl9iZWF0c1RvVW5pdHMuY2FsbCh0aGlzLHQpfSxzLmRlZmF1bHQuRnJlcXVlbmN5LnByb3RvdHlwZS5fc2Vjb25kc1RvVW5pdHM9ZnVuY3Rpb24odCl7cmV0dXJuIDEvdH0scy5kZWZhdWx0LkZyZXF1ZW5jeS5wcm90b3R5cGUuX2RlZmF1bHRVbml0cz1cImh6XCI7dmFyIG49e2NiYjotMixjYjotMSxjOjAsXCJjI1wiOjEsY3g6MixkYmI6MCxkYjoxLGQ6MixcImQjXCI6MyxkeDo0LGViYjoyLGViOjMsZTo0LFwiZSNcIjo1LGV4OjYsZmJiOjMsZmI6NCxmOjUsXCJmI1wiOjYsZng6NyxnYmI6NSxnYjo2LGc6NyxcImcjXCI6OCxneDo5LGFiYjo3LGFiOjgsYTo5LFwiYSNcIjoxMCxheDoxMSxiYmI6OSxiYjoxMCxiOjExLFwiYiNcIjoxMixieDoxM30sbz1bXCJDXCIsXCJDI1wiLFwiRFwiLFwiRCNcIixcIkVcIixcIkZcIixcIkYjXCIsXCJHXCIsXCJHI1wiLFwiQVwiLFwiQSNcIixcIkJcIl07cy5kZWZhdWx0LkZyZXF1ZW5jeS5BND00NDAscy5kZWZhdWx0LkZyZXF1ZW5jeS5tdG9mPWZ1bmN0aW9uKHQpe3JldHVybiBzLmRlZmF1bHQuRnJlcXVlbmN5LkE0Kk1hdGgucG93KDIsKHQtNjkpLzEyKX0scy5kZWZhdWx0LkZyZXF1ZW5jeS5mdG9tPWZ1bmN0aW9uKHQpe3JldHVybiA2OStNYXRoLnJvdW5kKDEyKk1hdGgubG9nMih0L3MuZGVmYXVsdC5GcmVxdWVuY3kuQTQpKX0sZS5kZWZhdWx0PXMuZGVmYXVsdC5GcmVxdWVuY3l9LGZ1bmN0aW9uKHQsZSxpKXtcInVzZSBzdHJpY3RcIjtpLnIoZSk7dmFyIHM9aSgwKTtpKDIpLGkoNjEpLGkoNCksaSgxKTtzLmRlZmF1bHQuRW52ZWxvcGU9ZnVuY3Rpb24oKXt2YXIgdD1zLmRlZmF1bHQuZGVmYXVsdHMoYXJndW1lbnRzLFtcImF0dGFja1wiLFwiZGVjYXlcIixcInN1c3RhaW5cIixcInJlbGVhc2VcIl0scy5kZWZhdWx0LkVudmVsb3BlKTtzLmRlZmF1bHQuQXVkaW9Ob2RlLmNhbGwodGhpcyksdGhpcy5hdHRhY2s9dC5hdHRhY2ssdGhpcy5kZWNheT10LmRlY2F5LHRoaXMuc3VzdGFpbj10LnN1c3RhaW4sdGhpcy5yZWxlYXNlPXQucmVsZWFzZSx0aGlzLl9hdHRhY2tDdXJ2ZT1cImxpbmVhclwiLHRoaXMuX3JlbGVhc2VDdXJ2ZT1cImV4cG9uZW50aWFsXCIsdGhpcy5fc2lnPXRoaXMub3V0cHV0PW5ldyBzLmRlZmF1bHQuU2lnbmFsKDApLHRoaXMuYXR0YWNrQ3VydmU9dC5hdHRhY2tDdXJ2ZSx0aGlzLnJlbGVhc2VDdXJ2ZT10LnJlbGVhc2VDdXJ2ZSx0aGlzLmRlY2F5Q3VydmU9dC5kZWNheUN1cnZlfSxzLmRlZmF1bHQuZXh0ZW5kKHMuZGVmYXVsdC5FbnZlbG9wZSxzLmRlZmF1bHQuQXVkaW9Ob2RlKSxzLmRlZmF1bHQuRW52ZWxvcGUuZGVmYXVsdHM9e2F0dGFjazouMDEsZGVjYXk6LjEsc3VzdGFpbjouNSxyZWxlYXNlOjEsYXR0YWNrQ3VydmU6XCJsaW5lYXJcIixkZWNheUN1cnZlOlwiZXhwb25lbnRpYWxcIixyZWxlYXNlQ3VydmU6XCJleHBvbmVudGlhbFwifSxPYmplY3QuZGVmaW5lUHJvcGVydHkocy5kZWZhdWx0LkVudmVsb3BlLnByb3RvdHlwZSxcInZhbHVlXCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLmdldFZhbHVlQXRUaW1lKHRoaXMubm93KCkpfX0pLHMuZGVmYXVsdC5FbnZlbG9wZS5wcm90b3R5cGUuX2dldEN1cnZlPWZ1bmN0aW9uKHQsZSl7aWYocy5kZWZhdWx0LmlzU3RyaW5nKHQpKXJldHVybiB0O2lmKHMuZGVmYXVsdC5pc0FycmF5KHQpKWZvcih2YXIgaSBpbiBzLmRlZmF1bHQuRW52ZWxvcGUuVHlwZSlpZihzLmRlZmF1bHQuRW52ZWxvcGUuVHlwZVtpXVtlXT09PXQpcmV0dXJuIGl9LHMuZGVmYXVsdC5FbnZlbG9wZS5wcm90b3R5cGUuX3NldEN1cnZlPWZ1bmN0aW9uKHQsZSxpKXtpZihzLmRlZmF1bHQuRW52ZWxvcGUuVHlwZS5oYXNPd25Qcm9wZXJ0eShpKSl7dmFyIG49cy5kZWZhdWx0LkVudmVsb3BlLlR5cGVbaV07cy5kZWZhdWx0LmlzT2JqZWN0KG4pP3RoaXNbdF09bltlXTp0aGlzW3RdPW59ZWxzZXtpZighcy5kZWZhdWx0LmlzQXJyYXkoaSkpdGhyb3cgbmV3IEVycm9yKFwiVG9uZS5FbnZlbG9wZTogaW52YWxpZCBjdXJ2ZTogXCIraSk7dGhpc1t0XT1pfX0sT2JqZWN0LmRlZmluZVByb3BlcnR5KHMuZGVmYXVsdC5FbnZlbG9wZS5wcm90b3R5cGUsXCJhdHRhY2tDdXJ2ZVwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fZ2V0Q3VydmUodGhpcy5fYXR0YWNrQ3VydmUsXCJJblwiKX0sc2V0OmZ1bmN0aW9uKHQpe3RoaXMuX3NldEN1cnZlKFwiX2F0dGFja0N1cnZlXCIsXCJJblwiLHQpfX0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShzLmRlZmF1bHQuRW52ZWxvcGUucHJvdG90eXBlLFwicmVsZWFzZUN1cnZlXCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9nZXRDdXJ2ZSh0aGlzLl9yZWxlYXNlQ3VydmUsXCJPdXRcIil9LHNldDpmdW5jdGlvbih0KXt0aGlzLl9zZXRDdXJ2ZShcIl9yZWxlYXNlQ3VydmVcIixcIk91dFwiLHQpfX0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShzLmRlZmF1bHQuRW52ZWxvcGUucHJvdG90eXBlLFwiZGVjYXlDdXJ2ZVwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fZGVjYXlDdXJ2ZX0sc2V0OmZ1bmN0aW9uKHQpe2lmKCFbXCJsaW5lYXJcIixcImV4cG9uZW50aWFsXCJdLmluY2x1ZGVzKHQpKXRocm93IG5ldyBFcnJvcihcIlRvbmUuRW52ZWxvcGU6IGludmFsaWQgY3VydmU6IFwiK3QpO3RoaXMuX2RlY2F5Q3VydmU9dH19KSxzLmRlZmF1bHQuRW52ZWxvcGUucHJvdG90eXBlLnRyaWdnZXJBdHRhY2s9ZnVuY3Rpb24odCxlKXt0aGlzLmxvZyhcInRyaWdnZXJBdHRhY2tcIix0LGUpLHQ9dGhpcy50b1NlY29uZHModCk7dmFyIGk9dGhpcy50b1NlY29uZHModGhpcy5hdHRhY2spLG49dGhpcy50b1NlY29uZHModGhpcy5kZWNheSk7ZT1zLmRlZmF1bHQuZGVmYXVsdEFyZyhlLDEpO3ZhciBvPXRoaXMuZ2V0VmFsdWVBdFRpbWUodCk7bz4wJiYoaT0oMS1vKS8oMS9pKSk7aWYoMD09PWkpdGhpcy5fc2lnLnNldFZhbHVlQXRUaW1lKGUsdCk7ZWxzZSBpZihcImxpbmVhclwiPT09dGhpcy5fYXR0YWNrQ3VydmUpdGhpcy5fc2lnLmxpbmVhclJhbXBUbyhlLGksdCk7ZWxzZSBpZihcImV4cG9uZW50aWFsXCI9PT10aGlzLl9hdHRhY2tDdXJ2ZSl0aGlzLl9zaWcudGFyZ2V0UmFtcFRvKGUsaSx0KTtlbHNlIGlmKGk+MCl7dGhpcy5fc2lnLmNhbmNlbEFuZEhvbGRBdFRpbWUodCk7Zm9yKHZhciBhPXRoaXMuX2F0dGFja0N1cnZlLHI9MTtyPGEubGVuZ3RoO3IrKylpZihhW3ItMV08PW8mJm88PWFbcl0peyhhPXRoaXMuX2F0dGFja0N1cnZlLnNsaWNlKHIpKVswXT1vO2JyZWFrfXRoaXMuX3NpZy5zZXRWYWx1ZUN1cnZlQXRUaW1lKGEsdCxpLGUpfWlmKG4pe3ZhciBsPWUqdGhpcy5zdXN0YWluLHU9dCtpO3RoaXMubG9nKFwiZGVjYXlcIix1KSxcImxpbmVhclwiPT09dGhpcy5fZGVjYXlDdXJ2ZT90aGlzLl9zaWcubGluZWFyUmFtcFRvKGwsbix1K3RoaXMuc2FtcGxlVGltZSk6XCJleHBvbmVudGlhbFwiPT09dGhpcy5fZGVjYXlDdXJ2ZSYmdGhpcy5fc2lnLmV4cG9uZW50aWFsQXBwcm9hY2hWYWx1ZUF0VGltZShsLHUsbil9cmV0dXJuIHRoaXN9LHMuZGVmYXVsdC5FbnZlbG9wZS5wcm90b3R5cGUudHJpZ2dlclJlbGVhc2U9ZnVuY3Rpb24odCl7dGhpcy5sb2coXCJ0cmlnZ2VyUmVsZWFzZVwiLHQpLHQ9dGhpcy50b1NlY29uZHModCk7dmFyIGU9dGhpcy5nZXRWYWx1ZUF0VGltZSh0KTtpZihlPjApe3ZhciBpPXRoaXMudG9TZWNvbmRzKHRoaXMucmVsZWFzZSk7aWYoXCJsaW5lYXJcIj09PXRoaXMuX3JlbGVhc2VDdXJ2ZSl0aGlzLl9zaWcubGluZWFyUmFtcFRvKDAsaSx0KTtlbHNlIGlmKFwiZXhwb25lbnRpYWxcIj09PXRoaXMuX3JlbGVhc2VDdXJ2ZSl0aGlzLl9zaWcudGFyZ2V0UmFtcFRvKDAsaSx0KTtlbHNle3ZhciBuPXRoaXMuX3JlbGVhc2VDdXJ2ZTtzLmRlZmF1bHQuaXNBcnJheShuKSYmKHRoaXMuX3NpZy5jYW5jZWxBbmRIb2xkQXRUaW1lKHQpLHRoaXMuX3NpZy5zZXRWYWx1ZUN1cnZlQXRUaW1lKG4sdCxpLGUpKX19cmV0dXJuIHRoaXN9LHMuZGVmYXVsdC5FbnZlbG9wZS5wcm90b3R5cGUuZ2V0VmFsdWVBdFRpbWU9ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuX3NpZy5nZXRWYWx1ZUF0VGltZSh0KX0scy5kZWZhdWx0LkVudmVsb3BlLnByb3RvdHlwZS50cmlnZ2VyQXR0YWNrUmVsZWFzZT1mdW5jdGlvbih0LGUsaSl7cmV0dXJuIGU9dGhpcy50b1NlY29uZHMoZSksdGhpcy50cmlnZ2VyQXR0YWNrKGUsaSksdGhpcy50cmlnZ2VyUmVsZWFzZShlK3RoaXMudG9TZWNvbmRzKHQpKSx0aGlzfSxzLmRlZmF1bHQuRW52ZWxvcGUucHJvdG90eXBlLmNhbmNlbD1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5fc2lnLmNhbmNlbFNjaGVkdWxlZFZhbHVlcyh0KSx0aGlzfSxzLmRlZmF1bHQuRW52ZWxvcGUucHJvdG90eXBlLmNvbm5lY3Q9cy5kZWZhdWx0LlNpZ25hbEJhc2UucHJvdG90eXBlLmNvbm5lY3QsZnVuY3Rpb24oKXt2YXIgdCxlLGk9W107Zm9yKHQ9MDt0PDEyODt0KyspaVt0XT1NYXRoLnNpbih0LzEyNyooTWF0aC5QSS8yKSk7dmFyIG49W107Zm9yKHQ9MDt0PDEyNzt0Kyspe2U9dC8xMjc7dmFyIG89TWF0aC5zaW4oZSooMipNYXRoLlBJKSo2LjQtTWF0aC5QSS8yKSsxO25bdF09by8xMCsuODMqZX1uWzEyN109MTt2YXIgYT1bXTtmb3IodD0wO3Q8MTI4O3QrKylhW3RdPU1hdGguY2VpbCh0LzEyNyo1KS81O3ZhciByPVtdO2Zvcih0PTA7dDwxMjg7dCsrKWU9dC8xMjcsclt0XT0uNSooMS1NYXRoLmNvcyhNYXRoLlBJKmUpKTt2YXIgbCx1PVtdO2Zvcih0PTA7dDwxMjg7dCsrKXtlPXQvMTI3O3ZhciBkPTQqTWF0aC5wb3coZSwzKSsuMixmPU1hdGguY29zKGQqTWF0aC5QSSoyKmUpO3VbdF09TWF0aC5hYnMoZiooMS1lKSl9ZnVuY3Rpb24gaCh0KXtmb3IodmFyIGU9bmV3IEFycmF5KHQubGVuZ3RoKSxpPTA7aTx0Lmxlbmd0aDtpKyspZVtpXT0xLXRbaV07cmV0dXJuIGV9cy5kZWZhdWx0LkVudmVsb3BlLlR5cGU9e2xpbmVhcjpcImxpbmVhclwiLGV4cG9uZW50aWFsOlwiZXhwb25lbnRpYWxcIixib3VuY2U6e0luOmgodSksT3V0OnV9LGNvc2luZTp7SW46aSxPdXQ6KGw9aSxsLnNsaWNlKDApLnJldmVyc2UoKSl9LHN0ZXA6e0luOmEsT3V0OmgoYSl9LHJpcHBsZTp7SW46bixPdXQ6aChuKX0sc2luZTp7SW46cixPdXQ6aChyKX19fSgpLHMuZGVmYXVsdC5FbnZlbG9wZS5wcm90b3R5cGUuZGlzcG9zZT1mdW5jdGlvbigpe3JldHVybiBzLmRlZmF1bHQuQXVkaW9Ob2RlLnByb3RvdHlwZS5kaXNwb3NlLmNhbGwodGhpcyksdGhpcy5fc2lnLmRpc3Bvc2UoKSx0aGlzLl9zaWc9bnVsbCx0aGlzLl9hdHRhY2tDdXJ2ZT1udWxsLHRoaXMuX3JlbGVhc2VDdXJ2ZT1udWxsLHRoaXN9LGUuZGVmYXVsdD1zLmRlZmF1bHQuRW52ZWxvcGV9LGZ1bmN0aW9uKHQsZSxpKXtcInVzZSBzdHJpY3RcIjtpLnIoZSk7dmFyIHM9aSgwKTtpKDIzKSxpKDEwKSxpKDE5KSxpKDcpLGkoMjgpLGkoMyksaSgyKSxpKDIwKTtpZihzLmRlZmF1bHQuc3VwcG9ydGVkJiYhcy5kZWZhdWx0Lmdsb2JhbC5BdWRpb0NvbnRleHQucHJvdG90eXBlLmNyZWF0ZVN0ZXJlb1Bhbm5lcil7dmFyIG49ZnVuY3Rpb24odCl7dGhpcy5jb250ZXh0PXQsdGhpcy5wYW49bmV3IHMuZGVmYXVsdC5TaWduYWwoMCxzLmRlZmF1bHQuVHlwZS5BdWRpb1JhbmdlKTt2YXIgZT1uZXcgcy5kZWZhdWx0LldhdmVTaGFwZXIoZnVuY3Rpb24odCl7cmV0dXJuIHMuZGVmYXVsdC5lcXVhbFBvd2VyU2NhbGUoKHQrMSkvMil9LDQwOTYpLGk9bmV3IHMuZGVmYXVsdC5XYXZlU2hhcGVyKGZ1bmN0aW9uKHQpe3JldHVybiBzLmRlZmF1bHQuZXF1YWxQb3dlclNjYWxlKDEtKHQrMSkvMil9LDQwOTYpLG49bmV3IHMuZGVmYXVsdC5HYWluLG89bmV3IHMuZGVmYXVsdC5HYWluLGE9dGhpcy5pbnB1dD1uZXcgcy5kZWZhdWx0LlNwbGl0O2EuX3NwbGl0dGVyLmNoYW5uZWxDb3VudE1vZGU9XCJleHBsaWNpdFwiLChuZXcgcy5kZWZhdWx0Llplcm8pLmZhbihlLGkpO3ZhciByPXRoaXMub3V0cHV0PW5ldyBzLmRlZmF1bHQuTWVyZ2U7YS5sZWZ0LmNoYWluKG4sci5sZWZ0KSxhLnJpZ2h0LmNoYWluKG8sci5yaWdodCksdGhpcy5wYW4uY2hhaW4oaSxuLmdhaW4pLHRoaXMucGFuLmNoYWluKGUsby5nYWluKX07bi5wcm90b3R5cGUuZGlzY29ubmVjdD1mdW5jdGlvbigpe3RoaXMub3V0cHV0LmRpc2Nvbm5lY3QuYXBwbHkodGhpcy5vdXRwdXQsYXJndW1lbnRzKX0sbi5wcm90b3R5cGUuY29ubmVjdD1mdW5jdGlvbigpe3RoaXMub3V0cHV0LmNvbm5lY3QuYXBwbHkodGhpcy5vdXRwdXQsYXJndW1lbnRzKX0sQXVkaW9Db250ZXh0LnByb3RvdHlwZS5jcmVhdGVTdGVyZW9QYW5uZXI9ZnVuY3Rpb24oKXtyZXR1cm4gbmV3IG4odGhpcyl9LHMuZGVmYXVsdC5Db250ZXh0LnByb3RvdHlwZS5jcmVhdGVTdGVyZW9QYW5uZXI9ZnVuY3Rpb24oKXtyZXR1cm4gbmV3IG4odGhpcyl9fWkoMjIpLGkoMSk7cy5kZWZhdWx0LlBhbm5lcj1mdW5jdGlvbigpe3ZhciB0PXMuZGVmYXVsdC5kZWZhdWx0cyhhcmd1bWVudHMsW1wicGFuXCJdLHMuZGVmYXVsdC5QYW5uZXIpO3MuZGVmYXVsdC5BdWRpb05vZGUuY2FsbCh0aGlzKSx0aGlzLl9wYW5uZXI9dGhpcy5pbnB1dD10aGlzLm91dHB1dD10aGlzLmNvbnRleHQuY3JlYXRlU3RlcmVvUGFubmVyKCksdGhpcy5wYW49dGhpcy5fcGFubmVyLnBhbix0aGlzLnBhbi52YWx1ZT10LnBhbix0aGlzLl9yZWFkT25seShcInBhblwiKX0scy5kZWZhdWx0LmV4dGVuZChzLmRlZmF1bHQuUGFubmVyLHMuZGVmYXVsdC5BdWRpb05vZGUpLHMuZGVmYXVsdC5QYW5uZXIuZGVmYXVsdHM9e3BhbjowfSxzLmRlZmF1bHQuUGFubmVyLnByb3RvdHlwZS5kaXNwb3NlPWZ1bmN0aW9uKCl7cmV0dXJuIHMuZGVmYXVsdC5BdWRpb05vZGUucHJvdG90eXBlLmRpc3Bvc2UuY2FsbCh0aGlzKSx0aGlzLl93cml0YWJsZShcInBhblwiKSx0aGlzLl9wYW5uZXIuZGlzY29ubmVjdCgpLHRoaXMuX3Bhbm5lcj1udWxsLHRoaXMucGFuPW51bGwsdGhpc307ZS5kZWZhdWx0PXMuZGVmYXVsdC5QYW5uZXJ9LGZ1bmN0aW9uKHQsZSxpKXtcInVzZSBzdHJpY3RcIjtpLnIoZSk7dmFyIHM9aSgwKTtpKDYpLGkoMTcpLGkoNSksaSgzKTtzLmRlZmF1bHQuRk1Pc2NpbGxhdG9yPWZ1bmN0aW9uKCl7dmFyIHQ9cy5kZWZhdWx0LmRlZmF1bHRzKGFyZ3VtZW50cyxbXCJmcmVxdWVuY3lcIixcInR5cGVcIixcIm1vZHVsYXRpb25UeXBlXCJdLHMuZGVmYXVsdC5GTU9zY2lsbGF0b3IpO3MuZGVmYXVsdC5Tb3VyY2UuY2FsbCh0aGlzLHQpLHRoaXMuX2NhcnJpZXI9bmV3IHMuZGVmYXVsdC5Pc2NpbGxhdG9yKHQuZnJlcXVlbmN5LHQudHlwZSksdGhpcy5mcmVxdWVuY3k9bmV3IHMuZGVmYXVsdC5TaWduYWwodC5mcmVxdWVuY3kscy5kZWZhdWx0LlR5cGUuRnJlcXVlbmN5KSx0aGlzLmRldHVuZT10aGlzLl9jYXJyaWVyLmRldHVuZSx0aGlzLmRldHVuZS52YWx1ZT10LmRldHVuZSx0aGlzLm1vZHVsYXRpb25JbmRleD1uZXcgcy5kZWZhdWx0Lk11bHRpcGx5KHQubW9kdWxhdGlvbkluZGV4KSx0aGlzLm1vZHVsYXRpb25JbmRleC51bml0cz1zLmRlZmF1bHQuVHlwZS5Qb3NpdGl2ZSx0aGlzLl9tb2R1bGF0b3I9bmV3IHMuZGVmYXVsdC5Pc2NpbGxhdG9yKHQuZnJlcXVlbmN5LHQubW9kdWxhdGlvblR5cGUpLHRoaXMuaGFybW9uaWNpdHk9bmV3IHMuZGVmYXVsdC5NdWx0aXBseSh0Lmhhcm1vbmljaXR5KSx0aGlzLmhhcm1vbmljaXR5LnVuaXRzPXMuZGVmYXVsdC5UeXBlLlBvc2l0aXZlLHRoaXMuX21vZHVsYXRpb25Ob2RlPW5ldyBzLmRlZmF1bHQuR2FpbigwKSx0aGlzLmZyZXF1ZW5jeS5jb25uZWN0KHRoaXMuX2NhcnJpZXIuZnJlcXVlbmN5KSx0aGlzLmZyZXF1ZW5jeS5jaGFpbih0aGlzLmhhcm1vbmljaXR5LHRoaXMuX21vZHVsYXRvci5mcmVxdWVuY3kpLHRoaXMuZnJlcXVlbmN5LmNoYWluKHRoaXMubW9kdWxhdGlvbkluZGV4LHRoaXMuX21vZHVsYXRpb25Ob2RlKSx0aGlzLl9tb2R1bGF0b3IuY29ubmVjdCh0aGlzLl9tb2R1bGF0aW9uTm9kZS5nYWluKSx0aGlzLl9tb2R1bGF0aW9uTm9kZS5jb25uZWN0KHRoaXMuX2NhcnJpZXIuZnJlcXVlbmN5KSx0aGlzLl9jYXJyaWVyLmNvbm5lY3QodGhpcy5vdXRwdXQpLHRoaXMuZGV0dW5lLmNvbm5lY3QodGhpcy5fbW9kdWxhdG9yLmRldHVuZSksdGhpcy5waGFzZT10LnBoYXNlLHRoaXMuX3JlYWRPbmx5KFtcIm1vZHVsYXRpb25JbmRleFwiLFwiZnJlcXVlbmN5XCIsXCJkZXR1bmVcIixcImhhcm1vbmljaXR5XCJdKX0scy5kZWZhdWx0LmV4dGVuZChzLmRlZmF1bHQuRk1Pc2NpbGxhdG9yLHMuZGVmYXVsdC5Tb3VyY2UpLHMuZGVmYXVsdC5GTU9zY2lsbGF0b3IuZGVmYXVsdHM9e2ZyZXF1ZW5jeTo0NDAsZGV0dW5lOjAscGhhc2U6MCx0eXBlOlwic2luZVwiLG1vZHVsYXRpb25JbmRleDoyLG1vZHVsYXRpb25UeXBlOlwic3F1YXJlXCIsaGFybW9uaWNpdHk6MX0scy5kZWZhdWx0LkZNT3NjaWxsYXRvci5wcm90b3R5cGUuX3N0YXJ0PWZ1bmN0aW9uKHQpe3RoaXMuX21vZHVsYXRvci5zdGFydCh0KSx0aGlzLl9jYXJyaWVyLnN0YXJ0KHQpfSxzLmRlZmF1bHQuRk1Pc2NpbGxhdG9yLnByb3RvdHlwZS5fc3RvcD1mdW5jdGlvbih0KXt0aGlzLl9tb2R1bGF0b3Iuc3RvcCh0KSx0aGlzLl9jYXJyaWVyLnN0b3AodCl9LHMuZGVmYXVsdC5GTU9zY2lsbGF0b3IucHJvdG90eXBlLnJlc3RhcnQ9ZnVuY3Rpb24odCl7dGhpcy5fbW9kdWxhdG9yLnJlc3RhcnQodCksdGhpcy5fY2Fycmllci5yZXN0YXJ0KHQpfSxPYmplY3QuZGVmaW5lUHJvcGVydHkocy5kZWZhdWx0LkZNT3NjaWxsYXRvci5wcm90b3R5cGUsXCJ0eXBlXCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9jYXJyaWVyLnR5cGV9LHNldDpmdW5jdGlvbih0KXt0aGlzLl9jYXJyaWVyLnR5cGU9dH19KSxPYmplY3QuZGVmaW5lUHJvcGVydHkocy5kZWZhdWx0LkZNT3NjaWxsYXRvci5wcm90b3R5cGUsXCJiYXNlVHlwZVwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fY2Fycmllci5iYXNlVHlwZX0sc2V0OmZ1bmN0aW9uKHQpe3RoaXMuX2NhcnJpZXIuYmFzZVR5cGU9dH19KSxPYmplY3QuZGVmaW5lUHJvcGVydHkocy5kZWZhdWx0LkZNT3NjaWxsYXRvci5wcm90b3R5cGUsXCJwYXJ0aWFsQ291bnRcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2NhcnJpZXIucGFydGlhbENvdW50fSxzZXQ6ZnVuY3Rpb24odCl7dGhpcy5fY2Fycmllci5wYXJ0aWFsQ291bnQ9dH19KSxPYmplY3QuZGVmaW5lUHJvcGVydHkocy5kZWZhdWx0LkZNT3NjaWxsYXRvci5wcm90b3R5cGUsXCJtb2R1bGF0aW9uVHlwZVwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fbW9kdWxhdG9yLnR5cGV9LHNldDpmdW5jdGlvbih0KXt0aGlzLl9tb2R1bGF0b3IudHlwZT10fX0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShzLmRlZmF1bHQuRk1Pc2NpbGxhdG9yLnByb3RvdHlwZSxcInBoYXNlXCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9jYXJyaWVyLnBoYXNlfSxzZXQ6ZnVuY3Rpb24odCl7dGhpcy5fY2Fycmllci5waGFzZT10LHRoaXMuX21vZHVsYXRvci5waGFzZT10fX0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShzLmRlZmF1bHQuRk1Pc2NpbGxhdG9yLnByb3RvdHlwZSxcInBhcnRpYWxzXCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9jYXJyaWVyLnBhcnRpYWxzfSxzZXQ6ZnVuY3Rpb24odCl7dGhpcy5fY2Fycmllci5wYXJ0aWFscz10fX0pLHMuZGVmYXVsdC5GTU9zY2lsbGF0b3IucHJvdG90eXBlLmRpc3Bvc2U9ZnVuY3Rpb24oKXtyZXR1cm4gcy5kZWZhdWx0LlNvdXJjZS5wcm90b3R5cGUuZGlzcG9zZS5jYWxsKHRoaXMpLHRoaXMuX3dyaXRhYmxlKFtcIm1vZHVsYXRpb25JbmRleFwiLFwiZnJlcXVlbmN5XCIsXCJkZXR1bmVcIixcImhhcm1vbmljaXR5XCJdKSx0aGlzLmZyZXF1ZW5jeS5kaXNwb3NlKCksdGhpcy5mcmVxdWVuY3k9bnVsbCx0aGlzLmRldHVuZT1udWxsLHRoaXMuaGFybW9uaWNpdHkuZGlzcG9zZSgpLHRoaXMuaGFybW9uaWNpdHk9bnVsbCx0aGlzLl9jYXJyaWVyLmRpc3Bvc2UoKSx0aGlzLl9jYXJyaWVyPW51bGwsdGhpcy5fbW9kdWxhdG9yLmRpc3Bvc2UoKSx0aGlzLl9tb2R1bGF0b3I9bnVsbCx0aGlzLl9tb2R1bGF0aW9uTm9kZS5kaXNwb3NlKCksdGhpcy5fbW9kdWxhdGlvbk5vZGU9bnVsbCx0aGlzLm1vZHVsYXRpb25JbmRleC5kaXNwb3NlKCksdGhpcy5tb2R1bGF0aW9uSW5kZXg9bnVsbCx0aGlzfSxlLmRlZmF1bHQ9cy5kZWZhdWx0LkZNT3NjaWxsYXRvcn0sZnVuY3Rpb24odCxlLGkpe1widXNlIHN0cmljdFwiO2kucihlKTt2YXIgcz1pKDApO2koNiksaSgxNyksaSgyKSxpKDcpLGkoMyk7cy5kZWZhdWx0LlB1bHNlT3NjaWxsYXRvcj1mdW5jdGlvbigpe3ZhciB0PXMuZGVmYXVsdC5kZWZhdWx0cyhhcmd1bWVudHMsW1wiZnJlcXVlbmN5XCIsXCJ3aWR0aFwiXSxzLmRlZmF1bHQuT3NjaWxsYXRvcik7cy5kZWZhdWx0LlNvdXJjZS5jYWxsKHRoaXMsdCksdGhpcy53aWR0aD1uZXcgcy5kZWZhdWx0LlNpZ25hbCh0LndpZHRoLHMuZGVmYXVsdC5UeXBlLk5vcm1hbFJhbmdlKSx0aGlzLl93aWR0aEdhdGU9bmV3IHMuZGVmYXVsdC5HYWluKDApLHRoaXMuX3Nhd3Rvb3RoPW5ldyBzLmRlZmF1bHQuT3NjaWxsYXRvcih7ZnJlcXVlbmN5OnQuZnJlcXVlbmN5LGRldHVuZTp0LmRldHVuZSx0eXBlOlwic2F3dG9vdGhcIixwaGFzZTp0LnBoYXNlfSksdGhpcy5mcmVxdWVuY3k9dGhpcy5fc2F3dG9vdGguZnJlcXVlbmN5LHRoaXMuZGV0dW5lPXRoaXMuX3Nhd3Rvb3RoLmRldHVuZSx0aGlzLl90aHJlc2g9bmV3IHMuZGVmYXVsdC5XYXZlU2hhcGVyKGZ1bmN0aW9uKHQpe3JldHVybiB0PDA/LTE6MX0pLHRoaXMuX3Nhd3Rvb3RoLmNoYWluKHRoaXMuX3RocmVzaCx0aGlzLm91dHB1dCksdGhpcy53aWR0aC5jaGFpbih0aGlzLl93aWR0aEdhdGUsdGhpcy5fdGhyZXNoKSx0aGlzLl9yZWFkT25seShbXCJ3aWR0aFwiLFwiZnJlcXVlbmN5XCIsXCJkZXR1bmVcIl0pfSxzLmRlZmF1bHQuZXh0ZW5kKHMuZGVmYXVsdC5QdWxzZU9zY2lsbGF0b3Iscy5kZWZhdWx0LlNvdXJjZSkscy5kZWZhdWx0LlB1bHNlT3NjaWxsYXRvci5kZWZhdWx0cz17ZnJlcXVlbmN5OjQ0MCxkZXR1bmU6MCxwaGFzZTowLHdpZHRoOi4yfSxzLmRlZmF1bHQuUHVsc2VPc2NpbGxhdG9yLnByb3RvdHlwZS5fc3RhcnQ9ZnVuY3Rpb24odCl7dD10aGlzLnRvU2Vjb25kcyh0KSx0aGlzLl9zYXd0b290aC5zdGFydCh0KSx0aGlzLl93aWR0aEdhdGUuZ2Fpbi5zZXRWYWx1ZUF0VGltZSgxLHQpfSxzLmRlZmF1bHQuUHVsc2VPc2NpbGxhdG9yLnByb3RvdHlwZS5fc3RvcD1mdW5jdGlvbih0KXt0PXRoaXMudG9TZWNvbmRzKHQpLHRoaXMuX3Nhd3Rvb3RoLnN0b3AodCksdGhpcy5fd2lkdGhHYXRlLmdhaW4uc2V0VmFsdWVBdFRpbWUoMCx0KX0scy5kZWZhdWx0LlB1bHNlT3NjaWxsYXRvci5wcm90b3R5cGUucmVzdGFydD1mdW5jdGlvbih0KXt0aGlzLl9zYXd0b290aC5yZXN0YXJ0KHQpLHRoaXMuX3dpZHRoR2F0ZS5nYWluLmNhbmNlbFNjaGVkdWxlZFZhbHVlcyh0KSx0aGlzLl93aWR0aEdhdGUuZ2Fpbi5zZXRWYWx1ZUF0VGltZSgxLHQpfSxPYmplY3QuZGVmaW5lUHJvcGVydHkocy5kZWZhdWx0LlB1bHNlT3NjaWxsYXRvci5wcm90b3R5cGUsXCJwaGFzZVwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fc2F3dG9vdGgucGhhc2V9LHNldDpmdW5jdGlvbih0KXt0aGlzLl9zYXd0b290aC5waGFzZT10fX0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShzLmRlZmF1bHQuUHVsc2VPc2NpbGxhdG9yLnByb3RvdHlwZSxcInR5cGVcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuXCJwdWxzZVwifX0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShzLmRlZmF1bHQuUHVsc2VPc2NpbGxhdG9yLnByb3RvdHlwZSxcImJhc2VUeXBlXCIse2dldDpmdW5jdGlvbigpe3JldHVyblwicHVsc2VcIn19KSxPYmplY3QuZGVmaW5lUHJvcGVydHkocy5kZWZhdWx0LlB1bHNlT3NjaWxsYXRvci5wcm90b3R5cGUsXCJwYXJ0aWFsc1wiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm5bXX19KSxzLmRlZmF1bHQuUHVsc2VPc2NpbGxhdG9yLnByb3RvdHlwZS5kaXNwb3NlPWZ1bmN0aW9uKCl7cmV0dXJuIHMuZGVmYXVsdC5Tb3VyY2UucHJvdG90eXBlLmRpc3Bvc2UuY2FsbCh0aGlzKSx0aGlzLl9zYXd0b290aC5kaXNwb3NlKCksdGhpcy5fc2F3dG9vdGg9bnVsbCx0aGlzLl93cml0YWJsZShbXCJ3aWR0aFwiLFwiZnJlcXVlbmN5XCIsXCJkZXR1bmVcIl0pLHRoaXMud2lkdGguZGlzcG9zZSgpLHRoaXMud2lkdGg9bnVsbCx0aGlzLl93aWR0aEdhdGUuZGlzcG9zZSgpLHRoaXMuX3dpZHRoR2F0ZT1udWxsLHRoaXMuX3RocmVzaC5kaXNwb3NlKCksdGhpcy5fdGhyZXNoPW51bGwsdGhpcy5mcmVxdWVuY3k9bnVsbCx0aGlzLmRldHVuZT1udWxsLHRoaXN9LGUuZGVmYXVsdD1zLmRlZmF1bHQuUHVsc2VPc2NpbGxhdG9yfSxmdW5jdGlvbih0LGUsaSl7XCJ1c2Ugc3RyaWN0XCI7aS5yKGUpO3ZhciBzPWkoMCk7aSgxNiksaSg0KSxpKDM0KTtzLmRlZmF1bHQuRXZlbnQ9ZnVuY3Rpb24oKXt2YXIgdD1zLmRlZmF1bHQuZGVmYXVsdHMoYXJndW1lbnRzLFtcImNhbGxiYWNrXCIsXCJ2YWx1ZVwiXSxzLmRlZmF1bHQuRXZlbnQpO3MuZGVmYXVsdC5jYWxsKHRoaXMpLHRoaXMuX2xvb3A9dC5sb29wLHRoaXMuY2FsbGJhY2s9dC5jYWxsYmFjayx0aGlzLnZhbHVlPXQudmFsdWUsdGhpcy5fbG9vcFN0YXJ0PXRoaXMudG9UaWNrcyh0Lmxvb3BTdGFydCksdGhpcy5fbG9vcEVuZD10aGlzLnRvVGlja3ModC5sb29wRW5kKSx0aGlzLl9zdGF0ZT1uZXcgcy5kZWZhdWx0LlRpbWVsaW5lU3RhdGUocy5kZWZhdWx0LlN0YXRlLlN0b3BwZWQpLHRoaXMuX3BsYXliYWNrUmF0ZT0xLHRoaXMuX3N0YXJ0T2Zmc2V0PTAsdGhpcy5fcHJvYmFiaWxpdHk9dC5wcm9iYWJpbGl0eSx0aGlzLl9odW1hbml6ZT10Lmh1bWFuaXplLHRoaXMubXV0ZT10Lm11dGUsdGhpcy5wbGF5YmFja1JhdGU9dC5wbGF5YmFja1JhdGV9LHMuZGVmYXVsdC5leHRlbmQocy5kZWZhdWx0LkV2ZW50KSxzLmRlZmF1bHQuRXZlbnQuZGVmYXVsdHM9e2NhbGxiYWNrOnMuZGVmYXVsdC5ub09wLGxvb3A6ITEsbG9vcEVuZDpcIjFtXCIsbG9vcFN0YXJ0OjAscGxheWJhY2tSYXRlOjEsdmFsdWU6bnVsbCxwcm9iYWJpbGl0eToxLG11dGU6ITEsaHVtYW5pemU6ITF9LHMuZGVmYXVsdC5FdmVudC5wcm90b3R5cGUuX3Jlc2NoZWR1bGVFdmVudHM9ZnVuY3Rpb24odCl7cmV0dXJuIHQ9cy5kZWZhdWx0LmRlZmF1bHRBcmcodCwtMSksdGhpcy5fc3RhdGUuZm9yRWFjaEZyb20odCxmdW5jdGlvbih0KXt2YXIgZTtpZih0LnN0YXRlPT09cy5kZWZhdWx0LlN0YXRlLlN0YXJ0ZWQpe3MuZGVmYXVsdC5pc0RlZmluZWQodC5pZCkmJnMuZGVmYXVsdC5UcmFuc3BvcnQuY2xlYXIodC5pZCk7dmFyIGk9dC50aW1lK01hdGgucm91bmQodGhpcy5zdGFydE9mZnNldC90aGlzLl9wbGF5YmFja1JhdGUpO2lmKCEwPT09dGhpcy5fbG9vcHx8cy5kZWZhdWx0LmlzTnVtYmVyKHRoaXMuX2xvb3ApJiZ0aGlzLl9sb29wPjEpe2U9MS8wLHMuZGVmYXVsdC5pc051bWJlcih0aGlzLl9sb29wKSYmKGU9dGhpcy5fbG9vcCp0aGlzLl9nZXRMb29wRHVyYXRpb24oKSk7dmFyIG49dGhpcy5fc3RhdGUuZ2V0QWZ0ZXIoaSk7bnVsbCE9PW4mJihlPU1hdGgubWluKGUsbi50aW1lLWkpKSxlIT09MS8wJiYodGhpcy5fc3RhdGUuc2V0U3RhdGVBdFRpbWUocy5kZWZhdWx0LlN0YXRlLlN0b3BwZWQsaStlKzEpLGU9cy5kZWZhdWx0LlRpY2tzKGUpKTt2YXIgbz1zLmRlZmF1bHQuVGlja3ModGhpcy5fZ2V0TG9vcER1cmF0aW9uKCkpO3QuaWQ9cy5kZWZhdWx0LlRyYW5zcG9ydC5zY2hlZHVsZVJlcGVhdCh0aGlzLl90aWNrLmJpbmQodGhpcyksbyxzLmRlZmF1bHQuVGlja3MoaSksZSl9ZWxzZSB0LmlkPXMuZGVmYXVsdC5UcmFuc3BvcnQuc2NoZWR1bGUodGhpcy5fdGljay5iaW5kKHRoaXMpLHMuZGVmYXVsdC5UaWNrcyhpKSl9fS5iaW5kKHRoaXMpKSx0aGlzfSxPYmplY3QuZGVmaW5lUHJvcGVydHkocy5kZWZhdWx0LkV2ZW50LnByb3RvdHlwZSxcInN0YXRlXCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9zdGF0ZS5nZXRWYWx1ZUF0VGltZShzLmRlZmF1bHQuVHJhbnNwb3J0LnRpY2tzKX19KSxPYmplY3QuZGVmaW5lUHJvcGVydHkocy5kZWZhdWx0LkV2ZW50LnByb3RvdHlwZSxcInN0YXJ0T2Zmc2V0XCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9zdGFydE9mZnNldH0sc2V0OmZ1bmN0aW9uKHQpe3RoaXMuX3N0YXJ0T2Zmc2V0PXR9fSksT2JqZWN0LmRlZmluZVByb3BlcnR5KHMuZGVmYXVsdC5FdmVudC5wcm90b3R5cGUsXCJwcm9iYWJpbGl0eVwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fcHJvYmFiaWxpdHl9LHNldDpmdW5jdGlvbih0KXt0aGlzLl9wcm9iYWJpbGl0eT10fX0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShzLmRlZmF1bHQuRXZlbnQucHJvdG90eXBlLFwiaHVtYW5pemVcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2h1bWFuaXplfSxzZXQ6ZnVuY3Rpb24odCl7dGhpcy5faHVtYW5pemU9dH19KSxzLmRlZmF1bHQuRXZlbnQucHJvdG90eXBlLnN0YXJ0PWZ1bmN0aW9uKHQpe3JldHVybiB0PXRoaXMudG9UaWNrcyh0KSx0aGlzLl9zdGF0ZS5nZXRWYWx1ZUF0VGltZSh0KT09PXMuZGVmYXVsdC5TdGF0ZS5TdG9wcGVkJiYodGhpcy5fc3RhdGUuYWRkKHtzdGF0ZTpzLmRlZmF1bHQuU3RhdGUuU3RhcnRlZCx0aW1lOnQsaWQ6dm9pZCAwfSksdGhpcy5fcmVzY2hlZHVsZUV2ZW50cyh0KSksdGhpc30scy5kZWZhdWx0LkV2ZW50LnByb3RvdHlwZS5zdG9wPWZ1bmN0aW9uKHQpe2lmKHRoaXMuY2FuY2VsKHQpLHQ9dGhpcy50b1RpY2tzKHQpLHRoaXMuX3N0YXRlLmdldFZhbHVlQXRUaW1lKHQpPT09cy5kZWZhdWx0LlN0YXRlLlN0YXJ0ZWQpe3RoaXMuX3N0YXRlLnNldFN0YXRlQXRUaW1lKHMuZGVmYXVsdC5TdGF0ZS5TdG9wcGVkLHQpO3ZhciBlPXRoaXMuX3N0YXRlLmdldEJlZm9yZSh0KSxpPXQ7bnVsbCE9PWUmJihpPWUudGltZSksdGhpcy5fcmVzY2hlZHVsZUV2ZW50cyhpKX1yZXR1cm4gdGhpc30scy5kZWZhdWx0LkV2ZW50LnByb3RvdHlwZS5jYW5jZWw9ZnVuY3Rpb24odCl7cmV0dXJuIHQ9cy5kZWZhdWx0LmRlZmF1bHRBcmcodCwtMS8wKSx0PXRoaXMudG9UaWNrcyh0KSx0aGlzLl9zdGF0ZS5mb3JFYWNoRnJvbSh0LGZ1bmN0aW9uKHQpe3MuZGVmYXVsdC5UcmFuc3BvcnQuY2xlYXIodC5pZCl9KSx0aGlzLl9zdGF0ZS5jYW5jZWwodCksdGhpc30scy5kZWZhdWx0LkV2ZW50LnByb3RvdHlwZS5fdGljaz1mdW5jdGlvbih0KXt2YXIgZT1zLmRlZmF1bHQuVHJhbnNwb3J0LmdldFRpY2tzQXRUaW1lKHQpO2lmKCF0aGlzLm11dGUmJnRoaXMuX3N0YXRlLmdldFZhbHVlQXRUaW1lKGUpPT09cy5kZWZhdWx0LlN0YXRlLlN0YXJ0ZWQpe2lmKHRoaXMucHJvYmFiaWxpdHk8MSYmTWF0aC5yYW5kb20oKT50aGlzLnByb2JhYmlsaXR5KXJldHVybjtpZih0aGlzLmh1bWFuaXplKXt2YXIgaT0uMDI7cy5kZWZhdWx0LmlzQm9vbGVhbih0aGlzLmh1bWFuaXplKXx8KGk9dGhpcy50b1NlY29uZHModGhpcy5odW1hbml6ZSkpLHQrPSgyKk1hdGgucmFuZG9tKCktMSkqaX10aGlzLmNhbGxiYWNrKHQsdGhpcy52YWx1ZSl9fSxzLmRlZmF1bHQuRXZlbnQucHJvdG90eXBlLl9nZXRMb29wRHVyYXRpb249ZnVuY3Rpb24oKXtyZXR1cm4gTWF0aC5yb3VuZCgodGhpcy5fbG9vcEVuZC10aGlzLl9sb29wU3RhcnQpL3RoaXMuX3BsYXliYWNrUmF0ZSl9LE9iamVjdC5kZWZpbmVQcm9wZXJ0eShzLmRlZmF1bHQuRXZlbnQucHJvdG90eXBlLFwibG9vcFwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fbG9vcH0sc2V0OmZ1bmN0aW9uKHQpe3RoaXMuX2xvb3A9dCx0aGlzLl9yZXNjaGVkdWxlRXZlbnRzKCl9fSksT2JqZWN0LmRlZmluZVByb3BlcnR5KHMuZGVmYXVsdC5FdmVudC5wcm90b3R5cGUsXCJwbGF5YmFja1JhdGVcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3BsYXliYWNrUmF0ZX0sc2V0OmZ1bmN0aW9uKHQpe3RoaXMuX3BsYXliYWNrUmF0ZT10LHRoaXMuX3Jlc2NoZWR1bGVFdmVudHMoKX19KSxPYmplY3QuZGVmaW5lUHJvcGVydHkocy5kZWZhdWx0LkV2ZW50LnByb3RvdHlwZSxcImxvb3BFbmRcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHMuZGVmYXVsdC5UaWNrcyh0aGlzLl9sb29wRW5kKS50b1NlY29uZHMoKX0sc2V0OmZ1bmN0aW9uKHQpe3RoaXMuX2xvb3BFbmQ9dGhpcy50b1RpY2tzKHQpLHRoaXMuX2xvb3AmJnRoaXMuX3Jlc2NoZWR1bGVFdmVudHMoKX19KSxPYmplY3QuZGVmaW5lUHJvcGVydHkocy5kZWZhdWx0LkV2ZW50LnByb3RvdHlwZSxcImxvb3BTdGFydFwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gcy5kZWZhdWx0LlRpY2tzKHRoaXMuX2xvb3BTdGFydCkudG9TZWNvbmRzKCl9LHNldDpmdW5jdGlvbih0KXt0aGlzLl9sb29wU3RhcnQ9dGhpcy50b1RpY2tzKHQpLHRoaXMuX2xvb3AmJnRoaXMuX3Jlc2NoZWR1bGVFdmVudHMoKX19KSxPYmplY3QuZGVmaW5lUHJvcGVydHkocy5kZWZhdWx0LkV2ZW50LnByb3RvdHlwZSxcInByb2dyZXNzXCIse2dldDpmdW5jdGlvbigpe2lmKHRoaXMuX2xvb3Ape3ZhciB0PXMuZGVmYXVsdC5UcmFuc3BvcnQudGlja3MsZT10aGlzLl9zdGF0ZS5nZXQodCk7aWYobnVsbCE9PWUmJmUuc3RhdGU9PT1zLmRlZmF1bHQuU3RhdGUuU3RhcnRlZCl7dmFyIGk9dGhpcy5fZ2V0TG9vcER1cmF0aW9uKCk7cmV0dXJuKHQtZS50aW1lKSVpL2l9cmV0dXJuIDB9cmV0dXJuIDB9fSkscy5kZWZhdWx0LkV2ZW50LnByb3RvdHlwZS5kaXNwb3NlPWZ1bmN0aW9uKCl7dGhpcy5jYW5jZWwoKSx0aGlzLl9zdGF0ZS5kaXNwb3NlKCksdGhpcy5fc3RhdGU9bnVsbCx0aGlzLmNhbGxiYWNrPW51bGwsdGhpcy52YWx1ZT1udWxsfSxlLmRlZmF1bHQ9cy5kZWZhdWx0LkV2ZW50fSxmdW5jdGlvbih0LGUsaSl7XCJ1c2Ugc3RyaWN0XCI7aS5yKGUpO3ZhciBzPWkoMCk7aSgyKSxpKDEzKSxpKDI5KSxpKDEwKSxpKDMpLGkoMSk7cy5kZWZhdWx0Lk1pZFNpZGVNZXJnZT1mdW5jdGlvbigpe3MuZGVmYXVsdC5BdWRpb05vZGUuY2FsbCh0aGlzKSx0aGlzLmNyZWF0ZUluc091dHMoMiwwKSx0aGlzLm1pZD10aGlzLmlucHV0WzBdPW5ldyBzLmRlZmF1bHQuR2Fpbix0aGlzLl9sZWZ0PW5ldyBzLmRlZmF1bHQuQWRkLHRoaXMuX3RpbWVzVHdvTGVmdD1uZXcgcy5kZWZhdWx0Lk11bHRpcGx5KE1hdGguU1FSVDFfMiksdGhpcy5zaWRlPXRoaXMuaW5wdXRbMV09bmV3IHMuZGVmYXVsdC5HYWluLHRoaXMuX3JpZ2h0PW5ldyBzLmRlZmF1bHQuU3VidHJhY3QsdGhpcy5fdGltZXNUd29SaWdodD1uZXcgcy5kZWZhdWx0Lk11bHRpcGx5KE1hdGguU1FSVDFfMiksdGhpcy5fbWVyZ2U9dGhpcy5vdXRwdXQ9bmV3IHMuZGVmYXVsdC5NZXJnZSx0aGlzLm1pZC5jb25uZWN0KHRoaXMuX2xlZnQsMCwwKSx0aGlzLnNpZGUuY29ubmVjdCh0aGlzLl9sZWZ0LDAsMSksdGhpcy5taWQuY29ubmVjdCh0aGlzLl9yaWdodCwwLDApLHRoaXMuc2lkZS5jb25uZWN0KHRoaXMuX3JpZ2h0LDAsMSksdGhpcy5fbGVmdC5jb25uZWN0KHRoaXMuX3RpbWVzVHdvTGVmdCksdGhpcy5fcmlnaHQuY29ubmVjdCh0aGlzLl90aW1lc1R3b1JpZ2h0KSx0aGlzLl90aW1lc1R3b0xlZnQuY29ubmVjdCh0aGlzLl9tZXJnZSwwLDApLHRoaXMuX3RpbWVzVHdvUmlnaHQuY29ubmVjdCh0aGlzLl9tZXJnZSwwLDEpfSxzLmRlZmF1bHQuZXh0ZW5kKHMuZGVmYXVsdC5NaWRTaWRlTWVyZ2Uscy5kZWZhdWx0LkF1ZGlvTm9kZSkscy5kZWZhdWx0Lk1pZFNpZGVNZXJnZS5wcm90b3R5cGUuZGlzcG9zZT1mdW5jdGlvbigpe3JldHVybiBzLmRlZmF1bHQuQXVkaW9Ob2RlLnByb3RvdHlwZS5kaXNwb3NlLmNhbGwodGhpcyksdGhpcy5taWQuZGlzcG9zZSgpLHRoaXMubWlkPW51bGwsdGhpcy5zaWRlLmRpc3Bvc2UoKSx0aGlzLnNpZGU9bnVsbCx0aGlzLl9sZWZ0LmRpc3Bvc2UoKSx0aGlzLl9sZWZ0PW51bGwsdGhpcy5fdGltZXNUd29MZWZ0LmRpc3Bvc2UoKSx0aGlzLl90aW1lc1R3b0xlZnQ9bnVsbCx0aGlzLl9yaWdodC5kaXNwb3NlKCksdGhpcy5fcmlnaHQ9bnVsbCx0aGlzLl90aW1lc1R3b1JpZ2h0LmRpc3Bvc2UoKSx0aGlzLl90aW1lc1R3b1JpZ2h0PW51bGwsdGhpcy5fbWVyZ2UuZGlzcG9zZSgpLHRoaXMuX21lcmdlPW51bGwsdGhpc30sZS5kZWZhdWx0PXMuZGVmYXVsdC5NaWRTaWRlTWVyZ2V9LGZ1bmN0aW9uKHQsZSxpKXtcInVzZSBzdHJpY3RcIjtpLnIoZSk7dmFyIHM9aSgwKTtpKDI5KSxpKDEzKSxpKDIpLGkoMTkpLGkoMSk7cy5kZWZhdWx0Lk1pZFNpZGVTcGxpdD1mdW5jdGlvbigpe3MuZGVmYXVsdC5BdWRpb05vZGUuY2FsbCh0aGlzKSx0aGlzLmNyZWF0ZUluc091dHMoMCwyKSx0aGlzLl9zcGxpdD10aGlzLmlucHV0PW5ldyBzLmRlZmF1bHQuU3BsaXQsdGhpcy5fbWlkQWRkPW5ldyBzLmRlZmF1bHQuQWRkLHRoaXMubWlkPXRoaXMub3V0cHV0WzBdPW5ldyBzLmRlZmF1bHQuTXVsdGlwbHkoTWF0aC5TUVJUMV8yKSx0aGlzLl9zaWRlU3VidHJhY3Q9bmV3IHMuZGVmYXVsdC5TdWJ0cmFjdCx0aGlzLnNpZGU9dGhpcy5vdXRwdXRbMV09bmV3IHMuZGVmYXVsdC5NdWx0aXBseShNYXRoLlNRUlQxXzIpLHRoaXMuX3NwbGl0LmNvbm5lY3QodGhpcy5fbWlkQWRkLDAsMCksdGhpcy5fc3BsaXQuY29ubmVjdCh0aGlzLl9taWRBZGQsMSwxKSx0aGlzLl9zcGxpdC5jb25uZWN0KHRoaXMuX3NpZGVTdWJ0cmFjdCwwLDApLHRoaXMuX3NwbGl0LmNvbm5lY3QodGhpcy5fc2lkZVN1YnRyYWN0LDEsMSksdGhpcy5fbWlkQWRkLmNvbm5lY3QodGhpcy5taWQpLHRoaXMuX3NpZGVTdWJ0cmFjdC5jb25uZWN0KHRoaXMuc2lkZSl9LHMuZGVmYXVsdC5leHRlbmQocy5kZWZhdWx0Lk1pZFNpZGVTcGxpdCxzLmRlZmF1bHQuQXVkaW9Ob2RlKSxzLmRlZmF1bHQuTWlkU2lkZVNwbGl0LnByb3RvdHlwZS5kaXNwb3NlPWZ1bmN0aW9uKCl7cmV0dXJuIHMuZGVmYXVsdC5BdWRpb05vZGUucHJvdG90eXBlLmRpc3Bvc2UuY2FsbCh0aGlzKSx0aGlzLm1pZC5kaXNwb3NlKCksdGhpcy5taWQ9bnVsbCx0aGlzLnNpZGUuZGlzcG9zZSgpLHRoaXMuc2lkZT1udWxsLHRoaXMuX21pZEFkZC5kaXNwb3NlKCksdGhpcy5fbWlkQWRkPW51bGwsdGhpcy5fc2lkZVN1YnRyYWN0LmRpc3Bvc2UoKSx0aGlzLl9zaWRlU3VidHJhY3Q9bnVsbCx0aGlzLl9zcGxpdC5kaXNwb3NlKCksdGhpcy5fc3BsaXQ9bnVsbCx0aGlzfSxlLmRlZmF1bHQ9cy5kZWZhdWx0Lk1pZFNpZGVTcGxpdH0sZnVuY3Rpb24odCxlLGkpe1widXNlIHN0cmljdFwiO2kucihlKTt2YXIgcz1pKDApO2koMiksaSg5KSxpKDEpLGkoNTkpO3MuZGVmYXVsdC5Mb3dwYXNzQ29tYkZpbHRlcj1mdW5jdGlvbigpe3ZhciB0PXMuZGVmYXVsdC5kZWZhdWx0cyhhcmd1bWVudHMsW1wiZGVsYXlUaW1lXCIsXCJyZXNvbmFuY2VcIixcImRhbXBlbmluZ1wiXSxzLmRlZmF1bHQuTG93cGFzc0NvbWJGaWx0ZXIpO3MuZGVmYXVsdC5BdWRpb05vZGUuY2FsbCh0aGlzKSx0aGlzLl9jb21iRmlsdGVyPXRoaXMub3V0cHV0PW5ldyBzLmRlZmF1bHQuRmVlZGJhY2tDb21iRmlsdGVyKHQuZGVsYXlUaW1lLHQucmVzb25hbmNlKSx0aGlzLmRlbGF5VGltZT10aGlzLl9jb21iRmlsdGVyLmRlbGF5VGltZSx0aGlzLl9sb3dwYXNzPXRoaXMuaW5wdXQ9bmV3IHMuZGVmYXVsdC5GaWx0ZXIoe2ZyZXF1ZW5jeTp0LmRhbXBlbmluZyx0eXBlOlwibG93cGFzc1wiLFE6MCxyb2xsb2ZmOi0xMn0pLHRoaXMuZGFtcGVuaW5nPXRoaXMuX2xvd3Bhc3MuZnJlcXVlbmN5LHRoaXMucmVzb25hbmNlPXRoaXMuX2NvbWJGaWx0ZXIucmVzb25hbmNlLHRoaXMuX2xvd3Bhc3MuY29ubmVjdCh0aGlzLl9jb21iRmlsdGVyKSx0aGlzLl9yZWFkT25seShbXCJkYW1wZW5pbmdcIixcInJlc29uYW5jZVwiLFwiZGVsYXlUaW1lXCJdKX0scy5kZWZhdWx0LmV4dGVuZChzLmRlZmF1bHQuTG93cGFzc0NvbWJGaWx0ZXIscy5kZWZhdWx0LkF1ZGlvTm9kZSkscy5kZWZhdWx0Lkxvd3Bhc3NDb21iRmlsdGVyLmRlZmF1bHRzPXtkZWxheVRpbWU6LjEscmVzb25hbmNlOi41LGRhbXBlbmluZzozZTN9LHMuZGVmYXVsdC5Mb3dwYXNzQ29tYkZpbHRlci5wcm90b3R5cGUuZGlzcG9zZT1mdW5jdGlvbigpe3JldHVybiBzLmRlZmF1bHQuQXVkaW9Ob2RlLnByb3RvdHlwZS5kaXNwb3NlLmNhbGwodGhpcyksdGhpcy5fd3JpdGFibGUoW1wiZGFtcGVuaW5nXCIsXCJyZXNvbmFuY2VcIixcImRlbGF5VGltZVwiXSksdGhpcy5fY29tYkZpbHRlci5kaXNwb3NlKCksdGhpcy5fY29tYkZpbHRlcj1udWxsLHRoaXMucmVzb25hbmNlPW51bGwsdGhpcy5kZWxheVRpbWU9bnVsbCx0aGlzLl9sb3dwYXNzLmRpc3Bvc2UoKSx0aGlzLl9sb3dwYXNzPW51bGwsdGhpcy5kYW1wZW5pbmc9bnVsbCx0aGlzfSxlLmRlZmF1bHQ9cy5kZWZhdWx0Lkxvd3Bhc3NDb21iRmlsdGVyfSxmdW5jdGlvbih0LGUsaSl7XCJ1c2Ugc3RyaWN0XCI7aS5yKGUpO3ZhciBzPWkoMCk7aSg0NSk7cy5kZWZhdWx0LlRpY2tzPWZ1bmN0aW9uKHQsZSl7aWYoISh0aGlzIGluc3RhbmNlb2Ygcy5kZWZhdWx0LlRpY2tzKSlyZXR1cm4gbmV3IHMuZGVmYXVsdC5UaWNrcyh0LGUpO3MuZGVmYXVsdC5UcmFuc3BvcnRUaW1lLmNhbGwodGhpcyx0LGUpfSxzLmRlZmF1bHQuZXh0ZW5kKHMuZGVmYXVsdC5UaWNrcyxzLmRlZmF1bHQuVHJhbnNwb3J0VGltZSkscy5kZWZhdWx0LlRpY2tzLnByb3RvdHlwZS5fZGVmYXVsdFVuaXRzPVwiaVwiLHMuZGVmYXVsdC5UaWNrcy5wcm90b3R5cGUuX25vdz1mdW5jdGlvbigpe3JldHVybiBzLmRlZmF1bHQuVHJhbnNwb3J0LnRpY2tzfSxzLmRlZmF1bHQuVGlja3MucHJvdG90eXBlLl9iZWF0c1RvVW5pdHM9ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuX2dldFBQUSgpKnR9LHMuZGVmYXVsdC5UaWNrcy5wcm90b3R5cGUuX3NlY29uZHNUb1VuaXRzPWZ1bmN0aW9uKHQpe3JldHVybiBNYXRoLmZsb29yKHQvKDYwL3RoaXMuX2dldEJwbSgpKSp0aGlzLl9nZXRQUFEoKSl9LHMuZGVmYXVsdC5UaWNrcy5wcm90b3R5cGUuX3RpY2tzVG9Vbml0cz1mdW5jdGlvbih0KXtyZXR1cm4gdH0scy5kZWZhdWx0LlRpY2tzLnByb3RvdHlwZS50b1RpY2tzPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMudmFsdWVPZigpfSxzLmRlZmF1bHQuVGlja3MucHJvdG90eXBlLnRvU2Vjb25kcz1mdW5jdGlvbigpe3JldHVybiB0aGlzLnZhbHVlT2YoKS90aGlzLl9nZXRQUFEoKSooNjAvdGhpcy5fZ2V0QnBtKCkpfSxlLmRlZmF1bHQ9cy5kZWZhdWx0LlRpY2tzfSxmdW5jdGlvbih0LGUsaSl7XCJ1c2Ugc3RyaWN0XCI7aS5yKGUpO3ZhciBzPWkoMCk7aSg1NSk7cy5kZWZhdWx0LlRyYW5zcG9ydEV2ZW50PWZ1bmN0aW9uKHQsZSl7ZT1zLmRlZmF1bHQuZGVmYXVsdEFyZyhlLHMuZGVmYXVsdC5UcmFuc3BvcnRFdmVudC5kZWZhdWx0cykscy5kZWZhdWx0LmNhbGwodGhpcyksdGhpcy5UcmFuc3BvcnQ9dCx0aGlzLmlkPXMuZGVmYXVsdC5UcmFuc3BvcnRFdmVudC5fZXZlbnRJZCsrLHRoaXMudGltZT1zLmRlZmF1bHQuVGlja3MoZS50aW1lKSx0aGlzLmNhbGxiYWNrPWUuY2FsbGJhY2ssdGhpcy5fb25jZT1lLm9uY2V9LHMuZGVmYXVsdC5leHRlbmQocy5kZWZhdWx0LlRyYW5zcG9ydEV2ZW50KSxzLmRlZmF1bHQuVHJhbnNwb3J0RXZlbnQuZGVmYXVsdHM9e29uY2U6ITEsY2FsbGJhY2s6cy5kZWZhdWx0Lm5vT3B9LHMuZGVmYXVsdC5UcmFuc3BvcnRFdmVudC5fZXZlbnRJZD0wLHMuZGVmYXVsdC5UcmFuc3BvcnRFdmVudC5wcm90b3R5cGUuaW52b2tlPWZ1bmN0aW9uKHQpe3RoaXMuY2FsbGJhY2smJih0aGlzLmNhbGxiYWNrKHQpLHRoaXMuX29uY2UmJnRoaXMuVHJhbnNwb3J0JiZ0aGlzLlRyYW5zcG9ydC5jbGVhcih0aGlzLmlkKSl9LHMuZGVmYXVsdC5UcmFuc3BvcnRFdmVudC5wcm90b3R5cGUuZGlzcG9zZT1mdW5jdGlvbigpe3JldHVybiBzLmRlZmF1bHQucHJvdG90eXBlLmRpc3Bvc2UuY2FsbCh0aGlzKSx0aGlzLlRyYW5zcG9ydD1udWxsLHRoaXMuY2FsbGJhY2s9bnVsbCx0aGlzLnRpbWU9bnVsbCx0aGlzfSxlLmRlZmF1bHQ9cy5kZWZhdWx0LlRyYW5zcG9ydEV2ZW50fSxmdW5jdGlvbih0LGUsaSl7XCJ1c2Ugc3RyaWN0XCI7aS5yKGUpO3ZhciBzPWkoMCk7aSg4MiksaSgzNCksaSgyNCksaSgxNCk7cy5kZWZhdWx0LlRpY2tTb3VyY2U9ZnVuY3Rpb24oKXt2YXIgdD1zLmRlZmF1bHQuZGVmYXVsdHMoYXJndW1lbnRzLFtcImZyZXF1ZW5jeVwiXSxzLmRlZmF1bHQuVGlja1NvdXJjZSk7dGhpcy5mcmVxdWVuY3k9bmV3IHMuZGVmYXVsdC5UaWNrU2lnbmFsKHQuZnJlcXVlbmN5KSx0aGlzLl9yZWFkT25seShcImZyZXF1ZW5jeVwiKSx0aGlzLl9zdGF0ZT1uZXcgcy5kZWZhdWx0LlRpbWVsaW5lU3RhdGUocy5kZWZhdWx0LlN0YXRlLlN0b3BwZWQpLHRoaXMuX3N0YXRlLnNldFN0YXRlQXRUaW1lKHMuZGVmYXVsdC5TdGF0ZS5TdG9wcGVkLDApLHRoaXMuX3RpY2tPZmZzZXQ9bmV3IHMuZGVmYXVsdC5UaW1lbGluZSx0aGlzLnNldFRpY2tzQXRUaW1lKDAsMCl9LHMuZGVmYXVsdC5leHRlbmQocy5kZWZhdWx0LlRpY2tTb3VyY2UpLHMuZGVmYXVsdC5UaWNrU291cmNlLmRlZmF1bHRzPXtmcmVxdWVuY3k6MX0sT2JqZWN0LmRlZmluZVByb3BlcnR5KHMuZGVmYXVsdC5UaWNrU291cmNlLnByb3RvdHlwZSxcInN0YXRlXCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9zdGF0ZS5nZXRWYWx1ZUF0VGltZSh0aGlzLm5vdygpKX19KSxzLmRlZmF1bHQuVGlja1NvdXJjZS5wcm90b3R5cGUuc3RhcnQ9ZnVuY3Rpb24odCxlKXtyZXR1cm4gdD10aGlzLnRvU2Vjb25kcyh0KSx0aGlzLl9zdGF0ZS5nZXRWYWx1ZUF0VGltZSh0KSE9PXMuZGVmYXVsdC5TdGF0ZS5TdGFydGVkJiYodGhpcy5fc3RhdGUuc2V0U3RhdGVBdFRpbWUocy5kZWZhdWx0LlN0YXRlLlN0YXJ0ZWQsdCkscy5kZWZhdWx0LmlzRGVmaW5lZChlKSYmdGhpcy5zZXRUaWNrc0F0VGltZShlLHQpKSx0aGlzfSxzLmRlZmF1bHQuVGlja1NvdXJjZS5wcm90b3R5cGUuc3RvcD1mdW5jdGlvbih0KXtpZih0PXRoaXMudG9TZWNvbmRzKHQpLHRoaXMuX3N0YXRlLmdldFZhbHVlQXRUaW1lKHQpPT09cy5kZWZhdWx0LlN0YXRlLlN0b3BwZWQpe3ZhciBlPXRoaXMuX3N0YXRlLmdldCh0KTtlLnRpbWU+MCYmKHRoaXMuX3RpY2tPZmZzZXQuY2FuY2VsKGUudGltZSksdGhpcy5fc3RhdGUuY2FuY2VsKGUudGltZSkpfXJldHVybiB0aGlzLl9zdGF0ZS5jYW5jZWwodCksdGhpcy5fc3RhdGUuc2V0U3RhdGVBdFRpbWUocy5kZWZhdWx0LlN0YXRlLlN0b3BwZWQsdCksdGhpcy5zZXRUaWNrc0F0VGltZSgwLHQpLHRoaXN9LHMuZGVmYXVsdC5UaWNrU291cmNlLnByb3RvdHlwZS5wYXVzZT1mdW5jdGlvbih0KXtyZXR1cm4gdD10aGlzLnRvU2Vjb25kcyh0KSx0aGlzLl9zdGF0ZS5nZXRWYWx1ZUF0VGltZSh0KT09PXMuZGVmYXVsdC5TdGF0ZS5TdGFydGVkJiZ0aGlzLl9zdGF0ZS5zZXRTdGF0ZUF0VGltZShzLmRlZmF1bHQuU3RhdGUuUGF1c2VkLHQpLHRoaXN9LHMuZGVmYXVsdC5UaWNrU291cmNlLnByb3RvdHlwZS5jYW5jZWw9ZnVuY3Rpb24odCl7cmV0dXJuIHQ9dGhpcy50b1NlY29uZHModCksdGhpcy5fc3RhdGUuY2FuY2VsKHQpLHRoaXMuX3RpY2tPZmZzZXQuY2FuY2VsKHQpLHRoaXN9LHMuZGVmYXVsdC5UaWNrU291cmNlLnByb3RvdHlwZS5nZXRUaWNrc0F0VGltZT1mdW5jdGlvbih0KXt0PXRoaXMudG9TZWNvbmRzKHQpO3ZhciBlPXRoaXMuX3N0YXRlLmdldExhc3RTdGF0ZShzLmRlZmF1bHQuU3RhdGUuU3RvcHBlZCx0KSxpPXtzdGF0ZTpzLmRlZmF1bHQuU3RhdGUuUGF1c2VkLHRpbWU6dH07dGhpcy5fc3RhdGUuYWRkKGkpO3ZhciBuPWUsbz0wO3JldHVybiB0aGlzLl9zdGF0ZS5mb3JFYWNoQmV0d2VlbihlLnRpbWUsdCt0aGlzLnNhbXBsZVRpbWUsZnVuY3Rpb24odCl7dmFyIGU9bi50aW1lLGk9dGhpcy5fdGlja09mZnNldC5nZXQodC50aW1lKTtpLnRpbWU+PW4udGltZSYmKG89aS50aWNrcyxlPWkudGltZSksbi5zdGF0ZT09PXMuZGVmYXVsdC5TdGF0ZS5TdGFydGVkJiZ0LnN0YXRlIT09cy5kZWZhdWx0LlN0YXRlLlN0YXJ0ZWQmJihvKz10aGlzLmZyZXF1ZW5jeS5nZXRUaWNrc0F0VGltZSh0LnRpbWUpLXRoaXMuZnJlcXVlbmN5LmdldFRpY2tzQXRUaW1lKGUpKSxuPXR9LmJpbmQodGhpcykpLHRoaXMuX3N0YXRlLnJlbW92ZShpKSxvfSxPYmplY3QuZGVmaW5lUHJvcGVydHkocy5kZWZhdWx0LlRpY2tTb3VyY2UucHJvdG90eXBlLFwidGlja3NcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZ2V0VGlja3NBdFRpbWUodGhpcy5ub3coKSl9LHNldDpmdW5jdGlvbih0KXt0aGlzLnNldFRpY2tzQXRUaW1lKHQsdGhpcy5ub3coKSl9fSksT2JqZWN0LmRlZmluZVByb3BlcnR5KHMuZGVmYXVsdC5UaWNrU291cmNlLnByb3RvdHlwZSxcInNlY29uZHNcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZ2V0U2Vjb25kc0F0VGltZSh0aGlzLm5vdygpKX0sc2V0OmZ1bmN0aW9uKHQpe3ZhciBlPXRoaXMubm93KCksaT10aGlzLmZyZXF1ZW5jeS50aW1lVG9UaWNrcyh0LGUpO3RoaXMuc2V0VGlja3NBdFRpbWUoaSxlKX19KSxzLmRlZmF1bHQuVGlja1NvdXJjZS5wcm90b3R5cGUuZ2V0U2Vjb25kc0F0VGltZT1mdW5jdGlvbih0KXt0PXRoaXMudG9TZWNvbmRzKHQpO3ZhciBlPXRoaXMuX3N0YXRlLmdldExhc3RTdGF0ZShzLmRlZmF1bHQuU3RhdGUuU3RvcHBlZCx0KSxpPXtzdGF0ZTpzLmRlZmF1bHQuU3RhdGUuUGF1c2VkLHRpbWU6dH07dGhpcy5fc3RhdGUuYWRkKGkpO3ZhciBuPWUsbz0wO3JldHVybiB0aGlzLl9zdGF0ZS5mb3JFYWNoQmV0d2VlbihlLnRpbWUsdCt0aGlzLnNhbXBsZVRpbWUsZnVuY3Rpb24odCl7dmFyIGU9bi50aW1lLGk9dGhpcy5fdGlja09mZnNldC5nZXQodC50aW1lKTtpLnRpbWU+PW4udGltZSYmKG89aS5zZWNvbmRzLGU9aS50aW1lKSxuLnN0YXRlPT09cy5kZWZhdWx0LlN0YXRlLlN0YXJ0ZWQmJnQuc3RhdGUhPT1zLmRlZmF1bHQuU3RhdGUuU3RhcnRlZCYmKG8rPXQudGltZS1lKSxuPXR9LmJpbmQodGhpcykpLHRoaXMuX3N0YXRlLnJlbW92ZShpKSxvfSxzLmRlZmF1bHQuVGlja1NvdXJjZS5wcm90b3R5cGUuc2V0VGlja3NBdFRpbWU9ZnVuY3Rpb24odCxlKXtyZXR1cm4gZT10aGlzLnRvU2Vjb25kcyhlKSx0aGlzLl90aWNrT2Zmc2V0LmNhbmNlbChlKSx0aGlzLl90aWNrT2Zmc2V0LmFkZCh7dGltZTplLHRpY2tzOnQsc2Vjb25kczp0aGlzLmZyZXF1ZW5jeS5nZXREdXJhdGlvbk9mVGlja3ModCxlKX0pLHRoaXN9LHMuZGVmYXVsdC5UaWNrU291cmNlLnByb3RvdHlwZS5nZXRTdGF0ZUF0VGltZT1mdW5jdGlvbih0KXtyZXR1cm4gdD10aGlzLnRvU2Vjb25kcyh0KSx0aGlzLl9zdGF0ZS5nZXRWYWx1ZUF0VGltZSh0KX0scy5kZWZhdWx0LlRpY2tTb3VyY2UucHJvdG90eXBlLmdldFRpbWVPZlRpY2s9ZnVuY3Rpb24odCxlKXtlPXMuZGVmYXVsdC5kZWZhdWx0QXJnKGUsdGhpcy5ub3coKSk7dmFyIGk9dGhpcy5fdGlja09mZnNldC5nZXQoZSksbj10aGlzLl9zdGF0ZS5nZXQoZSksbz1NYXRoLm1heChpLnRpbWUsbi50aW1lKSxhPXRoaXMuZnJlcXVlbmN5LmdldFRpY2tzQXRUaW1lKG8pK3QtaS50aWNrcztyZXR1cm4gdGhpcy5mcmVxdWVuY3kuZ2V0VGltZU9mVGljayhhKX0scy5kZWZhdWx0LlRpY2tTb3VyY2UucHJvdG90eXBlLmZvckVhY2hUaWNrQmV0d2Vlbj1mdW5jdGlvbih0LGUsaSl7dmFyIG49dGhpcy5fc3RhdGUuZ2V0KHQpO2lmKHRoaXMuX3N0YXRlLmZvckVhY2hCZXR3ZWVuKHQsZSxmdW5jdGlvbihlKXtuLnN0YXRlPT09cy5kZWZhdWx0LlN0YXRlLlN0YXJ0ZWQmJmUuc3RhdGUhPT1zLmRlZmF1bHQuU3RhdGUuU3RhcnRlZCYmdGhpcy5mb3JFYWNoVGlja0JldHdlZW4oTWF0aC5tYXgobi50aW1lLHQpLGUudGltZS10aGlzLnNhbXBsZVRpbWUsaSksbj1lfS5iaW5kKHRoaXMpKSx0PU1hdGgubWF4KG4udGltZSx0KSxuLnN0YXRlPT09cy5kZWZhdWx0LlN0YXRlLlN0YXJ0ZWQmJnRoaXMuX3N0YXRlKXt2YXIgbz10aGlzLmZyZXF1ZW5jeS5nZXRUaWNrc0F0VGltZSh0KSxhPShvLXRoaXMuZnJlcXVlbmN5LmdldFRpY2tzQXRUaW1lKG4udGltZSkpJTE7MCE9PWEmJihhPTEtYSk7Zm9yKHZhciByPXRoaXMuZnJlcXVlbmN5LmdldFRpbWVPZlRpY2sobythKSxsPW51bGw7cjxlJiZ0aGlzLl9zdGF0ZTspe3RyeXtpKHIsTWF0aC5yb3VuZCh0aGlzLmdldFRpY2tzQXRUaW1lKHIpKSl9Y2F0Y2godCl7bD10O2JyZWFrfXRoaXMuX3N0YXRlJiYocis9dGhpcy5mcmVxdWVuY3kuZ2V0RHVyYXRpb25PZlRpY2tzKDEscikpfX1pZihsKXRocm93IGw7cmV0dXJuIHRoaXN9LHMuZGVmYXVsdC5UaWNrU291cmNlLnByb3RvdHlwZS5kaXNwb3NlPWZ1bmN0aW9uKCl7cmV0dXJuIHMuZGVmYXVsdC5QYXJhbS5wcm90b3R5cGUuZGlzcG9zZS5jYWxsKHRoaXMpLHRoaXMuX3N0YXRlLmRpc3Bvc2UoKSx0aGlzLl9zdGF0ZT1udWxsLHRoaXMuX3RpY2tPZmZzZXQuZGlzcG9zZSgpLHRoaXMuX3RpY2tPZmZzZXQ9bnVsbCx0aGlzLl93cml0YWJsZShcImZyZXF1ZW5jeVwiKSx0aGlzLmZyZXF1ZW5jeS5kaXNwb3NlKCksdGhpcy5mcmVxdWVuY3k9bnVsbCx0aGlzfSxlLmRlZmF1bHQ9cy5kZWZhdWx0LlRpY2tTb3VyY2V9LGZ1bmN0aW9uKHQsZSxpKXtcInVzZSBzdHJpY3RcIjtpLnIoZSk7dmFyIHM9aSgwKTtpKDg3KSxpKDEzKSxpKDIpLGkoNCksaSgxOCksaSgxKTtzLmRlZmF1bHQuRm9sbG93ZXI9ZnVuY3Rpb24oKXt2YXIgdD1zLmRlZmF1bHQuZGVmYXVsdHMoYXJndW1lbnRzLFtcInNtb290aGluZ1wiXSxzLmRlZmF1bHQuRm9sbG93ZXIpO3MuZGVmYXVsdC5BdWRpb05vZGUuY2FsbCh0aGlzKSx0aGlzLmNyZWF0ZUluc091dHMoMSwxKSx0aGlzLl9hYnM9bmV3IHMuZGVmYXVsdC5BYnMsdGhpcy5fZmlsdGVyPXRoaXMuY29udGV4dC5jcmVhdGVCaXF1YWRGaWx0ZXIoKSx0aGlzLl9maWx0ZXIudHlwZT1cImxvd3Bhc3NcIix0aGlzLl9maWx0ZXIuZnJlcXVlbmN5LnZhbHVlPTAsdGhpcy5fZmlsdGVyLlEudmFsdWU9MCx0aGlzLl9zdWI9bmV3IHMuZGVmYXVsdC5TdWJ0cmFjdCx0aGlzLl9kZWxheT1uZXcgcy5kZWZhdWx0LkRlbGF5KHRoaXMuYmxvY2tUaW1lKSx0aGlzLl9zbW9vdGhpbmc9dC5zbW9vdGhpbmcscy5kZWZhdWx0LmNvbm5lY3QodGhpcy5pbnB1dCx0aGlzLl9kZWxheSkscy5kZWZhdWx0LmNvbm5lY3QodGhpcy5pbnB1dCx0aGlzLl9zdWIsMCwxKSx0aGlzLl9zdWIuY2hhaW4odGhpcy5fYWJzLHRoaXMuX2ZpbHRlcix0aGlzLm91dHB1dCksdGhpcy5zbW9vdGhpbmc9dC5zbW9vdGhpbmd9LHMuZGVmYXVsdC5leHRlbmQocy5kZWZhdWx0LkZvbGxvd2VyLHMuZGVmYXVsdC5BdWRpb05vZGUpLHMuZGVmYXVsdC5Gb2xsb3dlci5kZWZhdWx0cz17c21vb3RoaW5nOi4wNX0sT2JqZWN0LmRlZmluZVByb3BlcnR5KHMuZGVmYXVsdC5Gb2xsb3dlci5wcm90b3R5cGUsXCJzbW9vdGhpbmdcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3Ntb290aGluZ30sc2V0OmZ1bmN0aW9uKHQpe3RoaXMuX3Ntb290aGluZz10LHRoaXMuX2ZpbHRlci5mcmVxdWVuY3kudmFsdWU9LjUqcy5kZWZhdWx0LlRpbWUodCkudG9GcmVxdWVuY3koKX19KSxzLmRlZmF1bHQuRm9sbG93ZXIucHJvdG90eXBlLmNvbm5lY3Q9cy5kZWZhdWx0LlNpZ25hbEJhc2UucHJvdG90eXBlLmNvbm5lY3Qscy5kZWZhdWx0LkZvbGxvd2VyLnByb3RvdHlwZS5kaXNwb3NlPWZ1bmN0aW9uKCl7cmV0dXJuIHMuZGVmYXVsdC5BdWRpb05vZGUucHJvdG90eXBlLmRpc3Bvc2UuY2FsbCh0aGlzKSx0aGlzLl9maWx0ZXIuZGlzY29ubmVjdCgpLHRoaXMuX2ZpbHRlcj1udWxsLHRoaXMuX2RlbGF5LmRpc3Bvc2UoKSx0aGlzLl9kZWxheT1udWxsLHRoaXMuX3N1Yi5kaXNjb25uZWN0KCksdGhpcy5fc3ViPW51bGwsdGhpcy5fYWJzLmRpc3Bvc2UoKSx0aGlzLl9hYnM9bnVsbCx0aGlzfSxlLmRlZmF1bHQ9cy5kZWZhdWx0LkZvbGxvd2VyfSxmdW5jdGlvbih0LGUsaSl7XCJ1c2Ugc3RyaWN0XCI7aS5yKGUpO3ZhciBzPWkoMCk7aSg0MiksaSgyKSxpKDE0KSxpKDE4KSxpKDMpLGkoMSk7cy5kZWZhdWx0LkZlZWRiYWNrQ29tYkZpbHRlcj1mdW5jdGlvbigpe3ZhciB0PXMuZGVmYXVsdC5kZWZhdWx0cyhhcmd1bWVudHMsW1wiZGVsYXlUaW1lXCIsXCJyZXNvbmFuY2VcIl0scy5kZWZhdWx0LkZlZWRiYWNrQ29tYkZpbHRlcik7cy5kZWZhdWx0LkF1ZGlvTm9kZS5jYWxsKHRoaXMpLHRoaXMuX2RlbGF5PXRoaXMuaW5wdXQ9dGhpcy5vdXRwdXQ9bmV3IHMuZGVmYXVsdC5EZWxheSh0LmRlbGF5VGltZSksdGhpcy5kZWxheVRpbWU9dGhpcy5fZGVsYXkuZGVsYXlUaW1lLHRoaXMuX2ZlZWRiYWNrPW5ldyBzLmRlZmF1bHQuR2Fpbih0LnJlc29uYW5jZSxzLmRlZmF1bHQuVHlwZS5Ob3JtYWxSYW5nZSksdGhpcy5yZXNvbmFuY2U9dGhpcy5fZmVlZGJhY2suZ2Fpbix0aGlzLl9kZWxheS5jaGFpbih0aGlzLl9mZWVkYmFjayx0aGlzLl9kZWxheSksdGhpcy5fcmVhZE9ubHkoW1wicmVzb25hbmNlXCIsXCJkZWxheVRpbWVcIl0pfSxzLmRlZmF1bHQuZXh0ZW5kKHMuZGVmYXVsdC5GZWVkYmFja0NvbWJGaWx0ZXIscy5kZWZhdWx0LkF1ZGlvTm9kZSkscy5kZWZhdWx0LkZlZWRiYWNrQ29tYkZpbHRlci5kZWZhdWx0cz17ZGVsYXlUaW1lOi4xLHJlc29uYW5jZTouNX0scy5kZWZhdWx0LkZlZWRiYWNrQ29tYkZpbHRlci5wcm90b3R5cGUuZGlzcG9zZT1mdW5jdGlvbigpe3JldHVybiBzLmRlZmF1bHQuQXVkaW9Ob2RlLnByb3RvdHlwZS5kaXNwb3NlLmNhbGwodGhpcyksdGhpcy5fd3JpdGFibGUoW1wicmVzb25hbmNlXCIsXCJkZWxheVRpbWVcIl0pLHRoaXMuX2RlbGF5LmRpc3Bvc2UoKSx0aGlzLl9kZWxheT1udWxsLHRoaXMuZGVsYXlUaW1lPW51bGwsdGhpcy5fZmVlZGJhY2suZGlzcG9zZSgpLHRoaXMuX2ZlZWRiYWNrPW51bGwsdGhpcy5yZXNvbmFuY2U9bnVsbCx0aGlzfSxlLmRlZmF1bHQ9cy5kZWZhdWx0LkZlZWRiYWNrQ29tYkZpbHRlcn0sZnVuY3Rpb24odCxlLGkpe1widXNlIHN0cmljdFwiO2kucihlKTt2YXIgcz1pKDApO2koOSksaSgyKSxpKDMpLGkoMSk7cy5kZWZhdWx0Lk11bHRpYmFuZFNwbGl0PWZ1bmN0aW9uKCl7dmFyIHQ9cy5kZWZhdWx0LmRlZmF1bHRzKGFyZ3VtZW50cyxbXCJsb3dGcmVxdWVuY3lcIixcImhpZ2hGcmVxdWVuY3lcIl0scy5kZWZhdWx0Lk11bHRpYmFuZFNwbGl0KTtzLmRlZmF1bHQuQXVkaW9Ob2RlLmNhbGwodGhpcyksdGhpcy5pbnB1dD1uZXcgcy5kZWZhdWx0LkdhaW4sdGhpcy5vdXRwdXQ9bmV3IEFycmF5KDMpLHRoaXMubG93PXRoaXMub3V0cHV0WzBdPW5ldyBzLmRlZmF1bHQuRmlsdGVyKDAsXCJsb3dwYXNzXCIpLHRoaXMuX2xvd01pZEZpbHRlcj1uZXcgcy5kZWZhdWx0LkZpbHRlcigwLFwiaGlnaHBhc3NcIiksdGhpcy5taWQ9dGhpcy5vdXRwdXRbMV09bmV3IHMuZGVmYXVsdC5GaWx0ZXIoMCxcImxvd3Bhc3NcIiksdGhpcy5oaWdoPXRoaXMub3V0cHV0WzJdPW5ldyBzLmRlZmF1bHQuRmlsdGVyKDAsXCJoaWdocGFzc1wiKSx0aGlzLmxvd0ZyZXF1ZW5jeT1uZXcgcy5kZWZhdWx0LlNpZ25hbCh0Lmxvd0ZyZXF1ZW5jeSxzLmRlZmF1bHQuVHlwZS5GcmVxdWVuY3kpLHRoaXMuaGlnaEZyZXF1ZW5jeT1uZXcgcy5kZWZhdWx0LlNpZ25hbCh0LmhpZ2hGcmVxdWVuY3kscy5kZWZhdWx0LlR5cGUuRnJlcXVlbmN5KSx0aGlzLlE9bmV3IHMuZGVmYXVsdC5TaWduYWwodC5RKSx0aGlzLmlucHV0LmZhbih0aGlzLmxvdyx0aGlzLmhpZ2gpLHRoaXMuaW5wdXQuY2hhaW4odGhpcy5fbG93TWlkRmlsdGVyLHRoaXMubWlkKSx0aGlzLmxvd0ZyZXF1ZW5jeS5jb25uZWN0KHRoaXMubG93LmZyZXF1ZW5jeSksdGhpcy5sb3dGcmVxdWVuY3kuY29ubmVjdCh0aGlzLl9sb3dNaWRGaWx0ZXIuZnJlcXVlbmN5KSx0aGlzLmhpZ2hGcmVxdWVuY3kuY29ubmVjdCh0aGlzLm1pZC5mcmVxdWVuY3kpLHRoaXMuaGlnaEZyZXF1ZW5jeS5jb25uZWN0KHRoaXMuaGlnaC5mcmVxdWVuY3kpLHRoaXMuUS5jb25uZWN0KHRoaXMubG93LlEpLHRoaXMuUS5jb25uZWN0KHRoaXMuX2xvd01pZEZpbHRlci5RKSx0aGlzLlEuY29ubmVjdCh0aGlzLm1pZC5RKSx0aGlzLlEuY29ubmVjdCh0aGlzLmhpZ2guUSksdGhpcy5fcmVhZE9ubHkoW1wiaGlnaFwiLFwibWlkXCIsXCJsb3dcIixcImhpZ2hGcmVxdWVuY3lcIixcImxvd0ZyZXF1ZW5jeVwiXSl9LHMuZGVmYXVsdC5leHRlbmQocy5kZWZhdWx0Lk11bHRpYmFuZFNwbGl0LHMuZGVmYXVsdC5BdWRpb05vZGUpLHMuZGVmYXVsdC5NdWx0aWJhbmRTcGxpdC5kZWZhdWx0cz17bG93RnJlcXVlbmN5OjQwMCxoaWdoRnJlcXVlbmN5OjI1MDAsUToxfSxzLmRlZmF1bHQuTXVsdGliYW5kU3BsaXQucHJvdG90eXBlLmRpc3Bvc2U9ZnVuY3Rpb24oKXtyZXR1cm4gcy5kZWZhdWx0LkF1ZGlvTm9kZS5wcm90b3R5cGUuZGlzcG9zZS5jYWxsKHRoaXMpLHRoaXMuX3dyaXRhYmxlKFtcImhpZ2hcIixcIm1pZFwiLFwibG93XCIsXCJoaWdoRnJlcXVlbmN5XCIsXCJsb3dGcmVxdWVuY3lcIl0pLHRoaXMubG93LmRpc3Bvc2UoKSx0aGlzLmxvdz1udWxsLHRoaXMuX2xvd01pZEZpbHRlci5kaXNwb3NlKCksdGhpcy5fbG93TWlkRmlsdGVyPW51bGwsdGhpcy5taWQuZGlzcG9zZSgpLHRoaXMubWlkPW51bGwsdGhpcy5oaWdoLmRpc3Bvc2UoKSx0aGlzLmhpZ2g9bnVsbCx0aGlzLmxvd0ZyZXF1ZW5jeS5kaXNwb3NlKCksdGhpcy5sb3dGcmVxdWVuY3k9bnVsbCx0aGlzLmhpZ2hGcmVxdWVuY3kuZGlzcG9zZSgpLHRoaXMuaGlnaEZyZXF1ZW5jeT1udWxsLHRoaXMuUS5kaXNwb3NlKCksdGhpcy5RPW51bGwsdGhpc30sZS5kZWZhdWx0PXMuZGVmYXVsdC5NdWx0aWJhbmRTcGxpdH0sZnVuY3Rpb24odCxlLGkpe1widXNlIHN0cmljdFwiO2kucihlKTt2YXIgcz1pKDApO2koNyk7cy5kZWZhdWx0LlBvdz1mdW5jdGlvbih0KXtzLmRlZmF1bHQuU2lnbmFsQmFzZS5jYWxsKHRoaXMpLHRoaXMuX2V4cD1zLmRlZmF1bHQuZGVmYXVsdEFyZyh0LDEpLHRoaXMuX2V4cFNjYWxlcj10aGlzLmlucHV0PXRoaXMub3V0cHV0PW5ldyBzLmRlZmF1bHQuV2F2ZVNoYXBlcih0aGlzLl9leHBGdW5jKHRoaXMuX2V4cCksODE5Mil9LHMuZGVmYXVsdC5leHRlbmQocy5kZWZhdWx0LlBvdyxzLmRlZmF1bHQuU2lnbmFsQmFzZSksT2JqZWN0LmRlZmluZVByb3BlcnR5KHMuZGVmYXVsdC5Qb3cucHJvdG90eXBlLFwidmFsdWVcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2V4cH0sc2V0OmZ1bmN0aW9uKHQpe3RoaXMuX2V4cD10LHRoaXMuX2V4cFNjYWxlci5zZXRNYXAodGhpcy5fZXhwRnVuYyh0aGlzLl9leHApKX19KSxzLmRlZmF1bHQuUG93LnByb3RvdHlwZS5fZXhwRnVuYz1mdW5jdGlvbih0KXtyZXR1cm4gZnVuY3Rpb24oZSl7cmV0dXJuIE1hdGgucG93KE1hdGguYWJzKGUpLHQpfX0scy5kZWZhdWx0LlBvdy5wcm90b3R5cGUuZGlzcG9zZT1mdW5jdGlvbigpe3JldHVybiBzLmRlZmF1bHQuU2lnbmFsQmFzZS5wcm90b3R5cGUuZGlzcG9zZS5jYWxsKHRoaXMpLHRoaXMuX2V4cFNjYWxlci5kaXNwb3NlKCksdGhpcy5fZXhwU2NhbGVyPW51bGwsdGhpc30sZS5kZWZhdWx0PXMuZGVmYXVsdC5Qb3d9LGZ1bmN0aW9uKHQsZSxpKXtcInVzZSBzdHJpY3RcIjtpLnIoZSk7dmFyIHM9aSgwKTtzLmRlZmF1bHQuVGltZUJhc2U9ZnVuY3Rpb24odCxlKXtpZighKHRoaXMgaW5zdGFuY2VvZiBzLmRlZmF1bHQuVGltZUJhc2UpKXJldHVybiBuZXcgcy5kZWZhdWx0LlRpbWVCYXNlKHQsZSk7aWYodGhpcy5fdmFsPXQsdGhpcy5fdW5pdHM9ZSxzLmRlZmF1bHQuaXNVbmRlZih0aGlzLl91bml0cykmJnMuZGVmYXVsdC5pc1N0cmluZyh0aGlzLl92YWwpJiZwYXJzZUZsb2F0KHRoaXMuX3ZhbCk9PXRoaXMuX3ZhbCYmXCIrXCIhPT10aGlzLl92YWwuY2hhckF0KDApKXRoaXMuX3ZhbD1wYXJzZUZsb2F0KHRoaXMuX3ZhbCksdGhpcy5fdW5pdHM9dGhpcy5fZGVmYXVsdFVuaXRzO2Vsc2UgaWYodCYmdC5jb25zdHJ1Y3Rvcj09PXRoaXMuY29uc3RydWN0b3IpdGhpcy5fdmFsPXQuX3ZhbCx0aGlzLl91bml0cz10Ll91bml0cztlbHNlIGlmKHQgaW5zdGFuY2VvZiBzLmRlZmF1bHQuVGltZUJhc2Upc3dpdGNoKHRoaXMuX2RlZmF1bHRVbml0cyl7Y2FzZVwic1wiOnRoaXMuX3ZhbD10LnRvU2Vjb25kcygpO2JyZWFrO2Nhc2VcImlcIjp0aGlzLl92YWw9dC50b1RpY2tzKCk7YnJlYWs7Y2FzZVwiaHpcIjp0aGlzLl92YWw9dC50b0ZyZXF1ZW5jeSgpO2JyZWFrO2Nhc2VcIm1pZGlcIjp0aGlzLl92YWw9dC50b01pZGkoKTticmVhaztkZWZhdWx0OnRocm93IG5ldyBFcnJvcihcIlVucmVjb2duaXplZCBkZWZhdWx0IHVuaXRzIFwiK3RoaXMuX2RlZmF1bHRVbml0cyl9fSxzLmRlZmF1bHQuZXh0ZW5kKHMuZGVmYXVsdC5UaW1lQmFzZSkscy5kZWZhdWx0LlRpbWVCYXNlLnByb3RvdHlwZS5fZXhwcmVzc2lvbnM9e246e3JlZ2V4cDovXihcXGQrKW4oXFwuPykkL2ksbWV0aG9kOmZ1bmN0aW9uKHQsZSl7dD1wYXJzZUludCh0KTt2YXIgaT1cIi5cIj09PWU/MS41OjE7cmV0dXJuIDE9PT10P3RoaXMuX2JlYXRzVG9Vbml0cyh0aGlzLl9nZXRUaW1lU2lnbmF0dXJlKCkpKmk6dGhpcy5fYmVhdHNUb1VuaXRzKDQvdCkqaX19LHQ6e3JlZ2V4cDovXihcXGQrKXQkL2ksbWV0aG9kOmZ1bmN0aW9uKHQpe3JldHVybiB0PXBhcnNlSW50KHQpLHRoaXMuX2JlYXRzVG9Vbml0cyg4LygzKnBhcnNlSW50KHQpKSl9fSxtOntyZWdleHA6L14oXFxkKyltJC9pLG1ldGhvZDpmdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5fYmVhdHNUb1VuaXRzKHBhcnNlSW50KHQpKnRoaXMuX2dldFRpbWVTaWduYXR1cmUoKSl9fSxpOntyZWdleHA6L14oXFxkKylpJC9pLG1ldGhvZDpmdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5fdGlja3NUb1VuaXRzKHBhcnNlSW50KHQpKX19LGh6OntyZWdleHA6L14oXFxkKyg/OlxcLlxcZCspPyloeiQvaSxtZXRob2Q6ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuX2ZyZXF1ZW5jeVRvVW5pdHMocGFyc2VGbG9hdCh0KSl9fSx0cjp7cmVnZXhwOi9eKFxcZCsoPzpcXC5cXGQrKT8pOihcXGQrKD86XFwuXFxkKyk/KTo/KFxcZCsoPzpcXC5cXGQrKT8pPyQvLG1ldGhvZDpmdW5jdGlvbih0LGUsaSl7dmFyIHM9MDtyZXR1cm4gdCYmXCIwXCIhPT10JiYocys9dGhpcy5fYmVhdHNUb1VuaXRzKHRoaXMuX2dldFRpbWVTaWduYXR1cmUoKSpwYXJzZUZsb2F0KHQpKSksZSYmXCIwXCIhPT1lJiYocys9dGhpcy5fYmVhdHNUb1VuaXRzKHBhcnNlRmxvYXQoZSkpKSxpJiZcIjBcIiE9PWkmJihzKz10aGlzLl9iZWF0c1RvVW5pdHMocGFyc2VGbG9hdChpKS80KSksc319LHM6e3JlZ2V4cDovXihcXGQrKD86XFwuXFxkKyk/KXMkLyxtZXRob2Q6ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuX3NlY29uZHNUb1VuaXRzKHBhcnNlRmxvYXQodCkpfX0sc2FtcGxlczp7cmVnZXhwOi9eKFxcZCspc2FtcGxlcyQvLG1ldGhvZDpmdW5jdGlvbih0KXtyZXR1cm4gcGFyc2VJbnQodCkvdGhpcy5jb250ZXh0LnNhbXBsZVJhdGV9fSxkZWZhdWx0OntyZWdleHA6L14oXFxkKyg/OlxcLlxcZCspPykkLyxtZXRob2Q6ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuX2V4cHJlc3Npb25zW3RoaXMuX2RlZmF1bHRVbml0c10ubWV0aG9kLmNhbGwodGhpcyx0KX19fSxzLmRlZmF1bHQuVGltZUJhc2UucHJvdG90eXBlLl9kZWZhdWx0VW5pdHM9XCJzXCIscy5kZWZhdWx0LlRpbWVCYXNlLnByb3RvdHlwZS5fZ2V0QnBtPWZ1bmN0aW9uKCl7cmV0dXJuIHMuZGVmYXVsdC5UcmFuc3BvcnQ/cy5kZWZhdWx0LlRyYW5zcG9ydC5icG0udmFsdWU6MTIwfSxzLmRlZmF1bHQuVGltZUJhc2UucHJvdG90eXBlLl9nZXRUaW1lU2lnbmF0dXJlPWZ1bmN0aW9uKCl7cmV0dXJuIHMuZGVmYXVsdC5UcmFuc3BvcnQ/cy5kZWZhdWx0LlRyYW5zcG9ydC50aW1lU2lnbmF0dXJlOjR9LHMuZGVmYXVsdC5UaW1lQmFzZS5wcm90b3R5cGUuX2dldFBQUT1mdW5jdGlvbigpe3JldHVybiBzLmRlZmF1bHQuVHJhbnNwb3J0P3MuZGVmYXVsdC5UcmFuc3BvcnQuUFBROjE5Mn0scy5kZWZhdWx0LlRpbWVCYXNlLnByb3RvdHlwZS5fbm93PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMubm93KCl9LHMuZGVmYXVsdC5UaW1lQmFzZS5wcm90b3R5cGUuX2ZyZXF1ZW5jeVRvVW5pdHM9ZnVuY3Rpb24odCl7cmV0dXJuIDEvdH0scy5kZWZhdWx0LlRpbWVCYXNlLnByb3RvdHlwZS5fYmVhdHNUb1VuaXRzPWZ1bmN0aW9uKHQpe3JldHVybiA2MC90aGlzLl9nZXRCcG0oKSp0fSxzLmRlZmF1bHQuVGltZUJhc2UucHJvdG90eXBlLl9zZWNvbmRzVG9Vbml0cz1mdW5jdGlvbih0KXtyZXR1cm4gdH0scy5kZWZhdWx0LlRpbWVCYXNlLnByb3RvdHlwZS5fdGlja3NUb1VuaXRzPWZ1bmN0aW9uKHQpe3JldHVybiB0Kih0aGlzLl9iZWF0c1RvVW5pdHMoMSkvdGhpcy5fZ2V0UFBRKCkpfSxzLmRlZmF1bHQuVGltZUJhc2UucHJvdG90eXBlLl9ub0FyZz1mdW5jdGlvbigpe3JldHVybiB0aGlzLl9ub3coKX0scy5kZWZhdWx0LlRpbWVCYXNlLnByb3RvdHlwZS52YWx1ZU9mPWZ1bmN0aW9uKCl7aWYocy5kZWZhdWx0LmlzVW5kZWYodGhpcy5fdmFsKSlyZXR1cm4gdGhpcy5fbm9BcmcoKTtpZihzLmRlZmF1bHQuaXNTdHJpbmcodGhpcy5fdmFsKSYmcy5kZWZhdWx0LmlzVW5kZWYodGhpcy5fdW5pdHMpKXtmb3IodmFyIHQgaW4gdGhpcy5fZXhwcmVzc2lvbnMpaWYodGhpcy5fZXhwcmVzc2lvbnNbdF0ucmVnZXhwLnRlc3QodGhpcy5fdmFsLnRyaW0oKSkpe3RoaXMuX3VuaXRzPXQ7YnJlYWt9fWVsc2UgaWYocy5kZWZhdWx0LmlzT2JqZWN0KHRoaXMuX3ZhbCkpe3ZhciBlPTA7Zm9yKHZhciBpIGluIHRoaXMuX3ZhbCl7dmFyIG49dGhpcy5fdmFsW2ldO2UrPW5ldyB0aGlzLmNvbnN0cnVjdG9yKGkpLnZhbHVlT2YoKSpufXJldHVybiBlfWlmKHMuZGVmYXVsdC5pc0RlZmluZWQodGhpcy5fdW5pdHMpKXt2YXIgbz10aGlzLl9leHByZXNzaW9uc1t0aGlzLl91bml0c10sYT10aGlzLl92YWwudG9TdHJpbmcoKS50cmltKCkubWF0Y2goby5yZWdleHApO3JldHVybiBhP28ubWV0aG9kLmFwcGx5KHRoaXMsYS5zbGljZSgxKSk6by5tZXRob2QuY2FsbCh0aGlzLHBhcnNlRmxvYXQodGhpcy5fdmFsKSl9cmV0dXJuIHRoaXMuX3ZhbH0scy5kZWZhdWx0LlRpbWVCYXNlLnByb3RvdHlwZS50b1NlY29uZHM9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy52YWx1ZU9mKCl9LHMuZGVmYXVsdC5UaW1lQmFzZS5wcm90b3R5cGUudG9GcmVxdWVuY3k9ZnVuY3Rpb24oKXtyZXR1cm4gMS90aGlzLnRvU2Vjb25kcygpfSxzLmRlZmF1bHQuVGltZUJhc2UucHJvdG90eXBlLnRvU2FtcGxlcz1mdW5jdGlvbigpe3JldHVybiB0aGlzLnRvU2Vjb25kcygpKnRoaXMuY29udGV4dC5zYW1wbGVSYXRlfSxzLmRlZmF1bHQuVGltZUJhc2UucHJvdG90eXBlLnRvTWlsbGlzZWNvbmRzPWZ1bmN0aW9uKCl7cmV0dXJuIDFlMyp0aGlzLnRvU2Vjb25kcygpfSxzLmRlZmF1bHQuVGltZUJhc2UucHJvdG90eXBlLmRpc3Bvc2U9ZnVuY3Rpb24oKXt0aGlzLl92YWw9bnVsbCx0aGlzLl91bml0cz1udWxsfSxlLmRlZmF1bHQ9cy5kZWZhdWx0LlRpbWVCYXNlfSxmdW5jdGlvbih0LGUsaSl7XCJ1c2Ugc3RyaWN0XCI7aS5yKGUpO3ZhciBzPWkoMCk7aSg2MiksaSg0Nik7cy5kZWZhdWx0LlRpbWU9ZnVuY3Rpb24odCxlKXtpZighKHRoaXMgaW5zdGFuY2VvZiBzLmRlZmF1bHQuVGltZSkpcmV0dXJuIG5ldyBzLmRlZmF1bHQuVGltZSh0LGUpO3MuZGVmYXVsdC5UaW1lQmFzZS5jYWxsKHRoaXMsdCxlKX0scy5kZWZhdWx0LmV4dGVuZChzLmRlZmF1bHQuVGltZSxzLmRlZmF1bHQuVGltZUJhc2UpLHMuZGVmYXVsdC5UaW1lLnByb3RvdHlwZS5fZXhwcmVzc2lvbnM9T2JqZWN0LmFzc2lnbih7fSxzLmRlZmF1bHQuVGltZUJhc2UucHJvdG90eXBlLl9leHByZXNzaW9ucyx7cXVhbnRpemU6e3JlZ2V4cDovXkAoLispLyxtZXRob2Q6ZnVuY3Rpb24odCl7aWYocy5kZWZhdWx0LlRyYW5zcG9ydCl7dmFyIGU9bmV3IHRoaXMuY29uc3RydWN0b3IodCk7cmV0dXJuIHRoaXMuX3NlY29uZHNUb1VuaXRzKHMuZGVmYXVsdC5UcmFuc3BvcnQubmV4dFN1YmRpdmlzaW9uKGUpKX1yZXR1cm4gMH19LG5vdzp7cmVnZXhwOi9eXFwrKC4rKS8sbWV0aG9kOmZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLl9ub3coKStuZXcgdGhpcy5jb25zdHJ1Y3Rvcih0KX19fSkscy5kZWZhdWx0LlRpbWUucHJvdG90eXBlLnF1YW50aXplPWZ1bmN0aW9uKHQsZSl7ZT1zLmRlZmF1bHQuZGVmYXVsdEFyZyhlLDEpO3ZhciBpPW5ldyB0aGlzLmNvbnN0cnVjdG9yKHQpLG49dGhpcy52YWx1ZU9mKCk7cmV0dXJuIG4rKE1hdGgucm91bmQobi9pKSppLW4pKmV9LHMuZGVmYXVsdC5UaW1lLnByb3RvdHlwZS50b05vdGF0aW9uPWZ1bmN0aW9uKCl7Zm9yKHZhciB0PXRoaXMudG9TZWNvbmRzKCksZT1bXCIxbVwiXSxpPTE7aTw4O2krKyl7dmFyIG49TWF0aC5wb3coMixpKTtlLnB1c2gobitcIm4uXCIpLGUucHVzaChuK1wiblwiKSxlLnB1c2gobitcInRcIil9ZS5wdXNoKFwiMFwiKTt2YXIgbz1lWzBdLGE9cy5kZWZhdWx0LlRpbWUoZVswXSkudG9TZWNvbmRzKCk7cmV0dXJuIGUuZm9yRWFjaChmdW5jdGlvbihlKXt2YXIgaT1zLmRlZmF1bHQuVGltZShlKS50b1NlY29uZHMoKTtNYXRoLmFicyhpLXQpPE1hdGguYWJzKGEtdCkmJihvPWUsYT1pKX0pLG99LHMuZGVmYXVsdC5UaW1lLnByb3RvdHlwZS50b0JhcnNCZWF0c1NpeHRlZW50aHM9ZnVuY3Rpb24oKXt2YXIgdD10aGlzLl9iZWF0c1RvVW5pdHMoMSksZT10aGlzLnZhbHVlT2YoKS90O2U9cGFyc2VGbG9hdChlLnRvRml4ZWQoNCkpO3ZhciBpPU1hdGguZmxvb3IoZS90aGlzLl9nZXRUaW1lU2lnbmF0dXJlKCkpLHM9ZSUxKjQ7cmV0dXJuIGU9TWF0aC5mbG9vcihlKSV0aGlzLl9nZXRUaW1lU2lnbmF0dXJlKCksKHM9cy50b1N0cmluZygpKS5sZW5ndGg+MyYmKHM9cGFyc2VGbG9hdChwYXJzZUZsb2F0KHMpLnRvRml4ZWQoMykpKSxbaSxlLHNdLmpvaW4oXCI6XCIpfSxzLmRlZmF1bHQuVGltZS5wcm90b3R5cGUudG9UaWNrcz1mdW5jdGlvbigpe3ZhciB0PXRoaXMuX2JlYXRzVG9Vbml0cygxKSxlPXRoaXMudmFsdWVPZigpL3Q7cmV0dXJuIE1hdGgucm91bmQoZSp0aGlzLl9nZXRQUFEoKSl9LHMuZGVmYXVsdC5UaW1lLnByb3RvdHlwZS50b1NlY29uZHM9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy52YWx1ZU9mKCl9LHMuZGVmYXVsdC5UaW1lLnByb3RvdHlwZS50b01pZGk9ZnVuY3Rpb24oKXtyZXR1cm4gcy5kZWZhdWx0LkZyZXF1ZW5jeS5mdG9tKHRoaXMudG9GcmVxdWVuY3koKSl9LGUuZGVmYXVsdD1zLmRlZmF1bHQuVGltZX0sZnVuY3Rpb24odCxlLGkpe1widXNlIHN0cmljdFwiO2kucihlKTt2YXIgcz1pKDApO2koMTEpLGkoNiksaSgzKSxpKDEpO3MuZGVmYXVsdC5zdXBwb3J0ZWQmJihPc2NpbGxhdG9yTm9kZS5wcm90b3R5cGUuc2V0UGVyaW9kaWNXYXZlfHwoT3NjaWxsYXRvck5vZGUucHJvdG90eXBlLnNldFBlcmlvZGljV2F2ZT1Pc2NpbGxhdG9yTm9kZS5wcm90b3R5cGUuc2V0V2F2ZVRhYmxlKSxBdWRpb0NvbnRleHQucHJvdG90eXBlLmNyZWF0ZVBlcmlvZGljV2F2ZXx8KEF1ZGlvQ29udGV4dC5wcm90b3R5cGUuY3JlYXRlUGVyaW9kaWNXYXZlPUF1ZGlvQ29udGV4dC5wcm90b3R5cGUuY3JlYXRlV2F2ZVRhYmxlKSkscy5kZWZhdWx0Lk9zY2lsbGF0b3JOb2RlPWZ1bmN0aW9uKCl7dmFyIHQ9cy5kZWZhdWx0LmRlZmF1bHRzKGFyZ3VtZW50cyxbXCJmcmVxdWVuY3lcIixcInR5cGVcIl0scy5kZWZhdWx0Lk9zY2lsbGF0b3JOb2RlKTtzLmRlZmF1bHQuQXVkaW9Ob2RlLmNhbGwodGhpcyx0KSx0aGlzLm9uZW5kZWQ9dC5vbmVuZGVkLHRoaXMuX3N0YXJ0VGltZT0tMSx0aGlzLl9zdG9wVGltZT0tMSx0aGlzLl9nYWluTm9kZT10aGlzLm91dHB1dD1uZXcgcy5kZWZhdWx0LkdhaW4oMCksdGhpcy5fb3NjaWxsYXRvcj10aGlzLmNvbnRleHQuY3JlYXRlT3NjaWxsYXRvcigpLHMuZGVmYXVsdC5jb25uZWN0KHRoaXMuX29zY2lsbGF0b3IsdGhpcy5fZ2Fpbk5vZGUpLHRoaXMudHlwZT10LnR5cGUsdGhpcy5mcmVxdWVuY3k9bmV3IHMuZGVmYXVsdC5QYXJhbSh7cGFyYW06dGhpcy5fb3NjaWxsYXRvci5mcmVxdWVuY3ksdW5pdHM6cy5kZWZhdWx0LlR5cGUuRnJlcXVlbmN5LHZhbHVlOnQuZnJlcXVlbmN5fSksdGhpcy5kZXR1bmU9bmV3IHMuZGVmYXVsdC5QYXJhbSh7cGFyYW06dGhpcy5fb3NjaWxsYXRvci5kZXR1bmUsdW5pdHM6cy5kZWZhdWx0LlR5cGUuQ2VudHMsdmFsdWU6dC5kZXR1bmV9KSx0aGlzLl9nYWluPTF9LHMuZGVmYXVsdC5leHRlbmQocy5kZWZhdWx0Lk9zY2lsbGF0b3JOb2RlLHMuZGVmYXVsdC5BdWRpb05vZGUpLHMuZGVmYXVsdC5Pc2NpbGxhdG9yTm9kZS5kZWZhdWx0cz17ZnJlcXVlbmN5OjQ0MCxkZXR1bmU6MCx0eXBlOlwic2luZVwiLG9uZW5kZWQ6cy5kZWZhdWx0Lm5vT3B9LE9iamVjdC5kZWZpbmVQcm9wZXJ0eShzLmRlZmF1bHQuT3NjaWxsYXRvck5vZGUucHJvdG90eXBlLFwic3RhdGVcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZ2V0U3RhdGVBdFRpbWUodGhpcy5ub3coKSl9fSkscy5kZWZhdWx0Lk9zY2lsbGF0b3JOb2RlLnByb3RvdHlwZS5nZXRTdGF0ZUF0VGltZT1mdW5jdGlvbih0KXtyZXR1cm4gdD10aGlzLnRvU2Vjb25kcyh0KSwtMSE9PXRoaXMuX3N0YXJ0VGltZSYmdD49dGhpcy5fc3RhcnRUaW1lJiYoLTE9PT10aGlzLl9zdG9wVGltZXx8dDw9dGhpcy5fc3RvcFRpbWUpP3MuZGVmYXVsdC5TdGF0ZS5TdGFydGVkOnMuZGVmYXVsdC5TdGF0ZS5TdG9wcGVkfSxzLmRlZmF1bHQuT3NjaWxsYXRvck5vZGUucHJvdG90eXBlLnN0YXJ0PWZ1bmN0aW9uKHQpe2lmKHRoaXMubG9nKFwic3RhcnRcIix0KSwtMSE9PXRoaXMuX3N0YXJ0VGltZSl0aHJvdyBuZXcgRXJyb3IoXCJjYW5ub3QgY2FsbCBPc2NpbGxhdG9yTm9kZS5zdGFydCBtb3JlIHRoYW4gb25jZVwiKTtyZXR1cm4gdGhpcy5fc3RhcnRUaW1lPXRoaXMudG9TZWNvbmRzKHQpLHRoaXMuX3N0YXJ0VGltZT1NYXRoLm1heCh0aGlzLl9zdGFydFRpbWUsdGhpcy5jb250ZXh0LmN1cnJlbnRUaW1lKSx0aGlzLl9vc2NpbGxhdG9yLnN0YXJ0KHRoaXMuX3N0YXJ0VGltZSksdGhpcy5fZ2Fpbk5vZGUuZ2Fpbi5zZXRWYWx1ZUF0VGltZSgxLHRoaXMuX3N0YXJ0VGltZSksdGhpc30scy5kZWZhdWx0Lk9zY2lsbGF0b3JOb2RlLnByb3RvdHlwZS5zZXRQZXJpb2RpY1dhdmU9ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuX29zY2lsbGF0b3Iuc2V0UGVyaW9kaWNXYXZlKHQpLHRoaXN9LHMuZGVmYXVsdC5Pc2NpbGxhdG9yTm9kZS5wcm90b3R5cGUuc3RvcD1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5sb2coXCJzdG9wXCIsdCksdGhpcy5hc3NlcnQoLTEhPT10aGlzLl9zdGFydFRpbWUsXCInc3RhcnQnIG11c3QgYmUgY2FsbGVkIGJlZm9yZSAnc3RvcCdcIiksdGhpcy5jYW5jZWxTdG9wKCksdGhpcy5fc3RvcFRpbWU9dGhpcy50b1NlY29uZHModCksdGhpcy5fc3RvcFRpbWU9TWF0aC5tYXgodGhpcy5fc3RvcFRpbWUsdGhpcy5jb250ZXh0LmN1cnJlbnRUaW1lKSx0aGlzLl9zdG9wVGltZT50aGlzLl9zdGFydFRpbWU/KHRoaXMuX2dhaW5Ob2RlLmdhaW4uc2V0VmFsdWVBdFRpbWUoMCx0aGlzLl9zdG9wVGltZSksdGhpcy5jb250ZXh0LmNsZWFyVGltZW91dCh0aGlzLl90aW1lb3V0KSx0aGlzLl90aW1lb3V0PXRoaXMuY29udGV4dC5zZXRUaW1lb3V0KGZ1bmN0aW9uKCl7dGhpcy5fb3NjaWxsYXRvci5zdG9wKHRoaXMubm93KCkpLHRoaXMub25lbmRlZCgpLHNldFRpbWVvdXQoZnVuY3Rpb24oKXt0aGlzLl9vc2NpbGxhdG9yJiYodGhpcy5fb3NjaWxsYXRvci5kaXNjb25uZWN0KCksdGhpcy5fZ2Fpbk5vZGUuZGlzY29ubmVjdCgpKX0uYmluZCh0aGlzKSwxMDApfS5iaW5kKHRoaXMpLHRoaXMuX3N0b3BUaW1lLXRoaXMuY29udGV4dC5jdXJyZW50VGltZSkpOnRoaXMuX2dhaW5Ob2RlLmdhaW4uY2FuY2VsU2NoZWR1bGVkVmFsdWVzKHRoaXMuX3N0YXJ0VGltZSksdGhpc30scy5kZWZhdWx0Lk9zY2lsbGF0b3JOb2RlLnByb3RvdHlwZS5jYW5jZWxTdG9wPWZ1bmN0aW9uKCl7cmV0dXJuLTEhPT10aGlzLl9zdGFydFRpbWUmJih0aGlzLl9nYWluTm9kZS5nYWluLmNhbmNlbFNjaGVkdWxlZFZhbHVlcyh0aGlzLl9zdGFydFRpbWUrdGhpcy5zYW1wbGVUaW1lKSx0aGlzLmNvbnRleHQuY2xlYXJUaW1lb3V0KHRoaXMuX3RpbWVvdXQpLHRoaXMuX3N0b3BUaW1lPS0xKSx0aGlzfSxPYmplY3QuZGVmaW5lUHJvcGVydHkocy5kZWZhdWx0Lk9zY2lsbGF0b3JOb2RlLnByb3RvdHlwZSxcInR5cGVcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX29zY2lsbGF0b3IudHlwZX0sc2V0OmZ1bmN0aW9uKHQpe3RoaXMuX29zY2lsbGF0b3IudHlwZT10fX0pLHMuZGVmYXVsdC5Pc2NpbGxhdG9yTm9kZS5wcm90b3R5cGUuZGlzcG9zZT1mdW5jdGlvbigpe3JldHVybiB0aGlzLl93YXNEaXNwb3NlZHx8KHRoaXMuX3dhc0Rpc3Bvc2VkPSEwLHRoaXMuY29udGV4dC5jbGVhclRpbWVvdXQodGhpcy5fdGltZW91dCkscy5kZWZhdWx0LkF1ZGlvTm9kZS5wcm90b3R5cGUuZGlzcG9zZS5jYWxsKHRoaXMpLHRoaXMub25lbmRlZD1udWxsLHRoaXMuX29zY2lsbGF0b3IuZGlzY29ubmVjdCgpLHRoaXMuX29zY2lsbGF0b3I9bnVsbCx0aGlzLl9nYWluTm9kZS5kaXNwb3NlKCksdGhpcy5fZ2Fpbk5vZGU9bnVsbCx0aGlzLmZyZXF1ZW5jeS5kaXNwb3NlKCksdGhpcy5mcmVxdWVuY3k9bnVsbCx0aGlzLmRldHVuZS5kaXNwb3NlKCksdGhpcy5kZXR1bmU9bnVsbCksdGhpc307ZS5kZWZhdWx0PXMuZGVmYXVsdC5Pc2NpbGxhdG9yTm9kZX0sZnVuY3Rpb24odCxlLGkpe1widXNlIHN0cmljdFwiO2kucihlKTt2YXIgcz1pKDApO2koMTEpLGkoNiksaSg1NyksaSgzMik7cy5kZWZhdWx0LlBsYXllcj1mdW5jdGlvbih0KXt2YXIgZTt0IGluc3RhbmNlb2Ygcy5kZWZhdWx0LkJ1ZmZlciYmdC5sb2FkZWQ/KHQ9dC5nZXQoKSxlPXMuZGVmYXVsdC5QbGF5ZXIuZGVmYXVsdHMpOmU9cy5kZWZhdWx0LmRlZmF1bHRzKGFyZ3VtZW50cyxbXCJ1cmxcIixcIm9ubG9hZFwiXSxzLmRlZmF1bHQuUGxheWVyKSxzLmRlZmF1bHQuU291cmNlLmNhbGwodGhpcyxlKSx0aGlzLmF1dG9zdGFydD1lLmF1dG9zdGFydCx0aGlzLl9idWZmZXI9bmV3IHMuZGVmYXVsdC5CdWZmZXIoe3VybDplLnVybCxvbmxvYWQ6dGhpcy5fb25sb2FkLmJpbmQodGhpcyxlLm9ubG9hZCkscmV2ZXJzZTplLnJldmVyc2V9KSx0IGluc3RhbmNlb2YgQXVkaW9CdWZmZXImJnRoaXMuX2J1ZmZlci5zZXQodCksdGhpcy5fbG9vcD1lLmxvb3AsdGhpcy5fbG9vcFN0YXJ0PWUubG9vcFN0YXJ0LHRoaXMuX2xvb3BFbmQ9ZS5sb29wRW5kLHRoaXMuX3BsYXliYWNrUmF0ZT1lLnBsYXliYWNrUmF0ZSx0aGlzLl9hY3RpdmVTb3VyY2VzPVtdLHRoaXMuZmFkZUluPWUuZmFkZUluLHRoaXMuZmFkZU91dD1lLmZhZGVPdXR9LHMuZGVmYXVsdC5leHRlbmQocy5kZWZhdWx0LlBsYXllcixzLmRlZmF1bHQuU291cmNlKSxzLmRlZmF1bHQuUGxheWVyLmRlZmF1bHRzPXtvbmxvYWQ6cy5kZWZhdWx0Lm5vT3AscGxheWJhY2tSYXRlOjEsbG9vcDohMSxhdXRvc3RhcnQ6ITEsbG9vcFN0YXJ0OjAsbG9vcEVuZDowLHJldmVyc2U6ITEsZmFkZUluOjAsZmFkZU91dDowfSxzLmRlZmF1bHQuUGxheWVyLnByb3RvdHlwZS5sb2FkPWZ1bmN0aW9uKHQsZSl7cmV0dXJuIHRoaXMuX2J1ZmZlci5sb2FkKHQsdGhpcy5fb25sb2FkLmJpbmQodGhpcyxlKSl9LHMuZGVmYXVsdC5QbGF5ZXIucHJvdG90eXBlLl9vbmxvYWQ9ZnVuY3Rpb24odCl7KHQ9cy5kZWZhdWx0LmRlZmF1bHRBcmcodCxzLmRlZmF1bHQubm9PcCkpKHRoaXMpLHRoaXMuYXV0b3N0YXJ0JiZ0aGlzLnN0YXJ0KCl9LHMuZGVmYXVsdC5QbGF5ZXIucHJvdG90eXBlLl9vblNvdXJjZUVuZD1mdW5jdGlvbih0KXt2YXIgZT10aGlzLl9hY3RpdmVTb3VyY2VzLmluZGV4T2YodCk7dGhpcy5fYWN0aXZlU291cmNlcy5zcGxpY2UoZSwxKSwwIT09dGhpcy5fYWN0aXZlU291cmNlcy5sZW5ndGh8fHRoaXMuX3N5bmNlZHx8dGhpcy5fc3RhdGUuc2V0U3RhdGVBdFRpbWUocy5kZWZhdWx0LlN0YXRlLlN0b3BwZWQscy5kZWZhdWx0Lm5vdygpKX0scy5kZWZhdWx0LlBsYXllci5wcm90b3R5cGUuX3N0YXJ0PWZ1bmN0aW9uKHQsZSxpKXtlPXRoaXMuX2xvb3A/cy5kZWZhdWx0LmRlZmF1bHRBcmcoZSx0aGlzLl9sb29wU3RhcnQpOnMuZGVmYXVsdC5kZWZhdWx0QXJnKGUsMCksZT10aGlzLnRvU2Vjb25kcyhlKSx0aGlzLl9zeW5jZWQmJihlKj10aGlzLl9wbGF5YmFja1JhdGUpO3ZhciBuPXMuZGVmYXVsdC5kZWZhdWx0QXJnKGksTWF0aC5tYXgodGhpcy5fYnVmZmVyLmR1cmF0aW9uLWUsMCkpO249dGhpcy50b1NlY29uZHMobiksbi89dGhpcy5fcGxheWJhY2tSYXRlLHQ9dGhpcy50b1NlY29uZHModCk7dmFyIG89bmV3IHMuZGVmYXVsdC5CdWZmZXJTb3VyY2Uoe2J1ZmZlcjp0aGlzLl9idWZmZXIsbG9vcDp0aGlzLl9sb29wLGxvb3BTdGFydDp0aGlzLl9sb29wU3RhcnQsbG9vcEVuZDp0aGlzLl9sb29wRW5kLG9uZW5kZWQ6dGhpcy5fb25Tb3VyY2VFbmQuYmluZCh0aGlzKSxwbGF5YmFja1JhdGU6dGhpcy5fcGxheWJhY2tSYXRlLGZhZGVJbjp0aGlzLmZhZGVJbixmYWRlT3V0OnRoaXMuZmFkZU91dH0pLmNvbm5lY3QodGhpcy5vdXRwdXQpO3JldHVybiB0aGlzLl9sb29wfHx0aGlzLl9zeW5jZWR8fHRoaXMuX3N0YXRlLnNldFN0YXRlQXRUaW1lKHMuZGVmYXVsdC5TdGF0ZS5TdG9wcGVkLHQrbiksdGhpcy5fYWN0aXZlU291cmNlcy5wdXNoKG8pLHRoaXMuX2xvb3AmJnMuZGVmYXVsdC5pc1VuZGVmKGkpP28uc3RhcnQodCxlKTpvLnN0YXJ0KHQsZSxuLXRoaXMudG9TZWNvbmRzKHRoaXMuZmFkZU91dCkpLHRoaXN9LHMuZGVmYXVsdC5QbGF5ZXIucHJvdG90eXBlLl9zdG9wPWZ1bmN0aW9uKHQpe3JldHVybiB0PXRoaXMudG9TZWNvbmRzKHQpLHRoaXMuX2FjdGl2ZVNvdXJjZXMuZm9yRWFjaChmdW5jdGlvbihlKXtlLnN0b3AodCl9KSx0aGlzfSxzLmRlZmF1bHQuUGxheWVyLnByb3RvdHlwZS5yZXN0YXJ0PWZ1bmN0aW9uKHQsZSxpKXtyZXR1cm4gdGhpcy5fc3RvcCh0KSx0aGlzLl9zdGFydCh0LGUsaSksdGhpc30scy5kZWZhdWx0LlBsYXllci5wcm90b3R5cGUuc2Vlaz1mdW5jdGlvbih0LGUpe3JldHVybiBlPXRoaXMudG9TZWNvbmRzKGUpLHRoaXMuX3N0YXRlLmdldFZhbHVlQXRUaW1lKGUpPT09cy5kZWZhdWx0LlN0YXRlLlN0YXJ0ZWQmJih0PXRoaXMudG9TZWNvbmRzKHQpLHRoaXMuX3N0b3AoZSksdGhpcy5fc3RhcnQoZSx0KSksdGhpc30scy5kZWZhdWx0LlBsYXllci5wcm90b3R5cGUuc2V0TG9vcFBvaW50cz1mdW5jdGlvbih0LGUpe3JldHVybiB0aGlzLmxvb3BTdGFydD10LHRoaXMubG9vcEVuZD1lLHRoaXN9LE9iamVjdC5kZWZpbmVQcm9wZXJ0eShzLmRlZmF1bHQuUGxheWVyLnByb3RvdHlwZSxcImxvb3BTdGFydFwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fbG9vcFN0YXJ0fSxzZXQ6ZnVuY3Rpb24odCl7dGhpcy5fbG9vcFN0YXJ0PXQsdGhpcy5fYWN0aXZlU291cmNlcy5mb3JFYWNoKGZ1bmN0aW9uKGUpe2UubG9vcFN0YXJ0PXR9KX19KSxPYmplY3QuZGVmaW5lUHJvcGVydHkocy5kZWZhdWx0LlBsYXllci5wcm90b3R5cGUsXCJsb29wRW5kXCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9sb29wRW5kfSxzZXQ6ZnVuY3Rpb24odCl7dGhpcy5fbG9vcEVuZD10LHRoaXMuX2FjdGl2ZVNvdXJjZXMuZm9yRWFjaChmdW5jdGlvbihlKXtlLmxvb3BFbmQ9dH0pfX0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShzLmRlZmF1bHQuUGxheWVyLnByb3RvdHlwZSxcImJ1ZmZlclwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fYnVmZmVyfSxzZXQ6ZnVuY3Rpb24odCl7dGhpcy5fYnVmZmVyLnNldCh0KX19KSxPYmplY3QuZGVmaW5lUHJvcGVydHkocy5kZWZhdWx0LlBsYXllci5wcm90b3R5cGUsXCJsb29wXCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9sb29wfSxzZXQ6ZnVuY3Rpb24odCl7aWYodGhpcy5fbG9vcCE9PXQmJih0aGlzLl9sb29wPXQsdGhpcy5fYWN0aXZlU291cmNlcy5mb3JFYWNoKGZ1bmN0aW9uKGUpe2UubG9vcD10fSksdCkpe3ZhciBlPXRoaXMuX3N0YXRlLmdldE5leHRTdGF0ZShzLmRlZmF1bHQuU3RhdGUuU3RvcHBlZCx0aGlzLm5vdygpKTtlJiZ0aGlzLl9zdGF0ZS5jYW5jZWwoZS50aW1lKX19fSksT2JqZWN0LmRlZmluZVByb3BlcnR5KHMuZGVmYXVsdC5QbGF5ZXIucHJvdG90eXBlLFwicGxheWJhY2tSYXRlXCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9wbGF5YmFja1JhdGV9LHNldDpmdW5jdGlvbih0KXt0aGlzLl9wbGF5YmFja1JhdGU9dDt2YXIgZT10aGlzLm5vdygpLGk9dGhpcy5fc3RhdGUuZ2V0TmV4dFN0YXRlKHMuZGVmYXVsdC5TdGF0ZS5TdG9wcGVkLGUpO2kmJnRoaXMuX3N0YXRlLmNhbmNlbChpLnRpbWUpLHRoaXMuX2FjdGl2ZVNvdXJjZXMuZm9yRWFjaChmdW5jdGlvbihpKXtpLmNhbmNlbFN0b3AoKSxpLnBsYXliYWNrUmF0ZS5zZXRWYWx1ZUF0VGltZSh0LGUpfSl9fSksT2JqZWN0LmRlZmluZVByb3BlcnR5KHMuZGVmYXVsdC5QbGF5ZXIucHJvdG90eXBlLFwicmV2ZXJzZVwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fYnVmZmVyLnJldmVyc2V9LHNldDpmdW5jdGlvbih0KXt0aGlzLl9idWZmZXIucmV2ZXJzZT10fX0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShzLmRlZmF1bHQuUGxheWVyLnByb3RvdHlwZSxcImxvYWRlZFwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fYnVmZmVyLmxvYWRlZH19KSxzLmRlZmF1bHQuUGxheWVyLnByb3RvdHlwZS5kaXNwb3NlPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2FjdGl2ZVNvdXJjZXMuZm9yRWFjaChmdW5jdGlvbih0KXt0LmRpc3Bvc2UoKX0pLHRoaXMuX2FjdGl2ZVNvdXJjZXM9bnVsbCxzLmRlZmF1bHQuU291cmNlLnByb3RvdHlwZS5kaXNwb3NlLmNhbGwodGhpcyksdGhpcy5fYnVmZmVyLmRpc3Bvc2UoKSx0aGlzLl9idWZmZXI9bnVsbCx0aGlzfSxlLmRlZmF1bHQ9cy5kZWZhdWx0LlBsYXllcn0sZnVuY3Rpb24odCxlLGkpe1widXNlIHN0cmljdFwiO2kucihlKTt2YXIgcz1pKDApO2koMzEpLGkoNDEpLGkoMzcpLGkoMiksaSg5KSxpKDI1KTtzLmRlZmF1bHQuTW9ub1N5bnRoPWZ1bmN0aW9uKHQpe3Q9cy5kZWZhdWx0LmRlZmF1bHRBcmcodCxzLmRlZmF1bHQuTW9ub1N5bnRoLmRlZmF1bHRzKSxzLmRlZmF1bHQuTW9ub3Bob25pYy5jYWxsKHRoaXMsdCksdGhpcy5vc2NpbGxhdG9yPW5ldyBzLmRlZmF1bHQuT21uaU9zY2lsbGF0b3IodC5vc2NpbGxhdG9yKSx0aGlzLmZyZXF1ZW5jeT10aGlzLm9zY2lsbGF0b3IuZnJlcXVlbmN5LHRoaXMuZGV0dW5lPXRoaXMub3NjaWxsYXRvci5kZXR1bmUsdGhpcy5maWx0ZXI9bmV3IHMuZGVmYXVsdC5GaWx0ZXIodC5maWx0ZXIpLHRoaXMuZmlsdGVyLmZyZXF1ZW5jeS52YWx1ZT01ZTMsdGhpcy5maWx0ZXJFbnZlbG9wZT1uZXcgcy5kZWZhdWx0LkZyZXF1ZW5jeUVudmVsb3BlKHQuZmlsdGVyRW52ZWxvcGUpLHRoaXMuZW52ZWxvcGU9bmV3IHMuZGVmYXVsdC5BbXBsaXR1ZGVFbnZlbG9wZSh0LmVudmVsb3BlKSx0aGlzLm9zY2lsbGF0b3IuY2hhaW4odGhpcy5maWx0ZXIsdGhpcy5lbnZlbG9wZSx0aGlzLm91dHB1dCksdGhpcy5maWx0ZXJFbnZlbG9wZS5jb25uZWN0KHRoaXMuZmlsdGVyLmZyZXF1ZW5jeSksdGhpcy5fcmVhZE9ubHkoW1wib3NjaWxsYXRvclwiLFwiZnJlcXVlbmN5XCIsXCJkZXR1bmVcIixcImZpbHRlclwiLFwiZmlsdGVyRW52ZWxvcGVcIixcImVudmVsb3BlXCJdKX0scy5kZWZhdWx0LmV4dGVuZChzLmRlZmF1bHQuTW9ub1N5bnRoLHMuZGVmYXVsdC5Nb25vcGhvbmljKSxzLmRlZmF1bHQuTW9ub1N5bnRoLmRlZmF1bHRzPXtmcmVxdWVuY3k6XCJDNFwiLGRldHVuZTowLG9zY2lsbGF0b3I6e3R5cGU6XCJzcXVhcmVcIn0sZmlsdGVyOntROjYsdHlwZTpcImxvd3Bhc3NcIixyb2xsb2ZmOi0yNH0sZW52ZWxvcGU6e2F0dGFjazouMDA1LGRlY2F5Oi4xLHN1c3RhaW46LjkscmVsZWFzZToxfSxmaWx0ZXJFbnZlbG9wZTp7YXR0YWNrOi4wNixkZWNheTouMixzdXN0YWluOi41LHJlbGVhc2U6MixiYXNlRnJlcXVlbmN5OjIwMCxvY3RhdmVzOjcsZXhwb25lbnQ6Mn19LHMuZGVmYXVsdC5Nb25vU3ludGgucHJvdG90eXBlLl90cmlnZ2VyRW52ZWxvcGVBdHRhY2s9ZnVuY3Rpb24odCxlKXtyZXR1cm4gdD10aGlzLnRvU2Vjb25kcyh0KSx0aGlzLmVudmVsb3BlLnRyaWdnZXJBdHRhY2sodCxlKSx0aGlzLmZpbHRlckVudmVsb3BlLnRyaWdnZXJBdHRhY2sodCksdGhpcy5vc2NpbGxhdG9yLnN0YXJ0KHQpLDA9PT10aGlzLmVudmVsb3BlLnN1c3RhaW4mJnRoaXMub3NjaWxsYXRvci5zdG9wKHQrdGhpcy5lbnZlbG9wZS5hdHRhY2srdGhpcy5lbnZlbG9wZS5kZWNheSksdGhpc30scy5kZWZhdWx0Lk1vbm9TeW50aC5wcm90b3R5cGUuX3RyaWdnZXJFbnZlbG9wZVJlbGVhc2U9ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuZW52ZWxvcGUudHJpZ2dlclJlbGVhc2UodCksdGhpcy5maWx0ZXJFbnZlbG9wZS50cmlnZ2VyUmVsZWFzZSh0KSx0aGlzLm9zY2lsbGF0b3Iuc3RvcCh0K3RoaXMuZW52ZWxvcGUucmVsZWFzZSksdGhpc30scy5kZWZhdWx0Lk1vbm9TeW50aC5wcm90b3R5cGUuZGlzcG9zZT1mdW5jdGlvbigpe3JldHVybiBzLmRlZmF1bHQuTW9ub3Bob25pYy5wcm90b3R5cGUuZGlzcG9zZS5jYWxsKHRoaXMpLHRoaXMuX3dyaXRhYmxlKFtcIm9zY2lsbGF0b3JcIixcImZyZXF1ZW5jeVwiLFwiZGV0dW5lXCIsXCJmaWx0ZXJcIixcImZpbHRlckVudmVsb3BlXCIsXCJlbnZlbG9wZVwiXSksdGhpcy5vc2NpbGxhdG9yLmRpc3Bvc2UoKSx0aGlzLm9zY2lsbGF0b3I9bnVsbCx0aGlzLmVudmVsb3BlLmRpc3Bvc2UoKSx0aGlzLmVudmVsb3BlPW51bGwsdGhpcy5maWx0ZXJFbnZlbG9wZS5kaXNwb3NlKCksdGhpcy5maWx0ZXJFbnZlbG9wZT1udWxsLHRoaXMuZmlsdGVyLmRpc3Bvc2UoKSx0aGlzLmZpbHRlcj1udWxsLHRoaXMuZnJlcXVlbmN5PW51bGwsdGhpcy5kZXR1bmU9bnVsbCx0aGlzfSxlLmRlZmF1bHQ9cy5kZWZhdWx0Lk1vbm9TeW50aH0sZnVuY3Rpb24odCxlLGkpe1widXNlIHN0cmljdFwiO2kucihlKTt2YXIgcz1pKDApO2koNiksaSgxNyksaSg1KSxpKDMpO3MuZGVmYXVsdC5GYXRPc2NpbGxhdG9yPWZ1bmN0aW9uKCl7dmFyIHQ9cy5kZWZhdWx0LmRlZmF1bHRzKGFyZ3VtZW50cyxbXCJmcmVxdWVuY3lcIixcInR5cGVcIixcInNwcmVhZFwiXSxzLmRlZmF1bHQuRmF0T3NjaWxsYXRvcik7cy5kZWZhdWx0LlNvdXJjZS5jYWxsKHRoaXMsdCksdGhpcy5mcmVxdWVuY3k9bmV3IHMuZGVmYXVsdC5TaWduYWwodC5mcmVxdWVuY3kscy5kZWZhdWx0LlR5cGUuRnJlcXVlbmN5KSx0aGlzLmRldHVuZT1uZXcgcy5kZWZhdWx0LlNpZ25hbCh0LmRldHVuZSxzLmRlZmF1bHQuVHlwZS5DZW50cyksdGhpcy5fb3NjaWxsYXRvcnM9W10sdGhpcy5fc3ByZWFkPXQuc3ByZWFkLHRoaXMuX3R5cGU9dC50eXBlLHRoaXMuX3BoYXNlPXQucGhhc2UsdGhpcy5fcGFydGlhbHM9dC5wYXJ0aWFscyx0aGlzLl9wYXJ0aWFsQ291bnQ9dC5wYXJ0aWFsQ291bnQsdGhpcy5jb3VudD10LmNvdW50LHRoaXMuX3JlYWRPbmx5KFtcImZyZXF1ZW5jeVwiLFwiZGV0dW5lXCJdKX0scy5kZWZhdWx0LmV4dGVuZChzLmRlZmF1bHQuRmF0T3NjaWxsYXRvcixzLmRlZmF1bHQuU291cmNlKSxzLmRlZmF1bHQuRmF0T3NjaWxsYXRvci5kZWZhdWx0cz17ZnJlcXVlbmN5OjQ0MCxkZXR1bmU6MCxwaGFzZTowLHNwcmVhZDoyMCxjb3VudDozLHR5cGU6XCJzYXd0b290aFwiLHBhcnRpYWxzOltdLHBhcnRpYWxDb3VudDowfSxzLmRlZmF1bHQuRmF0T3NjaWxsYXRvci5wcm90b3R5cGUuX3N0YXJ0PWZ1bmN0aW9uKHQpe3Q9dGhpcy50b1NlY29uZHModCksdGhpcy5fZm9yRWFjaChmdW5jdGlvbihlKXtlLnN0YXJ0KHQpfSl9LHMuZGVmYXVsdC5GYXRPc2NpbGxhdG9yLnByb3RvdHlwZS5fc3RvcD1mdW5jdGlvbih0KXt0PXRoaXMudG9TZWNvbmRzKHQpLHRoaXMuX2ZvckVhY2goZnVuY3Rpb24oZSl7ZS5zdG9wKHQpfSl9LHMuZGVmYXVsdC5GYXRPc2NpbGxhdG9yLnByb3RvdHlwZS5yZXN0YXJ0PWZ1bmN0aW9uKHQpe3Q9dGhpcy50b1NlY29uZHModCksdGhpcy5fZm9yRWFjaChmdW5jdGlvbihlKXtlLnJlc3RhcnQodCl9KX0scy5kZWZhdWx0LkZhdE9zY2lsbGF0b3IucHJvdG90eXBlLl9mb3JFYWNoPWZ1bmN0aW9uKHQpe2Zvcih2YXIgZT0wO2U8dGhpcy5fb3NjaWxsYXRvcnMubGVuZ3RoO2UrKyl0LmNhbGwodGhpcyx0aGlzLl9vc2NpbGxhdG9yc1tlXSxlKX0sT2JqZWN0LmRlZmluZVByb3BlcnR5KHMuZGVmYXVsdC5GYXRPc2NpbGxhdG9yLnByb3RvdHlwZSxcInR5cGVcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3R5cGV9LHNldDpmdW5jdGlvbih0KXt0aGlzLl90eXBlPXQsdGhpcy5fZm9yRWFjaChmdW5jdGlvbihlKXtlLnR5cGU9dH0pfX0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShzLmRlZmF1bHQuRmF0T3NjaWxsYXRvci5wcm90b3R5cGUsXCJzcHJlYWRcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3NwcmVhZH0sc2V0OmZ1bmN0aW9uKHQpe2lmKHRoaXMuX3NwcmVhZD10LHRoaXMuX29zY2lsbGF0b3JzLmxlbmd0aD4xKXt2YXIgZT0tdC8yLGk9dC8odGhpcy5fb3NjaWxsYXRvcnMubGVuZ3RoLTEpO3RoaXMuX2ZvckVhY2goZnVuY3Rpb24odCxzKXt0LmRldHVuZS52YWx1ZT1lK2kqc30pfX19KSxPYmplY3QuZGVmaW5lUHJvcGVydHkocy5kZWZhdWx0LkZhdE9zY2lsbGF0b3IucHJvdG90eXBlLFwiY291bnRcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX29zY2lsbGF0b3JzLmxlbmd0aH0sc2V0OmZ1bmN0aW9uKHQpe2lmKHQ9TWF0aC5tYXgodCwxKSx0aGlzLl9vc2NpbGxhdG9ycy5sZW5ndGghPT10KXt0aGlzLl9mb3JFYWNoKGZ1bmN0aW9uKHQpe3QuZGlzcG9zZSgpfSksdGhpcy5fb3NjaWxsYXRvcnM9W107Zm9yKHZhciBlPTA7ZTx0O2UrKyl7dmFyIGk9bmV3IHMuZGVmYXVsdC5Pc2NpbGxhdG9yO3RoaXMudHlwZT09PXMuZGVmYXVsdC5Pc2NpbGxhdG9yLlR5cGUuQ3VzdG9tP2kucGFydGlhbHM9dGhpcy5fcGFydGlhbHM6aS50eXBlPXRoaXMuX3R5cGUsaS5wYXJ0aWFsQ291bnQ9dGhpcy5fcGFydGlhbENvdW50LGkucGhhc2U9dGhpcy5fcGhhc2UrZS90KjM2MCxpLnZvbHVtZS52YWx1ZT0tNi0xLjEqdCx0aGlzLmZyZXF1ZW5jeS5jb25uZWN0KGkuZnJlcXVlbmN5KSx0aGlzLmRldHVuZS5jb25uZWN0KGkuZGV0dW5lKSxpLmNvbm5lY3QodGhpcy5vdXRwdXQpLHRoaXMuX29zY2lsbGF0b3JzW2VdPWl9dGhpcy5zcHJlYWQ9dGhpcy5fc3ByZWFkLHRoaXMuc3RhdGU9PT1zLmRlZmF1bHQuU3RhdGUuU3RhcnRlZCYmdGhpcy5fZm9yRWFjaChmdW5jdGlvbih0KXt0LnN0YXJ0KCl9KX19fSksT2JqZWN0LmRlZmluZVByb3BlcnR5KHMuZGVmYXVsdC5GYXRPc2NpbGxhdG9yLnByb3RvdHlwZSxcInBoYXNlXCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9waGFzZX0sc2V0OmZ1bmN0aW9uKHQpe3RoaXMuX3BoYXNlPXQsdGhpcy5fZm9yRWFjaChmdW5jdGlvbihlKXtlLnBoYXNlPXR9KX19KSxPYmplY3QuZGVmaW5lUHJvcGVydHkocy5kZWZhdWx0LkZhdE9zY2lsbGF0b3IucHJvdG90eXBlLFwiYmFzZVR5cGVcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX29zY2lsbGF0b3JzWzBdLmJhc2VUeXBlfSxzZXQ6ZnVuY3Rpb24odCl7dGhpcy5fZm9yRWFjaChmdW5jdGlvbihlKXtlLmJhc2VUeXBlPXR9KSx0aGlzLl90eXBlPXRoaXMuX29zY2lsbGF0b3JzWzBdLnR5cGV9fSksT2JqZWN0LmRlZmluZVByb3BlcnR5KHMuZGVmYXVsdC5GYXRPc2NpbGxhdG9yLnByb3RvdHlwZSxcInBhcnRpYWxzXCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9vc2NpbGxhdG9yc1swXS5wYXJ0aWFsc30sc2V0OmZ1bmN0aW9uKHQpe3RoaXMuX3BhcnRpYWxzPXQsdGhpcy5fdHlwZT1zLmRlZmF1bHQuT3NjaWxsYXRvci5UeXBlLkN1c3RvbSx0aGlzLl9mb3JFYWNoKGZ1bmN0aW9uKGUpe2UucGFydGlhbHM9dH0pfX0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShzLmRlZmF1bHQuRmF0T3NjaWxsYXRvci5wcm90b3R5cGUsXCJwYXJ0aWFsQ291bnRcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX29zY2lsbGF0b3JzWzBdLnBhcnRpYWxDb3VudH0sc2V0OmZ1bmN0aW9uKHQpe3RoaXMuX3BhcnRpYWxDb3VudD10LHRoaXMuX2ZvckVhY2goZnVuY3Rpb24oZSl7ZS5wYXJ0aWFsQ291bnQ9dH0pLHRoaXMuX3R5cGU9dGhpcy5fb3NjaWxsYXRvcnNbMF0udHlwZX19KSxzLmRlZmF1bHQuRmF0T3NjaWxsYXRvci5wcm90b3R5cGUuZGlzcG9zZT1mdW5jdGlvbigpe3JldHVybiBzLmRlZmF1bHQuU291cmNlLnByb3RvdHlwZS5kaXNwb3NlLmNhbGwodGhpcyksdGhpcy5fd3JpdGFibGUoW1wiZnJlcXVlbmN5XCIsXCJkZXR1bmVcIl0pLHRoaXMuZnJlcXVlbmN5LmRpc3Bvc2UoKSx0aGlzLmZyZXF1ZW5jeT1udWxsLHRoaXMuZGV0dW5lLmRpc3Bvc2UoKSx0aGlzLmRldHVuZT1udWxsLHRoaXMuX2ZvckVhY2goZnVuY3Rpb24odCl7dC5kaXNwb3NlKCl9KSx0aGlzLl9vc2NpbGxhdG9ycz1udWxsLHRoaXMuX3BhcnRpYWxzPW51bGwsdGhpc30sZS5kZWZhdWx0PXMuZGVmYXVsdC5GYXRPc2NpbGxhdG9yfSxmdW5jdGlvbih0LGUsaSl7XCJ1c2Ugc3RyaWN0XCI7aS5yKGUpO3ZhciBzPWkoMCk7aSg2KSxpKDE3KSxpKDUpLGkoMyksaSgyMik7cy5kZWZhdWx0LkFNT3NjaWxsYXRvcj1mdW5jdGlvbigpe3ZhciB0PXMuZGVmYXVsdC5kZWZhdWx0cyhhcmd1bWVudHMsW1wiZnJlcXVlbmN5XCIsXCJ0eXBlXCIsXCJtb2R1bGF0aW9uVHlwZVwiXSxzLmRlZmF1bHQuQU1Pc2NpbGxhdG9yKTtzLmRlZmF1bHQuU291cmNlLmNhbGwodGhpcyx0KSx0aGlzLl9jYXJyaWVyPW5ldyBzLmRlZmF1bHQuT3NjaWxsYXRvcih0LmZyZXF1ZW5jeSx0LnR5cGUpLHRoaXMuZnJlcXVlbmN5PXRoaXMuX2NhcnJpZXIuZnJlcXVlbmN5LHRoaXMuZGV0dW5lPXRoaXMuX2NhcnJpZXIuZGV0dW5lLHRoaXMuZGV0dW5lLnZhbHVlPXQuZGV0dW5lLHRoaXMuX21vZHVsYXRvcj1uZXcgcy5kZWZhdWx0Lk9zY2lsbGF0b3IodC5mcmVxdWVuY3ksdC5tb2R1bGF0aW9uVHlwZSksdGhpcy5fbW9kdWxhdGlvblNjYWxlPW5ldyBzLmRlZmF1bHQuQXVkaW9Ub0dhaW4sdGhpcy5oYXJtb25pY2l0eT1uZXcgcy5kZWZhdWx0Lk11bHRpcGx5KHQuaGFybW9uaWNpdHkpLHRoaXMuaGFybW9uaWNpdHkudW5pdHM9cy5kZWZhdWx0LlR5cGUuUG9zaXRpdmUsdGhpcy5fbW9kdWxhdGlvbk5vZGU9bmV3IHMuZGVmYXVsdC5HYWluKDApLHRoaXMuZnJlcXVlbmN5LmNoYWluKHRoaXMuaGFybW9uaWNpdHksdGhpcy5fbW9kdWxhdG9yLmZyZXF1ZW5jeSksdGhpcy5kZXR1bmUuY29ubmVjdCh0aGlzLl9tb2R1bGF0b3IuZGV0dW5lKSx0aGlzLl9tb2R1bGF0b3IuY2hhaW4odGhpcy5fbW9kdWxhdGlvblNjYWxlLHRoaXMuX21vZHVsYXRpb25Ob2RlLmdhaW4pLHRoaXMuX2NhcnJpZXIuY2hhaW4odGhpcy5fbW9kdWxhdGlvbk5vZGUsdGhpcy5vdXRwdXQpLHRoaXMucGhhc2U9dC5waGFzZSx0aGlzLl9yZWFkT25seShbXCJmcmVxdWVuY3lcIixcImRldHVuZVwiLFwiaGFybW9uaWNpdHlcIl0pfSxzLmRlZmF1bHQuZXh0ZW5kKHMuZGVmYXVsdC5BTU9zY2lsbGF0b3Iscy5kZWZhdWx0Lk9zY2lsbGF0b3IpLHMuZGVmYXVsdC5BTU9zY2lsbGF0b3IuZGVmYXVsdHM9e2ZyZXF1ZW5jeTo0NDAsZGV0dW5lOjAscGhhc2U6MCx0eXBlOlwic2luZVwiLG1vZHVsYXRpb25UeXBlOlwic3F1YXJlXCIsaGFybW9uaWNpdHk6MX0scy5kZWZhdWx0LkFNT3NjaWxsYXRvci5wcm90b3R5cGUuX3N0YXJ0PWZ1bmN0aW9uKHQpe3RoaXMuX21vZHVsYXRvci5zdGFydCh0KSx0aGlzLl9jYXJyaWVyLnN0YXJ0KHQpfSxzLmRlZmF1bHQuQU1Pc2NpbGxhdG9yLnByb3RvdHlwZS5fc3RvcD1mdW5jdGlvbih0KXt0aGlzLl9tb2R1bGF0b3Iuc3RvcCh0KSx0aGlzLl9jYXJyaWVyLnN0b3AodCl9LHMuZGVmYXVsdC5BTU9zY2lsbGF0b3IucHJvdG90eXBlLnJlc3RhcnQ9ZnVuY3Rpb24odCl7dGhpcy5fbW9kdWxhdG9yLnJlc3RhcnQodCksdGhpcy5fY2Fycmllci5yZXN0YXJ0KHQpfSxPYmplY3QuZGVmaW5lUHJvcGVydHkocy5kZWZhdWx0LkFNT3NjaWxsYXRvci5wcm90b3R5cGUsXCJ0eXBlXCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9jYXJyaWVyLnR5cGV9LHNldDpmdW5jdGlvbih0KXt0aGlzLl9jYXJyaWVyLnR5cGU9dH19KSxPYmplY3QuZGVmaW5lUHJvcGVydHkocy5kZWZhdWx0LkFNT3NjaWxsYXRvci5wcm90b3R5cGUsXCJiYXNlVHlwZVwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fY2Fycmllci5iYXNlVHlwZX0sc2V0OmZ1bmN0aW9uKHQpe3RoaXMuX2NhcnJpZXIuYmFzZVR5cGU9dH19KSxPYmplY3QuZGVmaW5lUHJvcGVydHkocy5kZWZhdWx0LkFNT3NjaWxsYXRvci5wcm90b3R5cGUsXCJwYXJ0aWFsQ291bnRcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2NhcnJpZXIucGFydGlhbENvdW50fSxzZXQ6ZnVuY3Rpb24odCl7dGhpcy5fY2Fycmllci5wYXJ0aWFsQ291bnQ9dH19KSxPYmplY3QuZGVmaW5lUHJvcGVydHkocy5kZWZhdWx0LkFNT3NjaWxsYXRvci5wcm90b3R5cGUsXCJtb2R1bGF0aW9uVHlwZVwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fbW9kdWxhdG9yLnR5cGV9LHNldDpmdW5jdGlvbih0KXt0aGlzLl9tb2R1bGF0b3IudHlwZT10fX0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShzLmRlZmF1bHQuQU1Pc2NpbGxhdG9yLnByb3RvdHlwZSxcInBoYXNlXCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9jYXJyaWVyLnBoYXNlfSxzZXQ6ZnVuY3Rpb24odCl7dGhpcy5fY2Fycmllci5waGFzZT10LHRoaXMuX21vZHVsYXRvci5waGFzZT10fX0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShzLmRlZmF1bHQuQU1Pc2NpbGxhdG9yLnByb3RvdHlwZSxcInBhcnRpYWxzXCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9jYXJyaWVyLnBhcnRpYWxzfSxzZXQ6ZnVuY3Rpb24odCl7dGhpcy5fY2Fycmllci5wYXJ0aWFscz10fX0pLHMuZGVmYXVsdC5BTU9zY2lsbGF0b3IucHJvdG90eXBlLmRpc3Bvc2U9ZnVuY3Rpb24oKXtyZXR1cm4gcy5kZWZhdWx0LlNvdXJjZS5wcm90b3R5cGUuZGlzcG9zZS5jYWxsKHRoaXMpLHRoaXMuX3dyaXRhYmxlKFtcImZyZXF1ZW5jeVwiLFwiZGV0dW5lXCIsXCJoYXJtb25pY2l0eVwiXSksdGhpcy5mcmVxdWVuY3k9bnVsbCx0aGlzLmRldHVuZT1udWxsLHRoaXMuaGFybW9uaWNpdHkuZGlzcG9zZSgpLHRoaXMuaGFybW9uaWNpdHk9bnVsbCx0aGlzLl9jYXJyaWVyLmRpc3Bvc2UoKSx0aGlzLl9jYXJyaWVyPW51bGwsdGhpcy5fbW9kdWxhdG9yLmRpc3Bvc2UoKSx0aGlzLl9tb2R1bGF0b3I9bnVsbCx0aGlzLl9tb2R1bGF0aW9uTm9kZS5kaXNwb3NlKCksdGhpcy5fbW9kdWxhdGlvbk5vZGU9bnVsbCx0aGlzLl9tb2R1bGF0aW9uU2NhbGUuZGlzcG9zZSgpLHRoaXMuX21vZHVsYXRpb25TY2FsZT1udWxsLHRoaXN9LGUuZGVmYXVsdD1zLmRlZmF1bHQuQU1Pc2NpbGxhdG9yfSxmdW5jdGlvbih0LGUsaSl7XCJ1c2Ugc3RyaWN0XCI7aS5yKGUpO3ZhciBzPWkoMCk7aSg2KSxpKDUwKSxpKDE3KSxpKDUpO3MuZGVmYXVsdC5QV01Pc2NpbGxhdG9yPWZ1bmN0aW9uKCl7dmFyIHQ9cy5kZWZhdWx0LmRlZmF1bHRzKGFyZ3VtZW50cyxbXCJmcmVxdWVuY3lcIixcIm1vZHVsYXRpb25GcmVxdWVuY3lcIl0scy5kZWZhdWx0LlBXTU9zY2lsbGF0b3IpO3MuZGVmYXVsdC5Tb3VyY2UuY2FsbCh0aGlzLHQpLHRoaXMuX3B1bHNlPW5ldyBzLmRlZmF1bHQuUHVsc2VPc2NpbGxhdG9yKHQubW9kdWxhdGlvbkZyZXF1ZW5jeSksdGhpcy5fcHVsc2UuX3Nhd3Rvb3RoLnR5cGU9XCJzaW5lXCIsdGhpcy5fbW9kdWxhdG9yPW5ldyBzLmRlZmF1bHQuT3NjaWxsYXRvcih7ZnJlcXVlbmN5OnQuZnJlcXVlbmN5LGRldHVuZTp0LmRldHVuZSxwaGFzZTp0LnBoYXNlfSksdGhpcy5fc2NhbGU9bmV3IHMuZGVmYXVsdC5NdWx0aXBseSgyKSx0aGlzLmZyZXF1ZW5jeT10aGlzLl9tb2R1bGF0b3IuZnJlcXVlbmN5LHRoaXMuZGV0dW5lPXRoaXMuX21vZHVsYXRvci5kZXR1bmUsdGhpcy5tb2R1bGF0aW9uRnJlcXVlbmN5PXRoaXMuX3B1bHNlLmZyZXF1ZW5jeSx0aGlzLl9tb2R1bGF0b3IuY2hhaW4odGhpcy5fc2NhbGUsdGhpcy5fcHVsc2Uud2lkdGgpLHRoaXMuX3B1bHNlLmNvbm5lY3QodGhpcy5vdXRwdXQpLHRoaXMuX3JlYWRPbmx5KFtcIm1vZHVsYXRpb25GcmVxdWVuY3lcIixcImZyZXF1ZW5jeVwiLFwiZGV0dW5lXCJdKX0scy5kZWZhdWx0LmV4dGVuZChzLmRlZmF1bHQuUFdNT3NjaWxsYXRvcixzLmRlZmF1bHQuU291cmNlKSxzLmRlZmF1bHQuUFdNT3NjaWxsYXRvci5kZWZhdWx0cz17ZnJlcXVlbmN5OjQ0MCxkZXR1bmU6MCxwaGFzZTowLG1vZHVsYXRpb25GcmVxdWVuY3k6LjR9LHMuZGVmYXVsdC5QV01Pc2NpbGxhdG9yLnByb3RvdHlwZS5fc3RhcnQ9ZnVuY3Rpb24odCl7dD10aGlzLnRvU2Vjb25kcyh0KSx0aGlzLl9tb2R1bGF0b3Iuc3RhcnQodCksdGhpcy5fcHVsc2Uuc3RhcnQodCl9LHMuZGVmYXVsdC5QV01Pc2NpbGxhdG9yLnByb3RvdHlwZS5fc3RvcD1mdW5jdGlvbih0KXt0PXRoaXMudG9TZWNvbmRzKHQpLHRoaXMuX21vZHVsYXRvci5zdG9wKHQpLHRoaXMuX3B1bHNlLnN0b3AodCl9LHMuZGVmYXVsdC5QV01Pc2NpbGxhdG9yLnByb3RvdHlwZS5yZXN0YXJ0PWZ1bmN0aW9uKHQpe3RoaXMuX21vZHVsYXRvci5yZXN0YXJ0KHQpLHRoaXMuX3B1bHNlLnJlc3RhcnQodCl9LE9iamVjdC5kZWZpbmVQcm9wZXJ0eShzLmRlZmF1bHQuUFdNT3NjaWxsYXRvci5wcm90b3R5cGUsXCJ0eXBlXCIse2dldDpmdW5jdGlvbigpe3JldHVyblwicHdtXCJ9fSksT2JqZWN0LmRlZmluZVByb3BlcnR5KHMuZGVmYXVsdC5QV01Pc2NpbGxhdG9yLnByb3RvdHlwZSxcImJhc2VUeXBlXCIse2dldDpmdW5jdGlvbigpe3JldHVyblwicHdtXCJ9fSksT2JqZWN0LmRlZmluZVByb3BlcnR5KHMuZGVmYXVsdC5QV01Pc2NpbGxhdG9yLnByb3RvdHlwZSxcInBhcnRpYWxzXCIse2dldDpmdW5jdGlvbigpe3JldHVybltdfX0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShzLmRlZmF1bHQuUFdNT3NjaWxsYXRvci5wcm90b3R5cGUsXCJwaGFzZVwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fbW9kdWxhdG9yLnBoYXNlfSxzZXQ6ZnVuY3Rpb24odCl7dGhpcy5fbW9kdWxhdG9yLnBoYXNlPXR9fSkscy5kZWZhdWx0LlBXTU9zY2lsbGF0b3IucHJvdG90eXBlLmRpc3Bvc2U9ZnVuY3Rpb24oKXtyZXR1cm4gcy5kZWZhdWx0LlNvdXJjZS5wcm90b3R5cGUuZGlzcG9zZS5jYWxsKHRoaXMpLHRoaXMuX3B1bHNlLmRpc3Bvc2UoKSx0aGlzLl9wdWxzZT1udWxsLHRoaXMuX3NjYWxlLmRpc3Bvc2UoKSx0aGlzLl9zY2FsZT1udWxsLHRoaXMuX21vZHVsYXRvci5kaXNwb3NlKCksdGhpcy5fbW9kdWxhdG9yPW51bGwsdGhpcy5fd3JpdGFibGUoW1wibW9kdWxhdGlvbkZyZXF1ZW5jeVwiLFwiZnJlcXVlbmN5XCIsXCJkZXR1bmVcIl0pLHRoaXMuZnJlcXVlbmN5PW51bGwsdGhpcy5kZXR1bmU9bnVsbCx0aGlzLm1vZHVsYXRpb25GcmVxdWVuY3k9bnVsbCx0aGlzfSxlLmRlZmF1bHQ9cy5kZWZhdWx0LlBXTU9zY2lsbGF0b3J9LGZ1bmN0aW9uKHQsZSxpKXtcInVzZSBzdHJpY3RcIjtpLnIoZSk7dmFyIHM9aSgwKTtpKDUxKSxpKDQpLGkoMTYpO3MuZGVmYXVsdC5QYXJ0PWZ1bmN0aW9uKCl7dmFyIHQ9cy5kZWZhdWx0LmRlZmF1bHRzKGFyZ3VtZW50cyxbXCJjYWxsYmFja1wiLFwiZXZlbnRzXCJdLHMuZGVmYXVsdC5QYXJ0KTtzLmRlZmF1bHQuRXZlbnQuY2FsbCh0aGlzLHQpLHRoaXMuX2V2ZW50cz1bXTtmb3IodmFyIGU9MDtlPHQuZXZlbnRzLmxlbmd0aDtlKyspQXJyYXkuaXNBcnJheSh0LmV2ZW50c1tlXSk/dGhpcy5hZGQodC5ldmVudHNbZV1bMF0sdC5ldmVudHNbZV1bMV0pOnRoaXMuYWRkKHQuZXZlbnRzW2VdKX0scy5kZWZhdWx0LmV4dGVuZChzLmRlZmF1bHQuUGFydCxzLmRlZmF1bHQuRXZlbnQpLHMuZGVmYXVsdC5QYXJ0LmRlZmF1bHRzPXtjYWxsYmFjazpzLmRlZmF1bHQubm9PcCxsb29wOiExLGxvb3BFbmQ6XCIxbVwiLGxvb3BTdGFydDowLHBsYXliYWNrUmF0ZToxLHByb2JhYmlsaXR5OjEsaHVtYW5pemU6ITEsbXV0ZTohMSxldmVudHM6W119LHMuZGVmYXVsdC5QYXJ0LnByb3RvdHlwZS5zdGFydD1mdW5jdGlvbih0LGUpe3ZhciBpPXRoaXMudG9UaWNrcyh0KTtyZXR1cm4gdGhpcy5fc3RhdGUuZ2V0VmFsdWVBdFRpbWUoaSkhPT1zLmRlZmF1bHQuU3RhdGUuU3RhcnRlZCYmKGU9dGhpcy5fbG9vcD9zLmRlZmF1bHQuZGVmYXVsdEFyZyhlLHRoaXMuX2xvb3BTdGFydCk6cy5kZWZhdWx0LmRlZmF1bHRBcmcoZSwwKSxlPXRoaXMudG9UaWNrcyhlKSx0aGlzLl9zdGF0ZS5hZGQoe3N0YXRlOnMuZGVmYXVsdC5TdGF0ZS5TdGFydGVkLHRpbWU6aSxvZmZzZXQ6ZX0pLHRoaXMuX2ZvckVhY2goZnVuY3Rpb24odCl7dGhpcy5fc3RhcnROb3RlKHQsaSxlKX0pKSx0aGlzfSxzLmRlZmF1bHQuUGFydC5wcm90b3R5cGUuX3N0YXJ0Tm90ZT1mdW5jdGlvbih0LGUsaSl7ZS09aSx0aGlzLl9sb29wP3Quc3RhcnRPZmZzZXQ+PXRoaXMuX2xvb3BTdGFydCYmdC5zdGFydE9mZnNldDx0aGlzLl9sb29wRW5kPyh0LnN0YXJ0T2Zmc2V0PGkmJihlKz10aGlzLl9nZXRMb29wRHVyYXRpb24oKSksdC5zdGFydChzLmRlZmF1bHQuVGlja3MoZSkpKTp0LnN0YXJ0T2Zmc2V0PHRoaXMuX2xvb3BTdGFydCYmdC5zdGFydE9mZnNldD49aSYmKHQubG9vcD0hMSx0LnN0YXJ0KHMuZGVmYXVsdC5UaWNrcyhlKSkpOnQuc3RhcnRPZmZzZXQ+PWkmJnQuc3RhcnQocy5kZWZhdWx0LlRpY2tzKGUpKX0sT2JqZWN0LmRlZmluZVByb3BlcnR5KHMuZGVmYXVsdC5QYXJ0LnByb3RvdHlwZSxcInN0YXJ0T2Zmc2V0XCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9zdGFydE9mZnNldH0sc2V0OmZ1bmN0aW9uKHQpe3RoaXMuX3N0YXJ0T2Zmc2V0PXQsdGhpcy5fZm9yRWFjaChmdW5jdGlvbih0KXt0LnN0YXJ0T2Zmc2V0Kz10aGlzLl9zdGFydE9mZnNldH0pfX0pLHMuZGVmYXVsdC5QYXJ0LnByb3RvdHlwZS5zdG9wPWZ1bmN0aW9uKHQpe3ZhciBlPXRoaXMudG9UaWNrcyh0KTtyZXR1cm4gdGhpcy5fc3RhdGUuY2FuY2VsKGUpLHRoaXMuX3N0YXRlLnNldFN0YXRlQXRUaW1lKHMuZGVmYXVsdC5TdGF0ZS5TdG9wcGVkLGUpLHRoaXMuX2ZvckVhY2goZnVuY3Rpb24oZSl7ZS5zdG9wKHQpfSksdGhpc30scy5kZWZhdWx0LlBhcnQucHJvdG90eXBlLmF0PWZ1bmN0aW9uKHQsZSl7dD1zLmRlZmF1bHQuVHJhbnNwb3J0VGltZSh0KTtmb3IodmFyIGk9cy5kZWZhdWx0LlRpY2tzKDEpLnRvU2Vjb25kcygpLG49MDtuPHRoaXMuX2V2ZW50cy5sZW5ndGg7bisrKXt2YXIgbz10aGlzLl9ldmVudHNbbl07aWYoTWF0aC5hYnModC50b1RpY2tzKCktby5zdGFydE9mZnNldCk8aSlyZXR1cm4gcy5kZWZhdWx0LmlzRGVmaW5lZChlKSYmKG8udmFsdWU9ZSksb31yZXR1cm4gcy5kZWZhdWx0LmlzRGVmaW5lZChlKT8odGhpcy5hZGQodCxlKSx0aGlzLl9ldmVudHNbdGhpcy5fZXZlbnRzLmxlbmd0aC0xXSk6bnVsbH0scy5kZWZhdWx0LlBhcnQucHJvdG90eXBlLmFkZD1mdW5jdGlvbih0LGUpe3ZhciBpO3JldHVybiB0Lmhhc093blByb3BlcnR5KFwidGltZVwiKSYmKHQ9KGU9dCkudGltZSksdD10aGlzLnRvVGlja3ModCksZSBpbnN0YW5jZW9mIHMuZGVmYXVsdC5FdmVudD8oaT1lKS5jYWxsYmFjaz10aGlzLl90aWNrLmJpbmQodGhpcyk6aT1uZXcgcy5kZWZhdWx0LkV2ZW50KHtjYWxsYmFjazp0aGlzLl90aWNrLmJpbmQodGhpcyksdmFsdWU6ZX0pLGkuc3RhcnRPZmZzZXQ9dCxpLnNldCh7bG9vcEVuZDp0aGlzLmxvb3BFbmQsbG9vcFN0YXJ0OnRoaXMubG9vcFN0YXJ0LGxvb3A6dGhpcy5sb29wLGh1bWFuaXplOnRoaXMuaHVtYW5pemUscGxheWJhY2tSYXRlOnRoaXMucGxheWJhY2tSYXRlLHByb2JhYmlsaXR5OnRoaXMucHJvYmFiaWxpdHl9KSx0aGlzLl9ldmVudHMucHVzaChpKSx0aGlzLl9yZXN0YXJ0RXZlbnQoaSksdGhpc30scy5kZWZhdWx0LlBhcnQucHJvdG90eXBlLl9yZXN0YXJ0RXZlbnQ9ZnVuY3Rpb24odCl7dGhpcy5fc3RhdGUuZm9yRWFjaChmdW5jdGlvbihlKXtlLnN0YXRlPT09cy5kZWZhdWx0LlN0YXRlLlN0YXJ0ZWQ/dGhpcy5fc3RhcnROb3RlKHQsZS50aW1lLGUub2Zmc2V0KTp0LnN0b3Aocy5kZWZhdWx0LlRpY2tzKGUudGltZSkpfS5iaW5kKHRoaXMpKX0scy5kZWZhdWx0LlBhcnQucHJvdG90eXBlLnJlbW92ZT1mdW5jdGlvbih0LGUpe3QuaGFzT3duUHJvcGVydHkoXCJ0aW1lXCIpJiYodD0oZT10KS50aW1lKSx0PXRoaXMudG9UaWNrcyh0KTtmb3IodmFyIGk9dGhpcy5fZXZlbnRzLmxlbmd0aC0xO2k+PTA7aS0tKXt2YXIgbj10aGlzLl9ldmVudHNbaV07bi5zdGFydE9mZnNldD09PXQmJihzLmRlZmF1bHQuaXNVbmRlZihlKXx8cy5kZWZhdWx0LmlzRGVmaW5lZChlKSYmbi52YWx1ZT09PWUpJiYodGhpcy5fZXZlbnRzLnNwbGljZShpLDEpLG4uZGlzcG9zZSgpKX1yZXR1cm4gdGhpc30scy5kZWZhdWx0LlBhcnQucHJvdG90eXBlLnJlbW92ZUFsbD1mdW5jdGlvbigpe3JldHVybiB0aGlzLl9mb3JFYWNoKGZ1bmN0aW9uKHQpe3QuZGlzcG9zZSgpfSksdGhpcy5fZXZlbnRzPVtdLHRoaXN9LHMuZGVmYXVsdC5QYXJ0LnByb3RvdHlwZS5jYW5jZWw9ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuX2ZvckVhY2goZnVuY3Rpb24oZSl7ZS5jYW5jZWwodCl9KSx0aGlzLl9zdGF0ZS5jYW5jZWwodGhpcy50b1RpY2tzKHQpKSx0aGlzfSxzLmRlZmF1bHQuUGFydC5wcm90b3R5cGUuX2ZvckVhY2g9ZnVuY3Rpb24odCxlKXtpZih0aGlzLl9ldmVudHMpe2U9cy5kZWZhdWx0LmRlZmF1bHRBcmcoZSx0aGlzKTtmb3IodmFyIGk9dGhpcy5fZXZlbnRzLmxlbmd0aC0xO2k+PTA7aS0tKXt2YXIgbj10aGlzLl9ldmVudHNbaV07biBpbnN0YW5jZW9mIHMuZGVmYXVsdC5QYXJ0P24uX2ZvckVhY2godCxlKTp0LmNhbGwoZSxuKX19cmV0dXJuIHRoaXN9LHMuZGVmYXVsdC5QYXJ0LnByb3RvdHlwZS5fc2V0QWxsPWZ1bmN0aW9uKHQsZSl7dGhpcy5fZm9yRWFjaChmdW5jdGlvbihpKXtpW3RdPWV9KX0scy5kZWZhdWx0LlBhcnQucHJvdG90eXBlLl90aWNrPWZ1bmN0aW9uKHQsZSl7dGhpcy5tdXRlfHx0aGlzLmNhbGxiYWNrKHQsZSl9LHMuZGVmYXVsdC5QYXJ0LnByb3RvdHlwZS5fdGVzdExvb3BCb3VuZHJpZXM9ZnVuY3Rpb24odCl7dGhpcy5fbG9vcCYmKHQuc3RhcnRPZmZzZXQ8dGhpcy5fbG9vcFN0YXJ0fHx0LnN0YXJ0T2Zmc2V0Pj10aGlzLl9sb29wRW5kKT90LmNhbmNlbCgwKTp0LnN0YXRlPT09cy5kZWZhdWx0LlN0YXRlLlN0b3BwZWQmJnRoaXMuX3Jlc3RhcnRFdmVudCh0KX0sT2JqZWN0LmRlZmluZVByb3BlcnR5KHMuZGVmYXVsdC5QYXJ0LnByb3RvdHlwZSxcInByb2JhYmlsaXR5XCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9wcm9iYWJpbGl0eX0sc2V0OmZ1bmN0aW9uKHQpe3RoaXMuX3Byb2JhYmlsaXR5PXQsdGhpcy5fc2V0QWxsKFwicHJvYmFiaWxpdHlcIix0KX19KSxPYmplY3QuZGVmaW5lUHJvcGVydHkocy5kZWZhdWx0LlBhcnQucHJvdG90eXBlLFwiaHVtYW5pemVcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2h1bWFuaXplfSxzZXQ6ZnVuY3Rpb24odCl7dGhpcy5faHVtYW5pemU9dCx0aGlzLl9zZXRBbGwoXCJodW1hbml6ZVwiLHQpfX0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShzLmRlZmF1bHQuUGFydC5wcm90b3R5cGUsXCJsb29wXCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9sb29wfSxzZXQ6ZnVuY3Rpb24odCl7dGhpcy5fbG9vcD10LHRoaXMuX2ZvckVhY2goZnVuY3Rpb24oZSl7ZS5fbG9vcFN0YXJ0PXRoaXMuX2xvb3BTdGFydCxlLl9sb29wRW5kPXRoaXMuX2xvb3BFbmQsZS5sb29wPXQsdGhpcy5fdGVzdExvb3BCb3VuZHJpZXMoZSl9KX19KSxPYmplY3QuZGVmaW5lUHJvcGVydHkocy5kZWZhdWx0LlBhcnQucHJvdG90eXBlLFwibG9vcEVuZFwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gcy5kZWZhdWx0LlRpY2tzKHRoaXMuX2xvb3BFbmQpLnRvU2Vjb25kcygpfSxzZXQ6ZnVuY3Rpb24odCl7dGhpcy5fbG9vcEVuZD10aGlzLnRvVGlja3ModCksdGhpcy5fbG9vcCYmdGhpcy5fZm9yRWFjaChmdW5jdGlvbihlKXtlLmxvb3BFbmQ9dCx0aGlzLl90ZXN0TG9vcEJvdW5kcmllcyhlKX0pfX0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShzLmRlZmF1bHQuUGFydC5wcm90b3R5cGUsXCJsb29wU3RhcnRcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHMuZGVmYXVsdC5UaWNrcyh0aGlzLl9sb29wU3RhcnQpLnRvU2Vjb25kcygpfSxzZXQ6ZnVuY3Rpb24odCl7dGhpcy5fbG9vcFN0YXJ0PXRoaXMudG9UaWNrcyh0KSx0aGlzLl9sb29wJiZ0aGlzLl9mb3JFYWNoKGZ1bmN0aW9uKHQpe3QubG9vcFN0YXJ0PXRoaXMubG9vcFN0YXJ0LHRoaXMuX3Rlc3RMb29wQm91bmRyaWVzKHQpfSl9fSksT2JqZWN0LmRlZmluZVByb3BlcnR5KHMuZGVmYXVsdC5QYXJ0LnByb3RvdHlwZSxcInBsYXliYWNrUmF0ZVwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fcGxheWJhY2tSYXRlfSxzZXQ6ZnVuY3Rpb24odCl7dGhpcy5fcGxheWJhY2tSYXRlPXQsdGhpcy5fc2V0QWxsKFwicGxheWJhY2tSYXRlXCIsdCl9fSksT2JqZWN0LmRlZmluZVByb3BlcnR5KHMuZGVmYXVsdC5QYXJ0LnByb3RvdHlwZSxcImxlbmd0aFwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fZXZlbnRzLmxlbmd0aH19KSxzLmRlZmF1bHQuUGFydC5wcm90b3R5cGUuZGlzcG9zZT1mdW5jdGlvbigpe3JldHVybiBzLmRlZmF1bHQuRXZlbnQucHJvdG90eXBlLmRpc3Bvc2UuY2FsbCh0aGlzKSx0aGlzLnJlbW92ZUFsbCgpLHRoaXMuY2FsbGJhY2s9bnVsbCx0aGlzLl9ldmVudHM9bnVsbCx0aGlzfSxlLmRlZmF1bHQ9cy5kZWZhdWx0LlBhcnR9LGZ1bmN0aW9uKHQsZSxpKXtcInVzZSBzdHJpY3RcIjtpLnIoZSk7dmFyIHM9aSgwKTtpKDUxKTtzLmRlZmF1bHQuTG9vcD1mdW5jdGlvbigpe3ZhciB0PXMuZGVmYXVsdC5kZWZhdWx0cyhhcmd1bWVudHMsW1wiY2FsbGJhY2tcIixcImludGVydmFsXCJdLHMuZGVmYXVsdC5Mb29wKTtzLmRlZmF1bHQuY2FsbCh0aGlzKSx0aGlzLl9ldmVudD1uZXcgcy5kZWZhdWx0LkV2ZW50KHtjYWxsYmFjazp0aGlzLl90aWNrLmJpbmQodGhpcyksbG9vcDohMCxsb29wRW5kOnQuaW50ZXJ2YWwscGxheWJhY2tSYXRlOnQucGxheWJhY2tSYXRlLHByb2JhYmlsaXR5OnQucHJvYmFiaWxpdHl9KSx0aGlzLmNhbGxiYWNrPXQuY2FsbGJhY2ssdGhpcy5pdGVyYXRpb25zPXQuaXRlcmF0aW9uc30scy5kZWZhdWx0LmV4dGVuZChzLmRlZmF1bHQuTG9vcCkscy5kZWZhdWx0Lkxvb3AuZGVmYXVsdHM9e2ludGVydmFsOlwiNG5cIixjYWxsYmFjazpzLmRlZmF1bHQubm9PcCxwbGF5YmFja1JhdGU6MSxpdGVyYXRpb25zOjEvMCxwcm9iYWJpbGl0eTohMCxtdXRlOiExfSxzLmRlZmF1bHQuTG9vcC5wcm90b3R5cGUuc3RhcnQ9ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuX2V2ZW50LnN0YXJ0KHQpLHRoaXN9LHMuZGVmYXVsdC5Mb29wLnByb3RvdHlwZS5zdG9wPWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLl9ldmVudC5zdG9wKHQpLHRoaXN9LHMuZGVmYXVsdC5Mb29wLnByb3RvdHlwZS5jYW5jZWw9ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuX2V2ZW50LmNhbmNlbCh0KSx0aGlzfSxzLmRlZmF1bHQuTG9vcC5wcm90b3R5cGUuX3RpY2s9ZnVuY3Rpb24odCl7dGhpcy5jYWxsYmFjayh0KX0sT2JqZWN0LmRlZmluZVByb3BlcnR5KHMuZGVmYXVsdC5Mb29wLnByb3RvdHlwZSxcInN0YXRlXCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9ldmVudC5zdGF0ZX19KSxPYmplY3QuZGVmaW5lUHJvcGVydHkocy5kZWZhdWx0Lkxvb3AucHJvdG90eXBlLFwicHJvZ3Jlc3NcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2V2ZW50LnByb2dyZXNzfX0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShzLmRlZmF1bHQuTG9vcC5wcm90b3R5cGUsXCJpbnRlcnZhbFwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fZXZlbnQubG9vcEVuZH0sc2V0OmZ1bmN0aW9uKHQpe3RoaXMuX2V2ZW50Lmxvb3BFbmQ9dH19KSxPYmplY3QuZGVmaW5lUHJvcGVydHkocy5kZWZhdWx0Lkxvb3AucHJvdG90eXBlLFwicGxheWJhY2tSYXRlXCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9ldmVudC5wbGF5YmFja1JhdGV9LHNldDpmdW5jdGlvbih0KXt0aGlzLl9ldmVudC5wbGF5YmFja1JhdGU9dH19KSxPYmplY3QuZGVmaW5lUHJvcGVydHkocy5kZWZhdWx0Lkxvb3AucHJvdG90eXBlLFwiaHVtYW5pemVcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2V2ZW50Lmh1bWFuaXplfSxzZXQ6ZnVuY3Rpb24odCl7dGhpcy5fZXZlbnQuaHVtYW5pemU9dH19KSxPYmplY3QuZGVmaW5lUHJvcGVydHkocy5kZWZhdWx0Lkxvb3AucHJvdG90eXBlLFwicHJvYmFiaWxpdHlcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2V2ZW50LnByb2JhYmlsaXR5fSxzZXQ6ZnVuY3Rpb24odCl7dGhpcy5fZXZlbnQucHJvYmFiaWxpdHk9dH19KSxPYmplY3QuZGVmaW5lUHJvcGVydHkocy5kZWZhdWx0Lkxvb3AucHJvdG90eXBlLFwibXV0ZVwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fZXZlbnQubXV0ZX0sc2V0OmZ1bmN0aW9uKHQpe3RoaXMuX2V2ZW50Lm11dGU9dH19KSxPYmplY3QuZGVmaW5lUHJvcGVydHkocy5kZWZhdWx0Lkxvb3AucHJvdG90eXBlLFwiaXRlcmF0aW9uc1wiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4hMD09PXRoaXMuX2V2ZW50Lmxvb3A/MS8wOnRoaXMuX2V2ZW50Lmxvb3B9LHNldDpmdW5jdGlvbih0KXt0aGlzLl9ldmVudC5sb29wPXQ9PT0xLzB8fHR9fSkscy5kZWZhdWx0Lkxvb3AucHJvdG90eXBlLmRpc3Bvc2U9ZnVuY3Rpb24oKXt0aGlzLl9ldmVudC5kaXNwb3NlKCksdGhpcy5fZXZlbnQ9bnVsbCx0aGlzLmNhbGxiYWNrPW51bGx9LGUuZGVmYXVsdD1zLmRlZmF1bHQuTG9vcH0sZnVuY3Rpb24odCxlLGkpe1widXNlIHN0cmljdFwiO2kucihlKTt2YXIgcz1pKDApO2koMTUpLGkoMzMpO3MuZGVmYXVsdC5TdGVyZW9YRmVlZGJhY2tFZmZlY3Q9ZnVuY3Rpb24oKXt2YXIgdD1zLmRlZmF1bHQuZGVmYXVsdHMoYXJndW1lbnRzLFtcImZlZWRiYWNrXCJdLHMuZGVmYXVsdC5GZWVkYmFja0VmZmVjdCk7cy5kZWZhdWx0LlN0ZXJlb0VmZmVjdC5jYWxsKHRoaXMsdCksdGhpcy5mZWVkYmFjaz1uZXcgcy5kZWZhdWx0LlNpZ25hbCh0LmZlZWRiYWNrLHMuZGVmYXVsdC5UeXBlLk5vcm1hbFJhbmdlKSx0aGlzLl9mZWVkYmFja0xSPW5ldyBzLmRlZmF1bHQuR2Fpbix0aGlzLl9mZWVkYmFja1JMPW5ldyBzLmRlZmF1bHQuR2Fpbix0aGlzLmVmZmVjdFJldHVybkwuY2hhaW4odGhpcy5fZmVlZGJhY2tMUix0aGlzLmVmZmVjdFNlbmRSKSx0aGlzLmVmZmVjdFJldHVyblIuY2hhaW4odGhpcy5fZmVlZGJhY2tSTCx0aGlzLmVmZmVjdFNlbmRMKSx0aGlzLmZlZWRiYWNrLmZhbih0aGlzLl9mZWVkYmFja0xSLmdhaW4sdGhpcy5fZmVlZGJhY2tSTC5nYWluKSx0aGlzLl9yZWFkT25seShbXCJmZWVkYmFja1wiXSl9LHMuZGVmYXVsdC5leHRlbmQocy5kZWZhdWx0LlN0ZXJlb1hGZWVkYmFja0VmZmVjdCxzLmRlZmF1bHQuU3RlcmVvRWZmZWN0KSxzLmRlZmF1bHQuU3RlcmVvWEZlZWRiYWNrRWZmZWN0LnByb3RvdHlwZS5kaXNwb3NlPWZ1bmN0aW9uKCl7cmV0dXJuIHMuZGVmYXVsdC5TdGVyZW9FZmZlY3QucHJvdG90eXBlLmRpc3Bvc2UuY2FsbCh0aGlzKSx0aGlzLl93cml0YWJsZShbXCJmZWVkYmFja1wiXSksdGhpcy5mZWVkYmFjay5kaXNwb3NlKCksdGhpcy5mZWVkYmFjaz1udWxsLHRoaXMuX2ZlZWRiYWNrTFIuZGlzcG9zZSgpLHRoaXMuX2ZlZWRiYWNrTFI9bnVsbCx0aGlzLl9mZWVkYmFja1JMLmRpc3Bvc2UoKSx0aGlzLl9mZWVkYmFja1JMPW51bGwsdGhpc30sZS5kZWZhdWx0PXMuZGVmYXVsdC5TdGVyZW9YRmVlZGJhY2tFZmZlY3R9LGZ1bmN0aW9uKHQsZSxpKXtcInVzZSBzdHJpY3RcIjtpLnIoZSk7dmFyIHM9aSgwKTtpKDgpLGkoNTMpLGkoNTIpO3MuZGVmYXVsdC5NaWRTaWRlRWZmZWN0PWZ1bmN0aW9uKCl7cy5kZWZhdWx0LkVmZmVjdC5hcHBseSh0aGlzLGFyZ3VtZW50cyksdGhpcy5fbWlkU2lkZVNwbGl0PW5ldyBzLmRlZmF1bHQuTWlkU2lkZVNwbGl0LHRoaXMuX21pZFNpZGVNZXJnZT1uZXcgcy5kZWZhdWx0Lk1pZFNpZGVNZXJnZSx0aGlzLm1pZFNlbmQ9dGhpcy5fbWlkU2lkZVNwbGl0Lm1pZCx0aGlzLnNpZGVTZW5kPXRoaXMuX21pZFNpZGVTcGxpdC5zaWRlLHRoaXMubWlkUmV0dXJuPXRoaXMuX21pZFNpZGVNZXJnZS5taWQsdGhpcy5zaWRlUmV0dXJuPXRoaXMuX21pZFNpZGVNZXJnZS5zaWRlLHRoaXMuZWZmZWN0U2VuZC5jb25uZWN0KHRoaXMuX21pZFNpZGVTcGxpdCksdGhpcy5fbWlkU2lkZU1lcmdlLmNvbm5lY3QodGhpcy5lZmZlY3RSZXR1cm4pfSxzLmRlZmF1bHQuZXh0ZW5kKHMuZGVmYXVsdC5NaWRTaWRlRWZmZWN0LHMuZGVmYXVsdC5FZmZlY3QpLHMuZGVmYXVsdC5NaWRTaWRlRWZmZWN0LnByb3RvdHlwZS5kaXNwb3NlPWZ1bmN0aW9uKCl7cmV0dXJuIHMuZGVmYXVsdC5FZmZlY3QucHJvdG90eXBlLmRpc3Bvc2UuY2FsbCh0aGlzKSx0aGlzLl9taWRTaWRlU3BsaXQuZGlzcG9zZSgpLHRoaXMuX21pZFNpZGVTcGxpdD1udWxsLHRoaXMuX21pZFNpZGVNZXJnZS5kaXNwb3NlKCksdGhpcy5fbWlkU2lkZU1lcmdlPW51bGwsdGhpcy5taWRTZW5kPW51bGwsdGhpcy5zaWRlU2VuZD1udWxsLHRoaXMubWlkUmV0dXJuPW51bGwsdGhpcy5zaWRlUmV0dXJuPW51bGwsdGhpc30sZS5kZWZhdWx0PXMuZGVmYXVsdC5NaWRTaWRlRWZmZWN0fSxmdW5jdGlvbih0LGUsaSl7XCJ1c2Ugc3RyaWN0XCI7aS5yKGUpO3ZhciBzPWkoMCk7aSgxMSksaSg4KTtzLmRlZmF1bHQuQ29udm9sdmVyPWZ1bmN0aW9uKCl7dmFyIHQ9cy5kZWZhdWx0LmRlZmF1bHRzKGFyZ3VtZW50cyxbXCJ1cmxcIixcIm9ubG9hZFwiXSxzLmRlZmF1bHQuQ29udm9sdmVyKTtzLmRlZmF1bHQuRWZmZWN0LmNhbGwodGhpcyx0KSx0aGlzLl9jb252b2x2ZXI9dGhpcy5jb250ZXh0LmNyZWF0ZUNvbnZvbHZlcigpLHRoaXMuX2J1ZmZlcj1uZXcgcy5kZWZhdWx0LkJ1ZmZlcih0LnVybCxmdW5jdGlvbihlKXt0aGlzLmJ1ZmZlcj1lLmdldCgpLHQub25sb2FkKCl9LmJpbmQodGhpcykpLHRoaXMuX2J1ZmZlci5sb2FkZWQmJih0aGlzLmJ1ZmZlcj10aGlzLl9idWZmZXIpLHRoaXMubm9ybWFsaXplPXQubm9ybWFsaXplLHRoaXMuY29ubmVjdEVmZmVjdCh0aGlzLl9jb252b2x2ZXIpfSxzLmRlZmF1bHQuZXh0ZW5kKHMuZGVmYXVsdC5Db252b2x2ZXIscy5kZWZhdWx0LkVmZmVjdCkscy5kZWZhdWx0LkNvbnZvbHZlci5kZWZhdWx0cz17b25sb2FkOnMuZGVmYXVsdC5ub09wLG5vcm1hbGl6ZTohMH0sT2JqZWN0LmRlZmluZVByb3BlcnR5KHMuZGVmYXVsdC5Db252b2x2ZXIucHJvdG90eXBlLFwiYnVmZmVyXCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9idWZmZXIubGVuZ3RoP3RoaXMuX2J1ZmZlcjpudWxsfSxzZXQ6ZnVuY3Rpb24odCl7dGhpcy5fYnVmZmVyLnNldCh0KSx0aGlzLl9jb252b2x2ZXIuYnVmZmVyJiYodGhpcy5lZmZlY3RTZW5kLmRpc2Nvbm5lY3QoKSx0aGlzLl9jb252b2x2ZXIuZGlzY29ubmVjdCgpLHRoaXMuX2NvbnZvbHZlcj10aGlzLmNvbnRleHQuY3JlYXRlQ29udm9sdmVyKCksdGhpcy5jb25uZWN0RWZmZWN0KHRoaXMuX2NvbnZvbHZlcikpLHRoaXMuX2NvbnZvbHZlci5idWZmZXI9dGhpcy5fYnVmZmVyLmdldCgpfX0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShzLmRlZmF1bHQuQ29udm9sdmVyLnByb3RvdHlwZSxcIm5vcm1hbGl6ZVwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fY29udm9sdmVyLm5vcm1hbGl6ZX0sc2V0OmZ1bmN0aW9uKHQpe3RoaXMuX2NvbnZvbHZlci5ub3JtYWxpemU9dH19KSxzLmRlZmF1bHQuQ29udm9sdmVyLnByb3RvdHlwZS5sb2FkPWZ1bmN0aW9uKHQsZSl7cmV0dXJuIHRoaXMuX2J1ZmZlci5sb2FkKHQsZnVuY3Rpb24odCl7dGhpcy5idWZmZXI9dCxlJiZlKCl9LmJpbmQodGhpcykpfSxzLmRlZmF1bHQuQ29udm9sdmVyLnByb3RvdHlwZS5kaXNwb3NlPWZ1bmN0aW9uKCl7cmV0dXJuIHMuZGVmYXVsdC5FZmZlY3QucHJvdG90eXBlLmRpc3Bvc2UuY2FsbCh0aGlzKSx0aGlzLl9idWZmZXIuZGlzcG9zZSgpLHRoaXMuX2J1ZmZlcj1udWxsLHRoaXMuX2NvbnZvbHZlci5kaXNjb25uZWN0KCksdGhpcy5fY29udm9sdmVyPW51bGwsdGhpc30sZS5kZWZhdWx0PXMuZGVmYXVsdC5Db252b2x2ZXJ9LGZ1bmN0aW9uKHQsZSxpKXtcInVzZSBzdHJpY3RcIjtpLnIoZSk7dmFyIHM9aSgwKTtpKDcpLGkoNSksaSgxMyk7cy5kZWZhdWx0Lk1vZHVsbz1mdW5jdGlvbih0KXtzLmRlZmF1bHQuU2lnbmFsQmFzZS5jYWxsKHRoaXMpLHRoaXMuY3JlYXRlSW5zT3V0cygxLDApLHRoaXMuX3NoYXBlcj1uZXcgcy5kZWZhdWx0LldhdmVTaGFwZXIoTWF0aC5wb3coMiwxNikpLHRoaXMuX211bHRpcGx5PW5ldyBzLmRlZmF1bHQuTXVsdGlwbHksdGhpcy5fc3VidHJhY3Q9dGhpcy5vdXRwdXQ9bmV3IHMuZGVmYXVsdC5TdWJ0cmFjdCx0aGlzLl9tb2RTaWduYWw9bmV3IHMuZGVmYXVsdC5TaWduYWwodCkscy5kZWZhdWx0LmNvbm5lY3QodGhpcy5pbnB1dCx0aGlzLl9zaGFwZXIpLHMuZGVmYXVsdC5jb25uZWN0KHRoaXMuaW5wdXQsdGhpcy5fc3VidHJhY3QpLHRoaXMuX21vZFNpZ25hbC5jb25uZWN0KHRoaXMuX211bHRpcGx5LDAsMCksdGhpcy5fc2hhcGVyLmNvbm5lY3QodGhpcy5fbXVsdGlwbHksMCwxKSx0aGlzLl9tdWx0aXBseS5jb25uZWN0KHRoaXMuX3N1YnRyYWN0LDAsMSksdGhpcy5fc2V0V2F2ZVNoYXBlcih0KX0scy5kZWZhdWx0LmV4dGVuZChzLmRlZmF1bHQuTW9kdWxvLHMuZGVmYXVsdC5TaWduYWxCYXNlKSxzLmRlZmF1bHQuTW9kdWxvLnByb3RvdHlwZS5fc2V0V2F2ZVNoYXBlcj1mdW5jdGlvbih0KXt0aGlzLl9zaGFwZXIuc2V0TWFwKGZ1bmN0aW9uKGUpe3JldHVybiBNYXRoLmZsb29yKChlKzFlLTQpL3QpfSl9LE9iamVjdC5kZWZpbmVQcm9wZXJ0eShzLmRlZmF1bHQuTW9kdWxvLnByb3RvdHlwZSxcInZhbHVlXCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9tb2RTaWduYWwudmFsdWV9LHNldDpmdW5jdGlvbih0KXt0aGlzLl9tb2RTaWduYWwudmFsdWU9dCx0aGlzLl9zZXRXYXZlU2hhcGVyKHQpfX0pLHMuZGVmYXVsdC5Nb2R1bG8ucHJvdG90eXBlLmRpc3Bvc2U9ZnVuY3Rpb24oKXtyZXR1cm4gcy5kZWZhdWx0LlNpZ25hbEJhc2UucHJvdG90eXBlLmRpc3Bvc2UuY2FsbCh0aGlzKSx0aGlzLl9zaGFwZXIuZGlzcG9zZSgpLHRoaXMuX3NoYXBlcj1udWxsLHRoaXMuX211bHRpcGx5LmRpc3Bvc2UoKSx0aGlzLl9tdWx0aXBseT1udWxsLHRoaXMuX3N1YnRyYWN0LmRpc3Bvc2UoKSx0aGlzLl9zdWJ0cmFjdD1udWxsLHRoaXMuX21vZFNpZ25hbC5kaXNwb3NlKCksdGhpcy5fbW9kU2lnbmFsPW51bGwsdGhpc30sZS5kZWZhdWx0PXMuZGVmYXVsdC5Nb2R1bG99LGZ1bmN0aW9uKHQsZSxpKXtcInVzZSBzdHJpY3RcIjtpLnIoZSk7dmFyIHM9aSgwKTtpKDIwKSxpKDkyKTtzLmRlZmF1bHQuT2ZmbGluZUNvbnRleHQ9ZnVuY3Rpb24odCxlLGkpe3ZhciBuPW5ldyBPZmZsaW5lQXVkaW9Db250ZXh0KHQsZSppLGkpO3MuZGVmYXVsdC5Db250ZXh0LmNhbGwodGhpcyx7Y29udGV4dDpuLGNsb2NrU291cmNlOlwib2ZmbGluZVwiLGxvb2tBaGVhZDowLHVwZGF0ZUludGVydmFsOjEyOC9pfSksdGhpcy5fZHVyYXRpb249ZSx0aGlzLl9jdXJyZW50VGltZT0wfSxzLmRlZmF1bHQuZXh0ZW5kKHMuZGVmYXVsdC5PZmZsaW5lQ29udGV4dCxzLmRlZmF1bHQuQ29udGV4dCkscy5kZWZhdWx0Lk9mZmxpbmVDb250ZXh0LnByb3RvdHlwZS5ub3c9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fY3VycmVudFRpbWV9LHMuZGVmYXVsdC5PZmZsaW5lQ29udGV4dC5wcm90b3R5cGUucmVzdW1lPWZ1bmN0aW9uKCl7cmV0dXJuIFByb21pc2UucmVzb2x2ZSgpfSxzLmRlZmF1bHQuT2ZmbGluZUNvbnRleHQucHJvdG90eXBlLnJlbmRlcj1mdW5jdGlvbigpe2Zvcig7dGhpcy5fZHVyYXRpb24tdGhpcy5fY3VycmVudFRpbWU+PTA7KXRoaXMuZW1pdChcInRpY2tcIiksdGhpcy5fY3VycmVudFRpbWUrPS4wMDU7cmV0dXJuIHRoaXMuX2NvbnRleHQuc3RhcnRSZW5kZXJpbmcoKX0scy5kZWZhdWx0Lk9mZmxpbmVDb250ZXh0LnByb3RvdHlwZS5jbG9zZT1mdW5jdGlvbigpe3JldHVybiB0aGlzLl9jb250ZXh0PW51bGwsUHJvbWlzZS5yZXNvbHZlKCl9LGUuZGVmYXVsdD1zLmRlZmF1bHQuT2ZmbGluZUNvbnRleHR9LGZ1bmN0aW9uKHQsZSxpKXtcInVzZSBzdHJpY3RcIjtpLnIoZSk7dmFyIHM9aSgwKTtpKDE2KSxpKDExKSxpKDc2KSxpKDQwKTtzLmRlZmF1bHQuT2ZmbGluZT1mdW5jdGlvbih0LGUpe3ZhciBpPXMuZGVmYXVsdC5jb250ZXh0LnNhbXBsZVJhdGUsbj1zLmRlZmF1bHQuY29udGV4dCxvPW5ldyBzLmRlZmF1bHQuT2ZmbGluZUNvbnRleHQoMixlLGkpO3MuZGVmYXVsdC5jb250ZXh0PW87dmFyIGE9dChzLmRlZmF1bHQuVHJhbnNwb3J0KSxyPW51bGw7cmV0dXJuIHI9YSYmcy5kZWZhdWx0LmlzRnVuY3Rpb24oYS50aGVuKT9hLnRoZW4oZnVuY3Rpb24oKXtyZXR1cm4gby5yZW5kZXIoKX0pOm8ucmVuZGVyKCkscy5kZWZhdWx0LmNvbnRleHQ9bixyLnRoZW4oZnVuY3Rpb24odCl7cmV0dXJuIG5ldyBzLmRlZmF1bHQuQnVmZmVyKHQpfSl9LGUuZGVmYXVsdD1zLmRlZmF1bHQuT2ZmbGluZX0sZnVuY3Rpb24odCxlLGkpe1widXNlIHN0cmljdFwiO2kucihlKTt2YXIgcz1pKDApO2koMTEpO3MuZGVmYXVsdC5CdWZmZXJzPWZ1bmN0aW9uKHQpe3ZhciBlPUFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cyk7ZS5zaGlmdCgpO3ZhciBpPXMuZGVmYXVsdC5kZWZhdWx0cyhlLFtcIm9ubG9hZFwiLFwiYmFzZVVybFwiXSxzLmRlZmF1bHQuQnVmZmVycyk7Zm9yKHZhciBuIGluIHMuZGVmYXVsdC5jYWxsKHRoaXMpLHRoaXMuX2J1ZmZlcnM9e30sdGhpcy5iYXNlVXJsPWkuYmFzZVVybCx0aGlzLl9sb2FkaW5nQ291bnQ9MCx0KXRoaXMuX2xvYWRpbmdDb3VudCsrLHRoaXMuYWRkKG4sdFtuXSx0aGlzLl9idWZmZXJMb2FkZWQuYmluZCh0aGlzLGkub25sb2FkKSl9LHMuZGVmYXVsdC5leHRlbmQocy5kZWZhdWx0LkJ1ZmZlcnMpLHMuZGVmYXVsdC5CdWZmZXJzLmRlZmF1bHRzPXtvbmxvYWQ6cy5kZWZhdWx0Lm5vT3AsYmFzZVVybDpcIlwifSxzLmRlZmF1bHQuQnVmZmVycy5wcm90b3R5cGUuaGFzPWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLl9idWZmZXJzLmhhc093blByb3BlcnR5KHQpfSxzLmRlZmF1bHQuQnVmZmVycy5wcm90b3R5cGUuZ2V0PWZ1bmN0aW9uKHQpe2lmKHRoaXMuaGFzKHQpKXJldHVybiB0aGlzLl9idWZmZXJzW3RdO3Rocm93IG5ldyBFcnJvcihcIlRvbmUuQnVmZmVyczogbm8gYnVmZmVyIG5hbWVkIFwiK3QpfSxzLmRlZmF1bHQuQnVmZmVycy5wcm90b3R5cGUuX2J1ZmZlckxvYWRlZD1mdW5jdGlvbih0KXt0aGlzLl9sb2FkaW5nQ291bnQtLSwwPT09dGhpcy5fbG9hZGluZ0NvdW50JiZ0JiZ0KHRoaXMpfSxPYmplY3QuZGVmaW5lUHJvcGVydHkocy5kZWZhdWx0LkJ1ZmZlcnMucHJvdG90eXBlLFwibG9hZGVkXCIse2dldDpmdW5jdGlvbigpe3ZhciB0PSEwO2Zvcih2YXIgZSBpbiB0aGlzLl9idWZmZXJzKXt2YXIgaT10aGlzLmdldChlKTt0PXQmJmkubG9hZGVkfXJldHVybiB0fX0pLHMuZGVmYXVsdC5CdWZmZXJzLnByb3RvdHlwZS5hZGQ9ZnVuY3Rpb24odCxlLGkpe3JldHVybiBpPXMuZGVmYXVsdC5kZWZhdWx0QXJnKGkscy5kZWZhdWx0Lm5vT3ApLGUgaW5zdGFuY2VvZiBzLmRlZmF1bHQuQnVmZmVyPyh0aGlzLl9idWZmZXJzW3RdPWUsaSh0aGlzKSk6ZSBpbnN0YW5jZW9mIEF1ZGlvQnVmZmVyPyh0aGlzLl9idWZmZXJzW3RdPW5ldyBzLmRlZmF1bHQuQnVmZmVyKGUpLGkodGhpcykpOnMuZGVmYXVsdC5pc1N0cmluZyhlKSYmKHRoaXMuX2J1ZmZlcnNbdF09bmV3IHMuZGVmYXVsdC5CdWZmZXIodGhpcy5iYXNlVXJsK2UsaSkpLHRoaXN9LHMuZGVmYXVsdC5CdWZmZXJzLnByb3RvdHlwZS5kaXNwb3NlPWZ1bmN0aW9uKCl7Zm9yKHZhciB0IGluIHMuZGVmYXVsdC5wcm90b3R5cGUuZGlzcG9zZS5jYWxsKHRoaXMpLHRoaXMuX2J1ZmZlcnMpdGhpcy5fYnVmZmVyc1t0XS5kaXNwb3NlKCk7cmV0dXJuIHRoaXMuX2J1ZmZlcnM9bnVsbCx0aGlzfSxlLmRlZmF1bHQ9cy5kZWZhdWx0LkJ1ZmZlcnN9LGZ1bmN0aW9uKHQsZSxpKXtcInVzZSBzdHJpY3RcIjtpLnIoZSk7dmFyIHM9aSgwKTtzLmRlZmF1bHQuQ3RybFBhdHRlcm49ZnVuY3Rpb24oKXt2YXIgdD1zLmRlZmF1bHQuZGVmYXVsdHMoYXJndW1lbnRzLFtcInZhbHVlc1wiLFwidHlwZVwiXSxzLmRlZmF1bHQuQ3RybFBhdHRlcm4pO3MuZGVmYXVsdC5jYWxsKHRoaXMpLHRoaXMudmFsdWVzPXQudmFsdWVzLHRoaXMuaW5kZXg9MCx0aGlzLl90eXBlPW51bGwsdGhpcy5fc2h1ZmZsZWQ9bnVsbCx0aGlzLl9kaXJlY3Rpb249bnVsbCx0aGlzLnR5cGU9dC50eXBlfSxzLmRlZmF1bHQuZXh0ZW5kKHMuZGVmYXVsdC5DdHJsUGF0dGVybikscy5kZWZhdWx0LkN0cmxQYXR0ZXJuLlR5cGU9e1VwOlwidXBcIixEb3duOlwiZG93blwiLFVwRG93bjpcInVwRG93blwiLERvd25VcDpcImRvd25VcFwiLEFsdGVybmF0ZVVwOlwiYWx0ZXJuYXRlVXBcIixBbHRlcm5hdGVEb3duOlwiYWx0ZXJuYXRlRG93blwiLFJhbmRvbTpcInJhbmRvbVwiLFJhbmRvbVdhbGs6XCJyYW5kb21XYWxrXCIsUmFuZG9tT25jZTpcInJhbmRvbU9uY2VcIn0scy5kZWZhdWx0LkN0cmxQYXR0ZXJuLmRlZmF1bHRzPXt0eXBlOnMuZGVmYXVsdC5DdHJsUGF0dGVybi5UeXBlLlVwLHZhbHVlczpbXX0sT2JqZWN0LmRlZmluZVByb3BlcnR5KHMuZGVmYXVsdC5DdHJsUGF0dGVybi5wcm90b3R5cGUsXCJ2YWx1ZVwiLHtnZXQ6ZnVuY3Rpb24oKXtpZigwIT09dGhpcy52YWx1ZXMubGVuZ3RoKXtpZigxPT09dGhpcy52YWx1ZXMubGVuZ3RoKXJldHVybiB0aGlzLnZhbHVlc1swXTt0aGlzLmluZGV4PU1hdGgubWluKHRoaXMuaW5kZXgsdGhpcy52YWx1ZXMubGVuZ3RoLTEpO3ZhciB0PXRoaXMudmFsdWVzW3RoaXMuaW5kZXhdO3JldHVybiB0aGlzLnR5cGU9PT1zLmRlZmF1bHQuQ3RybFBhdHRlcm4uVHlwZS5SYW5kb21PbmNlJiYodGhpcy52YWx1ZXMubGVuZ3RoIT09dGhpcy5fc2h1ZmZsZWQubGVuZ3RoJiZ0aGlzLl9zaHVmZmxlVmFsdWVzKCksdD10aGlzLnZhbHVlc1t0aGlzLl9zaHVmZmxlZFt0aGlzLmluZGV4XV0pLHR9fX0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShzLmRlZmF1bHQuQ3RybFBhdHRlcm4ucHJvdG90eXBlLFwidHlwZVwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fdHlwZX0sc2V0OmZ1bmN0aW9uKHQpe3RoaXMuX3R5cGU9dCx0aGlzLl9zaHVmZmxlZD1udWxsLHRoaXMuX3R5cGU9PT1zLmRlZmF1bHQuQ3RybFBhdHRlcm4uVHlwZS5VcHx8dGhpcy5fdHlwZT09PXMuZGVmYXVsdC5DdHJsUGF0dGVybi5UeXBlLlVwRG93bnx8dGhpcy5fdHlwZT09PXMuZGVmYXVsdC5DdHJsUGF0dGVybi5UeXBlLlJhbmRvbU9uY2V8fHRoaXMuX3R5cGU9PT1zLmRlZmF1bHQuQ3RybFBhdHRlcm4uVHlwZS5BbHRlcm5hdGVVcD90aGlzLmluZGV4PTA6dGhpcy5fdHlwZSE9PXMuZGVmYXVsdC5DdHJsUGF0dGVybi5UeXBlLkRvd24mJnRoaXMuX3R5cGUhPT1zLmRlZmF1bHQuQ3RybFBhdHRlcm4uVHlwZS5Eb3duVXAmJnRoaXMuX3R5cGUhPT1zLmRlZmF1bHQuQ3RybFBhdHRlcm4uVHlwZS5BbHRlcm5hdGVEb3dufHwodGhpcy5pbmRleD10aGlzLnZhbHVlcy5sZW5ndGgtMSksdGhpcy5fdHlwZT09PXMuZGVmYXVsdC5DdHJsUGF0dGVybi5UeXBlLlVwRG93bnx8dGhpcy5fdHlwZT09PXMuZGVmYXVsdC5DdHJsUGF0dGVybi5UeXBlLkFsdGVybmF0ZVVwP3RoaXMuX2RpcmVjdGlvbj1zLmRlZmF1bHQuQ3RybFBhdHRlcm4uVHlwZS5VcDp0aGlzLl90eXBlIT09cy5kZWZhdWx0LkN0cmxQYXR0ZXJuLlR5cGUuRG93blVwJiZ0aGlzLl90eXBlIT09cy5kZWZhdWx0LkN0cmxQYXR0ZXJuLlR5cGUuQWx0ZXJuYXRlRG93bnx8KHRoaXMuX2RpcmVjdGlvbj1zLmRlZmF1bHQuQ3RybFBhdHRlcm4uVHlwZS5Eb3duKSx0aGlzLl90eXBlPT09cy5kZWZhdWx0LkN0cmxQYXR0ZXJuLlR5cGUuUmFuZG9tT25jZT90aGlzLl9zaHVmZmxlVmFsdWVzKCk6dGhpcy5fdHlwZT09PXMuZGVmYXVsdC5DdHJsUGF0dGVybi5UeXBlLlJhbmRvbSYmKHRoaXMuaW5kZXg9TWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpKnRoaXMudmFsdWVzLmxlbmd0aCkpfX0pLHMuZGVmYXVsdC5DdHJsUGF0dGVybi5wcm90b3R5cGUubmV4dD1mdW5jdGlvbigpe3ZhciB0PXRoaXMudHlwZTtyZXR1cm4gdD09PXMuZGVmYXVsdC5DdHJsUGF0dGVybi5UeXBlLlVwPyh0aGlzLmluZGV4KyssdGhpcy5pbmRleD49dGhpcy52YWx1ZXMubGVuZ3RoJiYodGhpcy5pbmRleD0wKSk6dD09PXMuZGVmYXVsdC5DdHJsUGF0dGVybi5UeXBlLkRvd24/KHRoaXMuaW5kZXgtLSx0aGlzLmluZGV4PDAmJih0aGlzLmluZGV4PXRoaXMudmFsdWVzLmxlbmd0aC0xKSk6dD09PXMuZGVmYXVsdC5DdHJsUGF0dGVybi5UeXBlLlVwRG93bnx8dD09PXMuZGVmYXVsdC5DdHJsUGF0dGVybi5UeXBlLkRvd25VcD8odGhpcy5fZGlyZWN0aW9uPT09cy5kZWZhdWx0LkN0cmxQYXR0ZXJuLlR5cGUuVXA/dGhpcy5pbmRleCsrOnRoaXMuaW5kZXgtLSx0aGlzLmluZGV4PDA/KHRoaXMuaW5kZXg9MSx0aGlzLl9kaXJlY3Rpb249cy5kZWZhdWx0LkN0cmxQYXR0ZXJuLlR5cGUuVXApOnRoaXMuaW5kZXg+PXRoaXMudmFsdWVzLmxlbmd0aCYmKHRoaXMuaW5kZXg9dGhpcy52YWx1ZXMubGVuZ3RoLTIsdGhpcy5fZGlyZWN0aW9uPXMuZGVmYXVsdC5DdHJsUGF0dGVybi5UeXBlLkRvd24pKTp0PT09cy5kZWZhdWx0LkN0cmxQYXR0ZXJuLlR5cGUuUmFuZG9tP3RoaXMuaW5kZXg9TWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpKnRoaXMudmFsdWVzLmxlbmd0aCk6dD09PXMuZGVmYXVsdC5DdHJsUGF0dGVybi5UeXBlLlJhbmRvbVdhbGs/TWF0aC5yYW5kb20oKTwuNT8odGhpcy5pbmRleC0tLHRoaXMuaW5kZXg9TWF0aC5tYXgodGhpcy5pbmRleCwwKSk6KHRoaXMuaW5kZXgrKyx0aGlzLmluZGV4PU1hdGgubWluKHRoaXMuaW5kZXgsdGhpcy52YWx1ZXMubGVuZ3RoLTEpKTp0PT09cy5kZWZhdWx0LkN0cmxQYXR0ZXJuLlR5cGUuUmFuZG9tT25jZT8odGhpcy5pbmRleCsrLHRoaXMuaW5kZXg+PXRoaXMudmFsdWVzLmxlbmd0aCYmKHRoaXMuaW5kZXg9MCx0aGlzLl9zaHVmZmxlVmFsdWVzKCkpKTp0PT09cy5kZWZhdWx0LkN0cmxQYXR0ZXJuLlR5cGUuQWx0ZXJuYXRlVXA/KHRoaXMuX2RpcmVjdGlvbj09PXMuZGVmYXVsdC5DdHJsUGF0dGVybi5UeXBlLlVwPyh0aGlzLmluZGV4Kz0yLHRoaXMuX2RpcmVjdGlvbj1zLmRlZmF1bHQuQ3RybFBhdHRlcm4uVHlwZS5Eb3duKToodGhpcy5pbmRleC09MSx0aGlzLl9kaXJlY3Rpb249cy5kZWZhdWx0LkN0cmxQYXR0ZXJuLlR5cGUuVXApLHRoaXMuaW5kZXg+PXRoaXMudmFsdWVzLmxlbmd0aCYmKHRoaXMuaW5kZXg9MCx0aGlzLl9kaXJlY3Rpb249cy5kZWZhdWx0LkN0cmxQYXR0ZXJuLlR5cGUuVXApKTp0PT09cy5kZWZhdWx0LkN0cmxQYXR0ZXJuLlR5cGUuQWx0ZXJuYXRlRG93biYmKHRoaXMuX2RpcmVjdGlvbj09PXMuZGVmYXVsdC5DdHJsUGF0dGVybi5UeXBlLlVwPyh0aGlzLmluZGV4Kz0xLHRoaXMuX2RpcmVjdGlvbj1zLmRlZmF1bHQuQ3RybFBhdHRlcm4uVHlwZS5Eb3duKToodGhpcy5pbmRleC09Mix0aGlzLl9kaXJlY3Rpb249cy5kZWZhdWx0LkN0cmxQYXR0ZXJuLlR5cGUuVXApLHRoaXMuaW5kZXg8MCYmKHRoaXMuaW5kZXg9dGhpcy52YWx1ZXMubGVuZ3RoLTEsdGhpcy5fZGlyZWN0aW9uPXMuZGVmYXVsdC5DdHJsUGF0dGVybi5UeXBlLkRvd24pKSx0aGlzLnZhbHVlfSxzLmRlZmF1bHQuQ3RybFBhdHRlcm4ucHJvdG90eXBlLl9zaHVmZmxlVmFsdWVzPWZ1bmN0aW9uKCl7dmFyIHQ9W107dGhpcy5fc2h1ZmZsZWQ9W107Zm9yKHZhciBlPTA7ZTx0aGlzLnZhbHVlcy5sZW5ndGg7ZSsrKXRbZV09ZTtmb3IoO3QubGVuZ3RoPjA7KXt2YXIgaT10LnNwbGljZShNYXRoLmZsb29yKHQubGVuZ3RoKk1hdGgucmFuZG9tKCkpLDEpO3RoaXMuX3NodWZmbGVkLnB1c2goaVswXSl9fSxzLmRlZmF1bHQuQ3RybFBhdHRlcm4ucHJvdG90eXBlLmRpc3Bvc2U9ZnVuY3Rpb24oKXt0aGlzLl9zaHVmZmxlZD1udWxsLHRoaXMudmFsdWVzPW51bGx9LGUuZGVmYXVsdD1zLmRlZmF1bHQuQ3RybFBhdHRlcm59LGZ1bmN0aW9uKHQsZSxpKXtcInVzZSBzdHJpY3RcIjtpLnIoZSk7dmFyIHM9aSgwKTtpKDU2KSxpKDU1KTtzLmRlZmF1bHQuVHJhbnNwb3J0UmVwZWF0RXZlbnQ9ZnVuY3Rpb24odCxlKXtzLmRlZmF1bHQuVHJhbnNwb3J0RXZlbnQuY2FsbCh0aGlzLHQsZSksZT1zLmRlZmF1bHQuZGVmYXVsdEFyZyhlLHMuZGVmYXVsdC5UcmFuc3BvcnRSZXBlYXRFdmVudC5kZWZhdWx0cyksdGhpcy5kdXJhdGlvbj1zLmRlZmF1bHQuVGlja3MoZS5kdXJhdGlvbiksdGhpcy5faW50ZXJ2YWw9cy5kZWZhdWx0LlRpY2tzKGUuaW50ZXJ2YWwpLHRoaXMuX2N1cnJlbnRJZD0tMSx0aGlzLl9uZXh0SWQ9LTEsdGhpcy5fbmV4dFRpY2s9dGhpcy50aW1lLHRoaXMuX2JvdW5kUmVzdGFydD10aGlzLl9yZXN0YXJ0LmJpbmQodGhpcyksdGhpcy5UcmFuc3BvcnQub24oXCJzdGFydCBsb29wU3RhcnRcIix0aGlzLl9ib3VuZFJlc3RhcnQpLHRoaXMuX3Jlc3RhcnQoKX0scy5kZWZhdWx0LmV4dGVuZChzLmRlZmF1bHQuVHJhbnNwb3J0UmVwZWF0RXZlbnQscy5kZWZhdWx0LlRyYW5zcG9ydEV2ZW50KSxzLmRlZmF1bHQuVHJhbnNwb3J0UmVwZWF0RXZlbnQuZGVmYXVsdHM9e2R1cmF0aW9uOjEvMCxpbnRlcnZhbDoxfSxzLmRlZmF1bHQuVHJhbnNwb3J0UmVwZWF0RXZlbnQucHJvdG90eXBlLmludm9rZT1mdW5jdGlvbih0KXt0aGlzLl9jcmVhdGVFdmVudHModCkscy5kZWZhdWx0LlRyYW5zcG9ydEV2ZW50LnByb3RvdHlwZS5pbnZva2UuY2FsbCh0aGlzLHQpfSxzLmRlZmF1bHQuVHJhbnNwb3J0UmVwZWF0RXZlbnQucHJvdG90eXBlLl9jcmVhdGVFdmVudHM9ZnVuY3Rpb24odCl7dmFyIGU9dGhpcy5UcmFuc3BvcnQuZ2V0VGlja3NBdFRpbWUodCk7ZT49dGhpcy50aW1lJiZlPj10aGlzLl9uZXh0VGljayYmdGhpcy5fbmV4dFRpY2srdGhpcy5faW50ZXJ2YWw8dGhpcy50aW1lK3RoaXMuZHVyYXRpb24mJih0aGlzLl9uZXh0VGljays9dGhpcy5faW50ZXJ2YWwsdGhpcy5fY3VycmVudElkPXRoaXMuX25leHRJZCx0aGlzLl9uZXh0SWQ9dGhpcy5UcmFuc3BvcnQuc2NoZWR1bGVPbmNlKHRoaXMuaW52b2tlLmJpbmQodGhpcykscy5kZWZhdWx0LlRpY2tzKHRoaXMuX25leHRUaWNrKSkpfSxzLmRlZmF1bHQuVHJhbnNwb3J0UmVwZWF0RXZlbnQucHJvdG90eXBlLl9yZXN0YXJ0PWZ1bmN0aW9uKHQpe3RoaXMuVHJhbnNwb3J0LmNsZWFyKHRoaXMuX2N1cnJlbnRJZCksdGhpcy5UcmFuc3BvcnQuY2xlYXIodGhpcy5fbmV4dElkKSx0aGlzLl9uZXh0VGljaz10aGlzLnRpbWU7dmFyIGU9dGhpcy5UcmFuc3BvcnQuZ2V0VGlja3NBdFRpbWUodCk7ZT50aGlzLnRpbWUmJih0aGlzLl9uZXh0VGljaz10aGlzLnRpbWUrTWF0aC5jZWlsKChlLXRoaXMudGltZSkvdGhpcy5faW50ZXJ2YWwpKnRoaXMuX2ludGVydmFsKSx0aGlzLl9jdXJyZW50SWQ9dGhpcy5UcmFuc3BvcnQuc2NoZWR1bGVPbmNlKHRoaXMuaW52b2tlLmJpbmQodGhpcykscy5kZWZhdWx0LlRpY2tzKHRoaXMuX25leHRUaWNrKSksdGhpcy5fbmV4dFRpY2srPXRoaXMuX2ludGVydmFsLHRoaXMuX25leHRJZD10aGlzLlRyYW5zcG9ydC5zY2hlZHVsZU9uY2UodGhpcy5pbnZva2UuYmluZCh0aGlzKSxzLmRlZmF1bHQuVGlja3ModGhpcy5fbmV4dFRpY2spKX0scy5kZWZhdWx0LlRyYW5zcG9ydFJlcGVhdEV2ZW50LnByb3RvdHlwZS5kaXNwb3NlPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuVHJhbnNwb3J0LmNsZWFyKHRoaXMuX2N1cnJlbnRJZCksdGhpcy5UcmFuc3BvcnQuY2xlYXIodGhpcy5fbmV4dElkKSx0aGlzLlRyYW5zcG9ydC5vZmYoXCJzdGFydCBsb29wU3RhcnRcIix0aGlzLl9ib3VuZFJlc3RhcnQpLHRoaXMuX2JvdW5kQ3JlYXRlRXZlbnRzPW51bGwscy5kZWZhdWx0LlRyYW5zcG9ydEV2ZW50LnByb3RvdHlwZS5kaXNwb3NlLmNhbGwodGhpcyksdGhpcy5kdXJhdGlvbj1udWxsLHRoaXMuX2ludGVydmFsPW51bGwsdGhpc30sZS5kZWZhdWx0PXMuZGVmYXVsdC5UcmFuc3BvcnRSZXBlYXRFdmVudH0sZnVuY3Rpb24odCxlLGkpe1widXNlIHN0cmljdFwiO2kucihlKTt2YXIgcz1pKDApO2koNCk7cy5kZWZhdWx0LkludGVydmFsVGltZWxpbmU9ZnVuY3Rpb24oKXtzLmRlZmF1bHQuY2FsbCh0aGlzKSx0aGlzLl9yb290PW51bGwsdGhpcy5fbGVuZ3RoPTB9LHMuZGVmYXVsdC5leHRlbmQocy5kZWZhdWx0LkludGVydmFsVGltZWxpbmUpLHMuZGVmYXVsdC5JbnRlcnZhbFRpbWVsaW5lLnByb3RvdHlwZS5hZGQ9ZnVuY3Rpb24odCl7aWYocy5kZWZhdWx0LmlzVW5kZWYodC50aW1lKXx8cy5kZWZhdWx0LmlzVW5kZWYodC5kdXJhdGlvbikpdGhyb3cgbmV3IEVycm9yKFwiVG9uZS5JbnRlcnZhbFRpbWVsaW5lOiBldmVudHMgbXVzdCBoYXZlIHRpbWUgYW5kIGR1cmF0aW9uIHBhcmFtZXRlcnNcIik7dC50aW1lPXQudGltZS52YWx1ZU9mKCk7dmFyIGU9bmV3IG4odC50aW1lLHQudGltZSt0LmR1cmF0aW9uLHQpO2ZvcihudWxsPT09dGhpcy5fcm9vdD90aGlzLl9yb290PWU6dGhpcy5fcm9vdC5pbnNlcnQoZSksdGhpcy5fbGVuZ3RoKys7bnVsbCE9PWU7KWUudXBkYXRlSGVpZ2h0KCksZS51cGRhdGVNYXgoKSx0aGlzLl9yZWJhbGFuY2UoZSksZT1lLnBhcmVudDtyZXR1cm4gdGhpc30scy5kZWZhdWx0LkludGVydmFsVGltZWxpbmUucHJvdG90eXBlLnJlbW92ZT1mdW5jdGlvbih0KXtpZihudWxsIT09dGhpcy5fcm9vdCl7dmFyIGU9W107dGhpcy5fcm9vdC5zZWFyY2godC50aW1lLGUpO2Zvcih2YXIgaT0wO2k8ZS5sZW5ndGg7aSsrKXt2YXIgcz1lW2ldO2lmKHMuZXZlbnQ9PT10KXt0aGlzLl9yZW1vdmVOb2RlKHMpLHRoaXMuX2xlbmd0aC0tO2JyZWFrfX19cmV0dXJuIHRoaXN9LE9iamVjdC5kZWZpbmVQcm9wZXJ0eShzLmRlZmF1bHQuSW50ZXJ2YWxUaW1lbGluZS5wcm90b3R5cGUsXCJsZW5ndGhcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2xlbmd0aH19KSxzLmRlZmF1bHQuSW50ZXJ2YWxUaW1lbGluZS5wcm90b3R5cGUuY2FuY2VsPWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLmZvckVhY2hGcm9tKHQsZnVuY3Rpb24odCl7dGhpcy5yZW1vdmUodCl9LmJpbmQodGhpcykpLHRoaXN9LHMuZGVmYXVsdC5JbnRlcnZhbFRpbWVsaW5lLnByb3RvdHlwZS5fc2V0Um9vdD1mdW5jdGlvbih0KXt0aGlzLl9yb290PXQsbnVsbCE9PXRoaXMuX3Jvb3QmJih0aGlzLl9yb290LnBhcmVudD1udWxsKX0scy5kZWZhdWx0LkludGVydmFsVGltZWxpbmUucHJvdG90eXBlLl9yZXBsYWNlTm9kZUluUGFyZW50PWZ1bmN0aW9uKHQsZSl7bnVsbCE9PXQucGFyZW50Pyh0LmlzTGVmdENoaWxkKCk/dC5wYXJlbnQubGVmdD1lOnQucGFyZW50LnJpZ2h0PWUsdGhpcy5fcmViYWxhbmNlKHQucGFyZW50KSk6dGhpcy5fc2V0Um9vdChlKX0scy5kZWZhdWx0LkludGVydmFsVGltZWxpbmUucHJvdG90eXBlLl9yZW1vdmVOb2RlPWZ1bmN0aW9uKHQpe2lmKG51bGw9PT10LmxlZnQmJm51bGw9PT10LnJpZ2h0KXRoaXMuX3JlcGxhY2VOb2RlSW5QYXJlbnQodCxudWxsKTtlbHNlIGlmKG51bGw9PT10LnJpZ2h0KXRoaXMuX3JlcGxhY2VOb2RlSW5QYXJlbnQodCx0LmxlZnQpO2Vsc2UgaWYobnVsbD09PXQubGVmdCl0aGlzLl9yZXBsYWNlTm9kZUluUGFyZW50KHQsdC5yaWdodCk7ZWxzZXt2YXIgZSxpO2lmKHQuZ2V0QmFsYW5jZSgpPjApaWYobnVsbD09PXQubGVmdC5yaWdodCkoZT10LmxlZnQpLnJpZ2h0PXQucmlnaHQsaT1lO2Vsc2V7Zm9yKGU9dC5sZWZ0LnJpZ2h0O251bGwhPT1lLnJpZ2h0OyllPWUucmlnaHQ7ZS5wYXJlbnQucmlnaHQ9ZS5sZWZ0LGk9ZS5wYXJlbnQsZS5sZWZ0PXQubGVmdCxlLnJpZ2h0PXQucmlnaHR9ZWxzZSBpZihudWxsPT09dC5yaWdodC5sZWZ0KShlPXQucmlnaHQpLmxlZnQ9dC5sZWZ0LGk9ZTtlbHNle2ZvcihlPXQucmlnaHQubGVmdDtudWxsIT09ZS5sZWZ0OyllPWUubGVmdDtlLnBhcmVudC5sZWZ0PWUucmlnaHQsaT1lLnBhcmVudCxlLmxlZnQ9dC5sZWZ0LGUucmlnaHQ9dC5yaWdodH1udWxsIT09dC5wYXJlbnQ/dC5pc0xlZnRDaGlsZCgpP3QucGFyZW50LmxlZnQ9ZTp0LnBhcmVudC5yaWdodD1lOnRoaXMuX3NldFJvb3QoZSksdGhpcy5fcmViYWxhbmNlKGkpfXQuZGlzcG9zZSgpfSxzLmRlZmF1bHQuSW50ZXJ2YWxUaW1lbGluZS5wcm90b3R5cGUuX3JvdGF0ZUxlZnQ9ZnVuY3Rpb24odCl7dmFyIGU9dC5wYXJlbnQsaT10LmlzTGVmdENoaWxkKCkscz10LnJpZ2h0O3QucmlnaHQ9cy5sZWZ0LHMubGVmdD10LG51bGwhPT1lP2k/ZS5sZWZ0PXM6ZS5yaWdodD1zOnRoaXMuX3NldFJvb3Qocyl9LHMuZGVmYXVsdC5JbnRlcnZhbFRpbWVsaW5lLnByb3RvdHlwZS5fcm90YXRlUmlnaHQ9ZnVuY3Rpb24odCl7dmFyIGU9dC5wYXJlbnQsaT10LmlzTGVmdENoaWxkKCkscz10LmxlZnQ7dC5sZWZ0PXMucmlnaHQscy5yaWdodD10LG51bGwhPT1lP2k/ZS5sZWZ0PXM6ZS5yaWdodD1zOnRoaXMuX3NldFJvb3Qocyl9LHMuZGVmYXVsdC5JbnRlcnZhbFRpbWVsaW5lLnByb3RvdHlwZS5fcmViYWxhbmNlPWZ1bmN0aW9uKHQpe3ZhciBlPXQuZ2V0QmFsYW5jZSgpO2U+MT90LmxlZnQuZ2V0QmFsYW5jZSgpPDA/dGhpcy5fcm90YXRlTGVmdCh0LmxlZnQpOnRoaXMuX3JvdGF0ZVJpZ2h0KHQpOmU8LTEmJih0LnJpZ2h0LmdldEJhbGFuY2UoKT4wP3RoaXMuX3JvdGF0ZVJpZ2h0KHQucmlnaHQpOnRoaXMuX3JvdGF0ZUxlZnQodCkpfSxzLmRlZmF1bHQuSW50ZXJ2YWxUaW1lbGluZS5wcm90b3R5cGUuZ2V0PWZ1bmN0aW9uKHQpe2lmKG51bGwhPT10aGlzLl9yb290KXt2YXIgZT1bXTtpZih0aGlzLl9yb290LnNlYXJjaCh0LGUpLGUubGVuZ3RoPjApe2Zvcih2YXIgaT1lWzBdLHM9MTtzPGUubGVuZ3RoO3MrKyllW3NdLmxvdz5pLmxvdyYmKGk9ZVtzXSk7cmV0dXJuIGkuZXZlbnR9fXJldHVybiBudWxsfSxzLmRlZmF1bHQuSW50ZXJ2YWxUaW1lbGluZS5wcm90b3R5cGUuZm9yRWFjaD1mdW5jdGlvbih0KXtpZihudWxsIT09dGhpcy5fcm9vdCl7dmFyIGU9W107dGhpcy5fcm9vdC50cmF2ZXJzZShmdW5jdGlvbih0KXtlLnB1c2godCl9KTtmb3IodmFyIGk9MDtpPGUubGVuZ3RoO2krKyl7dmFyIHM9ZVtpXS5ldmVudDtzJiZ0KHMpfX1yZXR1cm4gdGhpc30scy5kZWZhdWx0LkludGVydmFsVGltZWxpbmUucHJvdG90eXBlLmZvckVhY2hBdFRpbWU9ZnVuY3Rpb24odCxlKXtpZihudWxsIT09dGhpcy5fcm9vdCl7dmFyIGk9W107dGhpcy5fcm9vdC5zZWFyY2godCxpKTtmb3IodmFyIHM9aS5sZW5ndGgtMTtzPj0wO3MtLSl7dmFyIG49aVtzXS5ldmVudDtuJiZlKG4pfX1yZXR1cm4gdGhpc30scy5kZWZhdWx0LkludGVydmFsVGltZWxpbmUucHJvdG90eXBlLmZvckVhY2hGcm9tPWZ1bmN0aW9uKHQsZSl7aWYobnVsbCE9PXRoaXMuX3Jvb3Qpe3ZhciBpPVtdO3RoaXMuX3Jvb3Quc2VhcmNoQWZ0ZXIodCxpKTtmb3IodmFyIHM9aS5sZW5ndGgtMTtzPj0wO3MtLSl7ZShpW3NdLmV2ZW50KX19cmV0dXJuIHRoaXN9LHMuZGVmYXVsdC5JbnRlcnZhbFRpbWVsaW5lLnByb3RvdHlwZS5kaXNwb3NlPWZ1bmN0aW9uKCl7dmFyIHQ9W107bnVsbCE9PXRoaXMuX3Jvb3QmJnRoaXMuX3Jvb3QudHJhdmVyc2UoZnVuY3Rpb24oZSl7dC5wdXNoKGUpfSk7Zm9yKHZhciBlPTA7ZTx0Lmxlbmd0aDtlKyspdFtlXS5kaXNwb3NlKCk7cmV0dXJuIHQ9bnVsbCx0aGlzLl9yb290PW51bGwsdGhpc307dmFyIG49ZnVuY3Rpb24odCxlLGkpe3RoaXMuZXZlbnQ9aSx0aGlzLmxvdz10LHRoaXMuaGlnaD1lLHRoaXMubWF4PXRoaXMuaGlnaCx0aGlzLl9sZWZ0PW51bGwsdGhpcy5fcmlnaHQ9bnVsbCx0aGlzLnBhcmVudD1udWxsLHRoaXMuaGVpZ2h0PTB9O24ucHJvdG90eXBlLmluc2VydD1mdW5jdGlvbih0KXt0Lmxvdzw9dGhpcy5sb3c/bnVsbD09PXRoaXMubGVmdD90aGlzLmxlZnQ9dDp0aGlzLmxlZnQuaW5zZXJ0KHQpOm51bGw9PT10aGlzLnJpZ2h0P3RoaXMucmlnaHQ9dDp0aGlzLnJpZ2h0Lmluc2VydCh0KX0sbi5wcm90b3R5cGUuc2VhcmNoPWZ1bmN0aW9uKHQsZSl7dD50aGlzLm1heHx8KG51bGwhPT10aGlzLmxlZnQmJnRoaXMubGVmdC5zZWFyY2godCxlKSx0aGlzLmxvdzw9dCYmdGhpcy5oaWdoPnQmJmUucHVzaCh0aGlzKSx0aGlzLmxvdz50fHxudWxsIT09dGhpcy5yaWdodCYmdGhpcy5yaWdodC5zZWFyY2godCxlKSl9LG4ucHJvdG90eXBlLnNlYXJjaEFmdGVyPWZ1bmN0aW9uKHQsZSl7dGhpcy5sb3c+PXQmJihlLnB1c2godGhpcyksbnVsbCE9PXRoaXMubGVmdCYmdGhpcy5sZWZ0LnNlYXJjaEFmdGVyKHQsZSkpLG51bGwhPT10aGlzLnJpZ2h0JiZ0aGlzLnJpZ2h0LnNlYXJjaEFmdGVyKHQsZSl9LG4ucHJvdG90eXBlLnRyYXZlcnNlPWZ1bmN0aW9uKHQpe3QodGhpcyksbnVsbCE9PXRoaXMubGVmdCYmdGhpcy5sZWZ0LnRyYXZlcnNlKHQpLG51bGwhPT10aGlzLnJpZ2h0JiZ0aGlzLnJpZ2h0LnRyYXZlcnNlKHQpfSxuLnByb3RvdHlwZS51cGRhdGVIZWlnaHQ9ZnVuY3Rpb24oKXtudWxsIT09dGhpcy5sZWZ0JiZudWxsIT09dGhpcy5yaWdodD90aGlzLmhlaWdodD1NYXRoLm1heCh0aGlzLmxlZnQuaGVpZ2h0LHRoaXMucmlnaHQuaGVpZ2h0KSsxOm51bGwhPT10aGlzLnJpZ2h0P3RoaXMuaGVpZ2h0PXRoaXMucmlnaHQuaGVpZ2h0KzE6bnVsbCE9PXRoaXMubGVmdD90aGlzLmhlaWdodD10aGlzLmxlZnQuaGVpZ2h0KzE6dGhpcy5oZWlnaHQ9MH0sbi5wcm90b3R5cGUudXBkYXRlTWF4PWZ1bmN0aW9uKCl7dGhpcy5tYXg9dGhpcy5oaWdoLG51bGwhPT10aGlzLmxlZnQmJih0aGlzLm1heD1NYXRoLm1heCh0aGlzLm1heCx0aGlzLmxlZnQubWF4KSksbnVsbCE9PXRoaXMucmlnaHQmJih0aGlzLm1heD1NYXRoLm1heCh0aGlzLm1heCx0aGlzLnJpZ2h0Lm1heCkpfSxuLnByb3RvdHlwZS5nZXRCYWxhbmNlPWZ1bmN0aW9uKCl7dmFyIHQ9MDtyZXR1cm4gbnVsbCE9PXRoaXMubGVmdCYmbnVsbCE9PXRoaXMucmlnaHQ/dD10aGlzLmxlZnQuaGVpZ2h0LXRoaXMucmlnaHQuaGVpZ2h0Om51bGwhPT10aGlzLmxlZnQ/dD10aGlzLmxlZnQuaGVpZ2h0KzE6bnVsbCE9PXRoaXMucmlnaHQmJih0PS0odGhpcy5yaWdodC5oZWlnaHQrMSkpLHR9LG4ucHJvdG90eXBlLmlzTGVmdENoaWxkPWZ1bmN0aW9uKCl7cmV0dXJuIG51bGwhPT10aGlzLnBhcmVudCYmdGhpcy5wYXJlbnQubGVmdD09PXRoaXN9LE9iamVjdC5kZWZpbmVQcm9wZXJ0eShuLnByb3RvdHlwZSxcImxlZnRcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2xlZnR9LHNldDpmdW5jdGlvbih0KXt0aGlzLl9sZWZ0PXQsbnVsbCE9PXQmJih0LnBhcmVudD10aGlzKSx0aGlzLnVwZGF0ZUhlaWdodCgpLHRoaXMudXBkYXRlTWF4KCl9fSksT2JqZWN0LmRlZmluZVByb3BlcnR5KG4ucHJvdG90eXBlLFwicmlnaHRcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3JpZ2h0fSxzZXQ6ZnVuY3Rpb24odCl7dGhpcy5fcmlnaHQ9dCxudWxsIT09dCYmKHQucGFyZW50PXRoaXMpLHRoaXMudXBkYXRlSGVpZ2h0KCksdGhpcy51cGRhdGVNYXgoKX19KSxuLnByb3RvdHlwZS5kaXNwb3NlPWZ1bmN0aW9uKCl7dGhpcy5wYXJlbnQ9bnVsbCx0aGlzLl9sZWZ0PW51bGwsdGhpcy5fcmlnaHQ9bnVsbCx0aGlzLmV2ZW50PW51bGx9LGUuZGVmYXVsdD1zLmRlZmF1bHQuSW50ZXJ2YWxUaW1lbGluZX0sZnVuY3Rpb24odCxlLGkpe1widXNlIHN0cmljdFwiO2kucihlKTt2YXIgcz1pKDApO2koMik7ZnVuY3Rpb24gbih0KXtyZXR1cm4gZnVuY3Rpb24oZSxpKXtpPXRoaXMudG9TZWNvbmRzKGkpLHQuYXBwbHkodGhpcyxhcmd1bWVudHMpO3ZhciBzPXRoaXMuX2V2ZW50cy5nZXQoaSksbj10aGlzLl9ldmVudHMucHJldmlvdXNFdmVudChzKSxvPXRoaXMuX2dldFRpY2tzVW50aWxFdmVudChuLGkpO3JldHVybiBzLnRpY2tzPU1hdGgubWF4KG8sMCksdGhpc319cy5kZWZhdWx0LlRpY2tTaWduYWw9ZnVuY3Rpb24odCl7dD1zLmRlZmF1bHQuZGVmYXVsdEFyZyh0LDEpLHMuZGVmYXVsdC5TaWduYWwuY2FsbCh0aGlzLHt1bml0czpzLmRlZmF1bHQuVHlwZS5UaWNrcyx2YWx1ZTp0fSksdGhpcy5fZXZlbnRzLm1lbW9yeT0xLzAsdGhpcy5jYW5jZWxTY2hlZHVsZWRWYWx1ZXMoMCksdGhpcy5fZXZlbnRzLmFkZCh7dHlwZTpzLmRlZmF1bHQuUGFyYW0uQXV0b21hdGlvblR5cGUuU2V0VmFsdWUsdGltZTowLHZhbHVlOnR9KX0scy5kZWZhdWx0LmV4dGVuZChzLmRlZmF1bHQuVGlja1NpZ25hbCxzLmRlZmF1bHQuU2lnbmFsKSxzLmRlZmF1bHQuVGlja1NpZ25hbC5wcm90b3R5cGUuc2V0VmFsdWVBdFRpbWU9bihzLmRlZmF1bHQuU2lnbmFsLnByb3RvdHlwZS5zZXRWYWx1ZUF0VGltZSkscy5kZWZhdWx0LlRpY2tTaWduYWwucHJvdG90eXBlLmxpbmVhclJhbXBUb1ZhbHVlQXRUaW1lPW4ocy5kZWZhdWx0LlNpZ25hbC5wcm90b3R5cGUubGluZWFyUmFtcFRvVmFsdWVBdFRpbWUpLHMuZGVmYXVsdC5UaWNrU2lnbmFsLnByb3RvdHlwZS5zZXRUYXJnZXRBdFRpbWU9ZnVuY3Rpb24odCxlLGkpe2U9dGhpcy50b1NlY29uZHMoZSksdGhpcy5zZXRSYW1wUG9pbnQoZSksdD10aGlzLl9mcm9tVW5pdHModCk7Zm9yKHZhciBzPXRoaXMuX2V2ZW50cy5nZXQoZSksbj1NYXRoLnJvdW5kKE1hdGgubWF4KDEvaSwxKSksbz0wO288PW47bysrKXt2YXIgYT1pKm8rZSxyPXRoaXMuX2V4cG9uZW50aWFsQXBwcm9hY2gocy50aW1lLHMudmFsdWUsdCxpLGEpO3RoaXMubGluZWFyUmFtcFRvVmFsdWVBdFRpbWUodGhpcy5fdG9Vbml0cyhyKSxhKX1yZXR1cm4gdGhpc30scy5kZWZhdWx0LlRpY2tTaWduYWwucHJvdG90eXBlLmV4cG9uZW50aWFsUmFtcFRvVmFsdWVBdFRpbWU9ZnVuY3Rpb24odCxlKXtlPXRoaXMudG9TZWNvbmRzKGUpLHQ9dGhpcy5fZnJvbVVuaXRzKHQpO2Zvcih2YXIgaT10aGlzLl9ldmVudHMuZ2V0KGUpLHM9TWF0aC5yb3VuZChNYXRoLm1heCgxMCooZS1pLnRpbWUpLDEpKSxuPShlLWkudGltZSkvcyxvPTA7bzw9cztvKyspe3ZhciBhPW4qbytpLnRpbWUscj10aGlzLl9leHBvbmVudGlhbEludGVycG9sYXRlKGkudGltZSxpLnZhbHVlLGUsdCxhKTt0aGlzLmxpbmVhclJhbXBUb1ZhbHVlQXRUaW1lKHRoaXMuX3RvVW5pdHMociksYSl9cmV0dXJuIHRoaXN9LHMuZGVmYXVsdC5UaWNrU2lnbmFsLnByb3RvdHlwZS5fZ2V0VGlja3NVbnRpbEV2ZW50PWZ1bmN0aW9uKHQsZSl7aWYobnVsbD09PXQpdD17dGlja3M6MCx0aW1lOjB9O2Vsc2UgaWYocy5kZWZhdWx0LmlzVW5kZWYodC50aWNrcykpe3ZhciBpPXRoaXMuX2V2ZW50cy5wcmV2aW91c0V2ZW50KHQpO3QudGlja3M9dGhpcy5fZ2V0VGlja3NVbnRpbEV2ZW50KGksdC50aW1lKX12YXIgbj10aGlzLmdldFZhbHVlQXRUaW1lKHQudGltZSksbz10aGlzLmdldFZhbHVlQXRUaW1lKGUpO3JldHVybiB0aGlzLl9ldmVudHMuZ2V0KGUpLnRpbWU9PT1lJiZ0aGlzLl9ldmVudHMuZ2V0KGUpLnR5cGU9PT1zLmRlZmF1bHQuUGFyYW0uQXV0b21hdGlvblR5cGUuU2V0VmFsdWUmJihvPXRoaXMuZ2V0VmFsdWVBdFRpbWUoZS10aGlzLnNhbXBsZVRpbWUpKSwuNSooZS10LnRpbWUpKihuK28pK3QudGlja3N9LHMuZGVmYXVsdC5UaWNrU2lnbmFsLnByb3RvdHlwZS5nZXRUaWNrc0F0VGltZT1mdW5jdGlvbih0KXt0PXRoaXMudG9TZWNvbmRzKHQpO3ZhciBlPXRoaXMuX2V2ZW50cy5nZXQodCk7cmV0dXJuIE1hdGgubWF4KHRoaXMuX2dldFRpY2tzVW50aWxFdmVudChlLHQpLDApfSxzLmRlZmF1bHQuVGlja1NpZ25hbC5wcm90b3R5cGUuZ2V0RHVyYXRpb25PZlRpY2tzPWZ1bmN0aW9uKHQsZSl7ZT10aGlzLnRvU2Vjb25kcyhlKTt2YXIgaT10aGlzLmdldFRpY2tzQXRUaW1lKGUpO3JldHVybiB0aGlzLmdldFRpbWVPZlRpY2soaSt0KS1lfSxzLmRlZmF1bHQuVGlja1NpZ25hbC5wcm90b3R5cGUuZ2V0VGltZU9mVGljaz1mdW5jdGlvbih0KXt2YXIgZT10aGlzLl9ldmVudHMuZ2V0KHQsXCJ0aWNrc1wiKSxpPXRoaXMuX2V2ZW50cy5nZXRBZnRlcih0LFwidGlja3NcIik7aWYoZSYmZS50aWNrcz09PXQpcmV0dXJuIGUudGltZTtpZihlJiZpJiZpLnR5cGU9PT1zLmRlZmF1bHQuUGFyYW0uQXV0b21hdGlvblR5cGUuTGluZWFyJiZlLnZhbHVlIT09aS52YWx1ZSl7dmFyIG49dGhpcy5nZXRWYWx1ZUF0VGltZShlLnRpbWUpLG89KHRoaXMuZ2V0VmFsdWVBdFRpbWUoaS50aW1lKS1uKS8oaS50aW1lLWUudGltZSksYT1NYXRoLnNxcnQoTWF0aC5wb3cobiwyKS0yKm8qKGUudGlja3MtdCkpLHI9KC1uK2EpL287cmV0dXJuKHI+MD9yOigtbi1hKS9vKStlLnRpbWV9cmV0dXJuIGU/MD09PWUudmFsdWU/MS8wOmUudGltZSsodC1lLnRpY2tzKS9lLnZhbHVlOnQvdGhpcy5faW5pdGlhbFZhbHVlfSxzLmRlZmF1bHQuVGlja1NpZ25hbC5wcm90b3R5cGUudGlja3NUb1RpbWU9ZnVuY3Rpb24odCxlKXtyZXR1cm4gZT10aGlzLnRvU2Vjb25kcyhlKSxuZXcgcy5kZWZhdWx0LlRpbWUodGhpcy5nZXREdXJhdGlvbk9mVGlja3ModCxlKSl9LHMuZGVmYXVsdC5UaWNrU2lnbmFsLnByb3RvdHlwZS50aW1lVG9UaWNrcz1mdW5jdGlvbih0LGUpe2U9dGhpcy50b1NlY29uZHMoZSksdD10aGlzLnRvU2Vjb25kcyh0KTt2YXIgaT10aGlzLmdldFRpY2tzQXRUaW1lKGUpLG49dGhpcy5nZXRUaWNrc0F0VGltZShlK3QpO3JldHVybiBuZXcgcy5kZWZhdWx0LlRpY2tzKG4taSl9LGUuZGVmYXVsdD1zLmRlZmF1bHQuVGlja1NpZ25hbH0sZnVuY3Rpb24odCxlLGkpe1widXNlIHN0cmljdFwiO2kucihlKTt2YXIgcz1pKDApO2koNTcpLGkoMzQpLGkoMzUpLGkoMjApO3MuZGVmYXVsdC5DbG9jaz1mdW5jdGlvbigpe3ZhciB0PXMuZGVmYXVsdC5kZWZhdWx0cyhhcmd1bWVudHMsW1wiY2FsbGJhY2tcIixcImZyZXF1ZW5jeVwiXSxzLmRlZmF1bHQuQ2xvY2spO3MuZGVmYXVsdC5FbWl0dGVyLmNhbGwodGhpcyksdGhpcy5jYWxsYmFjaz10LmNhbGxiYWNrLHRoaXMuX25leHRUaWNrPTAsdGhpcy5fdGlja1NvdXJjZT1uZXcgcy5kZWZhdWx0LlRpY2tTb3VyY2UodC5mcmVxdWVuY3kpLHRoaXMuX2xhc3RVcGRhdGU9MCx0aGlzLmZyZXF1ZW5jeT10aGlzLl90aWNrU291cmNlLmZyZXF1ZW5jeSx0aGlzLl9yZWFkT25seShcImZyZXF1ZW5jeVwiKSx0aGlzLl9zdGF0ZT1uZXcgcy5kZWZhdWx0LlRpbWVsaW5lU3RhdGUocy5kZWZhdWx0LlN0YXRlLlN0b3BwZWQpLHRoaXMuX3N0YXRlLnNldFN0YXRlQXRUaW1lKHMuZGVmYXVsdC5TdGF0ZS5TdG9wcGVkLDApLHRoaXMuX2JvdW5kTG9vcD10aGlzLl9sb29wLmJpbmQodGhpcyksdGhpcy5jb250ZXh0Lm9uKFwidGlja1wiLHRoaXMuX2JvdW5kTG9vcCl9LHMuZGVmYXVsdC5leHRlbmQocy5kZWZhdWx0LkNsb2NrLHMuZGVmYXVsdC5FbWl0dGVyKSxzLmRlZmF1bHQuQ2xvY2suZGVmYXVsdHM9e2NhbGxiYWNrOnMuZGVmYXVsdC5ub09wLGZyZXF1ZW5jeToxfSxPYmplY3QuZGVmaW5lUHJvcGVydHkocy5kZWZhdWx0LkNsb2NrLnByb3RvdHlwZSxcInN0YXRlXCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9zdGF0ZS5nZXRWYWx1ZUF0VGltZSh0aGlzLm5vdygpKX19KSxzLmRlZmF1bHQuQ2xvY2sucHJvdG90eXBlLnN0YXJ0PWZ1bmN0aW9uKHQsZSl7cmV0dXJuIHRoaXMuY29udGV4dC5yZXN1bWUoKSx0PXRoaXMudG9TZWNvbmRzKHQpLHRoaXMuX3N0YXRlLmdldFZhbHVlQXRUaW1lKHQpIT09cy5kZWZhdWx0LlN0YXRlLlN0YXJ0ZWQmJih0aGlzLl9zdGF0ZS5zZXRTdGF0ZUF0VGltZShzLmRlZmF1bHQuU3RhdGUuU3RhcnRlZCx0KSx0aGlzLl90aWNrU291cmNlLnN0YXJ0KHQsZSksdDx0aGlzLl9sYXN0VXBkYXRlJiZ0aGlzLmVtaXQoXCJzdGFydFwiLHQsZSkpLHRoaXN9LHMuZGVmYXVsdC5DbG9jay5wcm90b3R5cGUuc3RvcD1mdW5jdGlvbih0KXtyZXR1cm4gdD10aGlzLnRvU2Vjb25kcyh0KSx0aGlzLl9zdGF0ZS5jYW5jZWwodCksdGhpcy5fc3RhdGUuc2V0U3RhdGVBdFRpbWUocy5kZWZhdWx0LlN0YXRlLlN0b3BwZWQsdCksdGhpcy5fdGlja1NvdXJjZS5zdG9wKHQpLHQ8dGhpcy5fbGFzdFVwZGF0ZSYmdGhpcy5lbWl0KFwic3RvcFwiLHQpLHRoaXN9LHMuZGVmYXVsdC5DbG9jay5wcm90b3R5cGUucGF1c2U9ZnVuY3Rpb24odCl7cmV0dXJuIHQ9dGhpcy50b1NlY29uZHModCksdGhpcy5fc3RhdGUuZ2V0VmFsdWVBdFRpbWUodCk9PT1zLmRlZmF1bHQuU3RhdGUuU3RhcnRlZCYmKHRoaXMuX3N0YXRlLnNldFN0YXRlQXRUaW1lKHMuZGVmYXVsdC5TdGF0ZS5QYXVzZWQsdCksdGhpcy5fdGlja1NvdXJjZS5wYXVzZSh0KSx0PHRoaXMuX2xhc3RVcGRhdGUmJnRoaXMuZW1pdChcInBhdXNlXCIsdCkpLHRoaXN9LE9iamVjdC5kZWZpbmVQcm9wZXJ0eShzLmRlZmF1bHQuQ2xvY2sucHJvdG90eXBlLFwidGlja3NcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIE1hdGguY2VpbCh0aGlzLmdldFRpY2tzQXRUaW1lKHRoaXMubm93KCkpKX0sc2V0OmZ1bmN0aW9uKHQpe3RoaXMuX3RpY2tTb3VyY2UudGlja3M9dH19KSxPYmplY3QuZGVmaW5lUHJvcGVydHkocy5kZWZhdWx0LkNsb2NrLnByb3RvdHlwZSxcInNlY29uZHNcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3RpY2tTb3VyY2Uuc2Vjb25kc30sc2V0OmZ1bmN0aW9uKHQpe3RoaXMuX3RpY2tTb3VyY2Uuc2Vjb25kcz10fX0pLHMuZGVmYXVsdC5DbG9jay5wcm90b3R5cGUuZ2V0U2Vjb25kc0F0VGltZT1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5fdGlja1NvdXJjZS5nZXRTZWNvbmRzQXRUaW1lKHQpfSxzLmRlZmF1bHQuQ2xvY2sucHJvdG90eXBlLnNldFRpY2tzQXRUaW1lPWZ1bmN0aW9uKHQsZSl7cmV0dXJuIHRoaXMuX3RpY2tTb3VyY2Uuc2V0VGlja3NBdFRpbWUodCxlKSx0aGlzfSxzLmRlZmF1bHQuQ2xvY2sucHJvdG90eXBlLmdldFRpY2tzQXRUaW1lPWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLl90aWNrU291cmNlLmdldFRpY2tzQXRUaW1lKHQpfSxzLmRlZmF1bHQuQ2xvY2sucHJvdG90eXBlLm5leHRUaWNrVGltZT1mdW5jdGlvbih0LGUpe2U9dGhpcy50b1NlY29uZHMoZSk7dmFyIGk9dGhpcy5nZXRUaWNrc0F0VGltZShlKTtyZXR1cm4gdGhpcy5fdGlja1NvdXJjZS5nZXRUaW1lT2ZUaWNrKGkrdCxlKX0scy5kZWZhdWx0LkNsb2NrLnByb3RvdHlwZS5fbG9vcD1mdW5jdGlvbigpe3ZhciB0PXRoaXMuX2xhc3RVcGRhdGUsZT10aGlzLm5vdygpO3RoaXMuX2xhc3RVcGRhdGU9ZSx0IT09ZSYmKHRoaXMuX3N0YXRlLmZvckVhY2hCZXR3ZWVuKHQsZSxmdW5jdGlvbih0KXtzd2l0Y2godC5zdGF0ZSl7Y2FzZSBzLmRlZmF1bHQuU3RhdGUuU3RhcnRlZDp2YXIgZT10aGlzLl90aWNrU291cmNlLmdldFRpY2tzQXRUaW1lKHQudGltZSk7dGhpcy5lbWl0KFwic3RhcnRcIix0LnRpbWUsZSk7YnJlYWs7Y2FzZSBzLmRlZmF1bHQuU3RhdGUuU3RvcHBlZDowIT09dC50aW1lJiZ0aGlzLmVtaXQoXCJzdG9wXCIsdC50aW1lKTticmVhaztjYXNlIHMuZGVmYXVsdC5TdGF0ZS5QYXVzZWQ6dGhpcy5lbWl0KFwicGF1c2VcIix0LnRpbWUpfX0uYmluZCh0aGlzKSksdGhpcy5fdGlja1NvdXJjZS5mb3JFYWNoVGlja0JldHdlZW4odCxlLGZ1bmN0aW9uKHQsZSl7dGhpcy5jYWxsYmFjayh0LGUpfS5iaW5kKHRoaXMpKSl9LHMuZGVmYXVsdC5DbG9jay5wcm90b3R5cGUuZ2V0U3RhdGVBdFRpbWU9ZnVuY3Rpb24odCl7cmV0dXJuIHQ9dGhpcy50b1NlY29uZHModCksdGhpcy5fc3RhdGUuZ2V0VmFsdWVBdFRpbWUodCl9LHMuZGVmYXVsdC5DbG9jay5wcm90b3R5cGUuZGlzcG9zZT1mdW5jdGlvbigpe3MuZGVmYXVsdC5FbWl0dGVyLnByb3RvdHlwZS5kaXNwb3NlLmNhbGwodGhpcyksdGhpcy5jb250ZXh0Lm9mZihcInRpY2tcIix0aGlzLl9ib3VuZExvb3ApLHRoaXMuX3dyaXRhYmxlKFwiZnJlcXVlbmN5XCIpLHRoaXMuX3RpY2tTb3VyY2UuZGlzcG9zZSgpLHRoaXMuX3RpY2tTb3VyY2U9bnVsbCx0aGlzLmZyZXF1ZW5jeT1udWxsLHRoaXMuX2JvdW5kTG9vcD1udWxsLHRoaXMuX25leHRUaWNrPTEvMCx0aGlzLmNhbGxiYWNrPW51bGwsdGhpcy5fc3RhdGUuZGlzcG9zZSgpLHRoaXMuX3N0YXRlPW51bGx9LGUuZGVmYXVsdD1zLmRlZmF1bHQuQ2xvY2t9LGZ1bmN0aW9uKHQsZSxpKXtcInVzZSBzdHJpY3RcIjtpLnIoZSk7dmFyIHM9aSgwKTtpKDIpLGkoNSksaSg3KTtzLmRlZmF1bHQuR3JlYXRlclRoYW5aZXJvPWZ1bmN0aW9uKCl7cy5kZWZhdWx0LlNpZ25hbEJhc2UuY2FsbCh0aGlzKSx0aGlzLl90aHJlc2g9dGhpcy5vdXRwdXQ9bmV3IHMuZGVmYXVsdC5XYXZlU2hhcGVyKGZ1bmN0aW9uKHQpe3JldHVybiB0PD0wPzA6MX0sMTI3KSx0aGlzLl9zY2FsZT10aGlzLmlucHV0PW5ldyBzLmRlZmF1bHQuTXVsdGlwbHkoMWU0KSx0aGlzLl9zY2FsZS5jb25uZWN0KHRoaXMuX3RocmVzaCl9LHMuZGVmYXVsdC5leHRlbmQocy5kZWZhdWx0LkdyZWF0ZXJUaGFuWmVybyxzLmRlZmF1bHQuU2lnbmFsQmFzZSkscy5kZWZhdWx0LkdyZWF0ZXJUaGFuWmVyby5wcm90b3R5cGUuZGlzcG9zZT1mdW5jdGlvbigpe3JldHVybiBzLmRlZmF1bHQuU2lnbmFsQmFzZS5wcm90b3R5cGUuZGlzcG9zZS5jYWxsKHRoaXMpLHRoaXMuX3NjYWxlLmRpc3Bvc2UoKSx0aGlzLl9zY2FsZT1udWxsLHRoaXMuX3RocmVzaC5kaXNwb3NlKCksdGhpcy5fdGhyZXNoPW51bGwsdGhpc30sZS5kZWZhdWx0PXMuZGVmYXVsdC5HcmVhdGVyVGhhblplcm99LGZ1bmN0aW9uKHQsZSxpKXtcInVzZSBzdHJpY3RcIjtpLnIoZSk7dmFyIHM9aSgwKTtpKDg0KSxpKDEzKSxpKDIpO3MuZGVmYXVsdC5HcmVhdGVyVGhhbj1mdW5jdGlvbih0KXtzLmRlZmF1bHQuU2lnbmFsLmNhbGwodGhpcyksdGhpcy5jcmVhdGVJbnNPdXRzKDIsMCksdGhpcy5fcGFyYW09dGhpcy5pbnB1dFswXT1uZXcgcy5kZWZhdWx0LlN1YnRyYWN0KHQpLHRoaXMuaW5wdXRbMV09dGhpcy5fcGFyYW0uaW5wdXRbMV0sdGhpcy5fZ3R6PXRoaXMub3V0cHV0PW5ldyBzLmRlZmF1bHQuR3JlYXRlclRoYW5aZXJvLHRoaXMuX3BhcmFtLmNvbm5lY3QodGhpcy5fZ3R6KX0scy5kZWZhdWx0LmV4dGVuZChzLmRlZmF1bHQuR3JlYXRlclRoYW4scy5kZWZhdWx0LlNpZ25hbCkscy5kZWZhdWx0LkdyZWF0ZXJUaGFuLnByb3RvdHlwZS5kaXNwb3NlPWZ1bmN0aW9uKCl7cmV0dXJuIHMuZGVmYXVsdC5TaWduYWwucHJvdG90eXBlLmRpc3Bvc2UuY2FsbCh0aGlzKSx0aGlzLl9ndHouZGlzcG9zZSgpLHRoaXMuX2d0ej1udWxsLHRoaXN9LGUuZGVmYXVsdD1zLmRlZmF1bHQuR3JlYXRlclRoYW59LGZ1bmN0aW9uKHQsZSxpKXtcInVzZSBzdHJpY3RcIjtpLnIoZSk7dmFyIHM9aSgwKTtpKDQ3KSxpKDI2KTtzLmRlZmF1bHQuU2NhbGVkRW52ZWxvcGU9ZnVuY3Rpb24oKXt2YXIgdD1zLmRlZmF1bHQuZGVmYXVsdHMoYXJndW1lbnRzLFtcImF0dGFja1wiLFwiZGVjYXlcIixcInN1c3RhaW5cIixcInJlbGVhc2VcIl0scy5kZWZhdWx0LkVudmVsb3BlKTtzLmRlZmF1bHQuRW52ZWxvcGUuY2FsbCh0aGlzLHQpLHQ9cy5kZWZhdWx0LmRlZmF1bHRBcmcodCxzLmRlZmF1bHQuU2NhbGVkRW52ZWxvcGUuZGVmYXVsdHMpLHRoaXMuX2V4cD10aGlzLm91dHB1dD1uZXcgcy5kZWZhdWx0LlBvdyh0LmV4cG9uZW50KSx0aGlzLl9zY2FsZT10aGlzLm91dHB1dD1uZXcgcy5kZWZhdWx0LlNjYWxlKHQubWluLHQubWF4KSx0aGlzLl9zaWcuY2hhaW4odGhpcy5fZXhwLHRoaXMuX3NjYWxlKX0scy5kZWZhdWx0LmV4dGVuZChzLmRlZmF1bHQuU2NhbGVkRW52ZWxvcGUscy5kZWZhdWx0LkVudmVsb3BlKSxzLmRlZmF1bHQuU2NhbGVkRW52ZWxvcGUuZGVmYXVsdHM9e21pbjowLG1heDoxLGV4cG9uZW50OjF9LE9iamVjdC5kZWZpbmVQcm9wZXJ0eShzLmRlZmF1bHQuU2NhbGVkRW52ZWxvcGUucHJvdG90eXBlLFwibWluXCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9zY2FsZS5taW59LHNldDpmdW5jdGlvbih0KXt0aGlzLl9zY2FsZS5taW49dH19KSxPYmplY3QuZGVmaW5lUHJvcGVydHkocy5kZWZhdWx0LlNjYWxlZEVudmVsb3BlLnByb3RvdHlwZSxcIm1heFwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fc2NhbGUubWF4fSxzZXQ6ZnVuY3Rpb24odCl7dGhpcy5fc2NhbGUubWF4PXR9fSksT2JqZWN0LmRlZmluZVByb3BlcnR5KHMuZGVmYXVsdC5TY2FsZWRFbnZlbG9wZS5wcm90b3R5cGUsXCJleHBvbmVudFwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fZXhwLnZhbHVlfSxzZXQ6ZnVuY3Rpb24odCl7dGhpcy5fZXhwLnZhbHVlPXR9fSkscy5kZWZhdWx0LlNjYWxlZEVudmVsb3BlLnByb3RvdHlwZS5kaXNwb3NlPWZ1bmN0aW9uKCl7cmV0dXJuIHMuZGVmYXVsdC5FbnZlbG9wZS5wcm90b3R5cGUuZGlzcG9zZS5jYWxsKHRoaXMpLHRoaXMuX3NjYWxlLmRpc3Bvc2UoKSx0aGlzLl9zY2FsZT1udWxsLHRoaXMuX2V4cC5kaXNwb3NlKCksdGhpcy5fZXhwPW51bGwsdGhpc30sZS5kZWZhdWx0PXMuZGVmYXVsdC5TY2FsZWRFbnZlbG9wZX0sZnVuY3Rpb24odCxlLGkpe1widXNlIHN0cmljdFwiO2kucihlKTt2YXIgcz1pKDApO2koNyksaSgzMCk7cy5kZWZhdWx0LkFicz1mdW5jdGlvbigpe3MuZGVmYXVsdC5TaWduYWxCYXNlLmNhbGwodGhpcyksdGhpcy5fYWJzPXRoaXMuaW5wdXQ9dGhpcy5vdXRwdXQ9bmV3IHMuZGVmYXVsdC5XYXZlU2hhcGVyKGZ1bmN0aW9uKHQpe3JldHVybiBNYXRoLmFicyh0KTwuMDAxPzA6TWF0aC5hYnModCl9LDEwMjQpfSxzLmRlZmF1bHQuZXh0ZW5kKHMuZGVmYXVsdC5BYnMscy5kZWZhdWx0LlNpZ25hbEJhc2UpLHMuZGVmYXVsdC5BYnMucHJvdG90eXBlLmRpc3Bvc2U9ZnVuY3Rpb24oKXtyZXR1cm4gcy5kZWZhdWx0LlNpZ25hbEJhc2UucHJvdG90eXBlLmRpc3Bvc2UuY2FsbCh0aGlzKSx0aGlzLl9hYnMuZGlzcG9zZSgpLHRoaXMuX2Ficz1udWxsLHRoaXN9LGUuZGVmYXVsdD1zLmRlZmF1bHQuQWJzfSxmdW5jdGlvbih0LGUsaSl7XCJ1c2Ugc3RyaWN0XCI7aS5yKGUpO3ZhciBzPWkoMCk7aSgzKSxpKDEpO3MuZGVmYXVsdC5Tb2xvPWZ1bmN0aW9uKCl7dmFyIHQ9cy5kZWZhdWx0LmRlZmF1bHRzKGFyZ3VtZW50cyxbXCJzb2xvXCJdLHMuZGVmYXVsdC5Tb2xvKTtzLmRlZmF1bHQuQXVkaW9Ob2RlLmNhbGwodGhpcyksdGhpcy5pbnB1dD10aGlzLm91dHB1dD1uZXcgcy5kZWZhdWx0LkdhaW4sdGhpcy5fc29sb0JpbmQ9dGhpcy5fc29sb2VkLmJpbmQodGhpcyksdGhpcy5jb250ZXh0Lm9uKFwic29sb1wiLHRoaXMuX3NvbG9CaW5kKSx0aGlzLnNvbG89dC5zb2xvfSxzLmRlZmF1bHQuZXh0ZW5kKHMuZGVmYXVsdC5Tb2xvLHMuZGVmYXVsdC5BdWRpb05vZGUpLHMuZGVmYXVsdC5Tb2xvLmRlZmF1bHRzPXtzb2xvOiExfSxPYmplY3QuZGVmaW5lUHJvcGVydHkocy5kZWZhdWx0LlNvbG8ucHJvdG90eXBlLFwic29sb1wiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5faXNTb2xvZWQoKX0sc2V0OmZ1bmN0aW9uKHQpe3Q/dGhpcy5fYWRkU29sbygpOnRoaXMuX3JlbW92ZVNvbG8oKSx0aGlzLmNvbnRleHQuZW1pdChcInNvbG9cIix0aGlzKX19KSxPYmplY3QuZGVmaW5lUHJvcGVydHkocy5kZWZhdWx0LlNvbG8ucHJvdG90eXBlLFwibXV0ZWRcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIDA9PT10aGlzLmlucHV0LmdhaW4udmFsdWV9fSkscy5kZWZhdWx0LlNvbG8ucHJvdG90eXBlLl9hZGRTb2xvPWZ1bmN0aW9uKCl7cy5kZWZhdWx0LmlzQXJyYXkodGhpcy5jb250ZXh0Ll9jdXJyZW50U29sbyl8fCh0aGlzLmNvbnRleHQuX2N1cnJlbnRTb2xvPVtdKSx0aGlzLl9pc1NvbG9lZCgpfHx0aGlzLmNvbnRleHQuX2N1cnJlbnRTb2xvLnB1c2godGhpcyl9LHMuZGVmYXVsdC5Tb2xvLnByb3RvdHlwZS5fcmVtb3ZlU29sbz1mdW5jdGlvbigpe2lmKHRoaXMuX2lzU29sb2VkKCkpe3ZhciB0PXRoaXMuY29udGV4dC5fY3VycmVudFNvbG8uaW5kZXhPZih0aGlzKTt0aGlzLmNvbnRleHQuX2N1cnJlbnRTb2xvLnNwbGljZSh0LDEpfX0scy5kZWZhdWx0LlNvbG8ucHJvdG90eXBlLl9pc1NvbG9lZD1mdW5jdGlvbigpe3JldHVybiEhcy5kZWZhdWx0LmlzQXJyYXkodGhpcy5jb250ZXh0Ll9jdXJyZW50U29sbykmJigwIT09dGhpcy5jb250ZXh0Ll9jdXJyZW50U29sby5sZW5ndGgmJi0xIT09dGhpcy5jb250ZXh0Ll9jdXJyZW50U29sby5pbmRleE9mKHRoaXMpKX0scy5kZWZhdWx0LlNvbG8ucHJvdG90eXBlLl9ub1NvbG9zPWZ1bmN0aW9uKCl7cmV0dXJuIXMuZGVmYXVsdC5pc0FycmF5KHRoaXMuY29udGV4dC5fY3VycmVudFNvbG8pfHwwPT09dGhpcy5jb250ZXh0Ll9jdXJyZW50U29sby5sZW5ndGh9LHMuZGVmYXVsdC5Tb2xvLnByb3RvdHlwZS5fc29sb2VkPWZ1bmN0aW9uKCl7dGhpcy5faXNTb2xvZWQoKT90aGlzLmlucHV0LmdhaW4udmFsdWU9MTp0aGlzLl9ub1NvbG9zKCk/dGhpcy5pbnB1dC5nYWluLnZhbHVlPTE6dGhpcy5pbnB1dC5nYWluLnZhbHVlPTB9LHMuZGVmYXVsdC5Tb2xvLnByb3RvdHlwZS5kaXNwb3NlPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuY29udGV4dC5vZmYoXCJzb2xvXCIsdGhpcy5fc29sb0JpbmQpLHRoaXMuX3JlbW92ZVNvbG8oKSx0aGlzLl9zb2xvQmluZD1udWxsLHMuZGVmYXVsdC5BdWRpb05vZGUucHJvdG90eXBlLmRpc3Bvc2UuY2FsbCh0aGlzKSx0aGlzfSxlLmRlZmF1bHQ9cy5kZWZhdWx0LlNvbG99LGZ1bmN0aW9uKHQsZSxpKXtcInVzZSBzdHJpY3RcIjtpLnIoZSk7dmFyIHM9aSgwKTtpKDcpO3MuZGVmYXVsdC5FcXVhbFBvd2VyR2Fpbj1mdW5jdGlvbigpe3MuZGVmYXVsdC5TaWduYWxCYXNlLmNhbGwodGhpcyksdGhpcy5fZXFQb3dlcj10aGlzLmlucHV0PXRoaXMub3V0cHV0PW5ldyBzLmRlZmF1bHQuV2F2ZVNoYXBlcihmdW5jdGlvbih0KXtyZXR1cm4gTWF0aC5hYnModCk8LjAwMT8wOnMuZGVmYXVsdC5lcXVhbFBvd2VyU2NhbGUodCl9LmJpbmQodGhpcyksNDA5Nil9LHMuZGVmYXVsdC5leHRlbmQocy5kZWZhdWx0LkVxdWFsUG93ZXJHYWluLHMuZGVmYXVsdC5TaWduYWxCYXNlKSxzLmRlZmF1bHQuRXF1YWxQb3dlckdhaW4ucHJvdG90eXBlLmRpc3Bvc2U9ZnVuY3Rpb24oKXtyZXR1cm4gcy5kZWZhdWx0LlNpZ25hbEJhc2UucHJvdG90eXBlLmRpc3Bvc2UuY2FsbCh0aGlzKSx0aGlzLl9lcVBvd2VyLmRpc3Bvc2UoKSx0aGlzLl9lcVBvd2VyPW51bGwsdGhpc30sZS5kZWZhdWx0PXMuZGVmYXVsdC5FcXVhbFBvd2VyR2Fpbn0sZnVuY3Rpb24odCxlLGkpe1widXNlIHN0cmljdFwiO2kucihlKTt2YXIgcz1pKDApO2koNSksaSgyKTtzLmRlZmF1bHQuTmVnYXRlPWZ1bmN0aW9uKCl7cy5kZWZhdWx0LlNpZ25hbEJhc2UuY2FsbCh0aGlzKSx0aGlzLl9tdWx0aXBseT10aGlzLmlucHV0PXRoaXMub3V0cHV0PW5ldyBzLmRlZmF1bHQuTXVsdGlwbHkoLTEpfSxzLmRlZmF1bHQuZXh0ZW5kKHMuZGVmYXVsdC5OZWdhdGUscy5kZWZhdWx0LlNpZ25hbEJhc2UpLHMuZGVmYXVsdC5OZWdhdGUucHJvdG90eXBlLmRpc3Bvc2U9ZnVuY3Rpb24oKXtyZXR1cm4gcy5kZWZhdWx0LlNpZ25hbEJhc2UucHJvdG90eXBlLmRpc3Bvc2UuY2FsbCh0aGlzKSx0aGlzLl9tdWx0aXBseS5kaXNwb3NlKCksdGhpcy5fbXVsdGlwbHk9bnVsbCx0aGlzfSxlLmRlZmF1bHQ9cy5kZWZhdWx0Lk5lZ2F0ZX0sZnVuY3Rpb24odCxlLGkpe1widXNlIHN0cmljdFwiO2kucihlKTt2YXIgcz1pKDApO2koNDgpLGkoMjcpLGkoMSk7cy5kZWZhdWx0LlBhblZvbD1mdW5jdGlvbigpe3ZhciB0PXMuZGVmYXVsdC5kZWZhdWx0cyhhcmd1bWVudHMsW1wicGFuXCIsXCJ2b2x1bWVcIl0scy5kZWZhdWx0LlBhblZvbCk7cy5kZWZhdWx0LkF1ZGlvTm9kZS5jYWxsKHRoaXMpLHRoaXMuX3Bhbm5lcj10aGlzLmlucHV0PW5ldyBzLmRlZmF1bHQuUGFubmVyKHQucGFuKSx0aGlzLnBhbj10aGlzLl9wYW5uZXIucGFuLHRoaXMuX3ZvbHVtZT10aGlzLm91dHB1dD1uZXcgcy5kZWZhdWx0LlZvbHVtZSh0LnZvbHVtZSksdGhpcy52b2x1bWU9dGhpcy5fdm9sdW1lLnZvbHVtZSx0aGlzLl9wYW5uZXIuY29ubmVjdCh0aGlzLl92b2x1bWUpLHRoaXMubXV0ZT10Lm11dGUsdGhpcy5fcmVhZE9ubHkoW1wicGFuXCIsXCJ2b2x1bWVcIl0pfSxzLmRlZmF1bHQuZXh0ZW5kKHMuZGVmYXVsdC5QYW5Wb2wscy5kZWZhdWx0LkF1ZGlvTm9kZSkscy5kZWZhdWx0LlBhblZvbC5kZWZhdWx0cz17cGFuOjAsdm9sdW1lOjAsbXV0ZTohMX0sT2JqZWN0LmRlZmluZVByb3BlcnR5KHMuZGVmYXVsdC5QYW5Wb2wucHJvdG90eXBlLFwibXV0ZVwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fdm9sdW1lLm11dGV9LHNldDpmdW5jdGlvbih0KXt0aGlzLl92b2x1bWUubXV0ZT10fX0pLHMuZGVmYXVsdC5QYW5Wb2wucHJvdG90eXBlLmRpc3Bvc2U9ZnVuY3Rpb24oKXtyZXR1cm4gcy5kZWZhdWx0LkF1ZGlvTm9kZS5wcm90b3R5cGUuZGlzcG9zZS5jYWxsKHRoaXMpLHRoaXMuX3dyaXRhYmxlKFtcInBhblwiLFwidm9sdW1lXCJdKSx0aGlzLl9wYW5uZXIuZGlzcG9zZSgpLHRoaXMuX3Bhbm5lcj1udWxsLHRoaXMucGFuPW51bGwsdGhpcy5fdm9sdW1lLmRpc3Bvc2UoKSx0aGlzLl92b2x1bWU9bnVsbCx0aGlzLnZvbHVtZT1udWxsLHRoaXN9LGUuZGVmYXVsdD1zLmRlZmF1bHQuUGFuVm9sfSxmdW5jdGlvbih0LGUsaSl7XCJ1c2Ugc3RyaWN0XCI7dmFyIHM9aSgwKTtpZihzLmRlZmF1bHQuc3VwcG9ydGVkKXshcy5kZWZhdWx0Lmdsb2JhbC5oYXNPd25Qcm9wZXJ0eShcIk9mZmxpbmVBdWRpb0NvbnRleHRcIikmJnMuZGVmYXVsdC5nbG9iYWwuaGFzT3duUHJvcGVydHkoXCJ3ZWJraXRPZmZsaW5lQXVkaW9Db250ZXh0XCIpJiYocy5kZWZhdWx0Lmdsb2JhbC5PZmZsaW5lQXVkaW9Db250ZXh0PXMuZGVmYXVsdC5nbG9iYWwud2Via2l0T2ZmbGluZUF1ZGlvQ29udGV4dCk7dmFyIG49bmV3IE9mZmxpbmVBdWRpb0NvbnRleHQoMSwxLDQ0MTAwKS5zdGFydFJlbmRlcmluZygpO24mJnMuZGVmYXVsdC5pc0Z1bmN0aW9uKG4udGhlbil8fChPZmZsaW5lQXVkaW9Db250ZXh0LnByb3RvdHlwZS5fbmF0aXZlX3N0YXJ0UmVuZGVyaW5nPU9mZmxpbmVBdWRpb0NvbnRleHQucHJvdG90eXBlLnN0YXJ0UmVuZGVyaW5nLE9mZmxpbmVBdWRpb0NvbnRleHQucHJvdG90eXBlLnN0YXJ0UmVuZGVyaW5nPWZ1bmN0aW9uKCl7cmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uKHQpe3RoaXMub25jb21wbGV0ZT1mdW5jdGlvbihlKXt0KGUucmVuZGVyZWRCdWZmZXIpfSx0aGlzLl9uYXRpdmVfc3RhcnRSZW5kZXJpbmcoKX0uYmluZCh0aGlzKSl9KX19LGZ1bmN0aW9uKHQsZSxpKXtcInVzZSBzdHJpY3RcIjtlLmE9XCIxMy44LjI1XCJ9LGZ1bmN0aW9uKHQsZSxpKXtcInVzZSBzdHJpY3RcIjtpLnIoZSk7dmFyIHM9aSgwKTtpKDQ2KTtzLmRlZmF1bHQuTWlkaT1mdW5jdGlvbih0LGUpe2lmKCEodGhpcyBpbnN0YW5jZW9mIHMuZGVmYXVsdC5NaWRpKSlyZXR1cm4gbmV3IHMuZGVmYXVsdC5NaWRpKHQsZSk7cy5kZWZhdWx0LkZyZXF1ZW5jeS5jYWxsKHRoaXMsdCxlKX0scy5kZWZhdWx0LmV4dGVuZChzLmRlZmF1bHQuTWlkaSxzLmRlZmF1bHQuRnJlcXVlbmN5KSxzLmRlZmF1bHQuTWlkaS5wcm90b3R5cGUuX2RlZmF1bHRVbml0cz1cIm1pZGlcIixzLmRlZmF1bHQuTWlkaS5wcm90b3R5cGUuX2ZyZXF1ZW5jeVRvVW5pdHM9ZnVuY3Rpb24odCl7cmV0dXJuIHMuZGVmYXVsdC5GcmVxdWVuY3kuZnRvbShzLmRlZmF1bHQuRnJlcXVlbmN5LnByb3RvdHlwZS5fZnJlcXVlbmN5VG9Vbml0cy5jYWxsKHRoaXMsdCkpfSxzLmRlZmF1bHQuTWlkaS5wcm90b3R5cGUuX3RpY2tzVG9Vbml0cz1mdW5jdGlvbih0KXtyZXR1cm4gcy5kZWZhdWx0LkZyZXF1ZW5jeS5mdG9tKHMuZGVmYXVsdC5GcmVxdWVuY3kucHJvdG90eXBlLl90aWNrc1RvVW5pdHMuY2FsbCh0aGlzLHQpKX0scy5kZWZhdWx0Lk1pZGkucHJvdG90eXBlLl9iZWF0c1RvVW5pdHM9ZnVuY3Rpb24odCl7cmV0dXJuIHMuZGVmYXVsdC5GcmVxdWVuY3kuZnRvbShzLmRlZmF1bHQuRnJlcXVlbmN5LnByb3RvdHlwZS5fYmVhdHNUb1VuaXRzLmNhbGwodGhpcyx0KSl9LHMuZGVmYXVsdC5NaWRpLnByb3RvdHlwZS5fc2Vjb25kc1RvVW5pdHM9ZnVuY3Rpb24odCl7cmV0dXJuIHMuZGVmYXVsdC5GcmVxdWVuY3kuZnRvbShzLmRlZmF1bHQuRnJlcXVlbmN5LnByb3RvdHlwZS5fc2Vjb25kc1RvVW5pdHMuY2FsbCh0aGlzLHQpKX0scy5kZWZhdWx0Lk1pZGkucHJvdG90eXBlLnRvTWlkaT1mdW5jdGlvbigpe3JldHVybiB0aGlzLnZhbHVlT2YoKX0scy5kZWZhdWx0Lk1pZGkucHJvdG90eXBlLnRvRnJlcXVlbmN5PWZ1bmN0aW9uKCl7cmV0dXJuIHMuZGVmYXVsdC5GcmVxdWVuY3kubXRvZih0aGlzLnRvTWlkaSgpKX0scy5kZWZhdWx0Lk1pZGkucHJvdG90eXBlLnRyYW5zcG9zZT1mdW5jdGlvbih0KXtyZXR1cm4gbmV3IHRoaXMuY29uc3RydWN0b3IodGhpcy50b01pZGkoKSt0KX0sZS5kZWZhdWx0PXMuZGVmYXVsdC5NaWRpfSxmdW5jdGlvbih0LGUsaSl7XCJ1c2Ugc3RyaWN0XCI7aS5yKGUpO3ZhciBzPWkoMCk7aSgyNyksaSgxKTtzLmRlZmF1bHQuVXNlck1lZGlhPWZ1bmN0aW9uKCl7dmFyIHQ9cy5kZWZhdWx0LmRlZmF1bHRzKGFyZ3VtZW50cyxbXCJ2b2x1bWVcIl0scy5kZWZhdWx0LlVzZXJNZWRpYSk7cy5kZWZhdWx0LkF1ZGlvTm9kZS5jYWxsKHRoaXMpLHRoaXMuX21lZGlhU3RyZWFtPW51bGwsdGhpcy5fc3RyZWFtPW51bGwsdGhpcy5fZGV2aWNlPW51bGwsdGhpcy5fdm9sdW1lPXRoaXMub3V0cHV0PW5ldyBzLmRlZmF1bHQuVm9sdW1lKHQudm9sdW1lKSx0aGlzLnZvbHVtZT10aGlzLl92b2x1bWUudm9sdW1lLHRoaXMuX3JlYWRPbmx5KFwidm9sdW1lXCIpLHRoaXMubXV0ZT10Lm11dGV9LHMuZGVmYXVsdC5leHRlbmQocy5kZWZhdWx0LlVzZXJNZWRpYSxzLmRlZmF1bHQuQXVkaW9Ob2RlKSxzLmRlZmF1bHQuVXNlck1lZGlhLmRlZmF1bHRzPXt2b2x1bWU6MCxtdXRlOiExfSxzLmRlZmF1bHQuVXNlck1lZGlhLnByb3RvdHlwZS5vcGVuPWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLnN0YXRlPT09cy5kZWZhdWx0LlN0YXRlLlN0YXJ0ZWQmJnRoaXMuY2xvc2UoKSxzLmRlZmF1bHQuVXNlck1lZGlhLmVudW1lcmF0ZURldmljZXMoKS50aGVuKGZ1bmN0aW9uKGUpe3ZhciBpO2lmKHMuZGVmYXVsdC5pc051bWJlcih0KSlpPWVbdF07ZWxzZSBpZighKGk9ZS5maW5kKGZ1bmN0aW9uKGUpe3JldHVybiBlLmxhYmVsPT09dHx8ZS5kZXZpY2VJZD09PXR9KSkmJmUubGVuZ3RoPjApaT1lWzBdO2Vsc2UgaWYoIWkmJnMuZGVmYXVsdC5pc0RlZmluZWQodCkpdGhyb3cgbmV3IEVycm9yKFwiVG9uZS5Vc2VyTWVkaWE6IG5vIG1hdGNoaW5nIGRldmljZTogXCIrdCk7dGhpcy5fZGV2aWNlPWk7dmFyIG49e2F1ZGlvOntlY2hvQ2FuY2VsbGF0aW9uOiExLHNhbXBsZVJhdGU6dGhpcy5jb250ZXh0LnNhbXBsZVJhdGUsbm9pc2VTdXBwcmVzc2lvbjohMSxtb3pOb2lzZVN1cHByZXNzaW9uOiExfX07cmV0dXJuIGkmJihuLmF1ZGlvLmRldmljZUlkPWkuZGV2aWNlSWQpLG5hdmlnYXRvci5tZWRpYURldmljZXMuZ2V0VXNlck1lZGlhKG4pLnRoZW4oZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuX3N0cmVhbXx8KHRoaXMuX3N0cmVhbT10LHRoaXMuX21lZGlhU3RyZWFtPXRoaXMuY29udGV4dC5jcmVhdGVNZWRpYVN0cmVhbVNvdXJjZSh0KSxzLmRlZmF1bHQuY29ubmVjdCh0aGlzLl9tZWRpYVN0cmVhbSx0aGlzLm91dHB1dCkpLHRoaXN9LmJpbmQodGhpcykpfS5iaW5kKHRoaXMpKX0scy5kZWZhdWx0LlVzZXJNZWRpYS5wcm90b3R5cGUuY2xvc2U9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fc3RyZWFtJiYodGhpcy5fc3RyZWFtLmdldEF1ZGlvVHJhY2tzKCkuZm9yRWFjaChmdW5jdGlvbih0KXt0LnN0b3AoKX0pLHRoaXMuX3N0cmVhbT1udWxsLHRoaXMuX21lZGlhU3RyZWFtLmRpc2Nvbm5lY3QoKSx0aGlzLl9tZWRpYVN0cmVhbT1udWxsKSx0aGlzLl9kZXZpY2U9bnVsbCx0aGlzfSxzLmRlZmF1bHQuVXNlck1lZGlhLmVudW1lcmF0ZURldmljZXM9ZnVuY3Rpb24oKXtyZXR1cm4gbmF2aWdhdG9yLm1lZGlhRGV2aWNlcy5lbnVtZXJhdGVEZXZpY2VzKCkudGhlbihmdW5jdGlvbih0KXtyZXR1cm4gdC5maWx0ZXIoZnVuY3Rpb24odCl7cmV0dXJuXCJhdWRpb2lucHV0XCI9PT10LmtpbmR9KX0pfSxPYmplY3QuZGVmaW5lUHJvcGVydHkocy5kZWZhdWx0LlVzZXJNZWRpYS5wcm90b3R5cGUsXCJzdGF0ZVwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fc3RyZWFtJiZ0aGlzLl9zdHJlYW0uYWN0aXZlP3MuZGVmYXVsdC5TdGF0ZS5TdGFydGVkOnMuZGVmYXVsdC5TdGF0ZS5TdG9wcGVkfX0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShzLmRlZmF1bHQuVXNlck1lZGlhLnByb3RvdHlwZSxcImRldmljZUlkXCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9kZXZpY2U/dGhpcy5fZGV2aWNlLmRldmljZUlkOm51bGx9fSksT2JqZWN0LmRlZmluZVByb3BlcnR5KHMuZGVmYXVsdC5Vc2VyTWVkaWEucHJvdG90eXBlLFwiZ3JvdXBJZFwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fZGV2aWNlP3RoaXMuX2RldmljZS5ncm91cElkOm51bGx9fSksT2JqZWN0LmRlZmluZVByb3BlcnR5KHMuZGVmYXVsdC5Vc2VyTWVkaWEucHJvdG90eXBlLFwibGFiZWxcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2RldmljZT90aGlzLl9kZXZpY2UubGFiZWw6bnVsbH19KSxPYmplY3QuZGVmaW5lUHJvcGVydHkocy5kZWZhdWx0LlVzZXJNZWRpYS5wcm90b3R5cGUsXCJtdXRlXCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl92b2x1bWUubXV0ZX0sc2V0OmZ1bmN0aW9uKHQpe3RoaXMuX3ZvbHVtZS5tdXRlPXR9fSkscy5kZWZhdWx0LlVzZXJNZWRpYS5wcm90b3R5cGUuZGlzcG9zZT1mdW5jdGlvbigpe3JldHVybiBzLmRlZmF1bHQuQXVkaW9Ob2RlLnByb3RvdHlwZS5kaXNwb3NlLmNhbGwodGhpcyksdGhpcy5jbG9zZSgpLHRoaXMuX3dyaXRhYmxlKFwidm9sdW1lXCIpLHRoaXMuX3ZvbHVtZS5kaXNwb3NlKCksdGhpcy5fdm9sdW1lPW51bGwsdGhpcy52b2x1bWU9bnVsbCx0aGlzfSxPYmplY3QuZGVmaW5lUHJvcGVydHkocy5kZWZhdWx0LlVzZXJNZWRpYSxcInN1cHBvcnRlZFwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gcy5kZWZhdWx0LmlzRGVmaW5lZChuYXZpZ2F0b3IubWVkaWFEZXZpY2VzKSYmcy5kZWZhdWx0LmlzRnVuY3Rpb24obmF2aWdhdG9yLm1lZGlhRGV2aWNlcy5nZXRVc2VyTWVkaWEpfX0pLGUuZGVmYXVsdD1zLmRlZmF1bHQuVXNlck1lZGlhfSxmdW5jdGlvbih0LGUsaSl7XCJ1c2Ugc3RyaWN0XCI7aS5yKGUpO3ZhciBzPWkoMCk7aSg2NSksaSgyNyksaSgxKTtzLmRlZmF1bHQuUGxheWVycz1mdW5jdGlvbih0KXt2YXIgZT1BcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChhcmd1bWVudHMpO2Uuc2hpZnQoKTt2YXIgaT1zLmRlZmF1bHQuZGVmYXVsdHMoZSxbXCJvbmxvYWRcIl0scy5kZWZhdWx0LlBsYXllcnMpO2Zvcih2YXIgbiBpbiBzLmRlZmF1bHQuQXVkaW9Ob2RlLmNhbGwodGhpcyxpKSx0aGlzLl92b2x1bWU9dGhpcy5vdXRwdXQ9bmV3IHMuZGVmYXVsdC5Wb2x1bWUoaS52b2x1bWUpLHRoaXMudm9sdW1lPXRoaXMuX3ZvbHVtZS52b2x1bWUsdGhpcy5fcmVhZE9ubHkoXCJ2b2x1bWVcIiksdGhpcy5fdm9sdW1lLm91dHB1dC5vdXRwdXQuY2hhbm5lbENvdW50PTIsdGhpcy5fdm9sdW1lLm91dHB1dC5vdXRwdXQuY2hhbm5lbENvdW50TW9kZT1cImV4cGxpY2l0XCIsdGhpcy5tdXRlPWkubXV0ZSx0aGlzLl9wbGF5ZXJzPXt9LHRoaXMuX2xvYWRpbmdDb3VudD0wLHRoaXMuX2ZhZGVJbj1pLmZhZGVJbix0aGlzLl9mYWRlT3V0PWkuZmFkZU91dCx0KXRoaXMuX2xvYWRpbmdDb3VudCsrLHRoaXMuYWRkKG4sdFtuXSx0aGlzLl9idWZmZXJMb2FkZWQuYmluZCh0aGlzLGkub25sb2FkKSl9LHMuZGVmYXVsdC5leHRlbmQocy5kZWZhdWx0LlBsYXllcnMscy5kZWZhdWx0LkF1ZGlvTm9kZSkscy5kZWZhdWx0LlBsYXllcnMuZGVmYXVsdHM9e3ZvbHVtZTowLG11dGU6ITEsb25sb2FkOnMuZGVmYXVsdC5ub09wLGZhZGVJbjowLGZhZGVPdXQ6MH0scy5kZWZhdWx0LlBsYXllcnMucHJvdG90eXBlLl9idWZmZXJMb2FkZWQ9ZnVuY3Rpb24odCl7dGhpcy5fbG9hZGluZ0NvdW50LS0sMD09PXRoaXMuX2xvYWRpbmdDb3VudCYmdCYmdCh0aGlzKX0sT2JqZWN0LmRlZmluZVByb3BlcnR5KHMuZGVmYXVsdC5QbGF5ZXJzLnByb3RvdHlwZSxcIm11dGVcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3ZvbHVtZS5tdXRlfSxzZXQ6ZnVuY3Rpb24odCl7dGhpcy5fdm9sdW1lLm11dGU9dH19KSxPYmplY3QuZGVmaW5lUHJvcGVydHkocy5kZWZhdWx0LlBsYXllcnMucHJvdG90eXBlLFwiZmFkZUluXCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9mYWRlSW59LHNldDpmdW5jdGlvbih0KXt0aGlzLl9mYWRlSW49dCx0aGlzLl9mb3JFYWNoKGZ1bmN0aW9uKGUpe2UuZmFkZUluPXR9KX19KSxPYmplY3QuZGVmaW5lUHJvcGVydHkocy5kZWZhdWx0LlBsYXllcnMucHJvdG90eXBlLFwiZmFkZU91dFwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fZmFkZU91dH0sc2V0OmZ1bmN0aW9uKHQpe3RoaXMuX2ZhZGVPdXQ9dCx0aGlzLl9mb3JFYWNoKGZ1bmN0aW9uKGUpe2UuZmFkZU91dD10fSl9fSksT2JqZWN0LmRlZmluZVByb3BlcnR5KHMuZGVmYXVsdC5QbGF5ZXJzLnByb3RvdHlwZSxcInN0YXRlXCIse2dldDpmdW5jdGlvbigpe3ZhciB0PSExO3JldHVybiB0aGlzLl9mb3JFYWNoKGZ1bmN0aW9uKGUpe3Q9dHx8ZS5zdGF0ZT09PXMuZGVmYXVsdC5TdGF0ZS5TdGFydGVkfSksdD9zLmRlZmF1bHQuU3RhdGUuU3RhcnRlZDpzLmRlZmF1bHQuU3RhdGUuU3RvcHBlZH19KSxzLmRlZmF1bHQuUGxheWVycy5wcm90b3R5cGUuaGFzPWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLl9wbGF5ZXJzLmhhc093blByb3BlcnR5KHQpfSxzLmRlZmF1bHQuUGxheWVycy5wcm90b3R5cGUuZ2V0PWZ1bmN0aW9uKHQpe2lmKHRoaXMuaGFzKHQpKXJldHVybiB0aGlzLl9wbGF5ZXJzW3RdO3Rocm93IG5ldyBFcnJvcihcIlRvbmUuUGxheWVyczogbm8gcGxheWVyIG5hbWVkIFwiK3QpfSxzLmRlZmF1bHQuUGxheWVycy5wcm90b3R5cGUuX2ZvckVhY2g9ZnVuY3Rpb24odCl7Zm9yKHZhciBlIGluIHRoaXMuX3BsYXllcnMpdCh0aGlzLl9wbGF5ZXJzW2VdLGUpO3JldHVybiB0aGlzfSxPYmplY3QuZGVmaW5lUHJvcGVydHkocy5kZWZhdWx0LlBsYXllcnMucHJvdG90eXBlLFwibG9hZGVkXCIse2dldDpmdW5jdGlvbigpe3ZhciB0PSEwO3JldHVybiB0aGlzLl9mb3JFYWNoKGZ1bmN0aW9uKGUpe3Q9dCYmZS5sb2FkZWR9KSx0fX0pLHMuZGVmYXVsdC5QbGF5ZXJzLnByb3RvdHlwZS5hZGQ9ZnVuY3Rpb24odCxlLGkpe3JldHVybiB0aGlzLl9wbGF5ZXJzW3RdPW5ldyBzLmRlZmF1bHQuUGxheWVyKGUsaSkuY29ubmVjdCh0aGlzLm91dHB1dCksdGhpcy5fcGxheWVyc1t0XS5mYWRlSW49dGhpcy5fZmFkZUluLHRoaXMuX3BsYXllcnNbdF0uZmFkZU91dD10aGlzLl9mYWRlT3V0LHRoaXN9LHMuZGVmYXVsdC5QbGF5ZXJzLnByb3RvdHlwZS5zdG9wQWxsPWZ1bmN0aW9uKHQpe3RoaXMuX2ZvckVhY2goZnVuY3Rpb24oZSl7ZS5zdG9wKHQpfSl9LHMuZGVmYXVsdC5QbGF5ZXJzLnByb3RvdHlwZS5kaXNwb3NlPWZ1bmN0aW9uKCl7cmV0dXJuIHMuZGVmYXVsdC5BdWRpb05vZGUucHJvdG90eXBlLmRpc3Bvc2UuY2FsbCh0aGlzKSx0aGlzLl92b2x1bWUuZGlzcG9zZSgpLHRoaXMuX3ZvbHVtZT1udWxsLHRoaXMuX3dyaXRhYmxlKFwidm9sdW1lXCIpLHRoaXMudm9sdW1lPW51bGwsdGhpcy5vdXRwdXQ9bnVsbCx0aGlzLl9mb3JFYWNoKGZ1bmN0aW9uKHQpe3QuZGlzcG9zZSgpfSksdGhpcy5fcGxheWVycz1udWxsLHRoaXN9LGUuZGVmYXVsdD1zLmRlZmF1bHQuUGxheWVyc30sZnVuY3Rpb24odCxlLGkpe1widXNlIHN0cmljdFwiO2kucihlKTt2YXIgcz1pKDApO2koNiksaSgxMSksaSgzMik7cy5kZWZhdWx0LkdyYWluUGxheWVyPWZ1bmN0aW9uKCl7dmFyIHQ9cy5kZWZhdWx0LmRlZmF1bHRzKGFyZ3VtZW50cyxbXCJ1cmxcIixcIm9ubG9hZFwiXSxzLmRlZmF1bHQuR3JhaW5QbGF5ZXIpO3MuZGVmYXVsdC5Tb3VyY2UuY2FsbCh0aGlzLHQpLHRoaXMuYnVmZmVyPW5ldyBzLmRlZmF1bHQuQnVmZmVyKHQudXJsLHQub25sb2FkLmJpbmQodm9pZCAwLHRoaXMpKSx0aGlzLl9jbG9jaz1uZXcgcy5kZWZhdWx0LkNsb2NrKHRoaXMuX3RpY2suYmluZCh0aGlzKSx0LmdyYWluU2l6ZSksdGhpcy5fbG9vcFN0YXJ0PTAsdGhpcy5fbG9vcEVuZD0wLHRoaXMuX2FjdGl2ZVNvdXJjZXM9W10sdGhpcy5fcGxheWJhY2tSYXRlPXQucGxheWJhY2tSYXRlLHRoaXMuX2dyYWluU2l6ZT10LmdyYWluU2l6ZSx0aGlzLl9vdmVybGFwPXQub3ZlcmxhcCx0aGlzLmRldHVuZT10LmRldHVuZSx0aGlzLm92ZXJsYXA9dC5vdmVybGFwLHRoaXMubG9vcD10Lmxvb3AsdGhpcy5wbGF5YmFja1JhdGU9dC5wbGF5YmFja1JhdGUsdGhpcy5ncmFpblNpemU9dC5ncmFpblNpemUsdGhpcy5sb29wU3RhcnQ9dC5sb29wU3RhcnQsdGhpcy5sb29wRW5kPXQubG9vcEVuZCx0aGlzLnJldmVyc2U9dC5yZXZlcnNlLHRoaXMuX2Nsb2NrLm9uKFwic3RvcFwiLHRoaXMuX29uc3RvcC5iaW5kKHRoaXMpKX0scy5kZWZhdWx0LmV4dGVuZChzLmRlZmF1bHQuR3JhaW5QbGF5ZXIscy5kZWZhdWx0LlNvdXJjZSkscy5kZWZhdWx0LkdyYWluUGxheWVyLmRlZmF1bHRzPXtvbmxvYWQ6cy5kZWZhdWx0Lm5vT3Asb3ZlcmxhcDouMSxncmFpblNpemU6LjIscGxheWJhY2tSYXRlOjEsZGV0dW5lOjAsbG9vcDohMSxsb29wU3RhcnQ6MCxsb29wRW5kOjAscmV2ZXJzZTohMX0scy5kZWZhdWx0LkdyYWluUGxheWVyLnByb3RvdHlwZS5fc3RhcnQ9ZnVuY3Rpb24odCxlLGkpe2U9cy5kZWZhdWx0LmRlZmF1bHRBcmcoZSwwKSxlPXRoaXMudG9TZWNvbmRzKGUpLHQ9dGhpcy50b1NlY29uZHModCksdGhpcy5fb2Zmc2V0PWUsdGhpcy5fY2xvY2suc3RhcnQodCksaSYmdGhpcy5zdG9wKHQrdGhpcy50b1NlY29uZHMoaSkpfSxzLmRlZmF1bHQuR3JhaW5QbGF5ZXIucHJvdG90eXBlLl9zdG9wPWZ1bmN0aW9uKHQpe3RoaXMuX2Nsb2NrLnN0b3AodCl9LHMuZGVmYXVsdC5HcmFpblBsYXllci5wcm90b3R5cGUuX29uc3RvcD1mdW5jdGlvbih0KXt0aGlzLl9hY3RpdmVTb3VyY2VzLmZvckVhY2goZnVuY3Rpb24oZSl7ZS5mYWRlT3V0PTAsZS5zdG9wKHQpfSl9LHMuZGVmYXVsdC5HcmFpblBsYXllci5wcm90b3R5cGUuX3RpY2s9ZnVuY3Rpb24odCl7aWYoIXRoaXMubG9vcCYmdGhpcy5fb2Zmc2V0PnRoaXMuYnVmZmVyLmR1cmF0aW9uKXRoaXMuc3RvcCh0KTtlbHNle3ZhciBlPXRoaXMuX29mZnNldDx0aGlzLl9vdmVybGFwPzA6dGhpcy5fb3ZlcmxhcCxpPW5ldyBzLmRlZmF1bHQuQnVmZmVyU291cmNlKHtidWZmZXI6dGhpcy5idWZmZXIsZmFkZUluOmUsZmFkZU91dDp0aGlzLl9vdmVybGFwLGxvb3A6dGhpcy5sb29wLGxvb3BTdGFydDp0aGlzLl9sb29wU3RhcnQsbG9vcEVuZDp0aGlzLl9sb29wRW5kLHBsYXliYWNrUmF0ZTpzLmRlZmF1bHQuaW50ZXJ2YWxUb0ZyZXF1ZW5jeVJhdGlvKHRoaXMuZGV0dW5lLzEwMCl9KS5jb25uZWN0KHRoaXMub3V0cHV0KTtpLnN0YXJ0KHQsdGhpcy5fb2Zmc2V0KSx0aGlzLl9vZmZzZXQrPXRoaXMuZ3JhaW5TaXplLGkuc3RvcCh0K3RoaXMuZ3JhaW5TaXplL3RoaXMucGxheWJhY2tSYXRlKSx0aGlzLl9hY3RpdmVTb3VyY2VzLnB1c2goaSksaS5vbmVuZGVkPWZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy5fYWN0aXZlU291cmNlcy5pbmRleE9mKGkpOy0xIT09dCYmdGhpcy5fYWN0aXZlU291cmNlcy5zcGxpY2UodCwxKX0uYmluZCh0aGlzKX19LE9iamVjdC5kZWZpbmVQcm9wZXJ0eShzLmRlZmF1bHQuR3JhaW5QbGF5ZXIucHJvdG90eXBlLFwicGxheWJhY2tSYXRlXCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9wbGF5YmFja1JhdGV9LHNldDpmdW5jdGlvbih0KXt0aGlzLl9wbGF5YmFja1JhdGU9dCx0aGlzLmdyYWluU2l6ZT10aGlzLl9ncmFpblNpemV9fSksT2JqZWN0LmRlZmluZVByb3BlcnR5KHMuZGVmYXVsdC5HcmFpblBsYXllci5wcm90b3R5cGUsXCJsb29wU3RhcnRcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2xvb3BTdGFydH0sc2V0OmZ1bmN0aW9uKHQpe3RoaXMuX2xvb3BTdGFydD10aGlzLnRvU2Vjb25kcyh0KX19KSxPYmplY3QuZGVmaW5lUHJvcGVydHkocy5kZWZhdWx0LkdyYWluUGxheWVyLnByb3RvdHlwZSxcImxvb3BFbmRcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2xvb3BFbmR9LHNldDpmdW5jdGlvbih0KXt0aGlzLl9sb29wRW5kPXRoaXMudG9TZWNvbmRzKHQpfX0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShzLmRlZmF1bHQuR3JhaW5QbGF5ZXIucHJvdG90eXBlLFwicmV2ZXJzZVwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5idWZmZXIucmV2ZXJzZX0sc2V0OmZ1bmN0aW9uKHQpe3RoaXMuYnVmZmVyLnJldmVyc2U9dH19KSxPYmplY3QuZGVmaW5lUHJvcGVydHkocy5kZWZhdWx0LkdyYWluUGxheWVyLnByb3RvdHlwZSxcImdyYWluU2l6ZVwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fZ3JhaW5TaXplfSxzZXQ6ZnVuY3Rpb24odCl7dGhpcy5fZ3JhaW5TaXplPXRoaXMudG9TZWNvbmRzKHQpLHRoaXMuX2Nsb2NrLmZyZXF1ZW5jeS52YWx1ZT10aGlzLl9wbGF5YmFja1JhdGUvdGhpcy5fZ3JhaW5TaXplfX0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShzLmRlZmF1bHQuR3JhaW5QbGF5ZXIucHJvdG90eXBlLFwib3ZlcmxhcFwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fb3ZlcmxhcH0sc2V0OmZ1bmN0aW9uKHQpe3RoaXMuX292ZXJsYXA9dGhpcy50b1NlY29uZHModCl9fSksT2JqZWN0LmRlZmluZVByb3BlcnR5KHMuZGVmYXVsdC5HcmFpblBsYXllci5wcm90b3R5cGUsXCJsb2FkZWRcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuYnVmZmVyLmxvYWRlZH19KSxzLmRlZmF1bHQuR3JhaW5QbGF5ZXIucHJvdG90eXBlLmRpc3Bvc2U9ZnVuY3Rpb24oKXtyZXR1cm4gcy5kZWZhdWx0LlNvdXJjZS5wcm90b3R5cGUuZGlzcG9zZS5jYWxsKHRoaXMpLHRoaXMuYnVmZmVyLmRpc3Bvc2UoKSx0aGlzLmJ1ZmZlcj1udWxsLHRoaXMuX2Nsb2NrLmRpc3Bvc2UoKSx0aGlzLl9jbG9jaz1udWxsLHRoaXMuX2FjdGl2ZVNvdXJjZXMuZm9yRWFjaChmdW5jdGlvbih0KXt0LmRpc3Bvc2UoKX0pLHRoaXMuX2FjdGl2ZVNvdXJjZXM9bnVsbCx0aGlzfSxlLmRlZmF1bHQ9cy5kZWZhdWx0LkdyYWluUGxheWVyfSxmdW5jdGlvbih0LGUsaSl7XCJ1c2Ugc3RyaWN0XCI7aS5yKGUpO3ZhciBzPWkoMCk7aSgxNiksaSgyKSxpKDQ1KTtzLmRlZmF1bHQuVHJhbnNwb3J0VGltZWxpbmVTaWduYWw9ZnVuY3Rpb24oKXtzLmRlZmF1bHQuU2lnbmFsLmFwcGx5KHRoaXMsYXJndW1lbnRzKSx0aGlzLm91dHB1dD10aGlzLl9vdXRwdXRTaWc9bmV3IHMuZGVmYXVsdC5TaWduYWwodGhpcy5faW5pdGlhbFZhbHVlKSx0aGlzLl9sYXN0VmFsPXRoaXMudmFsdWUsdGhpcy5fc3luY2VkPXMuZGVmYXVsdC5UcmFuc3BvcnQuc2NoZWR1bGVSZXBlYXQodGhpcy5fb25UaWNrLmJpbmQodGhpcyksXCIxaVwiKSx0aGlzLl9iaW5kQW5jaG9yVmFsdWU9dGhpcy5fYW5jaG9yVmFsdWUuYmluZCh0aGlzKSxzLmRlZmF1bHQuVHJhbnNwb3J0Lm9uKFwic3RhcnQgc3RvcCBwYXVzZVwiLHRoaXMuX2JpbmRBbmNob3JWYWx1ZSksdGhpcy5fZXZlbnRzLm1lbW9yeT0xLzB9LHMuZGVmYXVsdC5leHRlbmQocy5kZWZhdWx0LlRyYW5zcG9ydFRpbWVsaW5lU2lnbmFsLHMuZGVmYXVsdC5TaWduYWwpLHMuZGVmYXVsdC5UcmFuc3BvcnRUaW1lbGluZVNpZ25hbC5wcm90b3R5cGUuX29uVGljaz1mdW5jdGlvbih0KXt2YXIgZT10aGlzLmdldFZhbHVlQXRUaW1lKHMuZGVmYXVsdC5UcmFuc3BvcnQuc2Vjb25kcyk7dGhpcy5fbGFzdFZhbCE9PWUmJih0aGlzLl9sYXN0VmFsPWUsdGhpcy5fb3V0cHV0U2lnLmxpbmVhclJhbXBUb1ZhbHVlQXRUaW1lKGUsdCkpfSxzLmRlZmF1bHQuVHJhbnNwb3J0VGltZWxpbmVTaWduYWwucHJvdG90eXBlLl9hbmNob3JWYWx1ZT1mdW5jdGlvbih0KXt2YXIgZT10aGlzLmdldFZhbHVlQXRUaW1lKHMuZGVmYXVsdC5UcmFuc3BvcnQuc2Vjb25kcyk7cmV0dXJuIHRoaXMuX2xhc3RWYWw9ZSx0aGlzLl9vdXRwdXRTaWcuY2FuY2VsU2NoZWR1bGVkVmFsdWVzKHQpLHRoaXMuX291dHB1dFNpZy5zZXRWYWx1ZUF0VGltZShlLHQpLHRoaXN9LHMuZGVmYXVsdC5UcmFuc3BvcnRUaW1lbGluZVNpZ25hbC5wcm90b3R5cGUuZ2V0VmFsdWVBdFRpbWU9ZnVuY3Rpb24odCl7cmV0dXJuIHQ9cy5kZWZhdWx0LlRyYW5zcG9ydFRpbWUodCkscy5kZWZhdWx0LlNpZ25hbC5wcm90b3R5cGUuZ2V0VmFsdWVBdFRpbWUuY2FsbCh0aGlzLHQpfSxzLmRlZmF1bHQuVHJhbnNwb3J0VGltZWxpbmVTaWduYWwucHJvdG90eXBlLnNldFZhbHVlQXRUaW1lPWZ1bmN0aW9uKHQsZSl7cmV0dXJuIGU9cy5kZWZhdWx0LlRyYW5zcG9ydFRpbWUoZSkscy5kZWZhdWx0LlNpZ25hbC5wcm90b3R5cGUuc2V0VmFsdWVBdFRpbWUuY2FsbCh0aGlzLHQsZSksdGhpc30scy5kZWZhdWx0LlRyYW5zcG9ydFRpbWVsaW5lU2lnbmFsLnByb3RvdHlwZS5saW5lYXJSYW1wVG9WYWx1ZUF0VGltZT1mdW5jdGlvbih0LGUpe3JldHVybiBlPXMuZGVmYXVsdC5UcmFuc3BvcnRUaW1lKGUpLHMuZGVmYXVsdC5TaWduYWwucHJvdG90eXBlLmxpbmVhclJhbXBUb1ZhbHVlQXRUaW1lLmNhbGwodGhpcyx0LGUpLHRoaXN9LHMuZGVmYXVsdC5UcmFuc3BvcnRUaW1lbGluZVNpZ25hbC5wcm90b3R5cGUuZXhwb25lbnRpYWxSYW1wVG9WYWx1ZUF0VGltZT1mdW5jdGlvbih0LGUpe3JldHVybiBlPXMuZGVmYXVsdC5UcmFuc3BvcnRUaW1lKGUpLHMuZGVmYXVsdC5TaWduYWwucHJvdG90eXBlLmV4cG9uZW50aWFsUmFtcFRvVmFsdWVBdFRpbWUuY2FsbCh0aGlzLHQsZSksdGhpc30scy5kZWZhdWx0LlRyYW5zcG9ydFRpbWVsaW5lU2lnbmFsLnByb3RvdHlwZS5zZXRUYXJnZXRBdFRpbWU9ZnVuY3Rpb24odCxlLGkpe3JldHVybiBlPXMuZGVmYXVsdC5UcmFuc3BvcnRUaW1lKGUpLHMuZGVmYXVsdC5TaWduYWwucHJvdG90eXBlLnNldFRhcmdldEF0VGltZS5jYWxsKHRoaXMsdCxlLGkpLHRoaXN9LHMuZGVmYXVsdC5UcmFuc3BvcnRUaW1lbGluZVNpZ25hbC5wcm90b3R5cGUuY2FuY2VsU2NoZWR1bGVkVmFsdWVzPWZ1bmN0aW9uKHQpe3JldHVybiB0PXMuZGVmYXVsdC5UcmFuc3BvcnRUaW1lKHQpLHMuZGVmYXVsdC5TaWduYWwucHJvdG90eXBlLmNhbmNlbFNjaGVkdWxlZFZhbHVlcy5jYWxsKHRoaXMsdCksdGhpc30scy5kZWZhdWx0LlRyYW5zcG9ydFRpbWVsaW5lU2lnbmFsLnByb3RvdHlwZS5zZXRWYWx1ZUN1cnZlQXRUaW1lPWZ1bmN0aW9uKHQsZSxpLG4pe3JldHVybiBlPXMuZGVmYXVsdC5UcmFuc3BvcnRUaW1lKGUpLGk9cy5kZWZhdWx0LlRyYW5zcG9ydFRpbWUoaSkscy5kZWZhdWx0LlNpZ25hbC5wcm90b3R5cGUuc2V0VmFsdWVDdXJ2ZUF0VGltZS5jYWxsKHRoaXMsdCxlLGksbiksdGhpc30scy5kZWZhdWx0LlRyYW5zcG9ydFRpbWVsaW5lU2lnbmFsLnByb3RvdHlwZS5jYW5jZWxBbmRIb2xkQXRUaW1lPWZ1bmN0aW9uKHQpe3JldHVybiBzLmRlZmF1bHQuU2lnbmFsLnByb3RvdHlwZS5jYW5jZWxBbmRIb2xkQXRUaW1lLmNhbGwodGhpcyxzLmRlZmF1bHQuVHJhbnNwb3J0VGltZSh0KSl9LHMuZGVmYXVsdC5UcmFuc3BvcnRUaW1lbGluZVNpZ25hbC5wcm90b3R5cGUuZGlzcG9zZT1mdW5jdGlvbigpe3MuZGVmYXVsdC5UcmFuc3BvcnQuY2xlYXIodGhpcy5fc3luY2VkKSxzLmRlZmF1bHQuVHJhbnNwb3J0Lm9mZihcInN0YXJ0IHN0b3AgcGF1c2VcIix0aGlzLl9zeW5jZWRDYWxsYmFjayksdGhpcy5fZXZlbnRzLmNhbmNlbCgwKSxzLmRlZmF1bHQuU2lnbmFsLnByb3RvdHlwZS5kaXNwb3NlLmNhbGwodGhpcyksdGhpcy5fb3V0cHV0U2lnLmRpc3Bvc2UoKSx0aGlzLl9vdXRwdXRTaWc9bnVsbH0sZS5kZWZhdWx0PXMuZGVmYXVsdC5UcmFuc3BvcnRUaW1lbGluZVNpZ25hbH0sZnVuY3Rpb24odCxlLGkpe1widXNlIHN0cmljdFwiO2kucihlKTt2YXIgcz1pKDApO2koMjkpLGkoNSk7cy5kZWZhdWx0Lk5vcm1hbGl6ZT1mdW5jdGlvbih0LGUpe3MuZGVmYXVsdC5TaWduYWxCYXNlLmNhbGwodGhpcyksdGhpcy5faW5wdXRNaW49cy5kZWZhdWx0LmRlZmF1bHRBcmcodCwwKSx0aGlzLl9pbnB1dE1heD1zLmRlZmF1bHQuZGVmYXVsdEFyZyhlLDEpLHRoaXMuX3N1Yj10aGlzLmlucHV0PW5ldyBzLmRlZmF1bHQuQWRkKDApLHRoaXMuX2Rpdj10aGlzLm91dHB1dD1uZXcgcy5kZWZhdWx0Lk11bHRpcGx5KDEpLHRoaXMuX3N1Yi5jb25uZWN0KHRoaXMuX2RpdiksdGhpcy5fc2V0UmFuZ2UoKX0scy5kZWZhdWx0LmV4dGVuZChzLmRlZmF1bHQuTm9ybWFsaXplLHMuZGVmYXVsdC5TaWduYWxCYXNlKSxPYmplY3QuZGVmaW5lUHJvcGVydHkocy5kZWZhdWx0Lk5vcm1hbGl6ZS5wcm90b3R5cGUsXCJtaW5cIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2lucHV0TWlufSxzZXQ6ZnVuY3Rpb24odCl7dGhpcy5faW5wdXRNaW49dCx0aGlzLl9zZXRSYW5nZSgpfX0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShzLmRlZmF1bHQuTm9ybWFsaXplLnByb3RvdHlwZSxcIm1heFwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5faW5wdXRNYXh9LHNldDpmdW5jdGlvbih0KXt0aGlzLl9pbnB1dE1heD10LHRoaXMuX3NldFJhbmdlKCl9fSkscy5kZWZhdWx0Lk5vcm1hbGl6ZS5wcm90b3R5cGUuX3NldFJhbmdlPWZ1bmN0aW9uKCl7dGhpcy5fc3ViLnZhbHVlPS10aGlzLl9pbnB1dE1pbix0aGlzLl9kaXYudmFsdWU9MS8odGhpcy5faW5wdXRNYXgtdGhpcy5faW5wdXRNaW4pfSxzLmRlZmF1bHQuTm9ybWFsaXplLnByb3RvdHlwZS5kaXNwb3NlPWZ1bmN0aW9uKCl7cmV0dXJuIHMuZGVmYXVsdC5TaWduYWxCYXNlLnByb3RvdHlwZS5kaXNwb3NlLmNhbGwodGhpcyksdGhpcy5fc3ViLmRpc3Bvc2UoKSx0aGlzLl9zdWI9bnVsbCx0aGlzLl9kaXYuZGlzcG9zZSgpLHRoaXMuX2Rpdj1udWxsLHRoaXN9LGUuZGVmYXVsdD1zLmRlZmF1bHQuTm9ybWFsaXplfSxmdW5jdGlvbih0LGUsaSl7XCJ1c2Ugc3RyaWN0XCI7aS5yKGUpO3ZhciBzPWkoMCk7aSg3KSxpKDIpO3MuZGVmYXVsdC5HYWluVG9BdWRpbz1mdW5jdGlvbigpe3MuZGVmYXVsdC5TaWduYWxCYXNlLmNhbGwodGhpcyksdGhpcy5fbm9ybT10aGlzLmlucHV0PXRoaXMub3V0cHV0PW5ldyBzLmRlZmF1bHQuV2F2ZVNoYXBlcihmdW5jdGlvbih0KXtyZXR1cm4gMipNYXRoLmFicyh0KS0xfSl9LHMuZGVmYXVsdC5leHRlbmQocy5kZWZhdWx0LkdhaW5Ub0F1ZGlvLHMuZGVmYXVsdC5TaWduYWxCYXNlKSxzLmRlZmF1bHQuR2FpblRvQXVkaW8ucHJvdG90eXBlLmRpc3Bvc2U9ZnVuY3Rpb24oKXtyZXR1cm4gcy5kZWZhdWx0LlNpZ25hbEJhc2UucHJvdG90eXBlLmRpc3Bvc2UuY2FsbCh0aGlzKSx0aGlzLl9ub3JtLmRpc3Bvc2UoKSx0aGlzLl9ub3JtPW51bGwsdGhpc30sZS5kZWZhdWx0PXMuZGVmYXVsdC5HYWluVG9BdWRpb30sZnVuY3Rpb24odCxlLGkpe1widXNlIHN0cmljdFwiO2kucihlKTt2YXIgcz1pKDApO2koMjEpLGkoNzgpLGkoMzIpO3MuZGVmYXVsdC5TYW1wbGVyPWZ1bmN0aW9uKHQpe3ZhciBlPUFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cyk7ZS5zaGlmdCgpO3ZhciBpPXMuZGVmYXVsdC5kZWZhdWx0cyhlLFtcIm9ubG9hZFwiLFwiYmFzZVVybFwiXSxzLmRlZmF1bHQuU2FtcGxlcik7cy5kZWZhdWx0Lkluc3RydW1lbnQuY2FsbCh0aGlzLGkpO3ZhciBuPXt9O2Zvcih2YXIgbyBpbiB0KWlmKHMuZGVmYXVsdC5pc05vdGUobykpe25bcy5kZWZhdWx0LkZyZXF1ZW5jeShvKS50b01pZGkoKV09dFtvXX1lbHNle2lmKGlzTmFOKHBhcnNlRmxvYXQobykpKXRocm93IG5ldyBFcnJvcihcIlRvbmUuU2FtcGxlcjogdXJsIGtleXMgbXVzdCBiZSB0aGUgbm90ZSdzIHBpdGNoXCIpO25bb109dFtvXX10aGlzLl9idWZmZXJzPW5ldyBzLmRlZmF1bHQuQnVmZmVycyhuLGkub25sb2FkLGkuYmFzZVVybCksdGhpcy5fYWN0aXZlU291cmNlcz17fSx0aGlzLmF0dGFjaz1pLmF0dGFjayx0aGlzLnJlbGVhc2U9aS5yZWxlYXNlLHRoaXMuY3VydmU9aS5jdXJ2ZX0scy5kZWZhdWx0LmV4dGVuZChzLmRlZmF1bHQuU2FtcGxlcixzLmRlZmF1bHQuSW5zdHJ1bWVudCkscy5kZWZhdWx0LlNhbXBsZXIuZGVmYXVsdHM9e2F0dGFjazowLHJlbGVhc2U6LjEsb25sb2FkOnMuZGVmYXVsdC5ub09wLGJhc2VVcmw6XCJcIixjdXJ2ZTpcImV4cG9uZW50aWFsXCJ9LHMuZGVmYXVsdC5TYW1wbGVyLnByb3RvdHlwZS5fZmluZENsb3Nlc3Q9ZnVuY3Rpb24odCl7Zm9yKHZhciBlPTA7ZTw5Njspe2lmKHRoaXMuX2J1ZmZlcnMuaGFzKHQrZSkpcmV0dXJuLWU7aWYodGhpcy5fYnVmZmVycy5oYXModC1lKSlyZXR1cm4gZTtlKyt9dGhyb3cgbmV3IEVycm9yKFwiTm8gYXZhaWxhYmxlIGJ1ZmZlcnMgZm9yIG5vdGU6IFwiK3QpfSxzLmRlZmF1bHQuU2FtcGxlci5wcm90b3R5cGUudHJpZ2dlckF0dGFjaz1mdW5jdGlvbih0LGUsaSl7dGhpcy5sb2coXCJ0cmlnZ2VyQXR0YWNrXCIsdCxlLGkpLEFycmF5LmlzQXJyYXkodCl8fCh0PVt0XSk7Zm9yKHZhciBuPTA7bjx0Lmxlbmd0aDtuKyspe3ZhciBvPXMuZGVmYXVsdC5GcmVxdWVuY3kodFtuXSkudG9NaWRpKCksYT10aGlzLl9maW5kQ2xvc2VzdChvKSxyPW8tYSxsPXRoaXMuX2J1ZmZlcnMuZ2V0KHIpLHU9cy5kZWZhdWx0LmludGVydmFsVG9GcmVxdWVuY3lSYXRpbyhhKSxkPW5ldyBzLmRlZmF1bHQuQnVmZmVyU291cmNlKHtidWZmZXI6bCxwbGF5YmFja1JhdGU6dSxmYWRlSW46dGhpcy5hdHRhY2ssZmFkZU91dDp0aGlzLnJlbGVhc2UsY3VydmU6dGhpcy5jdXJ2ZX0pLmNvbm5lY3QodGhpcy5vdXRwdXQpO2Quc3RhcnQoZSwwLGwuZHVyYXRpb24vdSxpKSxzLmRlZmF1bHQuaXNBcnJheSh0aGlzLl9hY3RpdmVTb3VyY2VzW29dKXx8KHRoaXMuX2FjdGl2ZVNvdXJjZXNbb109W10pLHRoaXMuX2FjdGl2ZVNvdXJjZXNbb10ucHVzaChkKSxkLm9uZW5kZWQ9ZnVuY3Rpb24oKXtpZih0aGlzLl9hY3RpdmVTb3VyY2VzJiZ0aGlzLl9hY3RpdmVTb3VyY2VzW29dKXt2YXIgdD10aGlzLl9hY3RpdmVTb3VyY2VzW29dLmluZGV4T2YoZCk7LTEhPT10JiZ0aGlzLl9hY3RpdmVTb3VyY2VzW29dLnNwbGljZSh0LDEpfX0uYmluZCh0aGlzKX1yZXR1cm4gdGhpc30scy5kZWZhdWx0LlNhbXBsZXIucHJvdG90eXBlLnRyaWdnZXJSZWxlYXNlPWZ1bmN0aW9uKHQsZSl7dGhpcy5sb2coXCJ0cmlnZ2VyUmVsZWFzZVwiLHQsZSksQXJyYXkuaXNBcnJheSh0KXx8KHQ9W3RdKTtmb3IodmFyIGk9MDtpPHQubGVuZ3RoO2krKyl7dmFyIG49cy5kZWZhdWx0LkZyZXF1ZW5jeSh0W2ldKS50b01pZGkoKTt0aGlzLl9hY3RpdmVTb3VyY2VzW25dJiZ0aGlzLl9hY3RpdmVTb3VyY2VzW25dLmxlbmd0aCYmKGU9dGhpcy50b1NlY29uZHMoZSksdGhpcy5fYWN0aXZlU291cmNlc1tuXS5mb3JFYWNoKGZ1bmN0aW9uKHQpe3Quc3RvcChlKX0pLHRoaXMuX2FjdGl2ZVNvdXJjZXNbbl09W10pfXJldHVybiB0aGlzfSxzLmRlZmF1bHQuU2FtcGxlci5wcm90b3R5cGUucmVsZWFzZUFsbD1mdW5jdGlvbih0KXtmb3IodmFyIGUgaW4gdD10aGlzLnRvU2Vjb25kcyh0KSx0aGlzLl9hY3RpdmVTb3VyY2VzKWZvcih2YXIgaT10aGlzLl9hY3RpdmVTb3VyY2VzW2VdO2kubGVuZ3RoOyl7aS5zaGlmdCgpLnN0b3AodCl9cmV0dXJuIHRoaXN9LHMuZGVmYXVsdC5TYW1wbGVyLnByb3RvdHlwZS5zeW5jPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3N5bmNNZXRob2QoXCJ0cmlnZ2VyQXR0YWNrXCIsMSksdGhpcy5fc3luY01ldGhvZChcInRyaWdnZXJSZWxlYXNlXCIsMSksdGhpc30scy5kZWZhdWx0LlNhbXBsZXIucHJvdG90eXBlLnRyaWdnZXJBdHRhY2tSZWxlYXNlPWZ1bmN0aW9uKHQsZSxpLG4pe2lmKGk9dGhpcy50b1NlY29uZHMoaSksdGhpcy50cmlnZ2VyQXR0YWNrKHQsaSxuKSxzLmRlZmF1bHQuaXNBcnJheShlKSYmcy5kZWZhdWx0LmlzQXJyYXkodCkpZm9yKHZhciBvPTA7bzx0Lmxlbmd0aDtvKyspe3ZhciBhPWVbTWF0aC5taW4obyxlLmxlbmd0aC0xKV07dGhpcy50cmlnZ2VyUmVsZWFzZSh0W29dLGkrdGhpcy50b1NlY29uZHMoYSkpfWVsc2UgdGhpcy50cmlnZ2VyUmVsZWFzZSh0LGkrdGhpcy50b1NlY29uZHMoZSkpO3JldHVybiB0aGlzfSxzLmRlZmF1bHQuU2FtcGxlci5wcm90b3R5cGUuYWRkPWZ1bmN0aW9uKHQsZSxpKXtpZihzLmRlZmF1bHQuaXNOb3RlKHQpKXt2YXIgbj1zLmRlZmF1bHQuRnJlcXVlbmN5KHQpLnRvTWlkaSgpO3RoaXMuX2J1ZmZlcnMuYWRkKG4sZSxpKX1lbHNle2lmKGlzTmFOKHBhcnNlRmxvYXQodCkpKXRocm93IG5ldyBFcnJvcihcIlRvbmUuU2FtcGxlcjogbm90ZSBtdXN0IGJlIHRoZSBub3RlJ3MgcGl0Y2guIEluc3RlYWQgZ290IFwiK3QpO3RoaXMuX2J1ZmZlcnMuYWRkKHQsZSxpKX19LE9iamVjdC5kZWZpbmVQcm9wZXJ0eShzLmRlZmF1bHQuU2FtcGxlci5wcm90b3R5cGUsXCJsb2FkZWRcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2J1ZmZlcnMubG9hZGVkfX0pLHMuZGVmYXVsdC5TYW1wbGVyLnByb3RvdHlwZS5kaXNwb3NlPWZ1bmN0aW9uKCl7Zm9yKHZhciB0IGluIHMuZGVmYXVsdC5JbnN0cnVtZW50LnByb3RvdHlwZS5kaXNwb3NlLmNhbGwodGhpcyksdGhpcy5fYnVmZmVycy5kaXNwb3NlKCksdGhpcy5fYnVmZmVycz1udWxsLHRoaXMuX2FjdGl2ZVNvdXJjZXMpdGhpcy5fYWN0aXZlU291cmNlc1t0XS5mb3JFYWNoKGZ1bmN0aW9uKHQpe3QuZGlzcG9zZSgpfSk7cmV0dXJuIHRoaXMuX2FjdGl2ZVNvdXJjZXM9bnVsbCx0aGlzfSxlLmRlZmF1bHQ9cy5kZWZhdWx0LlNhbXBsZXJ9LGZ1bmN0aW9uKHQsZSxpKXtcInVzZSBzdHJpY3RcIjtpLnIoZSk7dmFyIHM9aSgwKTtpKDM4KSxpKDYpO3MuZGVmYXVsdC5Qb2x5U3ludGg9ZnVuY3Rpb24oKXt2YXIgdD1zLmRlZmF1bHQuZGVmYXVsdHMoYXJndW1lbnRzLFtcInBvbHlwaG9ueVwiLFwidm9pY2VcIl0scy5kZWZhdWx0LlBvbHlTeW50aCk7cy5kZWZhdWx0Lkluc3RydW1lbnQuY2FsbCh0aGlzLHQpLCh0PXMuZGVmYXVsdC5kZWZhdWx0QXJnKHQscy5kZWZhdWx0Lkluc3RydW1lbnQuZGVmYXVsdHMpKS5wb2x5cGhvbnk9TWF0aC5taW4ocy5kZWZhdWx0LlBvbHlTeW50aC5NQVhfUE9MWVBIT05ZLHQucG9seXBob255KSx0aGlzLnZvaWNlcz1uZXcgQXJyYXkodC5wb2x5cGhvbnkpLHRoaXMuYXNzZXJ0KHQucG9seXBob255PjAsXCJwb2x5cGhvbnkgbXVzdCBiZSBncmVhdGVyIHRoYW4gMFwiKSx0aGlzLmRldHVuZT1uZXcgcy5kZWZhdWx0LlNpZ25hbCh0LmRldHVuZSxzLmRlZmF1bHQuVHlwZS5DZW50cyksdGhpcy5fcmVhZE9ubHkoXCJkZXR1bmVcIik7Zm9yKHZhciBlPTA7ZTx0LnBvbHlwaG9ueTtlKyspe3ZhciBpPW5ldyB0LnZvaWNlKGFyZ3VtZW50c1syXSxhcmd1bWVudHNbM10pO2lmKCEoaSBpbnN0YW5jZW9mIHMuZGVmYXVsdC5Nb25vcGhvbmljKSl0aHJvdyBuZXcgRXJyb3IoXCJTeW50aCBjb25zdHJ1Y3RvciBtdXN0IGJlIGluc3RhbmNlIG9mIFRvbmUuTW9ub3Bob25pY1wiKTt0aGlzLnZvaWNlc1tlXT1pLGkuaW5kZXg9ZSxpLmNvbm5lY3QodGhpcy5vdXRwdXQpLGkuaGFzT3duUHJvcGVydHkoXCJkZXR1bmVcIikmJnRoaXMuZGV0dW5lLmNvbm5lY3QoaS5kZXR1bmUpfX0scy5kZWZhdWx0LmV4dGVuZChzLmRlZmF1bHQuUG9seVN5bnRoLHMuZGVmYXVsdC5JbnN0cnVtZW50KSxzLmRlZmF1bHQuUG9seVN5bnRoLmRlZmF1bHRzPXtwb2x5cGhvbnk6NCx2b2x1bWU6MCxkZXR1bmU6MCx2b2ljZTpzLmRlZmF1bHQuU3ludGh9LHMuZGVmYXVsdC5Qb2x5U3ludGgucHJvdG90eXBlLl9nZXRDbG9zZXN0Vm9pY2U9ZnVuY3Rpb24odCxlKXt2YXIgaT10aGlzLnZvaWNlcy5maW5kKGZ1bmN0aW9uKGkpe2lmKE1hdGguYWJzKGkuZnJlcXVlbmN5LmdldFZhbHVlQXRUaW1lKHQpLXMuZGVmYXVsdC5GcmVxdWVuY3koZSkpPDFlLTQmJmkuZ2V0TGV2ZWxBdFRpbWUodCk+MWUtNSlyZXR1cm4gaX0pO3JldHVybiBpfHx0aGlzLnZvaWNlcy5zbGljZSgpLnNvcnQoZnVuY3Rpb24oZSxpKXt2YXIgcz1lLmdldExldmVsQXRUaW1lKHQrdGhpcy5ibG9ja1RpbWUpLG49aS5nZXRMZXZlbEF0VGltZSh0K3RoaXMuYmxvY2tUaW1lKTtyZXR1cm4gczwxZS01JiYocz0wKSxuPDFlLTUmJihuPTApLHMtbn0uYmluZCh0aGlzKSlbMF19LHMuZGVmYXVsdC5Qb2x5U3ludGgucHJvdG90eXBlLnRyaWdnZXJBdHRhY2s9ZnVuY3Rpb24odCxlLGkpe3JldHVybiBBcnJheS5pc0FycmF5KHQpfHwodD1bdF0pLGU9dGhpcy50b1NlY29uZHMoZSksdC5mb3JFYWNoKGZ1bmN0aW9uKHQpe3ZhciBzPXRoaXMuX2dldENsb3Nlc3RWb2ljZShlLHQpO3MudHJpZ2dlckF0dGFjayh0LGUsaSksdGhpcy5sb2coXCJ0cmlnZ2VyQXR0YWNrXCIscy5pbmRleCx0KX0uYmluZCh0aGlzKSksdGhpc30scy5kZWZhdWx0LlBvbHlTeW50aC5wcm90b3R5cGUudHJpZ2dlclJlbGVhc2U9ZnVuY3Rpb24odCxlKXtyZXR1cm4gQXJyYXkuaXNBcnJheSh0KXx8KHQ9W3RdKSxlPXRoaXMudG9TZWNvbmRzKGUpLHQuZm9yRWFjaChmdW5jdGlvbih0KXt2YXIgaT10aGlzLl9nZXRDbG9zZXN0Vm9pY2UoZSx0KTt0aGlzLmxvZyhcInRyaWdnZXJSZWxlYXNlXCIsaS5pbmRleCx0KSxpLnRyaWdnZXJSZWxlYXNlKGUpfS5iaW5kKHRoaXMpKSx0aGlzfSxzLmRlZmF1bHQuUG9seVN5bnRoLnByb3RvdHlwZS50cmlnZ2VyQXR0YWNrUmVsZWFzZT1mdW5jdGlvbih0LGUsaSxuKXtpZihpPXRoaXMudG9TZWNvbmRzKGkpLHRoaXMudHJpZ2dlckF0dGFjayh0LGksbikscy5kZWZhdWx0LmlzQXJyYXkoZSkmJnMuZGVmYXVsdC5pc0FycmF5KHQpKWZvcih2YXIgbz0wO288dC5sZW5ndGg7bysrKXt2YXIgYT1lW01hdGgubWluKG8sZS5sZW5ndGgtMSldO3RoaXMudHJpZ2dlclJlbGVhc2UodFtvXSxpK3RoaXMudG9TZWNvbmRzKGEpKX1lbHNlIHRoaXMudHJpZ2dlclJlbGVhc2UodCxpK3RoaXMudG9TZWNvbmRzKGUpKTtyZXR1cm4gdGhpc30scy5kZWZhdWx0LlBvbHlTeW50aC5wcm90b3R5cGUuc3luYz1mdW5jdGlvbigpe3JldHVybiB0aGlzLl9zeW5jTWV0aG9kKFwidHJpZ2dlckF0dGFja1wiLDEpLHRoaXMuX3N5bmNNZXRob2QoXCJ0cmlnZ2VyUmVsZWFzZVwiLDEpLHRoaXN9LHMuZGVmYXVsdC5Qb2x5U3ludGgucHJvdG90eXBlLnNldD1mdW5jdGlvbih0LGUsaSl7Zm9yKHZhciBzPTA7czx0aGlzLnZvaWNlcy5sZW5ndGg7cysrKXRoaXMudm9pY2VzW3NdLnNldCh0LGUsaSk7cmV0dXJuIHRoaXN9LHMuZGVmYXVsdC5Qb2x5U3ludGgucHJvdG90eXBlLmdldD1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcy52b2ljZXNbMF0uZ2V0KHQpfSxzLmRlZmF1bHQuUG9seVN5bnRoLnByb3RvdHlwZS5yZWxlYXNlQWxsPWZ1bmN0aW9uKHQpe3JldHVybiB0PXRoaXMudG9TZWNvbmRzKHQpLHRoaXMudm9pY2VzLmZvckVhY2goZnVuY3Rpb24oZSl7ZS50cmlnZ2VyUmVsZWFzZSh0KX0pLHRoaXN9LHMuZGVmYXVsdC5Qb2x5U3ludGgucHJvdG90eXBlLmRpc3Bvc2U9ZnVuY3Rpb24oKXtyZXR1cm4gcy5kZWZhdWx0Lkluc3RydW1lbnQucHJvdG90eXBlLmRpc3Bvc2UuY2FsbCh0aGlzKSx0aGlzLnZvaWNlcy5mb3JFYWNoKGZ1bmN0aW9uKHQpe3QuZGlzcG9zZSgpfSksdGhpcy5fd3JpdGFibGUoXCJkZXR1bmVcIiksdGhpcy5kZXR1bmUuZGlzcG9zZSgpLHRoaXMuZGV0dW5lPW51bGwsdGhpcy52b2ljZXM9bnVsbCx0aGlzfSxzLmRlZmF1bHQuUG9seVN5bnRoLk1BWF9QT0xZUEhPTlk9MjAsZS5kZWZhdWx0PXMuZGVmYXVsdC5Qb2x5U3ludGh9LGZ1bmN0aW9uKHQsZSxpKXtcInVzZSBzdHJpY3RcIjtpLnIoZSk7dmFyIHM9aSgwKTtpKDIxKSxpKDM5KSxpKDU0KTtzLmRlZmF1bHQuUGx1Y2tTeW50aD1mdW5jdGlvbih0KXt0PXMuZGVmYXVsdC5kZWZhdWx0QXJnKHQscy5kZWZhdWx0LlBsdWNrU3ludGguZGVmYXVsdHMpLHMuZGVmYXVsdC5JbnN0cnVtZW50LmNhbGwodGhpcyx0KSx0aGlzLl9ub2lzZT1uZXcgcy5kZWZhdWx0Lk5vaXNlKFwicGlua1wiKSx0aGlzLmF0dGFja05vaXNlPXQuYXR0YWNrTm9pc2UsdGhpcy5fbGZjZj1uZXcgcy5kZWZhdWx0Lkxvd3Bhc3NDb21iRmlsdGVyKHtyZXNvbmFuY2U6dC5yZXNvbmFuY2UsZGFtcGVuaW5nOnQuZGFtcGVuaW5nfSksdGhpcy5yZXNvbmFuY2U9dGhpcy5fbGZjZi5yZXNvbmFuY2UsdGhpcy5kYW1wZW5pbmc9dGhpcy5fbGZjZi5kYW1wZW5pbmcsdGhpcy5fbm9pc2UuY29ubmVjdCh0aGlzLl9sZmNmKSx0aGlzLl9sZmNmLmNvbm5lY3QodGhpcy5vdXRwdXQpLHRoaXMuX3JlYWRPbmx5KFtcInJlc29uYW5jZVwiLFwiZGFtcGVuaW5nXCJdKX0scy5kZWZhdWx0LmV4dGVuZChzLmRlZmF1bHQuUGx1Y2tTeW50aCxzLmRlZmF1bHQuSW5zdHJ1bWVudCkscy5kZWZhdWx0LlBsdWNrU3ludGguZGVmYXVsdHM9e2F0dGFja05vaXNlOjEsZGFtcGVuaW5nOjRlMyxyZXNvbmFuY2U6Ljd9LHMuZGVmYXVsdC5QbHVja1N5bnRoLnByb3RvdHlwZS50cmlnZ2VyQXR0YWNrPWZ1bmN0aW9uKHQsZSl7dD10aGlzLnRvRnJlcXVlbmN5KHQpLGU9dGhpcy50b1NlY29uZHMoZSk7dmFyIGk9MS90O3JldHVybiB0aGlzLl9sZmNmLmRlbGF5VGltZS5zZXRWYWx1ZUF0VGltZShpLGUpLHRoaXMuX25vaXNlLnN0YXJ0KGUpLHRoaXMuX25vaXNlLnN0b3AoZStpKnRoaXMuYXR0YWNrTm9pc2UpLHRoaXN9LHMuZGVmYXVsdC5QbHVja1N5bnRoLnByb3RvdHlwZS5kaXNwb3NlPWZ1bmN0aW9uKCl7cmV0dXJuIHMuZGVmYXVsdC5JbnN0cnVtZW50LnByb3RvdHlwZS5kaXNwb3NlLmNhbGwodGhpcyksdGhpcy5fbm9pc2UuZGlzcG9zZSgpLHRoaXMuX2xmY2YuZGlzcG9zZSgpLHRoaXMuX25vaXNlPW51bGwsdGhpcy5fbGZjZj1udWxsLHRoaXMuX3dyaXRhYmxlKFtcInJlc29uYW5jZVwiLFwiZGFtcGVuaW5nXCJdKSx0aGlzLmRhbXBlbmluZz1udWxsLHRoaXMucmVzb25hbmNlPW51bGwsdGhpc30sZS5kZWZhdWx0PXMuZGVmYXVsdC5QbHVja1N5bnRofSxmdW5jdGlvbih0LGUsaSl7XCJ1c2Ugc3RyaWN0XCI7aS5yKGUpO3ZhciBzPWkoMCk7aSgzMSksaSg0MSksaSgzOSksaSgyKSxpKDkpLGkoMjEpO3MuZGVmYXVsdC5Ob2lzZVN5bnRoPWZ1bmN0aW9uKHQpe3Q9cy5kZWZhdWx0LmRlZmF1bHRBcmcodCxzLmRlZmF1bHQuTm9pc2VTeW50aC5kZWZhdWx0cykscy5kZWZhdWx0Lkluc3RydW1lbnQuY2FsbCh0aGlzLHQpLHRoaXMubm9pc2U9bmV3IHMuZGVmYXVsdC5Ob2lzZSh0Lm5vaXNlKSx0aGlzLmVudmVsb3BlPW5ldyBzLmRlZmF1bHQuQW1wbGl0dWRlRW52ZWxvcGUodC5lbnZlbG9wZSksdGhpcy5ub2lzZS5jaGFpbih0aGlzLmVudmVsb3BlLHRoaXMub3V0cHV0KSx0aGlzLl9yZWFkT25seShbXCJub2lzZVwiLFwiZW52ZWxvcGVcIl0pfSxzLmRlZmF1bHQuZXh0ZW5kKHMuZGVmYXVsdC5Ob2lzZVN5bnRoLHMuZGVmYXVsdC5JbnN0cnVtZW50KSxzLmRlZmF1bHQuTm9pc2VTeW50aC5kZWZhdWx0cz17bm9pc2U6e3R5cGU6XCJ3aGl0ZVwifSxlbnZlbG9wZTp7YXR0YWNrOi4wMDUsZGVjYXk6LjEsc3VzdGFpbjowfX0scy5kZWZhdWx0Lk5vaXNlU3ludGgucHJvdG90eXBlLnRyaWdnZXJBdHRhY2s9ZnVuY3Rpb24odCxlKXtyZXR1cm4gdD10aGlzLnRvU2Vjb25kcyh0KSx0aGlzLmVudmVsb3BlLnRyaWdnZXJBdHRhY2sodCxlKSx0aGlzLm5vaXNlLnN0YXJ0KHQpLDA9PT10aGlzLmVudmVsb3BlLnN1c3RhaW4mJnRoaXMubm9pc2Uuc3RvcCh0K3RoaXMuZW52ZWxvcGUuYXR0YWNrK3RoaXMuZW52ZWxvcGUuZGVjYXkpLHRoaXN9LHMuZGVmYXVsdC5Ob2lzZVN5bnRoLnByb3RvdHlwZS50cmlnZ2VyUmVsZWFzZT1mdW5jdGlvbih0KXtyZXR1cm4gdD10aGlzLnRvU2Vjb25kcyh0KSx0aGlzLmVudmVsb3BlLnRyaWdnZXJSZWxlYXNlKHQpLHRoaXMubm9pc2Uuc3RvcCh0K3RoaXMuZW52ZWxvcGUucmVsZWFzZSksdGhpc30scy5kZWZhdWx0Lk5vaXNlU3ludGgucHJvdG90eXBlLnN5bmM9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fc3luY01ldGhvZChcInRyaWdnZXJBdHRhY2tcIiwwKSx0aGlzLl9zeW5jTWV0aG9kKFwidHJpZ2dlclJlbGVhc2VcIiwwKSx0aGlzfSxzLmRlZmF1bHQuTm9pc2VTeW50aC5wcm90b3R5cGUudHJpZ2dlckF0dGFja1JlbGVhc2U9ZnVuY3Rpb24odCxlLGkpe3JldHVybiBlPXRoaXMudG9TZWNvbmRzKGUpLHQ9dGhpcy50b1NlY29uZHModCksdGhpcy50cmlnZ2VyQXR0YWNrKGUsaSksdGhpcy50cmlnZ2VyUmVsZWFzZShlK3QpLHRoaXN9LHMuZGVmYXVsdC5Ob2lzZVN5bnRoLnByb3RvdHlwZS5kaXNwb3NlPWZ1bmN0aW9uKCl7cmV0dXJuIHMuZGVmYXVsdC5JbnN0cnVtZW50LnByb3RvdHlwZS5kaXNwb3NlLmNhbGwodGhpcyksdGhpcy5fd3JpdGFibGUoW1wibm9pc2VcIixcImVudmVsb3BlXCJdKSx0aGlzLm5vaXNlLmRpc3Bvc2UoKSx0aGlzLm5vaXNlPW51bGwsdGhpcy5lbnZlbG9wZS5kaXNwb3NlKCksdGhpcy5lbnZlbG9wZT1udWxsLHRoaXN9LGUuZGVmYXVsdD1zLmRlZmF1bHQuTm9pc2VTeW50aH0sZnVuY3Rpb24odCxlLGkpe1widXNlIHN0cmljdFwiO2kucihlKTt2YXIgcz1pKDApLG49KGkoMjEpLGkoNDkpLGkoOSksaSg0MSksaSgzMSksaSgzKSxpKDI2KSxpKDUpLFsxLDEuNDgzLDEuOTMyLDIuNTQ2LDIuNjMsMy44OTddKTtzLmRlZmF1bHQuTWV0YWxTeW50aD1mdW5jdGlvbih0KXt0PXMuZGVmYXVsdC5kZWZhdWx0QXJnKHQscy5kZWZhdWx0Lk1ldGFsU3ludGguZGVmYXVsdHMpLHMuZGVmYXVsdC5JbnN0cnVtZW50LmNhbGwodGhpcyx0KSx0aGlzLmZyZXF1ZW5jeT1uZXcgcy5kZWZhdWx0LlNpZ25hbCh0LmZyZXF1ZW5jeSxzLmRlZmF1bHQuVHlwZS5GcmVxdWVuY3kpLHRoaXMuX29zY2lsbGF0b3JzPVtdLHRoaXMuX2ZyZXFNdWx0aXBsaWVycz1bXSx0aGlzLl9hbXBsaXR1ZT1uZXcgcy5kZWZhdWx0LkdhaW4oMCkuY29ubmVjdCh0aGlzLm91dHB1dCksdGhpcy5faGlnaHBhc3M9bmV3IHMuZGVmYXVsdC5GaWx0ZXIoe3R5cGU6XCJoaWdocGFzc1wiLFE6LTMuMDEwMjk5OTU2NjM5ODEyNX0pLmNvbm5lY3QodGhpcy5fYW1wbGl0dWUpLHRoaXMuX29jdGF2ZXM9dC5vY3RhdmVzLHRoaXMuX2ZpbHRlckZyZXFTY2FsZXI9bmV3IHMuZGVmYXVsdC5TY2FsZSh0LnJlc29uYW5jZSw3ZTMpLHRoaXMuZW52ZWxvcGU9bmV3IHMuZGVmYXVsdC5FbnZlbG9wZSh7YXR0YWNrOnQuZW52ZWxvcGUuYXR0YWNrLGF0dGFja0N1cnZlOlwibGluZWFyXCIsZGVjYXk6dC5lbnZlbG9wZS5kZWNheSxzdXN0YWluOjAscmVsZWFzZTp0LmVudmVsb3BlLnJlbGVhc2V9KS5jaGFpbih0aGlzLl9maWx0ZXJGcmVxU2NhbGVyLHRoaXMuX2hpZ2hwYXNzLmZyZXF1ZW5jeSksdGhpcy5lbnZlbG9wZS5jb25uZWN0KHRoaXMuX2FtcGxpdHVlLmdhaW4pO2Zvcih2YXIgZT0wO2U8bi5sZW5ndGg7ZSsrKXt2YXIgaT1uZXcgcy5kZWZhdWx0LkZNT3NjaWxsYXRvcih7dHlwZTpcInNxdWFyZVwiLG1vZHVsYXRpb25UeXBlOlwic3F1YXJlXCIsaGFybW9uaWNpdHk6dC5oYXJtb25pY2l0eSxtb2R1bGF0aW9uSW5kZXg6dC5tb2R1bGF0aW9uSW5kZXh9KTtpLmNvbm5lY3QodGhpcy5faGlnaHBhc3MpLHRoaXMuX29zY2lsbGF0b3JzW2VdPWk7dmFyIG89bmV3IHMuZGVmYXVsdC5NdWx0aXBseShuW2VdKTt0aGlzLl9mcmVxTXVsdGlwbGllcnNbZV09byx0aGlzLmZyZXF1ZW5jeS5jaGFpbihvLGkuZnJlcXVlbmN5KX10aGlzLm9jdGF2ZXM9dC5vY3RhdmVzfSxzLmRlZmF1bHQuZXh0ZW5kKHMuZGVmYXVsdC5NZXRhbFN5bnRoLHMuZGVmYXVsdC5JbnN0cnVtZW50KSxzLmRlZmF1bHQuTWV0YWxTeW50aC5kZWZhdWx0cz17ZnJlcXVlbmN5OjIwMCxlbnZlbG9wZTp7YXR0YWNrOi4wMDEsZGVjYXk6MS40LHJlbGVhc2U6LjJ9LGhhcm1vbmljaXR5OjUuMSxtb2R1bGF0aW9uSW5kZXg6MzIscmVzb25hbmNlOjRlMyxvY3RhdmVzOjEuNX0scy5kZWZhdWx0Lk1ldGFsU3ludGgucHJvdG90eXBlLnRyaWdnZXJBdHRhY2s9ZnVuY3Rpb24odCxlKXtyZXR1cm4gdD10aGlzLnRvU2Vjb25kcyh0KSxlPXMuZGVmYXVsdC5kZWZhdWx0QXJnKGUsMSksdGhpcy5lbnZlbG9wZS50cmlnZ2VyQXR0YWNrKHQsZSksdGhpcy5fb3NjaWxsYXRvcnMuZm9yRWFjaChmdW5jdGlvbihlKXtlLnN0YXJ0KHQpfSksMD09PXRoaXMuZW52ZWxvcGUuc3VzdGFpbiYmdGhpcy5fb3NjaWxsYXRvcnMuZm9yRWFjaChmdW5jdGlvbihlKXtlLnN0b3AodCt0aGlzLmVudmVsb3BlLmF0dGFjayt0aGlzLmVudmVsb3BlLmRlY2F5KX0uYmluZCh0aGlzKSksdGhpc30scy5kZWZhdWx0Lk1ldGFsU3ludGgucHJvdG90eXBlLnRyaWdnZXJSZWxlYXNlPWZ1bmN0aW9uKHQpe3JldHVybiB0PXRoaXMudG9TZWNvbmRzKHQpLHRoaXMuZW52ZWxvcGUudHJpZ2dlclJlbGVhc2UodCksdGhpcy5fb3NjaWxsYXRvcnMuZm9yRWFjaChmdW5jdGlvbihlKXtlLnN0b3AodCt0aGlzLmVudmVsb3BlLnJlbGVhc2UpfS5iaW5kKHRoaXMpKSx0aGlzfSxzLmRlZmF1bHQuTWV0YWxTeW50aC5wcm90b3R5cGUuc3luYz1mdW5jdGlvbigpe3JldHVybiB0aGlzLl9zeW5jTWV0aG9kKFwidHJpZ2dlckF0dGFja1wiLDApLHRoaXMuX3N5bmNNZXRob2QoXCJ0cmlnZ2VyUmVsZWFzZVwiLDApLHRoaXN9LHMuZGVmYXVsdC5NZXRhbFN5bnRoLnByb3RvdHlwZS50cmlnZ2VyQXR0YWNrUmVsZWFzZT1mdW5jdGlvbih0LGUsaSl7cmV0dXJuIGU9dGhpcy50b1NlY29uZHMoZSksdD10aGlzLnRvU2Vjb25kcyh0KSx0aGlzLnRyaWdnZXJBdHRhY2soZSxpKSx0aGlzLnRyaWdnZXJSZWxlYXNlKGUrdCksdGhpc30sT2JqZWN0LmRlZmluZVByb3BlcnR5KHMuZGVmYXVsdC5NZXRhbFN5bnRoLnByb3RvdHlwZSxcIm1vZHVsYXRpb25JbmRleFwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fb3NjaWxsYXRvcnNbMF0ubW9kdWxhdGlvbkluZGV4LnZhbHVlfSxzZXQ6ZnVuY3Rpb24odCl7Zm9yKHZhciBlPTA7ZTx0aGlzLl9vc2NpbGxhdG9ycy5sZW5ndGg7ZSsrKXRoaXMuX29zY2lsbGF0b3JzW2VdLm1vZHVsYXRpb25JbmRleC52YWx1ZT10fX0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShzLmRlZmF1bHQuTWV0YWxTeW50aC5wcm90b3R5cGUsXCJoYXJtb25pY2l0eVwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fb3NjaWxsYXRvcnNbMF0uaGFybW9uaWNpdHkudmFsdWV9LHNldDpmdW5jdGlvbih0KXtmb3IodmFyIGU9MDtlPHRoaXMuX29zY2lsbGF0b3JzLmxlbmd0aDtlKyspdGhpcy5fb3NjaWxsYXRvcnNbZV0uaGFybW9uaWNpdHkudmFsdWU9dH19KSxPYmplY3QuZGVmaW5lUHJvcGVydHkocy5kZWZhdWx0Lk1ldGFsU3ludGgucHJvdG90eXBlLFwicmVzb25hbmNlXCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9maWx0ZXJGcmVxU2NhbGVyLm1pbn0sc2V0OmZ1bmN0aW9uKHQpe3RoaXMuX2ZpbHRlckZyZXFTY2FsZXIubWluPXQsdGhpcy5vY3RhdmVzPXRoaXMuX29jdGF2ZXN9fSksT2JqZWN0LmRlZmluZVByb3BlcnR5KHMuZGVmYXVsdC5NZXRhbFN5bnRoLnByb3RvdHlwZSxcIm9jdGF2ZXNcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX29jdGF2ZXN9LHNldDpmdW5jdGlvbih0KXt0aGlzLl9vY3RhdmVzPXQsdGhpcy5fZmlsdGVyRnJlcVNjYWxlci5tYXg9dGhpcy5fZmlsdGVyRnJlcVNjYWxlci5taW4qTWF0aC5wb3coMix0KX19KSxzLmRlZmF1bHQuTWV0YWxTeW50aC5wcm90b3R5cGUuZGlzcG9zZT1mdW5jdGlvbigpe3MuZGVmYXVsdC5JbnN0cnVtZW50LnByb3RvdHlwZS5kaXNwb3NlLmNhbGwodGhpcyk7Zm9yKHZhciB0PTA7dDx0aGlzLl9vc2NpbGxhdG9ycy5sZW5ndGg7dCsrKXRoaXMuX29zY2lsbGF0b3JzW3RdLmRpc3Bvc2UoKSx0aGlzLl9mcmVxTXVsdGlwbGllcnNbdF0uZGlzcG9zZSgpO3RoaXMuX29zY2lsbGF0b3JzPW51bGwsdGhpcy5fZnJlcU11bHRpcGxpZXJzPW51bGwsdGhpcy5mcmVxdWVuY3kuZGlzcG9zZSgpLHRoaXMuZnJlcXVlbmN5PW51bGwsdGhpcy5fZmlsdGVyRnJlcVNjYWxlci5kaXNwb3NlKCksdGhpcy5fZmlsdGVyRnJlcVNjYWxlcj1udWxsLHRoaXMuX2FtcGxpdHVlLmRpc3Bvc2UoKSx0aGlzLl9hbXBsaXR1ZT1udWxsLHRoaXMuZW52ZWxvcGUuZGlzcG9zZSgpLHRoaXMuZW52ZWxvcGU9bnVsbCx0aGlzLl9oaWdocGFzcy5kaXNwb3NlKCksdGhpcy5faGlnaHBhc3M9bnVsbH0sZS5kZWZhdWx0PXMuZGVmYXVsdC5NZXRhbFN5bnRofSxmdW5jdGlvbih0LGUsaSl7XCJ1c2Ugc3RyaWN0XCI7aS5yKGUpO3ZhciBzPWkoMCk7aSgzNyksaSgyMSksaSgzMSk7cy5kZWZhdWx0Lk1lbWJyYW5lU3ludGg9ZnVuY3Rpb24odCl7dD1zLmRlZmF1bHQuZGVmYXVsdEFyZyh0LHMuZGVmYXVsdC5NZW1icmFuZVN5bnRoLmRlZmF1bHRzKSxzLmRlZmF1bHQuSW5zdHJ1bWVudC5jYWxsKHRoaXMsdCksdGhpcy5vc2NpbGxhdG9yPW5ldyBzLmRlZmF1bHQuT21uaU9zY2lsbGF0b3IodC5vc2NpbGxhdG9yKSx0aGlzLmVudmVsb3BlPW5ldyBzLmRlZmF1bHQuQW1wbGl0dWRlRW52ZWxvcGUodC5lbnZlbG9wZSksdGhpcy5vY3RhdmVzPXQub2N0YXZlcyx0aGlzLnBpdGNoRGVjYXk9dC5waXRjaERlY2F5LHRoaXMub3NjaWxsYXRvci5jaGFpbih0aGlzLmVudmVsb3BlLHRoaXMub3V0cHV0KSx0aGlzLl9yZWFkT25seShbXCJvc2NpbGxhdG9yXCIsXCJlbnZlbG9wZVwiXSl9LHMuZGVmYXVsdC5leHRlbmQocy5kZWZhdWx0Lk1lbWJyYW5lU3ludGgscy5kZWZhdWx0Lkluc3RydW1lbnQpLHMuZGVmYXVsdC5NZW1icmFuZVN5bnRoLmRlZmF1bHRzPXtwaXRjaERlY2F5Oi4wNSxvY3RhdmVzOjEwLG9zY2lsbGF0b3I6e3R5cGU6XCJzaW5lXCJ9LGVudmVsb3BlOnthdHRhY2s6LjAwMSxkZWNheTouNCxzdXN0YWluOi4wMSxyZWxlYXNlOjEuNCxhdHRhY2tDdXJ2ZTpcImV4cG9uZW50aWFsXCJ9fSxzLmRlZmF1bHQuTWVtYnJhbmVTeW50aC5wcm90b3R5cGUudHJpZ2dlckF0dGFjaz1mdW5jdGlvbih0LGUsaSl7ZT10aGlzLnRvU2Vjb25kcyhlKTt2YXIgcz0odD10aGlzLnRvRnJlcXVlbmN5KHQpKSp0aGlzLm9jdGF2ZXM7cmV0dXJuIHRoaXMub3NjaWxsYXRvci5mcmVxdWVuY3kuc2V0VmFsdWVBdFRpbWUocyxlKSx0aGlzLm9zY2lsbGF0b3IuZnJlcXVlbmN5LmV4cG9uZW50aWFsUmFtcFRvVmFsdWVBdFRpbWUodCxlK3RoaXMudG9TZWNvbmRzKHRoaXMucGl0Y2hEZWNheSkpLHRoaXMuZW52ZWxvcGUudHJpZ2dlckF0dGFjayhlLGkpLHRoaXMub3NjaWxsYXRvci5zdGFydChlKSwwPT09dGhpcy5lbnZlbG9wZS5zdXN0YWluJiZ0aGlzLm9zY2lsbGF0b3Iuc3RvcChlK3RoaXMuZW52ZWxvcGUuYXR0YWNrK3RoaXMuZW52ZWxvcGUuZGVjYXkpLHRoaXN9LHMuZGVmYXVsdC5NZW1icmFuZVN5bnRoLnByb3RvdHlwZS50cmlnZ2VyUmVsZWFzZT1mdW5jdGlvbih0KXtyZXR1cm4gdD10aGlzLnRvU2Vjb25kcyh0KSx0aGlzLmVudmVsb3BlLnRyaWdnZXJSZWxlYXNlKHQpLHRoaXMub3NjaWxsYXRvci5zdG9wKHQrdGhpcy5lbnZlbG9wZS5yZWxlYXNlKSx0aGlzfSxzLmRlZmF1bHQuTWVtYnJhbmVTeW50aC5wcm90b3R5cGUuZGlzcG9zZT1mdW5jdGlvbigpe3JldHVybiBzLmRlZmF1bHQuSW5zdHJ1bWVudC5wcm90b3R5cGUuZGlzcG9zZS5jYWxsKHRoaXMpLHRoaXMuX3dyaXRhYmxlKFtcIm9zY2lsbGF0b3JcIixcImVudmVsb3BlXCJdKSx0aGlzLm9zY2lsbGF0b3IuZGlzcG9zZSgpLHRoaXMub3NjaWxsYXRvcj1udWxsLHRoaXMuZW52ZWxvcGUuZGlzcG9zZSgpLHRoaXMuZW52ZWxvcGU9bnVsbCx0aGlzfSxlLmRlZmF1bHQ9cy5kZWZhdWx0Lk1lbWJyYW5lU3ludGh9LGZ1bmN0aW9uKHQsZSxpKXtcInVzZSBzdHJpY3RcIjtpLnIoZSk7dmFyIHM9aSgwKTtpKDM4KSxpKDIpLGkoNSksaSgyNSk7cy5kZWZhdWx0LkZNU3ludGg9ZnVuY3Rpb24odCl7dD1zLmRlZmF1bHQuZGVmYXVsdEFyZyh0LHMuZGVmYXVsdC5GTVN5bnRoLmRlZmF1bHRzKSxzLmRlZmF1bHQuTW9ub3Bob25pYy5jYWxsKHRoaXMsdCksdGhpcy5fY2Fycmllcj1uZXcgcy5kZWZhdWx0LlN5bnRoKHQuY2FycmllciksdGhpcy5fY2Fycmllci52b2x1bWUudmFsdWU9LTEwLHRoaXMub3NjaWxsYXRvcj10aGlzLl9jYXJyaWVyLm9zY2lsbGF0b3IsdGhpcy5lbnZlbG9wZT10aGlzLl9jYXJyaWVyLmVudmVsb3BlLnNldCh0LmVudmVsb3BlKSx0aGlzLl9tb2R1bGF0b3I9bmV3IHMuZGVmYXVsdC5TeW50aCh0Lm1vZHVsYXRvciksdGhpcy5fbW9kdWxhdG9yLnZvbHVtZS52YWx1ZT0tMTAsdGhpcy5tb2R1bGF0aW9uPXRoaXMuX21vZHVsYXRvci5vc2NpbGxhdG9yLnNldCh0Lm1vZHVsYXRpb24pLHRoaXMubW9kdWxhdGlvbkVudmVsb3BlPXRoaXMuX21vZHVsYXRvci5lbnZlbG9wZS5zZXQodC5tb2R1bGF0aW9uRW52ZWxvcGUpLHRoaXMuZnJlcXVlbmN5PW5ldyBzLmRlZmF1bHQuU2lnbmFsKDQ0MCxzLmRlZmF1bHQuVHlwZS5GcmVxdWVuY3kpLHRoaXMuZGV0dW5lPW5ldyBzLmRlZmF1bHQuU2lnbmFsKHQuZGV0dW5lLHMuZGVmYXVsdC5UeXBlLkNlbnRzKSx0aGlzLmhhcm1vbmljaXR5PW5ldyBzLmRlZmF1bHQuTXVsdGlwbHkodC5oYXJtb25pY2l0eSksdGhpcy5oYXJtb25pY2l0eS51bml0cz1zLmRlZmF1bHQuVHlwZS5Qb3NpdGl2ZSx0aGlzLm1vZHVsYXRpb25JbmRleD1uZXcgcy5kZWZhdWx0Lk11bHRpcGx5KHQubW9kdWxhdGlvbkluZGV4KSx0aGlzLm1vZHVsYXRpb25JbmRleC51bml0cz1zLmRlZmF1bHQuVHlwZS5Qb3NpdGl2ZSx0aGlzLl9tb2R1bGF0aW9uTm9kZT1uZXcgcy5kZWZhdWx0LkdhaW4oMCksdGhpcy5mcmVxdWVuY3kuY29ubmVjdCh0aGlzLl9jYXJyaWVyLmZyZXF1ZW5jeSksdGhpcy5mcmVxdWVuY3kuY2hhaW4odGhpcy5oYXJtb25pY2l0eSx0aGlzLl9tb2R1bGF0b3IuZnJlcXVlbmN5KSx0aGlzLmZyZXF1ZW5jeS5jaGFpbih0aGlzLm1vZHVsYXRpb25JbmRleCx0aGlzLl9tb2R1bGF0aW9uTm9kZSksdGhpcy5kZXR1bmUuZmFuKHRoaXMuX2NhcnJpZXIuZGV0dW5lLHRoaXMuX21vZHVsYXRvci5kZXR1bmUpLHRoaXMuX21vZHVsYXRvci5jb25uZWN0KHRoaXMuX21vZHVsYXRpb25Ob2RlLmdhaW4pLHRoaXMuX21vZHVsYXRpb25Ob2RlLmNvbm5lY3QodGhpcy5fY2Fycmllci5mcmVxdWVuY3kpLHRoaXMuX2NhcnJpZXIuY29ubmVjdCh0aGlzLm91dHB1dCksdGhpcy5fcmVhZE9ubHkoW1wiZnJlcXVlbmN5XCIsXCJoYXJtb25pY2l0eVwiLFwibW9kdWxhdGlvbkluZGV4XCIsXCJvc2NpbGxhdG9yXCIsXCJlbnZlbG9wZVwiLFwibW9kdWxhdGlvblwiLFwibW9kdWxhdGlvbkVudmVsb3BlXCIsXCJkZXR1bmVcIl0pfSxzLmRlZmF1bHQuZXh0ZW5kKHMuZGVmYXVsdC5GTVN5bnRoLHMuZGVmYXVsdC5Nb25vcGhvbmljKSxzLmRlZmF1bHQuRk1TeW50aC5kZWZhdWx0cz17aGFybW9uaWNpdHk6Myxtb2R1bGF0aW9uSW5kZXg6MTAsZGV0dW5lOjAsb3NjaWxsYXRvcjp7dHlwZTpcInNpbmVcIn0sZW52ZWxvcGU6e2F0dGFjazouMDEsZGVjYXk6LjAxLHN1c3RhaW46MSxyZWxlYXNlOi41fSxtb2R1bGF0aW9uOnt0eXBlOlwic3F1YXJlXCJ9LG1vZHVsYXRpb25FbnZlbG9wZTp7YXR0YWNrOi41LGRlY2F5OjAsc3VzdGFpbjoxLHJlbGVhc2U6LjV9fSxzLmRlZmF1bHQuRk1TeW50aC5wcm90b3R5cGUuX3RyaWdnZXJFbnZlbG9wZUF0dGFjaz1mdW5jdGlvbih0LGUpe3JldHVybiB0PXRoaXMudG9TZWNvbmRzKHQpLHRoaXMuX2NhcnJpZXIuX3RyaWdnZXJFbnZlbG9wZUF0dGFjayh0LGUpLHRoaXMuX21vZHVsYXRvci5fdHJpZ2dlckVudmVsb3BlQXR0YWNrKHQpLHRoaXN9LHMuZGVmYXVsdC5GTVN5bnRoLnByb3RvdHlwZS5fdHJpZ2dlckVudmVsb3BlUmVsZWFzZT1mdW5jdGlvbih0KXtyZXR1cm4gdD10aGlzLnRvU2Vjb25kcyh0KSx0aGlzLl9jYXJyaWVyLl90cmlnZ2VyRW52ZWxvcGVSZWxlYXNlKHQpLHRoaXMuX21vZHVsYXRvci5fdHJpZ2dlckVudmVsb3BlUmVsZWFzZSh0KSx0aGlzfSxzLmRlZmF1bHQuRk1TeW50aC5wcm90b3R5cGUuZGlzcG9zZT1mdW5jdGlvbigpe3JldHVybiBzLmRlZmF1bHQuTW9ub3Bob25pYy5wcm90b3R5cGUuZGlzcG9zZS5jYWxsKHRoaXMpLHRoaXMuX3dyaXRhYmxlKFtcImZyZXF1ZW5jeVwiLFwiaGFybW9uaWNpdHlcIixcIm1vZHVsYXRpb25JbmRleFwiLFwib3NjaWxsYXRvclwiLFwiZW52ZWxvcGVcIixcIm1vZHVsYXRpb25cIixcIm1vZHVsYXRpb25FbnZlbG9wZVwiLFwiZGV0dW5lXCJdKSx0aGlzLl9jYXJyaWVyLmRpc3Bvc2UoKSx0aGlzLl9jYXJyaWVyPW51bGwsdGhpcy5fbW9kdWxhdG9yLmRpc3Bvc2UoKSx0aGlzLl9tb2R1bGF0b3I9bnVsbCx0aGlzLmZyZXF1ZW5jeS5kaXNwb3NlKCksdGhpcy5mcmVxdWVuY3k9bnVsbCx0aGlzLmRldHVuZS5kaXNwb3NlKCksdGhpcy5kZXR1bmU9bnVsbCx0aGlzLm1vZHVsYXRpb25JbmRleC5kaXNwb3NlKCksdGhpcy5tb2R1bGF0aW9uSW5kZXg9bnVsbCx0aGlzLmhhcm1vbmljaXR5LmRpc3Bvc2UoKSx0aGlzLmhhcm1vbmljaXR5PW51bGwsdGhpcy5fbW9kdWxhdGlvbk5vZGUuZGlzcG9zZSgpLHRoaXMuX21vZHVsYXRpb25Ob2RlPW51bGwsdGhpcy5vc2NpbGxhdG9yPW51bGwsdGhpcy5lbnZlbG9wZT1udWxsLHRoaXMubW9kdWxhdGlvbkVudmVsb3BlPW51bGwsdGhpcy5tb2R1bGF0aW9uPW51bGwsdGhpc30sZS5kZWZhdWx0PXMuZGVmYXVsdC5GTVN5bnRofSxmdW5jdGlvbih0LGUsaSl7XCJ1c2Ugc3RyaWN0XCI7aS5yKGUpO3ZhciBzPWkoMCk7aSg2NiksaSgxMiksaSgyKSxpKDUpLGkoMjUpLGkoMTQpO3MuZGVmYXVsdC5EdW9TeW50aD1mdW5jdGlvbih0KXt0PXMuZGVmYXVsdC5kZWZhdWx0QXJnKHQscy5kZWZhdWx0LkR1b1N5bnRoLmRlZmF1bHRzKSxzLmRlZmF1bHQuTW9ub3Bob25pYy5jYWxsKHRoaXMsdCksdGhpcy52b2ljZTA9bmV3IHMuZGVmYXVsdC5Nb25vU3ludGgodC52b2ljZTApLHRoaXMudm9pY2UwLnZvbHVtZS52YWx1ZT0tMTAsdGhpcy52b2ljZTE9bmV3IHMuZGVmYXVsdC5Nb25vU3ludGgodC52b2ljZTEpLHRoaXMudm9pY2UxLnZvbHVtZS52YWx1ZT0tMTAsdGhpcy5fdmlicmF0bz1uZXcgcy5kZWZhdWx0LkxGTyh0LnZpYnJhdG9SYXRlLC01MCw1MCksdGhpcy5fdmlicmF0by5zdGFydCgpLHRoaXMudmlicmF0b1JhdGU9dGhpcy5fdmlicmF0by5mcmVxdWVuY3ksdGhpcy5fdmlicmF0b0dhaW49bmV3IHMuZGVmYXVsdC5HYWluKHQudmlicmF0b0Ftb3VudCxzLmRlZmF1bHQuVHlwZS5Qb3NpdGl2ZSksdGhpcy52aWJyYXRvQW1vdW50PXRoaXMuX3ZpYnJhdG9HYWluLmdhaW4sdGhpcy5mcmVxdWVuY3k9bmV3IHMuZGVmYXVsdC5TaWduYWwoNDQwLHMuZGVmYXVsdC5UeXBlLkZyZXF1ZW5jeSksdGhpcy5oYXJtb25pY2l0eT1uZXcgcy5kZWZhdWx0Lk11bHRpcGx5KHQuaGFybW9uaWNpdHkpLHRoaXMuaGFybW9uaWNpdHkudW5pdHM9cy5kZWZhdWx0LlR5cGUuUG9zaXRpdmUsdGhpcy5mcmVxdWVuY3kuY29ubmVjdCh0aGlzLnZvaWNlMC5mcmVxdWVuY3kpLHRoaXMuZnJlcXVlbmN5LmNoYWluKHRoaXMuaGFybW9uaWNpdHksdGhpcy52b2ljZTEuZnJlcXVlbmN5KSx0aGlzLl92aWJyYXRvLmNvbm5lY3QodGhpcy5fdmlicmF0b0dhaW4pLHRoaXMuX3ZpYnJhdG9HYWluLmZhbih0aGlzLnZvaWNlMC5kZXR1bmUsdGhpcy52b2ljZTEuZGV0dW5lKSx0aGlzLnZvaWNlMC5jb25uZWN0KHRoaXMub3V0cHV0KSx0aGlzLnZvaWNlMS5jb25uZWN0KHRoaXMub3V0cHV0KSx0aGlzLl9yZWFkT25seShbXCJ2b2ljZTBcIixcInZvaWNlMVwiLFwiZnJlcXVlbmN5XCIsXCJ2aWJyYXRvQW1vdW50XCIsXCJ2aWJyYXRvUmF0ZVwiXSl9LHMuZGVmYXVsdC5leHRlbmQocy5kZWZhdWx0LkR1b1N5bnRoLHMuZGVmYXVsdC5Nb25vcGhvbmljKSxzLmRlZmF1bHQuRHVvU3ludGguZGVmYXVsdHM9e3ZpYnJhdG9BbW91bnQ6LjUsdmlicmF0b1JhdGU6NSxoYXJtb25pY2l0eToxLjUsdm9pY2UwOnt2b2x1bWU6LTEwLHBvcnRhbWVudG86MCxvc2NpbGxhdG9yOnt0eXBlOlwic2luZVwifSxmaWx0ZXJFbnZlbG9wZTp7YXR0YWNrOi4wMSxkZWNheTowLHN1c3RhaW46MSxyZWxlYXNlOi41fSxlbnZlbG9wZTp7YXR0YWNrOi4wMSxkZWNheTowLHN1c3RhaW46MSxyZWxlYXNlOi41fX0sdm9pY2UxOnt2b2x1bWU6LTEwLHBvcnRhbWVudG86MCxvc2NpbGxhdG9yOnt0eXBlOlwic2luZVwifSxmaWx0ZXJFbnZlbG9wZTp7YXR0YWNrOi4wMSxkZWNheTowLHN1c3RhaW46MSxyZWxlYXNlOi41fSxlbnZlbG9wZTp7YXR0YWNrOi4wMSxkZWNheTowLHN1c3RhaW46MSxyZWxlYXNlOi41fX19LHMuZGVmYXVsdC5EdW9TeW50aC5wcm90b3R5cGUuX3RyaWdnZXJFbnZlbG9wZUF0dGFjaz1mdW5jdGlvbih0LGUpe3JldHVybiB0PXRoaXMudG9TZWNvbmRzKHQpLHRoaXMudm9pY2UwLl90cmlnZ2VyRW52ZWxvcGVBdHRhY2sodCxlKSx0aGlzLnZvaWNlMS5fdHJpZ2dlckVudmVsb3BlQXR0YWNrKHQsZSksdGhpc30scy5kZWZhdWx0LkR1b1N5bnRoLnByb3RvdHlwZS5fdHJpZ2dlckVudmVsb3BlUmVsZWFzZT1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcy52b2ljZTAuX3RyaWdnZXJFbnZlbG9wZVJlbGVhc2UodCksdGhpcy52b2ljZTEuX3RyaWdnZXJFbnZlbG9wZVJlbGVhc2UodCksdGhpc30scy5kZWZhdWx0LkR1b1N5bnRoLnByb3RvdHlwZS5nZXRMZXZlbEF0VGltZT1mdW5jdGlvbih0KXtyZXR1cm4odGhpcy52b2ljZTAuZ2V0TGV2ZWxBdFRpbWUodCkrdGhpcy52b2ljZTEuZ2V0TGV2ZWxBdFRpbWUodCkpLzJ9LHMuZGVmYXVsdC5EdW9TeW50aC5wcm90b3R5cGUuZGlzcG9zZT1mdW5jdGlvbigpe3JldHVybiBzLmRlZmF1bHQuTW9ub3Bob25pYy5wcm90b3R5cGUuZGlzcG9zZS5jYWxsKHRoaXMpLHRoaXMuX3dyaXRhYmxlKFtcInZvaWNlMFwiLFwidm9pY2UxXCIsXCJmcmVxdWVuY3lcIixcInZpYnJhdG9BbW91bnRcIixcInZpYnJhdG9SYXRlXCJdKSx0aGlzLnZvaWNlMC5kaXNwb3NlKCksdGhpcy52b2ljZTA9bnVsbCx0aGlzLnZvaWNlMS5kaXNwb3NlKCksdGhpcy52b2ljZTE9bnVsbCx0aGlzLmZyZXF1ZW5jeS5kaXNwb3NlKCksdGhpcy5mcmVxdWVuY3k9bnVsbCx0aGlzLl92aWJyYXRvR2Fpbi5kaXNwb3NlKCksdGhpcy5fdmlicmF0b0dhaW49bnVsbCx0aGlzLl92aWJyYXRvPW51bGwsdGhpcy5oYXJtb25pY2l0eS5kaXNwb3NlKCksdGhpcy5oYXJtb25pY2l0eT1udWxsLHRoaXMudmlicmF0b0Ftb3VudC5kaXNwb3NlKCksdGhpcy52aWJyYXRvQW1vdW50PW51bGwsdGhpcy52aWJyYXRvUmF0ZT1udWxsLHRoaXN9LGUuZGVmYXVsdD1zLmRlZmF1bHQuRHVvU3ludGh9LGZ1bmN0aW9uKHQsZSxpKXtcInVzZSBzdHJpY3RcIjtpLnIoZSk7dmFyIHM9aSgwKTtpKDM4KSxpKDIpLGkoNSksaSgyNSksaSgyMiksaSgzKTtzLmRlZmF1bHQuQU1TeW50aD1mdW5jdGlvbih0KXt0PXMuZGVmYXVsdC5kZWZhdWx0QXJnKHQscy5kZWZhdWx0LkFNU3ludGguZGVmYXVsdHMpLHMuZGVmYXVsdC5Nb25vcGhvbmljLmNhbGwodGhpcyx0KSx0aGlzLl9jYXJyaWVyPW5ldyBzLmRlZmF1bHQuU3ludGgsdGhpcy5fY2Fycmllci52b2x1bWUudmFsdWU9LTEwLHRoaXMub3NjaWxsYXRvcj10aGlzLl9jYXJyaWVyLm9zY2lsbGF0b3Iuc2V0KHQub3NjaWxsYXRvciksdGhpcy5lbnZlbG9wZT10aGlzLl9jYXJyaWVyLmVudmVsb3BlLnNldCh0LmVudmVsb3BlKSx0aGlzLl9tb2R1bGF0b3I9bmV3IHMuZGVmYXVsdC5TeW50aCx0aGlzLl9tb2R1bGF0b3Iudm9sdW1lLnZhbHVlPS0xMCx0aGlzLm1vZHVsYXRpb249dGhpcy5fbW9kdWxhdG9yLm9zY2lsbGF0b3Iuc2V0KHQubW9kdWxhdGlvbiksdGhpcy5tb2R1bGF0aW9uRW52ZWxvcGU9dGhpcy5fbW9kdWxhdG9yLmVudmVsb3BlLnNldCh0Lm1vZHVsYXRpb25FbnZlbG9wZSksdGhpcy5mcmVxdWVuY3k9bmV3IHMuZGVmYXVsdC5TaWduYWwoNDQwLHMuZGVmYXVsdC5UeXBlLkZyZXF1ZW5jeSksdGhpcy5kZXR1bmU9bmV3IHMuZGVmYXVsdC5TaWduYWwodC5kZXR1bmUscy5kZWZhdWx0LlR5cGUuQ2VudHMpLHRoaXMuaGFybW9uaWNpdHk9bmV3IHMuZGVmYXVsdC5NdWx0aXBseSh0Lmhhcm1vbmljaXR5KSx0aGlzLmhhcm1vbmljaXR5LnVuaXRzPXMuZGVmYXVsdC5UeXBlLlBvc2l0aXZlLHRoaXMuX21vZHVsYXRpb25TY2FsZT1uZXcgcy5kZWZhdWx0LkF1ZGlvVG9HYWluLHRoaXMuX21vZHVsYXRpb25Ob2RlPW5ldyBzLmRlZmF1bHQuR2Fpbix0aGlzLmZyZXF1ZW5jeS5jb25uZWN0KHRoaXMuX2NhcnJpZXIuZnJlcXVlbmN5KSx0aGlzLmZyZXF1ZW5jeS5jaGFpbih0aGlzLmhhcm1vbmljaXR5LHRoaXMuX21vZHVsYXRvci5mcmVxdWVuY3kpLHRoaXMuZGV0dW5lLmZhbih0aGlzLl9jYXJyaWVyLmRldHVuZSx0aGlzLl9tb2R1bGF0b3IuZGV0dW5lKSx0aGlzLl9tb2R1bGF0b3IuY2hhaW4odGhpcy5fbW9kdWxhdGlvblNjYWxlLHRoaXMuX21vZHVsYXRpb25Ob2RlLmdhaW4pLHRoaXMuX2NhcnJpZXIuY2hhaW4odGhpcy5fbW9kdWxhdGlvbk5vZGUsdGhpcy5vdXRwdXQpLHRoaXMuX3JlYWRPbmx5KFtcImZyZXF1ZW5jeVwiLFwiaGFybW9uaWNpdHlcIixcIm9zY2lsbGF0b3JcIixcImVudmVsb3BlXCIsXCJtb2R1bGF0aW9uXCIsXCJtb2R1bGF0aW9uRW52ZWxvcGVcIixcImRldHVuZVwiXSl9LHMuZGVmYXVsdC5leHRlbmQocy5kZWZhdWx0LkFNU3ludGgscy5kZWZhdWx0Lk1vbm9waG9uaWMpLHMuZGVmYXVsdC5BTVN5bnRoLmRlZmF1bHRzPXtoYXJtb25pY2l0eTozLGRldHVuZTowLG9zY2lsbGF0b3I6e3R5cGU6XCJzaW5lXCJ9LGVudmVsb3BlOnthdHRhY2s6LjAxLGRlY2F5Oi4wMSxzdXN0YWluOjEscmVsZWFzZTouNX0sbW9kdWxhdGlvbjp7dHlwZTpcInNxdWFyZVwifSxtb2R1bGF0aW9uRW52ZWxvcGU6e2F0dGFjazouNSxkZWNheTowLHN1c3RhaW46MSxyZWxlYXNlOi41fX0scy5kZWZhdWx0LkFNU3ludGgucHJvdG90eXBlLl90cmlnZ2VyRW52ZWxvcGVBdHRhY2s9ZnVuY3Rpb24odCxlKXtyZXR1cm4gdD10aGlzLnRvU2Vjb25kcyh0KSx0aGlzLl9jYXJyaWVyLl90cmlnZ2VyRW52ZWxvcGVBdHRhY2sodCxlKSx0aGlzLl9tb2R1bGF0b3IuX3RyaWdnZXJFbnZlbG9wZUF0dGFjayh0KSx0aGlzfSxzLmRlZmF1bHQuQU1TeW50aC5wcm90b3R5cGUuX3RyaWdnZXJFbnZlbG9wZVJlbGVhc2U9ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuX2NhcnJpZXIuX3RyaWdnZXJFbnZlbG9wZVJlbGVhc2UodCksdGhpcy5fbW9kdWxhdG9yLl90cmlnZ2VyRW52ZWxvcGVSZWxlYXNlKHQpLHRoaXN9LHMuZGVmYXVsdC5BTVN5bnRoLnByb3RvdHlwZS5kaXNwb3NlPWZ1bmN0aW9uKCl7cmV0dXJuIHMuZGVmYXVsdC5Nb25vcGhvbmljLnByb3RvdHlwZS5kaXNwb3NlLmNhbGwodGhpcyksdGhpcy5fd3JpdGFibGUoW1wiZnJlcXVlbmN5XCIsXCJoYXJtb25pY2l0eVwiLFwib3NjaWxsYXRvclwiLFwiZW52ZWxvcGVcIixcIm1vZHVsYXRpb25cIixcIm1vZHVsYXRpb25FbnZlbG9wZVwiLFwiZGV0dW5lXCJdKSx0aGlzLl9jYXJyaWVyLmRpc3Bvc2UoKSx0aGlzLl9jYXJyaWVyPW51bGwsdGhpcy5fbW9kdWxhdG9yLmRpc3Bvc2UoKSx0aGlzLl9tb2R1bGF0b3I9bnVsbCx0aGlzLmZyZXF1ZW5jeS5kaXNwb3NlKCksdGhpcy5mcmVxdWVuY3k9bnVsbCx0aGlzLmRldHVuZS5kaXNwb3NlKCksdGhpcy5kZXR1bmU9bnVsbCx0aGlzLmhhcm1vbmljaXR5LmRpc3Bvc2UoKSx0aGlzLmhhcm1vbmljaXR5PW51bGwsdGhpcy5fbW9kdWxhdGlvblNjYWxlLmRpc3Bvc2UoKSx0aGlzLl9tb2R1bGF0aW9uU2NhbGU9bnVsbCx0aGlzLl9tb2R1bGF0aW9uTm9kZS5kaXNwb3NlKCksdGhpcy5fbW9kdWxhdGlvbk5vZGU9bnVsbCx0aGlzLm9zY2lsbGF0b3I9bnVsbCx0aGlzLmVudmVsb3BlPW51bGwsdGhpcy5tb2R1bGF0aW9uRW52ZWxvcGU9bnVsbCx0aGlzLm1vZHVsYXRpb249bnVsbCx0aGlzfSxlLmRlZmF1bHQ9cy5kZWZhdWx0LkFNU3ludGh9LGZ1bmN0aW9uKHQsZSxpKXtcInVzZSBzdHJpY3RcIjtpLnIoZSk7dmFyIHM9aSgwKTtpKDcwKSxpKDE2KTtzLmRlZmF1bHQuU2VxdWVuY2U9ZnVuY3Rpb24oKXt2YXIgdD1zLmRlZmF1bHQuZGVmYXVsdHMoYXJndW1lbnRzLFtcImNhbGxiYWNrXCIsXCJldmVudHNcIixcInN1YmRpdmlzaW9uXCJdLHMuZGVmYXVsdC5TZXF1ZW5jZSksZT10LmV2ZW50cztpZihkZWxldGUgdC5ldmVudHMscy5kZWZhdWx0LlBhcnQuY2FsbCh0aGlzLHQpLHRoaXMuX3N1YmRpdmlzaW9uPXRoaXMudG9UaWNrcyh0LnN1YmRpdmlzaW9uKSxzLmRlZmF1bHQuaXNVbmRlZih0Lmxvb3BFbmQpJiZzLmRlZmF1bHQuaXNEZWZpbmVkKGUpJiYodGhpcy5fbG9vcEVuZD1lLmxlbmd0aCp0aGlzLl9zdWJkaXZpc2lvbiksdGhpcy5fbG9vcD0hMCxzLmRlZmF1bHQuaXNEZWZpbmVkKGUpKWZvcih2YXIgaT0wO2k8ZS5sZW5ndGg7aSsrKXRoaXMuYWRkKGksZVtpXSl9LHMuZGVmYXVsdC5leHRlbmQocy5kZWZhdWx0LlNlcXVlbmNlLHMuZGVmYXVsdC5QYXJ0KSxzLmRlZmF1bHQuU2VxdWVuY2UuZGVmYXVsdHM9e3N1YmRpdmlzaW9uOlwiNG5cIn0sT2JqZWN0LmRlZmluZVByb3BlcnR5KHMuZGVmYXVsdC5TZXF1ZW5jZS5wcm90b3R5cGUsXCJzdWJkaXZpc2lvblwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gcy5kZWZhdWx0LlRpY2tzKHRoaXMuX3N1YmRpdmlzaW9uKS50b1NlY29uZHMoKX19KSxzLmRlZmF1bHQuU2VxdWVuY2UucHJvdG90eXBlLmF0PWZ1bmN0aW9uKHQsZSl7cmV0dXJuIHMuZGVmYXVsdC5pc0FycmF5KGUpJiZ0aGlzLnJlbW92ZSh0KSxzLmRlZmF1bHQuUGFydC5wcm90b3R5cGUuYXQuY2FsbCh0aGlzLHRoaXMuX2luZGV4VGltZSh0KSxlKX0scy5kZWZhdWx0LlNlcXVlbmNlLnByb3RvdHlwZS5hZGQ9ZnVuY3Rpb24odCxlKXtpZihudWxsPT09ZSlyZXR1cm4gdGhpcztpZihzLmRlZmF1bHQuaXNBcnJheShlKSl7dmFyIGk9TWF0aC5yb3VuZCh0aGlzLl9zdWJkaXZpc2lvbi9lLmxlbmd0aCk7ZT1uZXcgcy5kZWZhdWx0LlNlcXVlbmNlKHRoaXMuX3RpY2suYmluZCh0aGlzKSxlLHMuZGVmYXVsdC5UaWNrcyhpKSl9cmV0dXJuIHMuZGVmYXVsdC5QYXJ0LnByb3RvdHlwZS5hZGQuY2FsbCh0aGlzLHRoaXMuX2luZGV4VGltZSh0KSxlKSx0aGlzfSxzLmRlZmF1bHQuU2VxdWVuY2UucHJvdG90eXBlLnJlbW92ZT1mdW5jdGlvbih0LGUpe3JldHVybiBzLmRlZmF1bHQuUGFydC5wcm90b3R5cGUucmVtb3ZlLmNhbGwodGhpcyx0aGlzLl9pbmRleFRpbWUodCksZSksdGhpc30scy5kZWZhdWx0LlNlcXVlbmNlLnByb3RvdHlwZS5faW5kZXhUaW1lPWZ1bmN0aW9uKHQpe3JldHVybiB0IGluc3RhbmNlb2Ygcy5kZWZhdWx0LlRyYW5zcG9ydFRpbWU/dDpzLmRlZmF1bHQuVGlja3ModCp0aGlzLl9zdWJkaXZpc2lvbit0aGlzLnN0YXJ0T2Zmc2V0KS50b1NlY29uZHMoKX0scy5kZWZhdWx0LlNlcXVlbmNlLnByb3RvdHlwZS5kaXNwb3NlPWZ1bmN0aW9uKCl7cmV0dXJuIHMuZGVmYXVsdC5QYXJ0LnByb3RvdHlwZS5kaXNwb3NlLmNhbGwodGhpcyksdGhpc30sZS5kZWZhdWx0PXMuZGVmYXVsdC5TZXF1ZW5jZX0sZnVuY3Rpb24odCxlLGkpe1widXNlIHN0cmljdFwiO2kucihlKTt2YXIgcz1pKDApO2koNzEpLGkoNzkpO3MuZGVmYXVsdC5QYXR0ZXJuPWZ1bmN0aW9uKCl7dmFyIHQ9cy5kZWZhdWx0LmRlZmF1bHRzKGFyZ3VtZW50cyxbXCJjYWxsYmFja1wiLFwidmFsdWVzXCIsXCJwYXR0ZXJuXCJdLHMuZGVmYXVsdC5QYXR0ZXJuKTtzLmRlZmF1bHQuTG9vcC5jYWxsKHRoaXMsdCksdGhpcy5fcGF0dGVybj1uZXcgcy5kZWZhdWx0LkN0cmxQYXR0ZXJuKHt2YWx1ZXM6dC52YWx1ZXMsdHlwZTp0LnBhdHRlcm4saW5kZXg6dC5pbmRleH0pfSxzLmRlZmF1bHQuZXh0ZW5kKHMuZGVmYXVsdC5QYXR0ZXJuLHMuZGVmYXVsdC5Mb29wKSxzLmRlZmF1bHQuUGF0dGVybi5kZWZhdWx0cz17cGF0dGVybjpzLmRlZmF1bHQuQ3RybFBhdHRlcm4uVHlwZS5VcCxjYWxsYmFjazpzLmRlZmF1bHQubm9PcCx2YWx1ZXM6W119LHMuZGVmYXVsdC5QYXR0ZXJuLnByb3RvdHlwZS5fdGljaz1mdW5jdGlvbih0KXt0aGlzLmNhbGxiYWNrKHQsdGhpcy5fcGF0dGVybi52YWx1ZSksdGhpcy5fcGF0dGVybi5uZXh0KCl9LE9iamVjdC5kZWZpbmVQcm9wZXJ0eShzLmRlZmF1bHQuUGF0dGVybi5wcm90b3R5cGUsXCJpbmRleFwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fcGF0dGVybi5pbmRleH0sc2V0OmZ1bmN0aW9uKHQpe3RoaXMuX3BhdHRlcm4uaW5kZXg9dH19KSxPYmplY3QuZGVmaW5lUHJvcGVydHkocy5kZWZhdWx0LlBhdHRlcm4ucHJvdG90eXBlLFwidmFsdWVzXCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9wYXR0ZXJuLnZhbHVlc30sc2V0OmZ1bmN0aW9uKHQpe3RoaXMuX3BhdHRlcm4udmFsdWVzPXR9fSksT2JqZWN0LmRlZmluZVByb3BlcnR5KHMuZGVmYXVsdC5QYXR0ZXJuLnByb3RvdHlwZSxcInZhbHVlXCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9wYXR0ZXJuLnZhbHVlfX0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShzLmRlZmF1bHQuUGF0dGVybi5wcm90b3R5cGUsXCJwYXR0ZXJuXCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9wYXR0ZXJuLnR5cGV9LHNldDpmdW5jdGlvbih0KXt0aGlzLl9wYXR0ZXJuLnR5cGU9dH19KSxzLmRlZmF1bHQuUGF0dGVybi5wcm90b3R5cGUuZGlzcG9zZT1mdW5jdGlvbigpe3MuZGVmYXVsdC5Mb29wLnByb3RvdHlwZS5kaXNwb3NlLmNhbGwodGhpcyksdGhpcy5fcGF0dGVybi5kaXNwb3NlKCksdGhpcy5fcGF0dGVybj1udWxsfSxlLmRlZmF1bHQ9cy5kZWZhdWx0LlBhdHRlcm59LGZ1bmN0aW9uKHQsZSxpKXtcInVzZSBzdHJpY3RcIjtpLnIoZSk7dmFyIHM9aSgwKTtpKDgpLGkoMTgpLGkoMTIpO3MuZGVmYXVsdC5WaWJyYXRvPWZ1bmN0aW9uKCl7dmFyIHQ9cy5kZWZhdWx0LmRlZmF1bHRzKGFyZ3VtZW50cyxbXCJmcmVxdWVuY3lcIixcImRlcHRoXCJdLHMuZGVmYXVsdC5WaWJyYXRvKTtzLmRlZmF1bHQuRWZmZWN0LmNhbGwodGhpcyx0KSx0aGlzLl9kZWxheU5vZGU9bmV3IHMuZGVmYXVsdC5EZWxheSgwLHQubWF4RGVsYXkpLHRoaXMuX2xmbz1uZXcgcy5kZWZhdWx0LkxGTyh7dHlwZTp0LnR5cGUsbWluOjAsbWF4OnQubWF4RGVsYXksZnJlcXVlbmN5OnQuZnJlcXVlbmN5LHBoYXNlOi05MH0pLnN0YXJ0KCkuY29ubmVjdCh0aGlzLl9kZWxheU5vZGUuZGVsYXlUaW1lKSx0aGlzLmZyZXF1ZW5jeT10aGlzLl9sZm8uZnJlcXVlbmN5LHRoaXMuZGVwdGg9dGhpcy5fbGZvLmFtcGxpdHVkZSx0aGlzLmRlcHRoLnZhbHVlPXQuZGVwdGgsdGhpcy5fcmVhZE9ubHkoW1wiZnJlcXVlbmN5XCIsXCJkZXB0aFwiXSksdGhpcy5lZmZlY3RTZW5kLmNoYWluKHRoaXMuX2RlbGF5Tm9kZSx0aGlzLmVmZmVjdFJldHVybil9LHMuZGVmYXVsdC5leHRlbmQocy5kZWZhdWx0LlZpYnJhdG8scy5kZWZhdWx0LkVmZmVjdCkscy5kZWZhdWx0LlZpYnJhdG8uZGVmYXVsdHM9e21heERlbGF5Oi4wMDUsZnJlcXVlbmN5OjUsZGVwdGg6LjEsdHlwZTpcInNpbmVcIn0sT2JqZWN0LmRlZmluZVByb3BlcnR5KHMuZGVmYXVsdC5WaWJyYXRvLnByb3RvdHlwZSxcInR5cGVcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2xmby50eXBlfSxzZXQ6ZnVuY3Rpb24odCl7dGhpcy5fbGZvLnR5cGU9dH19KSxzLmRlZmF1bHQuVmlicmF0by5wcm90b3R5cGUuZGlzcG9zZT1mdW5jdGlvbigpe3MuZGVmYXVsdC5FZmZlY3QucHJvdG90eXBlLmRpc3Bvc2UuY2FsbCh0aGlzKSx0aGlzLl9kZWxheU5vZGUuZGlzcG9zZSgpLHRoaXMuX2RlbGF5Tm9kZT1udWxsLHRoaXMuX2xmby5kaXNwb3NlKCksdGhpcy5fbGZvPW51bGwsdGhpcy5fd3JpdGFibGUoW1wiZnJlcXVlbmN5XCIsXCJkZXB0aFwiXSksdGhpcy5mcmVxdWVuY3k9bnVsbCx0aGlzLmRlcHRoPW51bGx9LGUuZGVmYXVsdD1zLmRlZmF1bHQuVmlicmF0b30sZnVuY3Rpb24odCxlLGkpe1widXNlIHN0cmljdFwiO2kucihlKTt2YXIgcz1pKDApO2koMTIpLGkoMTUpO3MuZGVmYXVsdC5UcmVtb2xvPWZ1bmN0aW9uKCl7dmFyIHQ9cy5kZWZhdWx0LmRlZmF1bHRzKGFyZ3VtZW50cyxbXCJmcmVxdWVuY3lcIixcImRlcHRoXCJdLHMuZGVmYXVsdC5UcmVtb2xvKTtzLmRlZmF1bHQuU3RlcmVvRWZmZWN0LmNhbGwodGhpcyx0KSx0aGlzLl9sZm9MPW5ldyBzLmRlZmF1bHQuTEZPKHtwaGFzZTp0LnNwcmVhZCxtaW46MSxtYXg6MH0pLHRoaXMuX2xmb1I9bmV3IHMuZGVmYXVsdC5MRk8oe3BoYXNlOnQuc3ByZWFkLG1pbjoxLG1heDowfSksdGhpcy5fYW1wbGl0dWRlTD1uZXcgcy5kZWZhdWx0LkdhaW4sdGhpcy5fYW1wbGl0dWRlUj1uZXcgcy5kZWZhdWx0LkdhaW4sdGhpcy5mcmVxdWVuY3k9bmV3IHMuZGVmYXVsdC5TaWduYWwodC5mcmVxdWVuY3kscy5kZWZhdWx0LlR5cGUuRnJlcXVlbmN5KSx0aGlzLmRlcHRoPW5ldyBzLmRlZmF1bHQuU2lnbmFsKHQuZGVwdGgscy5kZWZhdWx0LlR5cGUuTm9ybWFsUmFuZ2UpLHRoaXMuX3JlYWRPbmx5KFtcImZyZXF1ZW5jeVwiLFwiZGVwdGhcIl0pLHRoaXMuZWZmZWN0U2VuZEwuY2hhaW4odGhpcy5fYW1wbGl0dWRlTCx0aGlzLmVmZmVjdFJldHVybkwpLHRoaXMuZWZmZWN0U2VuZFIuY2hhaW4odGhpcy5fYW1wbGl0dWRlUix0aGlzLmVmZmVjdFJldHVyblIpLHRoaXMuX2xmb0wuY29ubmVjdCh0aGlzLl9hbXBsaXR1ZGVMLmdhaW4pLHRoaXMuX2xmb1IuY29ubmVjdCh0aGlzLl9hbXBsaXR1ZGVSLmdhaW4pLHRoaXMuZnJlcXVlbmN5LmZhbih0aGlzLl9sZm9MLmZyZXF1ZW5jeSx0aGlzLl9sZm9SLmZyZXF1ZW5jeSksdGhpcy5kZXB0aC5mYW4odGhpcy5fbGZvUi5hbXBsaXR1ZGUsdGhpcy5fbGZvTC5hbXBsaXR1ZGUpLHRoaXMudHlwZT10LnR5cGUsdGhpcy5zcHJlYWQ9dC5zcHJlYWR9LHMuZGVmYXVsdC5leHRlbmQocy5kZWZhdWx0LlRyZW1vbG8scy5kZWZhdWx0LlN0ZXJlb0VmZmVjdCkscy5kZWZhdWx0LlRyZW1vbG8uZGVmYXVsdHM9e2ZyZXF1ZW5jeToxMCx0eXBlOlwic2luZVwiLGRlcHRoOi41LHNwcmVhZDoxODB9LHMuZGVmYXVsdC5UcmVtb2xvLnByb3RvdHlwZS5zdGFydD1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5fbGZvTC5zdGFydCh0KSx0aGlzLl9sZm9SLnN0YXJ0KHQpLHRoaXN9LHMuZGVmYXVsdC5UcmVtb2xvLnByb3RvdHlwZS5zdG9wPWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLl9sZm9MLnN0b3AodCksdGhpcy5fbGZvUi5zdG9wKHQpLHRoaXN9LHMuZGVmYXVsdC5UcmVtb2xvLnByb3RvdHlwZS5zeW5jPWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLl9sZm9MLnN5bmModCksdGhpcy5fbGZvUi5zeW5jKHQpLHMuZGVmYXVsdC5UcmFuc3BvcnQuc3luY1NpZ25hbCh0aGlzLmZyZXF1ZW5jeSksdGhpc30scy5kZWZhdWx0LlRyZW1vbG8ucHJvdG90eXBlLnVuc3luYz1mdW5jdGlvbigpe3JldHVybiB0aGlzLl9sZm9MLnVuc3luYygpLHRoaXMuX2xmb1IudW5zeW5jKCkscy5kZWZhdWx0LlRyYW5zcG9ydC51bnN5bmNTaWduYWwodGhpcy5mcmVxdWVuY3kpLHRoaXN9LE9iamVjdC5kZWZpbmVQcm9wZXJ0eShzLmRlZmF1bHQuVHJlbW9sby5wcm90b3R5cGUsXCJ0eXBlXCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9sZm9MLnR5cGV9LHNldDpmdW5jdGlvbih0KXt0aGlzLl9sZm9MLnR5cGU9dCx0aGlzLl9sZm9SLnR5cGU9dH19KSxPYmplY3QuZGVmaW5lUHJvcGVydHkocy5kZWZhdWx0LlRyZW1vbG8ucHJvdG90eXBlLFwic3ByZWFkXCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9sZm9SLnBoYXNlLXRoaXMuX2xmb0wucGhhc2V9LHNldDpmdW5jdGlvbih0KXt0aGlzLl9sZm9MLnBoYXNlPTkwLXQvMix0aGlzLl9sZm9SLnBoYXNlPXQvMis5MH19KSxzLmRlZmF1bHQuVHJlbW9sby5wcm90b3R5cGUuZGlzcG9zZT1mdW5jdGlvbigpe3JldHVybiBzLmRlZmF1bHQuU3RlcmVvRWZmZWN0LnByb3RvdHlwZS5kaXNwb3NlLmNhbGwodGhpcyksdGhpcy5fd3JpdGFibGUoW1wiZnJlcXVlbmN5XCIsXCJkZXB0aFwiXSksdGhpcy5fbGZvTC5kaXNwb3NlKCksdGhpcy5fbGZvTD1udWxsLHRoaXMuX2xmb1IuZGlzcG9zZSgpLHRoaXMuX2xmb1I9bnVsbCx0aGlzLl9hbXBsaXR1ZGVMLmRpc3Bvc2UoKSx0aGlzLl9hbXBsaXR1ZGVMPW51bGwsdGhpcy5fYW1wbGl0dWRlUi5kaXNwb3NlKCksdGhpcy5fYW1wbGl0dWRlUj1udWxsLHRoaXMuZnJlcXVlbmN5PW51bGwsdGhpcy5kZXB0aD1udWxsLHRoaXN9LGUuZGVmYXVsdD1zLmRlZmF1bHQuVHJlbW9sb30sZnVuY3Rpb24odCxlLGkpe1widXNlIHN0cmljdFwiO2kucihlKTt2YXIgcz1pKDApO2koNzMpLGkoMiksaSg1KSxpKDEzKTtzLmRlZmF1bHQuU3RlcmVvV2lkZW5lcj1mdW5jdGlvbigpe3ZhciB0PXMuZGVmYXVsdC5kZWZhdWx0cyhhcmd1bWVudHMsW1wid2lkdGhcIl0scy5kZWZhdWx0LlN0ZXJlb1dpZGVuZXIpO3MuZGVmYXVsdC5NaWRTaWRlRWZmZWN0LmNhbGwodGhpcyx0KSx0aGlzLndpZHRoPW5ldyBzLmRlZmF1bHQuU2lnbmFsKHQud2lkdGgscy5kZWZhdWx0LlR5cGUuTm9ybWFsUmFuZ2UpLHRoaXMuX3JlYWRPbmx5KFtcIndpZHRoXCJdKSx0aGlzLl90d29UaW1lc1dpZHRoTWlkPW5ldyBzLmRlZmF1bHQuTXVsdGlwbHkoMiksdGhpcy5fdHdvVGltZXNXaWR0aFNpZGU9bmV3IHMuZGVmYXVsdC5NdWx0aXBseSgyKSx0aGlzLl9taWRNdWx0PW5ldyBzLmRlZmF1bHQuTXVsdGlwbHksdGhpcy5fdHdvVGltZXNXaWR0aE1pZC5jb25uZWN0KHRoaXMuX21pZE11bHQsMCwxKSx0aGlzLm1pZFNlbmQuY2hhaW4odGhpcy5fbWlkTXVsdCx0aGlzLm1pZFJldHVybiksdGhpcy5fb25lTWludXNXaWR0aD1uZXcgcy5kZWZhdWx0LlN1YnRyYWN0LHRoaXMuX29uZU1pbnVzV2lkdGguY29ubmVjdCh0aGlzLl90d29UaW1lc1dpZHRoTWlkKSxzLmRlZmF1bHQuY29ubmVjdCh0aGlzLmNvbnRleHQuZ2V0Q29uc3RhbnQoMSksdGhpcy5fb25lTWludXNXaWR0aCwwLDApLHRoaXMud2lkdGguY29ubmVjdCh0aGlzLl9vbmVNaW51c1dpZHRoLDAsMSksdGhpcy5fc2lkZU11bHQ9bmV3IHMuZGVmYXVsdC5NdWx0aXBseSx0aGlzLndpZHRoLmNvbm5lY3QodGhpcy5fdHdvVGltZXNXaWR0aFNpZGUpLHRoaXMuX3R3b1RpbWVzV2lkdGhTaWRlLmNvbm5lY3QodGhpcy5fc2lkZU11bHQsMCwxKSx0aGlzLnNpZGVTZW5kLmNoYWluKHRoaXMuX3NpZGVNdWx0LHRoaXMuc2lkZVJldHVybil9LHMuZGVmYXVsdC5leHRlbmQocy5kZWZhdWx0LlN0ZXJlb1dpZGVuZXIscy5kZWZhdWx0Lk1pZFNpZGVFZmZlY3QpLHMuZGVmYXVsdC5TdGVyZW9XaWRlbmVyLmRlZmF1bHRzPXt3aWR0aDouNX0scy5kZWZhdWx0LlN0ZXJlb1dpZGVuZXIucHJvdG90eXBlLmRpc3Bvc2U9ZnVuY3Rpb24oKXtyZXR1cm4gcy5kZWZhdWx0Lk1pZFNpZGVFZmZlY3QucHJvdG90eXBlLmRpc3Bvc2UuY2FsbCh0aGlzKSx0aGlzLl93cml0YWJsZShbXCJ3aWR0aFwiXSksdGhpcy53aWR0aC5kaXNwb3NlKCksdGhpcy53aWR0aD1udWxsLHRoaXMuX21pZE11bHQuZGlzcG9zZSgpLHRoaXMuX21pZE11bHQ9bnVsbCx0aGlzLl9zaWRlTXVsdC5kaXNwb3NlKCksdGhpcy5fc2lkZU11bHQ9bnVsbCx0aGlzLl90d29UaW1lc1dpZHRoTWlkLmRpc3Bvc2UoKSx0aGlzLl90d29UaW1lc1dpZHRoTWlkPW51bGwsdGhpcy5fdHdvVGltZXNXaWR0aFNpZGUuZGlzcG9zZSgpLHRoaXMuX3R3b1RpbWVzV2lkdGhTaWRlPW51bGwsdGhpcy5fb25lTWludXNXaWR0aC5kaXNwb3NlKCksdGhpcy5fb25lTWludXNXaWR0aD1udWxsLHRoaXN9LGUuZGVmYXVsdD1zLmRlZmF1bHQuU3RlcmVvV2lkZW5lcn0sZnVuY3Rpb24odCxlLGkpe1widXNlIHN0cmljdFwiO2kucihlKTt2YXIgcz1pKDApO2koMTUpLGkoMzMpLGkoMyk7cy5kZWZhdWx0LlN0ZXJlb0ZlZWRiYWNrRWZmZWN0PWZ1bmN0aW9uKCl7dmFyIHQ9cy5kZWZhdWx0LmRlZmF1bHRzKGFyZ3VtZW50cyxbXCJmZWVkYmFja1wiXSxzLmRlZmF1bHQuRmVlZGJhY2tFZmZlY3QpO3MuZGVmYXVsdC5TdGVyZW9FZmZlY3QuY2FsbCh0aGlzLHQpLHRoaXMuZmVlZGJhY2s9bmV3IHMuZGVmYXVsdC5TaWduYWwodC5mZWVkYmFjayxzLmRlZmF1bHQuVHlwZS5Ob3JtYWxSYW5nZSksdGhpcy5fZmVlZGJhY2tMPW5ldyBzLmRlZmF1bHQuR2Fpbix0aGlzLl9mZWVkYmFja1I9bmV3IHMuZGVmYXVsdC5HYWluLHRoaXMuZWZmZWN0UmV0dXJuTC5jaGFpbih0aGlzLl9mZWVkYmFja0wsdGhpcy5lZmZlY3RTZW5kTCksdGhpcy5lZmZlY3RSZXR1cm5SLmNoYWluKHRoaXMuX2ZlZWRiYWNrUix0aGlzLmVmZmVjdFNlbmRSKSx0aGlzLmZlZWRiYWNrLmZhbih0aGlzLl9mZWVkYmFja0wuZ2Fpbix0aGlzLl9mZWVkYmFja1IuZ2FpbiksdGhpcy5fcmVhZE9ubHkoW1wiZmVlZGJhY2tcIl0pfSxzLmRlZmF1bHQuZXh0ZW5kKHMuZGVmYXVsdC5TdGVyZW9GZWVkYmFja0VmZmVjdCxzLmRlZmF1bHQuU3RlcmVvRWZmZWN0KSxzLmRlZmF1bHQuU3RlcmVvRmVlZGJhY2tFZmZlY3QucHJvdG90eXBlLmRpc3Bvc2U9ZnVuY3Rpb24oKXtyZXR1cm4gcy5kZWZhdWx0LlN0ZXJlb0VmZmVjdC5wcm90b3R5cGUuZGlzcG9zZS5jYWxsKHRoaXMpLHRoaXMuX3dyaXRhYmxlKFtcImZlZWRiYWNrXCJdKSx0aGlzLmZlZWRiYWNrLmRpc3Bvc2UoKSx0aGlzLmZlZWRiYWNrPW51bGwsdGhpcy5fZmVlZGJhY2tMLmRpc3Bvc2UoKSx0aGlzLl9mZWVkYmFja0w9bnVsbCx0aGlzLl9mZWVkYmFja1IuZGlzcG9zZSgpLHRoaXMuX2ZlZWRiYWNrUj1udWxsLHRoaXN9LGUuZGVmYXVsdD1zLmRlZmF1bHQuU3RlcmVvRmVlZGJhY2tFZmZlY3R9LGZ1bmN0aW9uKHQsZSxpKXtcInVzZSBzdHJpY3RcIjtpLnIoZSk7dmFyIHM9aSgwKTtpKDc3KSxpKDkpLGkoMTApLGkoMzkpLGkoMyksaSg3NCk7cy5kZWZhdWx0LlJldmVyYj1mdW5jdGlvbigpe3ZhciB0PXMuZGVmYXVsdC5kZWZhdWx0cyhhcmd1bWVudHMsW1wiZGVjYXlcIl0scy5kZWZhdWx0LlJldmVyYik7cy5kZWZhdWx0LkVmZmVjdC5jYWxsKHRoaXMsdCksdGhpcy5fY29udm9sdmVyPXRoaXMuY29udGV4dC5jcmVhdGVDb252b2x2ZXIoKSx0aGlzLmRlY2F5PXQuZGVjYXksdGhpcy5wcmVEZWxheT10LnByZURlbGF5LHRoaXMuY29ubmVjdEVmZmVjdCh0aGlzLl9jb252b2x2ZXIpfSxzLmRlZmF1bHQuZXh0ZW5kKHMuZGVmYXVsdC5SZXZlcmIscy5kZWZhdWx0LkVmZmVjdCkscy5kZWZhdWx0LlJldmVyYi5kZWZhdWx0cz17ZGVjYXk6MS41LHByZURlbGF5Oi4wMX0scy5kZWZhdWx0LlJldmVyYi5wcm90b3R5cGUuZ2VuZXJhdGU9ZnVuY3Rpb24oKXtyZXR1cm4gcy5kZWZhdWx0Lk9mZmxpbmUoZnVuY3Rpb24oKXt2YXIgdD1uZXcgcy5kZWZhdWx0Lk5vaXNlLGU9bmV3IHMuZGVmYXVsdC5Ob2lzZSxpPW5ldyBzLmRlZmF1bHQuTWVyZ2U7dC5jb25uZWN0KGkubGVmdCksZS5jb25uZWN0KGkucmlnaHQpO3ZhciBuPShuZXcgcy5kZWZhdWx0LkdhaW4pLnRvTWFzdGVyKCk7aS5jb25uZWN0KG4pLHQuc3RhcnQoMCksZS5zdGFydCgwKSxuLmdhaW4uc2V0VmFsdWVBdFRpbWUoMCwwKSxuLmdhaW4uc2V0VmFsdWVBdFRpbWUoMSx0aGlzLnByZURlbGF5KSxuLmdhaW4uZXhwb25lbnRpYWxBcHByb2FjaFZhbHVlQXRUaW1lKDAsdGhpcy5wcmVEZWxheSx0aGlzLmRlY2F5K3RoaXMucHJlRGVsYXkpfS5iaW5kKHRoaXMpLHRoaXMuZGVjYXkrdGhpcy5wcmVEZWxheSkudGhlbihmdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5fY29udm9sdmVyLmJ1ZmZlcj10LmdldCgpLHRoaXN9LmJpbmQodGhpcykpfSxzLmRlZmF1bHQuUmV2ZXJiLnByb3RvdHlwZS5kaXNwb3NlPWZ1bmN0aW9uKCl7cmV0dXJuIHMuZGVmYXVsdC5FZmZlY3QucHJvdG90eXBlLmRpc3Bvc2UuY2FsbCh0aGlzKSx0aGlzLl9jb252b2x2ZXIuZGlzY29ubmVjdCgpLHRoaXMuX2NvbnZvbHZlcj1udWxsLHRoaXN9LGUuZGVmYXVsdD1zLmRlZmF1bHQuUmV2ZXJifSxmdW5jdGlvbih0LGUsaSl7XCJ1c2Ugc3RyaWN0XCI7aS5yKGUpO3ZhciBzPWkoMCk7aSgxMiksaSgyMyksaSgyKSxpKDMzKSxpKDE4KTtzLmRlZmF1bHQuUGl0Y2hTaGlmdD1mdW5jdGlvbigpe3ZhciB0PXMuZGVmYXVsdC5kZWZhdWx0cyhhcmd1bWVudHMsW1wicGl0Y2hcIl0scy5kZWZhdWx0LlBpdGNoU2hpZnQpO3MuZGVmYXVsdC5GZWVkYmFja0VmZmVjdC5jYWxsKHRoaXMsdCksdGhpcy5fZnJlcXVlbmN5PW5ldyBzLmRlZmF1bHQuU2lnbmFsKDApLHRoaXMuX2RlbGF5QT1uZXcgcy5kZWZhdWx0LkRlbGF5KDAsMSksdGhpcy5fbGZvQT1uZXcgcy5kZWZhdWx0LkxGTyh7bWluOjAsbWF4Oi4xLHR5cGU6XCJzYXd0b290aFwifSkuY29ubmVjdCh0aGlzLl9kZWxheUEuZGVsYXlUaW1lKSx0aGlzLl9kZWxheUI9bmV3IHMuZGVmYXVsdC5EZWxheSgwLDEpLHRoaXMuX2xmb0I9bmV3IHMuZGVmYXVsdC5MRk8oe21pbjowLG1heDouMSx0eXBlOlwic2F3dG9vdGhcIixwaGFzZToxODB9KS5jb25uZWN0KHRoaXMuX2RlbGF5Qi5kZWxheVRpbWUpLHRoaXMuX2Nyb3NzRmFkZT1uZXcgcy5kZWZhdWx0LkNyb3NzRmFkZSx0aGlzLl9jcm9zc0ZhZGVMRk89bmV3IHMuZGVmYXVsdC5MRk8oe21pbjowLG1heDoxLHR5cGU6XCJ0cmlhbmdsZVwiLHBoYXNlOjkwfSkuY29ubmVjdCh0aGlzLl9jcm9zc0ZhZGUuZmFkZSksdGhpcy5fZmVlZGJhY2tEZWxheT1uZXcgcy5kZWZhdWx0LkRlbGF5KHQuZGVsYXlUaW1lKSx0aGlzLmRlbGF5VGltZT10aGlzLl9mZWVkYmFja0RlbGF5LmRlbGF5VGltZSx0aGlzLl9yZWFkT25seShcImRlbGF5VGltZVwiKSx0aGlzLl9waXRjaD10LnBpdGNoLHRoaXMuX3dpbmRvd1NpemU9dC53aW5kb3dTaXplLHRoaXMuX2RlbGF5QS5jb25uZWN0KHRoaXMuX2Nyb3NzRmFkZS5hKSx0aGlzLl9kZWxheUIuY29ubmVjdCh0aGlzLl9jcm9zc0ZhZGUuYiksdGhpcy5fZnJlcXVlbmN5LmZhbih0aGlzLl9sZm9BLmZyZXF1ZW5jeSx0aGlzLl9sZm9CLmZyZXF1ZW5jeSx0aGlzLl9jcm9zc0ZhZGVMRk8uZnJlcXVlbmN5KSx0aGlzLmVmZmVjdFNlbmQuZmFuKHRoaXMuX2RlbGF5QSx0aGlzLl9kZWxheUIpLHRoaXMuX2Nyb3NzRmFkZS5jaGFpbih0aGlzLl9mZWVkYmFja0RlbGF5LHRoaXMuZWZmZWN0UmV0dXJuKTt2YXIgZT10aGlzLm5vdygpO3RoaXMuX2xmb0Euc3RhcnQoZSksdGhpcy5fbGZvQi5zdGFydChlKSx0aGlzLl9jcm9zc0ZhZGVMRk8uc3RhcnQoZSksdGhpcy53aW5kb3dTaXplPXRoaXMuX3dpbmRvd1NpemV9LHMuZGVmYXVsdC5leHRlbmQocy5kZWZhdWx0LlBpdGNoU2hpZnQscy5kZWZhdWx0LkZlZWRiYWNrRWZmZWN0KSxzLmRlZmF1bHQuUGl0Y2hTaGlmdC5kZWZhdWx0cz17cGl0Y2g6MCx3aW5kb3dTaXplOi4xLGRlbGF5VGltZTowLGZlZWRiYWNrOjB9LE9iamVjdC5kZWZpbmVQcm9wZXJ0eShzLmRlZmF1bHQuUGl0Y2hTaGlmdC5wcm90b3R5cGUsXCJwaXRjaFwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fcGl0Y2h9LHNldDpmdW5jdGlvbih0KXt0aGlzLl9waXRjaD10O3ZhciBlPTA7dDwwPyh0aGlzLl9sZm9BLm1pbj0wLHRoaXMuX2xmb0EubWF4PXRoaXMuX3dpbmRvd1NpemUsdGhpcy5fbGZvQi5taW49MCx0aGlzLl9sZm9CLm1heD10aGlzLl93aW5kb3dTaXplLGU9cy5kZWZhdWx0LmludGVydmFsVG9GcmVxdWVuY3lSYXRpbyh0LTEpKzEpOih0aGlzLl9sZm9BLm1pbj10aGlzLl93aW5kb3dTaXplLHRoaXMuX2xmb0EubWF4PTAsdGhpcy5fbGZvQi5taW49dGhpcy5fd2luZG93U2l6ZSx0aGlzLl9sZm9CLm1heD0wLGU9cy5kZWZhdWx0LmludGVydmFsVG9GcmVxdWVuY3lSYXRpbyh0KS0xKSx0aGlzLl9mcmVxdWVuY3kudmFsdWU9ZSooMS4yL3RoaXMuX3dpbmRvd1NpemUpfX0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShzLmRlZmF1bHQuUGl0Y2hTaGlmdC5wcm90b3R5cGUsXCJ3aW5kb3dTaXplXCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl93aW5kb3dTaXplfSxzZXQ6ZnVuY3Rpb24odCl7dGhpcy5fd2luZG93U2l6ZT10aGlzLnRvU2Vjb25kcyh0KSx0aGlzLnBpdGNoPXRoaXMuX3BpdGNofX0pLHMuZGVmYXVsdC5QaXRjaFNoaWZ0LnByb3RvdHlwZS5kaXNwb3NlPWZ1bmN0aW9uKCl7cmV0dXJuIHMuZGVmYXVsdC5GZWVkYmFja0VmZmVjdC5wcm90b3R5cGUuZGlzcG9zZS5jYWxsKHRoaXMpLHRoaXMuX2ZyZXF1ZW5jeS5kaXNwb3NlKCksdGhpcy5fZnJlcXVlbmN5PW51bGwsdGhpcy5fZGVsYXlBLmRpc2Nvbm5lY3QoKSx0aGlzLl9kZWxheUE9bnVsbCx0aGlzLl9kZWxheUIuZGlzY29ubmVjdCgpLHRoaXMuX2RlbGF5Qj1udWxsLHRoaXMuX2xmb0EuZGlzcG9zZSgpLHRoaXMuX2xmb0E9bnVsbCx0aGlzLl9sZm9CLmRpc3Bvc2UoKSx0aGlzLl9sZm9CPW51bGwsdGhpcy5fY3Jvc3NGYWRlLmRpc3Bvc2UoKSx0aGlzLl9jcm9zc0ZhZGU9bnVsbCx0aGlzLl9jcm9zc0ZhZGVMRk8uZGlzcG9zZSgpLHRoaXMuX2Nyb3NzRmFkZUxGTz1udWxsLHRoaXMuX3dyaXRhYmxlKFwiZGVsYXlUaW1lXCIpLHRoaXMuX2ZlZWRiYWNrRGVsYXkuZGlzcG9zZSgpLHRoaXMuX2ZlZWRiYWNrRGVsYXk9bnVsbCx0aGlzLmRlbGF5VGltZT1udWxsLHRoaXN9LGUuZGVmYXVsdD1zLmRlZmF1bHQuUGl0Y2hTaGlmdH0sZnVuY3Rpb24odCxlLGkpe1widXNlIHN0cmljdFwiO2kucihlKTt2YXIgcz1pKDApO2koNzIpLGkoMiksaSgxOCk7cy5kZWZhdWx0LlBpbmdQb25nRGVsYXk9ZnVuY3Rpb24oKXt2YXIgdD1zLmRlZmF1bHQuZGVmYXVsdHMoYXJndW1lbnRzLFtcImRlbGF5VGltZVwiLFwiZmVlZGJhY2tcIl0scy5kZWZhdWx0LlBpbmdQb25nRGVsYXkpO3MuZGVmYXVsdC5TdGVyZW9YRmVlZGJhY2tFZmZlY3QuY2FsbCh0aGlzLHQpLHRoaXMuX2xlZnREZWxheT1uZXcgcy5kZWZhdWx0LkRlbGF5KDAsdC5tYXhEZWxheVRpbWUpLHRoaXMuX3JpZ2h0RGVsYXk9bmV3IHMuZGVmYXVsdC5EZWxheSgwLHQubWF4RGVsYXlUaW1lKSx0aGlzLl9yaWdodFByZURlbGF5PW5ldyBzLmRlZmF1bHQuRGVsYXkoMCx0Lm1heERlbGF5VGltZSksdGhpcy5kZWxheVRpbWU9bmV3IHMuZGVmYXVsdC5TaWduYWwodC5kZWxheVRpbWUscy5kZWZhdWx0LlR5cGUuVGltZSksdGhpcy5lZmZlY3RTZW5kTC5jaGFpbih0aGlzLl9sZWZ0RGVsYXksdGhpcy5lZmZlY3RSZXR1cm5MKSx0aGlzLmVmZmVjdFNlbmRSLmNoYWluKHRoaXMuX3JpZ2h0UHJlRGVsYXksdGhpcy5fcmlnaHREZWxheSx0aGlzLmVmZmVjdFJldHVyblIpLHRoaXMuZGVsYXlUaW1lLmZhbih0aGlzLl9sZWZ0RGVsYXkuZGVsYXlUaW1lLHRoaXMuX3JpZ2h0RGVsYXkuZGVsYXlUaW1lLHRoaXMuX3JpZ2h0UHJlRGVsYXkuZGVsYXlUaW1lKSx0aGlzLl9mZWVkYmFja0xSLmRpc2Nvbm5lY3QoKSx0aGlzLl9mZWVkYmFja0xSLmNvbm5lY3QodGhpcy5fcmlnaHREZWxheSksdGhpcy5fcmVhZE9ubHkoW1wiZGVsYXlUaW1lXCJdKX0scy5kZWZhdWx0LmV4dGVuZChzLmRlZmF1bHQuUGluZ1BvbmdEZWxheSxzLmRlZmF1bHQuU3RlcmVvWEZlZWRiYWNrRWZmZWN0KSxzLmRlZmF1bHQuUGluZ1BvbmdEZWxheS5kZWZhdWx0cz17ZGVsYXlUaW1lOi4yNSxtYXhEZWxheVRpbWU6MX0scy5kZWZhdWx0LlBpbmdQb25nRGVsYXkucHJvdG90eXBlLmRpc3Bvc2U9ZnVuY3Rpb24oKXtyZXR1cm4gcy5kZWZhdWx0LlN0ZXJlb1hGZWVkYmFja0VmZmVjdC5wcm90b3R5cGUuZGlzcG9zZS5jYWxsKHRoaXMpLHRoaXMuX2xlZnREZWxheS5kaXNwb3NlKCksdGhpcy5fbGVmdERlbGF5PW51bGwsdGhpcy5fcmlnaHREZWxheS5kaXNwb3NlKCksdGhpcy5fcmlnaHREZWxheT1udWxsLHRoaXMuX3JpZ2h0UHJlRGVsYXkuZGlzcG9zZSgpLHRoaXMuX3JpZ2h0UHJlRGVsYXk9bnVsbCx0aGlzLl93cml0YWJsZShbXCJkZWxheVRpbWVcIl0pLHRoaXMuZGVsYXlUaW1lLmRpc3Bvc2UoKSx0aGlzLmRlbGF5VGltZT1udWxsLHRoaXN9LGUuZGVmYXVsdD1zLmRlZmF1bHQuUGluZ1BvbmdEZWxheX0sZnVuY3Rpb24odCxlLGkpe1widXNlIHN0cmljdFwiO2kucihlKTt2YXIgcz1pKDApO2koMTIpLGkoOSksaSgxNSk7cy5kZWZhdWx0LlBoYXNlcj1mdW5jdGlvbigpe3ZhciB0PXMuZGVmYXVsdC5kZWZhdWx0cyhhcmd1bWVudHMsW1wiZnJlcXVlbmN5XCIsXCJvY3RhdmVzXCIsXCJiYXNlRnJlcXVlbmN5XCJdLHMuZGVmYXVsdC5QaGFzZXIpO3MuZGVmYXVsdC5TdGVyZW9FZmZlY3QuY2FsbCh0aGlzLHQpLHRoaXMuX2xmb0w9bmV3IHMuZGVmYXVsdC5MRk8odC5mcmVxdWVuY3ksMCwxKSx0aGlzLl9sZm9SPW5ldyBzLmRlZmF1bHQuTEZPKHQuZnJlcXVlbmN5LDAsMSksdGhpcy5fbGZvUi5waGFzZT0xODAsdGhpcy5fYmFzZUZyZXF1ZW5jeT10LmJhc2VGcmVxdWVuY3ksdGhpcy5fb2N0YXZlcz10Lm9jdGF2ZXMsdGhpcy5RPW5ldyBzLmRlZmF1bHQuU2lnbmFsKHQuUSxzLmRlZmF1bHQuVHlwZS5Qb3NpdGl2ZSksdGhpcy5fZmlsdGVyc0w9dGhpcy5fbWFrZUZpbHRlcnModC5zdGFnZXMsdGhpcy5fbGZvTCx0aGlzLlEpLHRoaXMuX2ZpbHRlcnNSPXRoaXMuX21ha2VGaWx0ZXJzKHQuc3RhZ2VzLHRoaXMuX2xmb1IsdGhpcy5RKSx0aGlzLmZyZXF1ZW5jeT10aGlzLl9sZm9MLmZyZXF1ZW5jeSx0aGlzLmZyZXF1ZW5jeS52YWx1ZT10LmZyZXF1ZW5jeSx0aGlzLmVmZmVjdFNlbmRMLmNvbm5lY3QodGhpcy5fZmlsdGVyc0xbMF0pLHRoaXMuZWZmZWN0U2VuZFIuY29ubmVjdCh0aGlzLl9maWx0ZXJzUlswXSkscy5kZWZhdWx0LmNvbm5lY3QodGhpcy5fZmlsdGVyc0xbdC5zdGFnZXMtMV0sdGhpcy5lZmZlY3RSZXR1cm5MKSxzLmRlZmF1bHQuY29ubmVjdCh0aGlzLl9maWx0ZXJzUlt0LnN0YWdlcy0xXSx0aGlzLmVmZmVjdFJldHVyblIpLHRoaXMuX2xmb0wuZnJlcXVlbmN5LmNvbm5lY3QodGhpcy5fbGZvUi5mcmVxdWVuY3kpLHRoaXMuYmFzZUZyZXF1ZW5jeT10LmJhc2VGcmVxdWVuY3ksdGhpcy5vY3RhdmVzPXQub2N0YXZlcyx0aGlzLl9sZm9MLnN0YXJ0KCksdGhpcy5fbGZvUi5zdGFydCgpLHRoaXMuX3JlYWRPbmx5KFtcImZyZXF1ZW5jeVwiLFwiUVwiXSl9LHMuZGVmYXVsdC5leHRlbmQocy5kZWZhdWx0LlBoYXNlcixzLmRlZmF1bHQuU3RlcmVvRWZmZWN0KSxzLmRlZmF1bHQuUGhhc2VyLmRlZmF1bHRzPXtmcmVxdWVuY3k6LjUsb2N0YXZlczozLHN0YWdlczoxMCxROjEwLGJhc2VGcmVxdWVuY3k6MzUwfSxzLmRlZmF1bHQuUGhhc2VyLnByb3RvdHlwZS5fbWFrZUZpbHRlcnM9ZnVuY3Rpb24odCxlLGkpe2Zvcih2YXIgbj1uZXcgQXJyYXkodCksbz0wO288dDtvKyspe3ZhciBhPXRoaXMuY29udGV4dC5jcmVhdGVCaXF1YWRGaWx0ZXIoKTthLnR5cGU9XCJhbGxwYXNzXCIsaS5jb25uZWN0KGEuUSksZS5jb25uZWN0KGEuZnJlcXVlbmN5KSxuW29dPWF9cmV0dXJuIHMuZGVmYXVsdC5jb25uZWN0U2VyaWVzLmFwcGx5KHMuZGVmYXVsdCxuKSxufSxPYmplY3QuZGVmaW5lUHJvcGVydHkocy5kZWZhdWx0LlBoYXNlci5wcm90b3R5cGUsXCJvY3RhdmVzXCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9vY3RhdmVzfSxzZXQ6ZnVuY3Rpb24odCl7dGhpcy5fb2N0YXZlcz10O3ZhciBlPXRoaXMuX2Jhc2VGcmVxdWVuY3kqTWF0aC5wb3coMix0KTt0aGlzLl9sZm9MLm1heD1lLHRoaXMuX2xmb1IubWF4PWV9fSksT2JqZWN0LmRlZmluZVByb3BlcnR5KHMuZGVmYXVsdC5QaGFzZXIucHJvdG90eXBlLFwiYmFzZUZyZXF1ZW5jeVwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fYmFzZUZyZXF1ZW5jeX0sc2V0OmZ1bmN0aW9uKHQpe3RoaXMuX2Jhc2VGcmVxdWVuY3k9dCx0aGlzLl9sZm9MLm1pbj10LHRoaXMuX2xmb1IubWluPXQsdGhpcy5vY3RhdmVzPXRoaXMuX29jdGF2ZXN9fSkscy5kZWZhdWx0LlBoYXNlci5wcm90b3R5cGUuZGlzcG9zZT1mdW5jdGlvbigpe3MuZGVmYXVsdC5TdGVyZW9FZmZlY3QucHJvdG90eXBlLmRpc3Bvc2UuY2FsbCh0aGlzKSx0aGlzLl93cml0YWJsZShbXCJmcmVxdWVuY3lcIixcIlFcIl0pLHRoaXMuUS5kaXNwb3NlKCksdGhpcy5RPW51bGwsdGhpcy5fbGZvTC5kaXNwb3NlKCksdGhpcy5fbGZvTD1udWxsLHRoaXMuX2xmb1IuZGlzcG9zZSgpLHRoaXMuX2xmb1I9bnVsbDtmb3IodmFyIHQ9MDt0PHRoaXMuX2ZpbHRlcnNMLmxlbmd0aDt0KyspdGhpcy5fZmlsdGVyc0xbdF0uZGlzY29ubmVjdCgpLHRoaXMuX2ZpbHRlcnNMW3RdPW51bGw7dGhpcy5fZmlsdGVyc0w9bnVsbDtmb3IodmFyIGU9MDtlPHRoaXMuX2ZpbHRlcnNSLmxlbmd0aDtlKyspdGhpcy5fZmlsdGVyc1JbZV0uZGlzY29ubmVjdCgpLHRoaXMuX2ZpbHRlcnNSW2VdPW51bGw7cmV0dXJuIHRoaXMuX2ZpbHRlcnNSPW51bGwsdGhpcy5mcmVxdWVuY3k9bnVsbCx0aGlzfSxlLmRlZmF1bHQ9cy5kZWZhdWx0LlBoYXNlcn0sZnVuY3Rpb24odCxlLGkpe1widXNlIHN0cmljdFwiO2kucihlKTt2YXIgcz1pKDApLG49KGkoNTkpLGkoMTUpLGkoMjYpLFsuMDY3NDgsLjA2NDA0LC4wODIxMiwuMDkwMDRdKSxvPVsuNzczLC44MDIsLjc1MywuNzMzXSxhPVszNDcsMTEzLDM3XTtzLmRlZmF1bHQuSkNSZXZlcmI9ZnVuY3Rpb24oKXt2YXIgdD1zLmRlZmF1bHQuZGVmYXVsdHMoYXJndW1lbnRzLFtcInJvb21TaXplXCJdLHMuZGVmYXVsdC5KQ1JldmVyYik7cy5kZWZhdWx0LlN0ZXJlb0VmZmVjdC5jYWxsKHRoaXMsdCksdGhpcy5yb29tU2l6ZT1uZXcgcy5kZWZhdWx0LlNpZ25hbCh0LnJvb21TaXplLHMuZGVmYXVsdC5UeXBlLk5vcm1hbFJhbmdlKSx0aGlzLl9zY2FsZVJvb21TaXplPW5ldyBzLmRlZmF1bHQuU2NhbGUoLS43MzMsLjE5NyksdGhpcy5fYWxscGFzc0ZpbHRlcnM9W10sdGhpcy5fZmVlZGJhY2tDb21iRmlsdGVycz1bXTtmb3IodmFyIGU9MDtlPGEubGVuZ3RoO2UrKyl7dmFyIGk9dGhpcy5jb250ZXh0LmNyZWF0ZUJpcXVhZEZpbHRlcigpO2kudHlwZT1cImFsbHBhc3NcIixpLmZyZXF1ZW5jeS52YWx1ZT1hW2VdLHRoaXMuX2FsbHBhc3NGaWx0ZXJzLnB1c2goaSl9Zm9yKHZhciByPTA7cjxuLmxlbmd0aDtyKyspe3ZhciBsPW5ldyBzLmRlZmF1bHQuRmVlZGJhY2tDb21iRmlsdGVyKG5bcl0sLjEpO3RoaXMuX3NjYWxlUm9vbVNpemUuY29ubmVjdChsLnJlc29uYW5jZSksbC5yZXNvbmFuY2UudmFsdWU9b1tyXSxzLmRlZmF1bHQuY29ubmVjdCh0aGlzLl9hbGxwYXNzRmlsdGVyc1t0aGlzLl9hbGxwYXNzRmlsdGVycy5sZW5ndGgtMV0sbCkscjxuLmxlbmd0aC8yP2wuY29ubmVjdCh0aGlzLmVmZmVjdFJldHVybkwpOmwuY29ubmVjdCh0aGlzLmVmZmVjdFJldHVyblIpLHRoaXMuX2ZlZWRiYWNrQ29tYkZpbHRlcnMucHVzaChsKX10aGlzLnJvb21TaXplLmNvbm5lY3QodGhpcy5fc2NhbGVSb29tU2l6ZSkscy5kZWZhdWx0LmNvbm5lY3RTZXJpZXMuYXBwbHkocy5kZWZhdWx0LHRoaXMuX2FsbHBhc3NGaWx0ZXJzKSx0aGlzLmVmZmVjdFNlbmRMLmNvbm5lY3QodGhpcy5fYWxscGFzc0ZpbHRlcnNbMF0pLHRoaXMuZWZmZWN0U2VuZFIuY29ubmVjdCh0aGlzLl9hbGxwYXNzRmlsdGVyc1swXSksdGhpcy5fcmVhZE9ubHkoW1wicm9vbVNpemVcIl0pfSxzLmRlZmF1bHQuZXh0ZW5kKHMuZGVmYXVsdC5KQ1JldmVyYixzLmRlZmF1bHQuU3RlcmVvRWZmZWN0KSxzLmRlZmF1bHQuSkNSZXZlcmIuZGVmYXVsdHM9e3Jvb21TaXplOi41fSxzLmRlZmF1bHQuSkNSZXZlcmIucHJvdG90eXBlLmRpc3Bvc2U9ZnVuY3Rpb24oKXtzLmRlZmF1bHQuU3RlcmVvRWZmZWN0LnByb3RvdHlwZS5kaXNwb3NlLmNhbGwodGhpcyk7Zm9yKHZhciB0PTA7dDx0aGlzLl9hbGxwYXNzRmlsdGVycy5sZW5ndGg7dCsrKXRoaXMuX2FsbHBhc3NGaWx0ZXJzW3RdLmRpc2Nvbm5lY3QoKSx0aGlzLl9hbGxwYXNzRmlsdGVyc1t0XT1udWxsO3RoaXMuX2FsbHBhc3NGaWx0ZXJzPW51bGw7Zm9yKHZhciBlPTA7ZTx0aGlzLl9mZWVkYmFja0NvbWJGaWx0ZXJzLmxlbmd0aDtlKyspdGhpcy5fZmVlZGJhY2tDb21iRmlsdGVyc1tlXS5kaXNwb3NlKCksdGhpcy5fZmVlZGJhY2tDb21iRmlsdGVyc1tlXT1udWxsO3JldHVybiB0aGlzLl9mZWVkYmFja0NvbWJGaWx0ZXJzPW51bGwsdGhpcy5fd3JpdGFibGUoW1wicm9vbVNpemVcIl0pLHRoaXMucm9vbVNpemUuZGlzcG9zZSgpLHRoaXMucm9vbVNpemU9bnVsbCx0aGlzLl9zY2FsZVJvb21TaXplLmRpc3Bvc2UoKSx0aGlzLl9zY2FsZVJvb21TaXplPW51bGwsdGhpc30sZS5kZWZhdWx0PXMuZGVmYXVsdC5KQ1JldmVyYn0sZnVuY3Rpb24odCxlLGkpe1widXNlIHN0cmljdFwiO2kucihlKTt2YXIgcz1pKDApLG49KGkoNTQpLGkoMTUpLGkoMiksaSgxOSksaSgxMCksaSg0MiksWzE1NTcvNDQxMDAsMTYxNy80NDEwMCwxNDkxLzQ0MTAwLDE0MjIvNDQxMDAsMTI3Ny80NDEwMCwxMzU2LzQ0MTAwLDExODgvNDQxMDAsMTExNi80NDEwMF0pLG89WzIyNSw1NTYsNDQxLDM0MV07cy5kZWZhdWx0LkZyZWV2ZXJiPWZ1bmN0aW9uKCl7dmFyIHQ9cy5kZWZhdWx0LmRlZmF1bHRzKGFyZ3VtZW50cyxbXCJyb29tU2l6ZVwiLFwiZGFtcGVuaW5nXCJdLHMuZGVmYXVsdC5GcmVldmVyYik7cy5kZWZhdWx0LlN0ZXJlb0VmZmVjdC5jYWxsKHRoaXMsdCksdGhpcy5yb29tU2l6ZT1uZXcgcy5kZWZhdWx0LlNpZ25hbCh0LnJvb21TaXplLHMuZGVmYXVsdC5UeXBlLk5vcm1hbFJhbmdlKSx0aGlzLmRhbXBlbmluZz1uZXcgcy5kZWZhdWx0LlNpZ25hbCh0LmRhbXBlbmluZyxzLmRlZmF1bHQuVHlwZS5GcmVxdWVuY3kpLHRoaXMuX2NvbWJGaWx0ZXJzPVtdLHRoaXMuX2FsbHBhc3NGaWx0ZXJzTD1bXSx0aGlzLl9hbGxwYXNzRmlsdGVyc1I9W107Zm9yKHZhciBlPTA7ZTxvLmxlbmd0aDtlKyspe3ZhciBpPXRoaXMuY29udGV4dC5jcmVhdGVCaXF1YWRGaWx0ZXIoKTtpLnR5cGU9XCJhbGxwYXNzXCIsaS5mcmVxdWVuY3kudmFsdWU9b1tlXSx0aGlzLl9hbGxwYXNzRmlsdGVyc0wucHVzaChpKX1mb3IodmFyIGE9MDthPG8ubGVuZ3RoO2ErKyl7dmFyIHI9dGhpcy5jb250ZXh0LmNyZWF0ZUJpcXVhZEZpbHRlcigpO3IudHlwZT1cImFsbHBhc3NcIixyLmZyZXF1ZW5jeS52YWx1ZT1vW2FdLHRoaXMuX2FsbHBhc3NGaWx0ZXJzUi5wdXNoKHIpfWZvcih2YXIgbD0wO2w8bi5sZW5ndGg7bCsrKXt2YXIgdT1uZXcgcy5kZWZhdWx0Lkxvd3Bhc3NDb21iRmlsdGVyKG5bbF0pO2w8bi5sZW5ndGgvMj90aGlzLmVmZmVjdFNlbmRMLmNoYWluKHUsdGhpcy5fYWxscGFzc0ZpbHRlcnNMWzBdKTp0aGlzLmVmZmVjdFNlbmRSLmNoYWluKHUsdGhpcy5fYWxscGFzc0ZpbHRlcnNSWzBdKSx0aGlzLnJvb21TaXplLmNvbm5lY3QodS5yZXNvbmFuY2UpLHRoaXMuZGFtcGVuaW5nLmNvbm5lY3QodS5kYW1wZW5pbmcpLHRoaXMuX2NvbWJGaWx0ZXJzLnB1c2godSl9cy5kZWZhdWx0LmNvbm5lY3RTZXJpZXMuYXBwbHkocy5kZWZhdWx0LHRoaXMuX2FsbHBhc3NGaWx0ZXJzTCkscy5kZWZhdWx0LmNvbm5lY3RTZXJpZXMuYXBwbHkocy5kZWZhdWx0LHRoaXMuX2FsbHBhc3NGaWx0ZXJzUikscy5kZWZhdWx0LmNvbm5lY3QodGhpcy5fYWxscGFzc0ZpbHRlcnNMW3RoaXMuX2FsbHBhc3NGaWx0ZXJzTC5sZW5ndGgtMV0sdGhpcy5lZmZlY3RSZXR1cm5MKSxzLmRlZmF1bHQuY29ubmVjdCh0aGlzLl9hbGxwYXNzRmlsdGVyc1JbdGhpcy5fYWxscGFzc0ZpbHRlcnNSLmxlbmd0aC0xXSx0aGlzLmVmZmVjdFJldHVyblIpLHRoaXMuX3JlYWRPbmx5KFtcInJvb21TaXplXCIsXCJkYW1wZW5pbmdcIl0pfSxzLmRlZmF1bHQuZXh0ZW5kKHMuZGVmYXVsdC5GcmVldmVyYixzLmRlZmF1bHQuU3RlcmVvRWZmZWN0KSxzLmRlZmF1bHQuRnJlZXZlcmIuZGVmYXVsdHM9e3Jvb21TaXplOi43LGRhbXBlbmluZzozZTN9LHMuZGVmYXVsdC5GcmVldmVyYi5wcm90b3R5cGUuZGlzcG9zZT1mdW5jdGlvbigpe3MuZGVmYXVsdC5TdGVyZW9FZmZlY3QucHJvdG90eXBlLmRpc3Bvc2UuY2FsbCh0aGlzKTtmb3IodmFyIHQ9MDt0PHRoaXMuX2FsbHBhc3NGaWx0ZXJzTC5sZW5ndGg7dCsrKXRoaXMuX2FsbHBhc3NGaWx0ZXJzTFt0XS5kaXNjb25uZWN0KCksdGhpcy5fYWxscGFzc0ZpbHRlcnNMW3RdPW51bGw7dGhpcy5fYWxscGFzc0ZpbHRlcnNMPW51bGw7Zm9yKHZhciBlPTA7ZTx0aGlzLl9hbGxwYXNzRmlsdGVyc1IubGVuZ3RoO2UrKyl0aGlzLl9hbGxwYXNzRmlsdGVyc1JbZV0uZGlzY29ubmVjdCgpLHRoaXMuX2FsbHBhc3NGaWx0ZXJzUltlXT1udWxsO3RoaXMuX2FsbHBhc3NGaWx0ZXJzUj1udWxsO2Zvcih2YXIgaT0wO2k8dGhpcy5fY29tYkZpbHRlcnMubGVuZ3RoO2krKyl0aGlzLl9jb21iRmlsdGVyc1tpXS5kaXNwb3NlKCksdGhpcy5fY29tYkZpbHRlcnNbaV09bnVsbDtyZXR1cm4gdGhpcy5fY29tYkZpbHRlcnM9bnVsbCx0aGlzLl93cml0YWJsZShbXCJyb29tU2l6ZVwiLFwiZGFtcGVuaW5nXCJdKSx0aGlzLnJvb21TaXplLmRpc3Bvc2UoKSx0aGlzLnJvb21TaXplPW51bGwsdGhpcy5kYW1wZW5pbmcuZGlzcG9zZSgpLHRoaXMuZGFtcGVuaW5nPW51bGwsdGhpc30sZS5kZWZhdWx0PXMuZGVmYXVsdC5GcmVldmVyYn0sZnVuY3Rpb24odCxlLGkpe1widXNlIHN0cmljdFwiO2kucihlKTt2YXIgcz1pKDApO2koMzMpLGkoMiksaSgxOCk7cy5kZWZhdWx0LkZlZWRiYWNrRGVsYXk9ZnVuY3Rpb24oKXt2YXIgdD1zLmRlZmF1bHQuZGVmYXVsdHMoYXJndW1lbnRzLFtcImRlbGF5VGltZVwiLFwiZmVlZGJhY2tcIl0scy5kZWZhdWx0LkZlZWRiYWNrRGVsYXkpO3MuZGVmYXVsdC5GZWVkYmFja0VmZmVjdC5jYWxsKHRoaXMsdCksdGhpcy5fZGVsYXlOb2RlPW5ldyBzLmRlZmF1bHQuRGVsYXkodC5kZWxheVRpbWUsdC5tYXhEZWxheSksdGhpcy5kZWxheVRpbWU9dGhpcy5fZGVsYXlOb2RlLmRlbGF5VGltZSx0aGlzLmNvbm5lY3RFZmZlY3QodGhpcy5fZGVsYXlOb2RlKSx0aGlzLl9yZWFkT25seShbXCJkZWxheVRpbWVcIl0pfSxzLmRlZmF1bHQuZXh0ZW5kKHMuZGVmYXVsdC5GZWVkYmFja0RlbGF5LHMuZGVmYXVsdC5GZWVkYmFja0VmZmVjdCkscy5kZWZhdWx0LkZlZWRiYWNrRGVsYXkuZGVmYXVsdHM9e2RlbGF5VGltZTouMjUsbWF4RGVsYXk6MX0scy5kZWZhdWx0LkZlZWRiYWNrRGVsYXkucHJvdG90eXBlLmRpc3Bvc2U9ZnVuY3Rpb24oKXtyZXR1cm4gcy5kZWZhdWx0LkZlZWRiYWNrRWZmZWN0LnByb3RvdHlwZS5kaXNwb3NlLmNhbGwodGhpcyksdGhpcy5fZGVsYXlOb2RlLmRpc3Bvc2UoKSx0aGlzLl9kZWxheU5vZGU9bnVsbCx0aGlzLl93cml0YWJsZShbXCJkZWxheVRpbWVcIl0pLHRoaXMuZGVsYXlUaW1lPW51bGwsdGhpc30sZS5kZWZhdWx0PXMuZGVmYXVsdC5GZWVkYmFja0RlbGF5fSxmdW5jdGlvbih0LGUsaSl7XCJ1c2Ugc3RyaWN0XCI7aS5yKGUpO3ZhciBzPWkoMCk7aSg4KSxpKDcpO3MuZGVmYXVsdC5EaXN0b3J0aW9uPWZ1bmN0aW9uKCl7dmFyIHQ9cy5kZWZhdWx0LmRlZmF1bHRzKGFyZ3VtZW50cyxbXCJkaXN0b3J0aW9uXCJdLHMuZGVmYXVsdC5EaXN0b3J0aW9uKTtzLmRlZmF1bHQuRWZmZWN0LmNhbGwodGhpcyx0KSx0aGlzLl9zaGFwZXI9bmV3IHMuZGVmYXVsdC5XYXZlU2hhcGVyKDQwOTYpLHRoaXMuX2Rpc3RvcnRpb249dC5kaXN0b3J0aW9uLHRoaXMuY29ubmVjdEVmZmVjdCh0aGlzLl9zaGFwZXIpLHRoaXMuZGlzdG9ydGlvbj10LmRpc3RvcnRpb24sdGhpcy5vdmVyc2FtcGxlPXQub3ZlcnNhbXBsZX0scy5kZWZhdWx0LmV4dGVuZChzLmRlZmF1bHQuRGlzdG9ydGlvbixzLmRlZmF1bHQuRWZmZWN0KSxzLmRlZmF1bHQuRGlzdG9ydGlvbi5kZWZhdWx0cz17ZGlzdG9ydGlvbjouNCxvdmVyc2FtcGxlOlwibm9uZVwifSxPYmplY3QuZGVmaW5lUHJvcGVydHkocy5kZWZhdWx0LkRpc3RvcnRpb24ucHJvdG90eXBlLFwiZGlzdG9ydGlvblwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fZGlzdG9ydGlvbn0sc2V0OmZ1bmN0aW9uKHQpe3RoaXMuX2Rpc3RvcnRpb249dDt2YXIgZT0xMDAqdCxpPU1hdGguUEkvMTgwO3RoaXMuX3NoYXBlci5zZXRNYXAoZnVuY3Rpb24odCl7cmV0dXJuIE1hdGguYWJzKHQpPC4wMDE/MDooMytlKSp0KjIwKmkvKE1hdGguUEkrZSpNYXRoLmFicyh0KSl9KX19KSxPYmplY3QuZGVmaW5lUHJvcGVydHkocy5kZWZhdWx0LkRpc3RvcnRpb24ucHJvdG90eXBlLFwib3ZlcnNhbXBsZVwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fc2hhcGVyLm92ZXJzYW1wbGV9LHNldDpmdW5jdGlvbih0KXt0aGlzLl9zaGFwZXIub3ZlcnNhbXBsZT10fX0pLHMuZGVmYXVsdC5EaXN0b3J0aW9uLnByb3RvdHlwZS5kaXNwb3NlPWZ1bmN0aW9uKCl7cmV0dXJuIHMuZGVmYXVsdC5FZmZlY3QucHJvdG90eXBlLmRpc3Bvc2UuY2FsbCh0aGlzKSx0aGlzLl9zaGFwZXIuZGlzcG9zZSgpLHRoaXMuX3NoYXBlcj1udWxsLHRoaXN9LGUuZGVmYXVsdD1zLmRlZmF1bHQuRGlzdG9ydGlvbn0sZnVuY3Rpb24odCxlLGkpe1widXNlIHN0cmljdFwiO2kucihlKTt2YXIgcz1pKDApO2koMTIpLGkoMTUpLGkoMTgpO3MuZGVmYXVsdC5DaG9ydXM9ZnVuY3Rpb24oKXt2YXIgdD1zLmRlZmF1bHQuZGVmYXVsdHMoYXJndW1lbnRzLFtcImZyZXF1ZW5jeVwiLFwiZGVsYXlUaW1lXCIsXCJkZXB0aFwiXSxzLmRlZmF1bHQuQ2hvcnVzKTtzLmRlZmF1bHQuU3RlcmVvRWZmZWN0LmNhbGwodGhpcyx0KSx0aGlzLl9kZXB0aD10LmRlcHRoLHRoaXMuX2RlbGF5VGltZT10LmRlbGF5VGltZS8xZTMsdGhpcy5fbGZvTD1uZXcgcy5kZWZhdWx0LkxGTyh7ZnJlcXVlbmN5OnQuZnJlcXVlbmN5LG1pbjowLG1heDoxfSksdGhpcy5fbGZvUj1uZXcgcy5kZWZhdWx0LkxGTyh7ZnJlcXVlbmN5OnQuZnJlcXVlbmN5LG1pbjowLG1heDoxLHBoYXNlOjE4MH0pLHRoaXMuX2RlbGF5Tm9kZUw9bmV3IHMuZGVmYXVsdC5EZWxheSx0aGlzLl9kZWxheU5vZGVSPW5ldyBzLmRlZmF1bHQuRGVsYXksdGhpcy5mcmVxdWVuY3k9dGhpcy5fbGZvTC5mcmVxdWVuY3ksdGhpcy5lZmZlY3RTZW5kTC5jaGFpbih0aGlzLl9kZWxheU5vZGVMLHRoaXMuZWZmZWN0UmV0dXJuTCksdGhpcy5lZmZlY3RTZW5kUi5jaGFpbih0aGlzLl9kZWxheU5vZGVSLHRoaXMuZWZmZWN0UmV0dXJuUiksdGhpcy5lZmZlY3RTZW5kTC5jb25uZWN0KHRoaXMuZWZmZWN0UmV0dXJuTCksdGhpcy5lZmZlY3RTZW5kUi5jb25uZWN0KHRoaXMuZWZmZWN0UmV0dXJuUiksdGhpcy5fbGZvTC5jb25uZWN0KHRoaXMuX2RlbGF5Tm9kZUwuZGVsYXlUaW1lKSx0aGlzLl9sZm9SLmNvbm5lY3QodGhpcy5fZGVsYXlOb2RlUi5kZWxheVRpbWUpLHRoaXMuX2xmb0wuc3RhcnQoKSx0aGlzLl9sZm9SLnN0YXJ0KCksdGhpcy5fbGZvTC5mcmVxdWVuY3kuY29ubmVjdCh0aGlzLl9sZm9SLmZyZXF1ZW5jeSksdGhpcy5kZXB0aD10aGlzLl9kZXB0aCx0aGlzLmZyZXF1ZW5jeS52YWx1ZT10LmZyZXF1ZW5jeSx0aGlzLnR5cGU9dC50eXBlLHRoaXMuX3JlYWRPbmx5KFtcImZyZXF1ZW5jeVwiXSksdGhpcy5zcHJlYWQ9dC5zcHJlYWR9LHMuZGVmYXVsdC5leHRlbmQocy5kZWZhdWx0LkNob3J1cyxzLmRlZmF1bHQuU3RlcmVvRWZmZWN0KSxzLmRlZmF1bHQuQ2hvcnVzLmRlZmF1bHRzPXtmcmVxdWVuY3k6MS41LGRlbGF5VGltZTozLjUsZGVwdGg6LjcsdHlwZTpcInNpbmVcIixzcHJlYWQ6MTgwfSxPYmplY3QuZGVmaW5lUHJvcGVydHkocy5kZWZhdWx0LkNob3J1cy5wcm90b3R5cGUsXCJkZXB0aFwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fZGVwdGh9LHNldDpmdW5jdGlvbih0KXt0aGlzLl9kZXB0aD10O3ZhciBlPXRoaXMuX2RlbGF5VGltZSp0O3RoaXMuX2xmb0wubWluPU1hdGgubWF4KHRoaXMuX2RlbGF5VGltZS1lLDApLHRoaXMuX2xmb0wubWF4PXRoaXMuX2RlbGF5VGltZStlLHRoaXMuX2xmb1IubWluPU1hdGgubWF4KHRoaXMuX2RlbGF5VGltZS1lLDApLHRoaXMuX2xmb1IubWF4PXRoaXMuX2RlbGF5VGltZStlfX0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShzLmRlZmF1bHQuQ2hvcnVzLnByb3RvdHlwZSxcImRlbGF5VGltZVwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gMWUzKnRoaXMuX2RlbGF5VGltZX0sc2V0OmZ1bmN0aW9uKHQpe3RoaXMuX2RlbGF5VGltZT10LzFlMyx0aGlzLmRlcHRoPXRoaXMuX2RlcHRofX0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShzLmRlZmF1bHQuQ2hvcnVzLnByb3RvdHlwZSxcInR5cGVcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2xmb0wudHlwZX0sc2V0OmZ1bmN0aW9uKHQpe3RoaXMuX2xmb0wudHlwZT10LHRoaXMuX2xmb1IudHlwZT10fX0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShzLmRlZmF1bHQuQ2hvcnVzLnByb3RvdHlwZSxcInNwcmVhZFwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fbGZvUi5waGFzZS10aGlzLl9sZm9MLnBoYXNlfSxzZXQ6ZnVuY3Rpb24odCl7dGhpcy5fbGZvTC5waGFzZT05MC10LzIsdGhpcy5fbGZvUi5waGFzZT10LzIrOTB9fSkscy5kZWZhdWx0LkNob3J1cy5wcm90b3R5cGUuZGlzcG9zZT1mdW5jdGlvbigpe3JldHVybiBzLmRlZmF1bHQuU3RlcmVvRWZmZWN0LnByb3RvdHlwZS5kaXNwb3NlLmNhbGwodGhpcyksdGhpcy5fbGZvTC5kaXNwb3NlKCksdGhpcy5fbGZvTD1udWxsLHRoaXMuX2xmb1IuZGlzcG9zZSgpLHRoaXMuX2xmb1I9bnVsbCx0aGlzLl9kZWxheU5vZGVMLmRpc3Bvc2UoKSx0aGlzLl9kZWxheU5vZGVMPW51bGwsdGhpcy5fZGVsYXlOb2RlUi5kaXNwb3NlKCksdGhpcy5fZGVsYXlOb2RlUj1udWxsLHRoaXMuX3dyaXRhYmxlKFwiZnJlcXVlbmN5XCIpLHRoaXMuZnJlcXVlbmN5PW51bGwsdGhpc30sZS5kZWZhdWx0PXMuZGVmYXVsdC5DaG9ydXN9LGZ1bmN0aW9uKHQsZSxpKXtcInVzZSBzdHJpY3RcIjtpLnIoZSk7dmFyIHM9aSgwKTtpKDgpLGkoNyk7cy5kZWZhdWx0LkNoZWJ5c2hldj1mdW5jdGlvbigpe3ZhciB0PXMuZGVmYXVsdC5kZWZhdWx0cyhhcmd1bWVudHMsW1wib3JkZXJcIl0scy5kZWZhdWx0LkNoZWJ5c2hldik7cy5kZWZhdWx0LkVmZmVjdC5jYWxsKHRoaXMsdCksdGhpcy5fc2hhcGVyPW5ldyBzLmRlZmF1bHQuV2F2ZVNoYXBlcig0MDk2KSx0aGlzLl9vcmRlcj10Lm9yZGVyLHRoaXMuY29ubmVjdEVmZmVjdCh0aGlzLl9zaGFwZXIpLHRoaXMub3JkZXI9dC5vcmRlcix0aGlzLm92ZXJzYW1wbGU9dC5vdmVyc2FtcGxlfSxzLmRlZmF1bHQuZXh0ZW5kKHMuZGVmYXVsdC5DaGVieXNoZXYscy5kZWZhdWx0LkVmZmVjdCkscy5kZWZhdWx0LkNoZWJ5c2hldi5kZWZhdWx0cz17b3JkZXI6MSxvdmVyc2FtcGxlOlwibm9uZVwifSxzLmRlZmF1bHQuQ2hlYnlzaGV2LnByb3RvdHlwZS5fZ2V0Q29lZmZpY2llbnQ9ZnVuY3Rpb24odCxlLGkpe3JldHVybiBpLmhhc093blByb3BlcnR5KGUpP2lbZV06KGlbZV09MD09PWU/MDoxPT09ZT90OjIqdCp0aGlzLl9nZXRDb2VmZmljaWVudCh0LGUtMSxpKS10aGlzLl9nZXRDb2VmZmljaWVudCh0LGUtMixpKSxpW2VdKX0sT2JqZWN0LmRlZmluZVByb3BlcnR5KHMuZGVmYXVsdC5DaGVieXNoZXYucHJvdG90eXBlLFwib3JkZXJcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX29yZGVyfSxzZXQ6ZnVuY3Rpb24odCl7dGhpcy5fb3JkZXI9dDtmb3IodmFyIGU9bmV3IEFycmF5KDQwOTYpLGk9ZS5sZW5ndGgscz0wO3M8aTsrK3Mpe3ZhciBuPTIqcy9pLTE7ZVtzXT0wPT09bj8wOnRoaXMuX2dldENvZWZmaWNpZW50KG4sdCx7fSl9dGhpcy5fc2hhcGVyLmN1cnZlPWV9fSksT2JqZWN0LmRlZmluZVByb3BlcnR5KHMuZGVmYXVsdC5DaGVieXNoZXYucHJvdG90eXBlLFwib3ZlcnNhbXBsZVwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fc2hhcGVyLm92ZXJzYW1wbGV9LHNldDpmdW5jdGlvbih0KXt0aGlzLl9zaGFwZXIub3ZlcnNhbXBsZT10fX0pLHMuZGVmYXVsdC5DaGVieXNoZXYucHJvdG90eXBlLmRpc3Bvc2U9ZnVuY3Rpb24oKXtyZXR1cm4gcy5kZWZhdWx0LkVmZmVjdC5wcm90b3R5cGUuZGlzcG9zZS5jYWxsKHRoaXMpLHRoaXMuX3NoYXBlci5kaXNwb3NlKCksdGhpcy5fc2hhcGVyPW51bGwsdGhpc30sZS5kZWZhdWx0PXMuZGVmYXVsdC5DaGVieXNoZXZ9LGZ1bmN0aW9uKHQsZSxpKXtcInVzZSBzdHJpY3RcIjtpLnIoZSk7dmFyIHM9aSgwKTtpKDgpLGkoMTMpLGkoNzUpO3MuZGVmYXVsdC5CaXRDcnVzaGVyPWZ1bmN0aW9uKCl7dmFyIHQ9cy5kZWZhdWx0LmRlZmF1bHRzKGFyZ3VtZW50cyxbXCJiaXRzXCJdLHMuZGVmYXVsdC5CaXRDcnVzaGVyKTtzLmRlZmF1bHQuRWZmZWN0LmNhbGwodGhpcyx0KTt2YXIgZT0xL01hdGgucG93KDIsdC5iaXRzLTEpO3RoaXMuX3N1YnRyYWN0PW5ldyBzLmRlZmF1bHQuU3VidHJhY3QsdGhpcy5fbW9kdWxvPW5ldyBzLmRlZmF1bHQuTW9kdWxvKGUpLHRoaXMuX2JpdHM9dC5iaXRzLHRoaXMuZWZmZWN0U2VuZC5mYW4odGhpcy5fc3VidHJhY3QsdGhpcy5fbW9kdWxvKSx0aGlzLl9tb2R1bG8uY29ubmVjdCh0aGlzLl9zdWJ0cmFjdCwwLDEpLHRoaXMuX3N1YnRyYWN0LmNvbm5lY3QodGhpcy5lZmZlY3RSZXR1cm4pfSxzLmRlZmF1bHQuZXh0ZW5kKHMuZGVmYXVsdC5CaXRDcnVzaGVyLHMuZGVmYXVsdC5FZmZlY3QpLHMuZGVmYXVsdC5CaXRDcnVzaGVyLmRlZmF1bHRzPXtiaXRzOjR9LE9iamVjdC5kZWZpbmVQcm9wZXJ0eShzLmRlZmF1bHQuQml0Q3J1c2hlci5wcm90b3R5cGUsXCJiaXRzXCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9iaXRzfSxzZXQ6ZnVuY3Rpb24odCl7dGhpcy5fYml0cz10O3ZhciBlPTEvTWF0aC5wb3coMix0LTEpO3RoaXMuX21vZHVsby52YWx1ZT1lfX0pLHMuZGVmYXVsdC5CaXRDcnVzaGVyLnByb3RvdHlwZS5kaXNwb3NlPWZ1bmN0aW9uKCl7cmV0dXJuIHMuZGVmYXVsdC5FZmZlY3QucHJvdG90eXBlLmRpc3Bvc2UuY2FsbCh0aGlzKSx0aGlzLl9zdWJ0cmFjdC5kaXNwb3NlKCksdGhpcy5fc3VidHJhY3Q9bnVsbCx0aGlzLl9tb2R1bG8uZGlzcG9zZSgpLHRoaXMuX21vZHVsbz1udWxsLHRoaXN9LGUuZGVmYXVsdD1zLmRlZmF1bHQuQml0Q3J1c2hlcn0sZnVuY3Rpb24odCxlLGkpe1widXNlIHN0cmljdFwiO2kucihlKTt2YXIgcz1pKDApO2koNTgpLGkoNDIpLGkoOCksaSg5KTtzLmRlZmF1bHQuQXV0b1dhaD1mdW5jdGlvbigpe3ZhciB0PXMuZGVmYXVsdC5kZWZhdWx0cyhhcmd1bWVudHMsW1wiYmFzZUZyZXF1ZW5jeVwiLFwib2N0YXZlc1wiLFwic2Vuc2l0aXZpdHlcIl0scy5kZWZhdWx0LkF1dG9XYWgpO3MuZGVmYXVsdC5FZmZlY3QuY2FsbCh0aGlzLHQpLHRoaXMuZm9sbG93ZXI9bmV3IHMuZGVmYXVsdC5Gb2xsb3dlcih0LmZvbGxvd2VyKSx0aGlzLl9zd2VlcFJhbmdlPW5ldyBzLmRlZmF1bHQuU2NhbGVFeHAoMCwxLC41KSx0aGlzLl9iYXNlRnJlcXVlbmN5PXQuYmFzZUZyZXF1ZW5jeSx0aGlzLl9vY3RhdmVzPXQub2N0YXZlcyx0aGlzLl9pbnB1dEJvb3N0PW5ldyBzLmRlZmF1bHQuR2Fpbix0aGlzLl9iYW5kcGFzcz1uZXcgcy5kZWZhdWx0LkZpbHRlcih7cm9sbG9mZjotNDgsZnJlcXVlbmN5OjAsUTp0LlF9KSx0aGlzLl9wZWFraW5nPW5ldyBzLmRlZmF1bHQuRmlsdGVyKDAsXCJwZWFraW5nXCIpLHRoaXMuX3BlYWtpbmcuZ2Fpbi52YWx1ZT10LmdhaW4sdGhpcy5nYWluPXRoaXMuX3BlYWtpbmcuZ2Fpbix0aGlzLlE9dGhpcy5fYmFuZHBhc3MuUSx0aGlzLmVmZmVjdFNlbmQuY2hhaW4odGhpcy5faW5wdXRCb29zdCx0aGlzLmZvbGxvd2VyLHRoaXMuX3N3ZWVwUmFuZ2UpLHRoaXMuX3N3ZWVwUmFuZ2UuY29ubmVjdCh0aGlzLl9iYW5kcGFzcy5mcmVxdWVuY3kpLHRoaXMuX3N3ZWVwUmFuZ2UuY29ubmVjdCh0aGlzLl9wZWFraW5nLmZyZXF1ZW5jeSksdGhpcy5lZmZlY3RTZW5kLmNoYWluKHRoaXMuX2JhbmRwYXNzLHRoaXMuX3BlYWtpbmcsdGhpcy5lZmZlY3RSZXR1cm4pLHRoaXMuX3NldFN3ZWVwUmFuZ2UoKSx0aGlzLnNlbnNpdGl2aXR5PXQuc2Vuc2l0aXZpdHksdGhpcy5fcmVhZE9ubHkoW1wiZ2FpblwiLFwiUVwiXSl9LHMuZGVmYXVsdC5leHRlbmQocy5kZWZhdWx0LkF1dG9XYWgscy5kZWZhdWx0LkVmZmVjdCkscy5kZWZhdWx0LkF1dG9XYWguZGVmYXVsdHM9e2Jhc2VGcmVxdWVuY3k6MTAwLG9jdGF2ZXM6NixzZW5zaXRpdml0eTowLFE6MixnYWluOjIsZm9sbG93ZXI6e2F0dGFjazouMyxyZWxlYXNlOi41fX0sT2JqZWN0LmRlZmluZVByb3BlcnR5KHMuZGVmYXVsdC5BdXRvV2FoLnByb3RvdHlwZSxcIm9jdGF2ZXNcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX29jdGF2ZXN9LHNldDpmdW5jdGlvbih0KXt0aGlzLl9vY3RhdmVzPXQsdGhpcy5fc2V0U3dlZXBSYW5nZSgpfX0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShzLmRlZmF1bHQuQXV0b1dhaC5wcm90b3R5cGUsXCJiYXNlRnJlcXVlbmN5XCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9iYXNlRnJlcXVlbmN5fSxzZXQ6ZnVuY3Rpb24odCl7dGhpcy5fYmFzZUZyZXF1ZW5jeT10LHRoaXMuX3NldFN3ZWVwUmFuZ2UoKX19KSxPYmplY3QuZGVmaW5lUHJvcGVydHkocy5kZWZhdWx0LkF1dG9XYWgucHJvdG90eXBlLFwic2Vuc2l0aXZpdHlcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHMuZGVmYXVsdC5nYWluVG9EYigxL3RoaXMuX2lucHV0Qm9vc3QuZ2Fpbi52YWx1ZSl9LHNldDpmdW5jdGlvbih0KXt0aGlzLl9pbnB1dEJvb3N0LmdhaW4udmFsdWU9MS9zLmRlZmF1bHQuZGJUb0dhaW4odCl9fSkscy5kZWZhdWx0LkF1dG9XYWgucHJvdG90eXBlLl9zZXRTd2VlcFJhbmdlPWZ1bmN0aW9uKCl7dGhpcy5fc3dlZXBSYW5nZS5taW49dGhpcy5fYmFzZUZyZXF1ZW5jeSx0aGlzLl9zd2VlcFJhbmdlLm1heD1NYXRoLm1pbih0aGlzLl9iYXNlRnJlcXVlbmN5Kk1hdGgucG93KDIsdGhpcy5fb2N0YXZlcyksdGhpcy5jb250ZXh0LnNhbXBsZVJhdGUvMil9LHMuZGVmYXVsdC5BdXRvV2FoLnByb3RvdHlwZS5kaXNwb3NlPWZ1bmN0aW9uKCl7cmV0dXJuIHMuZGVmYXVsdC5FZmZlY3QucHJvdG90eXBlLmRpc3Bvc2UuY2FsbCh0aGlzKSx0aGlzLmZvbGxvd2VyLmRpc3Bvc2UoKSx0aGlzLmZvbGxvd2VyPW51bGwsdGhpcy5fc3dlZXBSYW5nZS5kaXNwb3NlKCksdGhpcy5fc3dlZXBSYW5nZT1udWxsLHRoaXMuX2JhbmRwYXNzLmRpc3Bvc2UoKSx0aGlzLl9iYW5kcGFzcz1udWxsLHRoaXMuX3BlYWtpbmcuZGlzcG9zZSgpLHRoaXMuX3BlYWtpbmc9bnVsbCx0aGlzLl9pbnB1dEJvb3N0LmRpc3Bvc2UoKSx0aGlzLl9pbnB1dEJvb3N0PW51bGwsdGhpcy5fd3JpdGFibGUoW1wiZ2FpblwiLFwiUVwiXSksdGhpcy5nYWluPW51bGwsdGhpcy5RPW51bGwsdGhpc30sZS5kZWZhdWx0PXMuZGVmYXVsdC5BdXRvV2FofSxmdW5jdGlvbih0LGUsaSl7XCJ1c2Ugc3RyaWN0XCI7aS5yKGUpO3ZhciBzPWkoMCk7aSg4KSxpKDEyKSxpKDQ4KTtzLmRlZmF1bHQuQXV0b1Bhbm5lcj1mdW5jdGlvbigpe3ZhciB0PXMuZGVmYXVsdC5kZWZhdWx0cyhhcmd1bWVudHMsW1wiZnJlcXVlbmN5XCJdLHMuZGVmYXVsdC5BdXRvUGFubmVyKTtzLmRlZmF1bHQuRWZmZWN0LmNhbGwodGhpcyx0KSx0aGlzLl9sZm89bmV3IHMuZGVmYXVsdC5MRk8oe2ZyZXF1ZW5jeTp0LmZyZXF1ZW5jeSxhbXBsaXR1ZGU6dC5kZXB0aCxtaW46LTEsbWF4OjF9KSx0aGlzLmRlcHRoPXRoaXMuX2xmby5hbXBsaXR1ZGUsdGhpcy5fcGFubmVyPW5ldyBzLmRlZmF1bHQuUGFubmVyLHRoaXMuZnJlcXVlbmN5PXRoaXMuX2xmby5mcmVxdWVuY3ksdGhpcy5jb25uZWN0RWZmZWN0KHRoaXMuX3Bhbm5lciksdGhpcy5fbGZvLmNvbm5lY3QodGhpcy5fcGFubmVyLnBhbiksdGhpcy50eXBlPXQudHlwZSx0aGlzLl9yZWFkT25seShbXCJkZXB0aFwiLFwiZnJlcXVlbmN5XCJdKX0scy5kZWZhdWx0LmV4dGVuZChzLmRlZmF1bHQuQXV0b1Bhbm5lcixzLmRlZmF1bHQuRWZmZWN0KSxzLmRlZmF1bHQuQXV0b1Bhbm5lci5kZWZhdWx0cz17ZnJlcXVlbmN5OjEsdHlwZTpcInNpbmVcIixkZXB0aDoxfSxzLmRlZmF1bHQuQXV0b1Bhbm5lci5wcm90b3R5cGUuc3RhcnQ9ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuX2xmby5zdGFydCh0KSx0aGlzfSxzLmRlZmF1bHQuQXV0b1Bhbm5lci5wcm90b3R5cGUuc3RvcD1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5fbGZvLnN0b3AodCksdGhpc30scy5kZWZhdWx0LkF1dG9QYW5uZXIucHJvdG90eXBlLnN5bmM9ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuX2xmby5zeW5jKHQpLHRoaXN9LHMuZGVmYXVsdC5BdXRvUGFubmVyLnByb3RvdHlwZS51bnN5bmM9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fbGZvLnVuc3luYygpLHRoaXN9LE9iamVjdC5kZWZpbmVQcm9wZXJ0eShzLmRlZmF1bHQuQXV0b1Bhbm5lci5wcm90b3R5cGUsXCJ0eXBlXCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9sZm8udHlwZX0sc2V0OmZ1bmN0aW9uKHQpe3RoaXMuX2xmby50eXBlPXR9fSkscy5kZWZhdWx0LkF1dG9QYW5uZXIucHJvdG90eXBlLmRpc3Bvc2U9ZnVuY3Rpb24oKXtyZXR1cm4gcy5kZWZhdWx0LkVmZmVjdC5wcm90b3R5cGUuZGlzcG9zZS5jYWxsKHRoaXMpLHRoaXMuX2xmby5kaXNwb3NlKCksdGhpcy5fbGZvPW51bGwsdGhpcy5fcGFubmVyLmRpc3Bvc2UoKSx0aGlzLl9wYW5uZXI9bnVsbCx0aGlzLl93cml0YWJsZShbXCJkZXB0aFwiLFwiZnJlcXVlbmN5XCJdKSx0aGlzLmZyZXF1ZW5jeT1udWxsLHRoaXMuZGVwdGg9bnVsbCx0aGlzfSxlLmRlZmF1bHQ9cy5kZWZhdWx0LkF1dG9QYW5uZXJ9LGZ1bmN0aW9uKHQsZSxpKXtcInVzZSBzdHJpY3RcIjtpLnIoZSk7dmFyIHM9aSgwKTtpKDgpLGkoMTIpLGkoOSk7cy5kZWZhdWx0LkF1dG9GaWx0ZXI9ZnVuY3Rpb24oKXt2YXIgdD1zLmRlZmF1bHQuZGVmYXVsdHMoYXJndW1lbnRzLFtcImZyZXF1ZW5jeVwiLFwiYmFzZUZyZXF1ZW5jeVwiLFwib2N0YXZlc1wiXSxzLmRlZmF1bHQuQXV0b0ZpbHRlcik7cy5kZWZhdWx0LkVmZmVjdC5jYWxsKHRoaXMsdCksdGhpcy5fbGZvPW5ldyBzLmRlZmF1bHQuTEZPKHtmcmVxdWVuY3k6dC5mcmVxdWVuY3ksYW1wbGl0dWRlOnQuZGVwdGh9KSx0aGlzLmRlcHRoPXRoaXMuX2xmby5hbXBsaXR1ZGUsdGhpcy5mcmVxdWVuY3k9dGhpcy5fbGZvLmZyZXF1ZW5jeSx0aGlzLmZpbHRlcj1uZXcgcy5kZWZhdWx0LkZpbHRlcih0LmZpbHRlciksdGhpcy5fb2N0YXZlcz0wLHRoaXMuY29ubmVjdEVmZmVjdCh0aGlzLmZpbHRlciksdGhpcy5fbGZvLmNvbm5lY3QodGhpcy5maWx0ZXIuZnJlcXVlbmN5KSx0aGlzLnR5cGU9dC50eXBlLHRoaXMuX3JlYWRPbmx5KFtcImZyZXF1ZW5jeVwiLFwiZGVwdGhcIl0pLHRoaXMub2N0YXZlcz10Lm9jdGF2ZXMsdGhpcy5iYXNlRnJlcXVlbmN5PXQuYmFzZUZyZXF1ZW5jeX0scy5kZWZhdWx0LmV4dGVuZChzLmRlZmF1bHQuQXV0b0ZpbHRlcixzLmRlZmF1bHQuRWZmZWN0KSxzLmRlZmF1bHQuQXV0b0ZpbHRlci5kZWZhdWx0cz17ZnJlcXVlbmN5OjEsdHlwZTpcInNpbmVcIixkZXB0aDoxLGJhc2VGcmVxdWVuY3k6MjAwLG9jdGF2ZXM6Mi42LGZpbHRlcjp7dHlwZTpcImxvd3Bhc3NcIixyb2xsb2ZmOi0xMixROjF9fSxzLmRlZmF1bHQuQXV0b0ZpbHRlci5wcm90b3R5cGUuc3RhcnQ9ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuX2xmby5zdGFydCh0KSx0aGlzfSxzLmRlZmF1bHQuQXV0b0ZpbHRlci5wcm90b3R5cGUuc3RvcD1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5fbGZvLnN0b3AodCksdGhpc30scy5kZWZhdWx0LkF1dG9GaWx0ZXIucHJvdG90eXBlLnN5bmM9ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuX2xmby5zeW5jKHQpLHRoaXN9LHMuZGVmYXVsdC5BdXRvRmlsdGVyLnByb3RvdHlwZS51bnN5bmM9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fbGZvLnVuc3luYygpLHRoaXN9LE9iamVjdC5kZWZpbmVQcm9wZXJ0eShzLmRlZmF1bHQuQXV0b0ZpbHRlci5wcm90b3R5cGUsXCJ0eXBlXCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9sZm8udHlwZX0sc2V0OmZ1bmN0aW9uKHQpe3RoaXMuX2xmby50eXBlPXR9fSksT2JqZWN0LmRlZmluZVByb3BlcnR5KHMuZGVmYXVsdC5BdXRvRmlsdGVyLnByb3RvdHlwZSxcImJhc2VGcmVxdWVuY3lcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2xmby5taW59LHNldDpmdW5jdGlvbih0KXt0aGlzLl9sZm8ubWluPXRoaXMudG9GcmVxdWVuY3kodCksdGhpcy5vY3RhdmVzPXRoaXMuX29jdGF2ZXN9fSksT2JqZWN0LmRlZmluZVByb3BlcnR5KHMuZGVmYXVsdC5BdXRvRmlsdGVyLnByb3RvdHlwZSxcIm9jdGF2ZXNcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX29jdGF2ZXN9LHNldDpmdW5jdGlvbih0KXt0aGlzLl9vY3RhdmVzPXQsdGhpcy5fbGZvLm1heD10aGlzLmJhc2VGcmVxdWVuY3kqTWF0aC5wb3coMix0KX19KSxzLmRlZmF1bHQuQXV0b0ZpbHRlci5wcm90b3R5cGUuZGlzcG9zZT1mdW5jdGlvbigpe3JldHVybiBzLmRlZmF1bHQuRWZmZWN0LnByb3RvdHlwZS5kaXNwb3NlLmNhbGwodGhpcyksdGhpcy5fbGZvLmRpc3Bvc2UoKSx0aGlzLl9sZm89bnVsbCx0aGlzLmZpbHRlci5kaXNwb3NlKCksdGhpcy5maWx0ZXI9bnVsbCx0aGlzLl93cml0YWJsZShbXCJmcmVxdWVuY3lcIixcImRlcHRoXCJdKSx0aGlzLmZyZXF1ZW5jeT1udWxsLHRoaXMuZGVwdGg9bnVsbCx0aGlzfSxlLmRlZmF1bHQ9cy5kZWZhdWx0LkF1dG9GaWx0ZXJ9LGZ1bmN0aW9uKHQsZSxpKXtcInVzZSBzdHJpY3RcIjtpLnIoZSk7dmFyIHM9aSgwKTtpKDIzKSxpKDEwKSxpKDE5KSxpKDIpLGkoMjIpLGkoMjgpO3MuZGVmYXVsdC5MaXN0ZW5lcj1mdW5jdGlvbigpe3MuZGVmYXVsdC5jYWxsKHRoaXMpLHRoaXMuX29yaWVudGF0aW9uPVswLDAsMCwwLDAsMF0sdGhpcy5fcG9zaXRpb249WzAsMCwwXSxzLmRlZmF1bHQuZ2V0Q29udGV4dChmdW5jdGlvbigpe3RoaXMuc2V0KG4uZGVmYXVsdHMpfS5iaW5kKHRoaXMpKX0scy5kZWZhdWx0LmV4dGVuZChzLmRlZmF1bHQuTGlzdGVuZXIpLHMuZGVmYXVsdC5MaXN0ZW5lci5kZWZhdWx0cz17cG9zaXRpb25YOjAscG9zaXRpb25ZOjAscG9zaXRpb25aOjAsZm9yd2FyZFg6MCxmb3J3YXJkWTowLGZvcndhcmRaOjEsdXBYOjAsdXBZOjEsdXBaOjB9LHMuZGVmYXVsdC5MaXN0ZW5lci5wcm90b3R5cGUuaXNMaXN0ZW5lcj0hMCxzLmRlZmF1bHQuTGlzdGVuZXIucHJvdG90eXBlLl9yYW1wVGltZUNvbnN0YW50PS4wMSxzLmRlZmF1bHQuTGlzdGVuZXIucHJvdG90eXBlLnNldFBvc2l0aW9uPWZ1bmN0aW9uKHQsZSxpKXtpZih0aGlzLmNvbnRleHQucmF3Q29udGV4dC5saXN0ZW5lci5wb3NpdGlvblgpe3ZhciBzPXRoaXMubm93KCk7dGhpcy5jb250ZXh0LnJhd0NvbnRleHQubGlzdGVuZXIucG9zaXRpb25YLnNldFRhcmdldEF0VGltZSh0LHMsdGhpcy5fcmFtcFRpbWVDb25zdGFudCksdGhpcy5jb250ZXh0LnJhd0NvbnRleHQubGlzdGVuZXIucG9zaXRpb25ZLnNldFRhcmdldEF0VGltZShlLHMsdGhpcy5fcmFtcFRpbWVDb25zdGFudCksdGhpcy5jb250ZXh0LnJhd0NvbnRleHQubGlzdGVuZXIucG9zaXRpb25aLnNldFRhcmdldEF0VGltZShpLHMsdGhpcy5fcmFtcFRpbWVDb25zdGFudCl9ZWxzZSB0aGlzLmNvbnRleHQucmF3Q29udGV4dC5saXN0ZW5lci5zZXRQb3NpdGlvbih0LGUsaSk7cmV0dXJuIHRoaXMuX3Bvc2l0aW9uPUFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cyksdGhpc30scy5kZWZhdWx0Lkxpc3RlbmVyLnByb3RvdHlwZS5zZXRPcmllbnRhdGlvbj1mdW5jdGlvbih0LGUsaSxzLG4sbyl7aWYodGhpcy5jb250ZXh0LnJhd0NvbnRleHQubGlzdGVuZXIuZm9yd2FyZFgpe3ZhciBhPXRoaXMubm93KCk7dGhpcy5jb250ZXh0LnJhd0NvbnRleHQubGlzdGVuZXIuZm9yd2FyZFguc2V0VGFyZ2V0QXRUaW1lKHQsYSx0aGlzLl9yYW1wVGltZUNvbnN0YW50KSx0aGlzLmNvbnRleHQucmF3Q29udGV4dC5saXN0ZW5lci5mb3J3YXJkWS5zZXRUYXJnZXRBdFRpbWUoZSxhLHRoaXMuX3JhbXBUaW1lQ29uc3RhbnQpLHRoaXMuY29udGV4dC5yYXdDb250ZXh0Lmxpc3RlbmVyLmZvcndhcmRaLnNldFRhcmdldEF0VGltZShpLGEsdGhpcy5fcmFtcFRpbWVDb25zdGFudCksdGhpcy5jb250ZXh0LnJhd0NvbnRleHQubGlzdGVuZXIudXBYLnNldFRhcmdldEF0VGltZShzLGEsdGhpcy5fcmFtcFRpbWVDb25zdGFudCksdGhpcy5jb250ZXh0LnJhd0NvbnRleHQubGlzdGVuZXIudXBZLnNldFRhcmdldEF0VGltZShuLGEsdGhpcy5fcmFtcFRpbWVDb25zdGFudCksdGhpcy5jb250ZXh0LnJhd0NvbnRleHQubGlzdGVuZXIudXBaLnNldFRhcmdldEF0VGltZShvLGEsdGhpcy5fcmFtcFRpbWVDb25zdGFudCl9ZWxzZSB0aGlzLmNvbnRleHQucmF3Q29udGV4dC5saXN0ZW5lci5zZXRPcmllbnRhdGlvbih0LGUsaSxzLG4sbyk7cmV0dXJuIHRoaXMuX29yaWVudGF0aW9uPUFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cyksdGhpc30sT2JqZWN0LmRlZmluZVByb3BlcnR5KHMuZGVmYXVsdC5MaXN0ZW5lci5wcm90b3R5cGUsXCJwb3NpdGlvblhcIix7c2V0OmZ1bmN0aW9uKHQpe3RoaXMuX3Bvc2l0aW9uWzBdPXQsdGhpcy5zZXRQb3NpdGlvbi5hcHBseSh0aGlzLHRoaXMuX3Bvc2l0aW9uKX0sZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3Bvc2l0aW9uWzBdfX0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShzLmRlZmF1bHQuTGlzdGVuZXIucHJvdG90eXBlLFwicG9zaXRpb25ZXCIse3NldDpmdW5jdGlvbih0KXt0aGlzLl9wb3NpdGlvblsxXT10LHRoaXMuc2V0UG9zaXRpb24uYXBwbHkodGhpcyx0aGlzLl9wb3NpdGlvbil9LGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9wb3NpdGlvblsxXX19KSxPYmplY3QuZGVmaW5lUHJvcGVydHkocy5kZWZhdWx0Lkxpc3RlbmVyLnByb3RvdHlwZSxcInBvc2l0aW9uWlwiLHtzZXQ6ZnVuY3Rpb24odCl7dGhpcy5fcG9zaXRpb25bMl09dCx0aGlzLnNldFBvc2l0aW9uLmFwcGx5KHRoaXMsdGhpcy5fcG9zaXRpb24pfSxnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fcG9zaXRpb25bMl19fSksT2JqZWN0LmRlZmluZVByb3BlcnR5KHMuZGVmYXVsdC5MaXN0ZW5lci5wcm90b3R5cGUsXCJmb3J3YXJkWFwiLHtzZXQ6ZnVuY3Rpb24odCl7dGhpcy5fb3JpZW50YXRpb25bMF09dCx0aGlzLnNldE9yaWVudGF0aW9uLmFwcGx5KHRoaXMsdGhpcy5fb3JpZW50YXRpb24pfSxnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fb3JpZW50YXRpb25bMF19fSksT2JqZWN0LmRlZmluZVByb3BlcnR5KHMuZGVmYXVsdC5MaXN0ZW5lci5wcm90b3R5cGUsXCJmb3J3YXJkWVwiLHtzZXQ6ZnVuY3Rpb24odCl7dGhpcy5fb3JpZW50YXRpb25bMV09dCx0aGlzLnNldE9yaWVudGF0aW9uLmFwcGx5KHRoaXMsdGhpcy5fb3JpZW50YXRpb24pfSxnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fb3JpZW50YXRpb25bMV19fSksT2JqZWN0LmRlZmluZVByb3BlcnR5KHMuZGVmYXVsdC5MaXN0ZW5lci5wcm90b3R5cGUsXCJmb3J3YXJkWlwiLHtzZXQ6ZnVuY3Rpb24odCl7dGhpcy5fb3JpZW50YXRpb25bMl09dCx0aGlzLnNldE9yaWVudGF0aW9uLmFwcGx5KHRoaXMsdGhpcy5fb3JpZW50YXRpb24pfSxnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fb3JpZW50YXRpb25bMl19fSksT2JqZWN0LmRlZmluZVByb3BlcnR5KHMuZGVmYXVsdC5MaXN0ZW5lci5wcm90b3R5cGUsXCJ1cFhcIix7c2V0OmZ1bmN0aW9uKHQpe3RoaXMuX29yaWVudGF0aW9uWzNdPXQsdGhpcy5zZXRPcmllbnRhdGlvbi5hcHBseSh0aGlzLHRoaXMuX29yaWVudGF0aW9uKX0sZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX29yaWVudGF0aW9uWzNdfX0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShzLmRlZmF1bHQuTGlzdGVuZXIucHJvdG90eXBlLFwidXBZXCIse3NldDpmdW5jdGlvbih0KXt0aGlzLl9vcmllbnRhdGlvbls0XT10LHRoaXMuc2V0T3JpZW50YXRpb24uYXBwbHkodGhpcyx0aGlzLl9vcmllbnRhdGlvbil9LGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9vcmllbnRhdGlvbls0XX19KSxPYmplY3QuZGVmaW5lUHJvcGVydHkocy5kZWZhdWx0Lkxpc3RlbmVyLnByb3RvdHlwZSxcInVwWlwiLHtzZXQ6ZnVuY3Rpb24odCl7dGhpcy5fb3JpZW50YXRpb25bNV09dCx0aGlzLnNldE9yaWVudGF0aW9uLmFwcGx5KHRoaXMsdGhpcy5fb3JpZW50YXRpb24pfSxnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fb3JpZW50YXRpb25bNV19fSkscy5kZWZhdWx0Lkxpc3RlbmVyLnByb3RvdHlwZS5kaXNwb3NlPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX29yaWVudGF0aW9uPW51bGwsdGhpcy5fcG9zaXRpb249bnVsbCx0aGlzfTt2YXIgbj1zLmRlZmF1bHQuTGlzdGVuZXI7cy5kZWZhdWx0Lkxpc3RlbmVyPW5ldyBuLHMuZGVmYXVsdC5Db250ZXh0Lm9uKFwiaW5pdFwiLGZ1bmN0aW9uKHQpe3QubGlzdGVuZXImJnQubGlzdGVuZXIuaXNMaXN0ZW5lcj9zLmRlZmF1bHQuTGlzdGVuZXI9dC5saXN0ZW5lcjpzLmRlZmF1bHQuTGlzdGVuZXI9bmV3IG59KSxlLmRlZmF1bHQ9cy5kZWZhdWx0Lkxpc3RlbmVyfSxmdW5jdGlvbih0LGUsaSl7XCJ1c2Ugc3RyaWN0XCI7aS5yKGUpO3ZhciBzPWkoMCk7aSgyNCk7cy5kZWZhdWx0LkRyYXc9ZnVuY3Rpb24oKXtzLmRlZmF1bHQuY2FsbCh0aGlzKSx0aGlzLl9ldmVudHM9bmV3IHMuZGVmYXVsdC5UaW1lbGluZSx0aGlzLmV4cGlyYXRpb249LjI1LHRoaXMuYW50aWNpcGF0aW9uPS4wMDgsdGhpcy5fYm91bmREcmF3TG9vcD10aGlzLl9kcmF3TG9vcC5iaW5kKHRoaXMpfSxzLmRlZmF1bHQuZXh0ZW5kKHMuZGVmYXVsdC5EcmF3KSxzLmRlZmF1bHQuRHJhdy5wcm90b3R5cGUuc2NoZWR1bGU9ZnVuY3Rpb24odCxlKXtyZXR1cm4gdGhpcy5fZXZlbnRzLmFkZCh7Y2FsbGJhY2s6dCx0aW1lOnRoaXMudG9TZWNvbmRzKGUpfSksMT09PXRoaXMuX2V2ZW50cy5sZW5ndGgmJnJlcXVlc3RBbmltYXRpb25GcmFtZSh0aGlzLl9ib3VuZERyYXdMb29wKSx0aGlzfSxzLmRlZmF1bHQuRHJhdy5wcm90b3R5cGUuY2FuY2VsPWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLl9ldmVudHMuY2FuY2VsKHRoaXMudG9TZWNvbmRzKHQpKSx0aGlzfSxzLmRlZmF1bHQuRHJhdy5wcm90b3R5cGUuX2RyYXdMb29wPWZ1bmN0aW9uKCl7Zm9yKHZhciB0PXMuZGVmYXVsdC5jb250ZXh0LmN1cnJlbnRUaW1lO3RoaXMuX2V2ZW50cy5sZW5ndGgmJnRoaXMuX2V2ZW50cy5wZWVrKCkudGltZS10aGlzLmFudGljaXBhdGlvbjw9dDspe3ZhciBlPXRoaXMuX2V2ZW50cy5zaGlmdCgpO3QtZS50aW1lPD10aGlzLmV4cGlyYXRpb24mJmUuY2FsbGJhY2soKX10aGlzLl9ldmVudHMubGVuZ3RoPjAmJnJlcXVlc3RBbmltYXRpb25GcmFtZSh0aGlzLl9ib3VuZERyYXdMb29wKX0scy5kZWZhdWx0LkRyYXc9bmV3IHMuZGVmYXVsdC5EcmF3LGUuZGVmYXVsdD1zLmRlZmF1bHQuRHJhd30sZnVuY3Rpb24odCxlLGkpe1widXNlIHN0cmljdFwiO2kucihlKTt2YXIgcz1pKDApLG49KGkoMykse30pO3MuZGVmYXVsdC5wcm90b3R5cGUuc2VuZD1mdW5jdGlvbih0LGUpe24uaGFzT3duUHJvcGVydHkodCl8fChuW3RdPXRoaXMuY29udGV4dC5jcmVhdGVHYWluKCkpLGU9cy5kZWZhdWx0LmRlZmF1bHRBcmcoZSwwKTt2YXIgaT1uZXcgcy5kZWZhdWx0LkdhaW4oZSxzLmRlZmF1bHQuVHlwZS5EZWNpYmVscyk7cmV0dXJuIHRoaXMuY29ubmVjdChpKSxpLmNvbm5lY3Qoblt0XSksaX0scy5kZWZhdWx0LnByb3RvdHlwZS5yZWNlaXZlPWZ1bmN0aW9uKHQsZSl7cmV0dXJuIG4uaGFzT3duUHJvcGVydHkodCl8fChuW3RdPXRoaXMuY29udGV4dC5jcmVhdGVHYWluKCkpLHMuZGVmYXVsdC5jb25uZWN0KG5bdF0sdGhpcywwLGUpLHRoaXN9LHMuZGVmYXVsdC5Db250ZXh0Lm9uKFwiaW5pdFwiLGZ1bmN0aW9uKHQpe3QuYnVzZXM/bj10LmJ1c2VzOihuPXt9LHQuYnVzZXM9bil9KSxlLmRlZmF1bHQ9cy5kZWZhdWx0fSxmdW5jdGlvbih0LGUsaSl7XCJ1c2Ugc3RyaWN0XCI7aS5yKGUpO3ZhciBzPWkoMCk7aSg0KTtzLmRlZmF1bHQuQ3RybFJhbmRvbT1mdW5jdGlvbigpe3ZhciB0PXMuZGVmYXVsdC5kZWZhdWx0cyhhcmd1bWVudHMsW1wibWluXCIsXCJtYXhcIl0scy5kZWZhdWx0LkN0cmxSYW5kb20pO3MuZGVmYXVsdC5jYWxsKHRoaXMpLHRoaXMubWluPXQubWluLHRoaXMubWF4PXQubWF4LHRoaXMuaW50ZWdlcj10LmludGVnZXJ9LHMuZGVmYXVsdC5leHRlbmQocy5kZWZhdWx0LkN0cmxSYW5kb20pLHMuZGVmYXVsdC5DdHJsUmFuZG9tLmRlZmF1bHRzPXttaW46MCxtYXg6MSxpbnRlZ2VyOiExfSxPYmplY3QuZGVmaW5lUHJvcGVydHkocy5kZWZhdWx0LkN0cmxSYW5kb20ucHJvdG90eXBlLFwidmFsdWVcIix7Z2V0OmZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy50b1NlY29uZHModGhpcy5taW4pLGU9dGhpcy50b1NlY29uZHModGhpcy5tYXgpLGk9TWF0aC5yYW5kb20oKSxzPWkqdCsoMS1pKSplO3JldHVybiB0aGlzLmludGVnZXImJihzPU1hdGguZmxvb3IocykpLHN9fSksZS5kZWZhdWx0PXMuZGVmYXVsdC5DdHJsUmFuZG9tfSxmdW5jdGlvbih0LGUsaSl7XCJ1c2Ugc3RyaWN0XCI7aS5yKGUpO3ZhciBzPWkoMCk7cy5kZWZhdWx0LkN0cmxNYXJrb3Y9ZnVuY3Rpb24odCxlKXtzLmRlZmF1bHQuY2FsbCh0aGlzKSx0aGlzLnZhbHVlcz1zLmRlZmF1bHQuZGVmYXVsdEFyZyh0LHt9KSx0aGlzLnZhbHVlPXMuZGVmYXVsdC5kZWZhdWx0QXJnKGUsT2JqZWN0LmtleXModGhpcy52YWx1ZXMpWzBdKX0scy5kZWZhdWx0LmV4dGVuZChzLmRlZmF1bHQuQ3RybE1hcmtvdikscy5kZWZhdWx0LkN0cmxNYXJrb3YucHJvdG90eXBlLm5leHQ9ZnVuY3Rpb24oKXtpZih0aGlzLnZhbHVlcy5oYXNPd25Qcm9wZXJ0eSh0aGlzLnZhbHVlKSl7dmFyIHQ9dGhpcy52YWx1ZXNbdGhpcy52YWx1ZV07aWYocy5kZWZhdWx0LmlzQXJyYXkodCkpZm9yKHZhciBlPXRoaXMuX2dldFByb2JEaXN0cmlidXRpb24odCksaT1NYXRoLnJhbmRvbSgpLG49MCxvPTA7bzxlLmxlbmd0aDtvKyspe3ZhciBhPWVbb107aWYoaT5uJiZpPG4rYSl7dmFyIHI9dFtvXTtzLmRlZmF1bHQuaXNPYmplY3Qocik/dGhpcy52YWx1ZT1yLnZhbHVlOnRoaXMudmFsdWU9cn1uKz1hfWVsc2UgdGhpcy52YWx1ZT10fXJldHVybiB0aGlzLnZhbHVlfSxzLmRlZmF1bHQuQ3RybE1hcmtvdi5wcm90b3R5cGUuX2dldFByb2JEaXN0cmlidXRpb249ZnVuY3Rpb24odCl7Zm9yKHZhciBlPVtdLGk9MCxuPSExLG89MDtvPHQubGVuZ3RoO28rKyl7dmFyIGE9dFtvXTtzLmRlZmF1bHQuaXNPYmplY3QoYSk/KG49ITAsZVtvXT1hLnByb2JhYmlsaXR5KTplW29dPTEvdC5sZW5ndGgsaSs9ZVtvXX1pZihuKWZvcih2YXIgcj0wO3I8ZS5sZW5ndGg7cisrKWVbcl09ZVtyXS9pO3JldHVybiBlfSxzLmRlZmF1bHQuQ3RybE1hcmtvdi5wcm90b3R5cGUuZGlzcG9zZT1mdW5jdGlvbigpe3RoaXMudmFsdWVzPW51bGx9LGUuZGVmYXVsdD1zLmRlZmF1bHQuQ3RybE1hcmtvdn0sZnVuY3Rpb24odCxlLGkpe1widXNlIHN0cmljdFwiO2kucihlKTt2YXIgcz1pKDApO2koNCk7cy5kZWZhdWx0LkN0cmxJbnRlcnBvbGF0ZT1mdW5jdGlvbigpe3ZhciB0PXMuZGVmYXVsdC5kZWZhdWx0cyhhcmd1bWVudHMsW1widmFsdWVzXCIsXCJpbmRleFwiXSxzLmRlZmF1bHQuQ3RybEludGVycG9sYXRlKTtzLmRlZmF1bHQuY2FsbCh0aGlzKSx0aGlzLnZhbHVlcz10LnZhbHVlcyx0aGlzLmluZGV4PXQuaW5kZXh9LHMuZGVmYXVsdC5leHRlbmQocy5kZWZhdWx0LkN0cmxJbnRlcnBvbGF0ZSkscy5kZWZhdWx0LkN0cmxJbnRlcnBvbGF0ZS5kZWZhdWx0cz17aW5kZXg6MCx2YWx1ZXM6W119LE9iamVjdC5kZWZpbmVQcm9wZXJ0eShzLmRlZmF1bHQuQ3RybEludGVycG9sYXRlLnByb3RvdHlwZSxcInZhbHVlXCIse2dldDpmdW5jdGlvbigpe3ZhciB0PXRoaXMuaW5kZXg7dD1NYXRoLm1pbih0LHRoaXMudmFsdWVzLmxlbmd0aC0xKTt2YXIgZT1NYXRoLmZsb29yKHQpLGk9dGhpcy52YWx1ZXNbZV0scz10aGlzLnZhbHVlc1tNYXRoLmNlaWwodCldO3JldHVybiB0aGlzLl9pbnRlcnBvbGF0ZSh0LWUsaSxzKX19KSxzLmRlZmF1bHQuQ3RybEludGVycG9sYXRlLnByb3RvdHlwZS5faW50ZXJwb2xhdGU9ZnVuY3Rpb24odCxlLGkpe2lmKHMuZGVmYXVsdC5pc0FycmF5KGUpKXtmb3IodmFyIG49W10sbz0wO288ZS5sZW5ndGg7bysrKW5bb109dGhpcy5faW50ZXJwb2xhdGUodCxlW29dLGlbb10pO3JldHVybiBufWlmKHMuZGVmYXVsdC5pc09iamVjdChlKSl7dmFyIGE9e307Zm9yKHZhciByIGluIGUpYVtyXT10aGlzLl9pbnRlcnBvbGF0ZSh0LGVbcl0saVtyXSk7cmV0dXJuIGF9cmV0dXJuKDEtdCkqKGU9dGhpcy5fdG9OdW1iZXIoZSkpK3QqKGk9dGhpcy5fdG9OdW1iZXIoaSkpfSxzLmRlZmF1bHQuQ3RybEludGVycG9sYXRlLnByb3RvdHlwZS5fdG9OdW1iZXI9ZnVuY3Rpb24odCl7cmV0dXJuIHMuZGVmYXVsdC5pc051bWJlcih0KT90OnRoaXMudG9TZWNvbmRzKHQpfSxzLmRlZmF1bHQuQ3RybEludGVycG9sYXRlLnByb3RvdHlwZS5kaXNwb3NlPWZ1bmN0aW9uKCl7dGhpcy52YWx1ZXM9bnVsbH0sZS5kZWZhdWx0PXMuZGVmYXVsdC5DdHJsSW50ZXJwb2xhdGV9LGZ1bmN0aW9uKHQsZSxpKXtcInVzZSBzdHJpY3RcIjtpLnIoZSk7dmFyIHM9aSgwKTtpKDM2KSxpKDEpO3MuZGVmYXVsdC5XYXZlZm9ybT1mdW5jdGlvbigpe3ZhciB0PXMuZGVmYXVsdC5kZWZhdWx0cyhhcmd1bWVudHMsW1wic2l6ZVwiXSxzLmRlZmF1bHQuV2F2ZWZvcm0pO3QudHlwZT1zLmRlZmF1bHQuQW5hbHlzZXIuVHlwZS5XYXZlZm9ybSxzLmRlZmF1bHQuQXVkaW9Ob2RlLmNhbGwodGhpcyksdGhpcy5fYW5hbHlzZXI9dGhpcy5pbnB1dD10aGlzLm91dHB1dD1uZXcgcy5kZWZhdWx0LkFuYWx5c2VyKHQpfSxzLmRlZmF1bHQuZXh0ZW5kKHMuZGVmYXVsdC5XYXZlZm9ybSxzLmRlZmF1bHQuQXVkaW9Ob2RlKSxzLmRlZmF1bHQuV2F2ZWZvcm0uZGVmYXVsdHM9e3NpemU6MTAyNH0scy5kZWZhdWx0LldhdmVmb3JtLnByb3RvdHlwZS5nZXRWYWx1ZT1mdW5jdGlvbigpe3JldHVybiB0aGlzLl9hbmFseXNlci5nZXRWYWx1ZSgpfSxPYmplY3QuZGVmaW5lUHJvcGVydHkocy5kZWZhdWx0LldhdmVmb3JtLnByb3RvdHlwZSxcInNpemVcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2FuYWx5c2VyLnNpemV9LHNldDpmdW5jdGlvbih0KXt0aGlzLl9hbmFseXNlci5zaXplPXR9fSkscy5kZWZhdWx0LldhdmVmb3JtLnByb3RvdHlwZS5kaXNwb3NlPWZ1bmN0aW9uKCl7cy5kZWZhdWx0LkF1ZGlvTm9kZS5wcm90b3R5cGUuZGlzcG9zZS5jYWxsKHRoaXMpLHRoaXMuX2FuYWx5c2VyLmRpc3Bvc2UoKSx0aGlzLl9hbmFseXNlcj1udWxsfSxlLmRlZmF1bHQ9cy5kZWZhdWx0LldhdmVmb3JtfSxmdW5jdGlvbih0LGUsaSl7XCJ1c2Ugc3RyaWN0XCI7aS5yKGUpO3ZhciBzPWkoMCk7aSgyMyksaSgxMCksaSgxOSksaSgyKSxpKDIyKSxpKDI4KSxpKDEpO3MuZGVmYXVsdC5QYW5uZXIzRD1mdW5jdGlvbigpe3ZhciB0PXMuZGVmYXVsdC5kZWZhdWx0cyhhcmd1bWVudHMsW1wicG9zaXRpb25YXCIsXCJwb3NpdGlvbllcIixcInBvc2l0aW9uWlwiXSxzLmRlZmF1bHQuUGFubmVyM0QpO3MuZGVmYXVsdC5BdWRpb05vZGUuY2FsbCh0aGlzKSx0aGlzLl9wYW5uZXI9dGhpcy5pbnB1dD10aGlzLm91dHB1dD10aGlzLmNvbnRleHQuY3JlYXRlUGFubmVyKCksdGhpcy5fcGFubmVyLnBhbm5pbmdNb2RlbD10LnBhbm5pbmdNb2RlbCx0aGlzLl9wYW5uZXIubWF4RGlzdGFuY2U9dC5tYXhEaXN0YW5jZSx0aGlzLl9wYW5uZXIuZGlzdGFuY2VNb2RlbD10LmRpc3RhbmNlTW9kZWwsdGhpcy5fcGFubmVyLmNvbmVPdXRlckdhaW49dC5jb25lT3V0ZXJHYWluLHRoaXMuX3Bhbm5lci5jb25lT3V0ZXJBbmdsZT10LmNvbmVPdXRlckFuZ2xlLHRoaXMuX3Bhbm5lci5jb25lSW5uZXJBbmdsZT10LmNvbmVJbm5lckFuZ2xlLHRoaXMuX3Bhbm5lci5yZWZEaXN0YW5jZT10LnJlZkRpc3RhbmNlLHRoaXMuX3Bhbm5lci5yb2xsb2ZmRmFjdG9yPXQucm9sbG9mZkZhY3Rvcix0aGlzLl9vcmllbnRhdGlvbj1bdC5vcmllbnRhdGlvblgsdC5vcmllbnRhdGlvblksdC5vcmllbnRhdGlvblpdLHRoaXMuX3Bvc2l0aW9uPVt0LnBvc2l0aW9uWCx0LnBvc2l0aW9uWSx0LnBvc2l0aW9uWl0sdGhpcy5vcmllbnRhdGlvblg9dC5vcmllbnRhdGlvblgsdGhpcy5vcmllbnRhdGlvblk9dC5vcmllbnRhdGlvblksdGhpcy5vcmllbnRhdGlvblo9dC5vcmllbnRhdGlvblosdGhpcy5wb3NpdGlvblg9dC5wb3NpdGlvblgsdGhpcy5wb3NpdGlvblk9dC5wb3NpdGlvblksdGhpcy5wb3NpdGlvblo9dC5wb3NpdGlvblp9LHMuZGVmYXVsdC5leHRlbmQocy5kZWZhdWx0LlBhbm5lcjNELHMuZGVmYXVsdC5BdWRpb05vZGUpLHMuZGVmYXVsdC5QYW5uZXIzRC5kZWZhdWx0cz17cG9zaXRpb25YOjAscG9zaXRpb25ZOjAscG9zaXRpb25aOjAsb3JpZW50YXRpb25YOjAsb3JpZW50YXRpb25ZOjAsb3JpZW50YXRpb25aOjAscGFubmluZ01vZGVsOlwiZXF1YWxwb3dlclwiLG1heERpc3RhbmNlOjFlNCxkaXN0YW5jZU1vZGVsOlwiaW52ZXJzZVwiLGNvbmVPdXRlckdhaW46MCxjb25lT3V0ZXJBbmdsZTozNjAsY29uZUlubmVyQW5nbGU6MzYwLHJlZkRpc3RhbmNlOjEscm9sbG9mZkZhY3RvcjoxfSxzLmRlZmF1bHQuUGFubmVyM0QucHJvdG90eXBlLl9yYW1wVGltZUNvbnN0YW50PS4wMSxzLmRlZmF1bHQuUGFubmVyM0QucHJvdG90eXBlLnNldFBvc2l0aW9uPWZ1bmN0aW9uKHQsZSxpKXtpZih0aGlzLl9wYW5uZXIucG9zaXRpb25YKXt2YXIgcz10aGlzLm5vdygpO3RoaXMuX3Bhbm5lci5wb3NpdGlvblguc2V0VGFyZ2V0QXRUaW1lKHQscyx0aGlzLl9yYW1wVGltZUNvbnN0YW50KSx0aGlzLl9wYW5uZXIucG9zaXRpb25ZLnNldFRhcmdldEF0VGltZShlLHMsdGhpcy5fcmFtcFRpbWVDb25zdGFudCksdGhpcy5fcGFubmVyLnBvc2l0aW9uWi5zZXRUYXJnZXRBdFRpbWUoaSxzLHRoaXMuX3JhbXBUaW1lQ29uc3RhbnQpfWVsc2UgdGhpcy5fcGFubmVyLnNldFBvc2l0aW9uKHQsZSxpKTtyZXR1cm4gdGhpcy5fcG9zaXRpb249QXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYXJndW1lbnRzKSx0aGlzfSxzLmRlZmF1bHQuUGFubmVyM0QucHJvdG90eXBlLnNldE9yaWVudGF0aW9uPWZ1bmN0aW9uKHQsZSxpKXtpZih0aGlzLl9wYW5uZXIub3JpZW50YXRpb25YKXt2YXIgcz10aGlzLm5vdygpO3RoaXMuX3Bhbm5lci5vcmllbnRhdGlvblguc2V0VGFyZ2V0QXRUaW1lKHQscyx0aGlzLl9yYW1wVGltZUNvbnN0YW50KSx0aGlzLl9wYW5uZXIub3JpZW50YXRpb25ZLnNldFRhcmdldEF0VGltZShlLHMsdGhpcy5fcmFtcFRpbWVDb25zdGFudCksdGhpcy5fcGFubmVyLm9yaWVudGF0aW9uWi5zZXRUYXJnZXRBdFRpbWUoaSxzLHRoaXMuX3JhbXBUaW1lQ29uc3RhbnQpfWVsc2UgdGhpcy5fcGFubmVyLnNldE9yaWVudGF0aW9uKHQsZSxpKTtyZXR1cm4gdGhpcy5fb3JpZW50YXRpb249QXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYXJndW1lbnRzKSx0aGlzfSxPYmplY3QuZGVmaW5lUHJvcGVydHkocy5kZWZhdWx0LlBhbm5lcjNELnByb3RvdHlwZSxcInBvc2l0aW9uWFwiLHtzZXQ6ZnVuY3Rpb24odCl7dGhpcy5fcG9zaXRpb25bMF09dCx0aGlzLnNldFBvc2l0aW9uLmFwcGx5KHRoaXMsdGhpcy5fcG9zaXRpb24pfSxnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fcG9zaXRpb25bMF19fSksT2JqZWN0LmRlZmluZVByb3BlcnR5KHMuZGVmYXVsdC5QYW5uZXIzRC5wcm90b3R5cGUsXCJwb3NpdGlvbllcIix7c2V0OmZ1bmN0aW9uKHQpe3RoaXMuX3Bvc2l0aW9uWzFdPXQsdGhpcy5zZXRQb3NpdGlvbi5hcHBseSh0aGlzLHRoaXMuX3Bvc2l0aW9uKX0sZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3Bvc2l0aW9uWzFdfX0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShzLmRlZmF1bHQuUGFubmVyM0QucHJvdG90eXBlLFwicG9zaXRpb25aXCIse3NldDpmdW5jdGlvbih0KXt0aGlzLl9wb3NpdGlvblsyXT10LHRoaXMuc2V0UG9zaXRpb24uYXBwbHkodGhpcyx0aGlzLl9wb3NpdGlvbil9LGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9wb3NpdGlvblsyXX19KSxPYmplY3QuZGVmaW5lUHJvcGVydHkocy5kZWZhdWx0LlBhbm5lcjNELnByb3RvdHlwZSxcIm9yaWVudGF0aW9uWFwiLHtzZXQ6ZnVuY3Rpb24odCl7dGhpcy5fb3JpZW50YXRpb25bMF09dCx0aGlzLnNldE9yaWVudGF0aW9uLmFwcGx5KHRoaXMsdGhpcy5fb3JpZW50YXRpb24pfSxnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fb3JpZW50YXRpb25bMF19fSksT2JqZWN0LmRlZmluZVByb3BlcnR5KHMuZGVmYXVsdC5QYW5uZXIzRC5wcm90b3R5cGUsXCJvcmllbnRhdGlvbllcIix7c2V0OmZ1bmN0aW9uKHQpe3RoaXMuX29yaWVudGF0aW9uWzFdPXQsdGhpcy5zZXRPcmllbnRhdGlvbi5hcHBseSh0aGlzLHRoaXMuX29yaWVudGF0aW9uKX0sZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX29yaWVudGF0aW9uWzFdfX0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShzLmRlZmF1bHQuUGFubmVyM0QucHJvdG90eXBlLFwib3JpZW50YXRpb25aXCIse3NldDpmdW5jdGlvbih0KXt0aGlzLl9vcmllbnRhdGlvblsyXT10LHRoaXMuc2V0T3JpZW50YXRpb24uYXBwbHkodGhpcyx0aGlzLl9vcmllbnRhdGlvbil9LGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9vcmllbnRhdGlvblsyXX19KSxzLmRlZmF1bHQuUGFubmVyM0QuX2FsaWFzUHJvcGVydHk9ZnVuY3Rpb24odCl7T2JqZWN0LmRlZmluZVByb3BlcnR5KHMuZGVmYXVsdC5QYW5uZXIzRC5wcm90b3R5cGUsdCx7c2V0OmZ1bmN0aW9uKGUpe3RoaXMuX3Bhbm5lclt0XT1lfSxnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fcGFubmVyW3RdfX0pfSxzLmRlZmF1bHQuUGFubmVyM0QuX2FsaWFzUHJvcGVydHkoXCJwYW5uaW5nTW9kZWxcIikscy5kZWZhdWx0LlBhbm5lcjNELl9hbGlhc1Byb3BlcnR5KFwicmVmRGlzdGFuY2VcIikscy5kZWZhdWx0LlBhbm5lcjNELl9hbGlhc1Byb3BlcnR5KFwicm9sbG9mZkZhY3RvclwiKSxzLmRlZmF1bHQuUGFubmVyM0QuX2FsaWFzUHJvcGVydHkoXCJkaXN0YW5jZU1vZGVsXCIpLHMuZGVmYXVsdC5QYW5uZXIzRC5fYWxpYXNQcm9wZXJ0eShcImNvbmVJbm5lckFuZ2xlXCIpLHMuZGVmYXVsdC5QYW5uZXIzRC5fYWxpYXNQcm9wZXJ0eShcImNvbmVPdXRlckFuZ2xlXCIpLHMuZGVmYXVsdC5QYW5uZXIzRC5fYWxpYXNQcm9wZXJ0eShcImNvbmVPdXRlckdhaW5cIikscy5kZWZhdWx0LlBhbm5lcjNELl9hbGlhc1Byb3BlcnR5KFwibWF4RGlzdGFuY2VcIikscy5kZWZhdWx0LlBhbm5lcjNELnByb3RvdHlwZS5kaXNwb3NlPWZ1bmN0aW9uKCl7cmV0dXJuIHMuZGVmYXVsdC5BdWRpb05vZGUucHJvdG90eXBlLmRpc3Bvc2UuY2FsbCh0aGlzKSx0aGlzLl9wYW5uZXIuZGlzY29ubmVjdCgpLHRoaXMuX3Bhbm5lcj1udWxsLHRoaXMuX29yaWVudGF0aW9uPW51bGwsdGhpcy5fcG9zaXRpb249bnVsbCx0aGlzfSxlLmRlZmF1bHQ9cy5kZWZhdWx0LlBhbm5lcjNEfSxmdW5jdGlvbih0LGUsaSl7XCJ1c2Ugc3RyaWN0XCI7aS5yKGUpO3ZhciBzPWkoMCk7aSg2MCksaSg0MyksaSgxKTtzLmRlZmF1bHQuTXVsdGliYW5kQ29tcHJlc3Nvcj1mdW5jdGlvbih0KXtzLmRlZmF1bHQuQXVkaW9Ob2RlLmNhbGwodGhpcyksdD1zLmRlZmF1bHQuZGVmYXVsdEFyZyhhcmd1bWVudHMscy5kZWZhdWx0Lk11bHRpYmFuZENvbXByZXNzb3IuZGVmYXVsdHMpLHRoaXMuX3NwbGl0dGVyPXRoaXMuaW5wdXQ9bmV3IHMuZGVmYXVsdC5NdWx0aWJhbmRTcGxpdCh7bG93RnJlcXVlbmN5OnQubG93RnJlcXVlbmN5LGhpZ2hGcmVxdWVuY3k6dC5oaWdoRnJlcXVlbmN5fSksdGhpcy5sb3dGcmVxdWVuY3k9dGhpcy5fc3BsaXR0ZXIubG93RnJlcXVlbmN5LHRoaXMuaGlnaEZyZXF1ZW5jeT10aGlzLl9zcGxpdHRlci5oaWdoRnJlcXVlbmN5LHRoaXMub3V0cHV0PW5ldyBzLmRlZmF1bHQuR2Fpbix0aGlzLmxvdz1uZXcgcy5kZWZhdWx0LkNvbXByZXNzb3IodC5sb3cpLHRoaXMubWlkPW5ldyBzLmRlZmF1bHQuQ29tcHJlc3Nvcih0Lm1pZCksdGhpcy5oaWdoPW5ldyBzLmRlZmF1bHQuQ29tcHJlc3Nvcih0LmhpZ2gpLHRoaXMuX3NwbGl0dGVyLmxvdy5jaGFpbih0aGlzLmxvdyx0aGlzLm91dHB1dCksdGhpcy5fc3BsaXR0ZXIubWlkLmNoYWluKHRoaXMubWlkLHRoaXMub3V0cHV0KSx0aGlzLl9zcGxpdHRlci5oaWdoLmNoYWluKHRoaXMuaGlnaCx0aGlzLm91dHB1dCksdGhpcy5fcmVhZE9ubHkoW1wiaGlnaFwiLFwibWlkXCIsXCJsb3dcIixcImhpZ2hGcmVxdWVuY3lcIixcImxvd0ZyZXF1ZW5jeVwiXSl9LHMuZGVmYXVsdC5leHRlbmQocy5kZWZhdWx0Lk11bHRpYmFuZENvbXByZXNzb3Iscy5kZWZhdWx0LkF1ZGlvTm9kZSkscy5kZWZhdWx0Lk11bHRpYmFuZENvbXByZXNzb3IuZGVmYXVsdHM9e2xvdzpzLmRlZmF1bHQuQ29tcHJlc3Nvci5kZWZhdWx0cyxtaWQ6cy5kZWZhdWx0LkNvbXByZXNzb3IuZGVmYXVsdHMsaGlnaDpzLmRlZmF1bHQuQ29tcHJlc3Nvci5kZWZhdWx0cyxsb3dGcmVxdWVuY3k6MjUwLGhpZ2hGcmVxdWVuY3k6MmUzfSxzLmRlZmF1bHQuTXVsdGliYW5kQ29tcHJlc3Nvci5wcm90b3R5cGUuZGlzcG9zZT1mdW5jdGlvbigpe3JldHVybiBzLmRlZmF1bHQuQXVkaW9Ob2RlLnByb3RvdHlwZS5kaXNwb3NlLmNhbGwodGhpcyksdGhpcy5fc3BsaXR0ZXIuZGlzcG9zZSgpLHRoaXMuX3dyaXRhYmxlKFtcImhpZ2hcIixcIm1pZFwiLFwibG93XCIsXCJoaWdoRnJlcXVlbmN5XCIsXCJsb3dGcmVxdWVuY3lcIl0pLHRoaXMubG93LmRpc3Bvc2UoKSx0aGlzLm1pZC5kaXNwb3NlKCksdGhpcy5oaWdoLmRpc3Bvc2UoKSx0aGlzLl9zcGxpdHRlcj1udWxsLHRoaXMubG93PW51bGwsdGhpcy5taWQ9bnVsbCx0aGlzLmhpZ2g9bnVsbCx0aGlzLmxvd0ZyZXF1ZW5jeT1udWxsLHRoaXMuaGlnaEZyZXF1ZW5jeT1udWxsLHRoaXN9LGUuZGVmYXVsdD1zLmRlZmF1bHQuTXVsdGliYW5kQ29tcHJlc3Nvcn0sZnVuY3Rpb24odCxlLGkpe1widXNlIHN0cmljdFwiO2kucihlKTt2YXIgcz1pKDApO2koMTApLGkoMSk7cy5kZWZhdWx0Lk1vbm89ZnVuY3Rpb24oKXtzLmRlZmF1bHQuQXVkaW9Ob2RlLmNhbGwodGhpcyksdGhpcy5jcmVhdGVJbnNPdXRzKDEsMCksdGhpcy5fbWVyZ2U9dGhpcy5vdXRwdXQ9bmV3IHMuZGVmYXVsdC5NZXJnZSxzLmRlZmF1bHQuY29ubmVjdCh0aGlzLmlucHV0LHRoaXMuX21lcmdlLDAsMCkscy5kZWZhdWx0LmNvbm5lY3QodGhpcy5pbnB1dCx0aGlzLl9tZXJnZSwwLDEpfSxzLmRlZmF1bHQuZXh0ZW5kKHMuZGVmYXVsdC5Nb25vLHMuZGVmYXVsdC5BdWRpb05vZGUpLHMuZGVmYXVsdC5Nb25vLnByb3RvdHlwZS5kaXNwb3NlPWZ1bmN0aW9uKCl7cmV0dXJuIHMuZGVmYXVsdC5BdWRpb05vZGUucHJvdG90eXBlLmRpc3Bvc2UuY2FsbCh0aGlzKSx0aGlzLl9tZXJnZS5kaXNwb3NlKCksdGhpcy5fbWVyZ2U9bnVsbCx0aGlzfSxlLmRlZmF1bHQ9cy5kZWZhdWx0Lk1vbm99LGZ1bmN0aW9uKHQsZSxpKXtcInVzZSBzdHJpY3RcIjtpLnIoZSk7dmFyIHM9aSgwKTtpKDUzKSxpKDUyKSxpKDQzKSxpKDEpO3MuZGVmYXVsdC5NaWRTaWRlQ29tcHJlc3Nvcj1mdW5jdGlvbih0KXtzLmRlZmF1bHQuQXVkaW9Ob2RlLmNhbGwodGhpcyksdD1zLmRlZmF1bHQuZGVmYXVsdEFyZyh0LHMuZGVmYXVsdC5NaWRTaWRlQ29tcHJlc3Nvci5kZWZhdWx0cyksdGhpcy5fbWlkU2lkZVNwbGl0PXRoaXMuaW5wdXQ9bmV3IHMuZGVmYXVsdC5NaWRTaWRlU3BsaXQsdGhpcy5fbWlkU2lkZU1lcmdlPXRoaXMub3V0cHV0PW5ldyBzLmRlZmF1bHQuTWlkU2lkZU1lcmdlLHRoaXMubWlkPW5ldyBzLmRlZmF1bHQuQ29tcHJlc3Nvcih0Lm1pZCksdGhpcy5zaWRlPW5ldyBzLmRlZmF1bHQuQ29tcHJlc3Nvcih0LnNpZGUpLHRoaXMuX21pZFNpZGVTcGxpdC5taWQuY2hhaW4odGhpcy5taWQsdGhpcy5fbWlkU2lkZU1lcmdlLm1pZCksdGhpcy5fbWlkU2lkZVNwbGl0LnNpZGUuY2hhaW4odGhpcy5zaWRlLHRoaXMuX21pZFNpZGVNZXJnZS5zaWRlKSx0aGlzLl9yZWFkT25seShbXCJtaWRcIixcInNpZGVcIl0pfSxzLmRlZmF1bHQuZXh0ZW5kKHMuZGVmYXVsdC5NaWRTaWRlQ29tcHJlc3NvcixzLmRlZmF1bHQuQXVkaW9Ob2RlKSxzLmRlZmF1bHQuTWlkU2lkZUNvbXByZXNzb3IuZGVmYXVsdHM9e21pZDp7cmF0aW86Myx0aHJlc2hvbGQ6LTI0LHJlbGVhc2U6LjAzLGF0dGFjazouMDIsa25lZToxNn0sc2lkZTp7cmF0aW86Nix0aHJlc2hvbGQ6LTMwLHJlbGVhc2U6LjI1LGF0dGFjazouMDMsa25lZToxMH19LHMuZGVmYXVsdC5NaWRTaWRlQ29tcHJlc3Nvci5wcm90b3R5cGUuZGlzcG9zZT1mdW5jdGlvbigpe3JldHVybiBzLmRlZmF1bHQuQXVkaW9Ob2RlLnByb3RvdHlwZS5kaXNwb3NlLmNhbGwodGhpcyksdGhpcy5fd3JpdGFibGUoW1wibWlkXCIsXCJzaWRlXCJdKSx0aGlzLm1pZC5kaXNwb3NlKCksdGhpcy5taWQ9bnVsbCx0aGlzLnNpZGUuZGlzcG9zZSgpLHRoaXMuc2lkZT1udWxsLHRoaXMuX21pZFNpZGVTcGxpdC5kaXNwb3NlKCksdGhpcy5fbWlkU2lkZVNwbGl0PW51bGwsdGhpcy5fbWlkU2lkZU1lcmdlLmRpc3Bvc2UoKSx0aGlzLl9taWRTaWRlTWVyZ2U9bnVsbCx0aGlzfSxlLmRlZmF1bHQ9cy5kZWZhdWx0Lk1pZFNpZGVDb21wcmVzc29yfSxmdW5jdGlvbih0LGUsaSl7XCJ1c2Ugc3RyaWN0XCI7aS5yKGUpO3ZhciBzPWkoMCk7aSgzNiksaSgxKTtzLmRlZmF1bHQuTWV0ZXI9ZnVuY3Rpb24oKXt2YXIgdD1zLmRlZmF1bHQuZGVmYXVsdHMoYXJndW1lbnRzLFtcInNtb290aGluZ1wiXSxzLmRlZmF1bHQuTWV0ZXIpO3MuZGVmYXVsdC5BdWRpb05vZGUuY2FsbCh0aGlzKSx0aGlzLnNtb290aGluZz10LnNtb290aGluZyx0aGlzLl9ybXM9MCx0aGlzLmlucHV0PXRoaXMub3V0cHV0PXRoaXMuX2FuYWx5c2VyPW5ldyBzLmRlZmF1bHQuQW5hbHlzZXIoXCJ3YXZlZm9ybVwiLDI1Nil9LHMuZGVmYXVsdC5leHRlbmQocy5kZWZhdWx0Lk1ldGVyLHMuZGVmYXVsdC5BdWRpb05vZGUpLHMuZGVmYXVsdC5NZXRlci5kZWZhdWx0cz17c21vb3RoaW5nOi44fSxzLmRlZmF1bHQuTWV0ZXIucHJvdG90eXBlLmdldExldmVsPWZ1bmN0aW9uKCl7Zm9yKHZhciB0PXRoaXMuX2FuYWx5c2VyLmdldFZhbHVlKCksZT0wLGk9MDtpPHQubGVuZ3RoO2krKyl7dmFyIG49dFtpXTtlKz1uKm59dmFyIG89TWF0aC5zcXJ0KGUvdC5sZW5ndGgpO3JldHVybiB0aGlzLl9ybXM9TWF0aC5tYXgobyx0aGlzLl9ybXMqdGhpcy5zbW9vdGhpbmcpLHMuZGVmYXVsdC5nYWluVG9EYih0aGlzLl9ybXMpfSxzLmRlZmF1bHQuTWV0ZXIucHJvdG90eXBlLmdldFZhbHVlPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2FuYWx5c2VyLmdldFZhbHVlKClbMF19LHMuZGVmYXVsdC5NZXRlci5wcm90b3R5cGUuZGlzcG9zZT1mdW5jdGlvbigpe3JldHVybiBzLmRlZmF1bHQuQXVkaW9Ob2RlLnByb3RvdHlwZS5kaXNwb3NlLmNhbGwodGhpcyksdGhpcy5fYW5hbHlzZXIuZGlzcG9zZSgpLHRoaXMuX2FuYWx5c2VyPW51bGwsdGhpc30sZS5kZWZhdWx0PXMuZGVmYXVsdC5NZXRlcn0sZnVuY3Rpb24odCxlLGkpe1widXNlIHN0cmljdFwiO2kucihlKTt2YXIgcz1pKDApO2koNDMpLGkoMSk7cy5kZWZhdWx0LkxpbWl0ZXI9ZnVuY3Rpb24oKXt2YXIgdD1zLmRlZmF1bHQuZGVmYXVsdHMoYXJndW1lbnRzLFtcInRocmVzaG9sZFwiXSxzLmRlZmF1bHQuTGltaXRlcik7cy5kZWZhdWx0LkF1ZGlvTm9kZS5jYWxsKHRoaXMpLHRoaXMuX2NvbXByZXNzb3I9dGhpcy5pbnB1dD10aGlzLm91dHB1dD1uZXcgcy5kZWZhdWx0LkNvbXByZXNzb3Ioe2F0dGFjazouMDAxLGRlY2F5Oi4wMDEsdGhyZXNob2xkOnQudGhyZXNob2xkfSksdGhpcy50aHJlc2hvbGQ9dGhpcy5fY29tcHJlc3Nvci50aHJlc2hvbGQsdGhpcy5fcmVhZE9ubHkoXCJ0aHJlc2hvbGRcIil9LHMuZGVmYXVsdC5leHRlbmQocy5kZWZhdWx0LkxpbWl0ZXIscy5kZWZhdWx0LkF1ZGlvTm9kZSkscy5kZWZhdWx0LkxpbWl0ZXIuZGVmYXVsdHM9e3RocmVzaG9sZDotMTJ9LHMuZGVmYXVsdC5MaW1pdGVyLnByb3RvdHlwZS5kaXNwb3NlPWZ1bmN0aW9uKCl7cmV0dXJuIHMuZGVmYXVsdC5BdWRpb05vZGUucHJvdG90eXBlLmRpc3Bvc2UuY2FsbCh0aGlzKSx0aGlzLl9jb21wcmVzc29yLmRpc3Bvc2UoKSx0aGlzLl9jb21wcmVzc29yPW51bGwsdGhpcy5fd3JpdGFibGUoXCJ0aHJlc2hvbGRcIiksdGhpcy50aHJlc2hvbGQ9bnVsbCx0aGlzfSxlLmRlZmF1bHQ9cy5kZWZhdWx0LkxpbWl0ZXJ9LGZ1bmN0aW9uKHQsZSxpKXtcInVzZSBzdHJpY3RcIjtpLnIoZSk7dmFyIHM9aSgwKTtpKDU4KSxpKDg1KSxpKDEpO3MuZGVmYXVsdC5HYXRlPWZ1bmN0aW9uKCl7dmFyIHQ9cy5kZWZhdWx0LmRlZmF1bHRzKGFyZ3VtZW50cyxbXCJ0aHJlc2hvbGRcIixcInNtb290aGluZ1wiXSxzLmRlZmF1bHQuR2F0ZSk7cy5kZWZhdWx0LkF1ZGlvTm9kZS5jYWxsKHRoaXMpLHRoaXMuY3JlYXRlSW5zT3V0cygxLDEpLHRoaXMuX2ZvbGxvd2VyPW5ldyBzLmRlZmF1bHQuRm9sbG93ZXIodC5zbW9vdGhpbmcpLHRoaXMuX2d0PW5ldyBzLmRlZmF1bHQuR3JlYXRlclRoYW4ocy5kZWZhdWx0LmRiVG9HYWluKHQudGhyZXNob2xkKSkscy5kZWZhdWx0LmNvbm5lY3QodGhpcy5pbnB1dCx0aGlzLm91dHB1dCkscy5kZWZhdWx0LmNvbm5lY3RTZXJpZXModGhpcy5pbnB1dCx0aGlzLl9mb2xsb3dlcix0aGlzLl9ndCx0aGlzLm91dHB1dC5nYWluKX0scy5kZWZhdWx0LmV4dGVuZChzLmRlZmF1bHQuR2F0ZSxzLmRlZmF1bHQuQXVkaW9Ob2RlKSxzLmRlZmF1bHQuR2F0ZS5kZWZhdWx0cz17c21vb3RoaW5nOi4xLHRocmVzaG9sZDotNDB9LE9iamVjdC5kZWZpbmVQcm9wZXJ0eShzLmRlZmF1bHQuR2F0ZS5wcm90b3R5cGUsXCJ0aHJlc2hvbGRcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHMuZGVmYXVsdC5nYWluVG9EYih0aGlzLl9ndC52YWx1ZSl9LHNldDpmdW5jdGlvbih0KXt0aGlzLl9ndC52YWx1ZT1zLmRlZmF1bHQuZGJUb0dhaW4odCl9fSksT2JqZWN0LmRlZmluZVByb3BlcnR5KHMuZGVmYXVsdC5HYXRlLnByb3RvdHlwZSxcInNtb290aGluZ1wiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fZm9sbG93ZXIuc21vb3RoaW5nfSxzZXQ6ZnVuY3Rpb24odCl7dGhpcy5fZm9sbG93ZXIuc21vb3RoaW5nPXR9fSkscy5kZWZhdWx0LkdhdGUucHJvdG90eXBlLmRpc3Bvc2U9ZnVuY3Rpb24oKXtyZXR1cm4gcy5kZWZhdWx0LkF1ZGlvTm9kZS5wcm90b3R5cGUuZGlzcG9zZS5jYWxsKHRoaXMpLHRoaXMuX2ZvbGxvd2VyLmRpc3Bvc2UoKSx0aGlzLl9ndC5kaXNwb3NlKCksdGhpcy5fZm9sbG93ZXI9bnVsbCx0aGlzLl9ndD1udWxsLHRoaXN9LGUuZGVmYXVsdD1zLmRlZmF1bHQuR2F0ZX0sZnVuY3Rpb24odCxlLGkpe1widXNlIHN0cmljdFwiO2kucihlKTt2YXIgcz1pKDApO2koMzYpLGkoMSk7cy5kZWZhdWx0LkZGVD1mdW5jdGlvbigpe3ZhciB0PXMuZGVmYXVsdC5kZWZhdWx0cyhhcmd1bWVudHMsW1wic2l6ZVwiXSxzLmRlZmF1bHQuRkZUKTt0LnR5cGU9cy5kZWZhdWx0LkFuYWx5c2VyLlR5cGUuRkZULHMuZGVmYXVsdC5BdWRpb05vZGUuY2FsbCh0aGlzKSx0aGlzLl9hbmFseXNlcj10aGlzLmlucHV0PXRoaXMub3V0cHV0PW5ldyBzLmRlZmF1bHQuQW5hbHlzZXIodCl9LHMuZGVmYXVsdC5leHRlbmQocy5kZWZhdWx0LkZGVCxzLmRlZmF1bHQuQXVkaW9Ob2RlKSxzLmRlZmF1bHQuRkZULmRlZmF1bHRzPXtzaXplOjEwMjR9LHMuZGVmYXVsdC5GRlQucHJvdG90eXBlLmdldFZhbHVlPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2FuYWx5c2VyLmdldFZhbHVlKCl9LE9iamVjdC5kZWZpbmVQcm9wZXJ0eShzLmRlZmF1bHQuRkZULnByb3RvdHlwZSxcInNpemVcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2FuYWx5c2VyLnNpemV9LHNldDpmdW5jdGlvbih0KXt0aGlzLl9hbmFseXNlci5zaXplPXR9fSkscy5kZWZhdWx0LkZGVC5wcm90b3R5cGUuZGlzcG9zZT1mdW5jdGlvbigpe3MuZGVmYXVsdC5BdWRpb05vZGUucHJvdG90eXBlLmRpc3Bvc2UuY2FsbCh0aGlzKSx0aGlzLl9hbmFseXNlci5kaXNwb3NlKCksdGhpcy5fYW5hbHlzZXI9bnVsbH0sZS5kZWZhdWx0PXMuZGVmYXVsdC5GRlR9LGZ1bmN0aW9uKHQsZSxpKXtcInVzZSBzdHJpY3RcIjtpLnIoZSk7dmFyIHM9aSgwKTtpKDYwKSxpKDMpLGkoMSk7cy5kZWZhdWx0LkVRMz1mdW5jdGlvbigpe3ZhciB0PXMuZGVmYXVsdC5kZWZhdWx0cyhhcmd1bWVudHMsW1wibG93XCIsXCJtaWRcIixcImhpZ2hcIl0scy5kZWZhdWx0LkVRMyk7cy5kZWZhdWx0LkF1ZGlvTm9kZS5jYWxsKHRoaXMpLHRoaXMub3V0cHV0PW5ldyBzLmRlZmF1bHQuR2Fpbix0aGlzLl9tdWx0aWJhbmRTcGxpdD10aGlzLmlucHV0PW5ldyBzLmRlZmF1bHQuTXVsdGliYW5kU3BsaXQoe2xvd0ZyZXF1ZW5jeTp0Lmxvd0ZyZXF1ZW5jeSxoaWdoRnJlcXVlbmN5OnQuaGlnaEZyZXF1ZW5jeX0pLHRoaXMuX2xvd0dhaW49bmV3IHMuZGVmYXVsdC5HYWluKHQubG93LHMuZGVmYXVsdC5UeXBlLkRlY2liZWxzKSx0aGlzLl9taWRHYWluPW5ldyBzLmRlZmF1bHQuR2Fpbih0Lm1pZCxzLmRlZmF1bHQuVHlwZS5EZWNpYmVscyksdGhpcy5faGlnaEdhaW49bmV3IHMuZGVmYXVsdC5HYWluKHQuaGlnaCxzLmRlZmF1bHQuVHlwZS5EZWNpYmVscyksdGhpcy5sb3c9dGhpcy5fbG93R2Fpbi5nYWluLHRoaXMubWlkPXRoaXMuX21pZEdhaW4uZ2Fpbix0aGlzLmhpZ2g9dGhpcy5faGlnaEdhaW4uZ2Fpbix0aGlzLlE9dGhpcy5fbXVsdGliYW5kU3BsaXQuUSx0aGlzLmxvd0ZyZXF1ZW5jeT10aGlzLl9tdWx0aWJhbmRTcGxpdC5sb3dGcmVxdWVuY3ksdGhpcy5oaWdoRnJlcXVlbmN5PXRoaXMuX211bHRpYmFuZFNwbGl0LmhpZ2hGcmVxdWVuY3ksdGhpcy5fbXVsdGliYW5kU3BsaXQubG93LmNoYWluKHRoaXMuX2xvd0dhaW4sdGhpcy5vdXRwdXQpLHRoaXMuX211bHRpYmFuZFNwbGl0Lm1pZC5jaGFpbih0aGlzLl9taWRHYWluLHRoaXMub3V0cHV0KSx0aGlzLl9tdWx0aWJhbmRTcGxpdC5oaWdoLmNoYWluKHRoaXMuX2hpZ2hHYWluLHRoaXMub3V0cHV0KSx0aGlzLl9yZWFkT25seShbXCJsb3dcIixcIm1pZFwiLFwiaGlnaFwiLFwibG93RnJlcXVlbmN5XCIsXCJoaWdoRnJlcXVlbmN5XCJdKX0scy5kZWZhdWx0LmV4dGVuZChzLmRlZmF1bHQuRVEzLHMuZGVmYXVsdC5BdWRpb05vZGUpLHMuZGVmYXVsdC5FUTMuZGVmYXVsdHM9e2xvdzowLG1pZDowLGhpZ2g6MCxsb3dGcmVxdWVuY3k6NDAwLGhpZ2hGcmVxdWVuY3k6MjUwMH0scy5kZWZhdWx0LkVRMy5wcm90b3R5cGUuZGlzcG9zZT1mdW5jdGlvbigpe3JldHVybiBzLmRlZmF1bHQuQXVkaW9Ob2RlLnByb3RvdHlwZS5kaXNwb3NlLmNhbGwodGhpcyksdGhpcy5fd3JpdGFibGUoW1wibG93XCIsXCJtaWRcIixcImhpZ2hcIixcImxvd0ZyZXF1ZW5jeVwiLFwiaGlnaEZyZXF1ZW5jeVwiXSksdGhpcy5fbXVsdGliYW5kU3BsaXQuZGlzcG9zZSgpLHRoaXMuX211bHRpYmFuZFNwbGl0PW51bGwsdGhpcy5sb3dGcmVxdWVuY3k9bnVsbCx0aGlzLmhpZ2hGcmVxdWVuY3k9bnVsbCx0aGlzLl9sb3dHYWluLmRpc3Bvc2UoKSx0aGlzLl9sb3dHYWluPW51bGwsdGhpcy5fbWlkR2Fpbi5kaXNwb3NlKCksdGhpcy5fbWlkR2Fpbj1udWxsLHRoaXMuX2hpZ2hHYWluLmRpc3Bvc2UoKSx0aGlzLl9oaWdoR2Fpbj1udWxsLHRoaXMubG93PW51bGwsdGhpcy5taWQ9bnVsbCx0aGlzLmhpZ2g9bnVsbCx0aGlzLlE9bnVsbCx0aGlzfSxlLmRlZmF1bHQ9cy5kZWZhdWx0LkVRM30sZnVuY3Rpb24odCxlLGkpe1widXNlIHN0cmljdFwiO2kucihlKTt2YXIgcz1pKDApO2koOTEpLGkoODgpLGkoMSk7cy5kZWZhdWx0LkNoYW5uZWw9ZnVuY3Rpb24oKXt2YXIgdD1zLmRlZmF1bHQuZGVmYXVsdHMoYXJndW1lbnRzLFtcInZvbHVtZVwiLFwicGFuXCJdLHMuZGVmYXVsdC5QYW5Wb2wpO3MuZGVmYXVsdC5BdWRpb05vZGUuY2FsbCh0aGlzLHQpLHRoaXMuX3NvbG89dGhpcy5pbnB1dD1uZXcgcy5kZWZhdWx0LlNvbG8odC5zb2xvKSx0aGlzLl9wYW5Wb2w9dGhpcy5vdXRwdXQ9bmV3IHMuZGVmYXVsdC5QYW5Wb2woe3Bhbjp0LnBhbix2b2x1bWU6dC52b2x1bWUsbXV0ZTp0Lm11dGV9KSx0aGlzLnBhbj10aGlzLl9wYW5Wb2wucGFuLHRoaXMudm9sdW1lPXRoaXMuX3BhblZvbC52b2x1bWUsdGhpcy5fc29sby5jb25uZWN0KHRoaXMuX3BhblZvbCksdGhpcy5fcmVhZE9ubHkoW1wicGFuXCIsXCJ2b2x1bWVcIl0pfSxzLmRlZmF1bHQuZXh0ZW5kKHMuZGVmYXVsdC5DaGFubmVsLHMuZGVmYXVsdC5BdWRpb05vZGUpLHMuZGVmYXVsdC5DaGFubmVsLmRlZmF1bHRzPXtwYW46MCx2b2x1bWU6MCxtdXRlOiExLHNvbG86ITF9LE9iamVjdC5kZWZpbmVQcm9wZXJ0eShzLmRlZmF1bHQuQ2hhbm5lbC5wcm90b3R5cGUsXCJzb2xvXCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9zb2xvLnNvbG99LHNldDpmdW5jdGlvbih0KXt0aGlzLl9zb2xvLnNvbG89dH19KSxPYmplY3QuZGVmaW5lUHJvcGVydHkocy5kZWZhdWx0LkNoYW5uZWwucHJvdG90eXBlLFwibXV0ZWRcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3NvbG8ubXV0ZWR8fHRoaXMubXV0ZX19KSxPYmplY3QuZGVmaW5lUHJvcGVydHkocy5kZWZhdWx0LkNoYW5uZWwucHJvdG90eXBlLFwibXV0ZVwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fcGFuVm9sLm11dGV9LHNldDpmdW5jdGlvbih0KXt0aGlzLl9wYW5Wb2wubXV0ZT10fX0pLHMuZGVmYXVsdC5DaGFubmVsLnByb3RvdHlwZS5kaXNwb3NlPWZ1bmN0aW9uKCl7cmV0dXJuIHMuZGVmYXVsdC5BdWRpb05vZGUucHJvdG90eXBlLmRpc3Bvc2UuY2FsbCh0aGlzKSx0aGlzLl93cml0YWJsZShbXCJwYW5cIixcInZvbHVtZVwiXSksdGhpcy5fcGFuVm9sLmRpc3Bvc2UoKSx0aGlzLl9wYW5Wb2w9bnVsbCx0aGlzLnBhbj1udWxsLHRoaXMudm9sdW1lPW51bGwsdGhpcy5fc29sby5kaXNwb3NlKCksdGhpcy5fc29sbz1udWxsLHRoaXN9LGUuZGVmYXVsdD1zLmRlZmF1bHQuQ2hhbm5lbH0sZnVuY3Rpb24odCxlKXt2YXIgaTtpPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXN9KCk7dHJ5e2k9aXx8RnVuY3Rpb24oXCJyZXR1cm4gdGhpc1wiKSgpfHwoMCxldmFsKShcInRoaXNcIil9Y2F0Y2godCl7XCJvYmplY3RcIj09dHlwZW9mIHdpbmRvdyYmKGk9d2luZG93KX10LmV4cG9ydHM9aX0sZnVuY3Rpb24odCxlLGkpe2koMzEpLGkoMzYpLGkoMTQ2KSxpKDQzKSxpKDIzKSxpKDQ3KSxpKDE0NSksaSg1OSksaSgxNDQpLGkoOSksaSg1OCksaSg0MSksaSgxNDMpLGkoMTIpLGkoMTQyKSxpKDU0KSxpKDEwKSxpKDE0MSksaSgxNDApLGkoNTIpLGkoNTMpLGkoMTM5KSxpKDEzOCksaSg2MCksaSg0OCksaSgxMzcpLGkoOTEpLGkoODYpLGkoODgpLGkoMTkpLGkoMjcpLGkoMTM2KSxpKDEzNSksaSgxMzQpLGkoNzkpLGkoMTMzKSxpKDEpLGkoMTEpLGkoNzgpLGkoMTMyKSxpKDgzKSxpKDIwKSxpKDE4KSxpKDEzMSksaSgzNSksaSgzKSxpKDgxKSxpKDEzMCksaSg0MCksaSg3NyksaSg3NiksaSgxNCksaSgyNCksaSgzNCksaSgxNiksaSg1NiksaSg4MCksaSgxMjkpLGkoMTI4KSxpKDEyNyksaSgxMjYpLGkoMTI1KSxpKDEyNCksaSg3NCksaSgxMjMpLGkoOCksaSgxMjIpLGkoMzMpLGkoMTIxKSxpKDEyMCksaSg3MyksaSgxMTkpLGkoMTE4KSxpKDExNyksaSgxMTYpLGkoMTUpLGkoMTE1KSxpKDExNCksaSg3MiksaSgxMTMpLGkoMTEyKSxpKDUxKSxpKDcxKSxpKDcwKSxpKDExMSksaSgxMTApLGkoMTA5KSxpKDEwOCksaSgxMDcpLGkoMjEpLGkoMTA2KSxpKDEwNSksaSgyNSksaSg2NiksaSgxMDQpLGkoMTAzKSxpKDEwMiksaSgxMDEpLGkoMzgpLGkoODcpLGkoMjkpLGkoMjIpLGkoODkpLGkoMTAwKSxpKDg1KSxpKDg0KSxpKDc1KSxpKDUpLGkoOTApLGkoOTkpLGkoNjEpLGkoMjYpLGkoNDIpLGkoMiksaSgzMCksaSgxMyksaSg4MiksaSg5OCksaSg3KSxpKDI4KSxpKDY4KSxpKDMyKSxpKDY3KSxpKDQ5KSxpKDk3KSxpKDM5KSxpKDM3KSxpKDE3KSxpKDY0KSxpKDY1KSxpKDk2KSxpKDUwKSxpKDY5KSxpKDYpLGkoNTcpLGkoOTUpLGkoNDYpLGkoOTQpLGkoNTUpLGkoNjMpLGkoNjIpLGkoNDUpLGkoNCksdC5leHBvcnRzPWkoMCkuZGVmYXVsdH1dKX0pO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9VG9uZS5qcy5tYXAiLCJcbi8qKlxuICogTW9kdWxlIGV4cG9ydHMuXG4gKi9cblxubW9kdWxlLmV4cG9ydHMgPSBkZXByZWNhdGU7XG5cbi8qKlxuICogTWFyayB0aGF0IGEgbWV0aG9kIHNob3VsZCBub3QgYmUgdXNlZC5cbiAqIFJldHVybnMgYSBtb2RpZmllZCBmdW5jdGlvbiB3aGljaCB3YXJucyBvbmNlIGJ5IGRlZmF1bHQuXG4gKlxuICogSWYgYGxvY2FsU3RvcmFnZS5ub0RlcHJlY2F0aW9uID0gdHJ1ZWAgaXMgc2V0LCB0aGVuIGl0IGlzIGEgbm8tb3AuXG4gKlxuICogSWYgYGxvY2FsU3RvcmFnZS50aHJvd0RlcHJlY2F0aW9uID0gdHJ1ZWAgaXMgc2V0LCB0aGVuIGRlcHJlY2F0ZWQgZnVuY3Rpb25zXG4gKiB3aWxsIHRocm93IGFuIEVycm9yIHdoZW4gaW52b2tlZC5cbiAqXG4gKiBJZiBgbG9jYWxTdG9yYWdlLnRyYWNlRGVwcmVjYXRpb24gPSB0cnVlYCBpcyBzZXQsIHRoZW4gZGVwcmVjYXRlZCBmdW5jdGlvbnNcbiAqIHdpbGwgaW52b2tlIGBjb25zb2xlLnRyYWNlKClgIGluc3RlYWQgb2YgYGNvbnNvbGUuZXJyb3IoKWAuXG4gKlxuICogQHBhcmFtIHtGdW5jdGlvbn0gZm4gLSB0aGUgZnVuY3Rpb24gdG8gZGVwcmVjYXRlXG4gKiBAcGFyYW0ge1N0cmluZ30gbXNnIC0gdGhlIHN0cmluZyB0byBwcmludCB0byB0aGUgY29uc29sZSB3aGVuIGBmbmAgaXMgaW52b2tlZFxuICogQHJldHVybnMge0Z1bmN0aW9ufSBhIG5ldyBcImRlcHJlY2F0ZWRcIiB2ZXJzaW9uIG9mIGBmbmBcbiAqIEBhcGkgcHVibGljXG4gKi9cblxuZnVuY3Rpb24gZGVwcmVjYXRlIChmbiwgbXNnKSB7XG4gIGlmIChjb25maWcoJ25vRGVwcmVjYXRpb24nKSkge1xuICAgIHJldHVybiBmbjtcbiAgfVxuXG4gIHZhciB3YXJuZWQgPSBmYWxzZTtcbiAgZnVuY3Rpb24gZGVwcmVjYXRlZCgpIHtcbiAgICBpZiAoIXdhcm5lZCkge1xuICAgICAgaWYgKGNvbmZpZygndGhyb3dEZXByZWNhdGlvbicpKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihtc2cpO1xuICAgICAgfSBlbHNlIGlmIChjb25maWcoJ3RyYWNlRGVwcmVjYXRpb24nKSkge1xuICAgICAgICBjb25zb2xlLnRyYWNlKG1zZyk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBjb25zb2xlLndhcm4obXNnKTtcbiAgICAgIH1cbiAgICAgIHdhcm5lZCA9IHRydWU7XG4gICAgfVxuICAgIHJldHVybiBmbi5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICB9XG5cbiAgcmV0dXJuIGRlcHJlY2F0ZWQ7XG59XG5cbi8qKlxuICogQ2hlY2tzIGBsb2NhbFN0b3JhZ2VgIGZvciBib29sZWFuIHZhbHVlcyBmb3IgdGhlIGdpdmVuIGBuYW1lYC5cbiAqXG4gKiBAcGFyYW0ge1N0cmluZ30gbmFtZVxuICogQHJldHVybnMge0Jvb2xlYW59XG4gKiBAYXBpIHByaXZhdGVcbiAqL1xuXG5mdW5jdGlvbiBjb25maWcgKG5hbWUpIHtcbiAgLy8gYWNjZXNzaW5nIGdsb2JhbC5sb2NhbFN0b3JhZ2UgY2FuIHRyaWdnZXIgYSBET01FeGNlcHRpb24gaW4gc2FuZGJveGVkIGlmcmFtZXNcbiAgdHJ5IHtcbiAgICBpZiAoIWdsb2JhbC5sb2NhbFN0b3JhZ2UpIHJldHVybiBmYWxzZTtcbiAgfSBjYXRjaCAoXykge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuICB2YXIgdmFsID0gZ2xvYmFsLmxvY2FsU3RvcmFnZVtuYW1lXTtcbiAgaWYgKG51bGwgPT0gdmFsKSByZXR1cm4gZmFsc2U7XG4gIHJldHVybiBTdHJpbmcodmFsKS50b0xvd2VyQ2FzZSgpID09PSAndHJ1ZSc7XG59XG4iLCIvKlxuXG5XZWJNaWRpIHYyLjUuMVxuXG5XZWJNaWRpLmpzIGhlbHBzIHlvdSB0YW1lIHRoZSBXZWIgTUlESSBBUEkuIFNlbmQgYW5kIHJlY2VpdmUgTUlESSBtZXNzYWdlcyB3aXRoIGVhc2UuIENvbnRyb2wgaW5zdHJ1bWVudHMgd2l0aCB1c2VyLWZyaWVuZGx5IGZ1bmN0aW9ucyAocGxheU5vdGUsIHNlbmRQaXRjaEJlbmQsIGV0Yy4pLiBSZWFjdCB0byBNSURJIGlucHV0IHdpdGggc2ltcGxlIGV2ZW50IGxpc3RlbmVycyAobm90ZW9uLCBwaXRjaGJlbmQsIGNvbnRyb2xjaGFuZ2UsIGV0Yy4pLlxuaHR0cHM6Ly9naXRodWIuY29tL2RqaXBjby93ZWJtaWRpXG5cblxuVGhlIE1JVCBMaWNlbnNlIChNSVQpXG5cbkNvcHlyaWdodCAoYykgMjAxNS0yMDE5LCBKZWFuLVBoaWxpcHBlIEPDtHTDqVxuXG5QZXJtaXNzaW9uIGlzIGhlcmVieSBncmFudGVkLCBmcmVlIG9mIGNoYXJnZSwgdG8gYW55IHBlcnNvbiBvYnRhaW5pbmcgYSBjb3B5IG9mIHRoaXMgc29mdHdhcmUgYW5kXG5hc3NvY2lhdGVkIGRvY3VtZW50YXRpb24gZmlsZXMgKHRoZSBcIlNvZnR3YXJlXCIpLCB0byBkZWFsIGluIHRoZSBTb2Z0d2FyZSB3aXRob3V0IHJlc3RyaWN0aW9uLFxuaW5jbHVkaW5nIHdpdGhvdXQgbGltaXRhdGlvbiB0aGUgcmlnaHRzIHRvIHVzZSwgY29weSwgbW9kaWZ5LCBtZXJnZSwgcHVibGlzaCwgZGlzdHJpYnV0ZSxcbnN1YmxpY2Vuc2UsIGFuZC9vciBzZWxsIGNvcGllcyBvZiB0aGUgU29mdHdhcmUsIGFuZCB0byBwZXJtaXQgcGVyc29ucyB0byB3aG9tIHRoZSBTb2Z0d2FyZSBpc1xuZnVybmlzaGVkIHRvIGRvIHNvLCBzdWJqZWN0IHRvIHRoZSBmb2xsb3dpbmcgY29uZGl0aW9uczpcblxuVGhlIGFib3ZlIGNvcHlyaWdodCBub3RpY2UgYW5kIHRoaXMgcGVybWlzc2lvbiBub3RpY2Ugc2hhbGwgYmUgaW5jbHVkZWQgaW4gYWxsIGNvcGllcyBvciBzdWJzdGFudGlhbFxucG9ydGlvbnMgb2YgdGhlIFNvZnR3YXJlLlxuXG5USEUgU09GVFdBUkUgSVMgUFJPVklERUQgXCJBUyBJU1wiLCBXSVRIT1VUIFdBUlJBTlRZIE9GIEFOWSBLSU5ELCBFWFBSRVNTIE9SIElNUExJRUQsIElOQ0xVRElORyBCVVRcbk5PVCBMSU1JVEVEIFRPIFRIRSBXQVJSQU5USUVTIE9GIE1FUkNIQU5UQUJJTElUWSwgRklUTkVTUyBGT1IgQSBQQVJUSUNVTEFSIFBVUlBPU0UgQU5EXG5OT05JTkZSSU5HRU1FTlQuIElOIE5PIEVWRU5UIFNIQUxMIFRIRSBBVVRIT1JTIE9SIENPUFlSSUdIVCBIT0xERVJTIEJFIExJQUJMRSBGT1IgQU5ZIENMQUlNLCBEQU1BR0VTXG5PUiBPVEhFUiBMSUFCSUxJVFksIFdIRVRIRVIgSU4gQU4gQUNUSU9OIE9GIENPTlRSQUNULCBUT1JUIE9SIE9USEVSV0lTRSwgQVJJU0lORyBGUk9NLCBPVVQgT0YgT1IgSU5cbkNPTk5FQ1RJT04gV0lUSCBUSEUgU09GVFdBUkUgT1IgVEhFIFVTRSBPUiBPVEhFUiBERUFMSU5HUyBJTiBUSEUgU09GVFdBUkUuXG5cbiovXG5cblxuIWZ1bmN0aW9uKHNjb3BlKXtcInVzZSBzdHJpY3RcIjtmdW5jdGlvbiBXZWJNaWRpKCl7aWYoV2ViTWlkaS5wcm90b3R5cGUuX3NpbmdsZXRvbil0aHJvdyBuZXcgRXJyb3IoXCJXZWJNaWRpIGlzIGEgc2luZ2xldG9uLCBpdCBjYW5ub3QgYmUgaW5zdGFudGlhdGVkIGRpcmVjdGx5LlwiKTsoV2ViTWlkaS5wcm90b3R5cGUuX3NpbmdsZXRvbj10aGlzKS5faW5wdXRzPVtdLHRoaXMuX291dHB1dHM9W10sdGhpcy5fdXNlckhhbmRsZXJzPXt9LHRoaXMuX3N0YXRlQ2hhbmdlUXVldWU9W10sdGhpcy5fcHJvY2Vzc2luZ1N0YXRlQ2hhbmdlPSExLHRoaXMuX21pZGlJbnRlcmZhY2VFdmVudHM9W1wiY29ubmVjdGVkXCIsXCJkaXNjb25uZWN0ZWRcIl0sdGhpcy5fbnJwbkJ1ZmZlcj1bW10sW10sW10sW10sW10sW10sW10sW10sW10sW10sW10sW10sW10sW10sW10sW11dLHRoaXMuX25ycG5FdmVudHNFbmFibGVkPSEwLHRoaXMuX25ycG5UeXBlcz1bXCJlbnRyeVwiLFwiaW5jcmVtZW50XCIsXCJkZWNyZW1lbnRcIl0sdGhpcy5fbm90ZXM9W1wiQ1wiLFwiQyNcIixcIkRcIixcIkQjXCIsXCJFXCIsXCJGXCIsXCJGI1wiLFwiR1wiLFwiRyNcIixcIkFcIixcIkEjXCIsXCJCXCJdLHRoaXMuX3NlbWl0b25lcz17QzowLEQ6MixFOjQsRjo1LEc6NyxBOjksQjoxMX0sT2JqZWN0LmRlZmluZVByb3BlcnRpZXModGhpcyx7TUlESV9TWVNURU1fTUVTU0FHRVM6e3ZhbHVlOntzeXNleDoyNDAsdGltZWNvZGU6MjQxLHNvbmdwb3NpdGlvbjoyNDIsc29uZ3NlbGVjdDoyNDMsdHVuaW5ncmVxdWVzdDoyNDYsc3lzZXhlbmQ6MjQ3LGNsb2NrOjI0OCxzdGFydDoyNTAsY29udGludWU6MjUxLHN0b3A6MjUyLGFjdGl2ZXNlbnNpbmc6MjU0LHJlc2V0OjI1NSxtaWRpbWVzc2FnZTowLHVua25vd25zeXN0ZW1tZXNzYWdlOi0xfSx3cml0YWJsZTohMSxlbnVtZXJhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMX0sTUlESV9DSEFOTkVMX01FU1NBR0VTOnt2YWx1ZTp7bm90ZW9mZjo4LG5vdGVvbjo5LGtleWFmdGVydG91Y2g6MTAsY29udHJvbGNoYW5nZToxMSxjaGFubmVsbW9kZToxMSxucnBuOjExLHByb2dyYW1jaGFuZ2U6MTIsY2hhbm5lbGFmdGVydG91Y2g6MTMscGl0Y2hiZW5kOjE0fSx3cml0YWJsZTohMSxlbnVtZXJhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMX0sTUlESV9SRUdJU1RFUkVEX1BBUkFNRVRFUjp7dmFsdWU6e3BpdGNoYmVuZHJhbmdlOlswLDBdLGNoYW5uZWxmaW5ldHVuaW5nOlswLDFdLGNoYW5uZWxjb2Fyc2V0dW5pbmc6WzAsMl0sdHVuaW5ncHJvZ3JhbTpbMCwzXSx0dW5pbmdiYW5rOlswLDRdLG1vZHVsYXRpb25yYW5nZTpbMCw1XSxhemltdXRoYW5nbGU6WzYxLDBdLGVsZXZhdGlvbmFuZ2xlOls2MSwxXSxnYWluOls2MSwyXSxkaXN0YW5jZXJhdGlvOls2MSwzXSxtYXhpbXVtZGlzdGFuY2U6WzYxLDRdLG1heGltdW1kaXN0YW5jZWdhaW46WzYxLDVdLHJlZmVyZW5jZWRpc3RhbmNlcmF0aW86WzYxLDZdLHBhbnNwcmVhZGFuZ2xlOls2MSw3XSxyb2xsYW5nbGU6WzYxLDhdfSx3cml0YWJsZTohMSxlbnVtZXJhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMX0sTUlESV9DT05UUk9MX0NIQU5HRV9NRVNTQUdFUzp7dmFsdWU6e2JhbmtzZWxlY3Rjb2Fyc2U6MCxtb2R1bGF0aW9ud2hlZWxjb2Fyc2U6MSxicmVhdGhjb250cm9sbGVyY29hcnNlOjIsZm9vdGNvbnRyb2xsZXJjb2Fyc2U6NCxwb3J0YW1lbnRvdGltZWNvYXJzZTo1LGRhdGFlbnRyeWNvYXJzZTo2LHZvbHVtZWNvYXJzZTo3LGJhbGFuY2Vjb2Fyc2U6OCxwYW5jb2Fyc2U6MTAsZXhwcmVzc2lvbmNvYXJzZToxMSxlZmZlY3Rjb250cm9sMWNvYXJzZToxMixlZmZlY3Rjb250cm9sMmNvYXJzZToxMyxnZW5lcmFscHVycG9zZXNsaWRlcjE6MTYsZ2VuZXJhbHB1cnBvc2VzbGlkZXIyOjE3LGdlbmVyYWxwdXJwb3Nlc2xpZGVyMzoxOCxnZW5lcmFscHVycG9zZXNsaWRlcjQ6MTksYmFua3NlbGVjdGZpbmU6MzIsbW9kdWxhdGlvbndoZWVsZmluZTozMyxicmVhdGhjb250cm9sbGVyZmluZTozNCxmb290Y29udHJvbGxlcmZpbmU6MzYscG9ydGFtZW50b3RpbWVmaW5lOjM3LGRhdGFlbnRyeWZpbmU6Mzgsdm9sdW1lZmluZTozOSxiYWxhbmNlZmluZTo0MCxwYW5maW5lOjQyLGV4cHJlc3Npb25maW5lOjQzLGVmZmVjdGNvbnRyb2wxZmluZTo0NCxlZmZlY3Rjb250cm9sMmZpbmU6NDUsaG9sZHBlZGFsOjY0LHBvcnRhbWVudG86NjUsc3VzdGVudXRvcGVkYWw6NjYsc29mdHBlZGFsOjY3LGxlZ2F0b3BlZGFsOjY4LGhvbGQycGVkYWw6Njksc291bmR2YXJpYXRpb246NzAscmVzb25hbmNlOjcxLHNvdW5kcmVsZWFzZXRpbWU6NzIsc291bmRhdHRhY2t0aW1lOjczLGJyaWdodG5lc3M6NzQsc291bmRjb250cm9sNjo3NSxzb3VuZGNvbnRyb2w3Ojc2LHNvdW5kY29udHJvbDg6Nzcsc291bmRjb250cm9sOTo3OCxzb3VuZGNvbnRyb2wxMDo3OSxnZW5lcmFscHVycG9zZWJ1dHRvbjE6ODAsZ2VuZXJhbHB1cnBvc2VidXR0b24yOjgxLGdlbmVyYWxwdXJwb3NlYnV0dG9uMzo4MixnZW5lcmFscHVycG9zZWJ1dHRvbjQ6ODMscmV2ZXJibGV2ZWw6OTEsdHJlbW9sb2xldmVsOjkyLGNob3J1c2xldmVsOjkzLGNlbGVzdGVsZXZlbDo5NCxwaGFzZXJsZXZlbDo5NSxkYXRhYnV0dG9uaW5jcmVtZW50Ojk2LGRhdGFidXR0b25kZWNyZW1lbnQ6OTcsbm9ucmVnaXN0ZXJlZHBhcmFtZXRlcmNvYXJzZTo5OCxub25yZWdpc3RlcmVkcGFyYW1ldGVyZmluZTo5OSxyZWdpc3RlcmVkcGFyYW1ldGVyY29hcnNlOjEwMCxyZWdpc3RlcmVkcGFyYW1ldGVyZmluZToxMDF9LHdyaXRhYmxlOiExLGVudW1lcmFibGU6ITAsY29uZmlndXJhYmxlOiExfSxNSURJX05SUE5fTUVTU0FHRVM6e3ZhbHVlOntlbnRyeW1zYjo2LGVudHJ5bHNiOjM4LGluY3JlbWVudDo5NixkZWNyZW1lbnQ6OTcscGFyYW1sc2I6OTgscGFyYW1tc2I6OTksbnVsbGFjdGl2ZXBhcmFtZXRlcjoxMjd9LHdyaXRhYmxlOiExLGVudW1lcmFibGU6ITAsY29uZmlndXJhYmxlOiExfSxNSURJX0NIQU5ORUxfTU9ERV9NRVNTQUdFUzp7dmFsdWU6e2FsbHNvdW5kb2ZmOjEyMCxyZXNldGFsbGNvbnRyb2xsZXJzOjEyMSxsb2NhbGNvbnRyb2w6MTIyLGFsbG5vdGVzb2ZmOjEyMyxvbW5pbW9kZW9mZjoxMjQsb21uaW1vZGVvbjoxMjUsbW9ub21vZGVvbjoxMjYscG9seW1vZGVvbjoxMjd9LHdyaXRhYmxlOiExLGVudW1lcmFibGU6ITAsY29uZmlndXJhYmxlOiExfSxvY3RhdmVPZmZzZXQ6e3ZhbHVlOjAsd3JpdGFibGU6ITAsZW51bWVyYWJsZTohMCxjb25maWd1cmFibGU6ITF9fSksT2JqZWN0LmRlZmluZVByb3BlcnRpZXModGhpcyx7c3VwcG9ydGVkOntlbnVtZXJhYmxlOiEwLGdldDpmdW5jdGlvbigpe3JldHVyblwicmVxdWVzdE1JRElBY2Nlc3NcImluIG5hdmlnYXRvcn19LGVuYWJsZWQ6e2VudW1lcmFibGU6ITAsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHZvaWQgMCE9PXRoaXMuaW50ZXJmYWNlfS5iaW5kKHRoaXMpfSxpbnB1dHM6e2VudW1lcmFibGU6ITAsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2lucHV0c30uYmluZCh0aGlzKX0sb3V0cHV0czp7ZW51bWVyYWJsZTohMCxnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fb3V0cHV0c30uYmluZCh0aGlzKX0sc3lzZXhFbmFibGVkOntlbnVtZXJhYmxlOiEwLGdldDpmdW5jdGlvbigpe3JldHVybiEoIXRoaXMuaW50ZXJmYWNlfHwhdGhpcy5pbnRlcmZhY2Uuc3lzZXhFbmFibGVkKX0uYmluZCh0aGlzKX0sbnJwbkV2ZW50c0VuYWJsZWQ6e2VudW1lcmFibGU6ITAsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuISF0aGlzLl9ucnBuRXZlbnRzRW5hYmxlZH0uYmluZCh0aGlzKSxzZXQ6ZnVuY3Rpb24oZW5hYmxlZCl7cmV0dXJuIHRoaXMuX25ycG5FdmVudHNFbmFibGVkPWVuYWJsZWQsdGhpcy5fbnJwbkV2ZW50c0VuYWJsZWR9fSxucnBuVHlwZXM6e2VudW1lcmFibGU6ITAsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX25ycG5UeXBlc30uYmluZCh0aGlzKX0sdGltZTp7ZW51bWVyYWJsZTohMCxnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gcGVyZm9ybWFuY2Uubm93KCl9fX0pfXZhciB3bT1uZXcgV2ViTWlkaTtmdW5jdGlvbiBJbnB1dChtaWRpSW5wdXQpe3ZhciB0aGF0PXRoaXM7dGhpcy5fdXNlckhhbmRsZXJzPXtjaGFubmVsOnt9LHN5c3RlbTp7fX0sdGhpcy5fbWlkaUlucHV0PW1pZGlJbnB1dCxPYmplY3QuZGVmaW5lUHJvcGVydGllcyh0aGlzLHtjb25uZWN0aW9uOntlbnVtZXJhYmxlOiEwLGdldDpmdW5jdGlvbigpe3JldHVybiB0aGF0Ll9taWRpSW5wdXQuY29ubmVjdGlvbn19LGlkOntlbnVtZXJhYmxlOiEwLGdldDpmdW5jdGlvbigpe3JldHVybiB0aGF0Ll9taWRpSW5wdXQuaWR9fSxtYW51ZmFjdHVyZXI6e2VudW1lcmFibGU6ITAsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoYXQuX21pZGlJbnB1dC5tYW51ZmFjdHVyZXJ9fSxuYW1lOntlbnVtZXJhYmxlOiEwLGdldDpmdW5jdGlvbigpe3JldHVybiB0aGF0Ll9taWRpSW5wdXQubmFtZX19LHN0YXRlOntlbnVtZXJhYmxlOiEwLGdldDpmdW5jdGlvbigpe3JldHVybiB0aGF0Ll9taWRpSW5wdXQuc3RhdGV9fSx0eXBlOntlbnVtZXJhYmxlOiEwLGdldDpmdW5jdGlvbigpe3JldHVybiB0aGF0Ll9taWRpSW5wdXQudHlwZX19fSksdGhpcy5faW5pdGlhbGl6ZVVzZXJIYW5kbGVycygpLHRoaXMuX21pZGlJbnB1dC5vbm1pZGltZXNzYWdlPXRoaXMuX29uTWlkaU1lc3NhZ2UuYmluZCh0aGlzKX1mdW5jdGlvbiBPdXRwdXQobWlkaU91dHB1dCl7dmFyIHRoYXQ9dGhpczt0aGlzLl9taWRpT3V0cHV0PW1pZGlPdXRwdXQsT2JqZWN0LmRlZmluZVByb3BlcnRpZXModGhpcyx7Y29ubmVjdGlvbjp7ZW51bWVyYWJsZTohMCxnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhhdC5fbWlkaU91dHB1dC5jb25uZWN0aW9ufX0saWQ6e2VudW1lcmFibGU6ITAsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoYXQuX21pZGlPdXRwdXQuaWR9fSxtYW51ZmFjdHVyZXI6e2VudW1lcmFibGU6ITAsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoYXQuX21pZGlPdXRwdXQubWFudWZhY3R1cmVyfX0sbmFtZTp7ZW51bWVyYWJsZTohMCxnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhhdC5fbWlkaU91dHB1dC5uYW1lfX0sc3RhdGU6e2VudW1lcmFibGU6ITAsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoYXQuX21pZGlPdXRwdXQuc3RhdGV9fSx0eXBlOntlbnVtZXJhYmxlOiEwLGdldDpmdW5jdGlvbigpe3JldHVybiB0aGF0Ll9taWRpT3V0cHV0LnR5cGV9fX0pfVdlYk1pZGkucHJvdG90eXBlLmVuYWJsZT1mdW5jdGlvbihjYWxsYmFjayxzeXNleCl7dGhpcy5lbmFibGVkfHwodGhpcy5zdXBwb3J0ZWQ/bmF2aWdhdG9yLnJlcXVlc3RNSURJQWNjZXNzKHtzeXNleDpzeXNleH0pLnRoZW4oZnVuY3Rpb24obWlkaUFjY2Vzcyl7dmFyIHByb21pc2VUaW1lb3V0LGV2ZW50cz1bXSxwcm9taXNlcz1bXTt0aGlzLmludGVyZmFjZT1taWRpQWNjZXNzLHRoaXMuX3Jlc2V0SW50ZXJmYWNlVXNlckhhbmRsZXJzKCksdGhpcy5pbnRlcmZhY2Uub25zdGF0ZWNoYW5nZT1mdW5jdGlvbihlKXtldmVudHMucHVzaChlKX07Zm9yKHZhciBpbnB1dHM9bWlkaUFjY2Vzcy5pbnB1dHMudmFsdWVzKCksaW5wdXQ9aW5wdXRzLm5leHQoKTtpbnB1dCYmIWlucHV0LmRvbmU7aW5wdXQ9aW5wdXRzLm5leHQoKSlwcm9taXNlcy5wdXNoKGlucHV0LnZhbHVlLm9wZW4oKSk7Zm9yKHZhciBvdXRwdXRzPW1pZGlBY2Nlc3Mub3V0cHV0cy52YWx1ZXMoKSxvdXRwdXQ9b3V0cHV0cy5uZXh0KCk7b3V0cHV0JiYhb3V0cHV0LmRvbmU7b3V0cHV0PW91dHB1dHMubmV4dCgpKXByb21pc2VzLnB1c2gob3V0cHV0LnZhbHVlLm9wZW4oKSk7ZnVuY3Rpb24gb25Qb3J0c09wZW4oKXtjbGVhclRpbWVvdXQocHJvbWlzZVRpbWVvdXQpLHRoaXMuX3VwZGF0ZUlucHV0c0FuZE91dHB1dHMoKSx0aGlzLmludGVyZmFjZS5vbnN0YXRlY2hhbmdlPXRoaXMuX29uSW50ZXJmYWNlU3RhdGVDaGFuZ2UuYmluZCh0aGlzKSxcImZ1bmN0aW9uXCI9PXR5cGVvZiBjYWxsYmFjayYmY2FsbGJhY2suY2FsbCh0aGlzKSxldmVudHMuZm9yRWFjaChmdW5jdGlvbihldmVudCl7dGhpcy5fb25JbnRlcmZhY2VTdGF0ZUNoYW5nZShldmVudCl9LmJpbmQodGhpcykpfXByb21pc2VUaW1lb3V0PXNldFRpbWVvdXQob25Qb3J0c09wZW4uYmluZCh0aGlzKSwyMDApLFByb21pc2UmJlByb21pc2UuYWxsKHByb21pc2VzKS5jYXRjaChmdW5jdGlvbihlcnIpe30pLnRoZW4ob25Qb3J0c09wZW4uYmluZCh0aGlzKSl9LmJpbmQodGhpcyksZnVuY3Rpb24oZXJyKXtcImZ1bmN0aW9uXCI9PXR5cGVvZiBjYWxsYmFjayYmY2FsbGJhY2suY2FsbCh0aGlzLGVycil9LmJpbmQodGhpcykpOlwiZnVuY3Rpb25cIj09dHlwZW9mIGNhbGxiYWNrJiZjYWxsYmFjayhuZXcgRXJyb3IoXCJUaGUgV2ViIE1JREkgQVBJIGlzIG5vdCBzdXBwb3J0ZWQgYnkgeW91ciBicm93c2VyLlwiKSkpfSxXZWJNaWRpLnByb3RvdHlwZS5kaXNhYmxlPWZ1bmN0aW9uKCl7aWYoIXRoaXMuc3VwcG9ydGVkKXRocm93IG5ldyBFcnJvcihcIlRoZSBXZWIgTUlESSBBUEkgaXMgbm90IHN1cHBvcnRlZCBieSB5b3VyIGJyb3dzZXIuXCIpO3RoaXMuaW50ZXJmYWNlJiYodGhpcy5pbnRlcmZhY2Uub25zdGF0ZWNoYW5nZT12b2lkIDApLHRoaXMuaW50ZXJmYWNlPXZvaWQgMCx0aGlzLl9pbnB1dHM9W10sdGhpcy5fb3V0cHV0cz1bXSx0aGlzLl9ucnBuRXZlbnRzRW5hYmxlZD0hMCx0aGlzLl9yZXNldEludGVyZmFjZVVzZXJIYW5kbGVycygpfSxXZWJNaWRpLnByb3RvdHlwZS5hZGRMaXN0ZW5lcj1mdW5jdGlvbih0eXBlLGxpc3RlbmVyKXtpZighdGhpcy5lbmFibGVkKXRocm93IG5ldyBFcnJvcihcIldlYk1pZGkgbXVzdCBiZSBlbmFibGVkIGJlZm9yZSBhZGRpbmcgZXZlbnQgbGlzdGVuZXJzLlwiKTtpZihcImZ1bmN0aW9uXCIhPXR5cGVvZiBsaXN0ZW5lcil0aHJvdyBuZXcgVHlwZUVycm9yKFwiVGhlICdsaXN0ZW5lcicgcGFyYW1ldGVyIG11c3QgYmUgYSBmdW5jdGlvbi5cIik7aWYoISgwPD10aGlzLl9taWRpSW50ZXJmYWNlRXZlbnRzLmluZGV4T2YodHlwZSkpKXRocm93IG5ldyBUeXBlRXJyb3IoXCJUaGUgc3BlY2lmaWVkIGV2ZW50IHR5cGUgaXMgbm90IHN1cHBvcnRlZC5cIik7cmV0dXJuIHRoaXMuX3VzZXJIYW5kbGVyc1t0eXBlXS5wdXNoKGxpc3RlbmVyKSx0aGlzfSxXZWJNaWRpLnByb3RvdHlwZS5oYXNMaXN0ZW5lcj1mdW5jdGlvbih0eXBlLGxpc3RlbmVyKXtpZighdGhpcy5lbmFibGVkKXRocm93IG5ldyBFcnJvcihcIldlYk1pZGkgbXVzdCBiZSBlbmFibGVkIGJlZm9yZSBjaGVja2luZyBldmVudCBsaXN0ZW5lcnMuXCIpO2lmKFwiZnVuY3Rpb25cIiE9dHlwZW9mIGxpc3RlbmVyKXRocm93IG5ldyBUeXBlRXJyb3IoXCJUaGUgJ2xpc3RlbmVyJyBwYXJhbWV0ZXIgbXVzdCBiZSBhIGZ1bmN0aW9uLlwiKTtpZighKDA8PXRoaXMuX21pZGlJbnRlcmZhY2VFdmVudHMuaW5kZXhPZih0eXBlKSkpdGhyb3cgbmV3IFR5cGVFcnJvcihcIlRoZSBzcGVjaWZpZWQgZXZlbnQgdHlwZSBpcyBub3Qgc3VwcG9ydGVkLlwiKTtmb3IodmFyIG89MDtvPHRoaXMuX3VzZXJIYW5kbGVyc1t0eXBlXS5sZW5ndGg7bysrKWlmKHRoaXMuX3VzZXJIYW5kbGVyc1t0eXBlXVtvXT09PWxpc3RlbmVyKXJldHVybiEwO3JldHVybiExfSxXZWJNaWRpLnByb3RvdHlwZS5yZW1vdmVMaXN0ZW5lcj1mdW5jdGlvbih0eXBlLGxpc3RlbmVyKXtpZighdGhpcy5lbmFibGVkKXRocm93IG5ldyBFcnJvcihcIldlYk1pZGkgbXVzdCBiZSBlbmFibGVkIGJlZm9yZSByZW1vdmluZyBldmVudCBsaXN0ZW5lcnMuXCIpO2lmKHZvaWQgMCE9PWxpc3RlbmVyJiZcImZ1bmN0aW9uXCIhPXR5cGVvZiBsaXN0ZW5lcil0aHJvdyBuZXcgVHlwZUVycm9yKFwiVGhlICdsaXN0ZW5lcicgcGFyYW1ldGVyIG11c3QgYmUgYSBmdW5jdGlvbi5cIik7aWYoMDw9dGhpcy5fbWlkaUludGVyZmFjZUV2ZW50cy5pbmRleE9mKHR5cGUpKWlmKGxpc3RlbmVyKWZvcih2YXIgbz0wO288dGhpcy5fdXNlckhhbmRsZXJzW3R5cGVdLmxlbmd0aDtvKyspdGhpcy5fdXNlckhhbmRsZXJzW3R5cGVdW29dPT09bGlzdGVuZXImJnRoaXMuX3VzZXJIYW5kbGVyc1t0eXBlXS5zcGxpY2UobywxKTtlbHNlIHRoaXMuX3VzZXJIYW5kbGVyc1t0eXBlXT1bXTtlbHNle2lmKHZvaWQgMCE9PXR5cGUpdGhyb3cgbmV3IFR5cGVFcnJvcihcIlRoZSBzcGVjaWZpZWQgZXZlbnQgdHlwZSBpcyBub3Qgc3VwcG9ydGVkLlwiKTt0aGlzLl9yZXNldEludGVyZmFjZVVzZXJIYW5kbGVycygpfXJldHVybiB0aGlzfSxXZWJNaWRpLnByb3RvdHlwZS50b01JRElDaGFubmVscz1mdW5jdGlvbihjaGFubmVsKXt2YXIgY2hhbm5lbHM7aWYoXCJhbGxcIj09PWNoYW5uZWx8fHZvaWQgMD09PWNoYW5uZWwpY2hhbm5lbHM9W1wiYWxsXCJdO2Vsc2V7aWYoXCJub25lXCI9PT1jaGFubmVsKXJldHVybiBjaGFubmVscz1bXTtjaGFubmVscz1BcnJheS5pc0FycmF5KGNoYW5uZWwpP2NoYW5uZWw6W2NoYW5uZWxdfXJldHVybi0xPGNoYW5uZWxzLmluZGV4T2YoXCJhbGxcIikmJihjaGFubmVscz1bMSwyLDMsNCw1LDYsNyw4LDksMTAsMTEsMTIsMTMsMTQsMTUsMTZdKSxjaGFubmVscy5tYXAoZnVuY3Rpb24oY2gpe3JldHVybiBwYXJzZUludChjaCl9KS5maWx0ZXIoZnVuY3Rpb24oY2gpe3JldHVybiAxPD1jaCYmY2g8PTE2fSl9LFdlYk1pZGkucHJvdG90eXBlLmdldElucHV0QnlJZD1mdW5jdGlvbihpZCl7aWYoIXRoaXMuZW5hYmxlZCl0aHJvdyBuZXcgRXJyb3IoXCJXZWJNaWRpIGlzIG5vdCBlbmFibGVkLlwiKTtpZD1TdHJpbmcoaWQpO2Zvcih2YXIgaT0wO2k8dGhpcy5pbnB1dHMubGVuZ3RoO2krKylpZih0aGlzLmlucHV0c1tpXS5pZD09PWlkKXJldHVybiB0aGlzLmlucHV0c1tpXTtyZXR1cm4hMX0sV2ViTWlkaS5wcm90b3R5cGUuZ2V0T3V0cHV0QnlJZD1mdW5jdGlvbihpZCl7aWYoIXRoaXMuZW5hYmxlZCl0aHJvdyBuZXcgRXJyb3IoXCJXZWJNaWRpIGlzIG5vdCBlbmFibGVkLlwiKTtpZD1TdHJpbmcoaWQpO2Zvcih2YXIgaT0wO2k8dGhpcy5vdXRwdXRzLmxlbmd0aDtpKyspaWYodGhpcy5vdXRwdXRzW2ldLmlkPT09aWQpcmV0dXJuIHRoaXMub3V0cHV0c1tpXTtyZXR1cm4hMX0sV2ViTWlkaS5wcm90b3R5cGUuZ2V0SW5wdXRCeU5hbWU9ZnVuY3Rpb24obmFtZSl7aWYoIXRoaXMuZW5hYmxlZCl0aHJvdyBuZXcgRXJyb3IoXCJXZWJNaWRpIGlzIG5vdCBlbmFibGVkLlwiKTtmb3IodmFyIGk9MDtpPHRoaXMuaW5wdXRzLmxlbmd0aDtpKyspaWYofnRoaXMuaW5wdXRzW2ldLm5hbWUuaW5kZXhPZihuYW1lKSlyZXR1cm4gdGhpcy5pbnB1dHNbaV07cmV0dXJuITF9LFdlYk1pZGkucHJvdG90eXBlLmdldE9jdGF2ZT1mdW5jdGlvbihudW1iZXIpe2lmKG51bGwhPW51bWJlciYmMDw9bnVtYmVyJiZudW1iZXI8PTEyNylyZXR1cm4gTWF0aC5mbG9vcihNYXRoLmZsb29yKG51bWJlcikvMTItMSkrTWF0aC5mbG9vcih3bS5vY3RhdmVPZmZzZXQpfSxXZWJNaWRpLnByb3RvdHlwZS5nZXRPdXRwdXRCeU5hbWU9ZnVuY3Rpb24obmFtZSl7aWYoIXRoaXMuZW5hYmxlZCl0aHJvdyBuZXcgRXJyb3IoXCJXZWJNaWRpIGlzIG5vdCBlbmFibGVkLlwiKTtmb3IodmFyIGk9MDtpPHRoaXMub3V0cHV0cy5sZW5ndGg7aSsrKWlmKH50aGlzLm91dHB1dHNbaV0ubmFtZS5pbmRleE9mKG5hbWUpKXJldHVybiB0aGlzLm91dHB1dHNbaV07cmV0dXJuITF9LFdlYk1pZGkucHJvdG90eXBlLmd1ZXNzTm90ZU51bWJlcj1mdW5jdGlvbihpbnB1dCl7dmFyIG91dHB1dD0hMTtpZihpbnB1dCYmaW5wdXQudG9GaXhlZCYmMDw9aW5wdXQmJmlucHV0PD0xMjc/b3V0cHV0PU1hdGgucm91bmQoaW5wdXQpOjA8PXBhcnNlSW50KGlucHV0KSYmcGFyc2VJbnQoaW5wdXQpPD0xMjc/b3V0cHV0PXBhcnNlSW50KGlucHV0KTooXCJzdHJpbmdcIj09dHlwZW9mIGlucHV0fHxpbnB1dCBpbnN0YW5jZW9mIFN0cmluZykmJihvdXRwdXQ9dGhpcy5ub3RlTmFtZVRvTnVtYmVyKGlucHV0KSksITE9PT1vdXRwdXQpdGhyb3cgbmV3IEVycm9yKFwiSW52YWxpZCBpbnB1dCB2YWx1ZSAoXCIraW5wdXQrXCIpLlwiKTtyZXR1cm4gb3V0cHV0fSxXZWJNaWRpLnByb3RvdHlwZS5ub3RlTmFtZVRvTnVtYmVyPWZ1bmN0aW9uKG5hbWUpe1wic3RyaW5nXCIhPXR5cGVvZiBuYW1lJiYobmFtZT1cIlwiKTt2YXIgbWF0Y2hlcz1uYW1lLm1hdGNoKC8oW0NERUZHQUJdKSgjezAsMn18YnswLDJ9KSgtP1xcZCspL2kpO2lmKCFtYXRjaGVzKXRocm93IG5ldyBSYW5nZUVycm9yKFwiSW52YWxpZCBub3RlIG5hbWUuXCIpO3ZhciBzZW1pdG9uZXM9d20uX3NlbWl0b25lc1ttYXRjaGVzWzFdLnRvVXBwZXJDYXNlKCldLHJlc3VsdD0xMioocGFyc2VJbnQobWF0Y2hlc1szXSkrMS1NYXRoLmZsb29yKHdtLm9jdGF2ZU9mZnNldCkpK3NlbWl0b25lcztpZigtMTxtYXRjaGVzWzJdLnRvTG93ZXJDYXNlKCkuaW5kZXhPZihcImJcIik/cmVzdWx0LT1tYXRjaGVzWzJdLmxlbmd0aDotMTxtYXRjaGVzWzJdLnRvTG93ZXJDYXNlKCkuaW5kZXhPZihcIiNcIikmJihyZXN1bHQrPW1hdGNoZXNbMl0ubGVuZ3RoKSxyZXN1bHQ8MHx8MTI3PHJlc3VsdCl0aHJvdyBuZXcgUmFuZ2VFcnJvcihcIkludmFsaWQgbm90ZSBuYW1lIG9yIG5vdGUgb3V0c2lkZSB2YWxpZCByYW5nZS5cIik7cmV0dXJuIHJlc3VsdH0sV2ViTWlkaS5wcm90b3R5cGUuX3VwZGF0ZUlucHV0c0FuZE91dHB1dHM9ZnVuY3Rpb24oKXt0aGlzLl91cGRhdGVJbnB1dHMoKSx0aGlzLl91cGRhdGVPdXRwdXRzKCl9LFdlYk1pZGkucHJvdG90eXBlLl91cGRhdGVJbnB1dHM9ZnVuY3Rpb24oKXtmb3IodmFyIGk9MDtpPHRoaXMuX2lucHV0cy5sZW5ndGg7aSsrKXtmb3IodmFyIHJlbW92ZT0hMCx1cGRhdGVkPXRoaXMuaW50ZXJmYWNlLmlucHV0cy52YWx1ZXMoKSxpbnB1dD11cGRhdGVkLm5leHQoKTtpbnB1dCYmIWlucHV0LmRvbmU7aW5wdXQ9dXBkYXRlZC5uZXh0KCkpaWYodGhpcy5faW5wdXRzW2ldLl9taWRpSW5wdXQ9PT1pbnB1dC52YWx1ZSl7cmVtb3ZlPSExO2JyZWFrfXJlbW92ZSYmdGhpcy5faW5wdXRzLnNwbGljZShpLDEpfXRoaXMuaW50ZXJmYWNlJiZ0aGlzLmludGVyZmFjZS5pbnB1dHMuZm9yRWFjaChmdW5jdGlvbihuSW5wdXQpe2Zvcih2YXIgYWRkPSEwLGo9MDtqPHRoaXMuX2lucHV0cy5sZW5ndGg7aisrKXRoaXMuX2lucHV0c1tqXS5fbWlkaUlucHV0PT09bklucHV0JiYoYWRkPSExKTthZGQmJnRoaXMuX2lucHV0cy5wdXNoKG5ldyBJbnB1dChuSW5wdXQpKX0uYmluZCh0aGlzKSl9LFdlYk1pZGkucHJvdG90eXBlLl91cGRhdGVPdXRwdXRzPWZ1bmN0aW9uKCl7Zm9yKHZhciBpPTA7aTx0aGlzLl9vdXRwdXRzLmxlbmd0aDtpKyspe2Zvcih2YXIgcmVtb3ZlPSEwLHVwZGF0ZWQ9dGhpcy5pbnRlcmZhY2Uub3V0cHV0cy52YWx1ZXMoKSxvdXRwdXQ9dXBkYXRlZC5uZXh0KCk7b3V0cHV0JiYhb3V0cHV0LmRvbmU7b3V0cHV0PXVwZGF0ZWQubmV4dCgpKWlmKHRoaXMuX291dHB1dHNbaV0uX21pZGlPdXRwdXQ9PT1vdXRwdXQudmFsdWUpe3JlbW92ZT0hMTticmVha31yZW1vdmUmJnRoaXMuX291dHB1dHMuc3BsaWNlKGksMSl9dGhpcy5pbnRlcmZhY2UmJnRoaXMuaW50ZXJmYWNlLm91dHB1dHMuZm9yRWFjaChmdW5jdGlvbihuT3V0cHV0KXtmb3IodmFyIGFkZD0hMCxqPTA7ajx0aGlzLl9vdXRwdXRzLmxlbmd0aDtqKyspdGhpcy5fb3V0cHV0c1tqXS5fbWlkaU91dHB1dD09PW5PdXRwdXQmJihhZGQ9ITEpO2FkZCYmdGhpcy5fb3V0cHV0cy5wdXNoKG5ldyBPdXRwdXQobk91dHB1dCkpfS5iaW5kKHRoaXMpKX0sV2ViTWlkaS5wcm90b3R5cGUuX29uSW50ZXJmYWNlU3RhdGVDaGFuZ2U9ZnVuY3Rpb24oZSl7dGhpcy5fdXBkYXRlSW5wdXRzQW5kT3V0cHV0cygpO3ZhciBldmVudD17dGltZXN0YW1wOmUudGltZVN0YW1wLHR5cGU6ZS5wb3J0LnN0YXRlfTt0aGlzLmludGVyZmFjZSYmXCJjb25uZWN0ZWRcIj09PWUucG9ydC5zdGF0ZT9cIm91dHB1dFwiPT09ZS5wb3J0LnR5cGU/ZXZlbnQucG9ydD10aGlzLmdldE91dHB1dEJ5SWQoZS5wb3J0LmlkKTpcImlucHV0XCI9PT1lLnBvcnQudHlwZSYmKGV2ZW50LnBvcnQ9dGhpcy5nZXRJbnB1dEJ5SWQoZS5wb3J0LmlkKSk6ZXZlbnQucG9ydD17Y29ubmVjdGlvbjpcImNsb3NlZFwiLGlkOmUucG9ydC5pZCxtYW51ZmFjdHVyZXI6ZS5wb3J0Lm1hbnVmYWN0dXJlcixuYW1lOmUucG9ydC5uYW1lLHN0YXRlOmUucG9ydC5zdGF0ZSx0eXBlOmUucG9ydC50eXBlfSx0aGlzLl91c2VySGFuZGxlcnNbZS5wb3J0LnN0YXRlXS5mb3JFYWNoKGZ1bmN0aW9uKGhhbmRsZXIpe2hhbmRsZXIoZXZlbnQpfSl9LFdlYk1pZGkucHJvdG90eXBlLl9yZXNldEludGVyZmFjZVVzZXJIYW5kbGVycz1mdW5jdGlvbigpe2Zvcih2YXIgaT0wO2k8dGhpcy5fbWlkaUludGVyZmFjZUV2ZW50cy5sZW5ndGg7aSsrKXRoaXMuX3VzZXJIYW5kbGVyc1t0aGlzLl9taWRpSW50ZXJmYWNlRXZlbnRzW2ldXT1bXX0sSW5wdXQucHJvdG90eXBlLm9uPUlucHV0LnByb3RvdHlwZS5hZGRMaXN0ZW5lcj1mdW5jdGlvbih0eXBlLGNoYW5uZWwsbGlzdGVuZXIpe3ZhciB0aGF0PXRoaXM7aWYodm9pZCAwPT09Y2hhbm5lbCYmKGNoYW5uZWw9XCJhbGxcIiksQXJyYXkuaXNBcnJheShjaGFubmVsKXx8KGNoYW5uZWw9W2NoYW5uZWxdKSxjaGFubmVsLmZvckVhY2goZnVuY3Rpb24oaXRlbSl7aWYoXCJhbGxcIiE9PWl0ZW0mJiEoMTw9aXRlbSYmaXRlbTw9MTYpKXRocm93IG5ldyBSYW5nZUVycm9yKFwiVGhlICdjaGFubmVsJyBwYXJhbWV0ZXIgaXMgaW52YWxpZC5cIil9KSxcImZ1bmN0aW9uXCIhPXR5cGVvZiBsaXN0ZW5lcil0aHJvdyBuZXcgVHlwZUVycm9yKFwiVGhlICdsaXN0ZW5lcicgcGFyYW1ldGVyIG11c3QgYmUgYSBmdW5jdGlvbi5cIik7aWYodm9pZCAwIT09d20uTUlESV9TWVNURU1fTUVTU0FHRVNbdHlwZV0pdGhpcy5fdXNlckhhbmRsZXJzLnN5c3RlbVt0eXBlXXx8KHRoaXMuX3VzZXJIYW5kbGVycy5zeXN0ZW1bdHlwZV09W10pLHRoaXMuX3VzZXJIYW5kbGVycy5zeXN0ZW1bdHlwZV0ucHVzaChsaXN0ZW5lcik7ZWxzZXtpZih2b2lkIDA9PT13bS5NSURJX0NIQU5ORUxfTUVTU0FHRVNbdHlwZV0pdGhyb3cgbmV3IFR5cGVFcnJvcihcIlRoZSBzcGVjaWZpZWQgZXZlbnQgdHlwZSBpcyBub3Qgc3VwcG9ydGVkLlwiKTtpZigtMTxjaGFubmVsLmluZGV4T2YoXCJhbGxcIikpe2NoYW5uZWw9W107Zm9yKHZhciBqPTE7ajw9MTY7aisrKWNoYW5uZWwucHVzaChqKX10aGlzLl91c2VySGFuZGxlcnMuY2hhbm5lbFt0eXBlXXx8KHRoaXMuX3VzZXJIYW5kbGVycy5jaGFubmVsW3R5cGVdPVtdKSxjaGFubmVsLmZvckVhY2goZnVuY3Rpb24oY2gpe3RoYXQuX3VzZXJIYW5kbGVycy5jaGFubmVsW3R5cGVdW2NoXXx8KHRoYXQuX3VzZXJIYW5kbGVycy5jaGFubmVsW3R5cGVdW2NoXT1bXSksdGhhdC5fdXNlckhhbmRsZXJzLmNoYW5uZWxbdHlwZV1bY2hdLnB1c2gobGlzdGVuZXIpfSl9cmV0dXJuIHRoaXN9LElucHV0LnByb3RvdHlwZS5oYXNMaXN0ZW5lcj1mdW5jdGlvbih0eXBlLGNoYW5uZWwsbGlzdGVuZXIpe3ZhciB0aGF0PXRoaXM7aWYoXCJmdW5jdGlvblwiIT10eXBlb2YgbGlzdGVuZXIpdGhyb3cgbmV3IFR5cGVFcnJvcihcIlRoZSAnbGlzdGVuZXInIHBhcmFtZXRlciBtdXN0IGJlIGEgZnVuY3Rpb24uXCIpO2lmKHZvaWQgMD09PWNoYW5uZWwmJihjaGFubmVsPVwiYWxsXCIpLGNoYW5uZWwuY29uc3RydWN0b3IhPT1BcnJheSYmKGNoYW5uZWw9W2NoYW5uZWxdKSx2b2lkIDAhPT13bS5NSURJX1NZU1RFTV9NRVNTQUdFU1t0eXBlXSl7Zm9yKHZhciBvPTA7bzx0aGlzLl91c2VySGFuZGxlcnMuc3lzdGVtW3R5cGVdLmxlbmd0aDtvKyspaWYodGhpcy5fdXNlckhhbmRsZXJzLnN5c3RlbVt0eXBlXVtvXT09PWxpc3RlbmVyKXJldHVybiEwfWVsc2UgaWYodm9pZCAwIT09d20uTUlESV9DSEFOTkVMX01FU1NBR0VTW3R5cGVdKXtpZigtMTxjaGFubmVsLmluZGV4T2YoXCJhbGxcIikpe2NoYW5uZWw9W107Zm9yKHZhciBqPTE7ajw9MTY7aisrKWNoYW5uZWwucHVzaChqKX1yZXR1cm4hIXRoaXMuX3VzZXJIYW5kbGVycy5jaGFubmVsW3R5cGVdJiZjaGFubmVsLmV2ZXJ5KGZ1bmN0aW9uKGNoTnVtKXt2YXIgbGlzdGVuZXJzPXRoYXQuX3VzZXJIYW5kbGVycy5jaGFubmVsW3R5cGVdW2NoTnVtXTtyZXR1cm4gbGlzdGVuZXJzJiYtMTxsaXN0ZW5lcnMuaW5kZXhPZihsaXN0ZW5lcil9KX1yZXR1cm4hMX0sSW5wdXQucHJvdG90eXBlLnJlbW92ZUxpc3RlbmVyPWZ1bmN0aW9uKHR5cGUsY2hhbm5lbCxsaXN0ZW5lcil7dmFyIHRoYXQ9dGhpcztpZih2b2lkIDAhPT1saXN0ZW5lciYmXCJmdW5jdGlvblwiIT10eXBlb2YgbGlzdGVuZXIpdGhyb3cgbmV3IFR5cGVFcnJvcihcIlRoZSAnbGlzdGVuZXInIHBhcmFtZXRlciBtdXN0IGJlIGEgZnVuY3Rpb24uXCIpO2lmKHZvaWQgMD09PWNoYW5uZWwmJihjaGFubmVsPVwiYWxsXCIpLGNoYW5uZWwuY29uc3RydWN0b3IhPT1BcnJheSYmKGNoYW5uZWw9W2NoYW5uZWxdKSx2b2lkIDAhPT13bS5NSURJX1NZU1RFTV9NRVNTQUdFU1t0eXBlXSlpZih2b2lkIDA9PT1saXN0ZW5lcil0aGlzLl91c2VySGFuZGxlcnMuc3lzdGVtW3R5cGVdPVtdO2Vsc2UgZm9yKHZhciBvPTA7bzx0aGlzLl91c2VySGFuZGxlcnMuc3lzdGVtW3R5cGVdLmxlbmd0aDtvKyspdGhpcy5fdXNlckhhbmRsZXJzLnN5c3RlbVt0eXBlXVtvXT09PWxpc3RlbmVyJiZ0aGlzLl91c2VySGFuZGxlcnMuc3lzdGVtW3R5cGVdLnNwbGljZShvLDEpO2Vsc2UgaWYodm9pZCAwIT09d20uTUlESV9DSEFOTkVMX01FU1NBR0VTW3R5cGVdKXtpZigtMTxjaGFubmVsLmluZGV4T2YoXCJhbGxcIikpe2NoYW5uZWw9W107Zm9yKHZhciBqPTE7ajw9MTY7aisrKWNoYW5uZWwucHVzaChqKX1pZighdGhpcy5fdXNlckhhbmRsZXJzLmNoYW5uZWxbdHlwZV0pcmV0dXJuIHRoaXM7Y2hhbm5lbC5mb3JFYWNoKGZ1bmN0aW9uKGNoTnVtKXt2YXIgbGlzdGVuZXJzPXRoYXQuX3VzZXJIYW5kbGVycy5jaGFubmVsW3R5cGVdW2NoTnVtXTtpZihsaXN0ZW5lcnMpaWYodm9pZCAwPT09bGlzdGVuZXIpdGhhdC5fdXNlckhhbmRsZXJzLmNoYW5uZWxbdHlwZV1bY2hOdW1dPVtdO2Vsc2UgZm9yKHZhciBsPTA7bDxsaXN0ZW5lcnMubGVuZ3RoO2wrKylsaXN0ZW5lcnNbbF09PT1saXN0ZW5lciYmbGlzdGVuZXJzLnNwbGljZShsLDEpfSl9ZWxzZXtpZih2b2lkIDAhPT10eXBlKXRocm93IG5ldyBUeXBlRXJyb3IoXCJUaGUgc3BlY2lmaWVkIGV2ZW50IHR5cGUgaXMgbm90IHN1cHBvcnRlZC5cIik7dGhpcy5faW5pdGlhbGl6ZVVzZXJIYW5kbGVycygpfXJldHVybiB0aGlzfSxJbnB1dC5wcm90b3R5cGUuX2luaXRpYWxpemVVc2VySGFuZGxlcnM9ZnVuY3Rpb24oKXtmb3IodmFyIHByb3AxIGluIHdtLk1JRElfQ0hBTk5FTF9NRVNTQUdFUyl3bS5NSURJX0NIQU5ORUxfTUVTU0FHRVMuaGFzT3duUHJvcGVydHkocHJvcDEpJiYodGhpcy5fdXNlckhhbmRsZXJzLmNoYW5uZWxbcHJvcDFdPXt9KTtmb3IodmFyIHByb3AyIGluIHdtLk1JRElfU1lTVEVNX01FU1NBR0VTKXdtLk1JRElfU1lTVEVNX01FU1NBR0VTLmhhc093blByb3BlcnR5KHByb3AyKSYmKHRoaXMuX3VzZXJIYW5kbGVycy5zeXN0ZW1bcHJvcDJdPVtdKX0sSW5wdXQucHJvdG90eXBlLl9vbk1pZGlNZXNzYWdlPWZ1bmN0aW9uKGUpe2lmKDA8dGhpcy5fdXNlckhhbmRsZXJzLnN5c3RlbS5taWRpbWVzc2FnZS5sZW5ndGgpe3ZhciBldmVudD17dGFyZ2V0OnRoaXMsZGF0YTplLmRhdGEsdGltZXN0YW1wOmUudGltZVN0YW1wLHR5cGU6XCJtaWRpbWVzc2FnZVwifTt0aGlzLl91c2VySGFuZGxlcnMuc3lzdGVtLm1pZGltZXNzYWdlLmZvckVhY2goZnVuY3Rpb24oY2FsbGJhY2spe2NhbGxiYWNrKGV2ZW50KX0pfWUuZGF0YVswXTwyNDA/KHRoaXMuX3BhcnNlQ2hhbm5lbEV2ZW50KGUpLHRoaXMuX3BhcnNlTnJwbkV2ZW50KGUpKTplLmRhdGFbMF08PTI1NSYmdGhpcy5fcGFyc2VTeXN0ZW1FdmVudChlKX0sSW5wdXQucHJvdG90eXBlLl9wYXJzZU5ycG5FdmVudD1mdW5jdGlvbihlKXt2YXIgZGF0YTEsZGF0YTIsY29tbWFuZD1lLmRhdGFbMF0+PjQsY2hhbm5lbEJ1ZmZlckluZGV4PTE1JmUuZGF0YVswXSxjaGFubmVsPTErY2hhbm5lbEJ1ZmZlckluZGV4O2lmKDE8ZS5kYXRhLmxlbmd0aCYmKGRhdGExPWUuZGF0YVsxXSxkYXRhMj0yPGUuZGF0YS5sZW5ndGg/ZS5kYXRhWzJdOnZvaWQgMCksd20ubnJwbkV2ZW50c0VuYWJsZWQmJmNvbW1hbmQ9PT13bS5NSURJX0NIQU5ORUxfTUVTU0FHRVMuY29udHJvbGNoYW5nZSYmKGRhdGExPj13bS5NSURJX05SUE5fTUVTU0FHRVMuaW5jcmVtZW50JiZkYXRhMTw9d20uTUlESV9OUlBOX01FU1NBR0VTLnBhcmFtbXNifHxkYXRhMT09PXdtLk1JRElfTlJQTl9NRVNTQUdFUy5lbnRyeW1zYnx8ZGF0YTE9PT13bS5NSURJX05SUE5fTUVTU0FHRVMuZW50cnlsc2IpKXt2YXIgY2NFdmVudD17dGFyZ2V0OnRoaXMsdHlwZTpcImNvbnRyb2xjaGFuZ2VcIixkYXRhOmUuZGF0YSx0aW1lc3RhbXA6ZS50aW1lU3RhbXAsY2hhbm5lbDpjaGFubmVsLGNvbnRyb2xsZXI6e251bWJlcjpkYXRhMSxuYW1lOnRoaXMuZ2V0Q2NOYW1lQnlOdW1iZXIoZGF0YTEpfSx2YWx1ZTpkYXRhMn07aWYoY2NFdmVudC5jb250cm9sbGVyLm51bWJlcj09PXdtLk1JRElfTlJQTl9NRVNTQUdFUy5wYXJhbW1zYiYmY2NFdmVudC52YWx1ZSE9d20uTUlESV9OUlBOX01FU1NBR0VTLm51bGxhY3RpdmVwYXJhbWV0ZXIpd20uX25ycG5CdWZmZXJbY2hhbm5lbEJ1ZmZlckluZGV4XT1bXSx3bS5fbnJwbkJ1ZmZlcltjaGFubmVsQnVmZmVySW5kZXhdWzBdPWNjRXZlbnQ7ZWxzZSBpZigxPT09d20uX25ycG5CdWZmZXJbY2hhbm5lbEJ1ZmZlckluZGV4XS5sZW5ndGgmJmNjRXZlbnQuY29udHJvbGxlci5udW1iZXI9PT13bS5NSURJX05SUE5fTUVTU0FHRVMucGFyYW1sc2Ipd20uX25ycG5CdWZmZXJbY2hhbm5lbEJ1ZmZlckluZGV4XS5wdXNoKGNjRXZlbnQpO2Vsc2UgaWYoMiE9PXdtLl9ucnBuQnVmZmVyW2NoYW5uZWxCdWZmZXJJbmRleF0ubGVuZ3RofHxjY0V2ZW50LmNvbnRyb2xsZXIubnVtYmVyIT09d20uTUlESV9OUlBOX01FU1NBR0VTLmluY3JlbWVudCYmY2NFdmVudC5jb250cm9sbGVyLm51bWJlciE9PXdtLk1JRElfTlJQTl9NRVNTQUdFUy5kZWNyZW1lbnQmJmNjRXZlbnQuY29udHJvbGxlci5udW1iZXIhPT13bS5NSURJX05SUE5fTUVTU0FHRVMuZW50cnltc2IpaWYoMz09PXdtLl9ucnBuQnVmZmVyW2NoYW5uZWxCdWZmZXJJbmRleF0ubGVuZ3RoJiZ3bS5fbnJwbkJ1ZmZlcltjaGFubmVsQnVmZmVySW5kZXhdWzJdLm51bWJlcj09PXdtLk1JRElfTlJQTl9NRVNTQUdFUy5lbnRyeW1zYiYmY2NFdmVudC5jb250cm9sbGVyLm51bWJlcj09PXdtLk1JRElfTlJQTl9NRVNTQUdFUy5lbnRyeWxzYil3bS5fbnJwbkJ1ZmZlcltjaGFubmVsQnVmZmVySW5kZXhdLnB1c2goY2NFdmVudCk7ZWxzZSBpZigzPD13bS5fbnJwbkJ1ZmZlcltjaGFubmVsQnVmZmVySW5kZXhdLmxlbmd0aCYmd20uX25ycG5CdWZmZXJbY2hhbm5lbEJ1ZmZlckluZGV4XS5sZW5ndGg8PTQmJmNjRXZlbnQuY29udHJvbGxlci5udW1iZXI9PT13bS5NSURJX05SUE5fTUVTU0FHRVMucGFyYW1tc2ImJmNjRXZlbnQudmFsdWU9PT13bS5NSURJX05SUE5fTUVTU0FHRVMubnVsbGFjdGl2ZXBhcmFtZXRlcil3bS5fbnJwbkJ1ZmZlcltjaGFubmVsQnVmZmVySW5kZXhdLnB1c2goY2NFdmVudCk7ZWxzZSBpZig0PD13bS5fbnJwbkJ1ZmZlcltjaGFubmVsQnVmZmVySW5kZXhdLmxlbmd0aCYmd20uX25ycG5CdWZmZXJbY2hhbm5lbEJ1ZmZlckluZGV4XS5sZW5ndGg8PTUmJmNjRXZlbnQuY29udHJvbGxlci5udW1iZXI9PT13bS5NSURJX05SUE5fTUVTU0FHRVMucGFyYW1sc2ImJmNjRXZlbnQudmFsdWU9PT13bS5NSURJX05SUE5fTUVTU0FHRVMubnVsbGFjdGl2ZXBhcmFtZXRlcil7d20uX25ycG5CdWZmZXJbY2hhbm5lbEJ1ZmZlckluZGV4XS5wdXNoKGNjRXZlbnQpO3ZhciByYXdEYXRhPVtdO3dtLl9ucnBuQnVmZmVyW2NoYW5uZWxCdWZmZXJJbmRleF0uZm9yRWFjaChmdW5jdGlvbihldil7cmF3RGF0YS5wdXNoKGV2LmRhdGEpfSk7dmFyIG5ycG5OdW1iZXI9d20uX25ycG5CdWZmZXJbY2hhbm5lbEJ1ZmZlckluZGV4XVswXS52YWx1ZTw8N3x3bS5fbnJwbkJ1ZmZlcltjaGFubmVsQnVmZmVySW5kZXhdWzFdLnZhbHVlLG5ycG5WYWx1ZT13bS5fbnJwbkJ1ZmZlcltjaGFubmVsQnVmZmVySW5kZXhdWzJdLnZhbHVlOzY9PT13bS5fbnJwbkJ1ZmZlcltjaGFubmVsQnVmZmVySW5kZXhdLmxlbmd0aCYmKG5ycG5WYWx1ZT13bS5fbnJwbkJ1ZmZlcltjaGFubmVsQnVmZmVySW5kZXhdWzJdLnZhbHVlPDw3fHdtLl9ucnBuQnVmZmVyW2NoYW5uZWxCdWZmZXJJbmRleF1bM10udmFsdWUpO3ZhciBucnBuQ29udHJvbGxlclR5cGU9XCJcIjtzd2l0Y2god20uX25ycG5CdWZmZXJbY2hhbm5lbEJ1ZmZlckluZGV4XVsyXS5jb250cm9sbGVyLm51bWJlcil7Y2FzZSB3bS5NSURJX05SUE5fTUVTU0FHRVMuZW50cnltc2I6bnJwbkNvbnRyb2xsZXJUeXBlPXdtLl9ucnBuVHlwZXNbMF07YnJlYWs7Y2FzZSB3bS5NSURJX05SUE5fTUVTU0FHRVMuaW5jcmVtZW50Om5ycG5Db250cm9sbGVyVHlwZT13bS5fbnJwblR5cGVzWzFdO2JyZWFrO2Nhc2Ugd20uTUlESV9OUlBOX01FU1NBR0VTLmRlY3JlbWVudDpucnBuQ29udHJvbGxlclR5cGU9d20uX25ycG5UeXBlc1syXTticmVhaztkZWZhdWx0OnRocm93IG5ldyBFcnJvcihcIlRoZSBOUFJOIHR5cGUgd2FzIHVuaWRlbnRpZmlhYmxlLlwiKX12YXIgbnJwbkV2ZW50PXt0aW1lc3RhbXA6Y2NFdmVudC50aW1lc3RhbXAsY2hhbm5lbDpjY0V2ZW50LmNoYW5uZWwsdHlwZTpcIm5ycG5cIixkYXRhOnJhd0RhdGEsY29udHJvbGxlcjp7bnVtYmVyOm5ycG5OdW1iZXIsdHlwZTpucnBuQ29udHJvbGxlclR5cGUsbmFtZTpcIk5vbi1SZWdpc3RlcmVkIFBhcmFtZXRlciBcIitucnBuTnVtYmVyfSx2YWx1ZTpucnBuVmFsdWV9O3dtLl9ucnBuQnVmZmVyW2NoYW5uZWxCdWZmZXJJbmRleF09W10sdGhpcy5fdXNlckhhbmRsZXJzLmNoYW5uZWxbbnJwbkV2ZW50LnR5cGVdJiZ0aGlzLl91c2VySGFuZGxlcnMuY2hhbm5lbFtucnBuRXZlbnQudHlwZV1bbnJwbkV2ZW50LmNoYW5uZWxdJiZ0aGlzLl91c2VySGFuZGxlcnMuY2hhbm5lbFtucnBuRXZlbnQudHlwZV1bbnJwbkV2ZW50LmNoYW5uZWxdLmZvckVhY2goZnVuY3Rpb24oY2FsbGJhY2spe2NhbGxiYWNrKG5ycG5FdmVudCl9KX1lbHNlIHdtLl9ucnBuQnVmZmVyW2NoYW5uZWxCdWZmZXJJbmRleF09W107ZWxzZSB3bS5fbnJwbkJ1ZmZlcltjaGFubmVsQnVmZmVySW5kZXhdLnB1c2goY2NFdmVudCl9fSxJbnB1dC5wcm90b3R5cGUuX3BhcnNlQ2hhbm5lbEV2ZW50PWZ1bmN0aW9uKGUpe3ZhciBkYXRhMSxkYXRhMixjb21tYW5kPWUuZGF0YVswXT4+NCxjaGFubmVsPTErKDE1JmUuZGF0YVswXSk7MTxlLmRhdGEubGVuZ3RoJiYoZGF0YTE9ZS5kYXRhWzFdLGRhdGEyPTI8ZS5kYXRhLmxlbmd0aD9lLmRhdGFbMl06dm9pZCAwKTt2YXIgZXZlbnQ9e3RhcmdldDp0aGlzLGRhdGE6ZS5kYXRhLHRpbWVzdGFtcDplLnRpbWVTdGFtcCxjaGFubmVsOmNoYW5uZWx9O2NvbW1hbmQ9PT13bS5NSURJX0NIQU5ORUxfTUVTU0FHRVMubm90ZW9mZnx8Y29tbWFuZD09PXdtLk1JRElfQ0hBTk5FTF9NRVNTQUdFUy5ub3Rlb24mJjA9PT1kYXRhMj8oZXZlbnQudHlwZT1cIm5vdGVvZmZcIixldmVudC5ub3RlPXtudW1iZXI6ZGF0YTEsbmFtZTp3bS5fbm90ZXNbZGF0YTElMTJdLG9jdGF2ZTp3bS5nZXRPY3RhdmUoZGF0YTEpfSxldmVudC52ZWxvY2l0eT1kYXRhMi8xMjcsZXZlbnQucmF3VmVsb2NpdHk9ZGF0YTIpOmNvbW1hbmQ9PT13bS5NSURJX0NIQU5ORUxfTUVTU0FHRVMubm90ZW9uPyhldmVudC50eXBlPVwibm90ZW9uXCIsZXZlbnQubm90ZT17bnVtYmVyOmRhdGExLG5hbWU6d20uX25vdGVzW2RhdGExJTEyXSxvY3RhdmU6d20uZ2V0T2N0YXZlKGRhdGExKX0sZXZlbnQudmVsb2NpdHk9ZGF0YTIvMTI3LGV2ZW50LnJhd1ZlbG9jaXR5PWRhdGEyKTpjb21tYW5kPT09d20uTUlESV9DSEFOTkVMX01FU1NBR0VTLmtleWFmdGVydG91Y2g/KGV2ZW50LnR5cGU9XCJrZXlhZnRlcnRvdWNoXCIsZXZlbnQubm90ZT17bnVtYmVyOmRhdGExLG5hbWU6d20uX25vdGVzW2RhdGExJTEyXSxvY3RhdmU6d20uZ2V0T2N0YXZlKGRhdGExKX0sZXZlbnQudmFsdWU9ZGF0YTIvMTI3KTpjb21tYW5kPT09d20uTUlESV9DSEFOTkVMX01FU1NBR0VTLmNvbnRyb2xjaGFuZ2UmJjA8PWRhdGExJiZkYXRhMTw9MTE5PyhldmVudC50eXBlPVwiY29udHJvbGNoYW5nZVwiLGV2ZW50LmNvbnRyb2xsZXI9e251bWJlcjpkYXRhMSxuYW1lOnRoaXMuZ2V0Q2NOYW1lQnlOdW1iZXIoZGF0YTEpfSxldmVudC52YWx1ZT1kYXRhMik6Y29tbWFuZD09PXdtLk1JRElfQ0hBTk5FTF9NRVNTQUdFUy5jaGFubmVsbW9kZSYmMTIwPD1kYXRhMSYmZGF0YTE8PTEyNz8oZXZlbnQudHlwZT1cImNoYW5uZWxtb2RlXCIsZXZlbnQuY29udHJvbGxlcj17bnVtYmVyOmRhdGExLG5hbWU6dGhpcy5nZXRDaGFubmVsTW9kZUJ5TnVtYmVyKGRhdGExKX0sZXZlbnQudmFsdWU9ZGF0YTIpOmNvbW1hbmQ9PT13bS5NSURJX0NIQU5ORUxfTUVTU0FHRVMucHJvZ3JhbWNoYW5nZT8oZXZlbnQudHlwZT1cInByb2dyYW1jaGFuZ2VcIixldmVudC52YWx1ZT1kYXRhMSk6Y29tbWFuZD09PXdtLk1JRElfQ0hBTk5FTF9NRVNTQUdFUy5jaGFubmVsYWZ0ZXJ0b3VjaD8oZXZlbnQudHlwZT1cImNoYW5uZWxhZnRlcnRvdWNoXCIsZXZlbnQudmFsdWU9ZGF0YTEvMTI3KTpjb21tYW5kPT09d20uTUlESV9DSEFOTkVMX01FU1NBR0VTLnBpdGNoYmVuZD8oZXZlbnQudHlwZT1cInBpdGNoYmVuZFwiLGV2ZW50LnZhbHVlPSgoZGF0YTI8PDcpK2RhdGExLTgxOTIpLzgxOTIpOmV2ZW50LnR5cGU9XCJ1bmtub3duY2hhbm5lbG1lc3NhZ2VcIix0aGlzLl91c2VySGFuZGxlcnMuY2hhbm5lbFtldmVudC50eXBlXSYmdGhpcy5fdXNlckhhbmRsZXJzLmNoYW5uZWxbZXZlbnQudHlwZV1bY2hhbm5lbF0mJnRoaXMuX3VzZXJIYW5kbGVycy5jaGFubmVsW2V2ZW50LnR5cGVdW2NoYW5uZWxdLmZvckVhY2goZnVuY3Rpb24oY2FsbGJhY2spe2NhbGxiYWNrKGV2ZW50KX0pfSxJbnB1dC5wcm90b3R5cGUuZ2V0Q2NOYW1lQnlOdW1iZXI9ZnVuY3Rpb24obnVtYmVyKXtpZighKDA8PShudW1iZXI9TWF0aC5mbG9vcihudW1iZXIpKSYmbnVtYmVyPD0xMTkpKXRocm93IG5ldyBSYW5nZUVycm9yKFwiVGhlIGNvbnRyb2wgY2hhbmdlIG51bWJlciBtdXN0IGJlIGJldHdlZW4gMCBhbmQgMTE5LlwiKTtmb3IodmFyIGNjIGluIHdtLk1JRElfQ09OVFJPTF9DSEFOR0VfTUVTU0FHRVMpaWYod20uTUlESV9DT05UUk9MX0NIQU5HRV9NRVNTQUdFUy5oYXNPd25Qcm9wZXJ0eShjYykmJm51bWJlcj09PXdtLk1JRElfQ09OVFJPTF9DSEFOR0VfTUVTU0FHRVNbY2NdKXJldHVybiBjY30sSW5wdXQucHJvdG90eXBlLmdldENoYW5uZWxNb2RlQnlOdW1iZXI9ZnVuY3Rpb24obnVtYmVyKXtpZighKDEyMDw9KG51bWJlcj1NYXRoLmZsb29yKG51bWJlcikpJiZzdGF0dXM8PTEyNykpdGhyb3cgbmV3IFJhbmdlRXJyb3IoXCJUaGUgY29udHJvbCBjaGFuZ2UgbnVtYmVyIG11c3QgYmUgYmV0d2VlbiAxMjAgYW5kIDEyNy5cIik7Zm9yKHZhciBjbSBpbiB3bS5NSURJX0NIQU5ORUxfTU9ERV9NRVNTQUdFUylpZih3bS5NSURJX0NIQU5ORUxfTU9ERV9NRVNTQUdFUy5oYXNPd25Qcm9wZXJ0eShjbSkmJm51bWJlcj09PXdtLk1JRElfQ0hBTk5FTF9NT0RFX01FU1NBR0VTW2NtXSlyZXR1cm4gY219LElucHV0LnByb3RvdHlwZS5fcGFyc2VTeXN0ZW1FdmVudD1mdW5jdGlvbihlKXt2YXIgY29tbWFuZD1lLmRhdGFbMF0sZXZlbnQ9e3RhcmdldDp0aGlzLGRhdGE6ZS5kYXRhLHRpbWVzdGFtcDplLnRpbWVTdGFtcH07Y29tbWFuZD09PXdtLk1JRElfU1lTVEVNX01FU1NBR0VTLnN5c2V4P2V2ZW50LnR5cGU9XCJzeXNleFwiOmNvbW1hbmQ9PT13bS5NSURJX1NZU1RFTV9NRVNTQUdFUy50aW1lY29kZT9ldmVudC50eXBlPVwidGltZWNvZGVcIjpjb21tYW5kPT09d20uTUlESV9TWVNURU1fTUVTU0FHRVMuc29uZ3Bvc2l0aW9uP2V2ZW50LnR5cGU9XCJzb25ncG9zaXRpb25cIjpjb21tYW5kPT09d20uTUlESV9TWVNURU1fTUVTU0FHRVMuc29uZ3NlbGVjdD8oZXZlbnQudHlwZT1cInNvbmdzZWxlY3RcIixldmVudC5zb25nPWUuZGF0YVsxXSk6Y29tbWFuZD09PXdtLk1JRElfU1lTVEVNX01FU1NBR0VTLnR1bmluZ3JlcXVlc3Q/ZXZlbnQudHlwZT1cInR1bmluZ3JlcXVlc3RcIjpjb21tYW5kPT09d20uTUlESV9TWVNURU1fTUVTU0FHRVMuY2xvY2s/ZXZlbnQudHlwZT1cImNsb2NrXCI6Y29tbWFuZD09PXdtLk1JRElfU1lTVEVNX01FU1NBR0VTLnN0YXJ0P2V2ZW50LnR5cGU9XCJzdGFydFwiOmNvbW1hbmQ9PT13bS5NSURJX1NZU1RFTV9NRVNTQUdFUy5jb250aW51ZT9ldmVudC50eXBlPVwiY29udGludWVcIjpjb21tYW5kPT09d20uTUlESV9TWVNURU1fTUVTU0FHRVMuc3RvcD9ldmVudC50eXBlPVwic3RvcFwiOmNvbW1hbmQ9PT13bS5NSURJX1NZU1RFTV9NRVNTQUdFUy5hY3RpdmVzZW5zaW5nP2V2ZW50LnR5cGU9XCJhY3RpdmVzZW5zaW5nXCI6Y29tbWFuZD09PXdtLk1JRElfU1lTVEVNX01FU1NBR0VTLnJlc2V0P2V2ZW50LnR5cGU9XCJyZXNldFwiOmV2ZW50LnR5cGU9XCJ1bmtub3duc3lzdGVtbWVzc2FnZVwiLHRoaXMuX3VzZXJIYW5kbGVycy5zeXN0ZW1bZXZlbnQudHlwZV0mJnRoaXMuX3VzZXJIYW5kbGVycy5zeXN0ZW1bZXZlbnQudHlwZV0uZm9yRWFjaChmdW5jdGlvbihjYWxsYmFjayl7Y2FsbGJhY2soZXZlbnQpfSl9LE91dHB1dC5wcm90b3R5cGUuc2VuZD1mdW5jdGlvbihzdGF0dXMsZGF0YSx0aW1lc3RhbXApe2lmKCEoMTI4PD1zdGF0dXMmJnN0YXR1czw9MjU1KSl0aHJvdyBuZXcgUmFuZ2VFcnJvcihcIlRoZSBzdGF0dXMgYnl0ZSBtdXN0IGJlIGFuIGludGVnZXIgYmV0d2VlbiAxMjggKDB4ODApIGFuZCAyNTUgKDB4RkYpLlwiKTt2b2lkIDA9PT1kYXRhJiYoZGF0YT1bXSksQXJyYXkuaXNBcnJheShkYXRhKXx8KGRhdGE9W2RhdGFdKTt2YXIgbWVzc2FnZT1bXTtyZXR1cm4gZGF0YS5mb3JFYWNoKGZ1bmN0aW9uKGl0ZW0pe3ZhciBwYXJzZWQ9TWF0aC5mbG9vcihpdGVtKTtpZighKDA8PXBhcnNlZCYmcGFyc2VkPD0yNTUpKXRocm93IG5ldyBSYW5nZUVycm9yKFwiRGF0YSBieXRlcyBtdXN0IGJlIGludGVnZXJzIGJldHdlZW4gMCAoMHgwMCkgYW5kIDI1NSAoMHhGRikuXCIpO21lc3NhZ2UucHVzaChwYXJzZWQpfSksdGhpcy5fbWlkaU91dHB1dC5zZW5kKFtzdGF0dXNdLmNvbmNhdChtZXNzYWdlKSxwYXJzZUZsb2F0KHRpbWVzdGFtcCl8fDApLHRoaXN9LE91dHB1dC5wcm90b3R5cGUuc2VuZFN5c2V4PWZ1bmN0aW9uKG1hbnVmYWN0dXJlcixkYXRhLG9wdGlvbnMpe2lmKCF3bS5zeXNleEVuYWJsZWQpdGhyb3cgbmV3IEVycm9yKFwiU3lzZXggbWVzc2FnZSBzdXBwb3J0IG11c3QgZmlyc3QgYmUgYWN0aXZhdGVkLlwiKTtyZXR1cm4gb3B0aW9ucz1vcHRpb25zfHx7fSxtYW51ZmFjdHVyZXI9W10uY29uY2F0KG1hbnVmYWN0dXJlciksZGF0YS5mb3JFYWNoKGZ1bmN0aW9uKGl0ZW0pe2lmKGl0ZW08MHx8MTI3PGl0ZW0pdGhyb3cgbmV3IFJhbmdlRXJyb3IoXCJUaGUgZGF0YSBieXRlcyBvZiBhIHN5c2V4IG1lc3NhZ2UgbXVzdCBiZSBpbnRlZ2VycyBiZXR3ZWVuIDAgKDB4MDApIGFuZCAxMjcgKDB4N0YpLlwiKX0pLGRhdGE9bWFudWZhY3R1cmVyLmNvbmNhdChkYXRhLHdtLk1JRElfU1lTVEVNX01FU1NBR0VTLnN5c2V4ZW5kKSx0aGlzLnNlbmQod20uTUlESV9TWVNURU1fTUVTU0FHRVMuc3lzZXgsZGF0YSx0aGlzLl9wYXJzZVRpbWVQYXJhbWV0ZXIob3B0aW9ucy50aW1lKSksdGhpc30sT3V0cHV0LnByb3RvdHlwZS5zZW5kVGltZWNvZGVRdWFydGVyRnJhbWU9ZnVuY3Rpb24odmFsdWUsb3B0aW9ucyl7cmV0dXJuIG9wdGlvbnM9b3B0aW9uc3x8e30sdGhpcy5zZW5kKHdtLk1JRElfU1lTVEVNX01FU1NBR0VTLnRpbWVjb2RlLHZhbHVlLHRoaXMuX3BhcnNlVGltZVBhcmFtZXRlcihvcHRpb25zLnRpbWUpKSx0aGlzfSxPdXRwdXQucHJvdG90eXBlLnNlbmRTb25nUG9zaXRpb249ZnVuY3Rpb24odmFsdWUsb3B0aW9ucyl7b3B0aW9ucz1vcHRpb25zfHx7fTt2YXIgbXNiPSh2YWx1ZT1NYXRoLmZsb29yKHZhbHVlKXx8MCk+PjcmMTI3LGxzYj0xMjcmdmFsdWU7cmV0dXJuIHRoaXMuc2VuZCh3bS5NSURJX1NZU1RFTV9NRVNTQUdFUy5zb25ncG9zaXRpb24sW21zYixsc2JdLHRoaXMuX3BhcnNlVGltZVBhcmFtZXRlcihvcHRpb25zLnRpbWUpKSx0aGlzfSxPdXRwdXQucHJvdG90eXBlLnNlbmRTb25nU2VsZWN0PWZ1bmN0aW9uKHZhbHVlLG9wdGlvbnMpe2lmKG9wdGlvbnM9b3B0aW9uc3x8e30sISgwPD0odmFsdWU9TWF0aC5mbG9vcih2YWx1ZSkpJiZ2YWx1ZTw9MTI3KSl0aHJvdyBuZXcgUmFuZ2VFcnJvcihcIlRoZSBzb25nIG51bWJlciBtdXN0IGJlIGJldHdlZW4gMCBhbmQgMTI3LlwiKTtyZXR1cm4gdGhpcy5zZW5kKHdtLk1JRElfU1lTVEVNX01FU1NBR0VTLnNvbmdzZWxlY3QsW3ZhbHVlXSx0aGlzLl9wYXJzZVRpbWVQYXJhbWV0ZXIob3B0aW9ucy50aW1lKSksdGhpc30sT3V0cHV0LnByb3RvdHlwZS5zZW5kVHVuaW5nUmVxdWVzdD1mdW5jdGlvbihvcHRpb25zKXtyZXR1cm4gb3B0aW9ucz1vcHRpb25zfHx7fSx0aGlzLnNlbmQod20uTUlESV9TWVNURU1fTUVTU0FHRVMudHVuaW5ncmVxdWVzdCx2b2lkIDAsdGhpcy5fcGFyc2VUaW1lUGFyYW1ldGVyKG9wdGlvbnMudGltZSkpLHRoaXN9LE91dHB1dC5wcm90b3R5cGUuc2VuZENsb2NrPWZ1bmN0aW9uKG9wdGlvbnMpe3JldHVybiBvcHRpb25zPW9wdGlvbnN8fHt9LHRoaXMuc2VuZCh3bS5NSURJX1NZU1RFTV9NRVNTQUdFUy5jbG9jayx2b2lkIDAsdGhpcy5fcGFyc2VUaW1lUGFyYW1ldGVyKG9wdGlvbnMudGltZSkpLHRoaXN9LE91dHB1dC5wcm90b3R5cGUuc2VuZFN0YXJ0PWZ1bmN0aW9uKG9wdGlvbnMpe3JldHVybiBvcHRpb25zPW9wdGlvbnN8fHt9LHRoaXMuc2VuZCh3bS5NSURJX1NZU1RFTV9NRVNTQUdFUy5zdGFydCx2b2lkIDAsdGhpcy5fcGFyc2VUaW1lUGFyYW1ldGVyKG9wdGlvbnMudGltZSkpLHRoaXN9LE91dHB1dC5wcm90b3R5cGUuc2VuZENvbnRpbnVlPWZ1bmN0aW9uKG9wdGlvbnMpe3JldHVybiBvcHRpb25zPW9wdGlvbnN8fHt9LHRoaXMuc2VuZCh3bS5NSURJX1NZU1RFTV9NRVNTQUdFUy5jb250aW51ZSx2b2lkIDAsdGhpcy5fcGFyc2VUaW1lUGFyYW1ldGVyKG9wdGlvbnMudGltZSkpLHRoaXN9LE91dHB1dC5wcm90b3R5cGUuc2VuZFN0b3A9ZnVuY3Rpb24ob3B0aW9ucyl7cmV0dXJuIG9wdGlvbnM9b3B0aW9uc3x8e30sdGhpcy5zZW5kKHdtLk1JRElfU1lTVEVNX01FU1NBR0VTLnN0b3Asdm9pZCAwLHRoaXMuX3BhcnNlVGltZVBhcmFtZXRlcihvcHRpb25zLnRpbWUpKSx0aGlzfSxPdXRwdXQucHJvdG90eXBlLnNlbmRBY3RpdmVTZW5zaW5nPWZ1bmN0aW9uKG9wdGlvbnMpe3JldHVybiBvcHRpb25zPW9wdGlvbnN8fHt9LHRoaXMuc2VuZCh3bS5NSURJX1NZU1RFTV9NRVNTQUdFUy5hY3RpdmVzZW5zaW5nLFtdLHRoaXMuX3BhcnNlVGltZVBhcmFtZXRlcihvcHRpb25zLnRpbWUpKSx0aGlzfSxPdXRwdXQucHJvdG90eXBlLnNlbmRSZXNldD1mdW5jdGlvbihvcHRpb25zKXtyZXR1cm4gb3B0aW9ucz1vcHRpb25zfHx7fSx0aGlzLnNlbmQod20uTUlESV9TWVNURU1fTUVTU0FHRVMucmVzZXQsdm9pZCAwLHRoaXMuX3BhcnNlVGltZVBhcmFtZXRlcihvcHRpb25zLnRpbWUpKSx0aGlzfSxPdXRwdXQucHJvdG90eXBlLnN0b3BOb3RlPWZ1bmN0aW9uKG5vdGUsY2hhbm5lbCxvcHRpb25zKXtpZihcImFsbFwiPT09bm90ZSlyZXR1cm4gdGhpcy5zZW5kQ2hhbm5lbE1vZGUoXCJhbGxub3Rlc29mZlwiLDAsY2hhbm5lbCxvcHRpb25zKTt2YXIgblZlbG9jaXR5PTY0O3JldHVybihvcHRpb25zPW9wdGlvbnN8fHt9KS5yYXdWZWxvY2l0eT8haXNOYU4ob3B0aW9ucy52ZWxvY2l0eSkmJjA8PW9wdGlvbnMudmVsb2NpdHkmJm9wdGlvbnMudmVsb2NpdHk8PTEyNyYmKG5WZWxvY2l0eT1vcHRpb25zLnZlbG9jaXR5KTohaXNOYU4ob3B0aW9ucy52ZWxvY2l0eSkmJjA8PW9wdGlvbnMudmVsb2NpdHkmJm9wdGlvbnMudmVsb2NpdHk8PTEmJihuVmVsb2NpdHk9MTI3Km9wdGlvbnMudmVsb2NpdHkpLHRoaXMuX2NvbnZlcnROb3RlVG9BcnJheShub3RlKS5mb3JFYWNoKGZ1bmN0aW9uKGl0ZW0pe3dtLnRvTUlESUNoYW5uZWxzKGNoYW5uZWwpLmZvckVhY2goZnVuY3Rpb24oY2gpe3RoaXMuc2VuZCgod20uTUlESV9DSEFOTkVMX01FU1NBR0VTLm5vdGVvZmY8PDQpKyhjaC0xKSxbaXRlbSxNYXRoLnJvdW5kKG5WZWxvY2l0eSldLHRoaXMuX3BhcnNlVGltZVBhcmFtZXRlcihvcHRpb25zLnRpbWUpKX0uYmluZCh0aGlzKSl9LmJpbmQodGhpcykpLHRoaXN9LE91dHB1dC5wcm90b3R5cGUucGxheU5vdGU9ZnVuY3Rpb24obm90ZSxjaGFubmVsLG9wdGlvbnMpe3ZhciB0aW1lLG5WZWxvY2l0eT02NDtpZigob3B0aW9ucz1vcHRpb25zfHx7fSkucmF3VmVsb2NpdHk/IWlzTmFOKG9wdGlvbnMudmVsb2NpdHkpJiYwPD1vcHRpb25zLnZlbG9jaXR5JiZvcHRpb25zLnZlbG9jaXR5PD0xMjcmJihuVmVsb2NpdHk9b3B0aW9ucy52ZWxvY2l0eSk6IWlzTmFOKG9wdGlvbnMudmVsb2NpdHkpJiYwPD1vcHRpb25zLnZlbG9jaXR5JiZvcHRpb25zLnZlbG9jaXR5PD0xJiYoblZlbG9jaXR5PTEyNypvcHRpb25zLnZlbG9jaXR5KSx0aW1lPXRoaXMuX3BhcnNlVGltZVBhcmFtZXRlcihvcHRpb25zLnRpbWUpLHRoaXMuX2NvbnZlcnROb3RlVG9BcnJheShub3RlKS5mb3JFYWNoKGZ1bmN0aW9uKGl0ZW0pe3dtLnRvTUlESUNoYW5uZWxzKGNoYW5uZWwpLmZvckVhY2goZnVuY3Rpb24oY2gpe3RoaXMuc2VuZCgod20uTUlESV9DSEFOTkVMX01FU1NBR0VTLm5vdGVvbjw8NCkrKGNoLTEpLFtpdGVtLE1hdGgucm91bmQoblZlbG9jaXR5KV0sdGltZSl9LmJpbmQodGhpcykpfS5iaW5kKHRoaXMpKSwhaXNOYU4ob3B0aW9ucy5kdXJhdGlvbikpe29wdGlvbnMuZHVyYXRpb248PTAmJihvcHRpb25zLmR1cmF0aW9uPTApO3ZhciBuUmVsZWFzZT02NDtvcHRpb25zLnJhd1ZlbG9jaXR5PyFpc05hTihvcHRpb25zLnJlbGVhc2UpJiYwPD1vcHRpb25zLnJlbGVhc2UmJm9wdGlvbnMucmVsZWFzZTw9MTI3JiYoblJlbGVhc2U9b3B0aW9ucy5yZWxlYXNlKTohaXNOYU4ob3B0aW9ucy5yZWxlYXNlKSYmMDw9b3B0aW9ucy5yZWxlYXNlJiZvcHRpb25zLnJlbGVhc2U8PTEmJihuUmVsZWFzZT0xMjcqb3B0aW9ucy5yZWxlYXNlKSx0aGlzLl9jb252ZXJ0Tm90ZVRvQXJyYXkobm90ZSkuZm9yRWFjaChmdW5jdGlvbihpdGVtKXt3bS50b01JRElDaGFubmVscyhjaGFubmVsKS5mb3JFYWNoKGZ1bmN0aW9uKGNoKXt0aGlzLnNlbmQoKHdtLk1JRElfQ0hBTk5FTF9NRVNTQUdFUy5ub3Rlb2ZmPDw0KSsoY2gtMSksW2l0ZW0sTWF0aC5yb3VuZChuUmVsZWFzZSldLCh0aW1lfHx3bS50aW1lKStvcHRpb25zLmR1cmF0aW9uKX0uYmluZCh0aGlzKSl9LmJpbmQodGhpcykpfXJldHVybiB0aGlzfSxPdXRwdXQucHJvdG90eXBlLnNlbmRLZXlBZnRlcnRvdWNoPWZ1bmN0aW9uKG5vdGUsY2hhbm5lbCxwcmVzc3VyZSxvcHRpb25zKXt2YXIgdGhhdD10aGlzO2lmKG9wdGlvbnM9b3B0aW9uc3x8e30sY2hhbm5lbDwxfHwxNjxjaGFubmVsKXRocm93IG5ldyBSYW5nZUVycm9yKFwiVGhlIGNoYW5uZWwgbXVzdCBiZSBiZXR3ZWVuIDEgYW5kIDE2LlwiKTsoaXNOYU4ocHJlc3N1cmUpfHxwcmVzc3VyZTwwfHwxPHByZXNzdXJlKSYmKHByZXNzdXJlPS41KTt2YXIgblByZXNzdXJlPU1hdGgucm91bmQoMTI3KnByZXNzdXJlKTtyZXR1cm4gdGhpcy5fY29udmVydE5vdGVUb0FycmF5KG5vdGUpLmZvckVhY2goZnVuY3Rpb24oaXRlbSl7d20udG9NSURJQ2hhbm5lbHMoY2hhbm5lbCkuZm9yRWFjaChmdW5jdGlvbihjaCl7dGhhdC5zZW5kKCh3bS5NSURJX0NIQU5ORUxfTUVTU0FHRVMua2V5YWZ0ZXJ0b3VjaDw8NCkrKGNoLTEpLFtpdGVtLG5QcmVzc3VyZV0sdGhhdC5fcGFyc2VUaW1lUGFyYW1ldGVyKG9wdGlvbnMudGltZSkpfSl9KSx0aGlzfSxPdXRwdXQucHJvdG90eXBlLnNlbmRDb250cm9sQ2hhbmdlPWZ1bmN0aW9uKGNvbnRyb2xsZXIsdmFsdWUsY2hhbm5lbCxvcHRpb25zKXtpZihvcHRpb25zPW9wdGlvbnN8fHt9LFwic3RyaW5nXCI9PXR5cGVvZiBjb250cm9sbGVyKXtpZih2b2lkIDA9PT0oY29udHJvbGxlcj13bS5NSURJX0NPTlRST0xfQ0hBTkdFX01FU1NBR0VTW2NvbnRyb2xsZXJdKSl0aHJvdyBuZXcgVHlwZUVycm9yKFwiSW52YWxpZCBjb250cm9sbGVyIG5hbWUuXCIpfWVsc2UgaWYoISgwPD0oY29udHJvbGxlcj1NYXRoLmZsb29yKGNvbnRyb2xsZXIpKSYmY29udHJvbGxlcjw9MTE5KSl0aHJvdyBuZXcgUmFuZ2VFcnJvcihcIkNvbnRyb2xsZXIgbnVtYmVycyBtdXN0IGJlIGJldHdlZW4gMCBhbmQgMTE5LlwiKTtpZighKDA8PSh2YWx1ZT1NYXRoLmZsb29yKHZhbHVlKXx8MCkmJnZhbHVlPD0xMjcpKXRocm93IG5ldyBSYW5nZUVycm9yKFwiQ29udHJvbGxlciB2YWx1ZSBtdXN0IGJlIGJldHdlZW4gMCBhbmQgMTI3LlwiKTtyZXR1cm4gd20udG9NSURJQ2hhbm5lbHMoY2hhbm5lbCkuZm9yRWFjaChmdW5jdGlvbihjaCl7dGhpcy5zZW5kKCh3bS5NSURJX0NIQU5ORUxfTUVTU0FHRVMuY29udHJvbGNoYW5nZTw8NCkrKGNoLTEpLFtjb250cm9sbGVyLHZhbHVlXSx0aGlzLl9wYXJzZVRpbWVQYXJhbWV0ZXIob3B0aW9ucy50aW1lKSl9LmJpbmQodGhpcykpLHRoaXN9LE91dHB1dC5wcm90b3R5cGUuX3NlbGVjdFJlZ2lzdGVyZWRQYXJhbWV0ZXI9ZnVuY3Rpb24ocGFyYW1ldGVyLGNoYW5uZWwsdGltZSl7dmFyIHRoYXQ9dGhpcztpZihwYXJhbWV0ZXJbMF09TWF0aC5mbG9vcihwYXJhbWV0ZXJbMF0pLCEoMDw9cGFyYW1ldGVyWzBdJiZwYXJhbWV0ZXJbMF08PTEyNykpdGhyb3cgbmV3IFJhbmdlRXJyb3IoXCJUaGUgY29udHJvbDY1IHZhbHVlIG11c3QgYmUgYmV0d2VlbiAwIGFuZCAxMjdcIik7aWYocGFyYW1ldGVyWzFdPU1hdGguZmxvb3IocGFyYW1ldGVyWzFdKSwhKDA8PXBhcmFtZXRlclsxXSYmcGFyYW1ldGVyWzFdPD0xMjcpKXRocm93IG5ldyBSYW5nZUVycm9yKFwiVGhlIGNvbnRyb2w2NCB2YWx1ZSBtdXN0IGJlIGJldHdlZW4gMCBhbmQgMTI3XCIpO3JldHVybiB3bS50b01JRElDaGFubmVscyhjaGFubmVsKS5mb3JFYWNoKGZ1bmN0aW9uKCl7dGhhdC5zZW5kQ29udHJvbENoYW5nZSgxMDEscGFyYW1ldGVyWzBdLGNoYW5uZWwse3RpbWU6dGltZX0pLHRoYXQuc2VuZENvbnRyb2xDaGFuZ2UoMTAwLHBhcmFtZXRlclsxXSxjaGFubmVsLHt0aW1lOnRpbWV9KX0pLHRoaXN9LE91dHB1dC5wcm90b3R5cGUuX3NlbGVjdE5vblJlZ2lzdGVyZWRQYXJhbWV0ZXI9ZnVuY3Rpb24ocGFyYW1ldGVyLGNoYW5uZWwsdGltZSl7dmFyIHRoYXQ9dGhpcztpZihwYXJhbWV0ZXJbMF09TWF0aC5mbG9vcihwYXJhbWV0ZXJbMF0pLCEoMDw9cGFyYW1ldGVyWzBdJiZwYXJhbWV0ZXJbMF08PTEyNykpdGhyb3cgbmV3IFJhbmdlRXJyb3IoXCJUaGUgY29udHJvbDYzIHZhbHVlIG11c3QgYmUgYmV0d2VlbiAwIGFuZCAxMjdcIik7aWYocGFyYW1ldGVyWzFdPU1hdGguZmxvb3IocGFyYW1ldGVyWzFdKSwhKDA8PXBhcmFtZXRlclsxXSYmcGFyYW1ldGVyWzFdPD0xMjcpKXRocm93IG5ldyBSYW5nZUVycm9yKFwiVGhlIGNvbnRyb2w2MiB2YWx1ZSBtdXN0IGJlIGJldHdlZW4gMCBhbmQgMTI3XCIpO3JldHVybiB3bS50b01JRElDaGFubmVscyhjaGFubmVsKS5mb3JFYWNoKGZ1bmN0aW9uKCl7dGhhdC5zZW5kQ29udHJvbENoYW5nZSg5OSxwYXJhbWV0ZXJbMF0sY2hhbm5lbCx7dGltZTp0aW1lfSksdGhhdC5zZW5kQ29udHJvbENoYW5nZSg5OCxwYXJhbWV0ZXJbMV0sY2hhbm5lbCx7dGltZTp0aW1lfSl9KSx0aGlzfSxPdXRwdXQucHJvdG90eXBlLl9zZXRDdXJyZW50UmVnaXN0ZXJlZFBhcmFtZXRlcj1mdW5jdGlvbihkYXRhLGNoYW5uZWwsdGltZSl7dmFyIHRoYXQ9dGhpcztpZigoZGF0YT1bXS5jb25jYXQoZGF0YSkpWzBdPU1hdGguZmxvb3IoZGF0YVswXSksISgwPD1kYXRhWzBdJiZkYXRhWzBdPD0xMjcpKXRocm93IG5ldyBSYW5nZUVycm9yKFwiVGhlIG1zYiB2YWx1ZSBtdXN0IGJlIGJldHdlZW4gMCBhbmQgMTI3XCIpO3JldHVybiB3bS50b01JRElDaGFubmVscyhjaGFubmVsKS5mb3JFYWNoKGZ1bmN0aW9uKCl7dGhhdC5zZW5kQ29udHJvbENoYW5nZSg2LGRhdGFbMF0sY2hhbm5lbCx7dGltZTp0aW1lfSl9KSxkYXRhWzFdPU1hdGguZmxvb3IoZGF0YVsxXSksMDw9ZGF0YVsxXSYmZGF0YVsxXTw9MTI3JiZ3bS50b01JRElDaGFubmVscyhjaGFubmVsKS5mb3JFYWNoKGZ1bmN0aW9uKCl7dGhhdC5zZW5kQ29udHJvbENoYW5nZSgzOCxkYXRhWzFdLGNoYW5uZWwse3RpbWU6dGltZX0pfSksdGhpc30sT3V0cHV0LnByb3RvdHlwZS5fZGVzZWxlY3RSZWdpc3RlcmVkUGFyYW1ldGVyPWZ1bmN0aW9uKGNoYW5uZWwsdGltZSl7dmFyIHRoYXQ9dGhpcztyZXR1cm4gd20udG9NSURJQ2hhbm5lbHMoY2hhbm5lbCkuZm9yRWFjaChmdW5jdGlvbigpe3RoYXQuc2VuZENvbnRyb2xDaGFuZ2UoMTAxLDEyNyxjaGFubmVsLHt0aW1lOnRpbWV9KSx0aGF0LnNlbmRDb250cm9sQ2hhbmdlKDEwMCwxMjcsY2hhbm5lbCx7dGltZTp0aW1lfSl9KSx0aGlzfSxPdXRwdXQucHJvdG90eXBlLnNldFJlZ2lzdGVyZWRQYXJhbWV0ZXI9ZnVuY3Rpb24ocGFyYW1ldGVyLGRhdGEsY2hhbm5lbCxvcHRpb25zKXt2YXIgdGhhdD10aGlzO2lmKG9wdGlvbnM9b3B0aW9uc3x8e30sIUFycmF5LmlzQXJyYXkocGFyYW1ldGVyKSl7aWYoIXdtLk1JRElfUkVHSVNURVJFRF9QQVJBTUVURVJbcGFyYW1ldGVyXSl0aHJvdyBuZXcgRXJyb3IoXCJUaGUgc3BlY2lmaWVkIHBhcmFtZXRlciBpcyBub3QgYXZhaWxhYmxlLlwiKTtwYXJhbWV0ZXI9d20uTUlESV9SRUdJU1RFUkVEX1BBUkFNRVRFUltwYXJhbWV0ZXJdfXJldHVybiB3bS50b01JRElDaGFubmVscyhjaGFubmVsKS5mb3JFYWNoKGZ1bmN0aW9uKCl7dGhhdC5fc2VsZWN0UmVnaXN0ZXJlZFBhcmFtZXRlcihwYXJhbWV0ZXIsY2hhbm5lbCxvcHRpb25zLnRpbWUpLHRoYXQuX3NldEN1cnJlbnRSZWdpc3RlcmVkUGFyYW1ldGVyKGRhdGEsY2hhbm5lbCxvcHRpb25zLnRpbWUpLHRoYXQuX2Rlc2VsZWN0UmVnaXN0ZXJlZFBhcmFtZXRlcihjaGFubmVsLG9wdGlvbnMudGltZSl9KSx0aGlzfSxPdXRwdXQucHJvdG90eXBlLnNldE5vblJlZ2lzdGVyZWRQYXJhbWV0ZXI9ZnVuY3Rpb24ocGFyYW1ldGVyLGRhdGEsY2hhbm5lbCxvcHRpb25zKXt2YXIgdGhhdD10aGlzO2lmKG9wdGlvbnM9b3B0aW9uc3x8e30sISgwPD1wYXJhbWV0ZXJbMF0mJnBhcmFtZXRlclswXTw9MTI3JiYwPD1wYXJhbWV0ZXJbMV0mJnBhcmFtZXRlclsxXTw9MTI3KSl0aHJvdyBuZXcgRXJyb3IoXCJQb3NpdGlvbiAwIGFuZCAxIG9mIHRoZSAyLXBvc2l0aW9uIHBhcmFtZXRlciBhcnJheSBtdXN0IGJvdGggYmUgYmV0d2VlbiAwIGFuZCAxMjcuXCIpO3JldHVybiBkYXRhPVtdLmNvbmNhdChkYXRhKSx3bS50b01JRElDaGFubmVscyhjaGFubmVsKS5mb3JFYWNoKGZ1bmN0aW9uKCl7dGhhdC5fc2VsZWN0Tm9uUmVnaXN0ZXJlZFBhcmFtZXRlcihwYXJhbWV0ZXIsY2hhbm5lbCxvcHRpb25zLnRpbWUpLHRoYXQuX3NldEN1cnJlbnRSZWdpc3RlcmVkUGFyYW1ldGVyKGRhdGEsY2hhbm5lbCxvcHRpb25zLnRpbWUpLHRoYXQuX2Rlc2VsZWN0UmVnaXN0ZXJlZFBhcmFtZXRlcihjaGFubmVsLG9wdGlvbnMudGltZSl9KSx0aGlzfSxPdXRwdXQucHJvdG90eXBlLmluY3JlbWVudFJlZ2lzdGVyZWRQYXJhbWV0ZXI9ZnVuY3Rpb24ocGFyYW1ldGVyLGNoYW5uZWwsb3B0aW9ucyl7dmFyIHRoYXQ9dGhpcztpZihvcHRpb25zPW9wdGlvbnN8fHt9LCFBcnJheS5pc0FycmF5KHBhcmFtZXRlcikpe2lmKCF3bS5NSURJX1JFR0lTVEVSRURfUEFSQU1FVEVSW3BhcmFtZXRlcl0pdGhyb3cgbmV3IEVycm9yKFwiVGhlIHNwZWNpZmllZCBwYXJhbWV0ZXIgaXMgbm90IGF2YWlsYWJsZS5cIik7cGFyYW1ldGVyPXdtLk1JRElfUkVHSVNURVJFRF9QQVJBTUVURVJbcGFyYW1ldGVyXX1yZXR1cm4gd20udG9NSURJQ2hhbm5lbHMoY2hhbm5lbCkuZm9yRWFjaChmdW5jdGlvbigpe3RoYXQuX3NlbGVjdFJlZ2lzdGVyZWRQYXJhbWV0ZXIocGFyYW1ldGVyLGNoYW5uZWwsb3B0aW9ucy50aW1lKSx0aGF0LnNlbmRDb250cm9sQ2hhbmdlKDk2LDAsY2hhbm5lbCx7dGltZTpvcHRpb25zLnRpbWV9KSx0aGF0Ll9kZXNlbGVjdFJlZ2lzdGVyZWRQYXJhbWV0ZXIoY2hhbm5lbCxvcHRpb25zLnRpbWUpfSksdGhpc30sT3V0cHV0LnByb3RvdHlwZS5kZWNyZW1lbnRSZWdpc3RlcmVkUGFyYW1ldGVyPWZ1bmN0aW9uKHBhcmFtZXRlcixjaGFubmVsLG9wdGlvbnMpe2lmKG9wdGlvbnM9b3B0aW9uc3x8e30sIUFycmF5LmlzQXJyYXkocGFyYW1ldGVyKSl7aWYoIXdtLk1JRElfUkVHSVNURVJFRF9QQVJBTUVURVJbcGFyYW1ldGVyXSl0aHJvdyBuZXcgVHlwZUVycm9yKFwiVGhlIHNwZWNpZmllZCBwYXJhbWV0ZXIgaXMgbm90IGF2YWlsYWJsZS5cIik7cGFyYW1ldGVyPXdtLk1JRElfUkVHSVNURVJFRF9QQVJBTUVURVJbcGFyYW1ldGVyXX1yZXR1cm4gd20udG9NSURJQ2hhbm5lbHMoY2hhbm5lbCkuZm9yRWFjaChmdW5jdGlvbigpe3RoaXMuX3NlbGVjdFJlZ2lzdGVyZWRQYXJhbWV0ZXIocGFyYW1ldGVyLGNoYW5uZWwsb3B0aW9ucy50aW1lKSx0aGlzLnNlbmRDb250cm9sQ2hhbmdlKDk3LDAsY2hhbm5lbCx7dGltZTpvcHRpb25zLnRpbWV9KSx0aGlzLl9kZXNlbGVjdFJlZ2lzdGVyZWRQYXJhbWV0ZXIoY2hhbm5lbCxvcHRpb25zLnRpbWUpfS5iaW5kKHRoaXMpKSx0aGlzfSxPdXRwdXQucHJvdG90eXBlLnNldFBpdGNoQmVuZFJhbmdlPWZ1bmN0aW9uKHNlbWl0b25lcyxjZW50cyxjaGFubmVsLG9wdGlvbnMpe3ZhciB0aGF0PXRoaXM7aWYob3B0aW9ucz1vcHRpb25zfHx7fSwhKDA8PShzZW1pdG9uZXM9TWF0aC5mbG9vcihzZW1pdG9uZXMpfHwwKSYmc2VtaXRvbmVzPD0xMjcpKXRocm93IG5ldyBSYW5nZUVycm9yKFwiVGhlIHNlbWl0b25lcyB2YWx1ZSBtdXN0IGJlIGJldHdlZW4gMCBhbmQgMTI3XCIpO2lmKCEoMDw9KGNlbnRzPU1hdGguZmxvb3IoY2VudHMpfHwwKSYmY2VudHM8PTEyNykpdGhyb3cgbmV3IFJhbmdlRXJyb3IoXCJUaGUgY2VudHMgdmFsdWUgbXVzdCBiZSBiZXR3ZWVuIDAgYW5kIDEyN1wiKTtyZXR1cm4gd20udG9NSURJQ2hhbm5lbHMoY2hhbm5lbCkuZm9yRWFjaChmdW5jdGlvbigpe3RoYXQuc2V0UmVnaXN0ZXJlZFBhcmFtZXRlcihcInBpdGNoYmVuZHJhbmdlXCIsW3NlbWl0b25lcyxjZW50c10sY2hhbm5lbCx7dGltZTpvcHRpb25zLnRpbWV9KX0pLHRoaXN9LE91dHB1dC5wcm90b3R5cGUuc2V0TW9kdWxhdGlvblJhbmdlPWZ1bmN0aW9uKHNlbWl0b25lcyxjZW50cyxjaGFubmVsLG9wdGlvbnMpe3ZhciB0aGF0PXRoaXM7aWYob3B0aW9ucz1vcHRpb25zfHx7fSwhKDA8PShzZW1pdG9uZXM9TWF0aC5mbG9vcihzZW1pdG9uZXMpfHwwKSYmc2VtaXRvbmVzPD0xMjcpKXRocm93IG5ldyBSYW5nZUVycm9yKFwiVGhlIHNlbWl0b25lcyB2YWx1ZSBtdXN0IGJlIGJldHdlZW4gMCBhbmQgMTI3XCIpO2lmKCEoMDw9KGNlbnRzPU1hdGguZmxvb3IoY2VudHMpfHwwKSYmY2VudHM8PTEyNykpdGhyb3cgbmV3IFJhbmdlRXJyb3IoXCJUaGUgY2VudHMgdmFsdWUgbXVzdCBiZSBiZXR3ZWVuIDAgYW5kIDEyN1wiKTtyZXR1cm4gd20udG9NSURJQ2hhbm5lbHMoY2hhbm5lbCkuZm9yRWFjaChmdW5jdGlvbigpe3RoYXQuc2V0UmVnaXN0ZXJlZFBhcmFtZXRlcihcIm1vZHVsYXRpb25yYW5nZVwiLFtzZW1pdG9uZXMsY2VudHNdLGNoYW5uZWwse3RpbWU6b3B0aW9ucy50aW1lfSl9KSx0aGlzfSxPdXRwdXQucHJvdG90eXBlLnNldE1hc3RlclR1bmluZz1mdW5jdGlvbih2YWx1ZSxjaGFubmVsLG9wdGlvbnMpe3ZhciB0aGF0PXRoaXM7aWYob3B0aW9ucz1vcHRpb25zfHx7fSwodmFsdWU9cGFyc2VGbG9hdCh2YWx1ZSl8fDApPD0tNjV8fDY0PD12YWx1ZSl0aHJvdyBuZXcgUmFuZ2VFcnJvcihcIlRoZSB2YWx1ZSBtdXN0IGJlIGEgZGVjaW1hbCBudW1iZXIgbGFyZ2VyIHRoYW4gLTY1IGFuZCBzbWFsbGVyIHRoYW4gNjQuXCIpO3ZhciBjb2Fyc2U9TWF0aC5mbG9vcih2YWx1ZSkrNjQsZmluZT12YWx1ZS1NYXRoLmZsb29yKHZhbHVlKSxtc2I9KGZpbmU9TWF0aC5yb3VuZCgoZmluZSsxKS8yKjE2MzgzKSk+PjcmMTI3LGxzYj0xMjcmZmluZTtyZXR1cm4gd20udG9NSURJQ2hhbm5lbHMoY2hhbm5lbCkuZm9yRWFjaChmdW5jdGlvbigpe3RoYXQuc2V0UmVnaXN0ZXJlZFBhcmFtZXRlcihcImNoYW5uZWxjb2Fyc2V0dW5pbmdcIixjb2Fyc2UsY2hhbm5lbCx7dGltZTpvcHRpb25zLnRpbWV9KSx0aGF0LnNldFJlZ2lzdGVyZWRQYXJhbWV0ZXIoXCJjaGFubmVsZmluZXR1bmluZ1wiLFttc2IsbHNiXSxjaGFubmVsLHt0aW1lOm9wdGlvbnMudGltZX0pfSksdGhpc30sT3V0cHV0LnByb3RvdHlwZS5zZXRUdW5pbmdQcm9ncmFtPWZ1bmN0aW9uKHZhbHVlLGNoYW5uZWwsb3B0aW9ucyl7dmFyIHRoYXQ9dGhpcztpZihvcHRpb25zPW9wdGlvbnN8fHt9LCEoMDw9KHZhbHVlPU1hdGguZmxvb3IodmFsdWUpKSYmdmFsdWU8PTEyNykpdGhyb3cgbmV3IFJhbmdlRXJyb3IoXCJUaGUgcHJvZ3JhbSB2YWx1ZSBtdXN0IGJlIGJldHdlZW4gMCBhbmQgMTI3XCIpO3JldHVybiB3bS50b01JRElDaGFubmVscyhjaGFubmVsKS5mb3JFYWNoKGZ1bmN0aW9uKCl7dGhhdC5zZXRSZWdpc3RlcmVkUGFyYW1ldGVyKFwidHVuaW5ncHJvZ3JhbVwiLHZhbHVlLGNoYW5uZWwse3RpbWU6b3B0aW9ucy50aW1lfSl9KSx0aGlzfSxPdXRwdXQucHJvdG90eXBlLnNldFR1bmluZ0Jhbms9ZnVuY3Rpb24odmFsdWUsY2hhbm5lbCxvcHRpb25zKXt2YXIgdGhhdD10aGlzO2lmKG9wdGlvbnM9b3B0aW9uc3x8e30sISgwPD0odmFsdWU9TWF0aC5mbG9vcih2YWx1ZSl8fDApJiZ2YWx1ZTw9MTI3KSl0aHJvdyBuZXcgUmFuZ2VFcnJvcihcIlRoZSBiYW5rIHZhbHVlIG11c3QgYmUgYmV0d2VlbiAwIGFuZCAxMjdcIik7cmV0dXJuIHdtLnRvTUlESUNoYW5uZWxzKGNoYW5uZWwpLmZvckVhY2goZnVuY3Rpb24oKXt0aGF0LnNldFJlZ2lzdGVyZWRQYXJhbWV0ZXIoXCJ0dW5pbmdiYW5rXCIsdmFsdWUsY2hhbm5lbCx7dGltZTpvcHRpb25zLnRpbWV9KX0pLHRoaXN9LE91dHB1dC5wcm90b3R5cGUuc2VuZENoYW5uZWxNb2RlPWZ1bmN0aW9uKGNvbW1hbmQsdmFsdWUsY2hhbm5lbCxvcHRpb25zKXtpZihvcHRpb25zPW9wdGlvbnN8fHt9LFwic3RyaW5nXCI9PXR5cGVvZiBjb21tYW5kKXtpZighKGNvbW1hbmQ9d20uTUlESV9DSEFOTkVMX01PREVfTUVTU0FHRVNbY29tbWFuZF0pKXRocm93IG5ldyBUeXBlRXJyb3IoXCJJbnZhbGlkIGNoYW5uZWwgbW9kZSBtZXNzYWdlIG5hbWUuXCIpfWVsc2UgaWYoISgxMjA8PShjb21tYW5kPU1hdGguZmxvb3IoY29tbWFuZCkpJiZjb21tYW5kPD0xMjcpKXRocm93IG5ldyBSYW5nZUVycm9yKFwiQ2hhbm5lbCBtb2RlIG51bWVyaWNhbCBpZGVudGlmaWVycyBtdXN0IGJlIGJldHdlZW4gMTIwIGFuZCAxMjcuXCIpO2lmKCh2YWx1ZT1NYXRoLmZsb29yKHZhbHVlKXx8MCk8MHx8MTI3PHZhbHVlKXRocm93IG5ldyBSYW5nZUVycm9yKFwiVmFsdWUgbXVzdCBiZSBhbiBpbnRlZ2VyIGJldHdlZW4gMCBhbmQgMTI3LlwiKTtyZXR1cm4gd20udG9NSURJQ2hhbm5lbHMoY2hhbm5lbCkuZm9yRWFjaChmdW5jdGlvbihjaCl7dGhpcy5zZW5kKCh3bS5NSURJX0NIQU5ORUxfTUVTU0FHRVMuY2hhbm5lbG1vZGU8PDQpKyhjaC0xKSxbY29tbWFuZCx2YWx1ZV0sdGhpcy5fcGFyc2VUaW1lUGFyYW1ldGVyKG9wdGlvbnMudGltZSkpfS5iaW5kKHRoaXMpKSx0aGlzfSxPdXRwdXQucHJvdG90eXBlLnNlbmRQcm9ncmFtQ2hhbmdlPWZ1bmN0aW9uKHByb2dyYW0sY2hhbm5lbCxvcHRpb25zKXt2YXIgdGhhdD10aGlzO2lmKG9wdGlvbnM9b3B0aW9uc3x8e30scHJvZ3JhbT1NYXRoLmZsb29yKHByb2dyYW0pLGlzTmFOKHByb2dyYW0pfHxwcm9ncmFtPDB8fDEyNzxwcm9ncmFtKXRocm93IG5ldyBSYW5nZUVycm9yKFwiUHJvZ3JhbSBudW1iZXJzIG11c3QgYmUgYmV0d2VlbiAwIGFuZCAxMjcuXCIpO3JldHVybiB3bS50b01JRElDaGFubmVscyhjaGFubmVsKS5mb3JFYWNoKGZ1bmN0aW9uKGNoKXt0aGF0LnNlbmQoKHdtLk1JRElfQ0hBTk5FTF9NRVNTQUdFUy5wcm9ncmFtY2hhbmdlPDw0KSsoY2gtMSksW3Byb2dyYW1dLHRoYXQuX3BhcnNlVGltZVBhcmFtZXRlcihvcHRpb25zLnRpbWUpKX0pLHRoaXN9LE91dHB1dC5wcm90b3R5cGUuc2VuZENoYW5uZWxBZnRlcnRvdWNoPWZ1bmN0aW9uKHByZXNzdXJlLGNoYW5uZWwsb3B0aW9ucyl7dmFyIHRoYXQ9dGhpcztvcHRpb25zPW9wdGlvbnN8fHt9LHByZXNzdXJlPXBhcnNlRmxvYXQocHJlc3N1cmUpLChpc05hTihwcmVzc3VyZSl8fHByZXNzdXJlPDB8fDE8cHJlc3N1cmUpJiYocHJlc3N1cmU9LjUpO3ZhciBuUHJlc3N1cmU9TWF0aC5yb3VuZCgxMjcqcHJlc3N1cmUpO3JldHVybiB3bS50b01JRElDaGFubmVscyhjaGFubmVsKS5mb3JFYWNoKGZ1bmN0aW9uKGNoKXt0aGF0LnNlbmQoKHdtLk1JRElfQ0hBTk5FTF9NRVNTQUdFUy5jaGFubmVsYWZ0ZXJ0b3VjaDw8NCkrKGNoLTEpLFtuUHJlc3N1cmVdLHRoYXQuX3BhcnNlVGltZVBhcmFtZXRlcihvcHRpb25zLnRpbWUpKX0pLHRoaXN9LE91dHB1dC5wcm90b3R5cGUuc2VuZFBpdGNoQmVuZD1mdW5jdGlvbihiZW5kLGNoYW5uZWwsb3B0aW9ucyl7dmFyIHRoYXQ9dGhpcztpZihvcHRpb25zPW9wdGlvbnN8fHt9LGlzTmFOKGJlbmQpfHxiZW5kPC0xfHwxPGJlbmQpdGhyb3cgbmV3IFJhbmdlRXJyb3IoXCJQaXRjaCBiZW5kIHZhbHVlIG11c3QgYmUgYmV0d2VlbiAtMSBhbmQgMS5cIik7dmFyIG5MZXZlbD1NYXRoLnJvdW5kKChiZW5kKzEpLzIqMTYzODMpLG1zYj1uTGV2ZWw+PjcmMTI3LGxzYj0xMjcmbkxldmVsO3JldHVybiB3bS50b01JRElDaGFubmVscyhjaGFubmVsKS5mb3JFYWNoKGZ1bmN0aW9uKGNoKXt0aGF0LnNlbmQoKHdtLk1JRElfQ0hBTk5FTF9NRVNTQUdFUy5waXRjaGJlbmQ8PDQpKyhjaC0xKSxbbHNiLG1zYl0sdGhhdC5fcGFyc2VUaW1lUGFyYW1ldGVyKG9wdGlvbnMudGltZSkpfSksdGhpc30sT3V0cHV0LnByb3RvdHlwZS5fcGFyc2VUaW1lUGFyYW1ldGVyPWZ1bmN0aW9uKHRpbWUpe3ZhciB2YWx1ZSxwYXJzZWQ9cGFyc2VGbG9hdCh0aW1lKTtyZXR1cm5cInN0cmluZ1wiPT10eXBlb2YgdGltZSYmXCIrXCI9PT10aW1lLnN1YnN0cmluZygwLDEpP3BhcnNlZCYmMDxwYXJzZWQmJih2YWx1ZT13bS50aW1lK3BhcnNlZCk6cGFyc2VkPndtLnRpbWUmJih2YWx1ZT1wYXJzZWQpLHZhbHVlfSxPdXRwdXQucHJvdG90eXBlLl9jb252ZXJ0Tm90ZVRvQXJyYXk9ZnVuY3Rpb24obm90ZSl7dmFyIG5vdGVzPVtdO3JldHVybiBBcnJheS5pc0FycmF5KG5vdGUpfHwobm90ZT1bbm90ZV0pLG5vdGUuZm9yRWFjaChmdW5jdGlvbihpdGVtKXtub3Rlcy5wdXNoKHdtLmd1ZXNzTm90ZU51bWJlcihpdGVtKSl9KSxub3Rlc30sXCJmdW5jdGlvblwiPT10eXBlb2YgZGVmaW5lJiZcIm9iamVjdFwiPT10eXBlb2YgZGVmaW5lLmFtZD9kZWZpbmUoW10sZnVuY3Rpb24oKXtyZXR1cm4gd219KTpcInVuZGVmaW5lZFwiIT10eXBlb2YgbW9kdWxlJiZtb2R1bGUuZXhwb3J0cz9tb2R1bGUuZXhwb3J0cz13bTpzY29wZS5XZWJNaWRpfHwoc2NvcGUuV2ViTWlkaT13bSl9KHRoaXMpOyIsInZhciBnO1xuXG4vLyBUaGlzIHdvcmtzIGluIG5vbi1zdHJpY3QgbW9kZVxuZyA9IChmdW5jdGlvbigpIHtcblx0cmV0dXJuIHRoaXM7XG59KSgpO1xuXG50cnkge1xuXHQvLyBUaGlzIHdvcmtzIGlmIGV2YWwgaXMgYWxsb3dlZCAoc2VlIENTUClcblx0ZyA9IGcgfHwgbmV3IEZ1bmN0aW9uKFwicmV0dXJuIHRoaXNcIikoKTtcbn0gY2F0Y2ggKGUpIHtcblx0Ly8gVGhpcyB3b3JrcyBpZiB0aGUgd2luZG93IHJlZmVyZW5jZSBpcyBhdmFpbGFibGVcblx0aWYgKHR5cGVvZiB3aW5kb3cgPT09IFwib2JqZWN0XCIpIGcgPSB3aW5kb3c7XG59XG5cbi8vIGcgY2FuIHN0aWxsIGJlIHVuZGVmaW5lZCwgYnV0IG5vdGhpbmcgdG8gZG8gYWJvdXQgaXQuLi5cbi8vIFdlIHJldHVybiB1bmRlZmluZWQsIGluc3RlYWQgb2Ygbm90aGluZyBoZXJlLCBzbyBpdCdzXG4vLyBlYXNpZXIgdG8gaGFuZGxlIHRoaXMgY2FzZS4gaWYoIWdsb2JhbCkgeyAuLi59XG5cbm1vZHVsZS5leHBvcnRzID0gZztcbiIsIm1vZHVsZS5leHBvcnRzID0ge1xyXG5cclxuICBpc0FycmF5OiBmdW5jdGlvbih2YWx1ZSkge1xyXG4gICAgaWYgKEFycmF5LmlzQXJyYXkpIHtcclxuICAgICAgcmV0dXJuIEFycmF5LmlzQXJyYXkodmFsdWUpO1xyXG4gICAgfVxyXG4gICAgLy8gZmFsbGJhY2sgZm9yIG9sZGVyIGJyb3dzZXJzIGxpa2UgIElFIDhcclxuICAgIHJldHVybiBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwoIHZhbHVlICkgPT09ICdbb2JqZWN0IEFycmF5XSc7XHJcbiAgfVxyXG5cclxufTtcclxuIiwiLypqc2xpbnQgbm9kZTp0cnVlICovXHJcblxyXG52YXIgeG1sMmpzID0gcmVxdWlyZSgnLi94bWwyanMnKTtcclxudmFyIHhtbDJqc29uID0gcmVxdWlyZSgnLi94bWwyanNvbicpO1xyXG52YXIganMyeG1sID0gcmVxdWlyZSgnLi9qczJ4bWwnKTtcclxudmFyIGpzb24yeG1sID0gcmVxdWlyZSgnLi9qc29uMnhtbCcpO1xyXG5cclxubW9kdWxlLmV4cG9ydHMgPSB7XHJcbiAgeG1sMmpzOiB4bWwyanMsXHJcbiAgeG1sMmpzb246IHhtbDJqc29uLFxyXG4gIGpzMnhtbDoganMyeG1sLFxyXG4gIGpzb24yeG1sOiBqc29uMnhtbFxyXG59O1xyXG4iLCJ2YXIgaGVscGVyID0gcmVxdWlyZSgnLi9vcHRpb25zLWhlbHBlcicpO1xudmFyIGlzQXJyYXkgPSByZXF1aXJlKCcuL2FycmF5LWhlbHBlcicpLmlzQXJyYXk7XG5cbnZhciBjdXJyZW50RWxlbWVudCwgY3VycmVudEVsZW1lbnROYW1lO1xuXG5mdW5jdGlvbiB2YWxpZGF0ZU9wdGlvbnModXNlck9wdGlvbnMpIHtcbiAgdmFyIG9wdGlvbnMgPSBoZWxwZXIuY29weU9wdGlvbnModXNlck9wdGlvbnMpO1xuICBoZWxwZXIuZW5zdXJlRmxhZ0V4aXN0cygnaWdub3JlRGVjbGFyYXRpb24nLCBvcHRpb25zKTtcbiAgaGVscGVyLmVuc3VyZUZsYWdFeGlzdHMoJ2lnbm9yZUluc3RydWN0aW9uJywgb3B0aW9ucyk7XG4gIGhlbHBlci5lbnN1cmVGbGFnRXhpc3RzKCdpZ25vcmVBdHRyaWJ1dGVzJywgb3B0aW9ucyk7XG4gIGhlbHBlci5lbnN1cmVGbGFnRXhpc3RzKCdpZ25vcmVUZXh0Jywgb3B0aW9ucyk7XG4gIGhlbHBlci5lbnN1cmVGbGFnRXhpc3RzKCdpZ25vcmVDb21tZW50Jywgb3B0aW9ucyk7XG4gIGhlbHBlci5lbnN1cmVGbGFnRXhpc3RzKCdpZ25vcmVDZGF0YScsIG9wdGlvbnMpO1xuICBoZWxwZXIuZW5zdXJlRmxhZ0V4aXN0cygnaWdub3JlRG9jdHlwZScsIG9wdGlvbnMpO1xuICBoZWxwZXIuZW5zdXJlRmxhZ0V4aXN0cygnY29tcGFjdCcsIG9wdGlvbnMpO1xuICBoZWxwZXIuZW5zdXJlRmxhZ0V4aXN0cygnaW5kZW50VGV4dCcsIG9wdGlvbnMpO1xuICBoZWxwZXIuZW5zdXJlRmxhZ0V4aXN0cygnaW5kZW50Q2RhdGEnLCBvcHRpb25zKTtcbiAgaGVscGVyLmVuc3VyZUZsYWdFeGlzdHMoJ2luZGVudEF0dHJpYnV0ZXMnLCBvcHRpb25zKTtcbiAgaGVscGVyLmVuc3VyZUZsYWdFeGlzdHMoJ2luZGVudEluc3RydWN0aW9uJywgb3B0aW9ucyk7XG4gIGhlbHBlci5lbnN1cmVGbGFnRXhpc3RzKCdmdWxsVGFnRW1wdHlFbGVtZW50Jywgb3B0aW9ucyk7XG4gIGhlbHBlci5lbnN1cmVGbGFnRXhpc3RzKCdub1F1b3Rlc0Zvck5hdGl2ZUF0dHJpYnV0ZXMnLCBvcHRpb25zKTtcbiAgaGVscGVyLmVuc3VyZVNwYWNlc0V4aXN0cyhvcHRpb25zKTtcbiAgaWYgKHR5cGVvZiBvcHRpb25zLnNwYWNlcyA9PT0gJ251bWJlcicpIHtcbiAgICBvcHRpb25zLnNwYWNlcyA9IEFycmF5KG9wdGlvbnMuc3BhY2VzICsgMSkuam9pbignICcpO1xuICB9XG4gIGhlbHBlci5lbnN1cmVLZXlFeGlzdHMoJ2RlY2xhcmF0aW9uJywgb3B0aW9ucyk7XG4gIGhlbHBlci5lbnN1cmVLZXlFeGlzdHMoJ2luc3RydWN0aW9uJywgb3B0aW9ucyk7XG4gIGhlbHBlci5lbnN1cmVLZXlFeGlzdHMoJ2F0dHJpYnV0ZXMnLCBvcHRpb25zKTtcbiAgaGVscGVyLmVuc3VyZUtleUV4aXN0cygndGV4dCcsIG9wdGlvbnMpO1xuICBoZWxwZXIuZW5zdXJlS2V5RXhpc3RzKCdjb21tZW50Jywgb3B0aW9ucyk7XG4gIGhlbHBlci5lbnN1cmVLZXlFeGlzdHMoJ2NkYXRhJywgb3B0aW9ucyk7XG4gIGhlbHBlci5lbnN1cmVLZXlFeGlzdHMoJ2RvY3R5cGUnLCBvcHRpb25zKTtcbiAgaGVscGVyLmVuc3VyZUtleUV4aXN0cygndHlwZScsIG9wdGlvbnMpO1xuICBoZWxwZXIuZW5zdXJlS2V5RXhpc3RzKCduYW1lJywgb3B0aW9ucyk7XG4gIGhlbHBlci5lbnN1cmVLZXlFeGlzdHMoJ2VsZW1lbnRzJywgb3B0aW9ucyk7XG4gIGhlbHBlci5jaGVja0ZuRXhpc3RzKCdkb2N0eXBlJywgb3B0aW9ucyk7XG4gIGhlbHBlci5jaGVja0ZuRXhpc3RzKCdpbnN0cnVjdGlvbicsIG9wdGlvbnMpO1xuICBoZWxwZXIuY2hlY2tGbkV4aXN0cygnY2RhdGEnLCBvcHRpb25zKTtcbiAgaGVscGVyLmNoZWNrRm5FeGlzdHMoJ2NvbW1lbnQnLCBvcHRpb25zKTtcbiAgaGVscGVyLmNoZWNrRm5FeGlzdHMoJ3RleHQnLCBvcHRpb25zKTtcbiAgaGVscGVyLmNoZWNrRm5FeGlzdHMoJ2luc3RydWN0aW9uTmFtZScsIG9wdGlvbnMpO1xuICBoZWxwZXIuY2hlY2tGbkV4aXN0cygnZWxlbWVudE5hbWUnLCBvcHRpb25zKTtcbiAgaGVscGVyLmNoZWNrRm5FeGlzdHMoJ2F0dHJpYnV0ZU5hbWUnLCBvcHRpb25zKTtcbiAgaGVscGVyLmNoZWNrRm5FeGlzdHMoJ2F0dHJpYnV0ZVZhbHVlJywgb3B0aW9ucyk7XG4gIGhlbHBlci5jaGVja0ZuRXhpc3RzKCdhdHRyaWJ1dGVzJywgb3B0aW9ucyk7XG4gIGhlbHBlci5jaGVja0ZuRXhpc3RzKCdmdWxsVGFnRW1wdHlFbGVtZW50Jywgb3B0aW9ucyk7XG4gIHJldHVybiBvcHRpb25zO1xufVxuXG5mdW5jdGlvbiB3cml0ZUluZGVudGF0aW9uKG9wdGlvbnMsIGRlcHRoLCBmaXJzdExpbmUpIHtcbiAgcmV0dXJuICghZmlyc3RMaW5lICYmIG9wdGlvbnMuc3BhY2VzID8gJ1xcbicgOiAnJykgKyBBcnJheShkZXB0aCArIDEpLmpvaW4ob3B0aW9ucy5zcGFjZXMpO1xufVxuXG5mdW5jdGlvbiB3cml0ZUF0dHJpYnV0ZXMoYXR0cmlidXRlcywgb3B0aW9ucywgZGVwdGgpIHtcbiAgaWYgKG9wdGlvbnMuaWdub3JlQXR0cmlidXRlcykge1xuICAgIHJldHVybiAnJztcbiAgfVxuICBpZiAoJ2F0dHJpYnV0ZXNGbicgaW4gb3B0aW9ucykge1xuICAgIGF0dHJpYnV0ZXMgPSBvcHRpb25zLmF0dHJpYnV0ZXNGbihhdHRyaWJ1dGVzLCBjdXJyZW50RWxlbWVudE5hbWUsIGN1cnJlbnRFbGVtZW50KTtcbiAgfVxuICB2YXIga2V5LCBhdHRyLCBhdHRyTmFtZSwgcXVvdGUsIHJlc3VsdCA9IFtdO1xuICBmb3IgKGtleSBpbiBhdHRyaWJ1dGVzKSB7XG4gICAgaWYgKGF0dHJpYnV0ZXMuaGFzT3duUHJvcGVydHkoa2V5KSAmJiBhdHRyaWJ1dGVzW2tleV0gIT09IG51bGwgJiYgYXR0cmlidXRlc1trZXldICE9PSB1bmRlZmluZWQpIHtcbiAgICAgIHF1b3RlID0gb3B0aW9ucy5ub1F1b3Rlc0Zvck5hdGl2ZUF0dHJpYnV0ZXMgJiYgdHlwZW9mIGF0dHJpYnV0ZXNba2V5XSAhPT0gJ3N0cmluZycgPyAnJyA6ICdcIic7XG4gICAgICBhdHRyID0gJycgKyBhdHRyaWJ1dGVzW2tleV07IC8vIGVuc3VyZSBudW1iZXIgYW5kIGJvb2xlYW4gYXJlIGNvbnZlcnRlZCB0byBTdHJpbmdcbiAgICAgIGF0dHIgPSBhdHRyLnJlcGxhY2UoL1wiL2csICcmcXVvdDsnKTtcbiAgICAgIGF0dHJOYW1lID0gJ2F0dHJpYnV0ZU5hbWVGbicgaW4gb3B0aW9ucyA/IG9wdGlvbnMuYXR0cmlidXRlTmFtZUZuKGtleSwgYXR0ciwgY3VycmVudEVsZW1lbnROYW1lLCBjdXJyZW50RWxlbWVudCkgOiBrZXk7XG4gICAgICByZXN1bHQucHVzaCgob3B0aW9ucy5zcGFjZXMgJiYgb3B0aW9ucy5pbmRlbnRBdHRyaWJ1dGVzPyB3cml0ZUluZGVudGF0aW9uKG9wdGlvbnMsIGRlcHRoKzEsIGZhbHNlKSA6ICcgJykpO1xuICAgICAgcmVzdWx0LnB1c2goYXR0ck5hbWUgKyAnPScgKyBxdW90ZSArICgnYXR0cmlidXRlVmFsdWVGbicgaW4gb3B0aW9ucyA/IG9wdGlvbnMuYXR0cmlidXRlVmFsdWVGbihhdHRyLCBrZXksIGN1cnJlbnRFbGVtZW50TmFtZSwgY3VycmVudEVsZW1lbnQpIDogYXR0cikgKyBxdW90ZSk7XG4gICAgfVxuICB9XG4gIGlmIChhdHRyaWJ1dGVzICYmIE9iamVjdC5rZXlzKGF0dHJpYnV0ZXMpLmxlbmd0aCAmJiBvcHRpb25zLnNwYWNlcyAmJiBvcHRpb25zLmluZGVudEF0dHJpYnV0ZXMpIHtcbiAgICByZXN1bHQucHVzaCh3cml0ZUluZGVudGF0aW9uKG9wdGlvbnMsIGRlcHRoLCBmYWxzZSkpO1xuICB9XG4gIHJldHVybiByZXN1bHQuam9pbignJyk7XG59XG5cbmZ1bmN0aW9uIHdyaXRlRGVjbGFyYXRpb24oZGVjbGFyYXRpb24sIG9wdGlvbnMsIGRlcHRoKSB7XG4gIGN1cnJlbnRFbGVtZW50ID0gZGVjbGFyYXRpb247XG4gIGN1cnJlbnRFbGVtZW50TmFtZSA9ICd4bWwnO1xuICByZXR1cm4gb3B0aW9ucy5pZ25vcmVEZWNsYXJhdGlvbiA/ICcnIDogICc8PycgKyAneG1sJyArIHdyaXRlQXR0cmlidXRlcyhkZWNsYXJhdGlvbltvcHRpb25zLmF0dHJpYnV0ZXNLZXldLCBvcHRpb25zLCBkZXB0aCkgKyAnPz4nO1xufVxuXG5mdW5jdGlvbiB3cml0ZUluc3RydWN0aW9uKGluc3RydWN0aW9uLCBvcHRpb25zLCBkZXB0aCkge1xuICBpZiAob3B0aW9ucy5pZ25vcmVJbnN0cnVjdGlvbikge1xuICAgIHJldHVybiAnJztcbiAgfVxuICB2YXIga2V5O1xuICBmb3IgKGtleSBpbiBpbnN0cnVjdGlvbikge1xuICAgIGlmIChpbnN0cnVjdGlvbi5oYXNPd25Qcm9wZXJ0eShrZXkpKSB7XG4gICAgICBicmVhaztcbiAgICB9XG4gIH1cbiAgdmFyIGluc3RydWN0aW9uTmFtZSA9ICdpbnN0cnVjdGlvbk5hbWVGbicgaW4gb3B0aW9ucyA/IG9wdGlvbnMuaW5zdHJ1Y3Rpb25OYW1lRm4oa2V5LCBpbnN0cnVjdGlvbltrZXldLCBjdXJyZW50RWxlbWVudE5hbWUsIGN1cnJlbnRFbGVtZW50KSA6IGtleTtcbiAgaWYgKHR5cGVvZiBpbnN0cnVjdGlvbltrZXldID09PSAnb2JqZWN0Jykge1xuICAgIGN1cnJlbnRFbGVtZW50ID0gaW5zdHJ1Y3Rpb247XG4gICAgY3VycmVudEVsZW1lbnROYW1lID0gaW5zdHJ1Y3Rpb25OYW1lO1xuICAgIHJldHVybiAnPD8nICsgaW5zdHJ1Y3Rpb25OYW1lICsgd3JpdGVBdHRyaWJ1dGVzKGluc3RydWN0aW9uW2tleV1bb3B0aW9ucy5hdHRyaWJ1dGVzS2V5XSwgb3B0aW9ucywgZGVwdGgpICsgJz8+JztcbiAgfSBlbHNlIHtcbiAgICB2YXIgaW5zdHJ1Y3Rpb25WYWx1ZSA9IGluc3RydWN0aW9uW2tleV0gPyBpbnN0cnVjdGlvbltrZXldIDogJyc7XG4gICAgaWYgKCdpbnN0cnVjdGlvbkZuJyBpbiBvcHRpb25zKSBpbnN0cnVjdGlvblZhbHVlID0gb3B0aW9ucy5pbnN0cnVjdGlvbkZuKGluc3RydWN0aW9uVmFsdWUsIGtleSwgY3VycmVudEVsZW1lbnROYW1lLCBjdXJyZW50RWxlbWVudCk7XG4gICAgcmV0dXJuICc8PycgKyBpbnN0cnVjdGlvbk5hbWUgKyAoaW5zdHJ1Y3Rpb25WYWx1ZSA/ICcgJyArIGluc3RydWN0aW9uVmFsdWUgOiAnJykgKyAnPz4nO1xuICB9XG59XG5cbmZ1bmN0aW9uIHdyaXRlQ29tbWVudChjb21tZW50LCBvcHRpb25zKSB7XG4gIHJldHVybiBvcHRpb25zLmlnbm9yZUNvbW1lbnQgPyAnJyA6ICc8IS0tJyArICgnY29tbWVudEZuJyBpbiBvcHRpb25zID8gb3B0aW9ucy5jb21tZW50Rm4oY29tbWVudCwgY3VycmVudEVsZW1lbnROYW1lLCBjdXJyZW50RWxlbWVudCkgOiBjb21tZW50KSArICctLT4nO1xufVxuXG5mdW5jdGlvbiB3cml0ZUNkYXRhKGNkYXRhLCBvcHRpb25zKSB7XG4gIHJldHVybiBvcHRpb25zLmlnbm9yZUNkYXRhID8gJycgOiAnPCFbQ0RBVEFbJyArICgnY2RhdGFGbicgaW4gb3B0aW9ucyA/IG9wdGlvbnMuY2RhdGFGbihjZGF0YSwgY3VycmVudEVsZW1lbnROYW1lLCBjdXJyZW50RWxlbWVudCkgOiBjZGF0YS5yZXBsYWNlKCddXT4nLCAnXV1dXT48IVtDREFUQVs+JykpICsgJ11dPic7XG59XG5cbmZ1bmN0aW9uIHdyaXRlRG9jdHlwZShkb2N0eXBlLCBvcHRpb25zKSB7XG4gIHJldHVybiBvcHRpb25zLmlnbm9yZURvY3R5cGUgPyAnJyA6ICc8IURPQ1RZUEUgJyArICgnZG9jdHlwZUZuJyBpbiBvcHRpb25zID8gb3B0aW9ucy5kb2N0eXBlRm4oZG9jdHlwZSwgY3VycmVudEVsZW1lbnROYW1lLCBjdXJyZW50RWxlbWVudCkgOiBkb2N0eXBlKSArICc+Jztcbn1cblxuZnVuY3Rpb24gd3JpdGVUZXh0KHRleHQsIG9wdGlvbnMpIHtcbiAgaWYgKG9wdGlvbnMuaWdub3JlVGV4dCkgcmV0dXJuICcnO1xuICB0ZXh0ID0gJycgKyB0ZXh0OyAvLyBlbnN1cmUgTnVtYmVyIGFuZCBCb29sZWFuIGFyZSBjb252ZXJ0ZWQgdG8gU3RyaW5nXG4gIHRleHQgPSB0ZXh0LnJlcGxhY2UoLyZhbXA7L2csICcmJyk7IC8vIGRlc2FuaXRpemUgdG8gYXZvaWQgZG91YmxlIHNhbml0aXphdGlvblxuICB0ZXh0ID0gdGV4dC5yZXBsYWNlKC8mL2csICcmYW1wOycpLnJlcGxhY2UoLzwvZywgJyZsdDsnKS5yZXBsYWNlKC8+L2csICcmZ3Q7Jyk7XG4gIHJldHVybiAndGV4dEZuJyBpbiBvcHRpb25zID8gb3B0aW9ucy50ZXh0Rm4odGV4dCwgY3VycmVudEVsZW1lbnROYW1lLCBjdXJyZW50RWxlbWVudCkgOiB0ZXh0O1xufVxuXG5mdW5jdGlvbiBoYXNDb250ZW50KGVsZW1lbnQsIG9wdGlvbnMpIHtcbiAgdmFyIGk7XG4gIGlmIChlbGVtZW50LmVsZW1lbnRzICYmIGVsZW1lbnQuZWxlbWVudHMubGVuZ3RoKSB7XG4gICAgZm9yIChpID0gMDsgaSA8IGVsZW1lbnQuZWxlbWVudHMubGVuZ3RoOyArK2kpIHtcbiAgICAgIHN3aXRjaCAoZWxlbWVudC5lbGVtZW50c1tpXVtvcHRpb25zLnR5cGVLZXldKSB7XG4gICAgICBjYXNlICd0ZXh0JzpcbiAgICAgICAgaWYgKG9wdGlvbnMuaW5kZW50VGV4dCkge1xuICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIGJyZWFrOyAvLyBza2lwIHRvIG5leHQga2V5XG4gICAgICBjYXNlICdjZGF0YSc6XG4gICAgICAgIGlmIChvcHRpb25zLmluZGVudENkYXRhKSB7XG4gICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgYnJlYWs7IC8vIHNraXAgdG8gbmV4dCBrZXlcbiAgICAgIGNhc2UgJ2luc3RydWN0aW9uJzpcbiAgICAgICAgaWYgKG9wdGlvbnMuaW5kZW50SW5zdHJ1Y3Rpb24pIHtcbiAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICBicmVhazsgLy8gc2tpcCB0byBuZXh0IGtleVxuICAgICAgY2FzZSAnZG9jdHlwZSc6XG4gICAgICBjYXNlICdjb21tZW50JzpcbiAgICAgIGNhc2UgJ2VsZW1lbnQnOlxuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgfVxuICAgIH1cbiAgfVxuICByZXR1cm4gZmFsc2U7XG59XG5cbmZ1bmN0aW9uIHdyaXRlRWxlbWVudChlbGVtZW50LCBvcHRpb25zLCBkZXB0aCkge1xuICBjdXJyZW50RWxlbWVudCA9IGVsZW1lbnQ7XG4gIGN1cnJlbnRFbGVtZW50TmFtZSA9IGVsZW1lbnQubmFtZTtcbiAgdmFyIHhtbCA9IFtdLCBlbGVtZW50TmFtZSA9ICdlbGVtZW50TmFtZUZuJyBpbiBvcHRpb25zID8gb3B0aW9ucy5lbGVtZW50TmFtZUZuKGVsZW1lbnQubmFtZSwgZWxlbWVudCkgOiBlbGVtZW50Lm5hbWU7XG4gIHhtbC5wdXNoKCc8JyArIGVsZW1lbnROYW1lKTtcbiAgaWYgKGVsZW1lbnRbb3B0aW9ucy5hdHRyaWJ1dGVzS2V5XSkge1xuICAgIHhtbC5wdXNoKHdyaXRlQXR0cmlidXRlcyhlbGVtZW50W29wdGlvbnMuYXR0cmlidXRlc0tleV0sIG9wdGlvbnMsIGRlcHRoKSk7XG4gIH1cbiAgdmFyIHdpdGhDbG9zaW5nVGFnID0gZWxlbWVudFtvcHRpb25zLmVsZW1lbnRzS2V5XSAmJiBlbGVtZW50W29wdGlvbnMuZWxlbWVudHNLZXldLmxlbmd0aCB8fCBlbGVtZW50W29wdGlvbnMuYXR0cmlidXRlc0tleV0gJiYgZWxlbWVudFtvcHRpb25zLmF0dHJpYnV0ZXNLZXldWyd4bWw6c3BhY2UnXSA9PT0gJ3ByZXNlcnZlJztcbiAgaWYgKCF3aXRoQ2xvc2luZ1RhZykge1xuICAgIGlmICgnZnVsbFRhZ0VtcHR5RWxlbWVudEZuJyBpbiBvcHRpb25zKSB7XG4gICAgICB3aXRoQ2xvc2luZ1RhZyA9IG9wdGlvbnMuZnVsbFRhZ0VtcHR5RWxlbWVudEZuKGVsZW1lbnQubmFtZSwgZWxlbWVudCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHdpdGhDbG9zaW5nVGFnID0gb3B0aW9ucy5mdWxsVGFnRW1wdHlFbGVtZW50O1xuICAgIH1cbiAgfVxuICBpZiAod2l0aENsb3NpbmdUYWcpIHtcbiAgICB4bWwucHVzaCgnPicpO1xuICAgIGlmIChlbGVtZW50W29wdGlvbnMuZWxlbWVudHNLZXldICYmIGVsZW1lbnRbb3B0aW9ucy5lbGVtZW50c0tleV0ubGVuZ3RoKSB7XG4gICAgICB4bWwucHVzaCh3cml0ZUVsZW1lbnRzKGVsZW1lbnRbb3B0aW9ucy5lbGVtZW50c0tleV0sIG9wdGlvbnMsIGRlcHRoICsgMSkpO1xuICAgICAgY3VycmVudEVsZW1lbnQgPSBlbGVtZW50O1xuICAgICAgY3VycmVudEVsZW1lbnROYW1lID0gZWxlbWVudC5uYW1lO1xuICAgIH1cbiAgICB4bWwucHVzaChvcHRpb25zLnNwYWNlcyAmJiBoYXNDb250ZW50KGVsZW1lbnQsIG9wdGlvbnMpID8gJ1xcbicgKyBBcnJheShkZXB0aCArIDEpLmpvaW4ob3B0aW9ucy5zcGFjZXMpIDogJycpO1xuICAgIHhtbC5wdXNoKCc8LycgKyBlbGVtZW50TmFtZSArICc+Jyk7XG4gIH0gZWxzZSB7XG4gICAgeG1sLnB1c2goJy8+Jyk7XG4gIH1cbiAgcmV0dXJuIHhtbC5qb2luKCcnKTtcbn1cblxuZnVuY3Rpb24gd3JpdGVFbGVtZW50cyhlbGVtZW50cywgb3B0aW9ucywgZGVwdGgsIGZpcnN0TGluZSkge1xuICByZXR1cm4gZWxlbWVudHMucmVkdWNlKGZ1bmN0aW9uICh4bWwsIGVsZW1lbnQpIHtcbiAgICB2YXIgaW5kZW50ID0gd3JpdGVJbmRlbnRhdGlvbihvcHRpb25zLCBkZXB0aCwgZmlyc3RMaW5lICYmICF4bWwpO1xuICAgIHN3aXRjaCAoZWxlbWVudC50eXBlKSB7XG4gICAgY2FzZSAnZWxlbWVudCc6IHJldHVybiB4bWwgKyBpbmRlbnQgKyB3cml0ZUVsZW1lbnQoZWxlbWVudCwgb3B0aW9ucywgZGVwdGgpO1xuICAgIGNhc2UgJ2NvbW1lbnQnOiByZXR1cm4geG1sICsgaW5kZW50ICsgd3JpdGVDb21tZW50KGVsZW1lbnRbb3B0aW9ucy5jb21tZW50S2V5XSwgb3B0aW9ucyk7XG4gICAgY2FzZSAnZG9jdHlwZSc6IHJldHVybiB4bWwgKyBpbmRlbnQgKyB3cml0ZURvY3R5cGUoZWxlbWVudFtvcHRpb25zLmRvY3R5cGVLZXldLCBvcHRpb25zKTtcbiAgICBjYXNlICdjZGF0YSc6IHJldHVybiB4bWwgKyAob3B0aW9ucy5pbmRlbnRDZGF0YSA/IGluZGVudCA6ICcnKSArIHdyaXRlQ2RhdGEoZWxlbWVudFtvcHRpb25zLmNkYXRhS2V5XSwgb3B0aW9ucyk7XG4gICAgY2FzZSAndGV4dCc6IHJldHVybiB4bWwgKyAob3B0aW9ucy5pbmRlbnRUZXh0ID8gaW5kZW50IDogJycpICsgd3JpdGVUZXh0KGVsZW1lbnRbb3B0aW9ucy50ZXh0S2V5XSwgb3B0aW9ucyk7XG4gICAgY2FzZSAnaW5zdHJ1Y3Rpb24nOlxuICAgICAgdmFyIGluc3RydWN0aW9uID0ge307XG4gICAgICBpbnN0cnVjdGlvbltlbGVtZW50W29wdGlvbnMubmFtZUtleV1dID0gZWxlbWVudFtvcHRpb25zLmF0dHJpYnV0ZXNLZXldID8gZWxlbWVudCA6IGVsZW1lbnRbb3B0aW9ucy5pbnN0cnVjdGlvbktleV07XG4gICAgICByZXR1cm4geG1sICsgKG9wdGlvbnMuaW5kZW50SW5zdHJ1Y3Rpb24gPyBpbmRlbnQgOiAnJykgKyB3cml0ZUluc3RydWN0aW9uKGluc3RydWN0aW9uLCBvcHRpb25zLCBkZXB0aCk7XG4gICAgfVxuICB9LCAnJyk7XG59XG5cbmZ1bmN0aW9uIGhhc0NvbnRlbnRDb21wYWN0KGVsZW1lbnQsIG9wdGlvbnMsIGFueUNvbnRlbnQpIHtcbiAgdmFyIGtleTtcbiAgZm9yIChrZXkgaW4gZWxlbWVudCkge1xuICAgIGlmIChlbGVtZW50Lmhhc093blByb3BlcnR5KGtleSkpIHtcbiAgICAgIHN3aXRjaCAoa2V5KSB7XG4gICAgICBjYXNlIG9wdGlvbnMucGFyZW50S2V5OlxuICAgICAgY2FzZSBvcHRpb25zLmF0dHJpYnV0ZXNLZXk6XG4gICAgICAgIGJyZWFrOyAvLyBza2lwIHRvIG5leHQga2V5XG4gICAgICBjYXNlIG9wdGlvbnMudGV4dEtleTpcbiAgICAgICAgaWYgKG9wdGlvbnMuaW5kZW50VGV4dCB8fCBhbnlDb250ZW50KSB7XG4gICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgYnJlYWs7IC8vIHNraXAgdG8gbmV4dCBrZXlcbiAgICAgIGNhc2Ugb3B0aW9ucy5jZGF0YUtleTpcbiAgICAgICAgaWYgKG9wdGlvbnMuaW5kZW50Q2RhdGEgfHwgYW55Q29udGVudCkge1xuICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIGJyZWFrOyAvLyBza2lwIHRvIG5leHQga2V5XG4gICAgICBjYXNlIG9wdGlvbnMuaW5zdHJ1Y3Rpb25LZXk6XG4gICAgICAgIGlmIChvcHRpb25zLmluZGVudEluc3RydWN0aW9uIHx8IGFueUNvbnRlbnQpIHtcbiAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICBicmVhazsgLy8gc2tpcCB0byBuZXh0IGtleVxuICAgICAgY2FzZSBvcHRpb25zLmRvY3R5cGVLZXk6XG4gICAgICBjYXNlIG9wdGlvbnMuY29tbWVudEtleTpcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICBkZWZhdWx0OlxuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgIH1cbiAgICB9XG4gIH1cbiAgcmV0dXJuIGZhbHNlO1xufVxuXG5mdW5jdGlvbiB3cml0ZUVsZW1lbnRDb21wYWN0KGVsZW1lbnQsIG5hbWUsIG9wdGlvbnMsIGRlcHRoLCBpbmRlbnQpIHtcbiAgY3VycmVudEVsZW1lbnQgPSBlbGVtZW50O1xuICBjdXJyZW50RWxlbWVudE5hbWUgPSBuYW1lO1xuICB2YXIgZWxlbWVudE5hbWUgPSAnZWxlbWVudE5hbWVGbicgaW4gb3B0aW9ucyA/IG9wdGlvbnMuZWxlbWVudE5hbWVGbihuYW1lLCBlbGVtZW50KSA6IG5hbWU7XG4gIGlmICh0eXBlb2YgZWxlbWVudCA9PT0gJ3VuZGVmaW5lZCcgfHwgZWxlbWVudCA9PT0gbnVsbCB8fCBlbGVtZW50ID09PSAnJykge1xuICAgIHJldHVybiAnZnVsbFRhZ0VtcHR5RWxlbWVudEZuJyBpbiBvcHRpb25zICYmIG9wdGlvbnMuZnVsbFRhZ0VtcHR5RWxlbWVudEZuKG5hbWUsIGVsZW1lbnQpIHx8IG9wdGlvbnMuZnVsbFRhZ0VtcHR5RWxlbWVudCA/ICc8JyArIGVsZW1lbnROYW1lICsgJz48LycgKyBlbGVtZW50TmFtZSArICc+JyA6ICc8JyArIGVsZW1lbnROYW1lICsgJy8+JztcbiAgfVxuICB2YXIgeG1sID0gW107XG4gIGlmIChuYW1lKSB7XG4gICAgeG1sLnB1c2goJzwnICsgZWxlbWVudE5hbWUpO1xuICAgIGlmICh0eXBlb2YgZWxlbWVudCAhPT0gJ29iamVjdCcpIHtcbiAgICAgIHhtbC5wdXNoKCc+JyArIHdyaXRlVGV4dChlbGVtZW50LG9wdGlvbnMpICsgJzwvJyArIGVsZW1lbnROYW1lICsgJz4nKTtcbiAgICAgIHJldHVybiB4bWwuam9pbignJyk7XG4gICAgfVxuICAgIGlmIChlbGVtZW50W29wdGlvbnMuYXR0cmlidXRlc0tleV0pIHtcbiAgICAgIHhtbC5wdXNoKHdyaXRlQXR0cmlidXRlcyhlbGVtZW50W29wdGlvbnMuYXR0cmlidXRlc0tleV0sIG9wdGlvbnMsIGRlcHRoKSk7XG4gICAgfVxuICAgIHZhciB3aXRoQ2xvc2luZ1RhZyA9IGhhc0NvbnRlbnRDb21wYWN0KGVsZW1lbnQsIG9wdGlvbnMsIHRydWUpIHx8IGVsZW1lbnRbb3B0aW9ucy5hdHRyaWJ1dGVzS2V5XSAmJiBlbGVtZW50W29wdGlvbnMuYXR0cmlidXRlc0tleV1bJ3htbDpzcGFjZSddID09PSAncHJlc2VydmUnO1xuICAgIGlmICghd2l0aENsb3NpbmdUYWcpIHtcbiAgICAgIGlmICgnZnVsbFRhZ0VtcHR5RWxlbWVudEZuJyBpbiBvcHRpb25zKSB7XG4gICAgICAgIHdpdGhDbG9zaW5nVGFnID0gb3B0aW9ucy5mdWxsVGFnRW1wdHlFbGVtZW50Rm4obmFtZSwgZWxlbWVudCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB3aXRoQ2xvc2luZ1RhZyA9IG9wdGlvbnMuZnVsbFRhZ0VtcHR5RWxlbWVudDtcbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKHdpdGhDbG9zaW5nVGFnKSB7XG4gICAgICB4bWwucHVzaCgnPicpO1xuICAgIH0gZWxzZSB7XG4gICAgICB4bWwucHVzaCgnLz4nKTtcbiAgICAgIHJldHVybiB4bWwuam9pbignJyk7XG4gICAgfVxuICB9XG4gIHhtbC5wdXNoKHdyaXRlRWxlbWVudHNDb21wYWN0KGVsZW1lbnQsIG9wdGlvbnMsIGRlcHRoICsgMSwgZmFsc2UpKTtcbiAgY3VycmVudEVsZW1lbnQgPSBlbGVtZW50O1xuICBjdXJyZW50RWxlbWVudE5hbWUgPSBuYW1lO1xuICBpZiAobmFtZSkge1xuICAgIHhtbC5wdXNoKChpbmRlbnQgPyB3cml0ZUluZGVudGF0aW9uKG9wdGlvbnMsIGRlcHRoLCBmYWxzZSkgOiAnJykgKyAnPC8nICsgZWxlbWVudE5hbWUgKyAnPicpO1xuICB9XG4gIHJldHVybiB4bWwuam9pbignJyk7XG59XG5cbmZ1bmN0aW9uIHdyaXRlRWxlbWVudHNDb21wYWN0KGVsZW1lbnQsIG9wdGlvbnMsIGRlcHRoLCBmaXJzdExpbmUpIHtcbiAgdmFyIGksIGtleSwgbm9kZXMsIHhtbCA9IFtdO1xuICBmb3IgKGtleSBpbiBlbGVtZW50KSB7XG4gICAgaWYgKGVsZW1lbnQuaGFzT3duUHJvcGVydHkoa2V5KSkge1xuICAgICAgbm9kZXMgPSBpc0FycmF5KGVsZW1lbnRba2V5XSkgPyBlbGVtZW50W2tleV0gOiBbZWxlbWVudFtrZXldXTtcbiAgICAgIGZvciAoaSA9IDA7IGkgPCBub2Rlcy5sZW5ndGg7ICsraSkge1xuICAgICAgICBzd2l0Y2ggKGtleSkge1xuICAgICAgICBjYXNlIG9wdGlvbnMuZGVjbGFyYXRpb25LZXk6IHhtbC5wdXNoKHdyaXRlRGVjbGFyYXRpb24obm9kZXNbaV0sIG9wdGlvbnMsIGRlcHRoKSk7IGJyZWFrO1xuICAgICAgICBjYXNlIG9wdGlvbnMuaW5zdHJ1Y3Rpb25LZXk6IHhtbC5wdXNoKChvcHRpb25zLmluZGVudEluc3RydWN0aW9uID8gd3JpdGVJbmRlbnRhdGlvbihvcHRpb25zLCBkZXB0aCwgZmlyc3RMaW5lKSA6ICcnKSArIHdyaXRlSW5zdHJ1Y3Rpb24obm9kZXNbaV0sIG9wdGlvbnMsIGRlcHRoKSk7IGJyZWFrO1xuICAgICAgICBjYXNlIG9wdGlvbnMuYXR0cmlidXRlc0tleTogY2FzZSBvcHRpb25zLnBhcmVudEtleTogYnJlYWs7IC8vIHNraXBcbiAgICAgICAgY2FzZSBvcHRpb25zLnRleHRLZXk6IHhtbC5wdXNoKChvcHRpb25zLmluZGVudFRleHQgPyB3cml0ZUluZGVudGF0aW9uKG9wdGlvbnMsIGRlcHRoLCBmaXJzdExpbmUpIDogJycpICsgd3JpdGVUZXh0KG5vZGVzW2ldLCBvcHRpb25zKSk7IGJyZWFrO1xuICAgICAgICBjYXNlIG9wdGlvbnMuY2RhdGFLZXk6IHhtbC5wdXNoKChvcHRpb25zLmluZGVudENkYXRhID8gd3JpdGVJbmRlbnRhdGlvbihvcHRpb25zLCBkZXB0aCwgZmlyc3RMaW5lKSA6ICcnKSArIHdyaXRlQ2RhdGEobm9kZXNbaV0sIG9wdGlvbnMpKTsgYnJlYWs7XG4gICAgICAgIGNhc2Ugb3B0aW9ucy5kb2N0eXBlS2V5OiB4bWwucHVzaCh3cml0ZUluZGVudGF0aW9uKG9wdGlvbnMsIGRlcHRoLCBmaXJzdExpbmUpICsgd3JpdGVEb2N0eXBlKG5vZGVzW2ldLCBvcHRpb25zKSk7IGJyZWFrO1xuICAgICAgICBjYXNlIG9wdGlvbnMuY29tbWVudEtleTogeG1sLnB1c2god3JpdGVJbmRlbnRhdGlvbihvcHRpb25zLCBkZXB0aCwgZmlyc3RMaW5lKSArIHdyaXRlQ29tbWVudChub2Rlc1tpXSwgb3B0aW9ucykpOyBicmVhaztcbiAgICAgICAgZGVmYXVsdDogeG1sLnB1c2god3JpdGVJbmRlbnRhdGlvbihvcHRpb25zLCBkZXB0aCwgZmlyc3RMaW5lKSArIHdyaXRlRWxlbWVudENvbXBhY3Qobm9kZXNbaV0sIGtleSwgb3B0aW9ucywgZGVwdGgsIGhhc0NvbnRlbnRDb21wYWN0KG5vZGVzW2ldLCBvcHRpb25zKSkpO1xuICAgICAgICB9XG4gICAgICAgIGZpcnN0TGluZSA9IGZpcnN0TGluZSAmJiAheG1sLmxlbmd0aDtcbiAgICAgIH1cbiAgICB9XG4gIH1cbiAgcmV0dXJuIHhtbC5qb2luKCcnKTtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAoanMsIG9wdGlvbnMpIHtcbiAgb3B0aW9ucyA9IHZhbGlkYXRlT3B0aW9ucyhvcHRpb25zKTtcbiAgdmFyIHhtbCA9IFtdO1xuICBjdXJyZW50RWxlbWVudCA9IGpzO1xuICBjdXJyZW50RWxlbWVudE5hbWUgPSAnX3Jvb3RfJztcbiAgaWYgKG9wdGlvbnMuY29tcGFjdCkge1xuICAgIHhtbC5wdXNoKHdyaXRlRWxlbWVudHNDb21wYWN0KGpzLCBvcHRpb25zLCAwLCB0cnVlKSk7XG4gIH0gZWxzZSB7XG4gICAgaWYgKGpzW29wdGlvbnMuZGVjbGFyYXRpb25LZXldKSB7XG4gICAgICB4bWwucHVzaCh3cml0ZURlY2xhcmF0aW9uKGpzW29wdGlvbnMuZGVjbGFyYXRpb25LZXldLCBvcHRpb25zLCAwKSk7XG4gICAgfVxuICAgIGlmIChqc1tvcHRpb25zLmVsZW1lbnRzS2V5XSAmJiBqc1tvcHRpb25zLmVsZW1lbnRzS2V5XS5sZW5ndGgpIHtcbiAgICAgIHhtbC5wdXNoKHdyaXRlRWxlbWVudHMoanNbb3B0aW9ucy5lbGVtZW50c0tleV0sIG9wdGlvbnMsIDAsICF4bWwubGVuZ3RoKSk7XG4gICAgfVxuICB9XG4gIHJldHVybiB4bWwuam9pbignJyk7XG59O1xuIiwidmFyIGpzMnhtbCA9IHJlcXVpcmUoJy4vanMyeG1sLmpzJyk7XHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIChqc29uLCBvcHRpb25zKSB7XHJcbiAgaWYgKGpzb24gaW5zdGFuY2VvZiBCdWZmZXIpIHtcclxuICAgIGpzb24gPSBqc29uLnRvU3RyaW5nKCk7XHJcbiAgfVxyXG4gIHZhciBqcyA9IG51bGw7XHJcbiAgaWYgKHR5cGVvZiAoanNvbikgPT09ICdzdHJpbmcnKSB7XHJcbiAgICB0cnkge1xyXG4gICAgICBqcyA9IEpTT04ucGFyc2UoanNvbik7XHJcbiAgICB9IGNhdGNoIChlKSB7XHJcbiAgICAgIHRocm93IG5ldyBFcnJvcignVGhlIEpTT04gc3RydWN0dXJlIGlzIGludmFsaWQnKTtcclxuICAgIH1cclxuICB9IGVsc2Uge1xyXG4gICAganMgPSBqc29uO1xyXG4gIH1cclxuICByZXR1cm4ganMyeG1sKGpzLCBvcHRpb25zKTtcclxufTtcclxuIiwidmFyIGlzQXJyYXkgPSByZXF1aXJlKCcuL2FycmF5LWhlbHBlcicpLmlzQXJyYXk7XHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9IHtcclxuXHJcbiAgY29weU9wdGlvbnM6IGZ1bmN0aW9uIChvcHRpb25zKSB7XHJcbiAgICB2YXIga2V5LCBjb3B5ID0ge307XHJcbiAgICBmb3IgKGtleSBpbiBvcHRpb25zKSB7XHJcbiAgICAgIGlmIChvcHRpb25zLmhhc093blByb3BlcnR5KGtleSkpIHtcclxuICAgICAgICBjb3B5W2tleV0gPSBvcHRpb25zW2tleV07XHJcbiAgICAgIH1cclxuICAgIH1cclxuICAgIHJldHVybiBjb3B5O1xyXG4gIH0sXHJcblxyXG4gIGVuc3VyZUZsYWdFeGlzdHM6IGZ1bmN0aW9uIChpdGVtLCBvcHRpb25zKSB7XHJcbiAgICBpZiAoIShpdGVtIGluIG9wdGlvbnMpIHx8IHR5cGVvZiBvcHRpb25zW2l0ZW1dICE9PSAnYm9vbGVhbicpIHtcclxuICAgICAgb3B0aW9uc1tpdGVtXSA9IGZhbHNlO1xyXG4gICAgfVxyXG4gIH0sXHJcblxyXG4gIGVuc3VyZVNwYWNlc0V4aXN0czogZnVuY3Rpb24gKG9wdGlvbnMpIHtcclxuICAgIGlmICghKCdzcGFjZXMnIGluIG9wdGlvbnMpIHx8ICh0eXBlb2Ygb3B0aW9ucy5zcGFjZXMgIT09ICdudW1iZXInICYmIHR5cGVvZiBvcHRpb25zLnNwYWNlcyAhPT0gJ3N0cmluZycpKSB7XHJcbiAgICAgIG9wdGlvbnMuc3BhY2VzID0gMDtcclxuICAgIH1cclxuICB9LFxyXG5cclxuICBlbnN1cmVBbHdheXNBcnJheUV4aXN0czogZnVuY3Rpb24gKG9wdGlvbnMpIHtcclxuICAgIGlmICghKCdhbHdheXNBcnJheScgaW4gb3B0aW9ucykgfHwgKHR5cGVvZiBvcHRpb25zLmFsd2F5c0FycmF5ICE9PSAnYm9vbGVhbicgJiYgIWlzQXJyYXkob3B0aW9ucy5hbHdheXNBcnJheSkpKSB7XHJcbiAgICAgIG9wdGlvbnMuYWx3YXlzQXJyYXkgPSBmYWxzZTtcclxuICAgIH1cclxuICB9LFxyXG5cclxuICBlbnN1cmVLZXlFeGlzdHM6IGZ1bmN0aW9uIChrZXksIG9wdGlvbnMpIHtcclxuICAgIGlmICghKGtleSArICdLZXknIGluIG9wdGlvbnMpIHx8IHR5cGVvZiBvcHRpb25zW2tleSArICdLZXknXSAhPT0gJ3N0cmluZycpIHtcclxuICAgICAgb3B0aW9uc1trZXkgKyAnS2V5J10gPSBvcHRpb25zLmNvbXBhY3QgPyAnXycgKyBrZXkgOiBrZXk7XHJcbiAgICB9XHJcbiAgfSxcclxuXHJcbiAgY2hlY2tGbkV4aXN0czogZnVuY3Rpb24gKGtleSwgb3B0aW9ucykge1xyXG4gICAgcmV0dXJuIGtleSArICdGbicgaW4gb3B0aW9ucztcclxuICB9XHJcblxyXG59O1xyXG4iLCJ2YXIgc2F4ID0gcmVxdWlyZSgnc2F4Jyk7XHJcbnZhciBleHBhdCAvKj0gcmVxdWlyZSgnbm9kZS1leHBhdCcpOyovID0geyBvbjogZnVuY3Rpb24gKCkgeyB9LCBwYXJzZTogZnVuY3Rpb24gKCkgeyB9IH07XHJcbnZhciBoZWxwZXIgPSByZXF1aXJlKCcuL29wdGlvbnMtaGVscGVyJyk7XHJcbnZhciBpc0FycmF5ID0gcmVxdWlyZSgnLi9hcnJheS1oZWxwZXInKS5pc0FycmF5O1xyXG5cclxudmFyIG9wdGlvbnM7XHJcbnZhciBwdXJlSnNQYXJzZXIgPSB0cnVlO1xyXG52YXIgY3VycmVudEVsZW1lbnQ7XHJcblxyXG5mdW5jdGlvbiB2YWxpZGF0ZU9wdGlvbnModXNlck9wdGlvbnMpIHtcclxuICBvcHRpb25zID0gaGVscGVyLmNvcHlPcHRpb25zKHVzZXJPcHRpb25zKTtcclxuICBoZWxwZXIuZW5zdXJlRmxhZ0V4aXN0cygnaWdub3JlRGVjbGFyYXRpb24nLCBvcHRpb25zKTtcclxuICBoZWxwZXIuZW5zdXJlRmxhZ0V4aXN0cygnaWdub3JlSW5zdHJ1Y3Rpb24nLCBvcHRpb25zKTtcclxuICBoZWxwZXIuZW5zdXJlRmxhZ0V4aXN0cygnaWdub3JlQXR0cmlidXRlcycsIG9wdGlvbnMpO1xyXG4gIGhlbHBlci5lbnN1cmVGbGFnRXhpc3RzKCdpZ25vcmVUZXh0Jywgb3B0aW9ucyk7XHJcbiAgaGVscGVyLmVuc3VyZUZsYWdFeGlzdHMoJ2lnbm9yZUNvbW1lbnQnLCBvcHRpb25zKTtcclxuICBoZWxwZXIuZW5zdXJlRmxhZ0V4aXN0cygnaWdub3JlQ2RhdGEnLCBvcHRpb25zKTtcclxuICBoZWxwZXIuZW5zdXJlRmxhZ0V4aXN0cygnaWdub3JlRG9jdHlwZScsIG9wdGlvbnMpO1xyXG4gIGhlbHBlci5lbnN1cmVGbGFnRXhpc3RzKCdjb21wYWN0Jywgb3B0aW9ucyk7XHJcbiAgaGVscGVyLmVuc3VyZUZsYWdFeGlzdHMoJ2Fsd2F5c0NoaWxkcmVuJywgb3B0aW9ucyk7XHJcbiAgaGVscGVyLmVuc3VyZUZsYWdFeGlzdHMoJ2FkZFBhcmVudCcsIG9wdGlvbnMpO1xyXG4gIGhlbHBlci5lbnN1cmVGbGFnRXhpc3RzKCd0cmltJywgb3B0aW9ucyk7XHJcbiAgaGVscGVyLmVuc3VyZUZsYWdFeGlzdHMoJ25hdGl2ZVR5cGUnLCBvcHRpb25zKTtcclxuICBoZWxwZXIuZW5zdXJlRmxhZ0V4aXN0cygnbmF0aXZlVHlwZUF0dHJpYnV0ZXMnLCBvcHRpb25zKTtcclxuICBoZWxwZXIuZW5zdXJlRmxhZ0V4aXN0cygnc2FuaXRpemUnLCBvcHRpb25zKTtcclxuICBoZWxwZXIuZW5zdXJlRmxhZ0V4aXN0cygnaW5zdHJ1Y3Rpb25IYXNBdHRyaWJ1dGVzJywgb3B0aW9ucyk7XHJcbiAgaGVscGVyLmVuc3VyZUZsYWdFeGlzdHMoJ2NhcHR1cmVTcGFjZXNCZXR3ZWVuRWxlbWVudHMnLCBvcHRpb25zKTtcclxuICBoZWxwZXIuZW5zdXJlQWx3YXlzQXJyYXlFeGlzdHMob3B0aW9ucyk7XHJcbiAgaGVscGVyLmVuc3VyZUtleUV4aXN0cygnZGVjbGFyYXRpb24nLCBvcHRpb25zKTtcclxuICBoZWxwZXIuZW5zdXJlS2V5RXhpc3RzKCdpbnN0cnVjdGlvbicsIG9wdGlvbnMpO1xyXG4gIGhlbHBlci5lbnN1cmVLZXlFeGlzdHMoJ2F0dHJpYnV0ZXMnLCBvcHRpb25zKTtcclxuICBoZWxwZXIuZW5zdXJlS2V5RXhpc3RzKCd0ZXh0Jywgb3B0aW9ucyk7XHJcbiAgaGVscGVyLmVuc3VyZUtleUV4aXN0cygnY29tbWVudCcsIG9wdGlvbnMpO1xyXG4gIGhlbHBlci5lbnN1cmVLZXlFeGlzdHMoJ2NkYXRhJywgb3B0aW9ucyk7XHJcbiAgaGVscGVyLmVuc3VyZUtleUV4aXN0cygnZG9jdHlwZScsIG9wdGlvbnMpO1xyXG4gIGhlbHBlci5lbnN1cmVLZXlFeGlzdHMoJ3R5cGUnLCBvcHRpb25zKTtcclxuICBoZWxwZXIuZW5zdXJlS2V5RXhpc3RzKCduYW1lJywgb3B0aW9ucyk7XHJcbiAgaGVscGVyLmVuc3VyZUtleUV4aXN0cygnZWxlbWVudHMnLCBvcHRpb25zKTtcclxuICBoZWxwZXIuZW5zdXJlS2V5RXhpc3RzKCdwYXJlbnQnLCBvcHRpb25zKTtcclxuICBoZWxwZXIuY2hlY2tGbkV4aXN0cygnZG9jdHlwZScsIG9wdGlvbnMpO1xyXG4gIGhlbHBlci5jaGVja0ZuRXhpc3RzKCdpbnN0cnVjdGlvbicsIG9wdGlvbnMpO1xyXG4gIGhlbHBlci5jaGVja0ZuRXhpc3RzKCdjZGF0YScsIG9wdGlvbnMpO1xyXG4gIGhlbHBlci5jaGVja0ZuRXhpc3RzKCdjb21tZW50Jywgb3B0aW9ucyk7XHJcbiAgaGVscGVyLmNoZWNrRm5FeGlzdHMoJ3RleHQnLCBvcHRpb25zKTtcclxuICBoZWxwZXIuY2hlY2tGbkV4aXN0cygnaW5zdHJ1Y3Rpb25OYW1lJywgb3B0aW9ucyk7XHJcbiAgaGVscGVyLmNoZWNrRm5FeGlzdHMoJ2VsZW1lbnROYW1lJywgb3B0aW9ucyk7XHJcbiAgaGVscGVyLmNoZWNrRm5FeGlzdHMoJ2F0dHJpYnV0ZU5hbWUnLCBvcHRpb25zKTtcclxuICBoZWxwZXIuY2hlY2tGbkV4aXN0cygnYXR0cmlidXRlVmFsdWUnLCBvcHRpb25zKTtcclxuICBoZWxwZXIuY2hlY2tGbkV4aXN0cygnYXR0cmlidXRlcycsIG9wdGlvbnMpO1xyXG4gIHJldHVybiBvcHRpb25zO1xyXG59XHJcblxyXG5mdW5jdGlvbiBuYXRpdmVUeXBlKHZhbHVlKSB7XHJcbiAgdmFyIG5WYWx1ZSA9IE51bWJlcih2YWx1ZSk7XHJcbiAgaWYgKCFpc05hTihuVmFsdWUpKSB7XHJcbiAgICByZXR1cm4gblZhbHVlO1xyXG4gIH1cclxuICB2YXIgYlZhbHVlID0gdmFsdWUudG9Mb3dlckNhc2UoKTtcclxuICBpZiAoYlZhbHVlID09PSAndHJ1ZScpIHtcclxuICAgIHJldHVybiB0cnVlO1xyXG4gIH0gZWxzZSBpZiAoYlZhbHVlID09PSAnZmFsc2UnKSB7XHJcbiAgICByZXR1cm4gZmFsc2U7XHJcbiAgfVxyXG4gIHJldHVybiB2YWx1ZTtcclxufVxyXG5cclxuZnVuY3Rpb24gYWRkRmllbGQodHlwZSwgdmFsdWUpIHtcclxuICB2YXIga2V5O1xyXG4gIGlmIChvcHRpb25zLmNvbXBhY3QpIHtcclxuICAgIGlmIChcclxuICAgICAgIWN1cnJlbnRFbGVtZW50W29wdGlvbnNbdHlwZSArICdLZXknXV0gJiZcclxuICAgICAgKGlzQXJyYXkob3B0aW9ucy5hbHdheXNBcnJheSkgPyBvcHRpb25zLmFsd2F5c0FycmF5LmluZGV4T2Yob3B0aW9uc1t0eXBlICsgJ0tleSddKSAhPT0gLTEgOiBvcHRpb25zLmFsd2F5c0FycmF5KVxyXG4gICAgKSB7XHJcbiAgICAgIGN1cnJlbnRFbGVtZW50W29wdGlvbnNbdHlwZSArICdLZXknXV0gPSBbXTtcclxuICAgIH1cclxuICAgIGlmIChjdXJyZW50RWxlbWVudFtvcHRpb25zW3R5cGUgKyAnS2V5J11dICYmICFpc0FycmF5KGN1cnJlbnRFbGVtZW50W29wdGlvbnNbdHlwZSArICdLZXknXV0pKSB7XHJcbiAgICAgIGN1cnJlbnRFbGVtZW50W29wdGlvbnNbdHlwZSArICdLZXknXV0gPSBbY3VycmVudEVsZW1lbnRbb3B0aW9uc1t0eXBlICsgJ0tleSddXV07XHJcbiAgICB9XHJcbiAgICBpZiAodHlwZSArICdGbicgaW4gb3B0aW9ucyAmJiB0eXBlb2YgdmFsdWUgPT09ICdzdHJpbmcnKSB7XHJcbiAgICAgIHZhbHVlID0gb3B0aW9uc1t0eXBlICsgJ0ZuJ10odmFsdWUsIGN1cnJlbnRFbGVtZW50KTtcclxuICAgIH1cclxuICAgIGlmICh0eXBlID09PSAnaW5zdHJ1Y3Rpb24nICYmICgnaW5zdHJ1Y3Rpb25GbicgaW4gb3B0aW9ucyB8fCAnaW5zdHJ1Y3Rpb25OYW1lRm4nIGluIG9wdGlvbnMpKSB7XHJcbiAgICAgIGZvciAoa2V5IGluIHZhbHVlKSB7XHJcbiAgICAgICAgaWYgKHZhbHVlLmhhc093blByb3BlcnR5KGtleSkpIHtcclxuICAgICAgICAgIGlmICgnaW5zdHJ1Y3Rpb25GbicgaW4gb3B0aW9ucykge1xyXG4gICAgICAgICAgICB2YWx1ZVtrZXldID0gb3B0aW9ucy5pbnN0cnVjdGlvbkZuKHZhbHVlW2tleV0sIGtleSwgY3VycmVudEVsZW1lbnQpO1xyXG4gICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgdmFyIHRlbXAgPSB2YWx1ZVtrZXldO1xyXG4gICAgICAgICAgICBkZWxldGUgdmFsdWVba2V5XTtcclxuICAgICAgICAgICAgdmFsdWVbb3B0aW9ucy5pbnN0cnVjdGlvbk5hbWVGbihrZXksIHRlbXAsIGN1cnJlbnRFbGVtZW50KV0gPSB0ZW1wO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgfVxyXG4gICAgaWYgKGlzQXJyYXkoY3VycmVudEVsZW1lbnRbb3B0aW9uc1t0eXBlICsgJ0tleSddXSkpIHtcclxuICAgICAgY3VycmVudEVsZW1lbnRbb3B0aW9uc1t0eXBlICsgJ0tleSddXS5wdXNoKHZhbHVlKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIGN1cnJlbnRFbGVtZW50W29wdGlvbnNbdHlwZSArICdLZXknXV0gPSB2YWx1ZTtcclxuICAgIH1cclxuICB9IGVsc2Uge1xyXG4gICAgaWYgKCFjdXJyZW50RWxlbWVudFtvcHRpb25zLmVsZW1lbnRzS2V5XSkge1xyXG4gICAgICBjdXJyZW50RWxlbWVudFtvcHRpb25zLmVsZW1lbnRzS2V5XSA9IFtdO1xyXG4gICAgfVxyXG4gICAgdmFyIGVsZW1lbnQgPSB7fTtcclxuICAgIGVsZW1lbnRbb3B0aW9ucy50eXBlS2V5XSA9IHR5cGU7XHJcbiAgICBpZiAodHlwZSA9PT0gJ2luc3RydWN0aW9uJykge1xyXG4gICAgICBmb3IgKGtleSBpbiB2YWx1ZSkge1xyXG4gICAgICAgIGlmICh2YWx1ZS5oYXNPd25Qcm9wZXJ0eShrZXkpKSB7XHJcbiAgICAgICAgICBicmVhaztcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgICAgZWxlbWVudFtvcHRpb25zLm5hbWVLZXldID0gJ2luc3RydWN0aW9uTmFtZUZuJyBpbiBvcHRpb25zID8gb3B0aW9ucy5pbnN0cnVjdGlvbk5hbWVGbihrZXksIHZhbHVlLCBjdXJyZW50RWxlbWVudCkgOiBrZXk7XHJcbiAgICAgIGlmIChvcHRpb25zLmluc3RydWN0aW9uSGFzQXR0cmlidXRlcykge1xyXG4gICAgICAgIGVsZW1lbnRbb3B0aW9ucy5hdHRyaWJ1dGVzS2V5XSA9IHZhbHVlW2tleV1bb3B0aW9ucy5hdHRyaWJ1dGVzS2V5XTtcclxuICAgICAgICBpZiAoJ2luc3RydWN0aW9uRm4nIGluIG9wdGlvbnMpIHtcclxuICAgICAgICAgIGVsZW1lbnRbb3B0aW9ucy5hdHRyaWJ1dGVzS2V5XSA9IG9wdGlvbnMuaW5zdHJ1Y3Rpb25GbihlbGVtZW50W29wdGlvbnMuYXR0cmlidXRlc0tleV0sIGtleSwgY3VycmVudEVsZW1lbnQpO1xyXG4gICAgICAgIH1cclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICBpZiAoJ2luc3RydWN0aW9uRm4nIGluIG9wdGlvbnMpIHtcclxuICAgICAgICAgIHZhbHVlW2tleV0gPSBvcHRpb25zLmluc3RydWN0aW9uRm4odmFsdWVba2V5XSwga2V5LCBjdXJyZW50RWxlbWVudCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsZW1lbnRbb3B0aW9ucy5pbnN0cnVjdGlvbktleV0gPSB2YWx1ZVtrZXldO1xyXG4gICAgICB9XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBpZiAodHlwZSArICdGbicgaW4gb3B0aW9ucykge1xyXG4gICAgICAgIHZhbHVlID0gb3B0aW9uc1t0eXBlICsgJ0ZuJ10odmFsdWUsIGN1cnJlbnRFbGVtZW50KTtcclxuICAgICAgfVxyXG4gICAgICBlbGVtZW50W29wdGlvbnNbdHlwZSArICdLZXknXV0gPSB2YWx1ZTtcclxuICAgIH1cclxuICAgIGlmIChvcHRpb25zLmFkZFBhcmVudCkge1xyXG4gICAgICBlbGVtZW50W29wdGlvbnMucGFyZW50S2V5XSA9IGN1cnJlbnRFbGVtZW50O1xyXG4gICAgfVxyXG4gICAgY3VycmVudEVsZW1lbnRbb3B0aW9ucy5lbGVtZW50c0tleV0ucHVzaChlbGVtZW50KTtcclxuICB9XHJcbn1cclxuXHJcbmZ1bmN0aW9uIG1hbmlwdWxhdGVBdHRyaWJ1dGVzKGF0dHJpYnV0ZXMpIHtcclxuICBpZiAoJ2F0dHJpYnV0ZXNGbicgaW4gb3B0aW9ucyAmJiBhdHRyaWJ1dGVzKSB7XHJcbiAgICBhdHRyaWJ1dGVzID0gb3B0aW9ucy5hdHRyaWJ1dGVzRm4oYXR0cmlidXRlcywgY3VycmVudEVsZW1lbnQpO1xyXG4gIH1cclxuICBpZiAoKG9wdGlvbnMudHJpbSB8fCAnYXR0cmlidXRlVmFsdWVGbicgaW4gb3B0aW9ucyB8fCAnYXR0cmlidXRlTmFtZUZuJyBpbiBvcHRpb25zIHx8IG9wdGlvbnMubmF0aXZlVHlwZUF0dHJpYnV0ZXMpICYmIGF0dHJpYnV0ZXMpIHtcclxuICAgIHZhciBrZXk7XHJcbiAgICBmb3IgKGtleSBpbiBhdHRyaWJ1dGVzKSB7XHJcbiAgICAgIGlmIChhdHRyaWJ1dGVzLmhhc093blByb3BlcnR5KGtleSkpIHtcclxuICAgICAgICBpZiAob3B0aW9ucy50cmltKSBhdHRyaWJ1dGVzW2tleV0gPSBhdHRyaWJ1dGVzW2tleV0udHJpbSgpO1xyXG4gICAgICAgIGlmIChvcHRpb25zLm5hdGl2ZVR5cGVBdHRyaWJ1dGVzKSB7XHJcbiAgICAgICAgICBhdHRyaWJ1dGVzW2tleV0gPSBuYXRpdmVUeXBlKGF0dHJpYnV0ZXNba2V5XSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICgnYXR0cmlidXRlVmFsdWVGbicgaW4gb3B0aW9ucykgYXR0cmlidXRlc1trZXldID0gb3B0aW9ucy5hdHRyaWJ1dGVWYWx1ZUZuKGF0dHJpYnV0ZXNba2V5XSwga2V5LCBjdXJyZW50RWxlbWVudCk7XHJcbiAgICAgICAgaWYgKCdhdHRyaWJ1dGVOYW1lRm4nIGluIG9wdGlvbnMpIHtcclxuICAgICAgICAgIHZhciB0ZW1wID0gYXR0cmlidXRlc1trZXldO1xyXG4gICAgICAgICAgZGVsZXRlIGF0dHJpYnV0ZXNba2V5XTtcclxuICAgICAgICAgIGF0dHJpYnV0ZXNbb3B0aW9ucy5hdHRyaWJ1dGVOYW1lRm4oa2V5LCBhdHRyaWJ1dGVzW2tleV0sIGN1cnJlbnRFbGVtZW50KV0gPSB0ZW1wO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgfVxyXG4gIH1cclxuICByZXR1cm4gYXR0cmlidXRlcztcclxufVxyXG5cclxuZnVuY3Rpb24gb25JbnN0cnVjdGlvbihpbnN0cnVjdGlvbikge1xyXG4gIHZhciBhdHRyaWJ1dGVzID0ge307XHJcbiAgaWYgKGluc3RydWN0aW9uLmJvZHkgJiYgKGluc3RydWN0aW9uLm5hbWUudG9Mb3dlckNhc2UoKSA9PT0gJ3htbCcgfHwgb3B0aW9ucy5pbnN0cnVjdGlvbkhhc0F0dHJpYnV0ZXMpKSB7XHJcbiAgICB2YXIgYXR0cnNSZWdFeHAgPSAvKFtcXHc6LV0rKVxccyo9XFxzKig/OlwiKFteXCJdKilcInwnKFteJ10qKSd8KFxcdyspKVxccyovZztcclxuICAgIHZhciBtYXRjaDtcclxuICAgIHdoaWxlICgobWF0Y2ggPSBhdHRyc1JlZ0V4cC5leGVjKGluc3RydWN0aW9uLmJvZHkpKSAhPT0gbnVsbCkge1xyXG4gICAgICBhdHRyaWJ1dGVzW21hdGNoWzFdXSA9IG1hdGNoWzJdIHx8IG1hdGNoWzNdIHx8IG1hdGNoWzRdO1xyXG4gICAgfVxyXG4gICAgYXR0cmlidXRlcyA9IG1hbmlwdWxhdGVBdHRyaWJ1dGVzKGF0dHJpYnV0ZXMpO1xyXG4gIH1cclxuICBpZiAoaW5zdHJ1Y3Rpb24ubmFtZS50b0xvd2VyQ2FzZSgpID09PSAneG1sJykge1xyXG4gICAgaWYgKG9wdGlvbnMuaWdub3JlRGVjbGFyYXRpb24pIHtcclxuICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG4gICAgY3VycmVudEVsZW1lbnRbb3B0aW9ucy5kZWNsYXJhdGlvbktleV0gPSB7fTtcclxuICAgIGlmIChPYmplY3Qua2V5cyhhdHRyaWJ1dGVzKS5sZW5ndGgpIHtcclxuICAgICAgY3VycmVudEVsZW1lbnRbb3B0aW9ucy5kZWNsYXJhdGlvbktleV1bb3B0aW9ucy5hdHRyaWJ1dGVzS2V5XSA9IGF0dHJpYnV0ZXM7XHJcbiAgICB9XHJcbiAgICBpZiAob3B0aW9ucy5hZGRQYXJlbnQpIHtcclxuICAgICAgY3VycmVudEVsZW1lbnRbb3B0aW9ucy5kZWNsYXJhdGlvbktleV1bb3B0aW9ucy5wYXJlbnRLZXldID0gY3VycmVudEVsZW1lbnQ7XHJcbiAgICB9XHJcbiAgfSBlbHNlIHtcclxuICAgIGlmIChvcHRpb25zLmlnbm9yZUluc3RydWN0aW9uKSB7XHJcbiAgICAgIHJldHVybjtcclxuICAgIH1cclxuICAgIGlmIChvcHRpb25zLnRyaW0pIHtcclxuICAgICAgaW5zdHJ1Y3Rpb24uYm9keSA9IGluc3RydWN0aW9uLmJvZHkudHJpbSgpO1xyXG4gICAgfVxyXG4gICAgdmFyIHZhbHVlID0ge307XHJcbiAgICBpZiAob3B0aW9ucy5pbnN0cnVjdGlvbkhhc0F0dHJpYnV0ZXMgJiYgT2JqZWN0LmtleXMoYXR0cmlidXRlcykubGVuZ3RoKSB7XHJcbiAgICAgIHZhbHVlW2luc3RydWN0aW9uLm5hbWVdID0ge307XHJcbiAgICAgIHZhbHVlW2luc3RydWN0aW9uLm5hbWVdW29wdGlvbnMuYXR0cmlidXRlc0tleV0gPSBhdHRyaWJ1dGVzO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgdmFsdWVbaW5zdHJ1Y3Rpb24ubmFtZV0gPSBpbnN0cnVjdGlvbi5ib2R5O1xyXG4gICAgfVxyXG4gICAgYWRkRmllbGQoJ2luc3RydWN0aW9uJywgdmFsdWUpO1xyXG4gIH1cclxufVxyXG5cclxuZnVuY3Rpb24gb25TdGFydEVsZW1lbnQobmFtZSwgYXR0cmlidXRlcykge1xyXG4gIHZhciBlbGVtZW50O1xyXG4gIGlmICh0eXBlb2YgbmFtZSA9PT0gJ29iamVjdCcpIHtcclxuICAgIGF0dHJpYnV0ZXMgPSBuYW1lLmF0dHJpYnV0ZXM7XHJcbiAgICBuYW1lID0gbmFtZS5uYW1lO1xyXG4gIH1cclxuICBhdHRyaWJ1dGVzID0gbWFuaXB1bGF0ZUF0dHJpYnV0ZXMoYXR0cmlidXRlcyk7XHJcbiAgaWYgKCdlbGVtZW50TmFtZUZuJyBpbiBvcHRpb25zKSB7XHJcbiAgICBuYW1lID0gb3B0aW9ucy5lbGVtZW50TmFtZUZuKG5hbWUsIGN1cnJlbnRFbGVtZW50KTtcclxuICB9XHJcbiAgaWYgKG9wdGlvbnMuY29tcGFjdCkge1xyXG4gICAgZWxlbWVudCA9IHt9O1xyXG4gICAgaWYgKCFvcHRpb25zLmlnbm9yZUF0dHJpYnV0ZXMgJiYgYXR0cmlidXRlcyAmJiBPYmplY3Qua2V5cyhhdHRyaWJ1dGVzKS5sZW5ndGgpIHtcclxuICAgICAgZWxlbWVudFtvcHRpb25zLmF0dHJpYnV0ZXNLZXldID0ge307XHJcbiAgICAgIHZhciBrZXk7XHJcbiAgICAgIGZvciAoa2V5IGluIGF0dHJpYnV0ZXMpIHtcclxuICAgICAgICBpZiAoYXR0cmlidXRlcy5oYXNPd25Qcm9wZXJ0eShrZXkpKSB7XHJcbiAgICAgICAgICBlbGVtZW50W29wdGlvbnMuYXR0cmlidXRlc0tleV1ba2V5XSA9IGF0dHJpYnV0ZXNba2V5XTtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgIH1cclxuICAgIGlmIChcclxuICAgICAgIShuYW1lIGluIGN1cnJlbnRFbGVtZW50KSAmJlxyXG4gICAgICAoaXNBcnJheShvcHRpb25zLmFsd2F5c0FycmF5KSA/IG9wdGlvbnMuYWx3YXlzQXJyYXkuaW5kZXhPZihuYW1lKSAhPT0gLTEgOiBvcHRpb25zLmFsd2F5c0FycmF5KVxyXG4gICAgKSB7XHJcbiAgICAgIGN1cnJlbnRFbGVtZW50W25hbWVdID0gW107XHJcbiAgICB9XHJcbiAgICBpZiAoY3VycmVudEVsZW1lbnRbbmFtZV0gJiYgIWlzQXJyYXkoY3VycmVudEVsZW1lbnRbbmFtZV0pKSB7XHJcbiAgICAgIGN1cnJlbnRFbGVtZW50W25hbWVdID0gW2N1cnJlbnRFbGVtZW50W25hbWVdXTtcclxuICAgIH1cclxuICAgIGlmIChpc0FycmF5KGN1cnJlbnRFbGVtZW50W25hbWVdKSkge1xyXG4gICAgICBjdXJyZW50RWxlbWVudFtuYW1lXS5wdXNoKGVsZW1lbnQpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgY3VycmVudEVsZW1lbnRbbmFtZV0gPSBlbGVtZW50O1xyXG4gICAgfVxyXG4gIH0gZWxzZSB7XHJcbiAgICBpZiAoIWN1cnJlbnRFbGVtZW50W29wdGlvbnMuZWxlbWVudHNLZXldKSB7XHJcbiAgICAgIGN1cnJlbnRFbGVtZW50W29wdGlvbnMuZWxlbWVudHNLZXldID0gW107XHJcbiAgICB9XHJcbiAgICBlbGVtZW50ID0ge307XHJcbiAgICBlbGVtZW50W29wdGlvbnMudHlwZUtleV0gPSAnZWxlbWVudCc7XHJcbiAgICBlbGVtZW50W29wdGlvbnMubmFtZUtleV0gPSBuYW1lO1xyXG4gICAgaWYgKCFvcHRpb25zLmlnbm9yZUF0dHJpYnV0ZXMgJiYgYXR0cmlidXRlcyAmJiBPYmplY3Qua2V5cyhhdHRyaWJ1dGVzKS5sZW5ndGgpIHtcclxuICAgICAgZWxlbWVudFtvcHRpb25zLmF0dHJpYnV0ZXNLZXldID0gYXR0cmlidXRlcztcclxuICAgIH1cclxuICAgIGlmIChvcHRpb25zLmFsd2F5c0NoaWxkcmVuKSB7XHJcbiAgICAgIGVsZW1lbnRbb3B0aW9ucy5lbGVtZW50c0tleV0gPSBbXTtcclxuICAgIH1cclxuICAgIGN1cnJlbnRFbGVtZW50W29wdGlvbnMuZWxlbWVudHNLZXldLnB1c2goZWxlbWVudCk7XHJcbiAgfVxyXG4gIGVsZW1lbnRbb3B0aW9ucy5wYXJlbnRLZXldID0gY3VycmVudEVsZW1lbnQ7IC8vIHdpbGwgYmUgZGVsZXRlZCBpbiBvbkVuZEVsZW1lbnQoKSBpZiAhb3B0aW9ucy5hZGRQYXJlbnRcclxuICBjdXJyZW50RWxlbWVudCA9IGVsZW1lbnQ7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIG9uVGV4dCh0ZXh0KSB7XHJcbiAgaWYgKG9wdGlvbnMuaWdub3JlVGV4dCkge1xyXG4gICAgcmV0dXJuO1xyXG4gIH1cclxuICBpZiAoIXRleHQudHJpbSgpICYmICFvcHRpb25zLmNhcHR1cmVTcGFjZXNCZXR3ZWVuRWxlbWVudHMpIHtcclxuICAgIHJldHVybjtcclxuICB9XHJcbiAgaWYgKG9wdGlvbnMudHJpbSkge1xyXG4gICAgdGV4dCA9IHRleHQudHJpbSgpO1xyXG4gIH1cclxuICBpZiAob3B0aW9ucy5uYXRpdmVUeXBlKSB7XHJcbiAgICB0ZXh0ID0gbmF0aXZlVHlwZSh0ZXh0KTtcclxuICB9XHJcbiAgaWYgKG9wdGlvbnMuc2FuaXRpemUpIHtcclxuICAgIHRleHQgPSB0ZXh0LnJlcGxhY2UoLyYvZywgJyZhbXA7JykucmVwbGFjZSgvPC9nLCAnJmx0OycpLnJlcGxhY2UoLz4vZywgJyZndDsnKTtcclxuICB9XHJcbiAgYWRkRmllbGQoJ3RleHQnLCB0ZXh0KTtcclxufVxyXG5cclxuZnVuY3Rpb24gb25Db21tZW50KGNvbW1lbnQpIHtcclxuICBpZiAob3B0aW9ucy5pZ25vcmVDb21tZW50KSB7XHJcbiAgICByZXR1cm47XHJcbiAgfVxyXG4gIGlmIChvcHRpb25zLnRyaW0pIHtcclxuICAgIGNvbW1lbnQgPSBjb21tZW50LnRyaW0oKTtcclxuICB9XHJcbiAgYWRkRmllbGQoJ2NvbW1lbnQnLCBjb21tZW50KTtcclxufVxyXG5cclxuZnVuY3Rpb24gb25FbmRFbGVtZW50KG5hbWUpIHtcclxuICB2YXIgcGFyZW50RWxlbWVudCA9IGN1cnJlbnRFbGVtZW50W29wdGlvbnMucGFyZW50S2V5XTtcclxuICBpZiAoIW9wdGlvbnMuYWRkUGFyZW50KSB7XHJcbiAgICBkZWxldGUgY3VycmVudEVsZW1lbnRbb3B0aW9ucy5wYXJlbnRLZXldO1xyXG4gIH1cclxuICBjdXJyZW50RWxlbWVudCA9IHBhcmVudEVsZW1lbnQ7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIG9uQ2RhdGEoY2RhdGEpIHtcclxuICBpZiAob3B0aW9ucy5pZ25vcmVDZGF0YSkge1xyXG4gICAgcmV0dXJuO1xyXG4gIH1cclxuICBpZiAob3B0aW9ucy50cmltKSB7XHJcbiAgICBjZGF0YSA9IGNkYXRhLnRyaW0oKTtcclxuICB9XHJcbiAgYWRkRmllbGQoJ2NkYXRhJywgY2RhdGEpO1xyXG59XHJcblxyXG5mdW5jdGlvbiBvbkRvY3R5cGUoZG9jdHlwZSkge1xyXG4gIGlmIChvcHRpb25zLmlnbm9yZURvY3R5cGUpIHtcclxuICAgIHJldHVybjtcclxuICB9XHJcbiAgZG9jdHlwZSA9IGRvY3R5cGUucmVwbGFjZSgvXiAvLCAnJyk7XHJcbiAgaWYgKG9wdGlvbnMudHJpbSkge1xyXG4gICAgZG9jdHlwZSA9IGRvY3R5cGUudHJpbSgpO1xyXG4gIH1cclxuICBhZGRGaWVsZCgnZG9jdHlwZScsIGRvY3R5cGUpO1xyXG59XHJcblxyXG5mdW5jdGlvbiBvbkVycm9yKGVycm9yKSB7XHJcbiAgZXJyb3Iubm90ZSA9IGVycm9yOyAvL2NvbnNvbGUuZXJyb3IoZXJyb3IpO1xyXG59XHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uICh4bWwsIHVzZXJPcHRpb25zKSB7XHJcblxyXG4gIHZhciBwYXJzZXIgPSBwdXJlSnNQYXJzZXIgPyBzYXgucGFyc2VyKHRydWUsIHt9KSA6IHBhcnNlciA9IG5ldyBleHBhdC5QYXJzZXIoJ1VURi04Jyk7XHJcbiAgdmFyIHJlc3VsdCA9IHt9O1xyXG4gIGN1cnJlbnRFbGVtZW50ID0gcmVzdWx0O1xyXG5cclxuICBvcHRpb25zID0gdmFsaWRhdGVPcHRpb25zKHVzZXJPcHRpb25zKTtcclxuXHJcbiAgaWYgKHB1cmVKc1BhcnNlcikge1xyXG4gICAgcGFyc2VyLm9wdCA9IHtzdHJpY3RFbnRpdGllczogdHJ1ZX07XHJcbiAgICBwYXJzZXIub25vcGVudGFnID0gb25TdGFydEVsZW1lbnQ7XHJcbiAgICBwYXJzZXIub250ZXh0ID0gb25UZXh0O1xyXG4gICAgcGFyc2VyLm9uY29tbWVudCA9IG9uQ29tbWVudDtcclxuICAgIHBhcnNlci5vbmNsb3NldGFnID0gb25FbmRFbGVtZW50O1xyXG4gICAgcGFyc2VyLm9uZXJyb3IgPSBvbkVycm9yO1xyXG4gICAgcGFyc2VyLm9uY2RhdGEgPSBvbkNkYXRhO1xyXG4gICAgcGFyc2VyLm9uZG9jdHlwZSA9IG9uRG9jdHlwZTtcclxuICAgIHBhcnNlci5vbnByb2Nlc3NpbmdpbnN0cnVjdGlvbiA9IG9uSW5zdHJ1Y3Rpb247XHJcbiAgfSBlbHNlIHtcclxuICAgIHBhcnNlci5vbignc3RhcnRFbGVtZW50Jywgb25TdGFydEVsZW1lbnQpO1xyXG4gICAgcGFyc2VyLm9uKCd0ZXh0Jywgb25UZXh0KTtcclxuICAgIHBhcnNlci5vbignY29tbWVudCcsIG9uQ29tbWVudCk7XHJcbiAgICBwYXJzZXIub24oJ2VuZEVsZW1lbnQnLCBvbkVuZEVsZW1lbnQpO1xyXG4gICAgcGFyc2VyLm9uKCdlcnJvcicsIG9uRXJyb3IpO1xyXG4gICAgLy9wYXJzZXIub24oJ3N0YXJ0Q2RhdGEnLCBvblN0YXJ0Q2RhdGEpO1xyXG4gICAgLy9wYXJzZXIub24oJ2VuZENkYXRhJywgb25FbmRDZGF0YSk7XHJcbiAgICAvL3BhcnNlci5vbignZW50aXR5RGVjbCcsIG9uRW50aXR5RGVjbCk7XHJcbiAgfVxyXG5cclxuICBpZiAocHVyZUpzUGFyc2VyKSB7XHJcbiAgICBwYXJzZXIud3JpdGUoeG1sKS5jbG9zZSgpO1xyXG4gIH0gZWxzZSB7XHJcbiAgICBpZiAoIXBhcnNlci5wYXJzZSh4bWwpKSB7XHJcbiAgICAgIHRocm93IG5ldyBFcnJvcignWE1MIHBhcnNpbmcgZXJyb3I6ICcgKyBwYXJzZXIuZ2V0RXJyb3IoKSk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBpZiAocmVzdWx0W29wdGlvbnMuZWxlbWVudHNLZXldKSB7XHJcbiAgICB2YXIgdGVtcCA9IHJlc3VsdFtvcHRpb25zLmVsZW1lbnRzS2V5XTtcclxuICAgIGRlbGV0ZSByZXN1bHRbb3B0aW9ucy5lbGVtZW50c0tleV07XHJcbiAgICByZXN1bHRbb3B0aW9ucy5lbGVtZW50c0tleV0gPSB0ZW1wO1xyXG4gICAgZGVsZXRlIHJlc3VsdC50ZXh0O1xyXG4gIH1cclxuXHJcbiAgcmV0dXJuIHJlc3VsdDtcclxuXHJcbn07XHJcbiIsInZhciBoZWxwZXIgPSByZXF1aXJlKCcuL29wdGlvbnMtaGVscGVyJyk7XHJcbnZhciB4bWwyanMgPSByZXF1aXJlKCcuL3htbDJqcycpO1xyXG5cclxuZnVuY3Rpb24gdmFsaWRhdGVPcHRpb25zICh1c2VyT3B0aW9ucykge1xyXG4gIHZhciBvcHRpb25zID0gaGVscGVyLmNvcHlPcHRpb25zKHVzZXJPcHRpb25zKTtcclxuICBoZWxwZXIuZW5zdXJlU3BhY2VzRXhpc3RzKG9wdGlvbnMpO1xyXG4gIHJldHVybiBvcHRpb25zO1xyXG59XHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKHhtbCwgdXNlck9wdGlvbnMpIHtcclxuICB2YXIgb3B0aW9ucywganMsIGpzb24sIHBhcmVudEtleTtcclxuICBvcHRpb25zID0gdmFsaWRhdGVPcHRpb25zKHVzZXJPcHRpb25zKTtcclxuICBqcyA9IHhtbDJqcyh4bWwsIG9wdGlvbnMpO1xyXG4gIHBhcmVudEtleSA9ICdjb21wYWN0JyBpbiBvcHRpb25zICYmIG9wdGlvbnMuY29tcGFjdCA/ICdfcGFyZW50JyA6ICdwYXJlbnQnO1xyXG4gIC8vIHBhcmVudEtleSA9IHB0aW9ucy5jb21wYWN0ID8gJ19wYXJlbnQnIDogJ3BhcmVudCc7IC8vIGNvbnNpZGVyIHRoaXNcclxuICBpZiAoJ2FkZFBhcmVudCcgaW4gb3B0aW9ucyAmJiBvcHRpb25zLmFkZFBhcmVudCkge1xyXG4gICAganNvbiA9IEpTT04uc3RyaW5naWZ5KGpzLCBmdW5jdGlvbiAoaywgdikgeyByZXR1cm4gayA9PT0gcGFyZW50S2V5PyAnXycgOiB2OyB9LCBvcHRpb25zLnNwYWNlcyk7XHJcbiAgfSBlbHNlIHtcclxuICAgIGpzb24gPSBKU09OLnN0cmluZ2lmeShqcywgbnVsbCwgb3B0aW9ucy5zcGFjZXMpO1xyXG4gIH1cclxuICByZXR1cm4ganNvbi5yZXBsYWNlKC9cXHUyMDI4L2csICdcXFxcdTIwMjgnKS5yZXBsYWNlKC9cXHUyMDI5L2csICdcXFxcdTIwMjknKTtcclxufTtcclxuIiwiY29uc3QgV2ViTWlkaSA9IHJlcXVpcmUoJ3dlYm1pZGknKTtcclxuXHJcblxyXG5jbGFzcyBNSURJQ29udHJvbGxlcntcclxuICAgIFxyXG4gICAgc3RhdGljIElOSVRfV0VCTUlESSgpe1xyXG4gICAgICAgIHJldHVybiBuZXcgUHJvbWlzZSggKHJlc29sdmUsIHJlamVjdCkgPT4ge1xyXG4gICAgICAgICAgICBNSURJQ29udHJvbGxlci5XZWJNaWRpID0gV2ViTWlkaTtcclxuICAgICAgICAgICAgTUlESUNvbnRyb2xsZXIuV2ViTWlkaS5lbmFibGUoIGZ1bmN0aW9uKGVycil7XHJcbiAgICAgICAgICAgICAgICBpZihlcnIpe1xyXG4gICAgICAgICAgICAgICAgICAgIHJlamVjdCgnV2ViTWlkaSBjb3VsZCBub3QgYmUgZW5hYmxlZC4nLCBlcnIpO1xyXG4gICAgICAgICAgICAgICAgfWVsc2V7XHJcbiAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZSgpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIGNvbnN0cnVjdG9yKGNvbnRyb2xsZXJOYW1lID0gbnVsbCl7XHJcbiAgICAgICAgdGhpcy5jb250cm9sbGVyTmFtZSA9IGNvbnRyb2xsZXJOYW1lO1xyXG4gICAgfVxyXG5cclxuICAgIGluaXRDb250cm9sbGVyKCl7XHJcbiAgICAgICAgdmFyIHN0YXRpY1dlYk1pZGkgPSBuZXcgUHJvbWlzZSggKHJlc29sdmUsIHJlamVjdCkgPT4ge1xyXG4gICAgICAgICAgICBpZighIE1JRElDb250cm9sbGVyLldlYk1pZGkpe1xyXG4gICAgICAgICAgICAgICAgTUlESUNvbnRyb2xsZXIuSU5JVF9XRUJNSURJKCkudGhlbiggKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIHJlc29sdmUoKTtcclxuICAgICAgICAgICAgICAgIH0pLmNhdGNoKCAoZSkgPT4ge3JlamVjdChlKTt9KTtcclxuICAgICAgICAgICAgfWVsc2V7XHJcbiAgICAgICAgICAgICAgICByZXNvbHZlKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgXHJcbiAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKCAocmVzb2x2ZSwgcmVqZWN0ICkgPT4ge1xyXG4gICAgICAgICAgICBzdGF0aWNXZWJNaWRpLnRoZW4oICgpID0+IHtcclxuXHJcbiAgICAgICAgICAgICAgICBpZihNSURJQ29udHJvbGxlci5XZWJNaWRpLmlucHV0cy5sZW5ndGggPD0gMCl0aHJvdyBcIk5vIE1JREkgRGV2aWNlIGRldGVjdGVkIVwiO1xyXG5cclxuICAgICAgICAgICAgICAgIGlmKHRoaXMuY29udHJvbGxlck5hbWUpe1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMub3V0cHV0ID0gTUlESUNvbnRyb2xsZXIuV2ViTWlkaS5nZXRPdXRwdXRCeU5hbWUodGhpcy5jb250cm9sbGVyTmFtZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5pbnB1dCA9IE1JRElDb250cm9sbGVyLldlYk1pZGkuZ2V0SW5wdXRCeU5hbWUodGhpcy5jb250cm9sbGVyTmFtZSk7XHJcbiAgICAgICAgICAgICAgICB9ZWxzZXtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLm91dHB1dCA9IE1JRElDb250cm9sbGVyLldlYk1pZGkub3V0cHV0c1swXTtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmlucHV0ID0gTUlESUNvbnRyb2xsZXIuV2ViTWlkaS5pbnB1dHNbMF07XHJcbiAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcIklOUFVUXCIsIE1JRElDb250cm9sbGVyLldlYk1pZGkuaW5wdXRzKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2codGhpcyk7XHJcblxyXG4gICAgICAgICAgICAgICAgdGhpcy5pc0luaXRpYWxpemVkID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIHJlc29sdmUodGhpcyk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIG9uTm90ZU9uKCBjYWxsYmFjayl7XHJcbiAgICAgICAgdGhpcy5fY2hlY2tNaWRpRGV2aWNlKCk7XHJcbiAgICAgICAgdGhpcy5pbnB1dC5hZGRMaXN0ZW5lcignbm90ZW9uJywgJ2FsbCcsIGNhbGxiYWNrKTtcclxuICAgIH1cclxuXHJcbiAgICBvbk5vdGVPZmYoIGNhbGxiYWNrICl7XHJcbiAgICAgICAgdGhpcy5fY2hlY2tNaWRpRGV2aWNlKCk7XHJcbiAgICAgICAgdGhpcy5pbnB1dC5hZGRMaXN0ZW5lcignbm90ZW9mZicsICdhbGwnLCBjYWxsYmFjayk7XHJcbiAgICB9XHJcblxyXG4gICAgb25JbnB1dCggY2FsbGJhY2sgKXtcclxuICAgICAgICB0aGlzLl9jaGVja01pZGlEZXZpY2UoKTtcclxuICAgICAgICB0aGlzLmlucHV0LmFkZExpc3RlbmVyKCdjb250cm9sY2hhbmdlJywgJ2FsbCcsIGNhbGxiYWNrKTtcclxuICAgIH1cclxuXHJcbiAgICBwbGF5Tm90ZSAobm90ZSwgY2hhbm5lbD0nYWxsJywgb3B0aW9ucz17ZHVyYXRpb246IDE1MDB9KXtcclxuICAgICAgICB0aGlzLl9jaGVja01pZGlEZXZpY2UoKTtcclxuICAgICAgICB0aGlzLm91dHB1dC5wbGF5Tm90ZShub3RlLCBjaGFubmVsLCBvcHRpb25zKTtcclxuICAgIH1cclxuXHJcbiAgICBfY2hlY2tNaWRpRGV2aWNlKCl7XHJcbiAgICAgICAgaWYoIXRoaXMuaXNJbml0aWFsaXplZCl0aHJvdyBcIk1JREktQ29udHJvbGxlciBpcyBub3QgaW5pdGlhbGl6ZWQgeWV0IVwiO1xyXG4gICAgfVxyXG59XHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9IE1JRElDb250cm9sbGVyOyIsImNvbnN0IFRvbmUgPSByZXF1aXJlKCd0b25lJyk7XHJcblxyXG5jbGFzcyBUb25lUGlhbm97XHJcblxyXG4gICAgY29uc3RydWN0b3IoKXtcclxuICAgICAgICB0aGlzLl9yZWNvcmRlZE5vdGVzID0gW107XHJcbiAgICAgICAgdGhpcy5fcGlhbm8gPSBudWxsO1xyXG4gICAgICAgIHRoaXMuX2luaXRQaWFubygpO1xyXG4gICAgICAgIHRoaXMuX3RlbXBvID0gMTIwO1xyXG4gICAgfVxyXG5cclxuICAgIF9pbml0UGlhbm8oKXtcclxuICAgICAgICAvL3RoaXMuX3BpYW5vID0gbmV3IFRvbmUuU3ludGgoKS50b01hc3RlcigpO1xyXG4gICAgICAgIHRoaXMuX3BpYW5vID0gbmV3IFRvbmUuU2FtcGxlcih7XHJcblx0XHRcdFwiQTBcIiA6IFwiQTAuW21wM3xvZ2ddXCIsXHJcblx0XHRcdFwiQzFcIiA6IFwiQzEuW21wM3xvZ2ddXCIsXHJcblx0XHRcdFwiRCMxXCIgOiBcIkRzMS5bbXAzfG9nZ11cIixcclxuXHRcdFx0XCJGIzFcIiA6IFwiRnMxLlttcDN8b2dnXVwiLFxyXG5cdFx0XHRcIkExXCIgOiBcIkExLlttcDN8b2dnXVwiLFxyXG5cdFx0XHRcIkMyXCIgOiBcIkMyLlttcDN8b2dnXVwiLFxyXG5cdFx0XHRcIkQjMlwiIDogXCJEczIuW21wM3xvZ2ddXCIsXHJcblx0XHRcdFwiRiMyXCIgOiBcIkZzMi5bbXAzfG9nZ11cIixcclxuXHRcdFx0XCJBMlwiIDogXCJBMi5bbXAzfG9nZ11cIixcclxuXHRcdFx0XCJDM1wiIDogXCJDMy5bbXAzfG9nZ11cIixcclxuXHRcdFx0XCJEIzNcIiA6IFwiRHMzLlttcDN8b2dnXVwiLFxyXG5cdFx0XHRcIkYjM1wiIDogXCJGczMuW21wM3xvZ2ddXCIsXHJcblx0XHRcdFwiQTNcIiA6IFwiQTMuW21wM3xvZ2ddXCIsXHJcblx0XHRcdFwiQzRcIiA6IFwiQzQuW21wM3xvZ2ddXCIsXHJcblx0XHRcdFwiRCM0XCIgOiBcIkRzNC5bbXAzfG9nZ11cIixcclxuXHRcdFx0XCJGIzRcIiA6IFwiRnM0LlttcDN8b2dnXVwiLFxyXG5cdFx0XHRcIkE0XCIgOiBcIkE0LlttcDN8b2dnXVwiLFxyXG5cdFx0XHRcIkM1XCIgOiBcIkM1LlttcDN8b2dnXVwiLFxyXG5cdFx0XHRcIkQjNVwiIDogXCJEczUuW21wM3xvZ2ddXCIsXHJcblx0XHRcdFwiRiM1XCIgOiBcIkZzNS5bbXAzfG9nZ11cIixcclxuXHRcdFx0XCJBNVwiIDogXCJBNS5bbXAzfG9nZ11cIixcclxuXHRcdFx0XCJDNlwiIDogXCJDNi5bbXAzfG9nZ11cIixcclxuXHRcdFx0XCJEIzZcIiA6IFwiRHM2LlttcDN8b2dnXVwiLFxyXG5cdFx0XHRcIkYjNlwiIDogXCJGczYuW21wM3xvZ2ddXCIsXHJcblx0XHRcdFwiQTZcIiA6IFwiQTYuW21wM3xvZ2ddXCIsXHJcblx0XHRcdFwiQzdcIiA6IFwiQzcuW21wM3xvZ2ddXCIsXHJcblx0XHRcdFwiRCM3XCIgOiBcIkRzNy5bbXAzfG9nZ11cIixcclxuXHRcdFx0XCJGIzdcIiA6IFwiRnM3LlttcDN8b2dnXVwiLFxyXG5cdFx0XHRcIkE3XCIgOiBcIkE3LlttcDN8b2dnXVwiLFxyXG5cdFx0XHRcIkM4XCIgOiBcIkM4LlttcDN8b2dnXVwiXHJcblx0XHR9LCB7XHJcblx0XHRcdFwicmVsZWFzZVwiIDogMSxcclxuXHRcdFx0XCJiYXNlVXJsXCIgOiBcIi4vYXVkaW8vc2FsYW1hbmRlci9cIlxyXG5cdFx0fSkudG9NYXN0ZXIoKTtcclxuICAgIH1cclxuICAgIGdldCByZWNvcmRlZE5vdGVzKCl7IHJldHVybiB0aGlzLl9yZWNvcmRlZE5vdGVzOyB9XHJcblxyXG4gICAgYWRkTm90ZSggbm90ZSApe1xyXG4gICAgICAgIHRoaXMuX3JlY29yZGVkTm90ZXMucHVzaChcclxuICAgICAgICAgICAgbm90ZVxyXG4gICAgICAgICk7XHJcbiAgICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICB9XHJcblxyXG4gICAgc2V0Tm90ZXMoIG5vdGVzICl7XHJcbiAgICAgICAgdGhpcy5fcmVjb3JkZWROb3RlcyA9IG5vdGVzO1xyXG4gICAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgfVxyXG5cclxuICAgIF9zZXROb3Rlc1RvVDAoKXtcclxuICAgICAgICB2YXIgbWluVGltZXN0YW1wID0gdGhpcy5fcmVjb3JkZWROb3Rlc1swXS50aW1lc3RhbXBTdGFydDtcclxuXHJcbiAgICAgICAgdGhpcy5fcmVjb3JkZWROb3Rlcy5mb3JFYWNoKCAobm90ZSkgPT4ge1xyXG4gICAgICAgICAgICBub3RlXHJcbiAgICAgICAgICAgIC5zZXRUaW1lc3RhbXBTdGFydCggKG5vdGUudGltZXN0YW1wU3RhcnQgLSBtaW5UaW1lc3RhbXApIClcclxuICAgICAgICAgICAgLnNldFRpbWVzdGFtcEVuZCggKG5vdGUudGltZXN0YW1wRW5kIC0gbWluVGltZXN0YW1wKSApO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBwbGF5UmVjb3JkKCl7XHJcbiAgICAgICAgaWYodGhpcy5fcmVjb3JkZWROb3Rlcy5sZW5ndGggPD0gMClyZXR1cm47XHJcblxyXG4gICAgICAgIHdpbmRvdy5UUkFOU1BPUlQgPSBUb25lLlRyYW5zcG9ydDtcclxuXHJcbiAgICAgICAgVG9uZS5UcmFuc3BvcnQuc3RvcCgpO1xyXG4gICAgICAgIFRvbmUuVHJhbnNwb3J0LnBvc2l0aW9uID0gMDtcclxuICAgICAgICBUb25lLlRyYW5zcG9ydC5jYW5jZWwoKTtcclxuXHJcbiAgICAgICAgdGhpcy5fc2V0Tm90ZXNUb1QwKCk7XHJcbiAgICAgICAgdGhpcy5fcmVjb3JkZWROb3Rlcy5mb3JFYWNoKCBub3RlID0+IHtcclxuICAgICAgICAgICAgVG9uZS5UcmFuc3BvcnQuc2NoZWR1bGUoIHRpbWUgPT4ge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fcGlhbm8udHJpZ2dlckF0dGFja1JlbGVhc2UoIChub3RlLnN0ZXArJycrIChub3RlLmFsdGVyID09PSAxID8gJyMnIDogbm90ZS5hbHRlciA9PT0gLTEgPyAnYicgOiAnJykrbm90ZS5vY3RhdmUpLCAobm90ZS5kdXJhdGlvblRpbWVzdGFtcC8xMDAwKSApO1xyXG4gICAgICAgICAgICB9LCAobm90ZS50aW1lc3RhbXBTdGFydC8xMDAwKSk7XHJcbiAgICAgICAgfSk7ICAgIFxyXG5cclxuICAgICAgICB2YXIgZW5kTWVsb2RpZSA9IHRoaXMuX3JlY29yZGVkTm90ZXNbIHRoaXMuX3JlY29yZGVkTm90ZXMubGVuZ3RoIC0gMV0udGltZXN0YW1wU3RhcnQgKyB0aGlzLl9yZWNvcmRlZE5vdGVzWyB0aGlzLl9yZWNvcmRlZE5vdGVzLmxlbmd0aCAtIDFdLmR1cmF0aW9uVGltZXN0YW1wO1xyXG5cclxuICAgICAgICBUb25lLlRyYW5zcG9ydC5zY2hlZHVsZSggdGltZSA9PiB7XHJcbiAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdidXR0b24tcGxheScpLmNsaWNrKCk7IC8vIFJFQUxMWSBCQUQgUFJPR1JBTU1JTkchIC0gSSBrbm93IDstKVxyXG4gICAgICAgIH0sIChlbmRNZWxvZGllLzEwMDApKTtcclxuXHJcbiAgICAgICAgVG9uZS5UcmFuc3BvcnQuc3RhcnQoKTtcclxuICAgIH1cclxuXHJcbiAgICBwbGF5UmVjb3JkRHVyYXRpb24oKXtcclxuICAgICAgICBpZih0aGlzLl9yZWNvcmRlZE5vdGVzLmxlbmd0aCA8PSAwKXJldHVybjtcclxuXHJcbiAgICAgICAgY29uc3QgVF9NSURJX1NURVAgPSA2MCAvICh0aGlzLl90ZW1wbyAqIDI0KTtcclxuXHJcbiAgICAgICAgd2luZG93LlRSQU5TUE9SVCA9IFRvbmUuVHJhbnNwb3J0O1xyXG5cclxuICAgICAgICBUb25lLlRyYW5zcG9ydC5zdG9wKCk7XHJcbiAgICAgICAgVG9uZS5UcmFuc3BvcnQucG9zaXRpb24gPSAwO1xyXG4gICAgICAgIFRvbmUuVHJhbnNwb3J0LmNhbmNlbCgpO1xyXG5cclxuICAgICAgICBsZXQgY3VycmVudE1pZGlTdGVwID0gMDtcclxuXHJcbiAgICAgICAgdGhpcy5yZWNvcmRlZE5vdGVzLmZvckVhY2goIG5vdGUgPT4ge1xyXG4gICAgICAgICAgICBUb25lLlRyYW5zcG9ydC5zY2hlZHVsZSggdGltZSA9PiB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9waWFuby50cmlnZ2VyQXR0YWNrUmVsZWFzZSggKG5vdGUuc3RlcCsnJysgKG5vdGUuYWx0ZXIgPT09IDEgPyAnIycgOiBub3RlLmFsdGVyID09PSAtMSA/ICdiJyA6ICcnKStub3RlLm9jdGF2ZSksIChub3RlLmR1cmF0aW9uKlRfTUlESV9TVEVQKSApO1xyXG4gICAgICAgICAgICB9LCBjdXJyZW50TWlkaVN0ZXAgKiBUX01JRElfU1RFUCk7XHJcbiAgICAgICAgICAgIGN1cnJlbnRNaWRpU3RlcCArPSBub3RlLmR1cmF0aW9uO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICB2YXIgZW5kTWVsb2RpZSA9IGN1cnJlbnRNaWRpU3RlcCAqIFRfTUlESV9TVEVQO1xyXG5cclxuICAgICAgICBUb25lLlRyYW5zcG9ydC5zY2hlZHVsZSggdGltZSA9PiB7XHJcbiAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdidXR0b24tbm90ZS1wbGF5JykuY2xpY2soKTsgLy8gUkVBTExZIEJBRCBQUk9HUkFNTUlORyEgLSBJIGtub3cgOy0pXHJcbiAgICAgICAgfSwgZW5kTWVsb2RpZSk7XHJcblxyXG4gICAgICAgIFRvbmUuVHJhbnNwb3J0LnN0YXJ0KCk7XHJcbiAgICB9XHJcblxyXG4gICAgcGF1c2VSZWNvcmQoKXtcclxuICAgICAgICBUb25lLlRyYW5zcG9ydC5zdG9wKCk7XHJcbiAgICB9XHJcbiAgICBjbGVhclJlY29yZCgpe1xyXG4gICAgICAgIHRoaXMuX3JlY29yZGVkTm90ZXMgPSBbXTtcclxuICAgIH1cclxufVxyXG5cclxubW9kdWxlLmV4cG9ydHMgPSBUb25lUGlhbm87IiwiY29uc3QgeG1sQ29udmVydGVyID0gcmVxdWlyZSgneG1sLWpzJyk7XHJcbmNvbnN0IE11c2ljWE1MUGFyc2VyID0gcmVxdWlyZSgnLi9NdXNpY1hNTFBhcnNlcicpO1xyXG5jb25zdCBQYXJ0ID0gcmVxdWlyZSgnLi9Db21wb3NpdGlvbkVsZW1lbnRzL1BhcnQnKTtcclxuY29uc3QgTWVhc3VyZSA9IHJlcXVpcmUoJy4vQ29tcG9zaXRpb25FbGVtZW50cy9NZWFzdXJlJyk7XHJcblxyXG5jbGFzcyBDb21wb3NpdGlvbiBleHRlbmRzIE11c2ljWE1MUGFyc2Vye1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKCl7XHJcbiAgICAgICAgc3VwZXIoKTtcclxuICAgICAgICB0aGlzLl9wYXJ0TGlzdCA9IFtdO1xyXG4gICAgICAgIHRoaXMuX3RpdGxlID0gXCJEZWZhdWx0XCI7XHJcbiAgICB9XHJcblxyXG4gICAgYWRkUGFydChwYXJ0KXsgXHJcbiAgICAgICAgaWYoIShwYXJ0IGluc3RhbmNlb2YgUGFydCkpdGhyb3cgXCJQYXJhbWV0ZXIgbXVzdCBiZSBpbnN0YW5jZSBvZiBQYXJ0XCI7XHJcbiAgICAgICAgdGhpcy5fcGFydExpc3QucHVzaChwYXJ0KTsgXHJcbiAgICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICB9XHJcbiAgICBzZXRUaXRsZSh0aXRsZSl7IFxyXG4gICAgICAgIHRoaXMuX3RpdGxlID0gdGl0bGU7IFxyXG4gICAgICAgIHJldHVybiB0aGlzOyBcclxuICAgIH1cclxuXHJcblxyXG4gICAgdG9NdXNpY1hNTGluSlNPTigpe1xyXG4gICAgICAgIGNvbnN0IEpTT04gPSB7XHJcbiAgICAgICAgICAgIF9kZWNsYXJhdGlvbjoge1xyXG4gICAgICAgICAgICAgICAgX2F0dHJpYnV0ZXM6IHtcclxuICAgICAgICAgICAgICAgICAgICB2ZXJzaW9uOiBcIjEuMFwiLFxyXG4gICAgICAgICAgICAgICAgICAgIGVuY29kaW5nOiBcIlVURi04XCJcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgX2RvY3R5cGU6IFwic2NvcmUtcGFydHdpc2UgUFVCTElDIFxcXCItLy9SZWNvcmRhcmUvL0RURCBNdXNpY1hNTCAzLjEgUGFydHdpc2UvL0VOXFxcIiBcXFwiaHR0cDovL3d3dy5tdXNpY3htbC5vcmcvZHRkcy9wYXJ0d2lzZS5kdGRcXFwiXCIsXHJcbiAgICAgICAgICAgICdzY29yZS1wYXJ0d2lzZSc6IHtcclxuICAgICAgICAgICAgICAgIF9hdHRyaWJ1dGVzOiB7IHZlcnNpb246IFwiMy4xXCJ9LFxyXG4gICAgICAgICAgICAgICAgJ3BhcnQtbGlzdCc6IHtcclxuICAgICAgICAgICAgICAgICAgICAnc2NvcmUtcGFydCc6IFtdXHJcbiAgICAgICAgICAgICAgICB9LFxyXG5cclxuICAgICAgICAgICAgICAgICdwYXJ0JzogW11cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIGlmKHRoaXMuX3RpdGxlICE9PSBudWxsKUpTT05bJ3Njb3JlLXBhcnR3aXNlJ11bJ3dvcmsnXSA9IHsnd29yay10aXRsZSc6IHsnX3RleHQnOiB0aGlzLl90aXRsZX19O1xyXG5cclxuICAgICAgICB0aGlzLl9wYXJ0TGlzdC5mb3JFYWNoKCBwYXJ0ID0+IHtcclxuICAgICAgICAgICAgSlNPTlsnc2NvcmUtcGFydHdpc2UnXVsncGFydC1saXN0J11bJ3Njb3JlLXBhcnQnXS5wdXNoKCBwYXJ0LnRvTXVzaWNYTUxQYXJ0TGlzdGluSlNPTigpWydzY29yZS1wYXJ0J10gKTtcclxuICAgICAgICAgICAgSlNPTlsnc2NvcmUtcGFydHdpc2UnXVsncGFydCddLnB1c2goIHBhcnQudG9NdXNpY1hNTGluSlNPTigpLnBhcnQgKTtcclxuICAgICAgICB9KVxyXG4gICAgICAgIHJldHVybiBKU09OO1xyXG4gICAgfVxyXG5cclxuICAgIGRvd25sb2FkKGRvd25sb2FkTmFtZSA9IFwiY29tcG9zaXRpb25cIil7XHJcbiAgICAgICAgdmFyIGRhdGFTdHIgPSBcImRhdGE6bXVzaWN4bWw7Y2hhcnNldD11dGYtOCxcIiArIGVuY29kZVVSSUNvbXBvbmVudCggdGhpcy50b011c2ljWE1MKCkgKTtcclxuICAgICAgICB2YXIgZG93bmxvYWRBbmNob3JOb2RlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYScpO1xyXG4gICAgICAgIGRvd25sb2FkQW5jaG9yTm9kZS5zZXRBdHRyaWJ1dGUoXCJocmVmXCIsICAgICBkYXRhU3RyKTtcclxuICAgICAgICBkb3dubG9hZEFuY2hvck5vZGUuc2V0QXR0cmlidXRlKFwiZG93bmxvYWRcIiwgZG93bmxvYWROYW1lK1wiLm11c2ljeG1sXCIpO1xyXG4gICAgICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQoZG93bmxvYWRBbmNob3JOb2RlKTsgLy8gcmVxdWlyZWQgZm9yIGZpcmVmb3hcclxuICAgICAgICBkb3dubG9hZEFuY2hvck5vZGUuY2xpY2soKTtcclxuICAgICAgICBkb3dubG9hZEFuY2hvck5vZGUucmVtb3ZlKCk7XHJcbiAgICB9XHJcblxyXG59XHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9IHtDb21wb3NpdGlvbiwgUGFydCwgTWVhc3VyZX07IiwiY29uc3QgTXVzaWNYTUxQYXJzZXIgPSByZXF1aXJlKCcuLi9NdXNpY1hNTFBhcnNlcicpO1xyXG5cclxuY2xhc3MgTWVhc3VyZSBleHRlbmRzIE11c2ljWE1MUGFyc2Vye1xyXG4gICAgY29uc3RydWN0b3IobWVhc3VyZU51bWJlcil7XHJcbiAgICAgICAgc3VwZXIoKTtcclxuICAgICAgICBpZihtZWFzdXJlTnVtYmVyID09PSB1bmRlZmluZWQgfHwgIU51bWJlci5pc0ludGVnZXIobWVhc3VyZU51bWJlcikpIHRocm93IFwiTWVhc3VyZSBOdW1iZXIgbXVzdCBiZSBzZXQgYXMgaW50IGluIGNvbnN0cnVjdG9yIVwiO1xyXG5cclxuICAgICAgICB0aGlzLl9udW1iZXIgPSBtZWFzdXJlTnVtYmVyO1xyXG4gICAgICAgIHRoaXMuX2F0dHJpYnV0ZXMgPSBNZWFzdXJlLkRFRkFVTFRfQVRUUklCVVRFUztcclxuICAgICAgICB0aGlzLl9ub3RlcyA9IFtdO1xyXG4gICAgfVxyXG5cclxuICAgIGdldCBudW1iZXIoKXsgcmV0dXJuIHRoaXMuX251bWJlcjsgfVxyXG4gICAgZ2V0IG5vdGVzKCl7IHJldHVybiB0aGlzLl9ub3RlczsgfVxyXG5cclxuICAgIGdldCBtZWFzdXJlRHVyYXRpb24oKXsgXHJcbiAgICAgICAgbGV0IGR1cmF0aW9uID0gMDtcclxuICAgICAgICB0aGlzLm5vdGVzLmZvckVhY2goIG5vdGUgPT4ge1xyXG4gICAgICAgICAgICBkdXJhdGlvbiArPSBub3RlLmR1cmF0aW9uO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHJldHVybiBkdXJhdGlvbjtcclxuICAgIH1cclxuXHJcbiAgICBhZGROb3RlKG5vdGUpeyB0aGlzLl9ub3Rlcy5wdXNoKG5vdGUpOyByZXR1cm4gdGhpczsgfVxyXG4gICAgc2V0QXR0cmlidXRlcyhhdHRyaWJ1dGVzKXsgdGhpcy5fYXR0cmlidXRlcyA9IGF0dHJpYnV0ZXM7IHJldHVybiB0aGlzOyB9XHJcblxyXG4gICAgdG9NdXNpY1hNTGluSlNPTigpe1xyXG4gICAgICAgIGNvbnN0IEpTT04gPSB7IFxyXG4gICAgICAgICAgICAnbWVhc3VyZSc6IHtcclxuICAgICAgICAgICAgICAgICdfYXR0cmlidXRlcyc6IHtcclxuICAgICAgICAgICAgICAgICAgICBudW1iZXI6IHRoaXMubnVtYmVyLFxyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIGlmKHRoaXMuX251bWJlciA9PT0gMSl7XHJcbiAgICAgICAgICAgIEpTT04ubWVhc3VyZS5hdHRyaWJ1dGVzID0gdGhpcy5fYXR0cmlidXRlcztcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIEpTT04ubWVhc3VyZS5ub3RlID0gW107XHJcbiAgICAgICAgdGhpcy5ub3Rlcy5mb3JFYWNoKCBub3RlID0+IHtcclxuICAgICAgICAgICAgSlNPTi5tZWFzdXJlLm5vdGUucHVzaCggbm90ZS50b011c2ljWE1MaW5KU09OKCkubm90ZSApO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICByZXR1cm4gSlNPTjtcclxuICAgIH1cclxufVxyXG5cclxuTWVhc3VyZS5ERUZBVUxUX0FUVFJJQlVURVMgPSB7XHJcbiAgICBkaXZpc2lvbnM6IHsgX3RleHQ6IDI0LCB9LFxyXG4gICAga2V5OiB7IGZpZnRoczogeyBfdGV4dDogMCB9fSxcclxuICAgIHRpbWU6IHsgXHJcbiAgICAgICAgYmVhdHM6IHsgX3RleHQ6IDQgfSwgXHJcbiAgICAgICAgJ2JlYXQtdHlwZSc6IHsgX3RleHQ6IDQgfVxyXG4gICAgfSxcclxuICAgIGNsZWY6IHtcclxuICAgICAgICBzaWduOiB7IF90ZXh0OiAnRycgfSxcclxuICAgICAgICBsaW5lOiB7IF90ZXh0OiAyfVxyXG4gICAgfVxyXG59XHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9IE1lYXN1cmU7XHJcbiIsImNvbnN0IE11c2ljWE1MUGFyc2VyID0gcmVxdWlyZSgnLi4vTXVzaWNYTUxQYXJzZXInKTtcclxuY29uc3QgTWVhc3VyZSA9IHJlcXVpcmUoJy4uL0NvbXBvc2l0aW9uRWxlbWVudHMvTWVhc3VyZScpO1xyXG5jb25zdCBOb3RlID0gcmVxdWlyZSgnLi4vLi4vVXRpbHMvTm90ZScpO1xyXG5cclxuY2xhc3MgUGFydCBleHRlbmRzIE11c2ljWE1MUGFyc2Vye1xyXG4gICAgY29uc3RydWN0b3IocGFydElEKXtcclxuICAgICAgICBzdXBlcigpO1xyXG4gICAgICAgIGlmKHBhcnRJRCA9PT0gdW5kZWZpbmVkKXRocm93IFwiUGFydCBJRCBpcyBub3QgYWxsb3dkIHRvIGJlIHVuZGVmaW5lZCFcIjtcclxuICAgICAgICB0aGlzLl9pZCA9IHBhcnRJRDtcclxuICAgICAgICB0aGlzLl9uYW1lID0gcGFydElEO1xyXG4gICAgICAgIHRoaXMuX21lYXN1cmVzID0gW107XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0IG5hbWUoKXsgcmV0dXJuIHRoaXMuX25hbWU7IH1cclxuICAgIGdldCBpZCgpeyByZXR1cm4gdGhpcy5faWQ7IH1cclxuXHJcbiAgICBzZXROYW1lKG5hbWUpeyB0aGlzLl9uYW1lID0gbmFtZTsgcmV0dXJuIHRoaXM7IH1cclxuICAgIGFkZE1lYXN1cmUobWVhc3VyZSl7IFxyXG4gICAgICAgIGlmKCEobWVhc3VyZSBpbnN0YW5jZW9mIE1lYXN1cmUpKXRocm93IFwiUGFyYW1ldGVyIG11c3QgYmUgaW5zdGFuY2Ugb2YgTWVhc3VyZVwiO1xyXG4gICAgICAgIHRoaXMuX21lYXN1cmVzLnB1c2gobWVhc3VyZSk7IFxyXG4gICAgICAgIHJldHVybiB0aGlzOyBcclxuICAgIH1cclxuICAgIGFkZE5vdGUobm90ZSl7XHJcbiAgICAgICAgTm90ZS52YWxpZGF0ZShub3RlKTtcclxuICAgICAgICB2YXIgbGF0ZXN0TWVhc3VyZSA9IHRoaXMuX21lYXN1cmVzW3RoaXMuX21lYXN1cmVzLmxlbmd0aCAtIDFdO1xyXG4gICAgICAgIFxyXG4gICAgICAgIGlmKGxhdGVzdE1lYXN1cmUgPT09IHVuZGVmaW5lZCl7XHJcbiAgICAgICAgICAgIHRoaXMuYWRkTWVhc3VyZSggbmV3IE1lYXN1cmUoIHRoaXMuX21lYXN1cmVzLmxlbmd0aCsxICkpOyAgICBcclxuICAgICAgICAgICAgbGF0ZXN0TWVhc3VyZSA9IHRoaXMuX21lYXN1cmVzW3RoaXMuX21lYXN1cmVzLmxlbmd0aCAtIDFdO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyppZihsYXRlc3RNZWFzdXJlID09PSB1bmRlZmluZWQgfHwgbGF0ZXN0TWVhc3VyZS5tZWFzdXJlRHVyYXRpb24gPj0gOTYpeyAgIC8vIGNyZWF0ZSBuZXcgTWVhc3VyZSBvbiBvdmVyZmxvd1xyXG4gICAgICAgICAgICB0aGlzLmFkZE1lYXN1cmUoIG5ldyBNZWFzdXJlKCB0aGlzLl9tZWFzdXJlcy5sZW5ndGgrMSApKTsgICAgXHJcbiAgICAgICAgICAgIGxhdGVzdE1lYXN1cmUgPSB0aGlzLl9tZWFzdXJlc1t0aGlzLl9tZWFzdXJlcy5sZW5ndGggLSAxXTtcclxuICAgICAgICB9Ki9cclxuXHJcbiAgICAgICAgbGF0ZXN0TWVhc3VyZS5hZGROb3RlKCBub3RlICk7XHJcbiAgICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICB9XHJcblxyXG4gICAgdG9NdXNpY1hNTFBhcnRMaXN0aW5KU09OKCl7XHJcbiAgICAgICAgY29uc3QgcGFydEpTT04gPSB7IFxyXG4gICAgICAgICAgICAnc2NvcmUtcGFydCc6IHtcclxuICAgICAgICAgICAgICAgICdfYXR0cmlidXRlcyc6IHtcclxuICAgICAgICAgICAgICAgICAgICBpZDogdGhpcy5pZCxcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIGlmKHRoaXMubmFtZSAhPT0gbnVsbClwYXJ0SlNPTlsnc2NvcmUtcGFydCddWydwYXJ0LW5hbWUnXSA9IHRoaXMubmFtZTtcclxuICAgICAgICBcclxuICAgICAgICByZXR1cm4gcGFydEpTT047ICAgIFxyXG4gICAgfVxyXG5cclxuICAgIHRvTXVzaWNYTUxpbkpTT04oKXtcclxuICAgICAgICBjb25zdCBKU09OID0ge1xyXG4gICAgICAgICAgICAncGFydCc6IHtcclxuICAgICAgICAgICAgICAgICdfYXR0cmlidXRlcyc6IHtcclxuICAgICAgICAgICAgICAgICAgICBpZDogdGhpcy5pZFxyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIEpTT04ucGFydC5tZWFzdXJlID0gW107XHJcbiAgICAgICAgdGhpcy5fbWVhc3VyZXMuZm9yRWFjaCggbWVhc3VyZSA9PiB7XHJcbiAgICAgICAgICAgIEpTT04ucGFydC5tZWFzdXJlLnB1c2goIG1lYXN1cmUudG9NdXNpY1hNTGluSlNPTigpLm1lYXN1cmUgKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgcmV0dXJuIEpTT047XHJcbiAgICB9XHJcbn1cclxuXHJcbm1vZHVsZS5leHBvcnRzID0gUGFydDsiLCJjb25zdCB4bWxDb252ZXJ0ZXIgPSByZXF1aXJlKCd4bWwtanMnKTtcclxud2luZG93LnhtbENvbnZlcnRlciA9IHhtbENvbnZlcnRlcjtcclxuXHJcbmNsYXNzIE11c2ljWE1MUGFyc2Vye1xyXG5cclxuXHJcbiAgICB0b011c2ljWE1MKCl7XHJcbiAgICAgICAgcmV0dXJuIHhtbENvbnZlcnRlci5qczJ4bWwoIHRoaXMudG9NdXNpY1hNTGluSlNPTigpICwgeyBjb21wYWN0OiB0cnVlLCBpZ25vcmVDb21tZW50OiB0cnVlLCBzcGFjZXM6IDB9ICk7XHJcbiAgICB9XHJcbn1cclxuXHJcbm1vZHVsZS5leHBvcnRzID0gTXVzaWNYTUxQYXJzZXI7IiwiY2xhc3MgT1NNRHtcclxuICAgIGNvbnN0cnVjdG9yKCl7XHJcbiAgICAgICAgdGhpcy5fY29udGFpbmVySUQgPSAnb3NtZENvbnRhaW5lcic7XHJcblxyXG4gICAgICAgIHRoaXMuX29zbWQgPSBuZXcgd2luZG93Lm9wZW5zaGVldG11c2ljZGlzcGxheS5PcGVuU2hlZXRNdXNpY0Rpc3BsYXkoIHRoaXMuX2NvbnRhaW5lcklEICk7XHJcblxyXG4gICAgfVxyXG5cclxuICAgIHJlbmRlck11c2ljWE1MKCBtdXNpY1hNTCApIHtcclxuICAgICAgICB0aGlzLl9vc21kXHJcbiAgICAgICAgICAgIC5sb2FkKCBtdXNpY1hNTCApXHJcbiAgICAgICAgICAgIC50aGVuKCAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9vc21kLnJlbmRlcigpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgIH1cclxufVxyXG5cclxuXHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9IG5ldyBPU01EKCk7XHJcbiIsImNvbnN0IE5vdGUgPSByZXF1aXJlKCcuLi8uLi9VdGlscy9Ob3RlJyk7XHJcbmNvbnN0IHtDbHVzdGVyIH0gPSByZXF1aXJlKCcuL1V0aWxzJyk7XHJcblxyXG5jbGFzcyBDbHVzdGVyQWxnb3JpdGhteyAvL0FCU1RSQUNUXHJcblxyXG4gICAgY29uc3RydWN0b3IoKXtcclxuICAgICAgICB0aGlzLl9jbHVzdGVyID0gW107XHJcbiAgICAgICAgdGhpcy5fZGF0YXNldCA9IFtdO1xyXG4gICAgfVxyXG5cclxuICAgIHNldERhdGFzZXQoIG5vdGVBcnJheSApe1xyXG4gICAgICAgIHRoaXMuX2RhdGFzZXQgPSBub3RlQXJyYXk7XHJcbiAgICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0Q2x1c3RlcklkT2ZSZWNvcmQoIG5vdGUgKXtcclxuICAgICAgICByZXR1cm4gdGhpcy5fZ2V0Q2x1c3RlcklkT2ZSZWNvcmQobm90ZSk7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0Q2x1c3RlckNlbnRyb2lkTWFwKCl7XHJcbiAgICAgICAgbGV0IG1hcCA9IFtdO1xyXG4gICAgICAgIHRoaXMuX2NsdXN0ZXIuZm9yRWFjaCggY2x1c3RlciA9PiB7XHJcbiAgICAgICAgICAgIGNsdXN0ZXIuY2FsY0NlbnRyb2lkKCk7XHJcbiAgICAgICAgICAgIG1hcC5wdXNoKFxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIGNsdXN0ZXJfaWQ6IGNsdXN0ZXIuaWQsXHJcbiAgICAgICAgICAgICAgICAgICAgY2VudHJvaWQ6IGNsdXN0ZXIuY2VudHJvaWQsXHJcbiAgICAgICAgICAgICAgICAgICAgY2x1c3RlcjogY2x1c3RlclxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICApO1xyXG4gICAgICAgIH0pOyBcclxuXHJcbiAgICAgICAgbWFwLnNvcnQoIChhLGIpID0+IHtcclxuICAgICAgICAgICAgcmV0dXJuIChhLmNlbnRyb2lkIC0gYi5jZW50cm9pZCk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHJldHVybiBtYXA7XHJcbiAgICB9XHJcbn1cclxuXHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9IENsdXN0ZXJBbGdvcml0aG07IiwiY29uc3QgTm90ZSA9IHJlcXVpcmUoJy4uLy4uL1V0aWxzL05vdGUnKTtcclxuXHJcbmNsYXNzIENsdXN0ZXJ7XHJcbiAgICBcclxuICAgIGNvbnN0cnVjdG9yKCl7XHJcbiAgICAgICAgdGhpcy5fZWxlbWVudHMgPSBbXTtcclxuICAgICAgICB0aGlzLl9jZW50cm9pZCA9IG51bGw7XHJcbiAgICAgICAgdGhpcy5fbWF4RGlzdGFuY2UgPSBudWxsO1xyXG5cclxuICAgICAgICB0aGlzLl9pZCA9IENsdXN0ZXIuR0VUX0NMVVNURVJfSUQoKTtcclxuICAgIH1cclxuXHJcbiAgICBhZGRFbGVtZW50KCBub3RlICl7XHJcbiAgICAgICAgTm90ZS52YWxpZGF0ZShub3RlKTtcclxuICAgICAgICB0aGlzLl9lbGVtZW50cy5wdXNoKG5vdGUpO1xyXG4gICAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgfVxyXG5cclxuICAgIGR1bXBFbGVtZW50cygpe1xyXG4gICAgICAgIHRoaXMuX2VsZW1lbnRzID0gW107XHJcbiAgICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICB9XHJcblxyXG4gICAgc2V0Q2VudHJvaWRWYWx1ZSh0aW1lc3RhbXBTdW1tKXtcclxuICAgICAgICBpZih0aW1lc3RhbXBTdW1tID09PSB1bmRlZmluZWQgfHwgTnVtYmVyKHRpbWVzdGFtcFN1bW0pICE9PSB0aW1lc3RhbXBTdW1tKXRocm93IFwiUGFyYW1ldGVyIG11c3QgYmUgTnVtYmVyIVwiO1xyXG4gICAgICAgIHRoaXMuX2NlbnRyb2lkID0gdGltZXN0YW1wU3VtbTtcclxuICAgICAgICByZXR1cm4gdGhpcztcclxuICAgIH1cclxuXHJcbiAgICBjYWxjQ2VudHJvaWQoKXsgICAgLy9XQVMgV0VOTiBLRUlORSBFTEVNRU5URSBaVUdFT1JETkVUIFdFUkRFTiE/XHJcbiAgICAgICAgbGV0IGNlbnRyb2lkU3VtbSA9IDA7XHJcbiAgICAgICAgdGhpcy5fZWxlbWVudHMuZm9yRWFjaCggbm90ZSA9PiB7XHJcbiAgICAgICAgICAgIGNlbnRyb2lkU3VtbSArPSBub3RlLmR1cmF0aW9uVGltZXN0YW1wXHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgdGhpcy5fY2VudHJvaWQgPSBjZW50cm9pZFN1bW0gLyAodGhpcy5fZWxlbWVudHMubGVuZ3RoID4gMCA/IHRoaXMuX2VsZW1lbnRzLmxlbmd0aDogMSk7XHJcbiAgICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICB9XHJcbiAgICBcclxuICAgIGNhbGNNYXhEaXN0YW5jZSgpe1xyXG4gICAgICAgIHRoaXMuX21heERpc3RhbmNlID0gMDtcclxuICAgICAgICB0aGlzLl9lbGVtZW50cy5mb3JFYWNoKCBub3RlID0+IHtcclxuICAgICAgICAgICAgbGV0IGNhbGNEaXN0YW5jZSA9IHRoaXMuZ2V0RGlzdGFuY2UoIG5vdGUgKTtcclxuICAgICAgICAgICAgaWYoIGNhbGNEaXN0YW5jZSA+IHRoaXMuX21heERpc3RhbmNlKXtcclxuICAgICAgICAgICAgICAgIHRoaXMuX21heERpc3RhbmNlID0gY2FsY0Rpc3RhbmNlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0RGlzdGFuY2UoIG5vdGUgKXtcclxuICAgICAgICBOb3RlLnZhbGlkYXRlKG5vdGUpO1xyXG4gICAgICAgIHJldHVybiBNYXRoLmFicyggdGhpcy5fY2VudHJvaWQgLSBub3RlLmR1cmF0aW9uVGltZXN0YW1wICk7XHJcbiAgICB9XHJcblxyXG5cclxuICAgIGdldCBlbGVtZW50cygpe1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9lbGVtZW50cztcclxuICAgIH1cclxuXHJcbiAgICBnZXQgY2VudHJvaWQoKXtcclxuICAgICAgICBpZih0aGlzLl9jZW50cm9pZCA9PT0gbnVsbCl0aHJvdyBcIkNlbnRyb2lkIHVuZGVmaW5lZCEgUGxlYXNlIGV4ZWMgY2FsYyBDZW50cm9pZCFcIjtcclxuICAgICAgICByZXR1cm4gdGhpcy5fY2VudHJvaWQ7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0IG1heERpc3RhbmNlKCl7XHJcbiAgICAgICAgaWYodGhpcy5fbWF4RGlzdGFuY2UgPT09IG51bGwpdGhyb3cgXCJNYXggRGlzdGFuY2UgdW5kZWZpbmVkISBQbGVhc2UgZXhlYyBjYWxjIENlbnRyb2lkIVwiO1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9tYXhEaXN0YW5jZTtcclxuICAgIH1cclxuXHJcbiAgICBnZXQgbWF4RWxlbWVudCgpe1xyXG4gICAgICAgIGlmKHRoaXMuX2VsZW1lbnRzLmxlbmd0aCA8PSAwKXRocm93IFwiTm8gZWxlbWVudHMgYXZhaWxhYmxlIVwiO1xyXG4gICAgICAgIHRoaXMuX2VsZW1lbnRzLnNvcnQoIChhLGIpID0+IHtcclxuICAgICAgICAgICAgcmV0dXJuIChhLmR1cmF0aW9uVGltZXN0YW1wIC0gYi5kdXJhdGlvblRpbWVzdGFtcCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2VsZW1lbnRzWzBdO1xyXG4gICAgfVxyXG5cclxuICAgIGdldCBtaW5FbGVtZW50KCl7XHJcbiAgICAgICAgaWYodGhpcy5fZWxlbWVudHMubGVuZ3RoIDw9IDApdGhyb3cgXCJObyBlbGVtZW50cyBhdmFpbGFibGUhXCI7XHJcbiAgICAgICAgdGhpcy5fZWxlbWVudHMuc29ydCggKGEsYikgPT4ge1xyXG4gICAgICAgICAgICByZXR1cm4gKGIuZHVyYXRpb25UaW1lc3RhbXAgLSBhLmR1cmF0aW9uVGltZXN0YW1wKTtcclxuICAgICAgICB9KTtcclxuICAgICAgICByZXR1cm4gdGhpcy5fZWxlbWVudHNbMF07XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0IGlkKCl7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2lkO1xyXG4gICAgfVxyXG5cclxuICAgIHN0YXRpYyBHRVRfQ0xVU1RFUl9JRCgpe1xyXG4gICAgICAgIENsdXN0ZXIuQ0xVU1RFUl9JRCsrO1xyXG4gICAgICAgIHJldHVybiBcImNsdXN0ZXJfXCIrQ2x1c3Rlci5DTFVTVEVSX0lEO1xyXG4gICAgfVxyXG59XHJcbkNsdXN0ZXIuQ0xVU1RFUl9JRCA9IDA7XHJcblxyXG5cclxubW9kdWxlLmV4cG9ydHMgPSB7XHJcbiAgICBDbHVzdGVyOiBDbHVzdGVyXHJcbn07IiwiY29uc3QgTm90ZSA9IHJlcXVpcmUoJy4uLy4uL1V0aWxzL05vdGUnKTtcclxuY29uc3Qge0NsdXN0ZXIgfSA9IHJlcXVpcmUoJy4vVXRpbHMnKTtcclxuY29uc3QgQ2x1c3RlckFsZ29yaXRobSA9IHJlcXVpcmUoJy4vQ2x1c3RlckFsZ29yaXRobScpO1xyXG5cclxuY2xhc3MgREJTQ0FOIGV4dGVuZHMgQ2x1c3RlckFsZ29yaXRobXtcclxuXHJcbiAgICBjb25zdHJ1Y3RvcihlID0gMjAwMCl7XHJcbiAgICAgICAgc3VwZXIoKTtcclxuICAgICAgICB0aGlzLl9lID0gZTsgICBcclxuICAgIH1cclxuXHJcbiAgICBnZW5lcmF0ZUNsdXN0ZXIoKXtcclxuICAgICAgICBpZih0aGlzLl9kYXRhc2V0Lmxlbmd0aCA8PSAwKSB0aHJvdyBcIlRoZXJlIGlzIG5vIGRhdGEgc2V0LCB0byBnZW5lcmF0ZSBDbHVzdGVycyBmcm9tLlwiO1xyXG4gICAgICAgIHRoaXMuX2RhdGFzZXQuc29ydCggKGEsYikgPT4ge1xyXG4gICAgICAgICAgICByZXR1cm4gKGEuZHVyYXRpb25UaW1lc3RhbXAgLSBiLmR1cmF0aW9uVGltZXN0YW1wKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgdGhpcy5fY2x1c3Rlci5wdXNoKFxyXG4gICAgICAgICAgICBuZXcgQ2x1c3RlcigpLmFkZEVsZW1lbnQoIHRoaXMuX2RhdGFzZXRbMF0gKVxyXG4gICAgICAgICk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgdGhpcy5fZGF0YXNldC5mb3JFYWNoKCAobm90ZSxpbmRleCkgPT4geyAgIC8vYXNzdW1wdGlvbjogY2x1c3RlcjEgaGF2ZSBhbHJlYWR5IGJlZW4gY2x1c3RlcmVkLCBjbHVzdGVyMiBoYXZlIG5vIGNsdXN0ZXJcclxuICAgICAgICAgICAgaWYoaW5kZXggPD0gMClyZXR1cm47XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBsZXQgY3VycmVudENsdXN0ZXIgPSB0aGlzLl9jbHVzdGVyWyB0aGlzLl9jbHVzdGVyLmxlbmd0aCAtIDEgXTtcclxuICAgICAgICAgICAgbGV0IG1heER1cmF0aW9uID0gY3VycmVudENsdXN0ZXIubWF4RWxlbWVudC5kdXJhdGlvblRpbWVzdGFtcDtcclxuXHJcbiAgICAgICAgICAgIGlmKCBub3RlLmR1cmF0aW9uVGltZXN0YW1wIDwgKG1heER1cmF0aW9uICsgdGhpcy5fZSkpe1xyXG4gICAgICAgICAgICAgICAgY3VycmVudENsdXN0ZXIuYWRkRWxlbWVudCggbm90ZSApO1xyXG4gICAgICAgICAgICB9ZWxzZXtcclxuICAgICAgICAgICAgICAgIHRoaXMuX2NsdXN0ZXIucHVzaChcclxuICAgICAgICAgICAgICAgICAgICBuZXcgQ2x1c3RlcigpLmFkZEVsZW1lbnQoIG5vdGUgKVxyXG4gICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICByZXR1cm4gdGhpcztcclxuICAgIH1cclxuXHJcbiAgICBfZ2V0Q2x1c3RlcklkT2ZSZWNvcmQobm90ZSl7XHJcbiAgICAgICAgbGV0IGNsdXN0ZXJJZCA9IHVuZGVmaW5lZDtcclxuICAgICAgICB0aGlzLl9jbHVzdGVyLmZvckVhY2goIGNsdXN0ZXIgPT4ge1xyXG4gICAgICAgICAgICBsZXQgbWF4VmFsdWUgPSBjbHVzdGVyLm1heEVsZW1lbnQuZHVyYXRpb25UaW1lc3RhbXAsXHJcbiAgICAgICAgICAgICAgICBtaW5WYWx1ZSA9IGNsdXN0ZXIubWluRWxlbWVudC5kdXJhdGlvblRpbWVzdGFtcDtcclxuXHJcbiAgICAgICAgICAgIGlmKCBub3RlLmR1cmF0aW9uVGltZXN0YW1wID4gKG1pblZhbHVlIC0gdGhpcy5fZSkgJiYgbm90ZS5kdXJhdGlvblRpbWVzdGFtcCA8IChtYXhWYWx1ZSArIHRoaXMuX2UpKXtcclxuICAgICAgICAgICAgICAgIGNsdXN0ZXJJZCA9IGNsdXN0ZXIuaWQ7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgICAgICBpZihjbHVzdGVySWQpe1xyXG4gICAgICAgICAgICByZXR1cm4gY2x1c3RlcklkO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aHJvdyBcIkdpdmVuIGluIG5vdGUgY291bGRudCBiZSBjbHVzdGVyZWQhXCI7XHJcbiAgICB9XHJcbn1cclxuXHJcbm1vZHVsZS5leHBvcnRzID0gREJTQ0FOOyIsImNvbnN0IE5vdGUgPSByZXF1aXJlKCcuLi8uLi9VdGlscy9Ob3RlJyk7XHJcbmNvbnN0IHtDbHVzdGVyIH0gPSByZXF1aXJlKCcuL1V0aWxzJyk7XHJcbmNvbnN0IENsdXN0ZXJBbGdvcml0aG0gPSByZXF1aXJlKCcuL0NsdXN0ZXJBbGdvcml0aG0nKTtcclxuXHJcbmNsYXNzIGtNZWFucyBleHRlbmRzIENsdXN0ZXJBbGdvcml0aG17XHJcblxyXG4gICAgY29uc3RydWN0b3IoayA9IG51bGwpe1xyXG4gICAgICAgIGlmKCFOdW1iZXIuaXNJbnRlZ2VyKGspICYmIGsgPCAwKXRocm93IFwiayBtdXN0IGJlIGludCBhbmQgZ3JlYXRlciB6ZXJvIVwiO1xyXG4gICAgICAgIHN1cGVyKCk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgdGhpcy5fayA9IGs7XHJcbiAgICB9XHJcblxyXG4gICAgZ2VuZXJhdGVDbHVzdGVyKG1heEl0ZXJhdGlvbnMgPSAxMDApe1xyXG4gICAgICAgIHRoaXMuX2NsdXN0ZXIgPSBbXTtcclxuICAgICAgICBpZih0aGlzLl9kYXRhc2V0Lmxlbmd0aCA8IHRoaXMuX2spdGhyb3cgXCJEYXRhc2V0IG11c3QgYmUgbW9yZSBlbGVtZW50cyB0aGVuIFwiK3RoaXMuX2s7XHJcblxyXG4gICAgICAgIGZvcihsZXQgayA9IDA7IGsgPCB0aGlzLl9rOyBrKyspeyAgIC8vSU5JVCBDTFVTVEVSXHJcbiAgICAgICAgICAgIGxldCBtaW4gPSAwLCBtYXggPSB0aGlzLl9kYXRhc2V0Lmxlbmd0aDtcclxuXHJcbiAgICAgICAgICAgIGxldCByYW5kb21JbmRleCA9IE1hdGguZmxvb3IoIE1hdGgucmFuZG9tKCkgKiBtYXgpICsgbWluO1xyXG4gICAgICAgICAgICB0aGlzLl9jbHVzdGVyLnB1c2goICBuZXcgQ2x1c3RlcigpLnNldENlbnRyb2lkVmFsdWUoIHRoaXMuX2RhdGFzZXRbcmFuZG9tSW5kZXhdLmR1cmF0aW9uVGltZXN0YW1wICkgKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGZvcihsZXQgaSA9IDA7IGkgPCBtYXhJdGVyYXRpb25zOyBpKyspeyAgICAvL1p1b3JkbnVuZ1xyXG4gICAgICAgICAgICBsZXQgbm9SZWNvcmRTd2l0Y2hlZENsdXN0ZXIgPSB0cnVlO1xyXG4gICAgICAgICAgICB0aGlzLl9kYXRhc2V0LmZvckVhY2goIG5vdGUgPT4ge1xyXG4gICAgICAgICAgICAgICAgbGV0IGJlc3RDbHVzdGVyID0gdGhpcy5nZXROZWFyZXN0Q2x1c3Rlciggbm90ZSApO1xyXG5cclxuICAgICAgICAgICAgICAgIGlmKCFub3RlLmhhc093blByb3BlcnR5KCdsYXN0Q2x1c3RlcicpKXtcclxuICAgICAgICAgICAgICAgICAgICBub1JlY29yZFN3aXRjaGVkQ2x1c3RlciA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgfWVsc2V7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYobm90ZS5sYXN0Q2x1c3RlciAhPT0gYmVzdENsdXN0ZXIuaWQpbm9SZWNvcmRTd2l0Y2hlZENsdXN0ZXIgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBub3RlLmxhc3RDbHVzdGVyID0gYmVzdENsdXN0ZXIuaWQ7XHJcbiAgICAgICAgICAgICAgICBiZXN0Q2x1c3Rlci5hZGRFbGVtZW50KCBub3RlICk7XHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgaWYobm9SZWNvcmRTd2l0Y2hlZENsdXN0ZXIpe1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHRoaXMuX2NsdXN0ZXIuZm9yRWFjaCggY2x1c3RlciA9PiB7IC8vQWt0dWFsaXNpZXJ1bmdcclxuICAgICAgICAgICAgICAgIGNsdXN0ZXIuY2FsY0NlbnRyb2lkKCk7XHJcbiAgICAgICAgICAgICAgICBjbHVzdGVyLmR1bXBFbGVtZW50cygpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0TmVhcmVzdENsdXN0ZXIoIG5vdGUgKXtcclxuICAgICAgICB2YXIgbWluQ2x1c3RlciA9IHRoaXMuX2NsdXN0ZXJbMF07XHJcbiAgICAgICAgdGhpcy5fY2x1c3Rlci5mb3JFYWNoKCBjbHVzdGVyID0+IHtcclxuICAgICAgICAgICAgaWYoIGNsdXN0ZXIuZ2V0RGlzdGFuY2Uobm90ZSkgPCBtaW5DbHVzdGVyLmdldERpc3RhbmNlKG5vdGUpKXtcclxuICAgICAgICAgICAgICAgIG1pbkNsdXN0ZXIgPSBjbHVzdGVyO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgcmV0dXJuIG1pbkNsdXN0ZXI7XHJcbiAgICB9XHJcblxyXG4gICAgX2dldENsdXN0ZXJJZE9mUmVjb3JkKCBub3RlICl7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0TmVhcmVzdENsdXN0ZXIobm90ZSkuaWQ7XHJcbiAgICB9XHJcbn1cclxuXHJcbm1vZHVsZS5leHBvcnRzID0ga01lYW5zOyIsImNvbnN0IEJQTSA9IHJlcXVpcmUoJy4uL1V0aWxzL0JQTScpO1xyXG5jb25zdCBPU01EID0gcmVxdWlyZSgnLi4vT1NNRC9pbmRleCcpO1xyXG5jb25zdCB7Q29tcG9zaXRpb24sIFBhcnQsIE1lYXN1cmV9ID0gcmVxdWlyZSgnLi4vTXVzaWNYTUwvQ29tcG9zaXRpb24nKTtcclxuY29uc3QgREJTQ0FOID0gcmVxdWlyZSgnLi9DbHVzdGVyaW5nL2Ric2NhbicpO1xyXG5jb25zdCBLTWVhbnMgPSByZXF1aXJlKCcuL0NsdXN0ZXJpbmcvay1tZWFucycpO1xyXG5jb25zdCBOb3RlID0gcmVxdWlyZSgnLi4vVXRpbHMvTm90ZScpO1xyXG5cclxuY2xhc3MgTm90ZVByb2Nlc3NvcntcclxuXHJcbiAgICBjb25zdHJ1Y3Rvcigpe1xyXG4gICAgICAgIHRoaXMuX25vdGVzID0gW107XHJcbiAgICAgICAgdGhpcy5fY29tcG9zaXRpb24gPSBuZXcgQ29tcG9zaXRpb24oKS5zZXRUaXRsZShcIk5vdGUtV3JpdGVyXCIpO1xyXG4gICAgICAgIHRoaXMuX3BhcnQgPSBuZXcgUGFydCgnUDEnKS5zZXROYW1lKCdCZWV0aG92ZW5zIFBpYW5vJyk7XHJcbiAgICAgICAgdGhpcy5fb3NtZCA9IE9TTUQ7XHJcblxyXG5cclxuICAgICAgICB0aGlzLl9rID0gMjtcclxuICAgICAgICB0aGlzLl9lID0gMjAwO1xyXG5cclxuICAgICAgICB0aGlzLl9jbGFzc2lmaWNhdGlvblRpbWVzID0gWzYsMTIsMjQsNDgsOTZdO1xyXG4gICAgICAgIHRoaXMuX2NvbXBvc2l0aW9uLmFkZFBhcnQoIHRoaXMuX3BhcnQgKTtcclxuICAgIH1cclxuXHJcbiAgICBpbml0Q29tcG9zaXRpb24oKXtcclxuICAgICAgICB0aGlzLl9jb21wb3NpdGlvbiA9IG5ldyBDb21wb3NpdGlvbigpLnNldFRpdGxlKFwiTm90ZS1Xcml0ZXJcIik7XHJcbiAgICAgICAgdGhpcy5fcGFydCA9IG5ldyBQYXJ0KCdQMScpLnNldE5hbWUoJ0JlZXRob3ZlbnMgUGlhbm8nKTtcclxuXHJcbiAgICAgICAgdGhpcy5fY29tcG9zaXRpb24uYWRkUGFydCggdGhpcy5fcGFydCApO1xyXG4gICAgICAgIE9TTUQucmVuZGVyTXVzaWNYTUwoIHRoaXMuX2NvbXBvc2l0aW9uLnRvTXVzaWNYTUwoKSApO1xyXG4gICAgfVxyXG5cclxuICAgIGdldCBub3Rlcygpe1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9ub3RlcztcclxuICAgIH1cclxuXHJcbiAgICBwdXNoTm90ZShub3RlKXtcclxuICAgICAgICB0aGlzLl9ub3Rlcy5wdXNoKG5vdGUpO1xyXG4gICAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgfVxyXG5cclxuICAgIGNsZWFyTm90ZXMoKXtcclxuICAgICAgICB0aGlzLl9ub3RlcyA9IFtdO1xyXG4gICAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgfVxyXG5cclxuICAgIHByb2Nlc3NOb3RlRHVyYXRpb25EQlNDQU4oKXtcclxuICAgICAgICB0aGlzLmluaXRDb21wb3NpdGlvbigpO1xyXG4gICAgICAgIGxldCBkYnNjYW4gPSBuZXcgREJTQ0FOKCB0aGlzLl9lICkuc2V0RGF0YXNldCggdGhpcy5fbm90ZXMgKS5nZW5lcmF0ZUNsdXN0ZXIoKTsgXHJcblxyXG4gICAgICAgIHRoaXMuX21hcCA9IGRic2Nhbi5nZXRDbHVzdGVyQ2VudHJvaWRNYXAoKTtcclxuICAgIFxyXG5cclxuICAgICAgICB0aGlzLl9tYXAuZm9yRWFjaCggKGNsdXN0ZXJNYXAsIGluZGV4KSA9PiB7XHJcbiAgICAgICAgICAgIGlmKGluZGV4ID09PSAwKXtcclxuICAgICAgICAgICAgICAgIGNsdXN0ZXJNYXAuZHVyYXRpb24gPSAxMjtcclxuICAgICAgICAgICAgfWVsc2V7XHJcbiAgICAgICAgICAgICAgICBsZXQgY2FsY3VsYXRlZER1cmF0aW9uID0gKGNsdXN0ZXJNYXAuY2VudHJvaWQgLyB0aGlzLl9tYXBbMF0uY2VudHJvaWQpICogMTI7XHJcbiAgICAgICAgICAgICAgICBsZXQgbmVhcmVzdER1cmF0aW9uID0gMTI7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9jbGFzc2lmaWNhdGlvblRpbWVzLmZvckVhY2goIGR1cmF0aW9uID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBpZihNYXRoLmFicyhkdXJhdGlvbi1jYWxjdWxhdGVkRHVyYXRpb24pIDwgbmVhcmVzdER1cmF0aW9uKW5lYXJlc3REdXJhdGlvbiA9IGR1cmF0aW9uO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICBjbHVzdGVyTWFwLmR1cmF0aW9uID0gbmVhcmVzdER1cmF0aW9uO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIGNvbnNvbGUubG9nKHRoaXMuX21hcCk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgdGhpcy5fbm90ZXMuc29ydCggKGEsYikgPT4ge1xyXG4gICAgICAgICAgICByZXR1cm4gKGEudGltZXN0YW1wU3RhcnQgLSBiLnRpbWVzdGFtcFN0YXJ0KTtcclxuICAgICAgICB9KS5mb3JFYWNoKCBub3RlID0+IHtcclxuICAgICAgICAgICAgbGV0IGNsdXN0ZXJJZCA9IGRic2Nhbi5nZXRDbHVzdGVySWRPZlJlY29yZCggbm90ZSApO1xyXG4gICAgICAgICAgICBsZXQgZHVyYXRpb24gPSB0aGlzLl9tYXAuZmlsdGVyKCBlbGVtZW50ID0+IGVsZW1lbnQuY2x1c3Rlcl9pZCA9PT0gY2x1c3RlcklkKVswXS5kdXJhdGlvbjtcclxuICAgICAgICAgICAgbm90ZS5zZXREdXJhdGlvbiggZHVyYXRpb24pO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICAvKmZvcihsZXQgaSA9IDA7IGkgPCAodGhpcy5fbm90ZXMubGVuZ3RoLTEpOyBpKyspe1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZyhcIk5PVEUgXCIraSk7XHJcbiAgICAgICAgICAgIGxldCBub3RlMSA9IHRoaXMuX25vdGVzW2ldO1xyXG4gICAgICAgICAgICBsZXQgbm90ZTIgPSB0aGlzLl9ub3Rlc1tpKzFdO1xyXG5cclxuICAgICAgICAgICAgbGV0IHJlc3RUaW1lID0gbm90ZTIudGltZXN0YW1wU3RhcnQgLSBub3RlMS50aW1lc3RhbXBFbmQ7XHJcbiAgICAgICAgICAgIHRyeXtcclxuICAgICAgICAgICAgICAgIGxldCByZXN0Tm90ZSA9IG5ldyBOb3RlKClcclxuICAgICAgICAgICAgICAgICAgICAuc2V0VGltZXN0YW1wU3RhcnQoIG5vdGUxLnRpbWVzdGFtcEVuZCArIDEpXHJcbiAgICAgICAgICAgICAgICAgICAgLnNldFRpbWVzdGFtcEVuZCggbm90ZTIudGltZXN0YW1wU3RhcnQgLSAxICk7XHJcbiAgICAgICAgICAgICAgICBsZXQgY2x1c3RlcklkID0gZGJzY2FuNC5nZXRDbHVzdGVySWRPZlJlY29yZCggcmVzdE5vdGUgKTtcclxuICAgICAgICAgICAgICAgIGxldCBkdXJhdGlvbiA9IG1hcC5maWx0ZXIoIGVsID0+IGVsLmNsdXN0ZXJfaWQgPT09IGNsdXN0ZXJJZClbMF0uZHVyYXRpb247XHJcbiAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgIHJlc3ROb3RlLnNldER1cmF0aW9uKCBkdXJhdGlvbiApOyBcclxuICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgdGhpcy5fbm90ZXMuc3BsaWNlKCBpKzEsIDAsIHJlc3ROb3RlKTtcclxuICAgICAgICAgICAgfWNhdGNoKGUpe30gLy9ub3QgY2x1c3RlcmFibGVcclxuICAgICAgICB9Ki9cclxuXHJcbiAgICAgICAgdGhpcy5fbm90ZXMuZm9yRWFjaCggbm90ZSA9PiB0aGlzLl9wYXJ0LmFkZE5vdGUoIG5vdGUgKSk7ICAgICAgICBcclxuICAgICAgICBPU01ELnJlbmRlck11c2ljWE1MKCB0aGlzLl9jb21wb3NpdGlvbi50b011c2ljWE1MKCkgKTtcclxuICAgIH1cclxuXHJcbiAgICBwcm9jZXNzTm90ZUR1cmF0aW9uS01FQU5TKCl7XHJcbiAgICAgICAgdGhpcy5pbml0Q29tcG9zaXRpb24oKTtcclxuICAgICAgICBsZXQgZGJzY2FuNCA9IG5ldyBLTWVhbnMoIHRoaXMuX2sgKS5zZXREYXRhc2V0KCB0aGlzLl9ub3RlcyApLmdlbmVyYXRlQ2x1c3RlcigpO1xyXG5cclxuICAgICAgICB0aGlzLl9tYXAgPSBkYnNjYW40LmdldENsdXN0ZXJDZW50cm9pZE1hcCgpO1xyXG4gICAgXHJcbiAgICAgICAgdGhpcy5fbWFwLmZvckVhY2goIChjbHVzdGVyTWFwLCBpbmRleCkgPT4ge1xyXG4gICAgICAgICAgICBpZihpbmRleCA9PT0gMCl7XHJcbiAgICAgICAgICAgICAgICBjbHVzdGVyTWFwLmR1cmF0aW9uID0gMTI7XHJcbiAgICAgICAgICAgIH1lbHNle1xyXG4gICAgICAgICAgICAgICAgbGV0IGNhbGN1bGF0ZWREdXJhdGlvbiA9IChjbHVzdGVyTWFwLmNlbnRyb2lkIC8gdGhpcy5fbWFwWzBdLmNlbnRyb2lkKSAqIDEyO1xyXG4gICAgICAgICAgICAgICAgbGV0IG5lYXJlc3REdXJhdGlvbiA9IDEyO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fY2xhc3NpZmljYXRpb25UaW1lcy5mb3JFYWNoKCBkdXJhdGlvbiA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYoTWF0aC5hYnMoZHVyYXRpb24tY2FsY3VsYXRlZER1cmF0aW9uKSA8IG5lYXJlc3REdXJhdGlvbiluZWFyZXN0RHVyYXRpb24gPSBkdXJhdGlvbjtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgY2x1c3Rlck1hcC5kdXJhdGlvbiA9IG5lYXJlc3REdXJhdGlvbjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBjb25zb2xlLmxvZyggdGhpcy5fbWFwKTtcclxuICAgICAgICBcclxuICAgICAgICB0aGlzLl9ub3Rlcy5zb3J0KCAoYSxiKSA9PiB7XHJcbiAgICAgICAgICAgIHJldHVybiAoYS50aW1lc3RhbXBTdGFydCAtIGIudGltZXN0YW1wU3RhcnQpO1xyXG4gICAgICAgIH0pLmZvckVhY2goIG5vdGUgPT4ge1xyXG4gICAgICAgICAgICBsZXQgY2x1c3RlcklkID0gZGJzY2FuNC5nZXRDbHVzdGVySWRPZlJlY29yZCggbm90ZSApO1xyXG4gICAgICAgICAgICBsZXQgZHVyYXRpb24gPSB0aGlzLl9tYXAuZmlsdGVyKCBlbGVtZW50ID0+IGVsZW1lbnQuY2x1c3Rlcl9pZCA9PT0gY2x1c3RlcklkKVswXS5kdXJhdGlvbjtcclxuICAgICAgICAgICAgbm90ZS5zZXREdXJhdGlvbiggZHVyYXRpb24pO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICAvKmZvcihsZXQgaSA9IDA7IGkgPCAodGhpcy5fbm90ZXMubGVuZ3RoLTEpOyBpKyspe1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZyhcIk5PVEUgXCIraSk7XHJcbiAgICAgICAgICAgIGxldCBub3RlMSA9IHRoaXMuX25vdGVzW2ldO1xyXG4gICAgICAgICAgICBsZXQgbm90ZTIgPSB0aGlzLl9ub3Rlc1tpKzFdO1xyXG5cclxuICAgICAgICAgICAgbGV0IHJlc3RUaW1lID0gbm90ZTIudGltZXN0YW1wU3RhcnQgLSBub3RlMS50aW1lc3RhbXBFbmQ7XHJcbiAgICAgICAgICAgIHRyeXtcclxuICAgICAgICAgICAgICAgIGxldCByZXN0Tm90ZSA9IG5ldyBOb3RlKClcclxuICAgICAgICAgICAgICAgICAgICAuc2V0VGltZXN0YW1wU3RhcnQoIG5vdGUxLnRpbWVzdGFtcEVuZCArIDEpXHJcbiAgICAgICAgICAgICAgICAgICAgLnNldFRpbWVzdGFtcEVuZCggbm90ZTIudGltZXN0YW1wU3RhcnQgLSAxICk7XHJcbiAgICAgICAgICAgICAgICBsZXQgY2x1c3RlcklkID0gZGJzY2FuNC5nZXRDbHVzdGVySWRPZlJlY29yZCggcmVzdE5vdGUgKTtcclxuICAgICAgICAgICAgICAgIGxldCBkdXJhdGlvbiA9IG1hcC5maWx0ZXIoIGVsID0+IGVsLmNsdXN0ZXJfaWQgPT09IGNsdXN0ZXJJZClbMF0uZHVyYXRpb247XHJcbiAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgIHJlc3ROb3RlLnNldER1cmF0aW9uKCBkdXJhdGlvbiApOyBcclxuICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgdGhpcy5fbm90ZXMuc3BsaWNlKCBpKzEsIDAsIHJlc3ROb3RlKTtcclxuICAgICAgICAgICAgfWNhdGNoKGUpe30gLy9ub3QgY2x1c3RlcmFibGVcclxuICAgICAgICB9Ki9cclxuXHJcbiAgICAgICAgdGhpcy5fbm90ZXMuZm9yRWFjaCggbm90ZSA9PiB0aGlzLl9wYXJ0LmFkZE5vdGUoIG5vdGUgKSk7ICAgICAgICBcclxuICAgICAgICBPU01ELnJlbmRlck11c2ljWE1MKCB0aGlzLl9jb21wb3NpdGlvbi50b011c2ljWE1MKCkgKTtcclxuICAgIH1cclxuXHJcblxyXG4gICAgZG93bmxvYWROb3Rlc2hlZXQoKXtcclxuICAgICAgICB0aGlzLl9jb21wb3NpdGlvbi5kb3dubG9hZCgpO1xyXG4gICAgfVxyXG59XHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9IE5vdGVQcm9jZXNzb3I7IiwiY2xhc3MgQlBNe1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKCl7XHJcbiAgICAgICAgdGhpcy5DTEFTU0lGSUNBVElPTl84MF8xNDAgPSBbXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHR5cGU6ICd3aG9sZScsXHJcbiAgICAgICAgICAgICAgICBkdXJhdGlvbjogOTYsXHJcbiAgICAgICAgICAgICAgICB1cHBlckJvdW5kOiAzMDAwLFxyXG4gICAgICAgICAgICAgICAgbG93ZXJCb3VuZDogMTcxMFxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB0eXBlOiAnaGFsZicsXHJcbiAgICAgICAgICAgICAgICBkdXJhdGlvbjogNDgsXHJcbiAgICAgICAgICAgICAgICB1cHBlckJvdW5kOiAxNTAwLFxyXG4gICAgICAgICAgICAgICAgbG93ZXJCb3VuZDogODYwXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHR5cGU6ICdxdWFydGVyJyxcclxuICAgICAgICAgICAgICAgIGR1cmF0aW9uOiAyNCxcclxuICAgICAgICAgICAgICAgIHVwcGVyQm91bmQ6IDc1MCxcclxuICAgICAgICAgICAgICAgIGxvd2VyQm91bmQ6IDQzMFxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB0eXBlOiAnZWlnaHRoJyxcclxuICAgICAgICAgICAgICAgIGR1cmF0aW9uOiAxMixcclxuICAgICAgICAgICAgICAgIHVwcGVyQm91bmQ6IDM4MCxcclxuICAgICAgICAgICAgICAgIGxvd2VyQm91bmQ6IDIxMFxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB0eXBlOiAnMTZ0aCcsXHJcbiAgICAgICAgICAgICAgICBkdXJhdGlvbjogNixcclxuICAgICAgICAgICAgICAgIHVwcGVyQm91bmQ6IDE5MCxcclxuICAgICAgICAgICAgICAgIGxvd2VyQm91bmQ6IDExMFxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgXTtcclxuICAgIH1cclxuXHJcblxyXG4gICAgR0VUX0RVUkFUSU9OX0M4MDE0MCggc3RhcnRUUywgZW5kVFMgKXtcclxuICAgICAgICBjb25zdCBkdXJhdGlvbiA9IGVuZFRTIC0gc3RhcnRUUztcclxuXHJcbiAgICAgICAgdGhpcy5DTEFTU0lGSUNBVElPTl84MF8xNDAuZm9yRWFjaCggYnBtQ2xhc3MgPT4ge1xyXG4gICAgICAgICAgICBpZihkdXJhdGlvbiA8IGJwbUNsYXNzLnVwcGVyQm91bmQgJiYgZHVyYXRpb24gPiBicG1DbGFzcy5sb3dlckJvdW5kKXtcclxuICAgICAgICAgICAgICAgIHJldHVybiAoIGJwbUNsYXNzLmR1cmF0aW9uICk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgcmV0dXJuIDEyO1xyXG4gICAgfVxyXG59XHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9IG5ldyBCUE0oKTsiLCJjb25zdCBNdXNpY1hNTFBhcnNlciA9IHJlcXVpcmUoJy4uL011c2ljWE1ML011c2ljWE1MUGFyc2VyJyk7XHJcblxyXG5jbGFzcyBOb3RlIGV4dGVuZHMgTXVzaWNYTUxQYXJzZXJ7XHJcbiAgICBjb25zdHJ1Y3Rvcigpe1xyXG4gICAgICAgIHN1cGVyKCk7XHJcbiAgICAgICAgdGhpcy5fc3RlcCA9IG51bGw7XHJcbiAgICAgICAgdGhpcy5fb2N0YXZlID0gbnVsbDtcclxuICAgICAgICB0aGlzLl9hbHRlciA9IG51bGw7XHJcbiAgICAgICAgdGhpcy5fZHVyYXRpb24gPSBudWxsO1xyXG5cclxuICAgICAgICB0aGlzLl90aW1lc3RhbXBTdGFydCA9IG51bGw7XHJcbiAgICAgICAgdGhpcy5fdGltZXN0YW1wRW5kID0gbnVsbDtcclxuICAgICAgICB0aGlzLl92ZWxvY2l0eSA9IDE7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0IHN0ZXAoKXsgcmV0dXJuIHRoaXMuX3N0ZXA7IH1cclxuICAgIGdldCBvY3RhdmUoKXsgcmV0dXJuIHRoaXMuX29jdGF2ZTsgfVxyXG4gICAgZ2V0IGFsdGVyKCl7IHJldHVybiB0aGlzLl9hbHRlcjsgfVxyXG4gICAgZ2V0IGR1cmF0aW9uKCl7IHJldHVybiB0aGlzLl9kdXJhdGlvbjsgfVxyXG4gICAgZ2V0IHR5cGUoKXtcclxuICAgICAgICBsZXQgdGhlRHVyYXRpb25UeXBlID0gTm90ZS5UWVBFUy5maWx0ZXIoIGR1cmF0aW9uVHlwZSA9PiB7XHJcbiAgICAgICAgICAgIHJldHVybiBkdXJhdGlvblR5cGUuZHVyYXRpb24gPT09IHRoaXMuZHVyYXRpb247XHJcbiAgICAgICAgfSlbMF07XHJcbiAgICAgICAgcmV0dXJuIHRoZUR1cmF0aW9uVHlwZSA/IHRoZUR1cmF0aW9uVHlwZS50eXBlIDogbnVsbDtcclxuICAgIH1cclxuICAgIFxyXG4gICAgZ2V0IGR1cmF0aW9uVGltZXN0YW1wKCl7IHJldHVybiBwYXJzZUludCh0aGlzLnRpbWVzdGFtcEVuZCAtIHRoaXMudGltZXN0YW1wU3RhcnQpOyB9XHJcbiAgICBnZXQgdGltZXN0YW1wU3RhcnQoKXsgcmV0dXJuICh0aGlzLl90aW1lc3RhbXBTdGFydCk7IH1cclxuICAgIGdldCB0aW1lc3RhbXBFbmQoKXsgcmV0dXJuICh0aGlzLl90aW1lc3RhbXBFbmQpOyB9XHJcbiAgICBnZXQgdmVsb2NpdHkoKXsgcmV0dXJuIHRoaXMuX3ZlbG9jaXR5OyB9XHJcbiAgICBoYXNFbmRlZCgpeyByZXR1cm4gdGhpcy5fdGltZXN0YW1wRW5kICE9PSBudWxsO31cclxuXHJcbiAgICBnZXQgaXNSZXN0KCl7IHJldHVybiAodGhpcy5zdGVwID09PSBudWxsIHx8IHRoaXMub2N0YXZlID09PSBudWxsKTsgfVxyXG5cclxuICAgIGdldCBjb2xvcigpe1xyXG4gICAgICAgIGxldCBub3RlQ29sb3IgPSAnI0ZGNkVGRic7XHJcbiAgICAgICAgc3dpdGNoICh0aGlzLmR1cmF0aW9uKSB7XHJcbiAgICAgICAgICAgIGNhc2UgNjpcclxuICAgICAgICAgICAgICAgIG5vdGVDb2xvciA9ICcjRkY4QTI0JztcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlIDEyOlxyXG4gICAgICAgICAgICAgICAgbm90ZUNvbG9yID0gJyNDNDMwRkYnO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgMjQ6XHJcbiAgICAgICAgICAgICAgICBub3RlQ29sb3IgPSAnI0U4MjMyMCc7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSA0ODpcclxuICAgICAgICAgICAgICAgIG5vdGVDb2xvciA9ICcjMjAzQUU4JztcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlIDk2OlxyXG4gICAgICAgICAgICAgICAgbm90ZUNvbG9yID0gJyMwREYzRkYnO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBub3RlQ29sb3I7XHJcbiAgICB9XHJcblxyXG4gICAgc2V0U3RlcChzdGVwKXtcclxuICAgICAgICBpZih0eXBlb2Ygc3RlcCAhPT0gJ3N0cmluZycpdGhyb3cgXCJJbnZhbGlkIHN0ZXAgKFwiK3N0ZXArXCIpIGdpdmVuIGluISBNdXN0IGJlIFN0cmluZyFcIjtcclxuICAgICAgICBpZihzdGVwLmluY2x1ZGVzKCcjJykpe1xyXG4gICAgICAgICAgICBzdGVwID0gc3RlcC5yZXBsYWNlKCcjJywgJycpO1xyXG4gICAgICAgICAgICB0aGlzLnNldEFsdGVyKDEpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZihzdGVwLmluY2x1ZGVzKCdiJykpe1xyXG4gICAgICAgICAgICBzdGVwID0gc3RlcC5yZXBsYWNlKCdiJywgJycpO1xyXG4gICAgICAgICAgICB0aGlzLnNldEFsdGVyKC0xKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgc3RlcCA9IHN0ZXAudG9VcHBlckNhc2UoKTtcclxuICAgICAgICBpZighTm90ZS5WQUxJRF9TVEVQUy5pbmNsdWRlcyhzdGVwKSl0aHJvdyBcIkludmFsaWQgc3RlcCAoXCIrc3RlcCtcIikgZ2l2ZW4gaW4hXCI7XHJcbiAgICAgICAgdGhpcy5fc3RlcCA9IHN0ZXA7IFxyXG4gICAgICAgIHJldHVybiB0aGlzOyBcclxuICAgIH1cclxuICAgIHNldE9jdGF2ZShvY3RhdmUpeyBcclxuICAgICAgICBpZighTnVtYmVyLmlzSW50ZWdlcihvY3RhdmUpIHx8IG9jdGF2ZSA8IDApdGhyb3cgXCJJbnZhbGlkIG9jdGF2ZSAoXCIrb2N0YXZlK1wiKSBnaXZlbiBpbiFcIjtcclxuICAgICAgICB0aGlzLl9vY3RhdmUgPSBvY3RhdmU7IFxyXG4gICAgICAgIHJldHVybiB0aGlzOyBcclxuICAgIH1cclxuICAgIHNldEFsdGVyKGFsdGVyKXsgXHJcbiAgICAgICAgaWYoIU51bWJlci5pc0ludGVnZXIoYWx0ZXIpIHx8IGFsdGVyIDwgLTIgfHwgYWx0ZXIgPiAyKXRocm93IFwiSW52YWxpZCBhbHRlciAoXCIrYWx0ZXIrXCIpIGdpdmVuIGluIVwiO1xyXG4gICAgICAgIHRoaXMuX2FsdGVyID0gYWx0ZXI7IFxyXG4gICAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgfVxyXG4gICAgc2V0RHVyYXRpb24oZHVyYXRpb24pe1xyXG4gICAgICAgIGlmKCFOdW1iZXIuaXNJbnRlZ2VyKGR1cmF0aW9uKSB8fCBkdXJhdGlvbiA8IDApdGhyb3cgXCJJbnZhbGlkIGR1cmF0aW9uIChcIitkdXJhdGlvbitcIikgZ2l2ZW4gaW4hXCI7XHJcbiAgICAgICAgdGhpcy5fZHVyYXRpb24gPSBkdXJhdGlvbjtcclxuICAgICAgICByZXR1cm4gdGhpcztcclxuICAgIH1cclxuXHJcbiAgICBzZXRUaW1lc3RhbXBTdGFydCh0aW1lc3RhbXApeyAgdGhpcy5fdGltZXN0YW1wU3RhcnQgPSB0aW1lc3RhbXA7IHJldHVybiB0aGlzOyB9XHJcbiAgICBzZXRUaW1lc3RhbXBFbmQodGltZXN0YW1wKXsgIHRoaXMuX3RpbWVzdGFtcEVuZCA9IHRpbWVzdGFtcDsgcmV0dXJuIHRoaXM7IH1cclxuICAgIHNldFZlbG9jaXR5KHZlbG9jaXR5KXsgdGhpcy5fdmVsb2NpdHkgPSB2ZWxvY2l0eTsgcmV0dXJuIHRoaXM7IH1cclxuICAgIFxyXG5cclxuICAgIHRvU3RyaW5nKCl7XHJcbiAgICAgICAgcmV0dXJuIFwiXCIrdGhpcy5zdGVwK3RoaXMub2N0YXZlO1xyXG4gICAgfVxyXG5cclxuICAgIHRvTXVzaWNYTUxpbkpTT04oKXtcclxuICAgICAgICBpZih0aGlzLmR1cmF0aW9uID09PSBudWxsKXRocm93IFwiRHVyYXRpb24gaXMgbm90IHNldC4gQ2FudCBjb25zdHJ1Y3QgTXVzaWNYTUwgTm90ZS5cIjtcclxuICAgICAgICBjb25zdCB0b25lSlNPTiA9IHt9XHJcbiAgICAgICAgaWYodGhpcy5pc1Jlc3Qpe1xyXG4gICAgICAgICAgICB0b25lSlNPTi5ub3RlID0ge1xyXG4gICAgICAgICAgICAgICAgICAgIHJlc3Q6IHsgfVxyXG4gICAgICAgICAgICAgICAgfTtcclxuICAgICAgICB9ZWxzZXtcclxuICAgICAgICAgICAgdG9uZUpTT04ubm90ZSA9IHtcclxuICAgICAgICAgICAgICAgICAgICBwaXRjaDoge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBzdGVwOiB7IF90ZXh0OiB0aGlzLnN0ZXAgfSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgb2N0YXZlOiB7IF90ZXh0OiB0aGlzLm9jdGF2ZX1cclxuICAgICAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgfTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRvbmVKU09OLm5vdGUuZHVyYXRpb24gPSB7IF90ZXh0OiB0aGlzLmR1cmF0aW9uIH07XHJcbiAgICAgICAgICAgICAgXHJcbiAgICAgICAgaWYodGhpcy5hbHRlciAhPT0gbnVsbCl7XHJcbiAgICAgICAgICAgIHRvbmVKU09OLm5vdGUucGl0Y2hbJ2FsdGVyJ10gPSB7IF90ZXh0OiB0aGlzLmFsdGVyIH07XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZih0aGlzLnR5cGUgIT09IG51bGwpe1xyXG4gICAgICAgICAgICB0b25lSlNPTi5ub3RlLnR5cGUgPSB7IF90ZXh0OiB0aGlzLnR5cGUgfTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiB0b25lSlNPTjtcclxuICAgIH1cclxuXHJcbiAgICB0b0pTT04oKXtcclxuICAgICAgICBjb25zdCBqc29uT2JqID0ge307XHJcblxyXG4gICAgICAgIC8vYWRkIGFsbCBwcml2YXRlIChfbm90ZSkgYXR0cmlidXRlcyB0byBqc29uXHJcbiAgICAgICAgY29uc3QgYXR0cmlidXRlcyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzKHRoaXMpO1xyXG4gICAgICAgIGF0dHJpYnV0ZXMuZm9yRWFjaCgga2V5ID0+IHtcclxuICAgICAgICAgICAgaWYoa2V5LmNoYXJBdCgwKSA9PT0gJ18nKXtcclxuICAgICAgICAgICAgICAgIGpzb25PYmpba2V5LnN1YnN0cmluZygxLCBrZXkubGVuZ3RoKV0gPSB0aGlzW2tleV07XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuXHJcblxyXG4gICAgICAgIGpzb25PYmpbJ2R1cmF0aW9uVGltZXN0YW1wJ10gPSB0aGlzLmR1cmF0aW9uVGltZXN0YW1wO1xyXG4gICAgICAgIGpzb25PYmpbJ2lzUmVzdCddID0gdGhpcy5pc1Jlc3Q7XHJcbiAgICAgICAganNvbk9ialsndHlwZSddID0gdGhpcy50eXBlO1xyXG4gICAgICAgIGpzb25PYmpbJ3ZlbG9jaXR5J10gPSB0aGlzLnZlbG9jaXR5O1xyXG5cclxuICAgICAgICByZXR1cm4ganNvbk9iajtcclxuICAgIH1cclxuXHJcbiAgICBzdGF0aWMgZXF1YWxzKG4xLCBuMil7XHJcbiAgICAgICAgcmV0dXJuIChuMS5zdGVwID09PSBuMi5zdGVwKSAmJiAobjEub2N0YXZlID09PSBuMi5vY3RhdmUpICYmIChuMS5hbHRlciA9PT0gbjIuYWx0ZXIpO1xyXG4gICAgfVxyXG5cclxuICAgIHN0YXRpYyB2YWxpZGF0ZSggbm90ZSApe1xyXG4gICAgICAgIGlmKCEobm90ZSBpbnN0YW5jZW9mIE5vdGUpKXRocm93IFwiUGFyYW1ldGVyIGdpdmVuIGluIG11c3QgYmUgdHlwZSBvZiBOb3RlIVwiO1xyXG4gICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgfVxyXG5cclxuICAgIHN0YXRpYyBjbG9uZSggbm90ZSApe1xyXG4gICAgICAgIGlmIChudWxsID09IG5vdGUgfHwgXCJvYmplY3RcIiAhPSB0eXBlb2Ygbm90ZSkgcmV0dXJuIG5vdGU7XHJcbiAgICAgICAgdmFyIGNvcHkgPSBuZXcgTm90ZSgpO1xyXG4gICAgICAgIGZvciAodmFyIGF0dHIgaW4gbm90ZSkge1xyXG4gICAgICAgICAgICBpZiAobm90ZS5oYXNPd25Qcm9wZXJ0eShhdHRyKSkgY29weVthdHRyXSA9IG5vdGVbYXR0cl07XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBjb3B5O1xyXG4gICAgfVxyXG59XHJcblxyXG5Ob3RlLlZBTElEX1NURVBTID0gWydBJywgJ0InLCAnQycsICdEJywgJ0UnLCAnRicsICdHJ107XHJcbk5vdGUuVFlQRVMgPSBbIFxyXG4gICAgeyBkdXJhdGlvbjogOTYsIHR5cGU6ICd3aG9sZSd9LFxyXG4gICAgeyBkdXJhdGlvbjogNDgsIHR5cGU6ICdoYWxmJ30sXHJcbiAgICB7IGR1cmF0aW9uOiAyNCwgdHlwZTogJ3F1YXJ0ZXInfSxcclxuICAgIHsgZHVyYXRpb246IDEyLCB0eXBlOiAnZWlnaHRoJ30sXHJcbiAgICB7IGR1cmF0aW9uOiA2LCB0eXBlOiAnMTZ0aCd9LFxyXG4gICAgeyBkdXJhdGlvbjogMywgdHlwZTogJzMybmQnfSwgICAgXHJcbl07XHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9IE5vdGU7IiwiY29uc3QgTm90ZSA9IHJlcXVpcmUoJy4vTm90ZScpO1xyXG5jb25zdCBNaWRpQ29udHJvbGxlciA9IHJlcXVpcmUoJy4uL01JREkvTUlESUNvbnRyb2xsZXInKTtcclxuXHJcbmNsYXNzIE5vdGVTdHJlYW17XHJcblxyXG4gICAgY29uc3RydWN0b3IobWlkaUNvbnRyb2xsZXIpe1xyXG4gICAgICAgIGlmKCEobWlkaUNvbnRyb2xsZXIgaW5zdGFuY2VvZiBNaWRpQ29udHJvbGxlcikpdGhyb3cgXCJQYXJhbWV0ZXIgbXVzdCBiZSBhIGluc3RhbmNlIG9mIE1pZGlDb250cm9sbGVyIVwiO1xyXG4gICAgICAgIHRoaXMuX21pZGlDb250cm9sbGVyID0gbWlkaUNvbnRyb2xsZXI7XHJcbiAgICAgICAgdGhpcy5fYWN0aXZlID0gdHJ1ZTtcclxuXHJcbiAgICAgICAgdGhpcy5fbWlkaUNvbnRyb2xsZXIuaW5pdENvbnRyb2xsZXIoKS50aGVuKCAoKSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMuX21pZGlDb250cm9sbGVyLm9uTm90ZU9uKCAoZXZlbnQpID0+IHtcclxuICAgICAgICAgICAgICAgIHRoaXMuX29uTm90ZShldmVudCk7XHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgdGhpcy5fbWlkaUNvbnRyb2xsZXIub25Ob3RlT2ZmKCAoZXZlbnQpID0+IHtcclxuICAgICAgICAgICAgICAgIHRoaXMuX29mZk5vdGUoZXZlbnQpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9KTtcclxuXHJcblxyXG4gICAgICAgIHRoaXMuX3N0YXJ0ZWROb3RlcyA9IFtdO1xyXG4gICAgICAgIHRoaXMuX2NhbGxiYWNrcyA9IFtdO1xyXG4gICAgfVxyXG5cclxuICAgIHJlZ2lzdGVyQ2FsbGJhY2soIGNhbGxiYWNrICl7XHJcbiAgICAgICAgaWYodHlwZW9mIGNhbGxiYWNrICE9PSBcImZ1bmN0aW9uXCIpdGhyb3cgXCJQYXJhbWV0ZXIgbXVzdCBiZSBmdW5jdGlvbiFcIjtcclxuICAgICAgICB0aGlzLl9jYWxsYmFja3MucHVzaChjYWxsYmFjayk7XHJcbiAgICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICB9XHJcblxyXG4gICAgc2V0QWN0aXZlKCl7XHJcbiAgICAgICAgdGhpcy5fYWN0aXZlID0gdHJ1ZTtcclxuICAgICAgICByZXR1cm4gdGhpcztcclxuICAgIH1cclxuXHJcbiAgICBzZXRJbmFjdGl2ZSgpe1xyXG4gICAgICAgIHRoaXMuX2FjdGl2ZSA9IGZhbHNlO1xyXG4gICAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgfVxyXG5cclxuICAgIF9vbk5vdGUoZXZlbnQpe1xyXG4gICAgICAgIHRoaXMuX3N0YXJ0ZWROb3Rlcy5wdXNoKFxyXG4gICAgICAgICAgICBuZXcgTm90ZSgpXHJcbiAgICAgICAgICAgICAgICAuc2V0U3RlcCggZXZlbnQubm90ZS5uYW1lIClcclxuICAgICAgICAgICAgICAgIC5zZXRPY3RhdmUoIGV2ZW50Lm5vdGUub2N0YXZlIClcclxuICAgICAgICAgICAgICAgIC5zZXRUaW1lc3RhbXBTdGFydCggZXZlbnQudGltZXN0YW1wIClcclxuICAgICAgICAgICAgICAgIC5zZXRWZWxvY2l0eSggZXZlbnQudmVsb2NpdHkgKVxyXG4gICAgICAgICk7XHJcbiAgICB9XHJcblxyXG4gICAgX29mZk5vdGUoZXZlbnQpe1xyXG4gICAgICAgIGNvbnN0IHJlZk5vdGUgPSBuZXcgTm90ZSgpXHJcbiAgICAgICAgICAgIC5zZXRTdGVwKCBldmVudC5ub3RlLm5hbWUgKVxyXG4gICAgICAgICAgICAuc2V0T2N0YXZlKCBldmVudC5ub3RlLm9jdGF2ZSApO1xyXG5cclxuICAgICAgICBmb3IobGV0IGkgPSAwOyBpIDwgdGhpcy5fc3RhcnRlZE5vdGVzLmxlbmd0aDsgaSsrKXtcclxuICAgICAgICAgICAgaWYoTm90ZS5lcXVhbHModGhpcy5fc3RhcnRlZE5vdGVzW2ldLCByZWZOb3RlKSl7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBvZmZOb3RlID0gdGhpcy5fc3RhcnRlZE5vdGVzLnNwbGljZShpLCAxKVswXTtcclxuICAgICAgICAgICAgICAgIG9mZk5vdGUuc2V0VGltZXN0YW1wRW5kKCBldmVudC50aW1lc3RhbXAgKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuX3NlbmROb3RlKCBvZmZOb3RlICk7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBfc2VuZE5vdGUoIG5vdGUgKXtcclxuICAgICAgICBpZighdGhpcy5fYWN0aXZlKXJldHVybjtcclxuICAgICAgICBcclxuICAgICAgICB0aGlzLl9jYWxsYmFja3MuZm9yRWFjaCggY2FsbGJhY2sgPT4ge1xyXG4gICAgICAgICAgICBjYWxsYmFjayhub3RlKTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxufVxyXG5cclxubW9kdWxlLmV4cG9ydHMgPSBOb3RlU3RyZWFtOyIsImNvbnN0IE1JRElDb250cm9sbGVyID0gcmVxdWlyZSgnLi9NSURJL01JRElDb250cm9sbGVyJyk7XHJcbi8vY29uc3QgTUlESVJlY29yZGVyID0gcmVxdWlyZSgnLi9NSURJL01JRElSZWNvcmRlcicpO1xyXG4vL2NvbnN0IE9TTUQgPSByZXF1aXJlKCcuL09TTUQvaW5kZXgnKTtcclxuLy9jb25zdCBOb3RlID0gcmVxdWlyZSgnLi9VdGlscy9Ob3RlJyk7XHJcbi8vY29uc3QgQlBNID0gcmVxdWlyZSgnLi9VdGlscy9CUE0nKTtcclxuY29uc3QgTm90ZVN0cmVhbSA9IHJlcXVpcmUoJy4vVXRpbHMvTm90ZVN0cmVhbScpO1xyXG5jb25zdCBOb3RlUHJvY2Vzc29yID0gcmVxdWlyZSgnLi9Qcm9jZXNzaW5nL05vdGVQcm9jZXNzb3InKTtcclxuLy9jb25zdCB7Q29tcG9zaXRpb24sIFBhcnQsIE1lYXN1cmV9ID0gcmVxdWlyZSgnLi9NdXNpY1hNTC9Db21wb3NpdGlvbicpO1xyXG4vL2NvbnN0IE5vdGVEdW1wID0gcmVxdWlyZSgnLi9Qcm9jZXNzaW5nL05vdGVEdW1wJyk7XHJcbmNvbnN0IFBpYW5vID0gcmVxdWlyZSgnLi9NSURJL1RvbmVQaWFubycpO1xyXG4vL3dpbmRvdy5Ob3RlID0gTm90ZTtcclxuLy93aW5kb3cuQ29tcG9zaXRpb24gPSBDb21wb3NpdGlvbjtcclxuLy93aW5kb3cuUGFydCA9IFBhcnQ7XHJcblxyXG4vL3ZhciBNZWFzdXJlMSA9IG5ldyBNZWFzdXJlKDEpO1xyXG4vKnZhciBNZWFzdXJlMiA9IG5ldyBNZWFzdXJlKDIpO1xyXG52YXIgTWVhc3VyZTMgPSBuZXcgTWVhc3VyZSgzKTtcclxuXHJcbk1lYXN1cmUxXHJcbiAgICAuYWRkTm90ZSggKG5ldyBOb3RlKCkpLnNldER1cmF0aW9uKDEyKS5zZXRTdGVwKFwiQ1wiKS5zZXRPY3RhdmUoNCkgKVxyXG4gICAgLmFkZE5vdGUoIChuZXcgTm90ZSgpKS5zZXREdXJhdGlvbigxMikuc2V0U3RlcChcIkRcIikuc2V0T2N0YXZlKDQpIClcclxuICAgIC5hZGROb3RlKCAobmV3IE5vdGUoKSkuc2V0RHVyYXRpb24oMjQpLnNldFN0ZXAoXCJFXCIpLnNldE9jdGF2ZSg0KSApXHJcbiAgICAuYWRkTm90ZSggKG5ldyBOb3RlKCkpLnNldER1cmF0aW9uKDEyKS5zZXRTdGVwKFwiR1wiKS5zZXRPY3RhdmUoNCkgKVxyXG4gICAgLmFkZE5vdGUoIChuZXcgTm90ZSgpKS5zZXREdXJhdGlvbigxMikuc2V0U3RlcChcIkVcIikuc2V0T2N0YXZlKDQpIClcclxuICAgIC5hZGROb3RlKCAobmV3IE5vdGUoKSkuc2V0RHVyYXRpb24oMjQpLnNldFN0ZXAoXCJGXCIpLnNldE9jdGF2ZSg0KSApO1xyXG5NZWFzdXJlMlxyXG4gICAgLmFkZE5vdGUoIChuZXcgTm90ZSgpKS5zZXREdXJhdGlvbigyNCkuc2V0U3RlcChcIkdcIikuc2V0T2N0YXZlKDQpIClcclxuICAgIC5hZGROb3RlKCAobmV3IE5vdGUoKSkuc2V0RHVyYXRpb24oMjQpLnNldFN0ZXAoXCJBXCIpLnNldE9jdGF2ZSg0KSApXHJcbiAgICAuYWRkTm90ZSggKG5ldyBOb3RlKCkpLnNldER1cmF0aW9uKDI0KS5zZXRTdGVwKFwiQmJcIikuc2V0T2N0YXZlKDQpIClcclxuICAgIC5hZGROb3RlKCAobmV3IE5vdGUoKSkuc2V0RHVyYXRpb24oMjQpLnNldFN0ZXAoXCJCXCIpLnNldE9jdGF2ZSg0KSApXHJcbiAgICAuYWRkTm90ZSggKG5ldyBOb3RlKCkpLnNldER1cmF0aW9uKDI0KS5zZXRTdGVwKFwiQiNcIikuc2V0T2N0YXZlKDQpIClcclxuICAgIC5hZGROb3RlKCAobmV3IE5vdGUoKSkuc2V0RHVyYXRpb24oMjQpLnNldFN0ZXAoXCJDXCIpLnNldE9jdGF2ZSg1KSApO1xyXG5cclxudmFyIFBhcnQxID0gbmV3IFBhcnQoXCJQaWFubyB2b24gTHVrYXNcIik7XHJcblBhcnQxXHJcbiAgICAuYWRkTWVhc3VyZSggTWVhc3VyZTEgKTtcclxuICAgIC8qLmFkZE1lYXN1cmUoIE1lYXN1cmUyIClcclxuICAgIC5hZGRNZWFzdXJlKCBNZWFzdXJlMyApO1xyXG5cclxudmFyIHRoZU11c2ljID0gbmV3IENvbXBvc2l0aW9uKCk7XHJcbnRoZU11c2ljLmFkZFBhcnQoUGFydDEpOyAgICBcclxuXHJcbk9TTUQucmVuZGVyTXVzaWNYTUwoIHRoZU11c2ljLnRvTXVzaWNYTUwoKSApOyovXHJcblxyXG52YXIgdGhlU3RyZWFtID0gbmV3IE5vdGVTdHJlYW0oIG5ldyBNSURJQ29udHJvbGxlcigpKTtcclxudGhlU3RyZWFtLnNldEluYWN0aXZlKCk7XHJcblxyXG52YXIgdGhlUHJvY2Vzc29yID0gbmV3IE5vdGVQcm9jZXNzb3IoKTtcclxudmFyIHRoZVBpYW5vID0gbmV3IFBpYW5vKCk7XHJcblxyXG50aGVTdHJlYW0ucmVnaXN0ZXJDYWxsYmFjayggbm90ZSA9PiB7XHJcbiAgICBpZihub3RlLnN0ZXAgPT09ICdBJyAmJiBub3RlLm9jdGF2ZSA9PT0gMCl7XHJcbiAgICAgICAgdGhlUHJvY2Vzc29yLnByb2Nlc3NOb3RlRHVyYXRpb24oKTtcclxuICAgIH1lbHNlIGlmKG5vdGUuc3RlcCA9PSAnQicgJiYgbm90ZS5vY3RhdmUgPT09IDApe1xyXG4gICAgICAgIHRoZVByb2Nlc3Nvci5kb3dubG9hZE5vdGVzaGVldCgpO1xyXG4gICAgfWVsc2V7XHJcbiAgICAgICAgdGhlUHJvY2Vzc29yLnB1c2hOb3RlKG5vdGUpOyBcclxuICAgICAgICB0aGVQaWFuby5hZGROb3RlKCBub3RlICk7XHJcbiAgICB9XHJcbn0pO1xyXG5cclxud2luZG93LlNUUkVBTSA9IHRoZVN0cmVhbTtcclxud2luZG93LlBST0NFU1NPUiA9IHRoZVByb2Nlc3Nvcjtcclxud2luZG93LlBJQU5PID0gdGhlUGlhbm87XHJcblxyXG4vKlxyXG50aGVTdHJlYW0ucmVnaXN0ZXJDYWxsYmFjayggbm90ZSA9PiB7XHJcbiAgICBub3RlLnNldER1cmF0aW9uKCBCUE0uR0VUX0RVUkFUSU9OX0M4MDE0MCggbm90ZSApKTtcclxuICAgIFBhcnQxLmFkZE5vdGUoIG5vdGUgKTtcclxuICAgIE9TTUQucmVuZGVyTXVzaWNYTUwoIHRoZU11c2ljLnRvTXVzaWNYTUwoKSApO1xyXG59KTtcclxuXHJcbnZhciBub3RlRHVtcCA9IG5ldyBOb3RlRHVtcCgpO1xyXG50aGVTdHJlYW0ucmVnaXN0ZXJDYWxsYmFjayggbm90ZSA9PiB7XHJcbiAgICBub3RlRHVtcC5hZGROb3RlKCBub3RlICk7XHJcbiAgICBpZihub3RlLnN0ZXAgPT09ICdDJyAmJiBub3RlLm9jdGF2ZSA9PT0gMSlub3RlRHVtcC5kb3dubG9hZER1bXAoKTtcclxufSk7Ki9cclxuXHJcbi8qXHJcbnZhciBEaWdpdGFsUGlhbm8gPSBuZXcgTUlESUNvbnRyb2xsZXIoKTtcclxudmFyIFJlY29yZGVyID0gbmV3IE1JRElSZWNvcmRlcigpO1xyXG5cclxuXHJcbkRpZ2l0YWxQaWFuby5pbml0Q29udHJvbGxlcigpLnRoZW4oICgpID0+IHtcclxuXHJcbiAgICBSZWNvcmRlci5yZWdpc3Rlck91dHB1dCggRGlnaXRhbFBpYW5vLm91dHB1dCApO1xyXG4gICAgUmVjb3JkZXIucmVnaXN0ZXJOb3RlRW5kZWRFdmVudCggbm90ZSA9PiB7XHJcbiAgICAgICAgY29uc29sZS5sb2coXCJFVkVOVC1CVVMtRFVNUFwiKTtcclxuXHJcbiAgICAgICAgQlBNLkdFVF9EVVJBVElPTl9DODAxNDAoIG5vdGUgKTtcclxuXHJcbiAgICAgICAgUGFydDEuYWRkTm90ZSggbm90ZSApO1xyXG4gICAgICAgIE9TTUQucmVuZGVyTXVzaWNYTUwoIHRoZU11c2ljLnRvTXVzaWNYTUwoKSApO1xyXG4gICAgfSk7XHJcblxyXG5cclxuICAgIERpZ2l0YWxQaWFuby5vbk5vdGVPbiggKGV2ZW50KSA9PiB7XHJcbiAgICAgICAgY29uc29sZS5sb2coZXZlbnQpO1xyXG4gICAgICAgIHN3aXRjaCAoZXZlbnQubm90ZS5udW1iZXIpIHtcclxuICAgICAgICAgICAgY2FzZSAzNjpcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiRklOQUwgRFVNUCEhIVwiKTtcclxuICAgICAgICAgICAgICAgIFJlY29yZGVyLnJlY29yZGVkTm90ZXMuZm9yRWFjaCggbm90ZSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2cobm90ZS5kdXJhdGlvblRpbWVzdGFtcCk7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIHRoZU11c2ljLmRvd25sb2FkKCk7XHJcbiAgICAgICAgICAgICAgICBSZWNvcmRlci5wbGF5UmVjb3JkKCk7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSAzODpcclxuICAgICAgICAgICAgICAgIFJlY29yZGVyLmNsZWFyUmVjb3JkKCk7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgICAgICAgIFJlY29yZGVyLm5vdGVPbkV2ZW50KGV2ZW50KTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICB9KTtcclxuICAgIERpZ2l0YWxQaWFuby5vbk5vdGVPZmYoIChldmVudCkgPT4ge1xyXG4gICAgICAgIFJlY29yZGVyLm5vdGVPZmZFdmVudChldmVudCk7XHJcbiAgICB9KTtcclxufSk7IC8qKi9cclxuXHJcbiIsIi8qIChpZ25vcmVkKSAqLyIsIi8qIChpZ25vcmVkKSAqLyJdLCJzb3VyY2VSb290IjoiIn0=